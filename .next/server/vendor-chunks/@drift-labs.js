"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@drift-labs";
exports.ids = ["vendor-chunks/@drift-labs"];
exports.modules = {

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkAccountLoader.js":
/*!************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/bulkAccountLoader.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BulkAccountLoader = void 0;\nconst uuid_1 = __webpack_require__(/*! uuid */ \"(ssr)/./node_modules/uuid/dist/esm-node/index.js\");\nconst promiseTimeout_1 = __webpack_require__(/*! ../util/promiseTimeout */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/util/promiseTimeout.js\");\nconst GET_MULTIPLE_ACCOUNTS_CHUNK_SIZE = 99;\nconst oneMinute = 60 * 1000;\nclass BulkAccountLoader {\n    constructor(connection, commitment, pollingFrequency){\n        this.accountsToLoad = new Map();\n        this.bufferAndSlotMap = new Map();\n        this.errorCallbacks = new Map();\n        this.lastTimeLoadingPromiseCleared = Date.now();\n        this.mostRecentSlot = 0;\n        this.connection = connection;\n        this.commitment = commitment;\n        this.pollingFrequency = pollingFrequency;\n    }\n    async addAccount(publicKey, callback) {\n        const existingSize = this.accountsToLoad.size;\n        const callbackId = (0, uuid_1.v4)();\n        const existingAccountToLoad = this.accountsToLoad.get(publicKey.toString());\n        if (existingAccountToLoad) {\n            existingAccountToLoad.callbacks.set(callbackId, callback);\n        } else {\n            const callbacks = new Map();\n            callbacks.set(callbackId, callback);\n            const newAccountToLoad = {\n                publicKey,\n                callbacks\n            };\n            this.accountsToLoad.set(publicKey.toString(), newAccountToLoad);\n        }\n        if (existingSize === 0) {\n            this.startPolling();\n        }\n        // resolve the current loadPromise in case client wants to call load\n        await this.loadPromise;\n        return callbackId;\n    }\n    removeAccount(publicKey, callbackId) {\n        const existingAccountToLoad = this.accountsToLoad.get(publicKey.toString());\n        if (existingAccountToLoad) {\n            existingAccountToLoad.callbacks.delete(callbackId);\n            if (existingAccountToLoad.callbacks.size === 0) {\n                this.accountsToLoad.delete(existingAccountToLoad.publicKey.toString());\n            }\n        }\n        if (this.accountsToLoad.size === 0) {\n            this.stopPolling();\n        }\n    }\n    addErrorCallbacks(callback) {\n        const callbackId = (0, uuid_1.v4)();\n        this.errorCallbacks.set(callbackId, callback);\n        return callbackId;\n    }\n    removeErrorCallbacks(callbackId) {\n        this.errorCallbacks.delete(callbackId);\n    }\n    chunks(array, size) {\n        return new Array(Math.ceil(array.length / size)).fill(null).map((_, index)=>index * size).map((begin)=>array.slice(begin, begin + size));\n    }\n    async load() {\n        if (this.loadPromise) {\n            const now = Date.now();\n            if (now - this.lastTimeLoadingPromiseCleared > oneMinute) {\n                this.loadPromise = undefined;\n            } else {\n                return this.loadPromise;\n            }\n        }\n        this.loadPromise = new Promise((resolver)=>{\n            this.loadPromiseResolver = resolver;\n        });\n        this.lastTimeLoadingPromiseCleared = Date.now();\n        try {\n            const chunks = this.chunks(this.chunks(Array.from(this.accountsToLoad.values()), GET_MULTIPLE_ACCOUNTS_CHUNK_SIZE), 10);\n            await Promise.all(chunks.map((chunk)=>{\n                return this.loadChunk(chunk);\n            }));\n        } catch (e) {\n            console.error(`Error in bulkAccountLoader.load()`);\n            console.error(e);\n            for (const [_, callback] of this.errorCallbacks){\n                callback(e);\n            }\n        } finally{\n            this.loadPromiseResolver();\n            this.loadPromise = undefined;\n        }\n    }\n    async loadChunk(accountsToLoadChunks) {\n        if (accountsToLoadChunks.length === 0) {\n            return;\n        }\n        const requests = new Array();\n        for (const accountsToLoadChunk of accountsToLoadChunks){\n            const args = [\n                accountsToLoadChunk.map((accountToLoad)=>{\n                    return accountToLoad.publicKey.toBase58();\n                }),\n                {\n                    commitment: this.commitment\n                }\n            ];\n            requests.push({\n                methodName: \"getMultipleAccounts\",\n                args\n            });\n        }\n        const rpcResponses = await (0, promiseTimeout_1.promiseTimeout)(// @ts-ignore\n        this.connection._rpcBatchRequest(requests), 10 * 1000 // 30 second timeout\n        );\n        if (rpcResponses === null) {\n            this.log(\"request to rpc timed out\");\n            return;\n        }\n        for(const i in rpcResponses){\n            const rpcResponse = rpcResponses[i];\n            if (!rpcResponse.result) {\n                console.error(\"rpc response missing result:\");\n                console.log(JSON.stringify(rpcResponse));\n                continue;\n            }\n            const newSlot = rpcResponse.result.context.slot;\n            if (newSlot > this.mostRecentSlot) {\n                this.mostRecentSlot = newSlot;\n            }\n            const accountsToLoad = accountsToLoadChunks[i];\n            for(const j in accountsToLoad){\n                const accountToLoad = accountsToLoad[j];\n                const key = accountToLoad.publicKey.toBase58();\n                const oldRPCResponse = this.bufferAndSlotMap.get(key);\n                if (oldRPCResponse && newSlot <= oldRPCResponse.slot) {\n                    continue;\n                }\n                let newBuffer = undefined;\n                if (rpcResponse.result.value[j]) {\n                    const raw = rpcResponse.result.value[j].data[0];\n                    const dataType = rpcResponse.result.value[j].data[1];\n                    newBuffer = Buffer.from(raw, dataType);\n                }\n                if (!oldRPCResponse) {\n                    this.bufferAndSlotMap.set(key, {\n                        slot: newSlot,\n                        buffer: newBuffer\n                    });\n                    this.handleAccountCallbacks(accountToLoad, newBuffer, newSlot);\n                    continue;\n                }\n                const oldBuffer = oldRPCResponse.buffer;\n                if (newBuffer && (!oldBuffer || !newBuffer.equals(oldBuffer))) {\n                    this.bufferAndSlotMap.set(key, {\n                        slot: newSlot,\n                        buffer: newBuffer\n                    });\n                    this.handleAccountCallbacks(accountToLoad, newBuffer, newSlot);\n                }\n            }\n        }\n    }\n    handleAccountCallbacks(accountToLoad, buffer, slot) {\n        for (const [_, callback] of accountToLoad.callbacks){\n            try {\n                callback(buffer, slot);\n            } catch (e) {\n                console.log(\"Bulk account load: error in account callback\");\n                console.log(\"accounto to load\", accountToLoad.publicKey.toString());\n                console.log(\"buffer\", buffer.toString(\"base64\"));\n                for (const callback of accountToLoad.callbacks.values()){\n                    console.log(\"account to load cb\", callback);\n                }\n                throw e;\n            }\n        }\n    }\n    getBufferAndSlot(publicKey) {\n        return this.bufferAndSlotMap.get(publicKey.toString());\n    }\n    startPolling() {\n        if (this.intervalId) {\n            return;\n        }\n        if (this.pollingFrequency !== 0) this.intervalId = setInterval(this.load.bind(this), this.pollingFrequency);\n    }\n    stopPolling() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n    log(msg) {\n        console.log(msg);\n    }\n    updatePollingFrequency(pollingFrequency) {\n        this.stopPolling();\n        this.pollingFrequency = pollingFrequency;\n        if (this.accountsToLoad.size > 0) {\n            this.startPolling();\n        }\n    }\n}\nexports.BulkAccountLoader = BulkAccountLoader;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9idWxrQWNjb3VudExvYWRlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxTQUFTQyxtQkFBT0EsQ0FBQyw4REFBTTtBQUM3QixNQUFNQyxtQkFBbUJELG1CQUFPQSxDQUFDLCtGQUF3QjtBQUN6RCxNQUFNRSxtQ0FBbUM7QUFDekMsTUFBTUMsWUFBWSxLQUFLO0FBQ3ZCLE1BQU1MO0lBQ0ZNLFlBQVlDLFVBQVUsRUFBRUMsVUFBVSxFQUFFQyxnQkFBZ0IsQ0FBRTtRQUNsRCxJQUFJLENBQUNDLGNBQWMsR0FBRyxJQUFJQztRQUMxQixJQUFJLENBQUNDLGdCQUFnQixHQUFHLElBQUlEO1FBQzVCLElBQUksQ0FBQ0UsY0FBYyxHQUFHLElBQUlGO1FBQzFCLElBQUksQ0FBQ0csNkJBQTZCLEdBQUdDLEtBQUtDLEdBQUc7UUFDN0MsSUFBSSxDQUFDQyxjQUFjLEdBQUc7UUFDdEIsSUFBSSxDQUFDVixVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLGdCQUFnQixHQUFHQTtJQUM1QjtJQUNBLE1BQU1TLFdBQVdDLFNBQVMsRUFBRUMsUUFBUSxFQUFFO1FBQ2xDLE1BQU1DLGVBQWUsSUFBSSxDQUFDWCxjQUFjLENBQUNZLElBQUk7UUFDN0MsTUFBTUMsYUFBYSxDQUFDLEdBQUd0QixPQUFPdUIsRUFBRTtRQUNoQyxNQUFNQyx3QkFBd0IsSUFBSSxDQUFDZixjQUFjLENBQUNnQixHQUFHLENBQUNQLFVBQVVRLFFBQVE7UUFDeEUsSUFBSUYsdUJBQXVCO1lBQ3ZCQSxzQkFBc0JHLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDTixZQUFZSDtRQUNwRCxPQUNLO1lBQ0QsTUFBTVEsWUFBWSxJQUFJakI7WUFDdEJpQixVQUFVQyxHQUFHLENBQUNOLFlBQVlIO1lBQzFCLE1BQU1VLG1CQUFtQjtnQkFDckJYO2dCQUNBUztZQUNKO1lBQ0EsSUFBSSxDQUFDbEIsY0FBYyxDQUFDbUIsR0FBRyxDQUFDVixVQUFVUSxRQUFRLElBQUlHO1FBQ2xEO1FBQ0EsSUFBSVQsaUJBQWlCLEdBQUc7WUFDcEIsSUFBSSxDQUFDVSxZQUFZO1FBQ3JCO1FBQ0Esb0VBQW9FO1FBQ3BFLE1BQU0sSUFBSSxDQUFDQyxXQUFXO1FBQ3RCLE9BQU9UO0lBQ1g7SUFDQVUsY0FBY2QsU0FBUyxFQUFFSSxVQUFVLEVBQUU7UUFDakMsTUFBTUUsd0JBQXdCLElBQUksQ0FBQ2YsY0FBYyxDQUFDZ0IsR0FBRyxDQUFDUCxVQUFVUSxRQUFRO1FBQ3hFLElBQUlGLHVCQUF1QjtZQUN2QkEsc0JBQXNCRyxTQUFTLENBQUNNLE1BQU0sQ0FBQ1g7WUFDdkMsSUFBSUUsc0JBQXNCRyxTQUFTLENBQUNOLElBQUksS0FBSyxHQUFHO2dCQUM1QyxJQUFJLENBQUNaLGNBQWMsQ0FBQ3dCLE1BQU0sQ0FBQ1Qsc0JBQXNCTixTQUFTLENBQUNRLFFBQVE7WUFDdkU7UUFDSjtRQUNBLElBQUksSUFBSSxDQUFDakIsY0FBYyxDQUFDWSxJQUFJLEtBQUssR0FBRztZQUNoQyxJQUFJLENBQUNhLFdBQVc7UUFDcEI7SUFDSjtJQUNBQyxrQkFBa0JoQixRQUFRLEVBQUU7UUFDeEIsTUFBTUcsYUFBYSxDQUFDLEdBQUd0QixPQUFPdUIsRUFBRTtRQUNoQyxJQUFJLENBQUNYLGNBQWMsQ0FBQ2dCLEdBQUcsQ0FBQ04sWUFBWUg7UUFDcEMsT0FBT0c7SUFDWDtJQUNBYyxxQkFBcUJkLFVBQVUsRUFBRTtRQUM3QixJQUFJLENBQUNWLGNBQWMsQ0FBQ3FCLE1BQU0sQ0FBQ1g7SUFDL0I7SUFDQWUsT0FBT0MsS0FBSyxFQUFFakIsSUFBSSxFQUFFO1FBQ2hCLE9BQU8sSUFBSWtCLE1BQU1DLEtBQUtDLElBQUksQ0FBQ0gsTUFBTUksTUFBTSxHQUFHckIsT0FDckNzQixJQUFJLENBQUMsTUFDTEMsR0FBRyxDQUFDLENBQUNDLEdBQUdDLFFBQVVBLFFBQVF6QixNQUMxQnVCLEdBQUcsQ0FBQyxDQUFDRyxRQUFVVCxNQUFNVSxLQUFLLENBQUNELE9BQU9BLFFBQVExQjtJQUNuRDtJQUNBLE1BQU00QixPQUFPO1FBQ1QsSUFBSSxJQUFJLENBQUNsQixXQUFXLEVBQUU7WUFDbEIsTUFBTWhCLE1BQU1ELEtBQUtDLEdBQUc7WUFDcEIsSUFBSUEsTUFBTSxJQUFJLENBQUNGLDZCQUE2QixHQUFHVCxXQUFXO2dCQUN0RCxJQUFJLENBQUMyQixXQUFXLEdBQUdtQjtZQUN2QixPQUNLO2dCQUNELE9BQU8sSUFBSSxDQUFDbkIsV0FBVztZQUMzQjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxXQUFXLEdBQUcsSUFBSW9CLFFBQVEsQ0FBQ0M7WUFDNUIsSUFBSSxDQUFDQyxtQkFBbUIsR0FBR0Q7UUFDL0I7UUFDQSxJQUFJLENBQUN2Qyw2QkFBNkIsR0FBR0MsS0FBS0MsR0FBRztRQUM3QyxJQUFJO1lBQ0EsTUFBTXNCLFNBQVMsSUFBSSxDQUFDQSxNQUFNLENBQUMsSUFBSSxDQUFDQSxNQUFNLENBQUNFLE1BQU1lLElBQUksQ0FBQyxJQUFJLENBQUM3QyxjQUFjLENBQUM4QyxNQUFNLEtBQUtwRCxtQ0FBbUM7WUFDcEgsTUFBTWdELFFBQVFLLEdBQUcsQ0FBQ25CLE9BQU9PLEdBQUcsQ0FBQyxDQUFDYTtnQkFDMUIsT0FBTyxJQUFJLENBQUNDLFNBQVMsQ0FBQ0Q7WUFDMUI7UUFDSixFQUNBLE9BQU9FLEdBQUc7WUFDTkMsUUFBUUMsS0FBSyxDQUFDLENBQUMsaUNBQWlDLENBQUM7WUFDakRELFFBQVFDLEtBQUssQ0FBQ0Y7WUFDZCxLQUFLLE1BQU0sQ0FBQ2QsR0FBRzFCLFNBQVMsSUFBSSxJQUFJLENBQUNQLGNBQWMsQ0FBRTtnQkFDN0NPLFNBQVN3QztZQUNiO1FBQ0osU0FDUTtZQUNKLElBQUksQ0FBQ04sbUJBQW1CO1lBQ3hCLElBQUksQ0FBQ3RCLFdBQVcsR0FBR21CO1FBQ3ZCO0lBQ0o7SUFDQSxNQUFNUSxVQUFVSSxvQkFBb0IsRUFBRTtRQUNsQyxJQUFJQSxxQkFBcUJwQixNQUFNLEtBQUssR0FBRztZQUNuQztRQUNKO1FBQ0EsTUFBTXFCLFdBQVcsSUFBSXhCO1FBQ3JCLEtBQUssTUFBTXlCLHVCQUF1QkYscUJBQXNCO1lBQ3BELE1BQU1HLE9BQU87Z0JBQ1RELG9CQUFvQnBCLEdBQUcsQ0FBQyxDQUFDc0I7b0JBQ3JCLE9BQU9BLGNBQWNoRCxTQUFTLENBQUNpRCxRQUFRO2dCQUMzQztnQkFDQTtvQkFBRTVELFlBQVksSUFBSSxDQUFDQSxVQUFVO2dCQUFDO2FBQ2pDO1lBQ0R3RCxTQUFTSyxJQUFJLENBQUM7Z0JBQ1ZDLFlBQVk7Z0JBQ1pKO1lBQ0o7UUFDSjtRQUNBLE1BQU1LLGVBQWUsTUFBTSxDQUFDLEdBQUdwRSxpQkFBaUJxRSxjQUFjLEVBQzlELGFBQWE7UUFDYixJQUFJLENBQUNqRSxVQUFVLENBQUNrRSxnQkFBZ0IsQ0FBQ1QsV0FBVyxLQUFLLEtBQUssb0JBQW9COztRQUUxRSxJQUFJTyxpQkFBaUIsTUFBTTtZQUN2QixJQUFJLENBQUNHLEdBQUcsQ0FBQztZQUNUO1FBQ0o7UUFDQSxJQUFLLE1BQU1DLEtBQUtKLGFBQWM7WUFDMUIsTUFBTUssY0FBY0wsWUFBWSxDQUFDSSxFQUFFO1lBQ25DLElBQUksQ0FBQ0MsWUFBWUMsTUFBTSxFQUFFO2dCQUNyQmhCLFFBQVFDLEtBQUssQ0FBQztnQkFDZEQsUUFBUWEsR0FBRyxDQUFDSSxLQUFLQyxTQUFTLENBQUNIO2dCQUMzQjtZQUNKO1lBQ0EsTUFBTUksVUFBVUosWUFBWUMsTUFBTSxDQUFDSSxPQUFPLENBQUNDLElBQUk7WUFDL0MsSUFBSUYsVUFBVSxJQUFJLENBQUMvRCxjQUFjLEVBQUU7Z0JBQy9CLElBQUksQ0FBQ0EsY0FBYyxHQUFHK0Q7WUFDMUI7WUFDQSxNQUFNdEUsaUJBQWlCcUQsb0JBQW9CLENBQUNZLEVBQUU7WUFDOUMsSUFBSyxNQUFNUSxLQUFLekUsZUFBZ0I7Z0JBQzVCLE1BQU15RCxnQkFBZ0J6RCxjQUFjLENBQUN5RSxFQUFFO2dCQUN2QyxNQUFNQyxNQUFNakIsY0FBY2hELFNBQVMsQ0FBQ2lELFFBQVE7Z0JBQzVDLE1BQU1pQixpQkFBaUIsSUFBSSxDQUFDekUsZ0JBQWdCLENBQUNjLEdBQUcsQ0FBQzBEO2dCQUNqRCxJQUFJQyxrQkFBa0JMLFdBQVdLLGVBQWVILElBQUksRUFBRTtvQkFDbEQ7Z0JBQ0o7Z0JBQ0EsSUFBSUksWUFBWW5DO2dCQUNoQixJQUFJeUIsWUFBWUMsTUFBTSxDQUFDOUUsS0FBSyxDQUFDb0YsRUFBRSxFQUFFO29CQUM3QixNQUFNSSxNQUFNWCxZQUFZQyxNQUFNLENBQUM5RSxLQUFLLENBQUNvRixFQUFFLENBQUNLLElBQUksQ0FBQyxFQUFFO29CQUMvQyxNQUFNQyxXQUFXYixZQUFZQyxNQUFNLENBQUM5RSxLQUFLLENBQUNvRixFQUFFLENBQUNLLElBQUksQ0FBQyxFQUFFO29CQUNwREYsWUFBWUksT0FBT25DLElBQUksQ0FBQ2dDLEtBQUtFO2dCQUNqQztnQkFDQSxJQUFJLENBQUNKLGdCQUFnQjtvQkFDakIsSUFBSSxDQUFDekUsZ0JBQWdCLENBQUNpQixHQUFHLENBQUN1RCxLQUFLO3dCQUMzQkYsTUFBTUY7d0JBQ05XLFFBQVFMO29CQUNaO29CQUNBLElBQUksQ0FBQ00sc0JBQXNCLENBQUN6QixlQUFlbUIsV0FBV047b0JBQ3REO2dCQUNKO2dCQUNBLE1BQU1hLFlBQVlSLGVBQWVNLE1BQU07Z0JBQ3ZDLElBQUlMLGFBQWMsRUFBQ08sYUFBYSxDQUFDUCxVQUFVUSxNQUFNLENBQUNELFVBQVMsR0FBSTtvQkFDM0QsSUFBSSxDQUFDakYsZ0JBQWdCLENBQUNpQixHQUFHLENBQUN1RCxLQUFLO3dCQUMzQkYsTUFBTUY7d0JBQ05XLFFBQVFMO29CQUNaO29CQUNBLElBQUksQ0FBQ00sc0JBQXNCLENBQUN6QixlQUFlbUIsV0FBV047Z0JBQzFEO1lBQ0o7UUFDSjtJQUNKO0lBQ0FZLHVCQUF1QnpCLGFBQWEsRUFBRXdCLE1BQU0sRUFBRVQsSUFBSSxFQUFFO1FBQ2hELEtBQUssTUFBTSxDQUFDcEMsR0FBRzFCLFNBQVMsSUFBSStDLGNBQWN2QyxTQUFTLENBQUU7WUFDakQsSUFBSTtnQkFDQVIsU0FBU3VFLFFBQVFUO1lBQ3JCLEVBQ0EsT0FBT3RCLEdBQUc7Z0JBQ05DLFFBQVFhLEdBQUcsQ0FBQztnQkFDWmIsUUFBUWEsR0FBRyxDQUFDLG9CQUFvQlAsY0FBY2hELFNBQVMsQ0FBQ1EsUUFBUTtnQkFDaEVrQyxRQUFRYSxHQUFHLENBQUMsVUFBVWlCLE9BQU9oRSxRQUFRLENBQUM7Z0JBQ3RDLEtBQUssTUFBTVAsWUFBWStDLGNBQWN2QyxTQUFTLENBQUM0QixNQUFNLEdBQUk7b0JBQ3JESyxRQUFRYSxHQUFHLENBQUMsc0JBQXNCdEQ7Z0JBQ3RDO2dCQUNBLE1BQU13QztZQUNWO1FBQ0o7SUFDSjtJQUNBbUMsaUJBQWlCNUUsU0FBUyxFQUFFO1FBQ3hCLE9BQU8sSUFBSSxDQUFDUCxnQkFBZ0IsQ0FBQ2MsR0FBRyxDQUFDUCxVQUFVUSxRQUFRO0lBQ3ZEO0lBQ0FJLGVBQWU7UUFDWCxJQUFJLElBQUksQ0FBQ2lFLFVBQVUsRUFBRTtZQUNqQjtRQUNKO1FBQ0EsSUFBSSxJQUFJLENBQUN2RixnQkFBZ0IsS0FBSyxHQUMxQixJQUFJLENBQUN1RixVQUFVLEdBQUdDLFlBQVksSUFBSSxDQUFDL0MsSUFBSSxDQUFDZ0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUN6RixnQkFBZ0I7SUFDakY7SUFDQTBCLGNBQWM7UUFDVixJQUFJLElBQUksQ0FBQzZELFVBQVUsRUFBRTtZQUNqQkcsY0FBYyxJQUFJLENBQUNILFVBQVU7WUFDN0IsSUFBSSxDQUFDQSxVQUFVLEdBQUc3QztRQUN0QjtJQUNKO0lBQ0F1QixJQUFJMEIsR0FBRyxFQUFFO1FBQ0x2QyxRQUFRYSxHQUFHLENBQUMwQjtJQUNoQjtJQUNBQyx1QkFBdUI1RixnQkFBZ0IsRUFBRTtRQUNyQyxJQUFJLENBQUMwQixXQUFXO1FBQ2hCLElBQUksQ0FBQzFCLGdCQUFnQixHQUFHQTtRQUN4QixJQUFJLElBQUksQ0FBQ0MsY0FBYyxDQUFDWSxJQUFJLEdBQUcsR0FBRztZQUM5QixJQUFJLENBQUNTLFlBQVk7UUFDckI7SUFDSjtBQUNKO0FBQ0FqQyx5QkFBeUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvYnVsa0FjY291bnRMb2FkZXIuanM/ZTkxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQnVsa0FjY291bnRMb2FkZXIgPSB2b2lkIDA7XG5jb25zdCB1dWlkXzEgPSByZXF1aXJlKFwidXVpZFwiKTtcbmNvbnN0IHByb21pc2VUaW1lb3V0XzEgPSByZXF1aXJlKFwiLi4vdXRpbC9wcm9taXNlVGltZW91dFwiKTtcbmNvbnN0IEdFVF9NVUxUSVBMRV9BQ0NPVU5UU19DSFVOS19TSVpFID0gOTk7XG5jb25zdCBvbmVNaW51dGUgPSA2MCAqIDEwMDA7XG5jbGFzcyBCdWxrQWNjb3VudExvYWRlciB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbiwgY29tbWl0bWVudCwgcG9sbGluZ0ZyZXF1ZW5jeSkge1xuICAgICAgICB0aGlzLmFjY291bnRzVG9Mb2FkID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmJ1ZmZlckFuZFNsb3RNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFja3MgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubGFzdFRpbWVMb2FkaW5nUHJvbWlzZUNsZWFyZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLm1vc3RSZWNlbnRTbG90ID0gMDtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5jb21taXRtZW50ID0gY29tbWl0bWVudDtcbiAgICAgICAgdGhpcy5wb2xsaW5nRnJlcXVlbmN5ID0gcG9sbGluZ0ZyZXF1ZW5jeTtcbiAgICB9XG4gICAgYXN5bmMgYWRkQWNjb3VudChwdWJsaWNLZXksIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU2l6ZSA9IHRoaXMuYWNjb3VudHNUb0xvYWQuc2l6ZTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tJZCA9ICgwLCB1dWlkXzEudjQpKCk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudFRvTG9hZCA9IHRoaXMuYWNjb3VudHNUb0xvYWQuZ2V0KHB1YmxpY0tleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nQWNjb3VudFRvTG9hZCkge1xuICAgICAgICAgICAgZXhpc3RpbmdBY2NvdW50VG9Mb2FkLmNhbGxiYWNrcy5zZXQoY2FsbGJhY2tJZCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnNldChjYWxsYmFja0lkLCBjYWxsYmFjayk7XG4gICAgICAgICAgICBjb25zdCBuZXdBY2NvdW50VG9Mb2FkID0ge1xuICAgICAgICAgICAgICAgIHB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBjYWxsYmFja3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY2NvdW50c1RvTG9hZC5zZXQocHVibGljS2V5LnRvU3RyaW5nKCksIG5ld0FjY291bnRUb0xvYWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleGlzdGluZ1NpemUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVzb2x2ZSB0aGUgY3VycmVudCBsb2FkUHJvbWlzZSBpbiBjYXNlIGNsaWVudCB3YW50cyB0byBjYWxsIGxvYWRcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkUHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrSWQ7XG4gICAgfVxuICAgIHJlbW92ZUFjY291bnQocHVibGljS2V5LCBjYWxsYmFja0lkKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQWNjb3VudFRvTG9hZCA9IHRoaXMuYWNjb3VudHNUb0xvYWQuZ2V0KHB1YmxpY0tleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nQWNjb3VudFRvTG9hZCkge1xuICAgICAgICAgICAgZXhpc3RpbmdBY2NvdW50VG9Mb2FkLmNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2tJZCk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdBY2NvdW50VG9Mb2FkLmNhbGxiYWNrcy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY2NvdW50c1RvTG9hZC5kZWxldGUoZXhpc3RpbmdBY2NvdW50VG9Mb2FkLnB1YmxpY0tleS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hY2NvdW50c1RvTG9hZC5zaXplID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkRXJyb3JDYWxsYmFja3MoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tJZCA9ICgwLCB1dWlkXzEudjQpKCk7XG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFja3Muc2V0KGNhbGxiYWNrSWQsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrSWQ7XG4gICAgfVxuICAgIHJlbW92ZUVycm9yQ2FsbGJhY2tzKGNhbGxiYWNrSWQpIHtcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2tJZCk7XG4gICAgfVxuICAgIGNodW5rcyhhcnJheSwgc2l6ZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5KE1hdGguY2VpbChhcnJheS5sZW5ndGggLyBzaXplKSlcbiAgICAgICAgICAgIC5maWxsKG51bGwpXG4gICAgICAgICAgICAubWFwKChfLCBpbmRleCkgPT4gaW5kZXggKiBzaXplKVxuICAgICAgICAgICAgLm1hcCgoYmVnaW4pID0+IGFycmF5LnNsaWNlKGJlZ2luLCBiZWdpbiArIHNpemUpKTtcbiAgICB9XG4gICAgYXN5bmMgbG9hZCgpIHtcbiAgICAgICAgaWYgKHRoaXMubG9hZFByb21pc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBpZiAobm93IC0gdGhpcy5sYXN0VGltZUxvYWRpbmdQcm9taXNlQ2xlYXJlZCA+IG9uZU1pbnV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZFByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkUHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvYWRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvYWRQcm9taXNlUmVzb2x2ZXIgPSByZXNvbHZlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGFzdFRpbWVMb2FkaW5nUHJvbWlzZUNsZWFyZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY2h1bmtzID0gdGhpcy5jaHVua3ModGhpcy5jaHVua3MoQXJyYXkuZnJvbSh0aGlzLmFjY291bnRzVG9Mb2FkLnZhbHVlcygpKSwgR0VUX01VTFRJUExFX0FDQ09VTlRTX0NIVU5LX1NJWkUpLCAxMCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjaHVua3MubWFwKChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRDaHVuayhjaHVuayk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGJ1bGtBY2NvdW50TG9hZGVyLmxvYWQoKWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW18sIGNhbGxiYWNrXSBvZiB0aGlzLmVycm9yQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRQcm9taXNlUmVzb2x2ZXIoKTtcbiAgICAgICAgICAgIHRoaXMubG9hZFByb21pc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbG9hZENodW5rKGFjY291bnRzVG9Mb2FkQ2h1bmtzKSB7XG4gICAgICAgIGlmIChhY2NvdW50c1RvTG9hZENodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGFjY291bnRzVG9Mb2FkQ2h1bmsgb2YgYWNjb3VudHNUb0xvYWRDaHVua3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBbXG4gICAgICAgICAgICAgICAgYWNjb3VudHNUb0xvYWRDaHVuay5tYXAoKGFjY291bnRUb0xvYWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY291bnRUb0xvYWQucHVibGljS2V5LnRvQmFzZTU4KCk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgeyBjb21taXRtZW50OiB0aGlzLmNvbW1pdG1lbnQgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICByZXF1ZXN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnZ2V0TXVsdGlwbGVBY2NvdW50cycsXG4gICAgICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJwY1Jlc3BvbnNlcyA9IGF3YWl0ICgwLCBwcm9taXNlVGltZW91dF8xLnByb21pc2VUaW1lb3V0KShcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uX3JwY0JhdGNoUmVxdWVzdChyZXF1ZXN0cyksIDEwICogMTAwMCAvLyAzMCBzZWNvbmQgdGltZW91dFxuICAgICAgICApO1xuICAgICAgICBpZiAocnBjUmVzcG9uc2VzID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmxvZygncmVxdWVzdCB0byBycGMgdGltZWQgb3V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpIGluIHJwY1Jlc3BvbnNlcykge1xuICAgICAgICAgICAgY29uc3QgcnBjUmVzcG9uc2UgPSBycGNSZXNwb25zZXNbaV07XG4gICAgICAgICAgICBpZiAoIXJwY1Jlc3BvbnNlLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3JwYyByZXNwb25zZSBtaXNzaW5nIHJlc3VsdDonKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShycGNSZXNwb25zZSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3U2xvdCA9IHJwY1Jlc3BvbnNlLnJlc3VsdC5jb250ZXh0LnNsb3Q7XG4gICAgICAgICAgICBpZiAobmV3U2xvdCA+IHRoaXMubW9zdFJlY2VudFNsb3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vc3RSZWNlbnRTbG90ID0gbmV3U2xvdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRzVG9Mb2FkID0gYWNjb3VudHNUb0xvYWRDaHVua3NbaV07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGogaW4gYWNjb3VudHNUb0xvYWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50VG9Mb2FkID0gYWNjb3VudHNUb0xvYWRbal07XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYWNjb3VudFRvTG9hZC5wdWJsaWNLZXkudG9CYXNlNTgoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRSUENSZXNwb25zZSA9IHRoaXMuYnVmZmVyQW5kU2xvdE1hcC5nZXQoa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAob2xkUlBDUmVzcG9uc2UgJiYgbmV3U2xvdCA8PSBvbGRSUENSZXNwb25zZS5zbG90KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgbmV3QnVmZmVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChycGNSZXNwb25zZS5yZXN1bHQudmFsdWVbal0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3ID0gcnBjUmVzcG9uc2UucmVzdWx0LnZhbHVlW2pdLmRhdGFbMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFUeXBlID0gcnBjUmVzcG9uc2UucmVzdWx0LnZhbHVlW2pdLmRhdGFbMV07XG4gICAgICAgICAgICAgICAgICAgIG5ld0J1ZmZlciA9IEJ1ZmZlci5mcm9tKHJhdywgZGF0YVR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIW9sZFJQQ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyQW5kU2xvdE1hcC5zZXQoa2V5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbG90OiBuZXdTbG90LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiBuZXdCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFjY291bnRDYWxsYmFja3MoYWNjb3VudFRvTG9hZCwgbmV3QnVmZmVyLCBuZXdTbG90KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG9sZEJ1ZmZlciA9IG9sZFJQQ1Jlc3BvbnNlLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICBpZiAobmV3QnVmZmVyICYmICghb2xkQnVmZmVyIHx8ICFuZXdCdWZmZXIuZXF1YWxzKG9sZEJ1ZmZlcikpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyQW5kU2xvdE1hcC5zZXQoa2V5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbG90OiBuZXdTbG90LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyOiBuZXdCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFjY291bnRDYWxsYmFja3MoYWNjb3VudFRvTG9hZCwgbmV3QnVmZmVyLCBuZXdTbG90KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQWNjb3VudENhbGxiYWNrcyhhY2NvdW50VG9Mb2FkLCBidWZmZXIsIHNsb3QpIHtcbiAgICAgICAgZm9yIChjb25zdCBbXywgY2FsbGJhY2tdIG9mIGFjY291bnRUb0xvYWQuY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGJ1ZmZlciwgc2xvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCdWxrIGFjY291bnQgbG9hZDogZXJyb3IgaW4gYWNjb3VudCBjYWxsYmFjaycpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhY2NvdW50byB0byBsb2FkJywgYWNjb3VudFRvTG9hZC5wdWJsaWNLZXkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2J1ZmZlcicsIGJ1ZmZlci50b1N0cmluZygnYmFzZTY0JykpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgYWNjb3VudFRvTG9hZC5jYWxsYmFja3MudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FjY291bnQgdG8gbG9hZCBjYicsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRCdWZmZXJBbmRTbG90KHB1YmxpY0tleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJBbmRTbG90TWFwLmdldChwdWJsaWNLZXkudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHN0YXJ0UG9sbGluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvbGxpbmdGcmVxdWVuY3kgIT09IDApXG4gICAgICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh0aGlzLmxvYWQuYmluZCh0aGlzKSwgdGhpcy5wb2xsaW5nRnJlcXVlbmN5KTtcbiAgICB9XG4gICAgc3RvcFBvbGxpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVydmFsSWQpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBsb2cobXNnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XG4gICAgfVxuICAgIHVwZGF0ZVBvbGxpbmdGcmVxdWVuY3kocG9sbGluZ0ZyZXF1ZW5jeSkge1xuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucG9sbGluZ0ZyZXF1ZW5jeSA9IHBvbGxpbmdGcmVxdWVuY3k7XG4gICAgICAgIGlmICh0aGlzLmFjY291bnRzVG9Mb2FkLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5CdWxrQWNjb3VudExvYWRlciA9IEJ1bGtBY2NvdW50TG9hZGVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQnVsa0FjY291bnRMb2FkZXIiLCJ1dWlkXzEiLCJyZXF1aXJlIiwicHJvbWlzZVRpbWVvdXRfMSIsIkdFVF9NVUxUSVBMRV9BQ0NPVU5UU19DSFVOS19TSVpFIiwib25lTWludXRlIiwiY29uc3RydWN0b3IiLCJjb25uZWN0aW9uIiwiY29tbWl0bWVudCIsInBvbGxpbmdGcmVxdWVuY3kiLCJhY2NvdW50c1RvTG9hZCIsIk1hcCIsImJ1ZmZlckFuZFNsb3RNYXAiLCJlcnJvckNhbGxiYWNrcyIsImxhc3RUaW1lTG9hZGluZ1Byb21pc2VDbGVhcmVkIiwiRGF0ZSIsIm5vdyIsIm1vc3RSZWNlbnRTbG90IiwiYWRkQWNjb3VudCIsInB1YmxpY0tleSIsImNhbGxiYWNrIiwiZXhpc3RpbmdTaXplIiwic2l6ZSIsImNhbGxiYWNrSWQiLCJ2NCIsImV4aXN0aW5nQWNjb3VudFRvTG9hZCIsImdldCIsInRvU3RyaW5nIiwiY2FsbGJhY2tzIiwic2V0IiwibmV3QWNjb3VudFRvTG9hZCIsInN0YXJ0UG9sbGluZyIsImxvYWRQcm9taXNlIiwicmVtb3ZlQWNjb3VudCIsImRlbGV0ZSIsInN0b3BQb2xsaW5nIiwiYWRkRXJyb3JDYWxsYmFja3MiLCJyZW1vdmVFcnJvckNhbGxiYWNrcyIsImNodW5rcyIsImFycmF5IiwiQXJyYXkiLCJNYXRoIiwiY2VpbCIsImxlbmd0aCIsImZpbGwiLCJtYXAiLCJfIiwiaW5kZXgiLCJiZWdpbiIsInNsaWNlIiwibG9hZCIsInVuZGVmaW5lZCIsIlByb21pc2UiLCJyZXNvbHZlciIsImxvYWRQcm9taXNlUmVzb2x2ZXIiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiY2h1bmsiLCJsb2FkQ2h1bmsiLCJlIiwiY29uc29sZSIsImVycm9yIiwiYWNjb3VudHNUb0xvYWRDaHVua3MiLCJyZXF1ZXN0cyIsImFjY291bnRzVG9Mb2FkQ2h1bmsiLCJhcmdzIiwiYWNjb3VudFRvTG9hZCIsInRvQmFzZTU4IiwicHVzaCIsIm1ldGhvZE5hbWUiLCJycGNSZXNwb25zZXMiLCJwcm9taXNlVGltZW91dCIsIl9ycGNCYXRjaFJlcXVlc3QiLCJsb2ciLCJpIiwicnBjUmVzcG9uc2UiLCJyZXN1bHQiLCJKU09OIiwic3RyaW5naWZ5IiwibmV3U2xvdCIsImNvbnRleHQiLCJzbG90IiwiaiIsImtleSIsIm9sZFJQQ1Jlc3BvbnNlIiwibmV3QnVmZmVyIiwicmF3IiwiZGF0YSIsImRhdGFUeXBlIiwiQnVmZmVyIiwiYnVmZmVyIiwiaGFuZGxlQWNjb3VudENhbGxiYWNrcyIsIm9sZEJ1ZmZlciIsImVxdWFscyIsImdldEJ1ZmZlckFuZFNsb3QiLCJpbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJiaW5kIiwiY2xlYXJJbnRlcnZhbCIsIm1zZyIsInVwZGF0ZVBvbGxpbmdGcmVxdWVuY3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkAccountLoader.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkUserStatsSubscription.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/bulkUserStatsSubscription.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.bulkPollingUserStatsSubscribe = void 0;\n/**\n * @param userStats\n * @param accountLoader\n */ async function bulkPollingUserStatsSubscribe(userStats, accountLoader) {\n    if (userStats.length === 0) {\n        await accountLoader.load();\n        return;\n    }\n    await Promise.all(userStats.map((userStat)=>{\n        return userStat.accountSubscriber.addToAccountLoader();\n    }));\n    await accountLoader.load();\n    await Promise.all(userStats.map(async (userStat)=>{\n        return userStat.subscribe();\n    }));\n}\nexports.bulkPollingUserStatsSubscribe = bulkPollingUserStatsSubscribe;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9idWxrVXNlclN0YXRzU3Vic2NyaXB0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQ0FBcUMsR0FBRyxLQUFLO0FBQzdDOzs7Q0FHQyxHQUNELGVBQWVFLDhCQUE4QkMsU0FBUyxFQUFFQyxhQUFhO0lBQ2pFLElBQUlELFVBQVVFLE1BQU0sS0FBSyxHQUFHO1FBQ3hCLE1BQU1ELGNBQWNFLElBQUk7UUFDeEI7SUFDSjtJQUNBLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0wsVUFBVU0sR0FBRyxDQUFDLENBQUNDO1FBQzdCLE9BQU9BLFNBQVNDLGlCQUFpQixDQUFDQyxrQkFBa0I7SUFDeEQ7SUFDQSxNQUFNUixjQUFjRSxJQUFJO0lBQ3hCLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0wsVUFBVU0sR0FBRyxDQUFDLE9BQU9DO1FBQ25DLE9BQU9BLFNBQVNHLFNBQVM7SUFDN0I7QUFDSjtBQUNBYixxQ0FBcUMsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvYnVsa1VzZXJTdGF0c1N1YnNjcmlwdGlvbi5qcz84ZDI0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5idWxrUG9sbGluZ1VzZXJTdGF0c1N1YnNjcmliZSA9IHZvaWQgMDtcbi8qKlxuICogQHBhcmFtIHVzZXJTdGF0c1xuICogQHBhcmFtIGFjY291bnRMb2FkZXJcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVsa1BvbGxpbmdVc2VyU3RhdHNTdWJzY3JpYmUodXNlclN0YXRzLCBhY2NvdW50TG9hZGVyKSB7XG4gICAgaWYgKHVzZXJTdGF0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYXdhaXQgYWNjb3VudExvYWRlci5sb2FkKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodXNlclN0YXRzLm1hcCgodXNlclN0YXQpID0+IHtcbiAgICAgICAgcmV0dXJuIHVzZXJTdGF0LmFjY291bnRTdWJzY3JpYmVyLmFkZFRvQWNjb3VudExvYWRlcigpO1xuICAgIH0pKTtcbiAgICBhd2FpdCBhY2NvdW50TG9hZGVyLmxvYWQoKTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh1c2VyU3RhdHMubWFwKGFzeW5jICh1c2VyU3RhdCkgPT4ge1xuICAgICAgICByZXR1cm4gdXNlclN0YXQuc3Vic2NyaWJlKCk7XG4gICAgfSkpO1xufVxuZXhwb3J0cy5idWxrUG9sbGluZ1VzZXJTdGF0c1N1YnNjcmliZSA9IGJ1bGtQb2xsaW5nVXNlclN0YXRzU3Vic2NyaWJlO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYnVsa1BvbGxpbmdVc2VyU3RhdHNTdWJzY3JpYmUiLCJ1c2VyU3RhdHMiLCJhY2NvdW50TG9hZGVyIiwibGVuZ3RoIiwibG9hZCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJ1c2VyU3RhdCIsImFjY291bnRTdWJzY3JpYmVyIiwiYWRkVG9BY2NvdW50TG9hZGVyIiwic3Vic2NyaWJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkUserStatsSubscription.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkUserSubscription.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/bulkUserSubscription.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.bulkPollingUserSubscribe = void 0;\n/**\n * @param users\n * @param accountLoader\n */ async function bulkPollingUserSubscribe(users, accountLoader) {\n    if (users.length === 0) {\n        await accountLoader.load();\n        return;\n    }\n    await Promise.all(users.map((user)=>{\n        return user.accountSubscriber.addToAccountLoader();\n    }));\n    await accountLoader.load();\n    await Promise.all(users.map(async (user)=>{\n        return user.subscribe();\n    }));\n}\nexports.bulkPollingUserSubscribe = bulkPollingUserSubscribe;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9idWxrVXNlclN1YnNjcmlwdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0NBQWdDLEdBQUcsS0FBSztBQUN4Qzs7O0NBR0MsR0FDRCxlQUFlRSx5QkFBeUJDLEtBQUssRUFBRUMsYUFBYTtJQUN4RCxJQUFJRCxNQUFNRSxNQUFNLEtBQUssR0FBRztRQUNwQixNQUFNRCxjQUFjRSxJQUFJO1FBQ3hCO0lBQ0o7SUFDQSxNQUFNQyxRQUFRQyxHQUFHLENBQUNMLE1BQU1NLEdBQUcsQ0FBQyxDQUFDQztRQUN6QixPQUFPQSxLQUFLQyxpQkFBaUIsQ0FBQ0Msa0JBQWtCO0lBQ3BEO0lBQ0EsTUFBTVIsY0FBY0UsSUFBSTtJQUN4QixNQUFNQyxRQUFRQyxHQUFHLENBQUNMLE1BQU1NLEdBQUcsQ0FBQyxPQUFPQztRQUMvQixPQUFPQSxLQUFLRyxTQUFTO0lBQ3pCO0FBQ0o7QUFDQWIsZ0NBQWdDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2FjY291bnRzL2J1bGtVc2VyU3Vic2NyaXB0aW9uLmpzP2FiMDQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmJ1bGtQb2xsaW5nVXNlclN1YnNjcmliZSA9IHZvaWQgMDtcbi8qKlxuICogQHBhcmFtIHVzZXJzXG4gKiBAcGFyYW0gYWNjb3VudExvYWRlclxuICovXG5hc3luYyBmdW5jdGlvbiBidWxrUG9sbGluZ1VzZXJTdWJzY3JpYmUodXNlcnMsIGFjY291bnRMb2FkZXIpIHtcbiAgICBpZiAodXNlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGF3YWl0IGFjY291bnRMb2FkZXIubG9hZCgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IFByb21pc2UuYWxsKHVzZXJzLm1hcCgodXNlcikgPT4ge1xuICAgICAgICByZXR1cm4gdXNlci5hY2NvdW50U3Vic2NyaWJlci5hZGRUb0FjY291bnRMb2FkZXIoKTtcbiAgICB9KSk7XG4gICAgYXdhaXQgYWNjb3VudExvYWRlci5sb2FkKCk7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodXNlcnMubWFwKGFzeW5jICh1c2VyKSA9PiB7XG4gICAgICAgIHJldHVybiB1c2VyLnN1YnNjcmliZSgpO1xuICAgIH0pKTtcbn1cbmV4cG9ydHMuYnVsa1BvbGxpbmdVc2VyU3Vic2NyaWJlID0gYnVsa1BvbGxpbmdVc2VyU3Vic2NyaWJlO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYnVsa1BvbGxpbmdVc2VyU3Vic2NyaWJlIiwidXNlcnMiLCJhY2NvdW50TG9hZGVyIiwibGVuZ3RoIiwibG9hZCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJ1c2VyIiwiYWNjb3VudFN1YnNjcmliZXIiLCJhZGRUb0FjY291bnRMb2FkZXIiLCJzdWJzY3JpYmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkUserSubscription.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/fetch.js":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/fetch.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.fetchUserStatsAccount = exports.fetchUserAccountsUsingKeys = exports.fetchUserAccounts = void 0;\nconst pda_1 = __webpack_require__(/*! ../addresses/pda */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\");\nasync function fetchUserAccounts(connection, program, authority, limit = 8) {\n    const userAccountPublicKeys = new Array();\n    for(let i = 0; i < limit; i++){\n        userAccountPublicKeys.push(await (0, pda_1.getUserAccountPublicKey)(program.programId, authority, i));\n    }\n    return fetchUserAccountsUsingKeys(connection, program, userAccountPublicKeys);\n}\nexports.fetchUserAccounts = fetchUserAccounts;\nasync function fetchUserAccountsUsingKeys(connection, program, userAccountPublicKeys) {\n    const accountInfos = await connection.getMultipleAccountsInfo(userAccountPublicKeys, \"confirmed\");\n    return accountInfos.map((accountInfo)=>{\n        if (!accountInfo) {\n            return undefined;\n        }\n        return program.account.user.coder.accounts.decode(\"User\", accountInfo.data);\n    });\n}\nexports.fetchUserAccountsUsingKeys = fetchUserAccountsUsingKeys;\nasync function fetchUserStatsAccount(connection, program, authority) {\n    const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(program.programId, authority);\n    const accountInfo = await connection.getAccountInfo(userStatsPublicKey, \"confirmed\");\n    return accountInfo ? program.account.user.coder.accounts.decode(\"UserStats\", accountInfo.data) : undefined;\n}\nexports.fetchUserStatsAccount = fetchUserStatsAccount;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9mZXRjaC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsNkJBQTZCLEdBQUdBLGtDQUFrQyxHQUFHQSx5QkFBeUIsR0FBRyxLQUFLO0FBQ3RHLE1BQU1LLFFBQVFDLG1CQUFPQSxDQUFDLG1GQUFrQjtBQUN4QyxlQUFlRixrQkFBa0JHLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsQ0FBQztJQUN0RSxNQUFNQyx3QkFBd0IsSUFBSUM7SUFDbEMsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlILE9BQU9HLElBQUs7UUFDNUJGLHNCQUFzQkcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHVCxNQUFNVSx1QkFBdUIsRUFBRVAsUUFBUVEsU0FBUyxFQUFFUCxXQUFXSTtJQUN0RztJQUNBLE9BQU9WLDJCQUEyQkksWUFBWUMsU0FBU0c7QUFDM0Q7QUFDQVgseUJBQXlCLEdBQUdJO0FBQzVCLGVBQWVELDJCQUEyQkksVUFBVSxFQUFFQyxPQUFPLEVBQUVHLHFCQUFxQjtJQUNoRixNQUFNTSxlQUFlLE1BQU1WLFdBQVdXLHVCQUF1QixDQUFDUCx1QkFBdUI7SUFDckYsT0FBT00sYUFBYUUsR0FBRyxDQUFDLENBQUNDO1FBQ3JCLElBQUksQ0FBQ0EsYUFBYTtZQUNkLE9BQU9DO1FBQ1g7UUFDQSxPQUFPYixRQUFRYyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxRQUFRTixZQUFZTyxJQUFJO0lBQzlFO0FBQ0o7QUFDQTNCLGtDQUFrQyxHQUFHRztBQUNyQyxlQUFlRCxzQkFBc0JLLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxTQUFTO0lBQy9ELE1BQU1tQixxQkFBcUIsQ0FBQyxHQUFHdkIsTUFBTXdCLDRCQUE0QixFQUFFckIsUUFBUVEsU0FBUyxFQUFFUDtJQUN0RixNQUFNVyxjQUFjLE1BQU1iLFdBQVd1QixjQUFjLENBQUNGLG9CQUFvQjtJQUN4RSxPQUFPUixjQUNEWixRQUFRYyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxhQUFhTixZQUFZTyxJQUFJLElBQ3hFTjtBQUNWO0FBQ0FyQiw2QkFBNkIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvZmV0Y2guanM/YmU1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZmV0Y2hVc2VyU3RhdHNBY2NvdW50ID0gZXhwb3J0cy5mZXRjaFVzZXJBY2NvdW50c1VzaW5nS2V5cyA9IGV4cG9ydHMuZmV0Y2hVc2VyQWNjb3VudHMgPSB2b2lkIDA7XG5jb25zdCBwZGFfMSA9IHJlcXVpcmUoXCIuLi9hZGRyZXNzZXMvcGRhXCIpO1xuYXN5bmMgZnVuY3Rpb24gZmV0Y2hVc2VyQWNjb3VudHMoY29ubmVjdGlvbiwgcHJvZ3JhbSwgYXV0aG9yaXR5LCBsaW1pdCA9IDgpIHtcbiAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleXMgPSBuZXcgQXJyYXkoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbWl0OyBpKyspIHtcbiAgICAgICAgdXNlckFjY291bnRQdWJsaWNLZXlzLnB1c2goYXdhaXQgKDAsIHBkYV8xLmdldFVzZXJBY2NvdW50UHVibGljS2V5KShwcm9ncmFtLnByb2dyYW1JZCwgYXV0aG9yaXR5LCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBmZXRjaFVzZXJBY2NvdW50c1VzaW5nS2V5cyhjb25uZWN0aW9uLCBwcm9ncmFtLCB1c2VyQWNjb3VudFB1YmxpY0tleXMpO1xufVxuZXhwb3J0cy5mZXRjaFVzZXJBY2NvdW50cyA9IGZldGNoVXNlckFjY291bnRzO1xuYXN5bmMgZnVuY3Rpb24gZmV0Y2hVc2VyQWNjb3VudHNVc2luZ0tleXMoY29ubmVjdGlvbiwgcHJvZ3JhbSwgdXNlckFjY291bnRQdWJsaWNLZXlzKSB7XG4gICAgY29uc3QgYWNjb3VudEluZm9zID0gYXdhaXQgY29ubmVjdGlvbi5nZXRNdWx0aXBsZUFjY291bnRzSW5mbyh1c2VyQWNjb3VudFB1YmxpY0tleXMsICdjb25maXJtZWQnKTtcbiAgICByZXR1cm4gYWNjb3VudEluZm9zLm1hcCgoYWNjb3VudEluZm8pID0+IHtcbiAgICAgICAgaWYgKCFhY2NvdW50SW5mbykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvZ3JhbS5hY2NvdW50LnVzZXIuY29kZXIuYWNjb3VudHMuZGVjb2RlKCdVc2VyJywgYWNjb3VudEluZm8uZGF0YSk7XG4gICAgfSk7XG59XG5leHBvcnRzLmZldGNoVXNlckFjY291bnRzVXNpbmdLZXlzID0gZmV0Y2hVc2VyQWNjb3VudHNVc2luZ0tleXM7XG5hc3luYyBmdW5jdGlvbiBmZXRjaFVzZXJTdGF0c0FjY291bnQoY29ubmVjdGlvbiwgcHJvZ3JhbSwgYXV0aG9yaXR5KSB7XG4gICAgY29uc3QgdXNlclN0YXRzUHVibGljS2V5ID0gKDAsIHBkYV8xLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkpKHByb2dyYW0ucHJvZ3JhbUlkLCBhdXRob3JpdHkpO1xuICAgIGNvbnN0IGFjY291bnRJbmZvID0gYXdhaXQgY29ubmVjdGlvbi5nZXRBY2NvdW50SW5mbyh1c2VyU3RhdHNQdWJsaWNLZXksICdjb25maXJtZWQnKTtcbiAgICByZXR1cm4gYWNjb3VudEluZm9cbiAgICAgICAgPyBwcm9ncmFtLmFjY291bnQudXNlci5jb2Rlci5hY2NvdW50cy5kZWNvZGUoJ1VzZXJTdGF0cycsIGFjY291bnRJbmZvLmRhdGEpXG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuZXhwb3J0cy5mZXRjaFVzZXJTdGF0c0FjY291bnQgPSBmZXRjaFVzZXJTdGF0c0FjY291bnQ7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJmZXRjaFVzZXJTdGF0c0FjY291bnQiLCJmZXRjaFVzZXJBY2NvdW50c1VzaW5nS2V5cyIsImZldGNoVXNlckFjY291bnRzIiwicGRhXzEiLCJyZXF1aXJlIiwiY29ubmVjdGlvbiIsInByb2dyYW0iLCJhdXRob3JpdHkiLCJsaW1pdCIsInVzZXJBY2NvdW50UHVibGljS2V5cyIsIkFycmF5IiwiaSIsInB1c2giLCJnZXRVc2VyQWNjb3VudFB1YmxpY0tleSIsInByb2dyYW1JZCIsImFjY291bnRJbmZvcyIsImdldE11bHRpcGxlQWNjb3VudHNJbmZvIiwibWFwIiwiYWNjb3VudEluZm8iLCJ1bmRlZmluZWQiLCJhY2NvdW50IiwidXNlciIsImNvZGVyIiwiYWNjb3VudHMiLCJkZWNvZGUiLCJkYXRhIiwidXNlclN0YXRzUHVibGljS2V5IiwiZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSIsImdldEFjY291bnRJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/fetch.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/mockUserAccountSubscriber.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/mockUserAccountSubscriber.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MockUserAccountSubscriber = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nclass MockUserAccountSubscriber {\n    constructor(userAccountPublicKey, data, slot){\n        this.isSubscribed = true;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.userAccountPublicKey = userAccountPublicKey;\n        this.user = {\n            data,\n            slot\n        };\n    }\n    async subscribe(_userAccount) {\n        return true;\n    }\n    async addToAccountLoader() {}\n    async fetch() {}\n    doesAccountExist() {\n        return this.user !== undefined;\n    }\n    async unsubscribe() {}\n    assertIsSubscribed() {}\n    getUserAccountAndSlot() {\n        return this.user;\n    }\n    updateData(userAccount, slot) {\n        this.user = {\n            data: userAccount,\n            slot\n        };\n        this.eventEmitter.emit(\"userAccountUpdate\", userAccount);\n        this.eventEmitter.emit(\"update\");\n    }\n}\nexports.MockUserAccountSubscriber = MockUserAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9tb2NrVXNlckFjY291bnRTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQ0FBaUMsR0FBRyxLQUFLO0FBQ3pDLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1GO0lBQ0ZHLFlBQVlDLG9CQUFvQixFQUFFQyxJQUFJLEVBQUVDLElBQUksQ0FBRTtRQUMxQyxJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJUCxTQUFTUSxZQUFZO1FBQzdDLElBQUksQ0FBQ0wsb0JBQW9CLEdBQUdBO1FBQzVCLElBQUksQ0FBQ00sSUFBSSxHQUFHO1lBQUVMO1lBQU1DO1FBQUs7SUFDN0I7SUFDQSxNQUFNSyxVQUFVQyxZQUFZLEVBQUU7UUFDMUIsT0FBTztJQUNYO0lBQ0EsTUFBTUMscUJBQXFCLENBQUU7SUFDN0IsTUFBTUMsUUFBUSxDQUFFO0lBQ2hCQyxtQkFBbUI7UUFDZixPQUFPLElBQUksQ0FBQ0wsSUFBSSxLQUFLTTtJQUN6QjtJQUNBLE1BQU1DLGNBQWMsQ0FBRTtJQUN0QkMscUJBQXFCLENBQUU7SUFDdkJDLHdCQUF3QjtRQUNwQixPQUFPLElBQUksQ0FBQ1QsSUFBSTtJQUNwQjtJQUNBVSxXQUFXQyxXQUFXLEVBQUVmLElBQUksRUFBRTtRQUMxQixJQUFJLENBQUNJLElBQUksR0FBRztZQUFFTCxNQUFNZ0I7WUFBYWY7UUFBSztRQUN0QyxJQUFJLENBQUNFLFlBQVksQ0FBQ2MsSUFBSSxDQUFDLHFCQUFxQkQ7UUFDNUMsSUFBSSxDQUFDYixZQUFZLENBQUNjLElBQUksQ0FBQztJQUMzQjtBQUNKO0FBQ0F4QixpQ0FBaUMsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvbW9ja1VzZXJBY2NvdW50U3Vic2NyaWJlci5qcz8yMjBhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb2NrVXNlckFjY291bnRTdWJzY3JpYmVyID0gdm9pZCAwO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xuY2xhc3MgTW9ja1VzZXJBY2NvdW50U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IodXNlckFjY291bnRQdWJsaWNLZXksIGRhdGEsIHNsb3QpIHtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBldmVudHNfMS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy51c2VyQWNjb3VudFB1YmxpY0tleSA9IHVzZXJBY2NvdW50UHVibGljS2V5O1xuICAgICAgICB0aGlzLnVzZXIgPSB7IGRhdGEsIHNsb3QgfTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKF91c2VyQWNjb3VudCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgYWRkVG9BY2NvdW50TG9hZGVyKCkgeyB9XG4gICAgYXN5bmMgZmV0Y2goKSB7IH1cbiAgICBkb2VzQWNjb3VudEV4aXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkgeyB9XG4gICAgYXNzZXJ0SXNTdWJzY3JpYmVkKCkgeyB9XG4gICAgZ2V0VXNlckFjY291bnRBbmRTbG90KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyO1xuICAgIH1cbiAgICB1cGRhdGVEYXRhKHVzZXJBY2NvdW50LCBzbG90KSB7XG4gICAgICAgIHRoaXMudXNlciA9IHsgZGF0YTogdXNlckFjY291bnQsIHNsb3QgfTtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXNlckFjY291bnRVcGRhdGUnLCB1c2VyQWNjb3VudCk7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VwZGF0ZScpO1xuICAgIH1cbn1cbmV4cG9ydHMuTW9ja1VzZXJBY2NvdW50U3Vic2NyaWJlciA9IE1vY2tVc2VyQWNjb3VudFN1YnNjcmliZXI7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJNb2NrVXNlckFjY291bnRTdWJzY3JpYmVyIiwiZXZlbnRzXzEiLCJyZXF1aXJlIiwiY29uc3RydWN0b3IiLCJ1c2VyQWNjb3VudFB1YmxpY0tleSIsImRhdGEiLCJzbG90IiwiaXNTdWJzY3JpYmVkIiwiZXZlbnRFbWl0dGVyIiwiRXZlbnRFbWl0dGVyIiwidXNlciIsInN1YnNjcmliZSIsIl91c2VyQWNjb3VudCIsImFkZFRvQWNjb3VudExvYWRlciIsImZldGNoIiwiZG9lc0FjY291bnRFeGlzdCIsInVuZGVmaW5lZCIsInVuc3Vic2NyaWJlIiwiYXNzZXJ0SXNTdWJzY3JpYmVkIiwiZ2V0VXNlckFjY291bnRBbmRTbG90IiwidXBkYXRlRGF0YSIsInVzZXJBY2NvdW50IiwiZW1pdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/mockUserAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingDriftClientAccountSubscriber.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/pollingDriftClientAccountSubscriber.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PollingDriftClientAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst pda_1 = __webpack_require__(/*! ../addresses/pda */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/utils.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst oracleClientCache_1 = __webpack_require__(/*! ../oracles/oracleClientCache */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/oracleClientCache.js\");\nconst quoteAssetOracleClient_1 = __webpack_require__(/*! ../oracles/quoteAssetOracleClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/quoteAssetOracleClient.js\");\nconst config_1 = __webpack_require__(/*! ../config */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/config.js\");\nclass PollingDriftClientAccountSubscriber {\n    constructor(program, accountLoader, perpMarketIndexes, spotMarketIndexes, oracleInfos, shouldFindAllMarketsAndOracles){\n        this.oracleClientCache = new oracleClientCache_1.OracleClientCache();\n        this.accountsToPoll = new Map();\n        this.oraclesToPoll = new Map();\n        this.perpMarket = new Map();\n        this.spotMarket = new Map();\n        this.oracles = new Map();\n        this.isSubscribing = false;\n        this.isSubscribed = false;\n        this.program = program;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.accountLoader = accountLoader;\n        this.perpMarketIndexes = perpMarketIndexes;\n        this.spotMarketIndexes = spotMarketIndexes;\n        this.oracleInfos = oracleInfos;\n        this.shouldFindAllMarketsAndOracles = shouldFindAllMarketsAndOracles;\n    }\n    async subscribe() {\n        if (this.isSubscribed) {\n            return true;\n        }\n        if (this.isSubscribing) {\n            return await this.subscriptionPromise;\n        }\n        this.isSubscribing = true;\n        this.subscriptionPromise = new Promise((res)=>{\n            this.subscriptionPromiseResolver = res;\n        });\n        if (this.shouldFindAllMarketsAndOracles) {\n            const { perpMarketIndexes, spotMarketIndexes, oracleInfos } = await (0, config_1.findAllMarketAndOracles)(this.program);\n            this.perpMarketIndexes = perpMarketIndexes;\n            this.spotMarketIndexes = spotMarketIndexes;\n            this.oracleInfos = oracleInfos;\n        }\n        await this.updateAccountsToPoll();\n        await this.updateOraclesToPoll();\n        await this.addToAccountLoader();\n        let subscriptionSucceeded = false;\n        let retries = 0;\n        while(!subscriptionSucceeded && retries < 5){\n            await this.fetch();\n            subscriptionSucceeded = this.didSubscriptionSucceed();\n            retries++;\n        }\n        if (subscriptionSucceeded) {\n            this.eventEmitter.emit(\"update\");\n        }\n        this.isSubscribing = false;\n        this.isSubscribed = subscriptionSucceeded;\n        this.subscriptionPromiseResolver(subscriptionSucceeded);\n        return subscriptionSucceeded;\n    }\n    async updateAccountsToPoll() {\n        if (this.accountsToPoll.size > 0) {\n            return;\n        }\n        const statePublicKey = await (0, pda_1.getDriftStateAccountPublicKey)(this.program.programId);\n        this.accountsToPoll.set(statePublicKey.toString(), {\n            key: \"state\",\n            publicKey: statePublicKey,\n            eventType: \"stateAccountUpdate\"\n        });\n        await this.updatePerpMarketAccountsToPoll();\n        await this.updateSpotMarketAccountsToPoll();\n    }\n    async updatePerpMarketAccountsToPoll() {\n        for (const marketIndex of this.perpMarketIndexes){\n            await this.addPerpMarketAccountToPoll(marketIndex);\n        }\n        return true;\n    }\n    async addPerpMarketAccountToPoll(marketIndex) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, marketIndex);\n        this.accountsToPoll.set(perpMarketPublicKey.toString(), {\n            key: \"perpMarket\",\n            publicKey: perpMarketPublicKey,\n            eventType: \"perpMarketAccountUpdate\",\n            mapKey: marketIndex\n        });\n        return true;\n    }\n    async updateSpotMarketAccountsToPoll() {\n        for (const marketIndex of this.spotMarketIndexes){\n            await this.addSpotMarketAccountToPoll(marketIndex);\n        }\n        return true;\n    }\n    async addSpotMarketAccountToPoll(marketIndex) {\n        const marketPublicKey = await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, marketIndex);\n        this.accountsToPoll.set(marketPublicKey.toString(), {\n            key: \"spotMarket\",\n            publicKey: marketPublicKey,\n            eventType: \"spotMarketAccountUpdate\",\n            mapKey: marketIndex\n        });\n        return true;\n    }\n    updateOraclesToPoll() {\n        for (const oracleInfo of this.oracleInfos){\n            if (!oracleInfo.publicKey.equals(web3_js_1.PublicKey.default)) {\n                this.addOracleToPoll(oracleInfo);\n            }\n        }\n        return true;\n    }\n    addOracleToPoll(oracleInfo) {\n        this.oraclesToPoll.set(oracleInfo.publicKey.toString(), {\n            publicKey: oracleInfo.publicKey,\n            source: oracleInfo.source\n        });\n        return true;\n    }\n    async addToAccountLoader() {\n        for (const [_, accountToPoll] of this.accountsToPoll){\n            await this.addAccountToAccountLoader(accountToPoll);\n        }\n        for (const [_, oracleToPoll] of this.oraclesToPoll){\n            await this.addOracleToAccountLoader(oracleToPoll);\n        }\n        this.errorCallbackId = this.accountLoader.addErrorCallbacks((error)=>{\n            this.eventEmitter.emit(\"error\", error);\n        });\n    }\n    async addAccountToAccountLoader(accountToPoll) {\n        accountToPoll.callbackId = await this.accountLoader.addAccount(accountToPoll.publicKey, (buffer, slot)=>{\n            if (!buffer) return;\n            const account = this.program.account[accountToPoll.key].coder.accounts.decode((0, utils_1.capitalize)(accountToPoll.key), buffer);\n            const dataAndSlot = {\n                data: account,\n                slot\n            };\n            if (accountToPoll.mapKey != undefined) {\n                this[accountToPoll.key].set(accountToPoll.mapKey, dataAndSlot);\n            } else {\n                this[accountToPoll.key] = dataAndSlot;\n            }\n            // @ts-ignore\n            this.eventEmitter.emit(accountToPoll.eventType, account);\n            this.eventEmitter.emit(\"update\");\n            if (!this.isSubscribed) {\n                this.isSubscribed = this.didSubscriptionSucceed();\n            }\n        });\n    }\n    async addOracleToAccountLoader(oracleToPoll) {\n        const oracleClient = this.oracleClientCache.get(oracleToPoll.source, this.program.provider.connection);\n        oracleToPoll.callbackId = await this.accountLoader.addAccount(oracleToPoll.publicKey, (buffer, slot)=>{\n            if (!buffer) return;\n            const oraclePriceData = oracleClient.getOraclePriceDataFromBuffer(buffer);\n            const dataAndSlot = {\n                data: oraclePriceData,\n                slot\n            };\n            this.oracles.set(oracleToPoll.publicKey.toString(), dataAndSlot);\n            this.eventEmitter.emit(\"oraclePriceUpdate\", oracleToPoll.publicKey, oraclePriceData);\n            this.eventEmitter.emit(\"update\");\n        });\n    }\n    async fetch() {\n        await this.accountLoader.load();\n        for (const [_, accountToPoll] of this.accountsToPoll){\n            const { buffer, slot } = this.accountLoader.getBufferAndSlot(accountToPoll.publicKey);\n            if (buffer) {\n                const account = this.program.account[accountToPoll.key].coder.accounts.decode((0, utils_1.capitalize)(accountToPoll.key), buffer);\n                if (accountToPoll.mapKey != undefined) {\n                    this[accountToPoll.key].set(accountToPoll.mapKey, {\n                        data: account,\n                        slot\n                    });\n                } else {\n                    this[accountToPoll.key] = {\n                        data: account,\n                        slot\n                    };\n                }\n            }\n        }\n        for (const [_, oracleToPoll] of this.oraclesToPoll){\n            const { buffer, slot } = this.accountLoader.getBufferAndSlot(oracleToPoll.publicKey);\n            if (buffer) {\n                const oracleClient = this.oracleClientCache.get(oracleToPoll.source, this.program.provider.connection);\n                const oraclePriceData = oracleClient.getOraclePriceDataFromBuffer(buffer);\n                this.oracles.set(oracleToPoll.publicKey.toString(), {\n                    data: oraclePriceData,\n                    slot\n                });\n            }\n        }\n    }\n    didSubscriptionSucceed() {\n        if (this.state) return true;\n        return false;\n    }\n    async unsubscribe() {\n        for (const [_, accountToPoll] of this.accountsToPoll){\n            this.accountLoader.removeAccount(accountToPoll.publicKey, accountToPoll.callbackId);\n        }\n        for (const [_, oracleToPoll] of this.oraclesToPoll){\n            this.accountLoader.removeAccount(oracleToPoll.publicKey, oracleToPoll.callbackId);\n        }\n        this.accountLoader.removeErrorCallbacks(this.errorCallbackId);\n        this.errorCallbackId = undefined;\n        this.accountsToPoll.clear();\n        this.oraclesToPoll.clear();\n        this.isSubscribed = false;\n    }\n    async addSpotMarket(marketIndex) {\n        const marketPublicKey = await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, marketIndex);\n        if (this.accountsToPoll.has(marketPublicKey.toString())) {\n            return true;\n        }\n        await this.addSpotMarketAccountToPoll(marketIndex);\n        const accountToPoll = this.accountsToPoll.get(marketPublicKey.toString());\n        await this.addAccountToAccountLoader(accountToPoll);\n        return true;\n    }\n    async addPerpMarket(marketIndex) {\n        const marketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, marketIndex);\n        if (this.accountsToPoll.has(marketPublicKey.toString())) {\n            return true;\n        }\n        await this.addPerpMarketAccountToPoll(marketIndex);\n        const accountToPoll = this.accountsToPoll.get(marketPublicKey.toString());\n        await this.addAccountToAccountLoader(accountToPoll);\n        return true;\n    }\n    async addOracle(oracleInfo) {\n        if (oracleInfo.publicKey.equals(web3_js_1.PublicKey.default) || this.oraclesToPoll.has(oracleInfo.publicKey.toString())) {\n            return true;\n        }\n        this.addOracleToPoll(oracleInfo);\n        const oracleToPoll = this.oraclesToPoll.get(oracleInfo.publicKey.toString());\n        await this.addOracleToAccountLoader(oracleToPoll);\n        return true;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getStateAccountAndSlot() {\n        this.assertIsSubscribed();\n        return this.state;\n    }\n    getMarketAccountAndSlot(marketIndex) {\n        return this.perpMarket.get(marketIndex);\n    }\n    getMarketAccountsAndSlots() {\n        return Array.from(this.perpMarket.values());\n    }\n    getSpotMarketAccountAndSlot(marketIndex) {\n        return this.spotMarket.get(marketIndex);\n    }\n    getSpotMarketAccountsAndSlots() {\n        return Array.from(this.spotMarket.values());\n    }\n    getOraclePriceDataAndSlot(oraclePublicKey) {\n        this.assertIsSubscribed();\n        if (oraclePublicKey.equals(web3_js_1.PublicKey.default)) {\n            return {\n                data: quoteAssetOracleClient_1.QUOTE_ORACLE_PRICE_DATA,\n                slot: 0\n            };\n        }\n        return this.oracles.get(oraclePublicKey.toString());\n    }\n    updateAccountLoaderPollingFrequency(pollingFrequency) {\n        this.accountLoader.updatePollingFrequency(pollingFrequency);\n    }\n}\nexports.PollingDriftClientAccountSubscriber = PollingDriftClientAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9wb2xsaW5nRHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkNBQTJDLEdBQUcsS0FBSztBQUNuRCxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyRUFBUztBQUNqQyxNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRSxRQUFRRixtQkFBT0EsQ0FBQyxtRkFBa0I7QUFDeEMsTUFBTUcsVUFBVUgsbUJBQU9BLENBQUMsMkVBQVM7QUFDakMsTUFBTUksWUFBWUosbUJBQU9BLENBQUMsOEVBQWlCO0FBQzNDLE1BQU1LLHNCQUFzQkwsbUJBQU9BLENBQUMsMkdBQThCO0FBQ2xFLE1BQU1NLDJCQUEyQk4sbUJBQU9BLENBQUMscUhBQW1DO0FBQzVFLE1BQU1PLFdBQVdQLG1CQUFPQSxDQUFDLHFFQUFXO0FBQ3BDLE1BQU1GO0lBQ0ZVLFlBQVlDLE9BQU8sRUFBRUMsYUFBYSxFQUFFQyxpQkFBaUIsRUFBRUMsaUJBQWlCLEVBQUVDLFdBQVcsRUFBRUMsOEJBQThCLENBQUU7UUFDbkgsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxJQUFJVixvQkFBb0JXLGlCQUFpQjtRQUNsRSxJQUFJLENBQUNDLGNBQWMsR0FBRyxJQUFJQztRQUMxQixJQUFJLENBQUNDLGFBQWEsR0FBRyxJQUFJRDtRQUN6QixJQUFJLENBQUNFLFVBQVUsR0FBRyxJQUFJRjtRQUN0QixJQUFJLENBQUNHLFVBQVUsR0FBRyxJQUFJSDtRQUN0QixJQUFJLENBQUNJLE9BQU8sR0FBRyxJQUFJSjtRQUNuQixJQUFJLENBQUNLLGFBQWEsR0FBRztRQUNyQixJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNmLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNnQixZQUFZ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QUNYLGtCQUFrQjtRQUN2QixJQUFJVyxnQkFBZ0JyRCxNQUFNLENBQUN6RCxVQUFVMEQsU0FBUyxDQUFDQyxPQUFPLEdBQUc7WUFDckQsT0FBTztnQkFDSHFCLE1BQU05RSx5QkFBeUI2Ryx1QkFBdUI7Z0JBQ3REdEMsTUFBTTtZQUNWO1FBQ0o7UUFDQSxPQUFPLElBQUksQ0FBQ3ZELE9BQU8sQ0FBQ2lFLEdBQUcsQ0FBQzJCLGdCQUFnQnBFLFFBQVE7SUFDcEQ7SUFDQXNFLG9DQUFvQ0MsZ0JBQWdCLEVBQUU7UUFDbEQsSUFBSSxDQUFDM0csYUFBYSxDQUFDNEcsc0JBQXNCLENBQUNEO0lBQzlDO0FBQ0o7QUFDQXpILDJDQUEyQyxHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9wb2xsaW5nRHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlci5qcz8xOGI4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Qb2xsaW5nRHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlciA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNvbnN0IHBkYV8xID0gcmVxdWlyZShcIi4uL2FkZHJlc3Nlcy9wZGFcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jb25zdCB3ZWIzX2pzXzEgPSByZXF1aXJlKFwiQHNvbGFuYS93ZWIzLmpzXCIpO1xuY29uc3Qgb3JhY2xlQ2xpZW50Q2FjaGVfMSA9IHJlcXVpcmUoXCIuLi9vcmFjbGVzL29yYWNsZUNsaWVudENhY2hlXCIpO1xuY29uc3QgcXVvdGVBc3NldE9yYWNsZUNsaWVudF8xID0gcmVxdWlyZShcIi4uL29yYWNsZXMvcXVvdGVBc3NldE9yYWNsZUNsaWVudFwiKTtcbmNvbnN0IGNvbmZpZ18xID0gcmVxdWlyZShcIi4uL2NvbmZpZ1wiKTtcbmNsYXNzIFBvbGxpbmdEcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9ncmFtLCBhY2NvdW50TG9hZGVyLCBwZXJwTWFya2V0SW5kZXhlcywgc3BvdE1hcmtldEluZGV4ZXMsIG9yYWNsZUluZm9zLCBzaG91bGRGaW5kQWxsTWFya2V0c0FuZE9yYWNsZXMpIHtcbiAgICAgICAgdGhpcy5vcmFjbGVDbGllbnRDYWNoZSA9IG5ldyBvcmFjbGVDbGllbnRDYWNoZV8xLk9yYWNsZUNsaWVudENhY2hlKCk7XG4gICAgICAgIHRoaXMuYWNjb3VudHNUb1BvbGwgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMub3JhY2xlc1RvUG9sbCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5wZXJwTWFya2V0ID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLnNwb3RNYXJrZXQgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMub3JhY2xlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gbmV3IGV2ZW50c18xLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIgPSBhY2NvdW50TG9hZGVyO1xuICAgICAgICB0aGlzLnBlcnBNYXJrZXRJbmRleGVzID0gcGVycE1hcmtldEluZGV4ZXM7XG4gICAgICAgIHRoaXMuc3BvdE1hcmtldEluZGV4ZXMgPSBzcG90TWFya2V0SW5kZXhlcztcbiAgICAgICAgdGhpcy5vcmFjbGVJbmZvcyA9IG9yYWNsZUluZm9zO1xuICAgICAgICB0aGlzLnNob3VsZEZpbmRBbGxNYXJrZXRzQW5kT3JhY2xlcyA9IHNob3VsZEZpbmRBbGxNYXJrZXRzQW5kT3JhY2xlcztcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzU3Vic2NyaWJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnNjcmlwdGlvblByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N1YnNjcmliaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlID0gbmV3IFByb21pc2UoKHJlcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlUmVzb2x2ZXIgPSByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5zaG91bGRGaW5kQWxsTWFya2V0c0FuZE9yYWNsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGVycE1hcmtldEluZGV4ZXMsIHNwb3RNYXJrZXRJbmRleGVzLCBvcmFjbGVJbmZvcyB9ID0gYXdhaXQgKDAsIGNvbmZpZ18xLmZpbmRBbGxNYXJrZXRBbmRPcmFjbGVzKSh0aGlzLnByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5wZXJwTWFya2V0SW5kZXhlcyA9IHBlcnBNYXJrZXRJbmRleGVzO1xuICAgICAgICAgICAgdGhpcy5zcG90TWFya2V0SW5kZXhlcyA9IHNwb3RNYXJrZXRJbmRleGVzO1xuICAgICAgICAgICAgdGhpcy5vcmFjbGVJbmZvcyA9IG9yYWNsZUluZm9zO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQWNjb3VudHNUb1BvbGwoKTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVPcmFjbGVzVG9Qb2xsKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRkVG9BY2NvdW50TG9hZGVyKCk7XG4gICAgICAgIGxldCBzdWJzY3JpcHRpb25TdWNjZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHJldHJpZXMgPSAwO1xuICAgICAgICB3aGlsZSAoIXN1YnNjcmlwdGlvblN1Y2NlZWRlZCAmJiByZXRyaWVzIDwgNSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5mZXRjaCgpO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uU3VjY2VlZGVkID0gdGhpcy5kaWRTdWJzY3JpcHRpb25TdWNjZWVkKCk7XG4gICAgICAgICAgICByZXRyaWVzKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvblN1Y2NlZWRlZCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N1YnNjcmliaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gc3Vic2NyaXB0aW9uU3VjY2VlZGVkO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblByb21pc2VSZXNvbHZlcihzdWJzY3JpcHRpb25TdWNjZWVkZWQpO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uU3VjY2VlZGVkO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBY2NvdW50c1RvUG9sbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWNjb3VudHNUb1BvbGwuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZVB1YmxpY0tleSA9IGF3YWl0ICgwLCBwZGFfMS5nZXREcmlmdFN0YXRlQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCk7XG4gICAgICAgIHRoaXMuYWNjb3VudHNUb1BvbGwuc2V0KHN0YXRlUHVibGljS2V5LnRvU3RyaW5nKCksIHtcbiAgICAgICAgICAgIGtleTogJ3N0YXRlJyxcbiAgICAgICAgICAgIHB1YmxpY0tleTogc3RhdGVQdWJsaWNLZXksXG4gICAgICAgICAgICBldmVudFR5cGU6ICdzdGF0ZUFjY291bnRVcGRhdGUnLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVQZXJwTWFya2V0QWNjb3VudHNUb1BvbGwoKTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTcG90TWFya2V0QWNjb3VudHNUb1BvbGwoKTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldEFjY291bnRzVG9Qb2xsKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1hcmtldEluZGV4IG9mIHRoaXMucGVycE1hcmtldEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkUGVycE1hcmtldEFjY291bnRUb1BvbGwobWFya2V0SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBhZGRQZXJwTWFya2V0QWNjb3VudFRvUG9sbChtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCBwZXJwTWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIG1hcmtldEluZGV4KTtcbiAgICAgICAgdGhpcy5hY2NvdW50c1RvUG9sbC5zZXQocGVycE1hcmtldFB1YmxpY0tleS50b1N0cmluZygpLCB7XG4gICAgICAgICAgICBrZXk6ICdwZXJwTWFya2V0JyxcbiAgICAgICAgICAgIHB1YmxpY0tleTogcGVycE1hcmtldFB1YmxpY0tleSxcbiAgICAgICAgICAgIGV2ZW50VHlwZTogJ3BlcnBNYXJrZXRBY2NvdW50VXBkYXRlJyxcbiAgICAgICAgICAgIG1hcEtleTogbWFya2V0SW5kZXgsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU3BvdE1hcmtldEFjY291bnRzVG9Qb2xsKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1hcmtldEluZGV4IG9mIHRoaXMuc3BvdE1hcmtldEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkU3BvdE1hcmtldEFjY291bnRUb1BvbGwobWFya2V0SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBhZGRTcG90TWFya2V0QWNjb3VudFRvUG9sbChtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCBtYXJrZXRQdWJsaWNLZXkgPSBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgbWFya2V0SW5kZXgpO1xuICAgICAgICB0aGlzLmFjY291bnRzVG9Qb2xsLnNldChtYXJrZXRQdWJsaWNLZXkudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAga2V5OiAnc3BvdE1hcmtldCcsXG4gICAgICAgICAgICBwdWJsaWNLZXk6IG1hcmtldFB1YmxpY0tleSxcbiAgICAgICAgICAgIGV2ZW50VHlwZTogJ3Nwb3RNYXJrZXRBY2NvdW50VXBkYXRlJyxcbiAgICAgICAgICAgIG1hcEtleTogbWFya2V0SW5kZXgsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdXBkYXRlT3JhY2xlc1RvUG9sbCgpIHtcbiAgICAgICAgZm9yIChjb25zdCBvcmFjbGVJbmZvIG9mIHRoaXMub3JhY2xlSW5mb3MpIHtcbiAgICAgICAgICAgIGlmICghb3JhY2xlSW5mby5wdWJsaWNLZXkuZXF1YWxzKHdlYjNfanNfMS5QdWJsaWNLZXkuZGVmYXVsdCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9yYWNsZVRvUG9sbChvcmFjbGVJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYWRkT3JhY2xlVG9Qb2xsKG9yYWNsZUluZm8pIHtcbiAgICAgICAgdGhpcy5vcmFjbGVzVG9Qb2xsLnNldChvcmFjbGVJbmZvLnB1YmxpY0tleS50b1N0cmluZygpLCB7XG4gICAgICAgICAgICBwdWJsaWNLZXk6IG9yYWNsZUluZm8ucHVibGljS2V5LFxuICAgICAgICAgICAgc291cmNlOiBvcmFjbGVJbmZvLnNvdXJjZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBhZGRUb0FjY291bnRMb2FkZXIoKSB7XG4gICAgICAgIGZvciAoY29uc3QgW18sIGFjY291bnRUb1BvbGxdIG9mIHRoaXMuYWNjb3VudHNUb1BvbGwpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQWNjb3VudFRvQWNjb3VudExvYWRlcihhY2NvdW50VG9Qb2xsKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtfLCBvcmFjbGVUb1BvbGxdIG9mIHRoaXMub3JhY2xlc1RvUG9sbCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRPcmFjbGVUb0FjY291bnRMb2FkZXIob3JhY2xlVG9Qb2xsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2tJZCA9IHRoaXMuYWNjb3VudExvYWRlci5hZGRFcnJvckNhbGxiYWNrcygoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgYWRkQWNjb3VudFRvQWNjb3VudExvYWRlcihhY2NvdW50VG9Qb2xsKSB7XG4gICAgICAgIGFjY291bnRUb1BvbGwuY2FsbGJhY2tJZCA9IGF3YWl0IHRoaXMuYWNjb3VudExvYWRlci5hZGRBY2NvdW50KGFjY291bnRUb1BvbGwucHVibGljS2V5LCAoYnVmZmVyLCBzbG90KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWJ1ZmZlcilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5wcm9ncmFtLmFjY291bnRbYWNjb3VudFRvUG9sbC5rZXldLmNvZGVyLmFjY291bnRzLmRlY29kZSgoMCwgdXRpbHNfMS5jYXBpdGFsaXplKShhY2NvdW50VG9Qb2xsLmtleSksIGJ1ZmZlcik7XG4gICAgICAgICAgICBjb25zdCBkYXRhQW5kU2xvdCA9IHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhY2NvdW50LFxuICAgICAgICAgICAgICAgIHNsb3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGFjY291bnRUb1BvbGwubWFwS2V5ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXNbYWNjb3VudFRvUG9sbC5rZXldLnNldChhY2NvdW50VG9Qb2xsLm1hcEtleSwgZGF0YUFuZFNsb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpc1thY2NvdW50VG9Qb2xsLmtleV0gPSBkYXRhQW5kU2xvdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoYWNjb3VudFRvUG9sbC5ldmVudFR5cGUsIGFjY291bnQpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSB0aGlzLmRpZFN1YnNjcmlwdGlvblN1Y2NlZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGFkZE9yYWNsZVRvQWNjb3VudExvYWRlcihvcmFjbGVUb1BvbGwpIHtcbiAgICAgICAgY29uc3Qgb3JhY2xlQ2xpZW50ID0gdGhpcy5vcmFjbGVDbGllbnRDYWNoZS5nZXQob3JhY2xlVG9Qb2xsLnNvdXJjZSwgdGhpcy5wcm9ncmFtLnByb3ZpZGVyLmNvbm5lY3Rpb24pO1xuICAgICAgICBvcmFjbGVUb1BvbGwuY2FsbGJhY2tJZCA9IGF3YWl0IHRoaXMuYWNjb3VudExvYWRlci5hZGRBY2NvdW50KG9yYWNsZVRvUG9sbC5wdWJsaWNLZXksIChidWZmZXIsIHNsb3QpID0+IHtcbiAgICAgICAgICAgIGlmICghYnVmZmVyKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IG9yYWNsZVByaWNlRGF0YSA9IG9yYWNsZUNsaWVudC5nZXRPcmFjbGVQcmljZURhdGFGcm9tQnVmZmVyKGJ1ZmZlcik7XG4gICAgICAgICAgICBjb25zdCBkYXRhQW5kU2xvdCA9IHtcbiAgICAgICAgICAgICAgICBkYXRhOiBvcmFjbGVQcmljZURhdGEsXG4gICAgICAgICAgICAgICAgc2xvdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9yYWNsZXMuc2V0KG9yYWNsZVRvUG9sbC5wdWJsaWNLZXkudG9TdHJpbmcoKSwgZGF0YUFuZFNsb3QpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnb3JhY2xlUHJpY2VVcGRhdGUnLCBvcmFjbGVUb1BvbGwucHVibGljS2V5LCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBmZXRjaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50TG9hZGVyLmxvYWQoKTtcbiAgICAgICAgZm9yIChjb25zdCBbXywgYWNjb3VudFRvUG9sbF0gb2YgdGhpcy5hY2NvdW50c1RvUG9sbCkge1xuICAgICAgICAgICAgY29uc3QgeyBidWZmZXIsIHNsb3QgfSA9IHRoaXMuYWNjb3VudExvYWRlci5nZXRCdWZmZXJBbmRTbG90KGFjY291bnRUb1BvbGwucHVibGljS2V5KTtcbiAgICAgICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5wcm9ncmFtLmFjY291bnRbYWNjb3VudFRvUG9sbC5rZXldLmNvZGVyLmFjY291bnRzLmRlY29kZSgoMCwgdXRpbHNfMS5jYXBpdGFsaXplKShhY2NvdW50VG9Qb2xsLmtleSksIGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKGFjY291bnRUb1BvbGwubWFwS2V5ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW2FjY291bnRUb1BvbGwua2V5XS5zZXQoYWNjb3VudFRvUG9sbC5tYXBLZXksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGFjY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbG90LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbYWNjb3VudFRvUG9sbC5rZXldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogYWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsb3QsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW18sIG9yYWNsZVRvUG9sbF0gb2YgdGhpcy5vcmFjbGVzVG9Qb2xsKSB7XG4gICAgICAgICAgICBjb25zdCB7IGJ1ZmZlciwgc2xvdCB9ID0gdGhpcy5hY2NvdW50TG9hZGVyLmdldEJ1ZmZlckFuZFNsb3Qob3JhY2xlVG9Qb2xsLnB1YmxpY0tleSk7XG4gICAgICAgICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3JhY2xlQ2xpZW50ID0gdGhpcy5vcmFjbGVDbGllbnRDYWNoZS5nZXQob3JhY2xlVG9Qb2xsLnNvdXJjZSwgdGhpcy5wcm9ncmFtLnByb3ZpZGVyLmNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9yYWNsZVByaWNlRGF0YSA9IG9yYWNsZUNsaWVudC5nZXRPcmFjbGVQcmljZURhdGFGcm9tQnVmZmVyKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmFjbGVzLnNldChvcmFjbGVUb1BvbGwucHVibGljS2V5LnRvU3RyaW5nKCksIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogb3JhY2xlUHJpY2VEYXRhLFxuICAgICAgICAgICAgICAgICAgICBzbG90LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRpZFN1YnNjcmlwdGlvblN1Y2NlZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGZvciAoY29uc3QgW18sIGFjY291bnRUb1BvbGxdIG9mIHRoaXMuYWNjb3VudHNUb1BvbGwpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjb3VudExvYWRlci5yZW1vdmVBY2NvdW50KGFjY291bnRUb1BvbGwucHVibGljS2V5LCBhY2NvdW50VG9Qb2xsLmNhbGxiYWNrSWQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW18sIG9yYWNsZVRvUG9sbF0gb2YgdGhpcy5vcmFjbGVzVG9Qb2xsKSB7XG4gICAgICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIucmVtb3ZlQWNjb3VudChvcmFjbGVUb1BvbGwucHVibGljS2V5LCBvcmFjbGVUb1BvbGwuY2FsbGJhY2tJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnJlbW92ZUVycm9yQ2FsbGJhY2tzKHRoaXMuZXJyb3JDYWxsYmFja0lkKTtcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYWNjb3VudHNUb1BvbGwuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5vcmFjbGVzVG9Qb2xsLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIGFkZFNwb3RNYXJrZXQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFNwb3RNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIG1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKHRoaXMuYWNjb3VudHNUb1BvbGwuaGFzKG1hcmtldFB1YmxpY0tleS50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5hZGRTcG90TWFya2V0QWNjb3VudFRvUG9sbChtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGFjY291bnRUb1BvbGwgPSB0aGlzLmFjY291bnRzVG9Qb2xsLmdldChtYXJrZXRQdWJsaWNLZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRkQWNjb3VudFRvQWNjb3VudExvYWRlcihhY2NvdW50VG9Qb2xsKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIGFkZFBlcnBNYXJrZXQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIG1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKHRoaXMuYWNjb3VudHNUb1BvbGwuaGFzKG1hcmtldFB1YmxpY0tleS50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5hZGRQZXJwTWFya2V0QWNjb3VudFRvUG9sbChtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGFjY291bnRUb1BvbGwgPSB0aGlzLmFjY291bnRzVG9Qb2xsLmdldChtYXJrZXRQdWJsaWNLZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRkQWNjb3VudFRvQWNjb3VudExvYWRlcihhY2NvdW50VG9Qb2xsKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIGFkZE9yYWNsZShvcmFjbGVJbmZvKSB7XG4gICAgICAgIGlmIChvcmFjbGVJbmZvLnB1YmxpY0tleS5lcXVhbHMod2ViM19qc18xLlB1YmxpY0tleS5kZWZhdWx0KSB8fFxuICAgICAgICAgICAgdGhpcy5vcmFjbGVzVG9Qb2xsLmhhcyhvcmFjbGVJbmZvLnB1YmxpY0tleS50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRPcmFjbGVUb1BvbGwob3JhY2xlSW5mbyk7XG4gICAgICAgIGNvbnN0IG9yYWNsZVRvUG9sbCA9IHRoaXMub3JhY2xlc1RvUG9sbC5nZXQob3JhY2xlSW5mby5wdWJsaWNLZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRkT3JhY2xlVG9BY2NvdW50TG9hZGVyKG9yYWNsZVRvUG9sbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3NlcnRJc1N1YnNjcmliZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyB0eXBlc18xLk5vdFN1YnNjcmliZWRFcnJvcignWW91IG11c3QgY2FsbCBgc3Vic2NyaWJlYCBiZWZvcmUgdXNpbmcgdGhpcyBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFN0YXRlQWNjb3VudEFuZFNsb3QoKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0SXNTdWJzY3JpYmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICBnZXRNYXJrZXRBY2NvdW50QW5kU2xvdChtYXJrZXRJbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJwTWFya2V0LmdldChtYXJrZXRJbmRleCk7XG4gICAgfVxuICAgIGdldE1hcmtldEFjY291bnRzQW5kU2xvdHMoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucGVycE1hcmtldC52YWx1ZXMoKSk7XG4gICAgfVxuICAgIGdldFNwb3RNYXJrZXRBY2NvdW50QW5kU2xvdChtYXJrZXRJbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcG90TWFya2V0LmdldChtYXJrZXRJbmRleCk7XG4gICAgfVxuICAgIGdldFNwb3RNYXJrZXRBY2NvdW50c0FuZFNsb3RzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnNwb3RNYXJrZXQudmFsdWVzKCkpO1xuICAgIH1cbiAgICBnZXRPcmFjbGVQcmljZURhdGFBbmRTbG90KG9yYWNsZVB1YmxpY0tleSkge1xuICAgICAgICB0aGlzLmFzc2VydElzU3Vic2NyaWJlZCgpO1xuICAgICAgICBpZiAob3JhY2xlUHVibGljS2V5LmVxdWFscyh3ZWIzX2pzXzEuUHVibGljS2V5LmRlZmF1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhdGE6IHF1b3RlQXNzZXRPcmFjbGVDbGllbnRfMS5RVU9URV9PUkFDTEVfUFJJQ0VfREFUQSxcbiAgICAgICAgICAgICAgICBzbG90OiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcmFjbGVzLmdldChvcmFjbGVQdWJsaWNLZXkudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHVwZGF0ZUFjY291bnRMb2FkZXJQb2xsaW5nRnJlcXVlbmN5KHBvbGxpbmdGcmVxdWVuY3kpIHtcbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnVwZGF0ZVBvbGxpbmdGcmVxdWVuY3kocG9sbGluZ0ZyZXF1ZW5jeSk7XG4gICAgfVxufVxuZXhwb3J0cy5Qb2xsaW5nRHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlciA9IFBvbGxpbmdEcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUG9sbGluZ0RyaWZ0Q2xpZW50QWNjb3VudFN1YnNjcmliZXIiLCJ0eXBlc18xIiwicmVxdWlyZSIsImV2ZW50c18xIiwicGRhXzEiLCJ1dGlsc18xIiwid2ViM19qc18xIiwib3JhY2xlQ2xpZW50Q2FjaGVfMSIsInF1b3RlQXNzZXRPcmFjbGVDbGllbnRfMSIsImNvbmZpZ18xIiwiY29uc3RydWN0b3IiLCJwcm9ncmFtIiwiYWNjb3VudExvYWRlciIsInBlcnBNYXJrZXRJbmRleGVzIiwic3BvdE1hcmtldEluZGV4ZXMiLCJvcmFjbGVJbmZvcyIsInNob3VsZEZpbmRBbGxNYXJrZXRzQW5kT3JhY2xlcyIsIm9yYWNsZUNsaWVudENhY2hlIiwiT3JhY2xlQ2xpZW50Q2FjaGUiLCJhY2NvdW50c1RvUG9sbCIsIk1hcCIsIm9yYWNsZXNUb1BvbGwiLCJwZXJwTWFya2V0Iiwic3BvdE1hcmtldCIsIm9yYWNsZXMiLCJpc1N1YnNjcmliaW5nIiwiaXNTdWJzY3JpYmVkIiwiZXZlbnRFbWl0dGVyIiwiRXZlbnRFbWl0dGVyIiwic3Vic2NyaWJlIiwic3Vic2NyaXB0aW9uUHJvbWlzZSIsIlByb21pc2UiLCJyZXMiLCJzdWJzY3JpcHRpb25Qcm9taXNlUmVzb2x2ZXIiLCJmaW5kQWxsTWFya2V0QW5kT3JhY2xlcyIsInVwZGF0ZUFjY291bnRzVG9Qb2xsIiwidXBkYXRlT3JhY2xlc1RvUG9sbCIsImFkZFRvQWNjb3VudExvYWRlciIsInN1YnNjcmlwdGlvblN1Y2NlZWRlZCIsInJldHJpZXMiLCJmZXRjaCIsImRpZFN1YnNjcmlwdGlvblN1Y2NlZWQiLCJlbWl0Iiwic2l6ZSIsInN0YXRlUHVibGljS2V5IiwiZ2V0RHJpZnRTdGF0ZUFjY291bnRQdWJsaWNLZXkiLCJwcm9ncmFtSWQiLCJzZXQiLCJ0b1N0cmluZyIsImtleSIsInB1YmxpY0tleSIsImV2ZW50VHlwZSIsInVwZGF0ZVBlcnBNYXJrZXRBY2NvdW50c1RvUG9sbCIsInVwZGF0ZVNwb3RNYXJrZXRBY2NvdW50c1RvUG9sbCIsIm1hcmtldEluZGV4IiwiYWRkUGVycE1hcmtldEFjY291bnRUb1BvbGwiLCJwZXJwTWFya2V0UHVibGljS2V5IiwiZ2V0UGVycE1hcmtldFB1YmxpY0tleSIsIm1hcEtleSIsImFkZFNwb3RNYXJrZXRBY2NvdW50VG9Qb2xsIiwibWFya2V0UHVibGljS2V5IiwiZ2V0U3BvdE1hcmtldFB1YmxpY0tleSIsIm9yYWNsZUluZm8iLCJlcXVhbHMiLCJQdWJsaWNLZXkiLCJkZWZhdWx0IiwiYWRkT3JhY2xlVG9Qb2xsIiwic291cmNlIiwiXyIsImFjY291bnRUb1BvbGwiLCJhZGRBY2NvdW50VG9BY2NvdW50TG9hZGVyIiwib3JhY2xlVG9Qb2xsIiwiYWRkT3JhY2xlVG9BY2NvdW50TG9hZGVyIiwiZXJyb3JDYWxsYmFja0lkIiwiYWRkRXJyb3JDYWxsYmFja3MiLCJlcnJvciIsImNhbGxiYWNrSWQiLCJhZGRBY2NvdW50IiwiYnVmZmVyIiwic2xvdCIsImFjY291bnQiLCJjb2RlciIsImFjY291bnRzIiwiZGVjb2RlIiwiY2FwaXRhbGl6ZSIsImRhdGFBbmRTbG90IiwiZGF0YSIsInVuZGVmaW5lZCIsIm9yYWNsZUNsaWVudCIsImdldCIsInByb3ZpZGVyIiwiY29ubmVjdGlvbiIsIm9yYWNsZVByaWNlRGF0YSIsImdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIiLCJsb2FkIiwiZ2V0QnVmZmVyQW5kU2xvdCIsInN0YXRlIiwidW5zdWJzY3JpYmUiLCJyZW1vdmVBY2NvdW50IiwicmVtb3ZlRXJyb3JDYWxsYmFja3MiLCJjbGVhciIsImFkZFNwb3RNYXJrZXQiLCJoYXMiLCJhZGRQZXJwTWFya2V0IiwiYWRkT3JhY2xlIiwiYXNzZXJ0SXNTdWJzY3JpYmVkIiwiTm90U3Vic2NyaWJlZEVycm9yIiwiZ2V0U3RhdGVBY2NvdW50QW5kU2xvdCIsImdldE1hcmtldEFjY291bnRBbmRTbG90IiwiZ2V0TWFya2V0QWNjb3VudHNBbmRTbG90cyIsIkFycmF5IiwiZnJvbSIsInZhbHVlcyIsImdldFNwb3RNYXJrZXRBY2NvdW50QW5kU2xvdCIsImdldFNwb3RNYXJrZXRBY2NvdW50c0FuZFNsb3RzIiwiZ2V0T3JhY2xlUHJpY2VEYXRhQW5kU2xvdCIsIm9yYWNsZVB1YmxpY0tleSIsIlFVT1RFX09SQUNMRV9QUklDRV9EQVRBIiwidXBkYXRlQWNjb3VudExvYWRlclBvbGxpbmdGcmVxdWVuY3kiLCJwb2xsaW5nRnJlcXVlbmN5IiwidXBkYXRlUG9sbGluZ0ZyZXF1ZW5jeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingDriftClientAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingOracleAccountSubscriber.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/pollingOracleAccountSubscriber.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PollingOracleAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nclass PollingOracleAccountSubscriber {\n    constructor(publicKey, oracleClient, accountLoader){\n        this.isSubscribed = false;\n        this.publicKey = publicKey;\n        this.oracleClient = oracleClient;\n        this.accountLoader = accountLoader;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        if (this.isSubscribed) {\n            return true;\n        }\n        await this.addToAccountLoader();\n        let subscriptionSucceeded = false;\n        let retries = 0;\n        while(!subscriptionSucceeded && retries < 5){\n            await this.fetch();\n            subscriptionSucceeded = this.didSubscriptionSucceed();\n            retries++;\n        }\n        if (subscriptionSucceeded) {\n            this.eventEmitter.emit(\"update\");\n        }\n        this.isSubscribed = subscriptionSucceeded;\n        return subscriptionSucceeded;\n    }\n    async addToAccountLoader() {\n        if (this.callbackId) {\n            return;\n        }\n        this.callbackId = await this.accountLoader.addAccount(this.publicKey, async (buffer, slot)=>{\n            const oraclePriceData = await this.oracleClient.getOraclePriceDataFromBuffer(buffer);\n            this.oraclePriceData = {\n                data: oraclePriceData,\n                slot\n            };\n            // @ts-ignore\n            this.eventEmitter.emit(\"oracleUpdate\", oraclePriceData);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.errorCallbackId = this.accountLoader.addErrorCallbacks((error)=>{\n            this.eventEmitter.emit(\"error\", error);\n        });\n    }\n    async fetch() {\n        await this.accountLoader.load();\n        const { buffer, slot } = this.accountLoader.getBufferAndSlot(this.publicKey);\n        this.oraclePriceData = {\n            data: await this.oracleClient.getOraclePriceDataFromBuffer(buffer),\n            slot\n        };\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        this.accountLoader.removeAccount(this.publicKey, this.callbackId);\n        this.callbackId = undefined;\n        this.accountLoader.removeErrorCallbacks(this.errorCallbackId);\n        this.errorCallbackId = undefined;\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getOraclePriceData() {\n        this.assertIsSubscribed();\n        return this.oraclePriceData;\n    }\n    didSubscriptionSucceed() {\n        return !!this.oraclePriceData;\n    }\n}\nexports.PollingOracleAccountSubscriber = PollingOracleAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9wb2xsaW5nT3JhY2xlQWNjb3VudFN1YnNjcmliZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNDQUFzQyxHQUFHLEtBQUs7QUFDOUMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkVBQVM7QUFDakMsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUY7SUFDRkksWUFBWUMsU0FBUyxFQUFFQyxZQUFZLEVBQUVDLGFBQWEsQ0FBRTtRQUNoRCxJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNILFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDQyxZQUFZLEdBQUdBO1FBQ3BCLElBQUksQ0FBQ0MsYUFBYSxHQUFHQTtRQUNyQixJQUFJLENBQUNFLFlBQVksR0FBRyxJQUFJTixTQUFTTyxZQUFZO0lBQ2pEO0lBQ0EsTUFBTUMsWUFBWTtRQUNkLElBQUksSUFBSSxDQUFDSCxZQUFZLEVBQUU7WUFDbkIsT0FBTztRQUNYO1FBQ0EsTUFBTSxJQUFJLENBQUNJLGtCQUFrQjtRQUM3QixJQUFJQyx3QkFBd0I7UUFDNUIsSUFBSUMsVUFBVTtRQUNkLE1BQU8sQ0FBQ0QseUJBQXlCQyxVQUFVLEVBQUc7WUFDMUMsTUFBTSxJQUFJLENBQUNDLEtBQUs7WUFDaEJGLHdCQUF3QixJQUFJLENBQUNHLHNCQUFzQjtZQUNuREY7UUFDSjtRQUNBLElBQUlELHVCQUF1QjtZQUN2QixJQUFJLENBQUNKLFlBQVksQ0FBQ1EsSUFBSSxDQUFDO1FBQzNCO1FBQ0EsSUFBSSxDQUFDVCxZQUFZLEdBQUdLO1FBQ3BCLE9BQU9BO0lBQ1g7SUFDQSxNQUFNRCxxQkFBcUI7UUFDdkIsSUFBSSxJQUFJLENBQUNNLFVBQVUsRUFBRTtZQUNqQjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUNYLGFBQWEsQ0FBQ1ksVUFBVSxDQUFDLElBQUksQ0FBQ2QsU0FBUyxFQUFFLE9BQU9lLFFBQVFDO1lBQ2pGLE1BQU1DLGtCQUFrQixNQUFNLElBQUksQ0FBQ2hCLFlBQVksQ0FBQ2lCLDRCQUE0QixDQUFDSDtZQUM3RSxJQUFJLENBQUNFLGVBQWUsR0FBRztnQkFBRUUsTUFBTUY7Z0JBQWlCRDtZQUFLO1lBQ3JELGFBQWE7WUFDYixJQUFJLENBQUNaLFlBQVksQ0FBQ1EsSUFBSSxDQUFDLGdCQUFnQks7WUFDdkMsSUFBSSxDQUFDYixZQUFZLENBQUNRLElBQUksQ0FBQztRQUMzQjtRQUNBLElBQUksQ0FBQ1EsZUFBZSxHQUFHLElBQUksQ0FBQ2xCLGFBQWEsQ0FBQ21CLGlCQUFpQixDQUFDLENBQUNDO1lBQ3pELElBQUksQ0FBQ2xCLFlBQVksQ0FBQ1EsSUFBSSxDQUFDLFNBQVNVO1FBQ3BDO0lBQ0o7SUFDQSxNQUFNWixRQUFRO1FBQ1YsTUFBTSxJQUFJLENBQUNSLGFBQWEsQ0FBQ3FCLElBQUk7UUFDN0IsTUFBTSxFQUFFUixNQUFNLEVBQUVDLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQ2QsYUFBYSxDQUFDc0IsZ0JBQWdCLENBQUMsSUFBSSxDQUFDeEIsU0FBUztRQUMzRSxJQUFJLENBQUNpQixlQUFlLEdBQUc7WUFDbkJFLE1BQU0sTUFBTSxJQUFJLENBQUNsQixZQUFZLENBQUNpQiw0QkFBNEIsQ0FBQ0g7WUFDM0RDO1FBQ0o7SUFDSjtJQUNBLE1BQU1TLGNBQWM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQ3RCLFlBQVksRUFBRTtZQUNwQjtRQUNKO1FBQ0EsSUFBSSxDQUFDRCxhQUFhLENBQUN3QixhQUFhLENBQUMsSUFBSSxDQUFDMUIsU0FBUyxFQUFFLElBQUksQ0FBQ2EsVUFBVTtRQUNoRSxJQUFJLENBQUNBLFVBQVUsR0FBR2M7UUFDbEIsSUFBSSxDQUFDekIsYUFBYSxDQUFDMEIsb0JBQW9CLENBQUMsSUFBSSxDQUFDUixlQUFlO1FBQzVELElBQUksQ0FBQ0EsZUFBZSxHQUFHTztRQUN2QixJQUFJLENBQUN4QixZQUFZLEdBQUc7SUFDeEI7SUFDQTBCLHFCQUFxQjtRQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDMUIsWUFBWSxFQUFFO1lBQ3BCLE1BQU0sSUFBSVAsUUFBUWtDLGtCQUFrQixDQUFDO1FBQ3pDO0lBQ0o7SUFDQUMscUJBQXFCO1FBQ2pCLElBQUksQ0FBQ0Ysa0JBQWtCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDWixlQUFlO0lBQy9CO0lBQ0FOLHlCQUF5QjtRQUNyQixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUNNLGVBQWU7SUFDakM7QUFDSjtBQUNBeEIsc0NBQXNDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2FjY291bnRzL3BvbGxpbmdPcmFjbGVBY2NvdW50U3Vic2NyaWJlci5qcz9hMTk4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Qb2xsaW5nT3JhY2xlQWNjb3VudFN1YnNjcmliZXIgPSB2b2lkIDA7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XG5jbGFzcyBQb2xsaW5nT3JhY2xlQWNjb3VudFN1YnNjcmliZXIge1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpY0tleSwgb3JhY2xlQ2xpZW50LCBhY2NvdW50TG9hZGVyKSB7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHVibGljS2V5ID0gcHVibGljS2V5O1xuICAgICAgICB0aGlzLm9yYWNsZUNsaWVudCA9IG9yYWNsZUNsaWVudDtcbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyID0gYWNjb3VudExvYWRlcjtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgZXZlbnRzXzEuRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmFkZFRvQWNjb3VudExvYWRlcigpO1xuICAgICAgICBsZXQgc3Vic2NyaXB0aW9uU3VjY2VlZGVkID0gZmFsc2U7XG4gICAgICAgIGxldCByZXRyaWVzID0gMDtcbiAgICAgICAgd2hpbGUgKCFzdWJzY3JpcHRpb25TdWNjZWVkZWQgJiYgcmV0cmllcyA8IDUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2goKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvblN1Y2NlZWRlZCA9IHRoaXMuZGlkU3Vic2NyaXB0aW9uU3VjY2VlZCgpO1xuICAgICAgICAgICAgcmV0cmllcysrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25TdWNjZWVkZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VwZGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gc3Vic2NyaXB0aW9uU3VjY2VlZGVkO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uU3VjY2VlZGVkO1xuICAgIH1cbiAgICBhc3luYyBhZGRUb0FjY291bnRMb2FkZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrSWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxiYWNrSWQgPSBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIuYWRkQWNjb3VudCh0aGlzLnB1YmxpY0tleSwgYXN5bmMgKGJ1ZmZlciwgc2xvdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2VEYXRhID0gYXdhaXQgdGhpcy5vcmFjbGVDbGllbnQuZ2V0T3JhY2xlUHJpY2VEYXRhRnJvbUJ1ZmZlcihidWZmZXIpO1xuICAgICAgICAgICAgdGhpcy5vcmFjbGVQcmljZURhdGEgPSB7IGRhdGE6IG9yYWNsZVByaWNlRGF0YSwgc2xvdCB9O1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnb3JhY2xlVXBkYXRlJywgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VwZGF0ZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrSWQgPSB0aGlzLmFjY291bnRMb2FkZXIuYWRkRXJyb3JDYWxsYmFja3MoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIubG9hZCgpO1xuICAgICAgICBjb25zdCB7IGJ1ZmZlciwgc2xvdCB9ID0gdGhpcy5hY2NvdW50TG9hZGVyLmdldEJ1ZmZlckFuZFNsb3QodGhpcy5wdWJsaWNLZXkpO1xuICAgICAgICB0aGlzLm9yYWNsZVByaWNlRGF0YSA9IHtcbiAgICAgICAgICAgIGRhdGE6IGF3YWl0IHRoaXMub3JhY2xlQ2xpZW50LmdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIoYnVmZmVyKSxcbiAgICAgICAgICAgIHNsb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnJlbW92ZUFjY291bnQodGhpcy5wdWJsaWNLZXksIHRoaXMuY2FsbGJhY2tJZCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnJlbW92ZUVycm9yQ2FsbGJhY2tzKHRoaXMuZXJyb3JDYWxsYmFja0lkKTtcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgfVxuICAgIGFzc2VydElzU3Vic2NyaWJlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHR5cGVzXzEuTm90U3Vic2NyaWJlZEVycm9yKCdZb3UgbXVzdCBjYWxsIGBzdWJzY3JpYmVgIGJlZm9yZSB1c2luZyB0aGlzIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0T3JhY2xlUHJpY2VEYXRhKCkge1xuICAgICAgICB0aGlzLmFzc2VydElzU3Vic2NyaWJlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5vcmFjbGVQcmljZURhdGE7XG4gICAgfVxuICAgIGRpZFN1YnNjcmlwdGlvblN1Y2NlZWQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMub3JhY2xlUHJpY2VEYXRhO1xuICAgIH1cbn1cbmV4cG9ydHMuUG9sbGluZ09yYWNsZUFjY291bnRTdWJzY3JpYmVyID0gUG9sbGluZ09yYWNsZUFjY291bnRTdWJzY3JpYmVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUG9sbGluZ09yYWNsZUFjY291bnRTdWJzY3JpYmVyIiwidHlwZXNfMSIsInJlcXVpcmUiLCJldmVudHNfMSIsImNvbnN0cnVjdG9yIiwicHVibGljS2V5Iiwib3JhY2xlQ2xpZW50IiwiYWNjb3VudExvYWRlciIsImlzU3Vic2NyaWJlZCIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmliZSIsImFkZFRvQWNjb3VudExvYWRlciIsInN1YnNjcmlwdGlvblN1Y2NlZWRlZCIsInJldHJpZXMiLCJmZXRjaCIsImRpZFN1YnNjcmlwdGlvblN1Y2NlZWQiLCJlbWl0IiwiY2FsbGJhY2tJZCIsImFkZEFjY291bnQiLCJidWZmZXIiLCJzbG90Iiwib3JhY2xlUHJpY2VEYXRhIiwiZ2V0T3JhY2xlUHJpY2VEYXRhRnJvbUJ1ZmZlciIsImRhdGEiLCJlcnJvckNhbGxiYWNrSWQiLCJhZGRFcnJvckNhbGxiYWNrcyIsImVycm9yIiwibG9hZCIsImdldEJ1ZmZlckFuZFNsb3QiLCJ1bnN1YnNjcmliZSIsInJlbW92ZUFjY291bnQiLCJ1bmRlZmluZWQiLCJyZW1vdmVFcnJvckNhbGxiYWNrcyIsImFzc2VydElzU3Vic2NyaWJlZCIsIk5vdFN1YnNjcmliZWRFcnJvciIsImdldE9yYWNsZVByaWNlRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingOracleAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingTokenAccountSubscriber.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/pollingTokenAccountSubscriber.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PollingTokenAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst token_1 = __webpack_require__(/*! ../token */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/token/index.js\");\nclass PollingTokenAccountSubscriber {\n    constructor(publicKey, accountLoader){\n        this.isSubscribed = false;\n        this.publicKey = publicKey;\n        this.accountLoader = accountLoader;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        if (this.isSubscribed) {\n            return true;\n        }\n        await this.addToAccountLoader();\n        let subscriptionSucceeded = false;\n        let retries = 0;\n        while(!subscriptionSucceeded && retries < 5){\n            await this.fetch();\n            subscriptionSucceeded = this.didSubscriptionSucceed();\n            retries++;\n        }\n        if (subscriptionSucceeded) {\n            this.eventEmitter.emit(\"update\");\n        }\n        this.isSubscribed = subscriptionSucceeded;\n        return subscriptionSucceeded;\n    }\n    async addToAccountLoader() {\n        if (this.callbackId) {\n            return;\n        }\n        this.callbackId = await this.accountLoader.addAccount(this.publicKey, (buffer, slot)=>{\n            const tokenAccount = (0, token_1.parseTokenAccount)(buffer, this.publicKey);\n            this.tokenAccountAndSlot = {\n                data: tokenAccount,\n                slot\n            };\n            // @ts-ignore\n            this.eventEmitter.emit(\"tokenAccountUpdate\", tokenAccount);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.errorCallbackId = this.accountLoader.addErrorCallbacks((error)=>{\n            this.eventEmitter.emit(\"error\", error);\n        });\n    }\n    async fetch() {\n        await this.accountLoader.load();\n        const { buffer, slot } = this.accountLoader.getBufferAndSlot(this.publicKey);\n        this.tokenAccountAndSlot = {\n            data: (0, token_1.parseTokenAccount)(buffer, this.publicKey),\n            slot\n        };\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        this.accountLoader.removeAccount(this.publicKey, this.callbackId);\n        this.callbackId = undefined;\n        this.accountLoader.removeErrorCallbacks(this.errorCallbackId);\n        this.errorCallbackId = undefined;\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getTokenAccountAndSlot() {\n        this.assertIsSubscribed();\n        return this.tokenAccountAndSlot;\n    }\n    didSubscriptionSucceed() {\n        return !!this.tokenAccountAndSlot;\n    }\n}\nexports.PollingTokenAccountSubscriber = PollingTokenAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9wb2xsaW5nVG9rZW5BY2NvdW50U3Vic2NyaWJlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQscUNBQXFDLEdBQUcsS0FBSztBQUM3QyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyRUFBUztBQUNqQyxNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQyx5RUFBVTtBQUNsQyxNQUFNRjtJQUNGSyxZQUFZQyxTQUFTLEVBQUVDLGFBQWEsQ0FBRTtRQUNsQyxJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNGLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDQyxhQUFhLEdBQUdBO1FBQ3JCLElBQUksQ0FBQ0UsWUFBWSxHQUFHLElBQUlOLFNBQVNPLFlBQVk7SUFDakQ7SUFDQSxNQUFNQyxZQUFZO1FBQ2QsSUFBSSxJQUFJLENBQUNILFlBQVksRUFBRTtZQUNuQixPQUFPO1FBQ1g7UUFDQSxNQUFNLElBQUksQ0FBQ0ksa0JBQWtCO1FBQzdCLElBQUlDLHdCQUF3QjtRQUM1QixJQUFJQyxVQUFVO1FBQ2QsTUFBTyxDQUFDRCx5QkFBeUJDLFVBQVUsRUFBRztZQUMxQyxNQUFNLElBQUksQ0FBQ0MsS0FBSztZQUNoQkYsd0JBQXdCLElBQUksQ0FBQ0csc0JBQXNCO1lBQ25ERjtRQUNKO1FBQ0EsSUFBSUQsdUJBQXVCO1lBQ3ZCLElBQUksQ0FBQ0osWUFBWSxDQUFDUSxJQUFJLENBQUM7UUFDM0I7UUFDQSxJQUFJLENBQUNULFlBQVksR0FBR0s7UUFDcEIsT0FBT0E7SUFDWDtJQUNBLE1BQU1ELHFCQUFxQjtRQUN2QixJQUFJLElBQUksQ0FBQ00sVUFBVSxFQUFFO1lBQ2pCO1FBQ0o7UUFDQSxJQUFJLENBQUNBLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQ1gsYUFBYSxDQUFDWSxVQUFVLENBQUMsSUFBSSxDQUFDYixTQUFTLEVBQUUsQ0FBQ2MsUUFBUUM7WUFDM0UsTUFBTUMsZUFBZSxDQUFDLEdBQUdsQixRQUFRbUIsaUJBQWlCLEVBQUVILFFBQVEsSUFBSSxDQUFDZCxTQUFTO1lBQzFFLElBQUksQ0FBQ2tCLG1CQUFtQixHQUFHO2dCQUFFQyxNQUFNSDtnQkFBY0Q7WUFBSztZQUN0RCxhQUFhO1lBQ2IsSUFBSSxDQUFDWixZQUFZLENBQUNRLElBQUksQ0FBQyxzQkFBc0JLO1lBQzdDLElBQUksQ0FBQ2IsWUFBWSxDQUFDUSxJQUFJLENBQUM7UUFDM0I7UUFDQSxJQUFJLENBQUNTLGVBQWUsR0FBRyxJQUFJLENBQUNuQixhQUFhLENBQUNvQixpQkFBaUIsQ0FBQyxDQUFDQztZQUN6RCxJQUFJLENBQUNuQixZQUFZLENBQUNRLElBQUksQ0FBQyxTQUFTVztRQUNwQztJQUNKO0lBQ0EsTUFBTWIsUUFBUTtRQUNWLE1BQU0sSUFBSSxDQUFDUixhQUFhLENBQUNzQixJQUFJO1FBQzdCLE1BQU0sRUFBRVQsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUNkLGFBQWEsQ0FBQ3VCLGdCQUFnQixDQUFDLElBQUksQ0FBQ3hCLFNBQVM7UUFDM0UsSUFBSSxDQUFDa0IsbUJBQW1CLEdBQUc7WUFDdkJDLE1BQU0sQ0FBQyxHQUFHckIsUUFBUW1CLGlCQUFpQixFQUFFSCxRQUFRLElBQUksQ0FBQ2QsU0FBUztZQUMzRGU7UUFDSjtJQUNKO0lBQ0EsTUFBTVUsY0FBYztRQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDdkIsWUFBWSxFQUFFO1lBQ3BCO1FBQ0o7UUFDQSxJQUFJLENBQUNELGFBQWEsQ0FBQ3lCLGFBQWEsQ0FBQyxJQUFJLENBQUMxQixTQUFTLEVBQUUsSUFBSSxDQUFDWSxVQUFVO1FBQ2hFLElBQUksQ0FBQ0EsVUFBVSxHQUFHZTtRQUNsQixJQUFJLENBQUMxQixhQUFhLENBQUMyQixvQkFBb0IsQ0FBQyxJQUFJLENBQUNSLGVBQWU7UUFDNUQsSUFBSSxDQUFDQSxlQUFlLEdBQUdPO1FBQ3ZCLElBQUksQ0FBQ3pCLFlBQVksR0FBRztJQUN4QjtJQUNBMkIscUJBQXFCO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMzQixZQUFZLEVBQUU7WUFDcEIsTUFBTSxJQUFJUCxRQUFRbUMsa0JBQWtCLENBQUM7UUFDekM7SUFDSjtJQUNBQyx5QkFBeUI7UUFDckIsSUFBSSxDQUFDRixrQkFBa0I7UUFDdkIsT0FBTyxJQUFJLENBQUNYLG1CQUFtQjtJQUNuQztJQUNBUix5QkFBeUI7UUFDckIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDUSxtQkFBbUI7SUFDckM7QUFDSjtBQUNBMUIscUNBQXFDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2FjY291bnRzL3BvbGxpbmdUb2tlbkFjY291bnRTdWJzY3JpYmVyLmpzPzYxMTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBvbGxpbmdUb2tlbkFjY291bnRTdWJzY3JpYmVyID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xuY29uc3QgdG9rZW5fMSA9IHJlcXVpcmUoXCIuLi90b2tlblwiKTtcbmNsYXNzIFBvbGxpbmdUb2tlbkFjY291bnRTdWJzY3JpYmVyIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWNLZXksIGFjY291bnRMb2FkZXIpIHtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wdWJsaWNLZXkgPSBwdWJsaWNLZXk7XG4gICAgICAgIHRoaXMuYWNjb3VudExvYWRlciA9IGFjY291bnRMb2FkZXI7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gbmV3IGV2ZW50c18xLkV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBhc3luYyBzdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5hZGRUb0FjY291bnRMb2FkZXIoKTtcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvblN1Y2NlZWRlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgcmV0cmllcyA9IDA7XG4gICAgICAgIHdoaWxlICghc3Vic2NyaXB0aW9uU3VjY2VlZGVkICYmIHJldHJpZXMgPCA1KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoKCk7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb25TdWNjZWVkZWQgPSB0aGlzLmRpZFN1YnNjcmlwdGlvblN1Y2NlZWQoKTtcbiAgICAgICAgICAgIHJldHJpZXMrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uU3VjY2VlZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IHN1YnNjcmlwdGlvblN1Y2NlZWRlZDtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvblN1Y2NlZWRlZDtcbiAgICB9XG4gICAgYXN5bmMgYWRkVG9BY2NvdW50TG9hZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja0lkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsYmFja0lkID0gYXdhaXQgdGhpcy5hY2NvdW50TG9hZGVyLmFkZEFjY291bnQodGhpcy5wdWJsaWNLZXksIChidWZmZXIsIHNsb3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRva2VuQWNjb3VudCA9ICgwLCB0b2tlbl8xLnBhcnNlVG9rZW5BY2NvdW50KShidWZmZXIsIHRoaXMucHVibGljS2V5KTtcbiAgICAgICAgICAgIHRoaXMudG9rZW5BY2NvdW50QW5kU2xvdCA9IHsgZGF0YTogdG9rZW5BY2NvdW50LCBzbG90IH07XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd0b2tlbkFjY291bnRVcGRhdGUnLCB0b2tlbkFjY291bnQpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2tJZCA9IHRoaXMuYWNjb3VudExvYWRlci5hZGRFcnJvckNhbGxiYWNrcygoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2goKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWNjb3VudExvYWRlci5sb2FkKCk7XG4gICAgICAgIGNvbnN0IHsgYnVmZmVyLCBzbG90IH0gPSB0aGlzLmFjY291bnRMb2FkZXIuZ2V0QnVmZmVyQW5kU2xvdCh0aGlzLnB1YmxpY0tleSk7XG4gICAgICAgIHRoaXMudG9rZW5BY2NvdW50QW5kU2xvdCA9IHtcbiAgICAgICAgICAgIGRhdGE6ICgwLCB0b2tlbl8xLnBhcnNlVG9rZW5BY2NvdW50KShidWZmZXIsIHRoaXMucHVibGljS2V5KSxcbiAgICAgICAgICAgIHNsb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnJlbW92ZUFjY291bnQodGhpcy5wdWJsaWNLZXksIHRoaXMuY2FsbGJhY2tJZCk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnJlbW92ZUVycm9yQ2FsbGJhY2tzKHRoaXMuZXJyb3JDYWxsYmFja0lkKTtcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgfVxuICAgIGFzc2VydElzU3Vic2NyaWJlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHR5cGVzXzEuTm90U3Vic2NyaWJlZEVycm9yKCdZb3UgbXVzdCBjYWxsIGBzdWJzY3JpYmVgIGJlZm9yZSB1c2luZyB0aGlzIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VG9rZW5BY2NvdW50QW5kU2xvdCgpIHtcbiAgICAgICAgdGhpcy5hc3NlcnRJc1N1YnNjcmliZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5BY2NvdW50QW5kU2xvdDtcbiAgICB9XG4gICAgZGlkU3Vic2NyaXB0aW9uU3VjY2VlZCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy50b2tlbkFjY291bnRBbmRTbG90O1xuICAgIH1cbn1cbmV4cG9ydHMuUG9sbGluZ1Rva2VuQWNjb3VudFN1YnNjcmliZXIgPSBQb2xsaW5nVG9rZW5BY2NvdW50U3Vic2NyaWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlBvbGxpbmdUb2tlbkFjY291bnRTdWJzY3JpYmVyIiwidHlwZXNfMSIsInJlcXVpcmUiLCJldmVudHNfMSIsInRva2VuXzEiLCJjb25zdHJ1Y3RvciIsInB1YmxpY0tleSIsImFjY291bnRMb2FkZXIiLCJpc1N1YnNjcmliZWQiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJzdWJzY3JpYmUiLCJhZGRUb0FjY291bnRMb2FkZXIiLCJzdWJzY3JpcHRpb25TdWNjZWVkZWQiLCJyZXRyaWVzIiwiZmV0Y2giLCJkaWRTdWJzY3JpcHRpb25TdWNjZWVkIiwiZW1pdCIsImNhbGxiYWNrSWQiLCJhZGRBY2NvdW50IiwiYnVmZmVyIiwic2xvdCIsInRva2VuQWNjb3VudCIsInBhcnNlVG9rZW5BY2NvdW50IiwidG9rZW5BY2NvdW50QW5kU2xvdCIsImRhdGEiLCJlcnJvckNhbGxiYWNrSWQiLCJhZGRFcnJvckNhbGxiYWNrcyIsImVycm9yIiwibG9hZCIsImdldEJ1ZmZlckFuZFNsb3QiLCJ1bnN1YnNjcmliZSIsInJlbW92ZUFjY291bnQiLCJ1bmRlZmluZWQiLCJyZW1vdmVFcnJvckNhbGxiYWNrcyIsImFzc2VydElzU3Vic2NyaWJlZCIsIk5vdFN1YnNjcmliZWRFcnJvciIsImdldFRva2VuQWNjb3VudEFuZFNsb3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingTokenAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserAccountSubscriber.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/pollingUserAccountSubscriber.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PollingUserAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nclass PollingUserAccountSubscriber {\n    constructor(program, userAccountPublicKey, accountLoader){\n        this.isSubscribed = false;\n        this.program = program;\n        this.accountLoader = accountLoader;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.userAccountPublicKey = userAccountPublicKey;\n    }\n    async subscribe(userAccount) {\n        if (this.isSubscribed) {\n            return true;\n        }\n        if (userAccount) {\n            this.user = {\n                data: userAccount,\n                slot: undefined\n            };\n        }\n        await this.addToAccountLoader();\n        await this.fetchIfUnloaded();\n        if (this.doesAccountExist()) {\n            this.eventEmitter.emit(\"update\");\n        }\n        this.isSubscribed = true;\n        return true;\n    }\n    async addToAccountLoader() {\n        if (this.callbackId) {\n            return;\n        }\n        this.callbackId = await this.accountLoader.addAccount(this.userAccountPublicKey, (buffer, slot)=>{\n            if (!buffer) {\n                return;\n            }\n            if (this.user && this.user.slot > slot) {\n                return;\n            }\n            const account = this.program.account.user.coder.accounts.decode(\"User\", buffer);\n            this.user = {\n                data: account,\n                slot\n            };\n            this.eventEmitter.emit(\"userAccountUpdate\", account);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.errorCallbackId = this.accountLoader.addErrorCallbacks((error)=>{\n            this.eventEmitter.emit(\"error\", error);\n        });\n    }\n    async fetchIfUnloaded() {\n        if (this.user === undefined) {\n            await this.fetch();\n        }\n    }\n    async fetch() {\n        var _a, _b;\n        await this.accountLoader.load();\n        const { buffer, slot } = this.accountLoader.getBufferAndSlot(this.userAccountPublicKey);\n        const currentSlot = (_b = (_a = this.user) === null || _a === void 0 ? void 0 : _a.slot) !== null && _b !== void 0 ? _b : 0;\n        if (buffer && slot > currentSlot) {\n            const account = this.program.account.user.coder.accounts.decode(\"User\", buffer);\n            this.user = {\n                data: account,\n                slot\n            };\n        }\n    }\n    doesAccountExist() {\n        return this.user !== undefined;\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        this.accountLoader.removeAccount(this.userAccountPublicKey, this.callbackId);\n        this.callbackId = undefined;\n        this.accountLoader.removeErrorCallbacks(this.errorCallbackId);\n        this.errorCallbackId = undefined;\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getUserAccountAndSlot() {\n        this.assertIsSubscribed();\n        return this.user;\n    }\n    updateData(userAccount, slot) {\n        if (!this.user || this.user.slot < slot) {\n            this.user = {\n                data: userAccount,\n                slot\n            };\n            this.eventEmitter.emit(\"userAccountUpdate\", userAccount);\n            this.eventEmitter.emit(\"update\");\n        }\n    }\n}\nexports.PollingUserAccountSubscriber = PollingUserAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9wb2xsaW5nVXNlckFjY291bnRTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQ0FBb0MsR0FBRyxLQUFLO0FBQzVDLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJFQUFTO0FBQ2pDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1GO0lBQ0ZJLFlBQVlDLE9BQU8sRUFBRUMsb0JBQW9CLEVBQUVDLGFBQWEsQ0FBRTtRQUN0RCxJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNILE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNFLGFBQWEsR0FBR0E7UUFDckIsSUFBSSxDQUFDRSxZQUFZLEdBQUcsSUFBSU4sU0FBU08sWUFBWTtRQUM3QyxJQUFJLENBQUNKLG9CQUFvQixHQUFHQTtJQUNoQztJQUNBLE1BQU1LLFVBQVVDLFdBQVcsRUFBRTtRQUN6QixJQUFJLElBQUksQ0FBQ0osWUFBWSxFQUFFO1lBQ25CLE9BQU87UUFDWDtRQUNBLElBQUlJLGFBQWE7WUFDYixJQUFJLENBQUNDLElBQUksR0FBRztnQkFBRUMsTUFBTUY7Z0JBQWFHLE1BQU1DO1lBQVU7UUFDckQ7UUFDQSxNQUFNLElBQUksQ0FBQ0Msa0JBQWtCO1FBQzdCLE1BQU0sSUFBSSxDQUFDQyxlQUFlO1FBQzFCLElBQUksSUFBSSxDQUFDQyxnQkFBZ0IsSUFBSTtZQUN6QixJQUFJLENBQUNWLFlBQVksQ0FBQ1csSUFBSSxDQUFDO1FBQzNCO1FBQ0EsSUFBSSxDQUFDWixZQUFZLEdBQUc7UUFDcEIsT0FBTztJQUNYO0lBQ0EsTUFBTVMscUJBQXFCO1FBQ3ZCLElBQUksSUFBSSxDQUFDSSxVQUFVLEVBQUU7WUFDakI7UUFDSjtRQUNBLElBQUksQ0FBQ0EsVUFBVSxHQUFHLE1BQU0sSUFB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QU1GO2dCQUFhRztZQUFLO1lBQ3RDLElBQUksQ0FBQ04sWUFBWSxDQUFDVyxJQUFJLENBQUMscUJBQXFCUjtZQUM1QyxJQUFJLENBQUNILFlBQVksQ0FBQ1csSUFBSSxDQUFDO1FBQzNCO0lBQ0o7QUFDSjtBQUNBdEIsb0NBQW9DLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2FjY291bnRzL3BvbGxpbmdVc2VyQWNjb3VudFN1YnNjcmliZXIuanM/ZTFmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUG9sbGluZ1VzZXJBY2NvdW50U3Vic2NyaWJlciA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNsYXNzIFBvbGxpbmdVc2VyQWNjb3VudFN1YnNjcmliZXIge1xuICAgIGNvbnN0cnVjdG9yKHByb2dyYW0sIHVzZXJBY2NvdW50UHVibGljS2V5LCBhY2NvdW50TG9hZGVyKSB7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMuYWNjb3VudExvYWRlciA9IGFjY291bnRMb2FkZXI7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gbmV3IGV2ZW50c18xLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnVzZXJBY2NvdW50UHVibGljS2V5ID0gdXNlckFjY291bnRQdWJsaWNLZXk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSh1c2VyQWNjb3VudCkge1xuICAgICAgICBpZiAodGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyQWNjb3VudCkge1xuICAgICAgICAgICAgdGhpcy51c2VyID0geyBkYXRhOiB1c2VyQWNjb3VudCwgc2xvdDogdW5kZWZpbmVkIH07XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5hZGRUb0FjY291bnRMb2FkZXIoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaElmVW5sb2FkZWQoKTtcbiAgICAgICAgaWYgKHRoaXMuZG9lc0FjY291bnRFeGlzdCgpKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBhZGRUb0FjY291bnRMb2FkZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrSWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxiYWNrSWQgPSBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIuYWRkQWNjb3VudCh0aGlzLnVzZXJBY2NvdW50UHVibGljS2V5LCAoYnVmZmVyLCBzbG90KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnVzZXIgJiYgdGhpcy51c2VyLnNsb3QgPiBzbG90KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHRoaXMucHJvZ3JhbS5hY2NvdW50LnVzZXIuY29kZXIuYWNjb3VudHMuZGVjb2RlKCdVc2VyJywgYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMudXNlciA9IHsgZGF0YTogYWNjb3VudCwgc2xvdCB9O1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXNlckFjY291bnRVcGRhdGUnLCBhY2NvdW50KTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VwZGF0ZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lcnJvckNhbGxiYWNrSWQgPSB0aGlzLmFjY291bnRMb2FkZXIuYWRkRXJyb3JDYWxsYmFja3MoKGVycm9yKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoSWZVbmxvYWRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZldGNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZmV0Y2goKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGF3YWl0IHRoaXMuYWNjb3VudExvYWRlci5sb2FkKCk7XG4gICAgICAgIGNvbnN0IHsgYnVmZmVyLCBzbG90IH0gPSB0aGlzLmFjY291bnRMb2FkZXIuZ2V0QnVmZmVyQW5kU2xvdCh0aGlzLnVzZXJBY2NvdW50UHVibGljS2V5KTtcbiAgICAgICAgY29uc3QgY3VycmVudFNsb3QgPSAoX2IgPSAoX2EgPSB0aGlzLnVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zbG90KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICBpZiAoYnVmZmVyICYmIHNsb3QgPiBjdXJyZW50U2xvdCkge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHRoaXMucHJvZ3JhbS5hY2NvdW50LnVzZXIuY29kZXIuYWNjb3VudHMuZGVjb2RlKCdVc2VyJywgYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMudXNlciA9IHsgZGF0YTogYWNjb3VudCwgc2xvdCB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvZXNBY2NvdW50RXhpc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXIgIT09IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIucmVtb3ZlQWNjb3VudCh0aGlzLnVzZXJBY2NvdW50UHVibGljS2V5LCB0aGlzLmNhbGxiYWNrSWQpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYWNjb3VudExvYWRlci5yZW1vdmVFcnJvckNhbGxiYWNrcyh0aGlzLmVycm9yQ2FsbGJhY2tJZCk7XG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFja0lkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBhc3NlcnRJc1N1YnNjcmliZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyB0eXBlc18xLk5vdFN1YnNjcmliZWRFcnJvcignWW91IG11c3QgY2FsbCBgc3Vic2NyaWJlYCBiZWZvcmUgdXNpbmcgdGhpcyBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFVzZXJBY2NvdW50QW5kU2xvdCgpIHtcbiAgICAgICAgdGhpcy5hc3NlcnRJc1N1YnNjcmliZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcjtcbiAgICB9XG4gICAgdXBkYXRlRGF0YSh1c2VyQWNjb3VudCwgc2xvdCkge1xuICAgICAgICBpZiAoIXRoaXMudXNlciB8fCB0aGlzLnVzZXIuc2xvdCA8IHNsb3QpIHtcbiAgICAgICAgICAgIHRoaXMudXNlciA9IHsgZGF0YTogdXNlckFjY291bnQsIHNsb3QgfTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VzZXJBY2NvdW50VXBkYXRlJywgdXNlckFjY291bnQpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLlBvbGxpbmdVc2VyQWNjb3VudFN1YnNjcmliZXIgPSBQb2xsaW5nVXNlckFjY291bnRTdWJzY3JpYmVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUG9sbGluZ1VzZXJBY2NvdW50U3Vic2NyaWJlciIsInR5cGVzXzEiLCJyZXF1aXJlIiwiZXZlbnRzXzEiLCJjb25zdHJ1Y3RvciIsInByb2dyYW0iLCJ1c2VyQWNjb3VudFB1YmxpY0tleSIsImFjY291bnRMb2FkZXIiLCJpc1N1YnNjcmliZWQiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJzdWJzY3JpYmUiLCJ1c2VyQWNjb3VudCIsInVzZXIiLCJkYXRhIiwic2xvdCIsInVuZGVmaW5lZCIsImFkZFRvQWNjb3VudExvYWRlciIsImZldGNoSWZVbmxvYWRlZCIsImRvZXNBY2NvdW50RXhpc3QiLCJlbWl0IiwiY2FsbGJhY2tJZCIsImFkZEFjY291bnQiLCJidWZmZXIiLCJhY2NvdW50IiwiY29kZXIiLCJhY2NvdW50cyIsImRlY29kZSIsImVycm9yQ2FsbGJhY2tJZCIsImFkZEVycm9yQ2FsbGJhY2tzIiwiZXJyb3IiLCJmZXRjaCIsIl9hIiwiX2IiLCJsb2FkIiwiZ2V0QnVmZmVyQW5kU2xvdCIsImN1cnJlbnRTbG90IiwidW5zdWJzY3JpYmUiLCJyZW1vdmVBY2NvdW50IiwicmVtb3ZlRXJyb3JDYWxsYmFja3MiLCJhc3NlcnRJc1N1YnNjcmliZWQiLCJOb3RTdWJzY3JpYmVkRXJyb3IiLCJnZXRVc2VyQWNjb3VudEFuZFNsb3QiLCJ1cGRhdGVEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserStatsAccountSubscriber.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/pollingUserStatsAccountSubscriber.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PollingUserStatsAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nclass PollingUserStatsAccountSubscriber {\n    constructor(program, userStatsAccountPublicKey, accountLoader){\n        this.isSubscribed = false;\n        this.program = program;\n        this.accountLoader = accountLoader;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.userStatsAccountPublicKey = userStatsAccountPublicKey;\n    }\n    async subscribe(userStatsAccount) {\n        if (this.isSubscribed) {\n            return true;\n        }\n        if (userStatsAccount) {\n            this.userStats = {\n                data: userStatsAccount,\n                slot: undefined\n            };\n        }\n        await this.addToAccountLoader();\n        await this.fetchIfUnloaded();\n        if (this.doesAccountExist()) {\n            this.eventEmitter.emit(\"update\");\n        }\n        this.isSubscribed = true;\n        return true;\n    }\n    async addToAccountLoader() {\n        if (this.callbackId !== undefined) {\n            return;\n        }\n        this.callbackId = await this.accountLoader.addAccount(this.userStatsAccountPublicKey, (buffer, slot)=>{\n            if (!buffer) {\n                return;\n            }\n            if (this.userStats && this.userStats.slot > slot) {\n                return;\n            }\n            const account = this.program.account.userStats.coder.accounts.decode(\"UserStats\", buffer);\n            this.userStats = {\n                data: account,\n                slot\n            };\n            this.eventEmitter.emit(\"userStatsAccountUpdate\", account);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.errorCallbackId = this.accountLoader.addErrorCallbacks((error)=>{\n            this.eventEmitter.emit(\"error\", error);\n        });\n    }\n    async fetchIfUnloaded() {\n        if (this.userStats === undefined) {\n            await this.fetch();\n        }\n    }\n    async fetch() {\n        var _a, _b;\n        await this.accountLoader.load();\n        const { buffer, slot } = this.accountLoader.getBufferAndSlot(this.userStatsAccountPublicKey);\n        const currentSlot = (_b = (_a = this.userStats) === null || _a === void 0 ? void 0 : _a.slot) !== null && _b !== void 0 ? _b : 0;\n        if (buffer && slot > currentSlot) {\n            const account = this.program.account.userStats.coder.accounts.decode(\"UserStats\", buffer);\n            this.userStats = {\n                data: account,\n                slot\n            };\n        }\n    }\n    doesAccountExist() {\n        return this.userStats !== undefined;\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        this.accountLoader.removeAccount(this.userStatsAccountPublicKey, this.callbackId);\n        this.callbackId = undefined;\n        this.accountLoader.removeErrorCallbacks(this.errorCallbackId);\n        this.errorCallbackId = undefined;\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getUserStatsAccountAndSlot() {\n        this.assertIsSubscribed();\n        return this.userStats;\n    }\n}\nexports.PollingUserStatsAccountSubscriber = PollingUserStatsAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy9wb2xsaW5nVXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHlDQUF5QyxHQUFHLEtBQUs7QUFDakQsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkVBQVM7QUFDakMsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUY7SUFDRkksWUFBWUMsT0FBTyxFQUFFQyx5QkFBeUIsRUFBRUMsYUFBYSxDQUFFO1FBQzNELElBQUksQ0FBQ0MsWUFBWSxHQUFHO1FBQ3BCLElBQUksQ0FBQ0gsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0UsYUFBYSxHQUFHQTtRQUNyQixJQUFJLENBQUNFLFlBQVksR0FBRyxJQUFJTixTQUFTTyxZQUFZO1FBQzdDLElBQUksQ0FBQ0oseUJBQXlCLEdBQUdBO0lBQ3JDO0lBQ0EsTUFBTUssVUFBVUMsZ0JBQWdCLEVBQUU7UUFDOUIsSUFBSSxJQUFJLENBQUNKLFlBQVksRUFBRTtZQUNuQixPQUFPO1FBQ1g7UUFDQSxJQUFJSSxrQkFBa0I7WUFDbEIsSUFBSSxDQUFDQyxTQUFTLEdBQUc7Z0JBQUVDLE1BQU1GO2dCQUFrQkcsTUFBTUM7WUFBVTtRQUMvRDtRQUNBLE1BQU0sSUFBSSxDQUFDQyxrQkFBa0I7UUFDN0IsTUFBTSxJQUFJLENBQUNDLGVBQWU7UUFDMUIsSUFBSSxJQUFJLENBQUNDLGdCQUFnQixJQUFJO1lBQ3pCLElBQUksQ0FBQ1YsWUFBWSxDQUFDVyxJQUFJLENBQUM7UUFDM0I7UUFDQSxJQUFJLENBQUNaLFlBQVksR0FBRztRQUNwQixPQUFPO0lBQ1g7SUFDQSxNQUFNUyxxQkFBcUI7UUFDdkIsSUFBSSxJQUFJLENBQUNJLFVBQVUsS0FBS0wsV0FBVztZQUMvQjtRQUNKO1FBQ0EsSUFBSSxDQUFDSyxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUNkLGFBQWEsQ0FBQ2UsVUFBVSxDQUFDLElBQUksQ0FBQ2hCLHlCQUF5QixFQUFFLENBQUNpQixRQUFRUjtZQUMzRixJQUFJLENBQUNRLFFBQVE7Z0JBQ1Q7WUFDSjtZQUNBLElBQUksSUFBSSxDQUFDVixTQUFTLElBQUksSUFBSSxDQUFDQSxTQUFTLENBQUNFLElBQUksR0FBR0EsTUFBTTtnQkFDOUM7WUFDSjtZQUNBLE1BQU1TLFVBQVUsSUFBSSxDQUFDbkIsT0FBTyxDQUFDbUIsT0FBTyxDQUFDWCxTQUFTLENBQUNZLEtBQUssQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUMsYUFBYUo7WUFDbEYsSUFBSSxDQUFDVixTQUFTLEdBQUc7Z0JBQUVDLE1BQU1VO2dCQUFTVDtZQUFLO1lBQ3ZDLElBQUksQ0FBQ04sWUFBWSxDQUFDVyxJQUFJLENBQUMsMEJBQTBCSTtZQUNqRCxJQUFJLENBQUNmLFlBQVksQ0FBQ1csSUFBSSxDQUFDO1FBQzNCO1FBQ0EsSUFBSSxDQUFDUSxlQUFlLEdBQUcsSUFBSSxDQUFDckIsYUFBYSxDQUFDc0IsaUJBQWlCLENBQUMsQ0FBQ0M7WUFDekQsSUFBSSxDQUFDckIsWUFBWSxDQUFDVyxJQUFJLENBQUMsU0FBU1U7UUFDcEM7SUFDSjtJQUNBLE1BQU1aLGtCQUFrQjtRQUNwQixJQUFJLElBQUksQ0FBQ0wsU0FBUyxLQUFLRyxXQUFXO1lBQzlCLE1BQU0sSUFBSSxDQUFDZSxLQUFLO1FBQ3BCO0lBQ0o7SUFDQSxNQUFNQSxRQUFRO1FBQ1YsSUFBSUMsSUFBSUM7UUFDUixNQUFNLElBQUksQ0FBQzFCLGFBQWEsQ0FBQzJCLElBQUk7UUFDN0IsTUFBTSxFQUFFWCxNQUFNLEVBQUVSLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQ1IsYUFBYSxDQUFDNEIsZ0JBQWdCLENBQUMsSUFBSSxDQUFDN0IseUJBQXlCO1FBQzNGLE1BQU04QixjQUFjLENBQUNILEtBQUssQ0FBQ0QsS0FBSyxJQUFJLENBQUNuQixTQUFTLE1BQU0sUUFBUW1CLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR2pCLElBQUksTUFBTSxRQUFRa0IsT0FBTyxLQUFLLElBQUlBLEtBQUs7UUFDL0gsSUFBSVYsVUFBVVIsT0FBT3FCLGFBQWE7WUFDOUIsTUFBTVosVUFBVSxJQUFJLENBQUNuQixPQUFPLENBQUNtQixPQUFPLENBQUNYLFNBQVMsQ0FBQ1ksS0FBSyxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxhQUFhSjtZQUNsRixJQUFJLENBQUNWLFNBQVMsR0FBRztnQkFBRUMsTUFBTVU7Z0JBQVNUO1lBQUs7UUFDM0M7SUFDSjtJQUNBSSxtQkFBbUI7UUFDZixPQUFPLElBQUksQ0FBQ04sU0FBUyxLQUFLRztJQUM5QjtJQUNBLE1BQU1xQixjQUFjO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUM3QixZQUFZLEVBQUU7WUFDcEI7UUFDSjtRQUNBLElBQUksQ0FBQ0QsYUFBYSxDQUFDK0IsYUFBYSxDQUFDLElBQUksQ0FBQ2hDLHlCQUF5QixFQUFFLElBQUksQ0FBQ2UsVUFBVTtRQUNoRixJQUFJLENBQUNBLFVBQVUsR0FBR0w7UUFDbEIsSUFBSSxDQUFDVCxhQUFhLENBQUNnQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUNYLGVBQWU7UUFDNUQsSUFBSSxDQUFDQSxlQUFlLEdBQUdaO1FBQ3ZCLElBQUksQ0FBQ1IsWUFBWSxHQUFHO0lBQ3hCO0lBQ0FnQyxxQkFBcUI7UUFDakIsSUFBSSxDQUFDLElBQUksQ0FBQ2hDLFlBQVksRUFBRTtZQUNwQixNQUFNLElBQUlQLFFBQVF3QyxrQkFBa0IsQ0FBQztRQUN6QztJQUNKO0lBQ0FDLDZCQUE2QjtRQUN6QixJQUFJLENBQUNGLGtCQUFrQjtRQUN2QixPQUFPLElBQUksQ0FBQzNCLFNBQVM7SUFDekI7QUFDSjtBQUNBZix5Q0FBeUMsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvcG9sbGluZ1VzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyLmpzPzg1NzIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBvbGxpbmdVc2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlciA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNsYXNzIFBvbGxpbmdVc2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IocHJvZ3JhbSwgdXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSwgYWNjb3VudExvYWRlcikge1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIgPSBhY2NvdW50TG9hZGVyO1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBldmVudHNfMS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy51c2VyU3RhdHNBY2NvdW50UHVibGljS2V5ID0gdXNlclN0YXRzQWNjb3VudFB1YmxpY0tleTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKHVzZXJTdGF0c0FjY291bnQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlclN0YXRzQWNjb3VudCkge1xuICAgICAgICAgICAgdGhpcy51c2VyU3RhdHMgPSB7IGRhdGE6IHVzZXJTdGF0c0FjY291bnQsIHNsb3Q6IHVuZGVmaW5lZCB9O1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuYWRkVG9BY2NvdW50TG9hZGVyKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hJZlVubG9hZGVkKCk7XG4gICAgICAgIGlmICh0aGlzLmRvZXNBY2NvdW50RXhpc3QoKSkge1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgYWRkVG9BY2NvdW50TG9hZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5jYWxsYmFja0lkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxiYWNrSWQgPSBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIuYWRkQWNjb3VudCh0aGlzLnVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXksIChidWZmZXIsIHNsb3QpID0+IHtcbiAgICAgICAgICAgIGlmICghYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudXNlclN0YXRzICYmIHRoaXMudXNlclN0YXRzLnNsb3QgPiBzbG90KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHRoaXMucHJvZ3JhbS5hY2NvdW50LnVzZXJTdGF0cy5jb2Rlci5hY2NvdW50cy5kZWNvZGUoJ1VzZXJTdGF0cycsIGJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLnVzZXJTdGF0cyA9IHsgZGF0YTogYWNjb3VudCwgc2xvdCB9O1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXNlclN0YXRzQWNjb3VudFVwZGF0ZScsIGFjY291bnQpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2tJZCA9IHRoaXMuYWNjb3VudExvYWRlci5hZGRFcnJvckNhbGxiYWNrcygoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hJZlVubG9hZGVkKCkge1xuICAgICAgICBpZiAodGhpcy51c2VyU3RhdHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5mZXRjaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZldGNoKCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIubG9hZCgpO1xuICAgICAgICBjb25zdCB7IGJ1ZmZlciwgc2xvdCB9ID0gdGhpcy5hY2NvdW50TG9hZGVyLmdldEJ1ZmZlckFuZFNsb3QodGhpcy51c2VyU3RhdHNBY2NvdW50UHVibGljS2V5KTtcbiAgICAgICAgY29uc3QgY3VycmVudFNsb3QgPSAoX2IgPSAoX2EgPSB0aGlzLnVzZXJTdGF0cykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNsb3QpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDA7XG4gICAgICAgIGlmIChidWZmZXIgJiYgc2xvdCA+IGN1cnJlbnRTbG90KSB7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gdGhpcy5wcm9ncmFtLmFjY291bnQudXNlclN0YXRzLmNvZGVyLmFjY291bnRzLmRlY29kZSgnVXNlclN0YXRzJywgYnVmZmVyKTtcbiAgICAgICAgICAgIHRoaXMudXNlclN0YXRzID0geyBkYXRhOiBhY2NvdW50LCBzbG90IH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZG9lc0FjY291bnRFeGlzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlclN0YXRzICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnJlbW92ZUFjY291bnQodGhpcy51c2VyU3RhdHNBY2NvdW50UHVibGljS2V5LCB0aGlzLmNhbGxiYWNrSWQpO1xuICAgICAgICB0aGlzLmNhbGxiYWNrSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYWNjb3VudExvYWRlci5yZW1vdmVFcnJvckNhbGxiYWNrcyh0aGlzLmVycm9yQ2FsbGJhY2tJZCk7XG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFja0lkID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBhc3NlcnRJc1N1YnNjcmliZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyB0eXBlc18xLk5vdFN1YnNjcmliZWRFcnJvcignWW91IG11c3QgY2FsbCBgc3Vic2NyaWJlYCBiZWZvcmUgdXNpbmcgdGhpcyBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFVzZXJTdGF0c0FjY291bnRBbmRTbG90KCkge1xuICAgICAgICB0aGlzLmFzc2VydElzU3Vic2NyaWJlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyU3RhdHM7XG4gICAgfVxufVxuZXhwb3J0cy5Qb2xsaW5nVXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXIgPSBQb2xsaW5nVXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXI7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJQb2xsaW5nVXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXIiLCJ0eXBlc18xIiwicmVxdWlyZSIsImV2ZW50c18xIiwiY29uc3RydWN0b3IiLCJwcm9ncmFtIiwidXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSIsImFjY291bnRMb2FkZXIiLCJpc1N1YnNjcmliZWQiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJzdWJzY3JpYmUiLCJ1c2VyU3RhdHNBY2NvdW50IiwidXNlclN0YXRzIiwiZGF0YSIsInNsb3QiLCJ1bmRlZmluZWQiLCJhZGRUb0FjY291bnRMb2FkZXIiLCJmZXRjaElmVW5sb2FkZWQiLCJkb2VzQWNjb3VudEV4aXN0IiwiZW1pdCIsImNhbGxiYWNrSWQiLCJhZGRBY2NvdW50IiwiYnVmZmVyIiwiYWNjb3VudCIsImNvZGVyIiwiYWNjb3VudHMiLCJkZWNvZGUiLCJlcnJvckNhbGxiYWNrSWQiLCJhZGRFcnJvckNhbGxiYWNrcyIsImVycm9yIiwiZmV0Y2giLCJfYSIsIl9iIiwibG9hZCIsImdldEJ1ZmZlckFuZFNsb3QiLCJjdXJyZW50U2xvdCIsInVuc3Vic2NyaWJlIiwicmVtb3ZlQWNjb3VudCIsInJlbW92ZUVycm9yQ2FsbGJhY2tzIiwiYXNzZXJ0SXNTdWJzY3JpYmVkIiwiTm90U3Vic2NyaWJlZEVycm9yIiwiZ2V0VXNlclN0YXRzQWNjb3VudEFuZFNsb3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserStatsAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/types.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.NotSubscribedError = void 0;\nclass NotSubscribedError extends Error {\n    constructor(){\n        super(...arguments);\n        this.name = \"NotSubscribedError\";\n    }\n}\nexports.NotSubscribedError = NotSubscribedError;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMEJBQTBCLEdBQUcsS0FBSztBQUNsQyxNQUFNRSwyQkFBMkJDO0lBQzdCQyxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNULElBQUksQ0FBQ0MsSUFBSSxHQUFHO0lBQ2hCO0FBQ0o7QUFDQU4sMEJBQTBCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2FjY291bnRzL3R5cGVzLmpzPzdjYmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk5vdFN1YnNjcmliZWRFcnJvciA9IHZvaWQgMDtcbmNsYXNzIE5vdFN1YnNjcmliZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdFN1YnNjcmliZWRFcnJvcic7XG4gICAgfVxufVxuZXhwb3J0cy5Ob3RTdWJzY3JpYmVkRXJyb3IgPSBOb3RTdWJzY3JpYmVkRXJyb3I7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJOb3RTdWJzY3JpYmVkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/utils.js":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/utils.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.capitalize = void 0;\nfunction capitalize(value) {\n    return value[0].toUpperCase() + value.slice(1);\n}\nexports.capitalize = capitalize;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy91dGlscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0JBQWtCLEdBQUcsS0FBSztBQUMxQixTQUFTRSxXQUFXRCxLQUFLO0lBQ3JCLE9BQU9BLEtBQUssQ0FBQyxFQUFFLENBQUNFLFdBQVcsS0FBS0YsTUFBTUcsS0FBSyxDQUFDO0FBQ2hEO0FBQ0FKLGtCQUFrQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy91dGlscy5qcz84NmRjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jYXBpdGFsaXplID0gdm9pZCAwO1xuZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZVswXS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG59XG5leHBvcnRzLmNhcGl0YWxpemUgPSBjYXBpdGFsaXplO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY2FwaXRhbGl6ZSIsInRvVXBwZXJDYXNlIiwic2xpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketAccountSubscriber.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/webSocketAccountSubscriber.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WebSocketAccountSubscriber = void 0;\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/utils.js\");\nclass WebSocketAccountSubscriber {\n    constructor(accountName, program, accountPublicKey, decodeBuffer){\n        this.accountName = accountName;\n        this.program = program;\n        this.accountPublicKey = accountPublicKey;\n        this.decodeBufferFn = decodeBuffer;\n    }\n    async subscribe(onChange) {\n        if (this.listenerId) {\n            return;\n        }\n        this.onChange = onChange;\n        if (!this.dataAndSlot) {\n            await this.fetch();\n        }\n        this.listenerId = this.program.provider.connection.onAccountChange(this.accountPublicKey, (accountInfo, context)=>{\n            this.handleRpcResponse(context, accountInfo);\n        }, this.program.provider.opts.commitment);\n    }\n    setData(data, slot) {\n        const newSlot = slot || 0;\n        if (this.dataAndSlot && this.dataAndSlot.slot > newSlot) {\n            return;\n        }\n        this.dataAndSlot = {\n            data,\n            slot\n        };\n    }\n    async fetch() {\n        const rpcResponse = await this.program.provider.connection.getAccountInfoAndContext(this.accountPublicKey, this.program.provider.opts.commitment);\n        this.handleRpcResponse(rpcResponse.context, rpcResponse === null || rpcResponse === void 0 ? void 0 : rpcResponse.value);\n    }\n    handleRpcResponse(context, accountInfo) {\n        const newSlot = context.slot;\n        let newBuffer = undefined;\n        if (accountInfo) {\n            newBuffer = accountInfo.data;\n        }\n        if (!this.bufferAndSlot) {\n            this.bufferAndSlot = {\n                buffer: newBuffer,\n                slot: newSlot\n            };\n            if (newBuffer) {\n                const account = this.decodeBuffer(newBuffer);\n                this.dataAndSlot = {\n                    data: account,\n                    slot: newSlot\n                };\n                this.onChange(account);\n            }\n            return;\n        }\n        if (newSlot <= this.bufferAndSlot.slot) {\n            return;\n        }\n        const oldBuffer = this.bufferAndSlot.buffer;\n        if (newBuffer && (!oldBuffer || !newBuffer.equals(oldBuffer))) {\n            this.bufferAndSlot = {\n                buffer: newBuffer,\n                slot: newSlot\n            };\n            const account = this.decodeBuffer(newBuffer);\n            this.dataAndSlot = {\n                data: account,\n                slot: newSlot\n            };\n            this.onChange(account);\n        }\n    }\n    decodeBuffer(buffer) {\n        if (this.decodeBufferFn) {\n            return this.decodeBufferFn(buffer);\n        } else {\n            return this.program.account[this.accountName].coder.accounts.decode((0, utils_1.capitalize)(this.accountName), buffer);\n        }\n    }\n    unsubscribe() {\n        if (this.listenerId) {\n            const promise = this.program.provider.connection.removeAccountChangeListener(this.listenerId);\n            this.listenerId = undefined;\n            return promise;\n        }\n    }\n}\nexports.WebSocketAccountSubscriber = WebSocketAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy93ZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0NBQWtDLEdBQUcsS0FBSztBQUMxQyxNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQywyRUFBUztBQUNqQyxNQUFNRjtJQUNGRyxZQUFZQyxXQUFXLEVBQUVDLE9BQU8sRUFBRUMsZ0JBQWdCLEVBQUVDLFlBQVksQ0FBRTtRQUM5RCxJQUFJLENBQUNILFdBQVcsR0FBR0E7UUFDbkIsSUFBSSxDQUFDQyxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBR0E7UUFDeEIsSUFBSSxDQUFDRSxjQUFjLEdBQUdEO0lBQzFCO0lBQ0EsTUFBTUUsVUFBVUMsUUFBUSxFQUFFO1FBQ3RCLElBQUksSUFBSSxDQUFDQyxVQUFVLEVBQUU7WUFDakI7UUFDSjtRQUNBLElBQUksQ0FBQ0QsUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDRSxXQUFXLEVBQUU7WUFDbkIsTUFBTSxJQUFJLENBQUNDLEtBQUs7UUFDcEI7UUFDQSxJQUFJLENBQUNGLFVBQVUsR0FBRyxJQUFJLENBQUNOLE9BQU8sQ0FBQ1MsUUFBUSxDQUFDQyxVQUFVLENBQUNDLGVBQWUsQ0FBQyxJQUFJLENBQUNWLGdCQUFnQixFQUFFLENBQUNXLGFBQWFDO1lBQ3BHLElBQUksQ0FBQ0MsaUJBQWlCLENBQUNELFNBQVNEO1FBQ3BDLEdBQUcsSUFBSSxDQUFDWixPQUFPLENBQUNTLFFBQVEsQ0FBQ00sSUFBSSxDQUFDQyxVQUFVO0lBQzVDO0lBQ0FDLFFBQVFDLElBQUksRUFBRUMsSUFBSSxFQUFFO1FBQ2hCLE1BQU1DLFVBQVVELFFBQVE7UUFDeEIsSUFBSSxJQUFJLENBQUNaLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVcsQ0FBQ1ksSUFBSSxHQUFHQyxTQUFTO1lBQ3JEO1FBQ0o7UUFDQSxJQUFJLENBQUNiLFdBQVcsR0FBRztZQUNmVztZQUNBQztRQUNKO0lBQ0o7SUFDQSxNQUFNWCxRQUFRO1FBQ1YsTUFBTWEsY0FBYyxNQUFNLElBQUksQ0FBQ3JCLE9BQU8sQ0FBQ1MsUUFBUSxDQUFDQyxVQUFVLENBQUNZLHdCQUF3QixDQUFDLElBQUksQ0FBQ3JCLGdCQUFnQixFQUFFLElBQUksQ0FBQ0QsT0FBTyxDQUFDUyxRQUFRLENBQUNNLElBQUksQ0FBQ0MsVUFBVTtRQUNoSixJQUFJLENBQUNGLGlCQUFpQixDQUFDTyxZQUFZUixPQUFPLEVBQUVRLGdCQUFnQixRQUFRQSxnQkFBZ0IsS0FBSyxJQUFJLEtBQUssSUFBSUEsWUFBWTNCLEtBQUs7SUFDM0g7SUFDQW9CLGtCQUFrQkQsT0FBTyxFQUFFRCxXQUFXLEVBQUU7UUFDcEMsTUFBTVEsVUFBVVAsUUFBUU0sSUFBSTtRQUM1QixJQUFJSSxZQUFZQztRQUNoQixJQUFJWixhQUFhO1lBQ2JXLFlBQVlYLFlBQVlNLElBQUk7UUFDaEM7UUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDTyxhQUFhLEVBQUU7WUFDckIsSUFBSSxDQUFDQSxhQUFhLEdBQUc7Z0JBQ2pCQyxRQUFRSDtnQkFDUkosTUFBTUM7WUFDVjtZQUNBLElBQUlHLFdBQVc7Z0JBQ1gsTUFBTUksVUFBVSxJQUFJLENBQUN6QixZQUFZLENBQUNxQjtnQkFDbEMsSUFBSSxDQUFDaEIsV0FBVyxHQUFHO29CQUNmVyxNQUFNUztvQkFDTlIsTUFBTUM7Z0JBQ1Y7Z0JBQ0EsSUFBSSxDQUFDZixRQUFRLENBQUNzQjtZQUNsQjtZQUNBO1FBQ0o7UUFDQSxJQUFJUCxXQUFXLElBQUksQ0FBQ0ssYUFBYSxDQUFDTixJQUFJLEVBQUU7WUFDcEM7UUFDSjtRQUNBLE1BQU1TLFlBQVksSUFBSSxDQUFDSCxhQUFhLENBQUNDLE1BQU07UUFDM0MsSUFBSUgsYUFBYyxFQUFDSyxhQUFhLENBQUNMLFVBQVVNLE1BQU0sQ0FBQ0QsVUFBUyxHQUFJO1lBQzNELElBQUksQ0FBQ0gsYUFBYSxHQUFHO2dCQUNqQkMsUUFBUUg7Z0JBQ1JKLE1BQU1DO1lBQ1Y7WUFDQSxNQUFNTyxVQUFVLElBQUksQ0FBQ3pCLFlBQVksQ0FBQ3FCO1lBQ2xDLElBQUksQ0FBQ2hCLFdBQVcsR0FBRztnQkFDZlcsTUFBTVM7Z0JBQ05SLE1BQU1DO1lBQ1Y7WUFDQSxJQUFJLENBQUNmLFFBQVEsQ0FBQ3NCO1FBQ2xCO0lBQ0o7SUFDQXpCLGFBQWF3QixNQUFNLEVBQUU7UUFDakIsSUFBSSxJQUFJLENBQUN2QixjQUFjLEVBQUU7WUFDckIsT0FBTyxJQUFJLENBQUNBLGNBQWMsQ0FBQ3VCO1FBQy9CLE9BQ0s7WUFDRCxPQUFPLElBQUksQ0FBQzFCLE9BQU8sQ0FBQzJCLE9BQU8sQ0FBQyxJQUFJLENBQUM1QixXQUFXLENBQUMsQ0FBQytCLEtBQUssQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUMsQ0FBQyxHQUFHcEMsUUFBUXFDLFVBQVUsRUFBRSxJQUFJLENBQUNsQyxXQUFXLEdBQUcyQjtRQUNuSDtJQUNKO0lBQ0FRLGNBQWM7UUFDVixJQUFJLElBQUksQ0FBQzVCLFVBQVUsRUFBRTtZQUNqQixNQUFNNkIsVUFBVSxJQUFJLENBQUNuQyxPQUFPLENBQUNTLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDMEIsMkJBQTJCLENBQUMsSUFBSSxDQUFDOUIsVUFBVTtZQUM1RixJQUFJLENBQUNBLFVBQVUsR0FBR2tCO1lBQ2xCLE9BQU9XO1FBQ1g7SUFDSjtBQUNKO0FBQ0ExQyxrQ0FBa0MsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvd2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXIuanM/YjJjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXIgPSB2b2lkIDA7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jbGFzcyBXZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IoYWNjb3VudE5hbWUsIHByb2dyYW0sIGFjY291bnRQdWJsaWNLZXksIGRlY29kZUJ1ZmZlcikge1xuICAgICAgICB0aGlzLmFjY291bnROYW1lID0gYWNjb3VudE5hbWU7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMuYWNjb3VudFB1YmxpY0tleSA9IGFjY291bnRQdWJsaWNLZXk7XG4gICAgICAgIHRoaXMuZGVjb2RlQnVmZmVyRm4gPSBkZWNvZGVCdWZmZXI7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZShvbkNoYW5nZSkge1xuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcklkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgICBpZiAoIXRoaXMuZGF0YUFuZFNsb3QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2goKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVySWQgPSB0aGlzLnByb2dyYW0ucHJvdmlkZXIuY29ubmVjdGlvbi5vbkFjY291bnRDaGFuZ2UodGhpcy5hY2NvdW50UHVibGljS2V5LCAoYWNjb3VudEluZm8sIGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUnBjUmVzcG9uc2UoY29udGV4dCwgYWNjb3VudEluZm8pO1xuICAgICAgICB9LCB0aGlzLnByb2dyYW0ucHJvdmlkZXIub3B0cy5jb21taXRtZW50KTtcbiAgICB9XG4gICAgc2V0RGF0YShkYXRhLCBzbG90KSB7XG4gICAgICAgIGNvbnN0IG5ld1Nsb3QgPSBzbG90IHx8IDA7XG4gICAgICAgIGlmICh0aGlzLmRhdGFBbmRTbG90ICYmIHRoaXMuZGF0YUFuZFNsb3Quc2xvdCA+IG5ld1Nsb3QpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhdGFBbmRTbG90ID0ge1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHNsb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGZldGNoKCkge1xuICAgICAgICBjb25zdCBycGNSZXNwb25zZSA9IGF3YWl0IHRoaXMucHJvZ3JhbS5wcm92aWRlci5jb25uZWN0aW9uLmdldEFjY291bnRJbmZvQW5kQ29udGV4dCh0aGlzLmFjY291bnRQdWJsaWNLZXksIHRoaXMucHJvZ3JhbS5wcm92aWRlci5vcHRzLmNvbW1pdG1lbnQpO1xuICAgICAgICB0aGlzLmhhbmRsZVJwY1Jlc3BvbnNlKHJwY1Jlc3BvbnNlLmNvbnRleHQsIHJwY1Jlc3BvbnNlID09PSBudWxsIHx8IHJwY1Jlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBycGNSZXNwb25zZS52YWx1ZSk7XG4gICAgfVxuICAgIGhhbmRsZVJwY1Jlc3BvbnNlKGNvbnRleHQsIGFjY291bnRJbmZvKSB7XG4gICAgICAgIGNvbnN0IG5ld1Nsb3QgPSBjb250ZXh0LnNsb3Q7XG4gICAgICAgIGxldCBuZXdCdWZmZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChhY2NvdW50SW5mbykge1xuICAgICAgICAgICAgbmV3QnVmZmVyID0gYWNjb3VudEluZm8uZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYnVmZmVyQW5kU2xvdCkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJBbmRTbG90ID0ge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogbmV3QnVmZmVyLFxuICAgICAgICAgICAgICAgIHNsb3Q6IG5ld1Nsb3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG5ld0J1ZmZlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSB0aGlzLmRlY29kZUJ1ZmZlcihuZXdCdWZmZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YUFuZFNsb3QgPSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGFjY291bnQsXG4gICAgICAgICAgICAgICAgICAgIHNsb3Q6IG5ld1Nsb3QsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGFjY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdTbG90IDw9IHRoaXMuYnVmZmVyQW5kU2xvdC5zbG90KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkQnVmZmVyID0gdGhpcy5idWZmZXJBbmRTbG90LmJ1ZmZlcjtcbiAgICAgICAgaWYgKG5ld0J1ZmZlciAmJiAoIW9sZEJ1ZmZlciB8fCAhbmV3QnVmZmVyLmVxdWFscyhvbGRCdWZmZXIpKSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXJBbmRTbG90ID0ge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcjogbmV3QnVmZmVyLFxuICAgICAgICAgICAgICAgIHNsb3Q6IG5ld1Nsb3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHRoaXMuZGVjb2RlQnVmZmVyKG5ld0J1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLmRhdGFBbmRTbG90ID0ge1xuICAgICAgICAgICAgICAgIGRhdGE6IGFjY291bnQsXG4gICAgICAgICAgICAgICAgc2xvdDogbmV3U2xvdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGFjY291bnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRlY29kZUJ1ZmZlcihidWZmZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVjb2RlQnVmZmVyRm4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJ1ZmZlckZuKGJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmFtLmFjY291bnRbdGhpcy5hY2NvdW50TmFtZV0uY29kZXIuYWNjb3VudHMuZGVjb2RlKCgwLCB1dGlsc18xLmNhcGl0YWxpemUpKHRoaXMuYWNjb3VudE5hbWUpLCBidWZmZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcklkKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5wcm9ncmFtLnByb3ZpZGVyLmNvbm5lY3Rpb24ucmVtb3ZlQWNjb3VudENoYW5nZUxpc3RlbmVyKHRoaXMubGlzdGVuZXJJZCk7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVySWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuV2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXIgPSBXZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIldlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyIiwidXRpbHNfMSIsInJlcXVpcmUiLCJjb25zdHJ1Y3RvciIsImFjY291bnROYW1lIiwicHJvZ3JhbSIsImFjY291bnRQdWJsaWNLZXkiLCJkZWNvZGVCdWZmZXIiLCJkZWNvZGVCdWZmZXJGbiIsInN1YnNjcmliZSIsIm9uQ2hhbmdlIiwibGlzdGVuZXJJZCIsImRhdGFBbmRTbG90IiwiZmV0Y2giLCJwcm92aWRlciIsImNvbm5lY3Rpb24iLCJvbkFjY291bnRDaGFuZ2UiLCJhY2NvdW50SW5mbyIsImNvbnRleHQiLCJoYW5kbGVScGNSZXNwb25zZSIsIm9wdHMiLCJjb21taXRtZW50Iiwic2V0RGF0YSIsImRhdGEiLCJzbG90IiwibmV3U2xvdCIsInJwY1Jlc3BvbnNlIiwiZ2V0QWNjb3VudEluZm9BbmRDb250ZXh0IiwibmV3QnVmZmVyIiwidW5kZWZpbmVkIiwiYnVmZmVyQW5kU2xvdCIsImJ1ZmZlciIsImFjY291bnQiLCJvbGRCdWZmZXIiLCJlcXVhbHMiLCJjb2RlciIsImFjY291bnRzIiwiZGVjb2RlIiwiY2FwaXRhbGl6ZSIsInVuc3Vic2NyaWJlIiwicHJvbWlzZSIsInJlbW92ZUFjY291bnRDaGFuZ2VMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketDriftClientAccountSubscriber.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/webSocketDriftClientAccountSubscriber.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WebSocketDriftClientAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst pda_1 = __webpack_require__(/*! ../addresses/pda */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\");\nconst webSocketAccountSubscriber_1 = __webpack_require__(/*! ./webSocketAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketAccountSubscriber.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst oracleClientCache_1 = __webpack_require__(/*! ../oracles/oracleClientCache */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/oracleClientCache.js\");\nconst quoteAssetOracleClient_1 = __webpack_require__(/*! ../oracles/quoteAssetOracleClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/quoteAssetOracleClient.js\");\nconst config_1 = __webpack_require__(/*! ../config */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/config.js\");\nclass WebSocketDriftClientAccountSubscriber {\n    constructor(program, perpMarketIndexes, spotMarketIndexes, oracleInfos, shouldFindAllMarketsAndOracles){\n        this.oracleClientCache = new oracleClientCache_1.OracleClientCache();\n        this.perpMarketAccountSubscribers = new Map();\n        this.spotMarketAccountSubscribers = new Map();\n        this.oracleSubscribers = new Map();\n        this.isSubscribing = false;\n        this.isSubscribed = false;\n        this.program = program;\n        this.eventEmitter = new events_1.EventEmitter();\n        this.perpMarketIndexes = perpMarketIndexes;\n        this.spotMarketIndexes = spotMarketIndexes;\n        this.oracleInfos = oracleInfos;\n        this.shouldFindAllMarketsAndOracles = shouldFindAllMarketsAndOracles;\n    }\n    async subscribe() {\n        if (this.isSubscribed) {\n            return true;\n        }\n        if (this.isSubscribing) {\n            return await this.subscriptionPromise;\n        }\n        this.isSubscribing = true;\n        this.subscriptionPromise = new Promise((res)=>{\n            this.subscriptionPromiseResolver = res;\n        });\n        if (this.shouldFindAllMarketsAndOracles) {\n            const { perpMarketIndexes, spotMarketIndexes, oracleInfos } = await (0, config_1.findAllMarketAndOracles)(this.program);\n            this.perpMarketIndexes = perpMarketIndexes;\n            this.spotMarketIndexes = spotMarketIndexes;\n            this.oracleInfos = oracleInfos;\n        }\n        const statePublicKey = await (0, pda_1.getDriftStateAccountPublicKey)(this.program.programId);\n        // create and activate main state account subscription\n        this.stateAccountSubscriber = new webSocketAccountSubscriber_1.WebSocketAccountSubscriber(\"state\", this.program, statePublicKey);\n        await this.stateAccountSubscriber.subscribe((data)=>{\n            this.eventEmitter.emit(\"stateAccountUpdate\", data);\n            this.eventEmitter.emit(\"update\");\n        });\n        // subscribe to market accounts\n        await this.subscribeToPerpMarketAccounts();\n        // subscribe to spot market accounts\n        await this.subscribeToSpotMarketAccounts();\n        // subscribe to oracles\n        await this.subscribeToOracles();\n        this.eventEmitter.emit(\"update\");\n        this.isSubscribing = false;\n        this.isSubscribed = true;\n        this.subscriptionPromiseResolver(true);\n        return true;\n    }\n    async subscribeToPerpMarketAccounts() {\n        for (const marketIndex of this.perpMarketIndexes){\n            await this.subscribeToPerpMarketAccount(marketIndex);\n        }\n        return true;\n    }\n    async subscribeToPerpMarketAccount(marketIndex) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, marketIndex);\n        const accountSubscriber = new webSocketAccountSubscriber_1.WebSocketAccountSubscriber(\"perpMarket\", this.program, perpMarketPublicKey);\n        await accountSubscriber.subscribe((data)=>{\n            this.eventEmitter.emit(\"perpMarketAccountUpdate\", data);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.perpMarketAccountSubscribers.set(marketIndex, accountSubscriber);\n        return true;\n    }\n    async subscribeToSpotMarketAccounts() {\n        for (const marketIndex of this.spotMarketIndexes){\n            await this.subscribeToSpotMarketAccount(marketIndex);\n        }\n        return true;\n    }\n    async subscribeToSpotMarketAccount(marketIndex) {\n        const marketPublicKey = await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, marketIndex);\n        const accountSubscriber = new webSocketAccountSubscriber_1.WebSocketAccountSubscriber(\"spotMarket\", this.program, marketPublicKey);\n        await accountSubscriber.subscribe((data)=>{\n            this.eventEmitter.emit(\"spotMarketAccountUpdate\", data);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.spotMarketAccountSubscribers.set(marketIndex, accountSubscriber);\n        return true;\n    }\n    async subscribeToOracles() {\n        for (const oracleInfo of this.oracleInfos){\n            if (!oracleInfo.publicKey.equals(web3_js_1.PublicKey.default)) {\n                await this.subscribeToOracle(oracleInfo);\n            }\n        }\n        return true;\n    }\n    async subscribeToOracle(oracleInfo) {\n        const client = this.oracleClientCache.get(oracleInfo.source, this.program.provider.connection);\n        const accountSubscriber = new webSocketAccountSubscriber_1.WebSocketAccountSubscriber(\"oracle\", this.program, oracleInfo.publicKey, (buffer)=>{\n            return client.getOraclePriceDataFromBuffer(buffer);\n        });\n        await accountSubscriber.subscribe((data)=>{\n            this.eventEmitter.emit(\"oraclePriceUpdate\", oracleInfo.publicKey, data);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.oracleSubscribers.set(oracleInfo.publicKey.toString(), accountSubscriber);\n        return true;\n    }\n    async unsubscribeFromMarketAccounts() {\n        for (const accountSubscriber of this.perpMarketAccountSubscribers.values()){\n            await accountSubscriber.unsubscribe();\n        }\n    }\n    async unsubscribeFromSpotMarketAccounts() {\n        for (const accountSubscriber of this.spotMarketAccountSubscribers.values()){\n            await accountSubscriber.unsubscribe();\n        }\n    }\n    async unsubscribeFromOracles() {\n        for (const accountSubscriber of this.oracleSubscribers.values()){\n            await accountSubscriber.unsubscribe();\n        }\n    }\n    async fetch() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        const promises = [\n            this.stateAccountSubscriber.fetch()\n        ].concat(Array.from(this.perpMarketAccountSubscribers.values()).map((subscriber)=>subscriber.fetch())).concat(Array.from(this.spotMarketAccountSubscribers.values()).map((subscriber)=>subscriber.fetch()));\n        await Promise.all(promises);\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        await this.stateAccountSubscriber.unsubscribe();\n        await this.unsubscribeFromMarketAccounts();\n        await this.unsubscribeFromSpotMarketAccounts();\n        await this.unsubscribeFromOracles();\n        this.isSubscribed = false;\n    }\n    async addSpotMarket(marketIndex) {\n        if (this.spotMarketAccountSubscribers.has(marketIndex)) {\n            return true;\n        }\n        return this.subscribeToSpotMarketAccount(marketIndex);\n    }\n    async addPerpMarket(marketIndex) {\n        if (this.perpMarketAccountSubscribers.has(marketIndex)) {\n            return true;\n        }\n        return this.subscribeToPerpMarketAccount(marketIndex);\n    }\n    async addOracle(oracleInfo) {\n        if (this.oracleSubscribers.has(oracleInfo.publicKey.toString())) {\n            return true;\n        }\n        if (oracleInfo.publicKey.equals(web3_js_1.PublicKey.default)) {\n            return true;\n        }\n        return this.subscribeToOracle(oracleInfo);\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getStateAccountAndSlot() {\n        this.assertIsSubscribed();\n        return this.stateAccountSubscriber.dataAndSlot;\n    }\n    getMarketAccountAndSlot(marketIndex) {\n        this.assertIsSubscribed();\n        return this.perpMarketAccountSubscribers.get(marketIndex).dataAndSlot;\n    }\n    getMarketAccountsAndSlots() {\n        return Array.from(this.perpMarketAccountSubscribers.values()).map((subscriber)=>subscriber.dataAndSlot);\n    }\n    getSpotMarketAccountAndSlot(marketIndex) {\n        this.assertIsSubscribed();\n        return this.spotMarketAccountSubscribers.get(marketIndex).dataAndSlot;\n    }\n    getSpotMarketAccountsAndSlots() {\n        return Array.from(this.spotMarketAccountSubscribers.values()).map((subscriber)=>subscriber.dataAndSlot);\n    }\n    getOraclePriceDataAndSlot(oraclePublicKey) {\n        this.assertIsSubscribed();\n        if (oraclePublicKey.equals(web3_js_1.PublicKey.default)) {\n            return {\n                data: quoteAssetOracleClient_1.QUOTE_ORACLE_PRICE_DATA,\n                slot: 0\n            };\n        }\n        return this.oracleSubscribers.get(oraclePublicKey.toString()).dataAndSlot;\n    }\n}\nexports.WebSocketDriftClientAccountSubscriber = WebSocketDriftClientAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy93ZWJTb2NrZXREcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2Q0FBNkMsR0FBRyxLQUFLO0FBQ3JELE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJFQUFTO0FBQ2pDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1FLFFBQVFGLG1CQUFPQSxDQUFDLG1GQUFrQjtBQUN4QyxNQUFNRywrQkFBK0JILG1CQUFPQSxDQUFDLHFIQUE4QjtBQUMzRSxNQUFNSSxZQUFZSixtQkFBT0EsQ0FBQyw4RUFBaUI7QUFDM0MsTUFBTUssc0JBQXNCTCxtQkFBT0EsQ0FBQywyR0FBOEI7QUFDbEUsTUFBTU0sMkJBQTJCTixtQkFBT0EsQ0FBQyxxSEFBbUM7QUFDNUUsTUFBTU8sV0FBV1AsbUJBQU9BLENBQUMscUVBQVc7QUFDcEMsTUFBTUY7SUFDRlUsWUFBWUMsT0FBTyxFQUFFQyxpQkFBaUIsRUFBRUMsaUJBQWlCLEVBQUVDLFdBQVcsRUFBRUMsOEJBQThCLENBQUU7UUFDcEcsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxJQUFJVCxvQkFBb0JVLGlCQUFpQjtRQUNsRSxJQUFJLENBQUNDLDRCQUE0QixHQUFHLElBQUlDO1FBQ3hDLElBQUksQ0FBQ0MsNEJBQTRCLEdBQUcsSUFBSUQ7UUFDeEMsSUFBSSxDQUFDRSxpQkFBaUIsR0FBRyxJQUFJRjtRQUM3QixJQUFJLENBQUNHLGFBQWEsR0FBRztRQUNyQixJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNaLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNhLFlBQVksR0FBRyxJQUFJckIsU0FBU3NCLFlBQVk7UUFDN0MsSUFBSSxDQUFDYixpQkFBaUIsR0FBR0E7UUFDekIsSUFBSSxD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QixDQUFDa0QsV0FBVztJQUNsRDtJQUNBQyx3QkFBd0I1QyxXQUFXLEVBQUU7UUFDakMsSUFBSSxDQUFDd0Msa0JBQWtCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDaEUsNEJBQTRCLENBQUN3QyxHQUFHLENBQUNoQixhQUFhMkMsV0FBVztJQUN6RTtJQUNBRSw0QkFBNEI7UUFDeEIsT0FBT2QsTUFBTUMsSUFBSSxDQUFDLElBQUksQ0FBQ3hELDRCQUE0QixDQUFDZ0QsTUFBTSxJQUFJUyxHQUFHLENBQUMsQ0FBQ0MsYUFBZUEsV0FBV1MsV0FBVztJQUM1RztJQUNBRyw0QkFBNEI5QyxXQUFXLEVBQUU7UUFDckMsSUFBSSxDQUFDd0Msa0JBQWtCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDOUQsNEJBQTRCLENBQUNzQyxHQUFHLENBQUNoQixhQUFhMkMsV0FBVztJQUN6RTtJQUNBSSxnQ0FBZ0M7UUFDNUIsT0FBT2hCLE1BQU1DLElBQUksQ0FBQyxJQUFJLENBQUN0RCw0QkFBNEIsQ0FBQzhDLE1BQU0sSUFBSVMsR0FBRyxDQUFDLENBQUNDLGFBQWVBLFdBQVdTLFdBQVc7SUFDNUc7SUFDQUssMEJBQTBCQyxlQUFlLEVBQUU7UUFDdkMsSUFBSSxDQUFDVCxrQkFBa0I7UUFDdkIsSUFBSVMsZ0JBQWdCdEMsTUFBTSxDQUFDL0MsVUFBVWdELFNBQVMsQ0FBQ0MsT0FBTyxHQUFHO1lBQ3JELE9BQU87Z0JBQ0hsQixNQUFNN0IseUJBQXlCb0YsdUJBQXVCO2dCQUN0REMsTUFBTTtZQUNWO1FBQ0o7UUFDQSxPQUFPLElBQUksQ0FBQ3hFLGlCQUFpQixDQUFDcUMsR0FBRyxDQUFDaUMsZ0JBQWdCM0IsUUFBUSxJQUFJcUIsV0FBVztJQUM3RTtBQUNKO0FBQ0F2Riw2Q0FBNkMsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvd2ViU29ja2V0RHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlci5qcz85ZWQ3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XZWJTb2NrZXREcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xuY29uc3QgcGRhXzEgPSByZXF1aXJlKFwiLi4vYWRkcmVzc2VzL3BkYVwiKTtcbmNvbnN0IHdlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyXzEgPSByZXF1aXJlKFwiLi93ZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlclwiKTtcbmNvbnN0IHdlYjNfanNfMSA9IHJlcXVpcmUoXCJAc29sYW5hL3dlYjMuanNcIik7XG5jb25zdCBvcmFjbGVDbGllbnRDYWNoZV8xID0gcmVxdWlyZShcIi4uL29yYWNsZXMvb3JhY2xlQ2xpZW50Q2FjaGVcIik7XG5jb25zdCBxdW90ZUFzc2V0T3JhY2xlQ2xpZW50XzEgPSByZXF1aXJlKFwiLi4vb3JhY2xlcy9xdW90ZUFzc2V0T3JhY2xlQ2xpZW50XCIpO1xuY29uc3QgY29uZmlnXzEgPSByZXF1aXJlKFwiLi4vY29uZmlnXCIpO1xuY2xhc3MgV2ViU29ja2V0RHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IocHJvZ3JhbSwgcGVycE1hcmtldEluZGV4ZXMsIHNwb3RNYXJrZXRJbmRleGVzLCBvcmFjbGVJbmZvcywgc2hvdWxkRmluZEFsbE1hcmtldHNBbmRPcmFjbGVzKSB7XG4gICAgICAgIHRoaXMub3JhY2xlQ2xpZW50Q2FjaGUgPSBuZXcgb3JhY2xlQ2xpZW50Q2FjaGVfMS5PcmFjbGVDbGllbnRDYWNoZSgpO1xuICAgICAgICB0aGlzLnBlcnBNYXJrZXRBY2NvdW50U3Vic2NyaWJlcnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuc3BvdE1hcmtldEFjY291bnRTdWJzY3JpYmVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5vcmFjbGVTdWJzY3JpYmVycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gbmV3IGV2ZW50c18xLkV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnBlcnBNYXJrZXRJbmRleGVzID0gcGVycE1hcmtldEluZGV4ZXM7XG4gICAgICAgIHRoaXMuc3BvdE1hcmtldEluZGV4ZXMgPSBzcG90TWFya2V0SW5kZXhlcztcbiAgICAgICAgdGhpcy5vcmFjbGVJbmZvcyA9IG9yYWNsZUluZm9zO1xuICAgICAgICB0aGlzLnNob3VsZEZpbmRBbGxNYXJrZXRzQW5kT3JhY2xlcyA9IHNob3VsZEZpbmRBbGxNYXJrZXRzQW5kT3JhY2xlcztcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzU3Vic2NyaWJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnN1YnNjcmlwdGlvblByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N1YnNjcmliaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlID0gbmV3IFByb21pc2UoKHJlcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlUmVzb2x2ZXIgPSByZXM7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5zaG91bGRGaW5kQWxsTWFya2V0c0FuZE9yYWNsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGVycE1hcmtldEluZGV4ZXMsIHNwb3RNYXJrZXRJbmRleGVzLCBvcmFjbGVJbmZvcyB9ID0gYXdhaXQgKDAsIGNvbmZpZ18xLmZpbmRBbGxNYXJrZXRBbmRPcmFjbGVzKSh0aGlzLnByb2dyYW0pO1xuICAgICAgICAgICAgdGhpcy5wZXJwTWFya2V0SW5kZXhlcyA9IHBlcnBNYXJrZXRJbmRleGVzO1xuICAgICAgICAgICAgdGhpcy5zcG90TWFya2V0SW5kZXhlcyA9IHNwb3RNYXJrZXRJbmRleGVzO1xuICAgICAgICAgICAgdGhpcy5vcmFjbGVJbmZvcyA9IG9yYWNsZUluZm9zO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlUHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldERyaWZ0U3RhdGVBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkKTtcbiAgICAgICAgLy8gY3JlYXRlIGFuZCBhY3RpdmF0ZSBtYWluIHN0YXRlIGFjY291bnQgc3Vic2NyaXB0aW9uXG4gICAgICAgIHRoaXMuc3RhdGVBY2NvdW50U3Vic2NyaWJlciA9IG5ldyB3ZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlcl8xLldlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyKCdzdGF0ZScsIHRoaXMucHJvZ3JhbSwgc3RhdGVQdWJsaWNLZXkpO1xuICAgICAgICBhd2FpdCB0aGlzLnN0YXRlQWNjb3VudFN1YnNjcmliZXIuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCdzdGF0ZUFjY291bnRVcGRhdGUnLCBkYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VwZGF0ZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gc3Vic2NyaWJlIHRvIG1hcmtldCBhY2NvdW50c1xuICAgICAgICBhd2FpdCB0aGlzLnN1YnNjcmliZVRvUGVycE1hcmtldEFjY291bnRzKCk7XG4gICAgICAgIC8vIHN1YnNjcmliZSB0byBzcG90IG1hcmtldCBhY2NvdW50c1xuICAgICAgICBhd2FpdCB0aGlzLnN1YnNjcmliZVRvU3BvdE1hcmtldEFjY291bnRzKCk7XG4gICAgICAgIC8vIHN1YnNjcmliZSB0byBvcmFjbGVzXG4gICAgICAgIGF3YWl0IHRoaXMuc3Vic2NyaWJlVG9PcmFjbGVzKCk7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VwZGF0ZScpO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblByb21pc2VSZXNvbHZlcih0cnVlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZVRvUGVycE1hcmtldEFjY291bnRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1hcmtldEluZGV4IG9mIHRoaXMucGVycE1hcmtldEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3Vic2NyaWJlVG9QZXJwTWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZVRvUGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgcGVycE1hcmtldFB1YmxpY0tleSA9IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGFjY291bnRTdWJzY3JpYmVyID0gbmV3IHdlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyXzEuV2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXIoJ3BlcnBNYXJrZXQnLCB0aGlzLnByb2dyYW0sIHBlcnBNYXJrZXRQdWJsaWNLZXkpO1xuICAgICAgICBhd2FpdCBhY2NvdW50U3Vic2NyaWJlci5zdWJzY3JpYmUoKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3BlcnBNYXJrZXRBY2NvdW50VXBkYXRlJywgZGF0YSk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucGVycE1hcmtldEFjY291bnRTdWJzY3JpYmVycy5zZXQobWFya2V0SW5kZXgsIGFjY291bnRTdWJzY3JpYmVyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZVRvU3BvdE1hcmtldEFjY291bnRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IG1hcmtldEluZGV4IG9mIHRoaXMuc3BvdE1hcmtldEluZGV4ZXMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3Vic2NyaWJlVG9TcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZVRvU3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgbWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFNwb3RNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgYWNjb3VudFN1YnNjcmliZXIgPSBuZXcgd2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXJfMS5XZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlcignc3BvdE1hcmtldCcsIHRoaXMucHJvZ3JhbSwgbWFya2V0UHVibGljS2V5KTtcbiAgICAgICAgYXdhaXQgYWNjb3VudFN1YnNjcmliZXIuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCdzcG90TWFya2V0QWNjb3VudFVwZGF0ZScsIGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNwb3RNYXJrZXRBY2NvdW50U3Vic2NyaWJlcnMuc2V0KG1hcmtldEluZGV4LCBhY2NvdW50U3Vic2NyaWJlcik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBzdWJzY3JpYmVUb09yYWNsZXMoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgb3JhY2xlSW5mbyBvZiB0aGlzLm9yYWNsZUluZm9zKSB7XG4gICAgICAgICAgICBpZiAoIW9yYWNsZUluZm8ucHVibGljS2V5LmVxdWFscyh3ZWIzX2pzXzEuUHVibGljS2V5LmRlZmF1bHQpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zdWJzY3JpYmVUb09yYWNsZShvcmFjbGVJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlVG9PcmFjbGUob3JhY2xlSW5mbykge1xuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLm9yYWNsZUNsaWVudENhY2hlLmdldChvcmFjbGVJbmZvLnNvdXJjZSwgdGhpcy5wcm9ncmFtLnByb3ZpZGVyLmNvbm5lY3Rpb24pO1xuICAgICAgICBjb25zdCBhY2NvdW50U3Vic2NyaWJlciA9IG5ldyB3ZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlcl8xLldlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyKCdvcmFjbGUnLCB0aGlzLnByb2dyYW0sIG9yYWNsZUluZm8ucHVibGljS2V5LCAoYnVmZmVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50LmdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIoYnVmZmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IGFjY291bnRTdWJzY3JpYmVyLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnb3JhY2xlUHJpY2VVcGRhdGUnLCBvcmFjbGVJbmZvLnB1YmxpY0tleSwgZGF0YSk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3JhY2xlU3Vic2NyaWJlcnMuc2V0KG9yYWNsZUluZm8ucHVibGljS2V5LnRvU3RyaW5nKCksIGFjY291bnRTdWJzY3JpYmVyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlRnJvbU1hcmtldEFjY291bnRzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFjY291bnRTdWJzY3JpYmVyIG9mIHRoaXMucGVycE1hcmtldEFjY291bnRTdWJzY3JpYmVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgYXdhaXQgYWNjb3VudFN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZUZyb21TcG90TWFya2V0QWNjb3VudHMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgYWNjb3VudFN1YnNjcmliZXIgb2YgdGhpcy5zcG90TWFya2V0QWNjb3VudFN1YnNjcmliZXJzLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBhd2FpdCBhY2NvdW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlRnJvbU9yYWNsZXMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgYWNjb3VudFN1YnNjcmliZXIgb2YgdGhpcy5vcmFjbGVTdWJzY3JpYmVycy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgYXdhaXQgYWNjb3VudFN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmZXRjaCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gW3RoaXMuc3RhdGVBY2NvdW50U3Vic2NyaWJlci5mZXRjaCgpXVxuICAgICAgICAgICAgLmNvbmNhdChBcnJheS5mcm9tKHRoaXMucGVycE1hcmtldEFjY291bnRTdWJzY3JpYmVycy52YWx1ZXMoKSkubWFwKChzdWJzY3JpYmVyKSA9PiBzdWJzY3JpYmVyLmZldGNoKCkpKVxuICAgICAgICAgICAgLmNvbmNhdChBcnJheS5mcm9tKHRoaXMuc3BvdE1hcmtldEFjY291bnRTdWJzY3JpYmVycy52YWx1ZXMoKSkubWFwKChzdWJzY3JpYmVyKSA9PiBzdWJzY3JpYmVyLmZldGNoKCkpKTtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc3RhdGVBY2NvdW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLnVuc3Vic2NyaWJlRnJvbU1hcmtldEFjY291bnRzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMudW5zdWJzY3JpYmVGcm9tU3BvdE1hcmtldEFjY291bnRzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMudW5zdWJzY3JpYmVGcm9tT3JhY2xlcygpO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBhc3luYyBhZGRTcG90TWFya2V0KG1hcmtldEluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLnNwb3RNYXJrZXRBY2NvdW50U3Vic2NyaWJlcnMuaGFzKG1hcmtldEluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlVG9TcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgfVxuICAgIGFzeW5jIGFkZFBlcnBNYXJrZXQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMucGVycE1hcmtldEFjY291bnRTdWJzY3JpYmVycy5oYXMobWFya2V0SW5kZXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVUb1BlcnBNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICB9XG4gICAgYXN5bmMgYWRkT3JhY2xlKG9yYWNsZUluZm8pIHtcbiAgICAgICAgaWYgKHRoaXMub3JhY2xlU3Vic2NyaWJlcnMuaGFzKG9yYWNsZUluZm8ucHVibGljS2V5LnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3JhY2xlSW5mby5wdWJsaWNLZXkuZXF1YWxzKHdlYjNfanNfMS5QdWJsaWNLZXkuZGVmYXVsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZVRvT3JhY2xlKG9yYWNsZUluZm8pO1xuICAgIH1cbiAgICBhc3NlcnRJc1N1YnNjcmliZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyB0eXBlc18xLk5vdFN1YnNjcmliZWRFcnJvcignWW91IG11c3QgY2FsbCBgc3Vic2NyaWJlYCBiZWZvcmUgdXNpbmcgdGhpcyBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFN0YXRlQWNjb3VudEFuZFNsb3QoKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0SXNTdWJzY3JpYmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlQWNjb3VudFN1YnNjcmliZXIuZGF0YUFuZFNsb3Q7XG4gICAgfVxuICAgIGdldE1hcmtldEFjY291bnRBbmRTbG90KG1hcmtldEluZGV4KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0SXNTdWJzY3JpYmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnBNYXJrZXRBY2NvdW50U3Vic2NyaWJlcnMuZ2V0KG1hcmtldEluZGV4KS5kYXRhQW5kU2xvdDtcbiAgICB9XG4gICAgZ2V0TWFya2V0QWNjb3VudHNBbmRTbG90cygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wZXJwTWFya2V0QWNjb3VudFN1YnNjcmliZXJzLnZhbHVlcygpKS5tYXAoKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIuZGF0YUFuZFNsb3QpO1xuICAgIH1cbiAgICBnZXRTcG90TWFya2V0QWNjb3VudEFuZFNsb3QobWFya2V0SW5kZXgpIHtcbiAgICAgICAgdGhpcy5hc3NlcnRJc1N1YnNjcmliZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3BvdE1hcmtldEFjY291bnRTdWJzY3JpYmVycy5nZXQobWFya2V0SW5kZXgpLmRhdGFBbmRTbG90O1xuICAgIH1cbiAgICBnZXRTcG90TWFya2V0QWNjb3VudHNBbmRTbG90cygpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5zcG90TWFya2V0QWNjb3VudFN1YnNjcmliZXJzLnZhbHVlcygpKS5tYXAoKHN1YnNjcmliZXIpID0+IHN1YnNjcmliZXIuZGF0YUFuZFNsb3QpO1xuICAgIH1cbiAgICBnZXRPcmFjbGVQcmljZURhdGFBbmRTbG90KG9yYWNsZVB1YmxpY0tleSkge1xuICAgICAgICB0aGlzLmFzc2VydElzU3Vic2NyaWJlZCgpO1xuICAgICAgICBpZiAob3JhY2xlUHVibGljS2V5LmVxdWFscyh3ZWIzX2pzXzEuUHVibGljS2V5LmRlZmF1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRhdGE6IHF1b3RlQXNzZXRPcmFjbGVDbGllbnRfMS5RVU9URV9PUkFDTEVfUFJJQ0VfREFUQSxcbiAgICAgICAgICAgICAgICBzbG90OiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcmFjbGVTdWJzY3JpYmVycy5nZXQob3JhY2xlUHVibGljS2V5LnRvU3RyaW5nKCkpLmRhdGFBbmRTbG90O1xuICAgIH1cbn1cbmV4cG9ydHMuV2ViU29ja2V0RHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlciA9IFdlYlNvY2tldERyaWZ0Q2xpZW50QWNjb3VudFN1YnNjcmliZXI7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJXZWJTb2NrZXREcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyIiwidHlwZXNfMSIsInJlcXVpcmUiLCJldmVudHNfMSIsInBkYV8xIiwid2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXJfMSIsIndlYjNfanNfMSIsIm9yYWNsZUNsaWVudENhY2hlXzEiLCJxdW90ZUFzc2V0T3JhY2xlQ2xpZW50XzEiLCJjb25maWdfMSIsImNvbnN0cnVjdG9yIiwicHJvZ3JhbSIsInBlcnBNYXJrZXRJbmRleGVzIiwic3BvdE1hcmtldEluZGV4ZXMiLCJvcmFjbGVJbmZvcyIsInNob3VsZEZpbmRBbGxNYXJrZXRzQW5kT3JhY2xlcyIsIm9yYWNsZUNsaWVudENhY2hlIiwiT3JhY2xlQ2xpZW50Q2FjaGUiLCJwZXJwTWFya2V0QWNjb3VudFN1YnNjcmliZXJzIiwiTWFwIiwic3BvdE1hcmtldEFjY291bnRTdWJzY3JpYmVycyIsIm9yYWNsZVN1YnNjcmliZXJzIiwiaXNTdWJzY3JpYmluZyIsImlzU3Vic2NyaWJlZCIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmliZSIsInN1YnNjcmlwdGlvblByb21pc2UiLCJQcm9taXNlIiwicmVzIiwic3Vic2NyaXB0aW9uUHJvbWlzZVJlc29sdmVyIiwiZmluZEFsbE1hcmtldEFuZE9yYWNsZXMiLCJzdGF0ZVB1YmxpY0tleSIsImdldERyaWZ0U3RhdGVBY2NvdW50UHVibGljS2V5IiwicHJvZ3JhbUlkIiwic3RhdGVBY2NvdW50U3Vic2NyaWJlciIsIldlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyIiwiZGF0YSIsImVtaXQiLCJzdWJzY3JpYmVUb1BlcnBNYXJrZXRBY2NvdW50cyIsInN1YnNjcmliZVRvU3BvdE1hcmtldEFjY291bnRzIiwic3Vic2NyaWJlVG9PcmFjbGVzIiwibWFya2V0SW5kZXgiLCJzdWJzY3JpYmVUb1BlcnBNYXJrZXRBY2NvdW50IiwicGVycE1hcmtldFB1YmxpY0tleSIsImdldFBlcnBNYXJrZXRQdWJsaWNLZXkiLCJhY2NvdW50U3Vic2NyaWJlciIsInNldCIsInN1YnNjcmliZVRvU3BvdE1hcmtldEFjY291bnQiLCJtYXJrZXRQdWJsaWNLZXkiLCJnZXRTcG90TWFya2V0UHVibGljS2V5Iiwib3JhY2xlSW5mbyIsInB1YmxpY0tleSIsImVxdWFscyIsIlB1YmxpY0tleSIsImRlZmF1bHQiLCJzdWJzY3JpYmVUb09yYWNsZSIsImNsaWVudCIsImdldCIsInNvdXJjZSIsInByb3ZpZGVyIiwiY29ubmVjdGlvbiIsImJ1ZmZlciIsImdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIiLCJ0b1N0cmluZyIsInVuc3Vic2NyaWJlRnJvbU1hcmtldEFjY291bnRzIiwidmFsdWVzIiwidW5zdWJzY3JpYmUiLCJ1bnN1YnNjcmliZUZyb21TcG90TWFya2V0QWNjb3VudHMiLCJ1bnN1YnNjcmliZUZyb21PcmFjbGVzIiwiZmV0Y2giLCJwcm9taXNlcyIsImNvbmNhdCIsIkFycmF5IiwiZnJvbSIsIm1hcCIsInN1YnNjcmliZXIiLCJhbGwiLCJhZGRTcG90TWFya2V0IiwiaGFzIiwiYWRkUGVycE1hcmtldCIsImFkZE9yYWNsZSIsImFzc2VydElzU3Vic2NyaWJlZCIsIk5vdFN1YnNjcmliZWRFcnJvciIsImdldFN0YXRlQWNjb3VudEFuZFNsb3QiLCJkYXRhQW5kU2xvdCIsImdldE1hcmtldEFjY291bnRBbmRTbG90IiwiZ2V0TWFya2V0QWNjb3VudHNBbmRTbG90cyIsImdldFNwb3RNYXJrZXRBY2NvdW50QW5kU2xvdCIsImdldFNwb3RNYXJrZXRBY2NvdW50c0FuZFNsb3RzIiwiZ2V0T3JhY2xlUHJpY2VEYXRhQW5kU2xvdCIsIm9yYWNsZVB1YmxpY0tleSIsIlFVT1RFX09SQUNMRV9QUklDRV9EQVRBIiwic2xvdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketDriftClientAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserAccountSubscriber.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserAccountSubscriber.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WebSocketUserAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst webSocketAccountSubscriber_1 = __webpack_require__(/*! ./webSocketAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketAccountSubscriber.js\");\nclass WebSocketUserAccountSubscriber {\n    constructor(program, userAccountPublicKey){\n        this.isSubscribed = false;\n        this.program = program;\n        this.userAccountPublicKey = userAccountPublicKey;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe(userAccount) {\n        if (this.isSubscribed) {\n            return true;\n        }\n        this.userDataAccountSubscriber = new webSocketAccountSubscriber_1.WebSocketAccountSubscriber(\"user\", this.program, this.userAccountPublicKey);\n        if (userAccount) {\n            this.userDataAccountSubscriber.setData(userAccount);\n        }\n        await this.userDataAccountSubscriber.subscribe((data)=>{\n            this.eventEmitter.emit(\"userAccountUpdate\", data);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.eventEmitter.emit(\"update\");\n        this.isSubscribed = true;\n        return true;\n    }\n    async fetch() {\n        await Promise.all([\n            this.userDataAccountSubscriber.fetch()\n        ]);\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        await Promise.all([\n            this.userDataAccountSubscriber.unsubscribe()\n        ]);\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getUserAccountAndSlot() {\n        this.assertIsSubscribed();\n        return this.userDataAccountSubscriber.dataAndSlot;\n    }\n    updateData(userAccount, slot) {\n        var _a;\n        const currentDataSlot = ((_a = this.userDataAccountSubscriber.dataAndSlot) === null || _a === void 0 ? void 0 : _a.slot) || 0;\n        if (currentDataSlot < slot) {\n            this.userDataAccountSubscriber.setData(userAccount, slot);\n            this.eventEmitter.emit(\"userAccountUpdate\", userAccount);\n            this.eventEmitter.emit(\"update\");\n        }\n    }\n}\nexports.WebSocketUserAccountSubscriber = WebSocketUserAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy93ZWJTb2NrZXRVc2VyQWNjb3VudFN1YnNjcmliZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNDQUFzQyxHQUFHLEtBQUs7QUFDOUMsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsMkVBQVM7QUFDakMsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsc0JBQVE7QUFDakMsTUFBTUUsK0JBQStCRixtQkFBT0EsQ0FBQyxxSEFBOEI7QUFDM0UsTUFBTUY7SUFDRkssWUFBWUMsT0FBTyxFQUFFQyxvQkFBb0IsQ0FBRTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNGLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLG9CQUFvQixHQUFHQTtRQUM1QixJQUFJLENBQUNFLFlBQVksR0FBRyxJQUFJTixTQUFTTyxZQUFZO0lBQ2pEO0lBQ0EsTUFBTUMsVUFBVUMsV0FBVyxFQUFFO1FBQ3pCLElBQUksSUFBSSxDQUFDSixZQUFZLEVBQUU7WUFDbkIsT0FBTztRQUNYO1FBQ0EsSUFBSSxDQUFDSyx5QkFBeUIsR0FBRyxJQUFJVCw2QkFBNkJVLDBCQUEwQixDQUFDLFFBQVEsSUFBSSxDQUFDUixPQUFPLEVBQUUsSUFBSSxDQUFDQyxvQkFBb0I7UUFDNUksSUFBSUssYUFBYTtZQUNiLElBQUksQ0FBQ0MseUJBQXlCLENBQUNFLE9BQU8sQ0FBQ0g7UUFDM0M7UUFDQSxNQUFNLElBQUksQ0FBQ0MseUJBQXlCLENBQUNGLFNBQVMsQ0FBQyxDQUFDSztZQUM1QyxJQUFJLENBQUNQLFlBQVksQ0FBQ1EsSUFBSSxDQUFDLHFCQUFxQkQ7WUFDNUMsSUFBSSxDQUFDUCxZQUFZLENBQUNRLElBQUksQ0FBQztRQUMzQjtRQUNBLElBQUksQ0FBQ1IsWUFBWSxDQUFDUSxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDVCxZQUFZLEdBQUc7UUFDcEIsT0FBTztJQUNYO0lBQ0EsTUFBTVUsUUFBUTtRQUNWLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUFDLElBQUksQ0FBQ1AseUJBQXlCLENBQUNLLEtBQUs7U0FBRztJQUM5RDtJQUNBLE1BQU1HLGNBQWM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQ2IsWUFBWSxFQUFFO1lBQ3BCO1FBQ0o7UUFDQSxNQUFNVyxRQUFRQyxHQUFHLENBQUM7WUFBQyxJQUFJLENBQUNQLHlCQUF5QixDQUFDUSxXQUFXO1NBQUc7UUFDaEUsSUFBSSxDQUFDYixZQUFZLEdBQUc7SUFDeEI7SUFDQWMscUJBQXFCO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUNkLFlBQVksRUFBRTtZQUNwQixNQUFNLElBQUlQLFFBQVFzQixrQkFBa0IsQ0FBQztRQUN6QztJQUNKO0lBQ0FDLHdCQUF3QjtRQUNwQixJQUFJLENBQUNGLGtCQUFrQjtRQUN2QixPQUFPLElBQUksQ0FBQ1QseUJBQXlCLENBQUNZLFdBQVc7SUFDckQ7SUFDQUMsV0FBV2QsV0FBVyxFQUFFZSxJQUFJLEVBQUU7UUFDMUIsSUFBSUM7UUFDSixNQUFNQyxrQkFBa0IsQ0FBQyxDQUFDRCxLQUFLLElBQUksQ0FBQ2YseUJBQXlCLENBQUNZLFdBQVcsTUFBTSxRQUFRRyxPQUFPLEtBQUssSUFBSSxLQUFLLElBQUlBLEdBQUdELElBQUksS0FBSztRQUM1SCxJQUFJRSxrQkFBa0JGLE1BQU07WUFDeEIsSUFBSSxDQUFDZCx5QkFBeUIsQ0FBQ0UsT0FBTyxDQUFDSCxhQUFhZTtZQUNwRCxJQUFJLENBQUNsQixZQUFZLENBQUNRLElBQUksQ0FBQyxxQkFBcUJMO1lBQzVDLElBQUksQ0FBQ0gsWUFBWSxDQUFDUSxJQUFJLENBQUM7UUFDM0I7SUFDSjtBQUNKO0FBQ0FuQixzQ0FBc0MsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWNjb3VudHMvd2ViU29ja2V0VXNlckFjY291bnRTdWJzY3JpYmVyLmpzPzIzZjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLldlYlNvY2tldFVzZXJBY2NvdW50U3Vic2NyaWJlciA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IGV2ZW50c18xID0gcmVxdWlyZShcImV2ZW50c1wiKTtcbmNvbnN0IHdlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyXzEgPSByZXF1aXJlKFwiLi93ZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlclwiKTtcbmNsYXNzIFdlYlNvY2tldFVzZXJBY2NvdW50U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IocHJvZ3JhbSwgdXNlckFjY291bnRQdWJsaWNLZXkpIHtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgdGhpcy51c2VyQWNjb3VudFB1YmxpY0tleSA9IHVzZXJBY2NvdW50UHVibGljS2V5O1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBldmVudHNfMS5FdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKHVzZXJBY2NvdW50KSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51c2VyRGF0YUFjY291bnRTdWJzY3JpYmVyID0gbmV3IHdlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyXzEuV2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXIoJ3VzZXInLCB0aGlzLnByb2dyYW0sIHRoaXMudXNlckFjY291bnRQdWJsaWNLZXkpO1xuICAgICAgICBpZiAodXNlckFjY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMudXNlckRhdGFBY2NvdW50U3Vic2NyaWJlci5zZXREYXRhKHVzZXJBY2NvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnVzZXJEYXRhQWNjb3VudFN1YnNjcmliZXIuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1c2VyQWNjb3VudFVwZGF0ZScsIGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2goKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnVzZXJEYXRhQWNjb3VudFN1YnNjcmliZXIuZmV0Y2goKV0pO1xuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnVzZXJEYXRhQWNjb3VudFN1YnNjcmliZXIudW5zdWJzY3JpYmUoKV0pO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBhc3NlcnRJc1N1YnNjcmliZWQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyB0eXBlc18xLk5vdFN1YnNjcmliZWRFcnJvcignWW91IG11c3QgY2FsbCBgc3Vic2NyaWJlYCBiZWZvcmUgdXNpbmcgdGhpcyBmdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFVzZXJBY2NvdW50QW5kU2xvdCgpIHtcbiAgICAgICAgdGhpcy5hc3NlcnRJc1N1YnNjcmliZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlckRhdGFBY2NvdW50U3Vic2NyaWJlci5kYXRhQW5kU2xvdDtcbiAgICB9XG4gICAgdXBkYXRlRGF0YSh1c2VyQWNjb3VudCwgc2xvdCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRhU2xvdCA9ICgoX2EgPSB0aGlzLnVzZXJEYXRhQWNjb3VudFN1YnNjcmliZXIuZGF0YUFuZFNsb3QpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zbG90KSB8fCAwO1xuICAgICAgICBpZiAoY3VycmVudERhdGFTbG90IDwgc2xvdCkge1xuICAgICAgICAgICAgdGhpcy51c2VyRGF0YUFjY291bnRTdWJzY3JpYmVyLnNldERhdGEodXNlckFjY291bnQsIHNsb3QpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXNlckFjY291bnRVcGRhdGUnLCB1c2VyQWNjb3VudCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuV2ViU29ja2V0VXNlckFjY291bnRTdWJzY3JpYmVyID0gV2ViU29ja2V0VXNlckFjY291bnRTdWJzY3JpYmVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiV2ViU29ja2V0VXNlckFjY291bnRTdWJzY3JpYmVyIiwidHlwZXNfMSIsInJlcXVpcmUiLCJldmVudHNfMSIsIndlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyXzEiLCJjb25zdHJ1Y3RvciIsInByb2dyYW0iLCJ1c2VyQWNjb3VudFB1YmxpY0tleSIsImlzU3Vic2NyaWJlZCIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmliZSIsInVzZXJBY2NvdW50IiwidXNlckRhdGFBY2NvdW50U3Vic2NyaWJlciIsIldlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyIiwic2V0RGF0YSIsImRhdGEiLCJlbWl0IiwiZmV0Y2giLCJQcm9taXNlIiwiYWxsIiwidW5zdWJzY3JpYmUiLCJhc3NlcnRJc1N1YnNjcmliZWQiLCJOb3RTdWJzY3JpYmVkRXJyb3IiLCJnZXRVc2VyQWNjb3VudEFuZFNsb3QiLCJkYXRhQW5kU2xvdCIsInVwZGF0ZURhdGEiLCJzbG90IiwiX2EiLCJjdXJyZW50RGF0YVNsb3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserAccountSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserStatsAccountSubsriber.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserStatsAccountSubsriber.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WebSocketUserStatsAccountSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst webSocketAccountSubscriber_1 = __webpack_require__(/*! ./webSocketAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketAccountSubscriber.js\");\nclass WebSocketUserStatsAccountSubscriber {\n    constructor(program, userStatsAccountPublicKey){\n        this.isSubscribed = false;\n        this.program = program;\n        this.userStatsAccountPublicKey = userStatsAccountPublicKey;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe(userStatsAccount) {\n        if (this.isSubscribed) {\n            return true;\n        }\n        this.userStatsAccountSubscriber = new webSocketAccountSubscriber_1.WebSocketAccountSubscriber(\"userStats\", this.program, this.userStatsAccountPublicKey);\n        if (userStatsAccount) {\n            this.userStatsAccountSubscriber.setData(userStatsAccount);\n        }\n        await this.userStatsAccountSubscriber.subscribe((data)=>{\n            this.eventEmitter.emit(\"userStatsAccountUpdate\", data);\n            this.eventEmitter.emit(\"update\");\n        });\n        this.eventEmitter.emit(\"update\");\n        this.isSubscribed = true;\n        return true;\n    }\n    async fetch() {\n        await Promise.all([\n            this.userStatsAccountSubscriber.fetch()\n        ]);\n    }\n    async unsubscribe() {\n        if (!this.isSubscribed) {\n            return;\n        }\n        await Promise.all([\n            this.userStatsAccountSubscriber.unsubscribe()\n        ]);\n        this.isSubscribed = false;\n    }\n    assertIsSubscribed() {\n        if (!this.isSubscribed) {\n            throw new types_1.NotSubscribedError(\"You must call `subscribe` before using this function\");\n        }\n    }\n    getUserStatsAccountAndSlot() {\n        this.assertIsSubscribed();\n        return this.userStatsAccountSubscriber.dataAndSlot;\n    }\n}\nexports.WebSocketUserStatsAccountSubscriber = WebSocketUserStatsAccountSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hY2NvdW50cy93ZWJTb2NrZXRVc2VyU3RhdHNBY2NvdW50U3Vic3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwyQ0FBMkMsR0FBRyxLQUFLO0FBQ25ELE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLDJFQUFTO0FBQ2pDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1FLCtCQUErQkYsbUJBQU9BLENBQUMscUhBQThCO0FBQzNFLE1BQU1GO0lBQ0ZLLFlBQVlDLE9BQU8sRUFBRUMseUJBQXlCLENBQUU7UUFDNUMsSUFBSSxDQUFDQyxZQUFZLEdBQUc7UUFDcEIsSUFBSSxDQUFDRixPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDQyx5QkFBeUIsR0FBR0E7UUFDakMsSUFBSSxDQUFDRSxZQUFZLEdBQUcsSUFBSU4sU0FBU08sWUFBWTtJQUNqRDtJQUNBLE1BQU1DLFVBQVVDLGdCQUFnQixFQUFFO1FBQzlCLElBQUksSUFBSSxDQUFDSixZQUFZLEVBQUU7WUFDbkIsT0FBTztRQUNYO1FBQ0EsSUFBSSxDQUFDSywwQkFBMEIsR0FBRyxJQUFJVCw2QkFBNkJVLDBCQUEwQixDQUFDLGFBQWEsSUFBSSxDQUFDUixPQUFPLEVBQUUsSUFBSSxDQUFDQyx5QkFBeUI7UUFDdkosSUFBSUssa0JBQWtCO1lBQ2xCLElBQUksQ0FBQ0MsMEJBQTBCLENBQUNFLE9BQU8sQ0FBQ0g7UUFDNUM7UUFDQSxNQUFNLElBQUksQ0FBQ0MsMEJBQTBCLENBQUNGLFNBQVMsQ0FBQyxDQUFDSztZQUM3QyxJQUFJLENBQUNQLFlBQVksQ0FBQ1EsSUFBSSxDQUFDLDBCQUEwQkQ7WUFDakQsSUFBSSxDQUFDUCxZQUFZLENBQUNRLElBQUksQ0FBQztRQUMzQjtRQUNBLElBQUksQ0FBQ1IsWUFBWSxDQUFDUSxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDVCxZQUFZLEdBQUc7UUFDcEIsT0FBTztJQUNYO0lBQ0EsTUFBTVUsUUFBUTtRQUNWLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUFDLElBQUksQ0FBQ1AsMEJBQTBCLENBQUNLLEtBQUs7U0FBRztJQUMvRDtJQUNBLE1BQU1HLGNBQWM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQ2IsWUFBWSxFQUFFO1lBQ3BCO1FBQ0o7UUFDQSxNQUFNVyxRQUFRQyxHQUFHLENBQUM7WUFBQyxJQUFJLENBQUNQLDBCQUEwQixDQUFDUSxXQUFXO1NBQUc7UUFDakUsSUFBSSxDQUFDYixZQUFZLEdBQUc7SUFDeEI7SUFDQWMscUJBQXFCO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUNkLFlBQVksRUFBRTtZQUNwQixNQUFNLElBQUlQLFFBQVFzQixrQkFBa0IsQ0FBQztRQUN6QztJQUNKO0lBQ0FDLDZCQUE2QjtRQUN6QixJQUFJLENBQUNGLGtCQUFrQjtRQUN2QixPQUFPLElBQUksQ0FBQ1QsMEJBQTBCLENBQUNZLFdBQVc7SUFDdEQ7QUFDSjtBQUNBM0IsMkNBQTJDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2FjY291bnRzL3dlYlNvY2tldFVzZXJTdGF0c0FjY291bnRTdWJzcmliZXIuanM/ZjYwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV2ViU29ja2V0VXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXIgPSB2b2lkIDA7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XG5jb25zdCB3ZWJTb2NrZXRBY2NvdW50U3Vic2NyaWJlcl8xID0gcmVxdWlyZShcIi4vd2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXJcIik7XG5jbGFzcyBXZWJTb2NrZXRVc2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IocHJvZ3JhbSwgdXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSkge1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgICAgICB0aGlzLnVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkgPSB1c2VyU3RhdHNBY2NvdW50UHVibGljS2V5O1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBldmVudHNfMS5FdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKHVzZXJTdGF0c0FjY291bnQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyID0gbmV3IHdlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyXzEuV2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXIoJ3VzZXJTdGF0cycsIHRoaXMucHJvZ3JhbSwgdGhpcy51c2VyU3RhdHNBY2NvdW50UHVibGljS2V5KTtcbiAgICAgICAgaWYgKHVzZXJTdGF0c0FjY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMudXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXIuc2V0RGF0YSh1c2VyU3RhdHNBY2NvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnVzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyLnN1YnNjcmliZSgoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXNlclN0YXRzQWNjb3VudFVwZGF0ZScsIGRhdGEpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgndXBkYXRlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5lbWl0KCd1cGRhdGUnKTtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2goKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLnVzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyLmZldGNoKCldKTtcbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy51c2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpXSk7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgfVxuICAgIGFzc2VydElzU3Vic2NyaWJlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHR5cGVzXzEuTm90U3Vic2NyaWJlZEVycm9yKCdZb3UgbXVzdCBjYWxsIGBzdWJzY3JpYmVgIGJlZm9yZSB1c2luZyB0aGlzIGZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VXNlclN0YXRzQWNjb3VudEFuZFNsb3QoKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0SXNTdWJzY3JpYmVkKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyLmRhdGFBbmRTbG90O1xuICAgIH1cbn1cbmV4cG9ydHMuV2ViU29ja2V0VXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXIgPSBXZWJTb2NrZXRVc2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIldlYlNvY2tldFVzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyIiwidHlwZXNfMSIsInJlcXVpcmUiLCJldmVudHNfMSIsIndlYlNvY2tldEFjY291bnRTdWJzY3JpYmVyXzEiLCJjb25zdHJ1Y3RvciIsInByb2dyYW0iLCJ1c2VyU3RhdHNBY2NvdW50UHVibGljS2V5IiwiaXNTdWJzY3JpYmVkIiwiZXZlbnRFbWl0dGVyIiwiRXZlbnRFbWl0dGVyIiwic3Vic2NyaWJlIiwidXNlclN0YXRzQWNjb3VudCIsInVzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyIiwiV2ViU29ja2V0QWNjb3VudFN1YnNjcmliZXIiLCJzZXREYXRhIiwiZGF0YSIsImVtaXQiLCJmZXRjaCIsIlByb21pc2UiLCJhbGwiLCJ1bnN1YnNjcmliZSIsImFzc2VydElzU3Vic2NyaWJlZCIsIk5vdFN1YnNjcmliZWRFcnJvciIsImdldFVzZXJTdGF0c0FjY291bnRBbmRTbG90IiwiZGF0YUFuZFNsb3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserStatsAccountSubsriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js":
/*!***********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/addresses/pda.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __setModuleDefault = (void 0) && (void 0).__setModuleDefault || (Object.create ? function(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (void 0) && (void 0).__importStar || function(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k in mod)if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    }\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getReferrerNamePublicKeySync = exports.getPhoenixFulfillmentConfigPublicKey = exports.getSerumFulfillmentConfigPublicKey = exports.getSerumSignerPublicKey = exports.getSerumOpenOrdersPublicKey = exports.getDriftSignerPublicKey = exports.getInsuranceFundStakeAccountPublicKey = exports.getInsuranceFundVaultPublicKey = exports.getSpotMarketVaultPublicKey = exports.getSpotMarketPublicKey = exports.getPerpMarketPublicKey = exports.getUserStatsAccountPublicKey = exports.getUserAccountPublicKeySync = exports.getUserAccountPublicKey = exports.getUserAccountPublicKeyAndNonce = exports.getDriftStateAccountPublicKey = exports.getDriftStateAccountPublicKeyAndNonce = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst anchor = __importStar(__webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\"));\nasync function getDriftStateAccountPublicKeyAndNonce(programId) {\n    return web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"drift_state\"))\n    ], programId);\n}\nexports.getDriftStateAccountPublicKeyAndNonce = getDriftStateAccountPublicKeyAndNonce;\nasync function getDriftStateAccountPublicKey(programId) {\n    return (await getDriftStateAccountPublicKeyAndNonce(programId))[0];\n}\nexports.getDriftStateAccountPublicKey = getDriftStateAccountPublicKey;\nasync function getUserAccountPublicKeyAndNonce(programId, authority, subAccountId = 0) {\n    return web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"user\")),\n        authority.toBuffer(),\n        new anchor.BN(subAccountId).toArrayLike(Buffer, \"le\", 2)\n    ], programId);\n}\nexports.getUserAccountPublicKeyAndNonce = getUserAccountPublicKeyAndNonce;\nasync function getUserAccountPublicKey(programId, authority, subAccountId = 0) {\n    return (await getUserAccountPublicKeyAndNonce(programId, authority, subAccountId))[0];\n}\nexports.getUserAccountPublicKey = getUserAccountPublicKey;\nfunction getUserAccountPublicKeySync(programId, authority, subAccountId = 0) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"user\")),\n        authority.toBuffer(),\n        new anchor.BN(subAccountId).toArrayLike(Buffer, \"le\", 2)\n    ], programId)[0];\n}\nexports.getUserAccountPublicKeySync = getUserAccountPublicKeySync;\nfunction getUserStatsAccountPublicKey(programId, authority) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"user_stats\")),\n        authority.toBuffer()\n    ], programId)[0];\n}\nexports.getUserStatsAccountPublicKey = getUserStatsAccountPublicKey;\nasync function getPerpMarketPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"perp_market\")),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, \"le\", 2)\n    ], programId))[0];\n}\nexports.getPerpMarketPublicKey = getPerpMarketPublicKey;\nasync function getSpotMarketPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"spot_market\")),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, \"le\", 2)\n    ], programId))[0];\n}\nexports.getSpotMarketPublicKey = getSpotMarketPublicKey;\nasync function getSpotMarketVaultPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"spot_market_vault\")),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, \"le\", 2)\n    ], programId))[0];\n}\nexports.getSpotMarketVaultPublicKey = getSpotMarketVaultPublicKey;\nasync function getInsuranceFundVaultPublicKey(programId, marketIndex) {\n    return (await web3_js_1.PublicKey.findProgramAddress([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"insurance_fund_vault\")),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, \"le\", 2)\n    ], programId))[0];\n}\nexports.getInsuranceFundVaultPublicKey = getInsuranceFundVaultPublicKey;\nfunction getInsuranceFundStakeAccountPublicKey(programId, authority, marketIndex) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"insurance_fund_stake\")),\n        authority.toBuffer(),\n        new anchor.BN(marketIndex).toArrayLike(Buffer, \"le\", 2)\n    ], programId)[0];\n}\nexports.getInsuranceFundStakeAccountPublicKey = getInsuranceFundStakeAccountPublicKey;\nfunction getDriftSignerPublicKey(programId) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"drift_signer\"))\n    ], programId)[0];\n}\nexports.getDriftSignerPublicKey = getDriftSignerPublicKey;\nfunction getSerumOpenOrdersPublicKey(programId, market) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"serum_open_orders\")),\n        market.toBuffer()\n    ], programId)[0];\n}\nexports.getSerumOpenOrdersPublicKey = getSerumOpenOrdersPublicKey;\nfunction getSerumSignerPublicKey(programId, market, nonce) {\n    return anchor.web3.PublicKey.createProgramAddressSync([\n        market.toBuffer(),\n        nonce.toArrayLike(Buffer, \"le\", 8)\n    ], programId);\n}\nexports.getSerumSignerPublicKey = getSerumSignerPublicKey;\nfunction getSerumFulfillmentConfigPublicKey(programId, market) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"serum_fulfillment_config\")),\n        market.toBuffer()\n    ], programId)[0];\n}\nexports.getSerumFulfillmentConfigPublicKey = getSerumFulfillmentConfigPublicKey;\nfunction getPhoenixFulfillmentConfigPublicKey(programId, market) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"phoenix_fulfillment_config\")),\n        market.toBuffer()\n    ], programId)[0];\n}\nexports.getPhoenixFulfillmentConfigPublicKey = getPhoenixFulfillmentConfigPublicKey;\nfunction getReferrerNamePublicKeySync(programId, nameBuffer) {\n    return web3_js_1.PublicKey.findProgramAddressSync([\n        Buffer.from(anchor.utils.bytes.utf8.encode(\"referrer_name\")),\n        Buffer.from(nameBuffer)\n    ], programId)[0];\n}\nexports.getReferrerNamePublicKeySync = getReferrerNamePublicKeySync;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hZGRyZXNzZXMvcGRhLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsSUFBSUEsa0JBQWtCLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsZUFBZSxJQUFNQyxDQUFBQSxPQUFPQyxNQUFNLEdBQUksU0FBU0MsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRTtJQUMxRixJQUFJQSxPQUFPQyxXQUFXRCxLQUFLRDtJQUMzQixJQUFJRyxPQUFPUCxPQUFPUSx3QkFBd0IsQ0FBQ0wsR0FBR0M7SUFDOUMsSUFBSSxDQUFDRyxRQUFTLFVBQVNBLE9BQU8sQ0FBQ0osRUFBRU0sVUFBVSxHQUFHRixLQUFLRyxRQUFRLElBQUlILEtBQUtJLFlBQVksR0FBRztRQUNqRkosT0FBTztZQUFFSyxZQUFZO1lBQU1DLEtBQUs7Z0JBQWEsT0FBT1YsQ0FBQyxDQUFDQyxFQUFFO1lBQUU7UUFBRTtJQUM5RDtJQUNBSixPQUFPYyxjQUFjLENBQUNaLEdBQUdHLElBQUlFO0FBQ2pDLElBQU0sU0FBU0wsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsRUFBRTtJQUN0QixJQUFJQSxPQUFPQyxXQUFXRCxLQUFLRDtJQUMzQkYsQ0FBQyxDQUFDRyxHQUFHLEdBQUdGLENBQUMsQ0FBQ0MsRUFBRTtBQUNoQixDQUFDO0FBQ0QsSUFBSVcscUJBQXFCLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsa0JBQWtCLElBQU1mLENBQUFBLE9BQU9DLE1BQU0sR0FBSSxTQUFTQyxDQUFDLEVBQUVjLENBQUM7SUFDekZoQixPQUFPYyxjQUFjLENBQUNaLEdBQUcsV0FBVztRQUFFVSxZQUFZO1FBQU1LLE9BQU9EO0lBQUU7QUFDckUsSUFBSyxTQUFTZCxDQUFDLEVBQUVjLENBQUM7SUFDZGQsQ0FBQyxDQUFDLFVBQVUsR0FBR2M7QUFDbkI7QUFDQSxJQUFJRSxlQUFlLENBQUMsTUFBRyxLQUFLLE9BQUcs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b0NBQW9DLEdBQUdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2FkZHJlc3Nlcy9wZGEuanM/ZGM2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRSZWZlcnJlck5hbWVQdWJsaWNLZXlTeW5jID0gZXhwb3J0cy5nZXRQaG9lbml4RnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkgPSBleHBvcnRzLmdldFNlcnVtRnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkgPSBleHBvcnRzLmdldFNlcnVtU2lnbmVyUHVibGljS2V5ID0gZXhwb3J0cy5nZXRTZXJ1bU9wZW5PcmRlcnNQdWJsaWNLZXkgPSBleHBvcnRzLmdldERyaWZ0U2lnbmVyUHVibGljS2V5ID0gZXhwb3J0cy5nZXRJbnN1cmFuY2VGdW5kU3Rha2VBY2NvdW50UHVibGljS2V5ID0gZXhwb3J0cy5nZXRJbnN1cmFuY2VGdW5kVmF1bHRQdWJsaWNLZXkgPSBleHBvcnRzLmdldFNwb3RNYXJrZXRWYXVsdFB1YmxpY0tleSA9IGV4cG9ydHMuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSA9IGV4cG9ydHMuZ2V0UGVycE1hcmtldFB1YmxpY0tleSA9IGV4cG9ydHMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSA9IGV4cG9ydHMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXlTeW5jID0gZXhwb3J0cy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSA9IGV4cG9ydHMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXlBbmROb25jZSA9IGV4cG9ydHMuZ2V0RHJpZnRTdGF0ZUFjY291bnRQdWJsaWNLZXkgPSBleHBvcnRzLmdldERyaWZ0U3RhdGVBY2NvdW50UHVibGljS2V5QW5kTm9uY2UgPSB2b2lkIDA7XG5jb25zdCB3ZWIzX2pzXzEgPSByZXF1aXJlKFwiQHNvbGFuYS93ZWIzLmpzXCIpO1xuY29uc3QgYW5jaG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKSk7XG5hc3luYyBmdW5jdGlvbiBnZXREcmlmdFN0YXRlQWNjb3VudFB1YmxpY0tleUFuZE5vbmNlKHByb2dyYW1JZCkge1xuICAgIHJldHVybiB3ZWIzX2pzXzEuUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzcyhbQnVmZmVyLmZyb20oYW5jaG9yLnV0aWxzLmJ5dGVzLnV0ZjguZW5jb2RlKCdkcmlmdF9zdGF0ZScpKV0sIHByb2dyYW1JZCk7XG59XG5leHBvcnRzLmdldERyaWZ0U3RhdGVBY2NvdW50UHVibGljS2V5QW5kTm9uY2UgPSBnZXREcmlmdFN0YXRlQWNjb3VudFB1YmxpY0tleUFuZE5vbmNlO1xuYXN5bmMgZnVuY3Rpb24gZ2V0RHJpZnRTdGF0ZUFjY291bnRQdWJsaWNLZXkocHJvZ3JhbUlkKSB7XG4gICAgcmV0dXJuIChhd2FpdCBnZXREcmlmdFN0YXRlQWNjb3VudFB1YmxpY0tleUFuZE5vbmNlKHByb2dyYW1JZCkpWzBdO1xufVxuZXhwb3J0cy5nZXREcmlmdFN0YXRlQWNjb3VudFB1YmxpY0tleSA9IGdldERyaWZ0U3RhdGVBY2NvdW50UHVibGljS2V5O1xuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckFjY291bnRQdWJsaWNLZXlBbmROb25jZShwcm9ncmFtSWQsIGF1dGhvcml0eSwgc3ViQWNjb3VudElkID0gMCkge1xuICAgIHJldHVybiB3ZWIzX2pzXzEuUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzcyhbXG4gICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgndXNlcicpKSxcbiAgICAgICAgYXV0aG9yaXR5LnRvQnVmZmVyKCksXG4gICAgICAgIG5ldyBhbmNob3IuQk4oc3ViQWNjb3VudElkKS50b0FycmF5TGlrZShCdWZmZXIsICdsZScsIDIpLFxuICAgIF0sIHByb2dyYW1JZCk7XG59XG5leHBvcnRzLmdldFVzZXJBY2NvdW50UHVibGljS2V5QW5kTm9uY2UgPSBnZXRVc2VyQWNjb3VudFB1YmxpY0tleUFuZE5vbmNlO1xuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckFjY291bnRQdWJsaWNLZXkocHJvZ3JhbUlkLCBhdXRob3JpdHksIHN1YkFjY291bnRJZCA9IDApIHtcbiAgICByZXR1cm4gKGF3YWl0IGdldFVzZXJBY2NvdW50UHVibGljS2V5QW5kTm9uY2UocHJvZ3JhbUlkLCBhdXRob3JpdHksIHN1YkFjY291bnRJZCkpWzBdO1xufVxuZXhwb3J0cy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSA9IGdldFVzZXJBY2NvdW50UHVibGljS2V5O1xuZnVuY3Rpb24gZ2V0VXNlckFjY291bnRQdWJsaWNLZXlTeW5jKHByb2dyYW1JZCwgYXV0aG9yaXR5LCBzdWJBY2NvdW50SWQgPSAwKSB7XG4gICAgcmV0dXJuIHdlYjNfanNfMS5QdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhbXG4gICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgndXNlcicpKSxcbiAgICAgICAgYXV0aG9yaXR5LnRvQnVmZmVyKCksXG4gICAgICAgIG5ldyBhbmNob3IuQk4oc3ViQWNjb3VudElkKS50b0FycmF5TGlrZShCdWZmZXIsICdsZScsIDIpLFxuICAgIF0sIHByb2dyYW1JZClbMF07XG59XG5leHBvcnRzLmdldFVzZXJBY2NvdW50UHVibGljS2V5U3luYyA9IGdldFVzZXJBY2NvdW50UHVibGljS2V5U3luYztcbmZ1bmN0aW9uIGdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkocHJvZ3JhbUlkLCBhdXRob3JpdHkpIHtcbiAgICByZXR1cm4gd2ViM19qc18xLlB1YmxpY0tleS5maW5kUHJvZ3JhbUFkZHJlc3NTeW5jKFtcbiAgICAgICAgQnVmZmVyLmZyb20oYW5jaG9yLnV0aWxzLmJ5dGVzLnV0ZjguZW5jb2RlKCd1c2VyX3N0YXRzJykpLFxuICAgICAgICBhdXRob3JpdHkudG9CdWZmZXIoKSxcbiAgICBdLCBwcm9ncmFtSWQpWzBdO1xufVxuZXhwb3J0cy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5ID0gZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleTtcbmFzeW5jIGZ1bmN0aW9uIGdldFBlcnBNYXJrZXRQdWJsaWNLZXkocHJvZ3JhbUlkLCBtYXJrZXRJbmRleCkge1xuICAgIHJldHVybiAoYXdhaXQgd2ViM19qc18xLlB1YmxpY0tleS5maW5kUHJvZ3JhbUFkZHJlc3MoW1xuICAgICAgICBCdWZmZXIuZnJvbShhbmNob3IudXRpbHMuYnl0ZXMudXRmOC5lbmNvZGUoJ3BlcnBfbWFya2V0JykpLFxuICAgICAgICBuZXcgYW5jaG9yLkJOKG1hcmtldEluZGV4KS50b0FycmF5TGlrZShCdWZmZXIsICdsZScsIDIpLFxuICAgIF0sIHByb2dyYW1JZCkpWzBdO1xufVxuZXhwb3J0cy5nZXRQZXJwTWFya2V0UHVibGljS2V5ID0gZ2V0UGVycE1hcmtldFB1YmxpY0tleTtcbmFzeW5jIGZ1bmN0aW9uIGdldFNwb3RNYXJrZXRQdWJsaWNLZXkocHJvZ3JhbUlkLCBtYXJrZXRJbmRleCkge1xuICAgIHJldHVybiAoYXdhaXQgd2ViM19qc18xLlB1YmxpY0tleS5maW5kUHJvZ3JhbUFkZHJlc3MoW1xuICAgICAgICBCdWZmZXIuZnJvbShhbmNob3IudXRpbHMuYnl0ZXMudXRmOC5lbmNvZGUoJ3Nwb3RfbWFya2V0JykpLFxuICAgICAgICBuZXcgYW5jaG9yLkJOKG1hcmtldEluZGV4KS50b0FycmF5TGlrZShCdWZmZXIsICdsZScsIDIpLFxuICAgIF0sIHByb2dyYW1JZCkpWzBdO1xufVxuZXhwb3J0cy5nZXRTcG90TWFya2V0UHVibGljS2V5ID0gZ2V0U3BvdE1hcmtldFB1YmxpY0tleTtcbmFzeW5jIGZ1bmN0aW9uIGdldFNwb3RNYXJrZXRWYXVsdFB1YmxpY0tleShwcm9ncmFtSWQsIG1hcmtldEluZGV4KSB7XG4gICAgcmV0dXJuIChhd2FpdCB3ZWIzX2pzXzEuUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzcyhbXG4gICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgnc3BvdF9tYXJrZXRfdmF1bHQnKSksXG4gICAgICAgIG5ldyBhbmNob3IuQk4obWFya2V0SW5kZXgpLnRvQXJyYXlMaWtlKEJ1ZmZlciwgJ2xlJywgMiksXG4gICAgXSwgcHJvZ3JhbUlkKSlbMF07XG59XG5leHBvcnRzLmdldFNwb3RNYXJrZXRWYXVsdFB1YmxpY0tleSA9IGdldFNwb3RNYXJrZXRWYXVsdFB1YmxpY0tleTtcbmFzeW5jIGZ1bmN0aW9uIGdldEluc3VyYW5jZUZ1bmRWYXVsdFB1YmxpY0tleShwcm9ncmFtSWQsIG1hcmtldEluZGV4KSB7XG4gICAgcmV0dXJuIChhd2FpdCB3ZWIzX2pzXzEuUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzcyhbXG4gICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgnaW5zdXJhbmNlX2Z1bmRfdmF1bHQnKSksXG4gICAgICAgIG5ldyBhbmNob3IuQk4obWFya2V0SW5kZXgpLnRvQXJyYXlMaWtlKEJ1ZmZlciwgJ2xlJywgMiksXG4gICAgXSwgcHJvZ3JhbUlkKSlbMF07XG59XG5leHBvcnRzLmdldEluc3VyYW5jZUZ1bmRWYXVsdFB1YmxpY0tleSA9IGdldEluc3VyYW5jZUZ1bmRWYXVsdFB1YmxpY0tleTtcbmZ1bmN0aW9uIGdldEluc3VyYW5jZUZ1bmRTdGFrZUFjY291bnRQdWJsaWNLZXkocHJvZ3JhbUlkLCBhdXRob3JpdHksIG1hcmtldEluZGV4KSB7XG4gICAgcmV0dXJuIHdlYjNfanNfMS5QdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhbXG4gICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgnaW5zdXJhbmNlX2Z1bmRfc3Rha2UnKSksXG4gICAgICAgIGF1dGhvcml0eS50b0J1ZmZlcigpLFxuICAgICAgICBuZXcgYW5jaG9yLkJOKG1hcmtldEluZGV4KS50b0FycmF5TGlrZShCdWZmZXIsICdsZScsIDIpLFxuICAgIF0sIHByb2dyYW1JZClbMF07XG59XG5leHBvcnRzLmdldEluc3VyYW5jZUZ1bmRTdGFrZUFjY291bnRQdWJsaWNLZXkgPSBnZXRJbnN1cmFuY2VGdW5kU3Rha2VBY2NvdW50UHVibGljS2V5O1xuZnVuY3Rpb24gZ2V0RHJpZnRTaWduZXJQdWJsaWNLZXkocHJvZ3JhbUlkKSB7XG4gICAgcmV0dXJuIHdlYjNfanNfMS5QdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhbQnVmZmVyLmZyb20oYW5jaG9yLnV0aWxzLmJ5dGVzLnV0ZjguZW5jb2RlKCdkcmlmdF9zaWduZXInKSldLCBwcm9ncmFtSWQpWzBdO1xufVxuZXhwb3J0cy5nZXREcmlmdFNpZ25lclB1YmxpY0tleSA9IGdldERyaWZ0U2lnbmVyUHVibGljS2V5O1xuZnVuY3Rpb24gZ2V0U2VydW1PcGVuT3JkZXJzUHVibGljS2V5KHByb2dyYW1JZCwgbWFya2V0KSB7XG4gICAgcmV0dXJuIHdlYjNfanNfMS5QdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhbXG4gICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgnc2VydW1fb3Blbl9vcmRlcnMnKSksXG4gICAgICAgIG1hcmtldC50b0J1ZmZlcigpLFxuICAgIF0sIHByb2dyYW1JZClbMF07XG59XG5leHBvcnRzLmdldFNlcnVtT3Blbk9yZGVyc1B1YmxpY0tleSA9IGdldFNlcnVtT3Blbk9yZGVyc1B1YmxpY0tleTtcbmZ1bmN0aW9uIGdldFNlcnVtU2lnbmVyUHVibGljS2V5KHByb2dyYW1JZCwgbWFya2V0LCBub25jZSkge1xuICAgIHJldHVybiBhbmNob3Iud2ViMy5QdWJsaWNLZXkuY3JlYXRlUHJvZ3JhbUFkZHJlc3NTeW5jKFttYXJrZXQudG9CdWZmZXIoKSwgbm9uY2UudG9BcnJheUxpa2UoQnVmZmVyLCAnbGUnLCA4KV0sIHByb2dyYW1JZCk7XG59XG5leHBvcnRzLmdldFNlcnVtU2lnbmVyUHVibGljS2V5ID0gZ2V0U2VydW1TaWduZXJQdWJsaWNLZXk7XG5mdW5jdGlvbiBnZXRTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnUHVibGljS2V5KHByb2dyYW1JZCwgbWFya2V0KSB7XG4gICAgcmV0dXJuIHdlYjNfanNfMS5QdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzU3luYyhbXG4gICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgnc2VydW1fZnVsZmlsbG1lbnRfY29uZmlnJykpLFxuICAgICAgICBtYXJrZXQudG9CdWZmZXIoKSxcbiAgICBdLCBwcm9ncmFtSWQpWzBdO1xufVxuZXhwb3J0cy5nZXRTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnUHVibGljS2V5ID0gZ2V0U2VydW1GdWxmaWxsbWVudENvbmZpZ1B1YmxpY0tleTtcbmZ1bmN0aW9uIGdldFBob2VuaXhGdWxmaWxsbWVudENvbmZpZ1B1YmxpY0tleShwcm9ncmFtSWQsIG1hcmtldCkge1xuICAgIHJldHVybiB3ZWIzX2pzXzEuUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzc1N5bmMoW1xuICAgICAgICBCdWZmZXIuZnJvbShhbmNob3IudXRpbHMuYnl0ZXMudXRmOC5lbmNvZGUoJ3Bob2VuaXhfZnVsZmlsbG1lbnRfY29uZmlnJykpLFxuICAgICAgICBtYXJrZXQudG9CdWZmZXIoKSxcbiAgICBdLCBwcm9ncmFtSWQpWzBdO1xufVxuZXhwb3J0cy5nZXRQaG9lbml4RnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkgPSBnZXRQaG9lbml4RnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXk7XG5mdW5jdGlvbiBnZXRSZWZlcnJlck5hbWVQdWJsaWNLZXlTeW5jKHByb2dyYW1JZCwgbmFtZUJ1ZmZlcikge1xuICAgIHJldHVybiB3ZWIzX2pzXzEuUHVibGljS2V5LmZpbmRQcm9ncmFtQWRkcmVzc1N5bmMoW1xuICAgICAgICBCdWZmZXIuZnJvbShhbmNob3IudXRpbHMuYnl0ZXMudXRmOC5lbmNvZGUoJ3JlZmVycmVyX25hbWUnKSksXG4gICAgICAgIEJ1ZmZlci5mcm9tKG5hbWVCdWZmZXIpLFxuICAgIF0sIHByb2dyYW1JZClbMF07XG59XG5leHBvcnRzLmdldFJlZmVycmVyTmFtZVB1YmxpY0tleVN5bmMgPSBnZXRSZWZlcnJlck5hbWVQdWJsaWNLZXlTeW5jO1xuIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9fZXNNb2R1bGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fc2V0TW9kdWxlRGVmYXVsdCIsInYiLCJ2YWx1ZSIsIl9faW1wb3J0U3RhciIsIm1vZCIsInJlc3VsdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImV4cG9ydHMiLCJnZXRSZWZlcnJlck5hbWVQdWJsaWNLZXlTeW5jIiwiZ2V0UGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnUHVibGljS2V5IiwiZ2V0U2VydW1GdWxmaWxsbWVudENvbmZpZ1B1YmxpY0tleSIsImdldFNlcnVtU2lnbmVyUHVibGljS2V5IiwiZ2V0U2VydW1PcGVuT3JkZXJzUHVibGljS2V5IiwiZ2V0RHJpZnRTaWduZXJQdWJsaWNLZXkiLCJnZXRJbnN1cmFuY2VGdW5kU3Rha2VBY2NvdW50UHVibGljS2V5IiwiZ2V0SW5zdXJhbmNlRnVuZFZhdWx0UHVibGljS2V5IiwiZ2V0U3BvdE1hcmtldFZhdWx0UHVibGljS2V5IiwiZ2V0U3BvdE1hcmtldFB1YmxpY0tleSIsImdldFBlcnBNYXJrZXRQdWJsaWNLZXkiLCJnZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5IiwiZ2V0VXNlckFjY291bnRQdWJsaWNLZXlTeW5jIiwiZ2V0VXNlckFjY291bnRQdWJsaWNLZXkiLCJnZXRVc2VyQWNjb3VudFB1YmxpY0tleUFuZE5vbmNlIiwiZ2V0RHJpZnRTdGF0ZUFjY291bnRQdWJsaWNLZXkiLCJnZXREcmlmdFN0YXRlQWNjb3VudFB1YmxpY0tleUFuZE5vbmNlIiwid2ViM19qc18xIiwicmVxdWlyZSIsImFuY2hvciIsInByb2dyYW1JZCIsIlB1YmxpY0tleSIsImZpbmRQcm9ncmFtQWRkcmVzcyIsIkJ1ZmZlciIsImZyb20iLCJ1dGlscyIsImJ5dGVzIiwidXRmOCIsImVuY29kZSIsImF1dGhvcml0eSIsInN1YkFjY291bnRJZCIsInRvQnVmZmVyIiwiQk4iLCJ0b0FycmF5TGlrZSIsImZpbmRQcm9ncmFtQWRkcmVzc1N5bmMiLCJtYXJrZXRJbmRleCIsIm1hcmtldCIsIm5vbmNlIiwid2ViMyIsImNyZWF0ZVByb2dyYW1BZGRyZXNzU3luYyIsIm5hbWVCdWZmZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/adminClient.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/adminClient.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __setModuleDefault = (void 0) && (void 0).__setModuleDefault || (Object.create ? function(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (void 0) && (void 0).__importStar || function(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k in mod)if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    }\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AdminClient = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst userName_1 = __webpack_require__(/*! ./userName */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userName.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst anchor = __importStar(__webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\"));\nconst pda_1 = __webpack_require__(/*! ./addresses/pda */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\");\nconst utils_1 = __webpack_require__(/*! ./math/utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/utils.js\");\nconst spl_token_1 = __webpack_require__(/*! @solana/spl-token */ \"(ssr)/./node_modules/@solana/spl-token/lib/cjs/index.js\");\nconst driftClient_1 = __webpack_require__(/*! ./driftClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/driftClient.js\");\nconst numericConstants_1 = __webpack_require__(/*! ./constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst trade_1 = __webpack_require__(/*! ./math/trade */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/trade.js\");\nconst amm_1 = __webpack_require__(/*! ./math/amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\");\nconst phoenix_sdk_1 = __webpack_require__(/*! @ellipsis-labs/phoenix-sdk */ \"(ssr)/./node_modules/@ellipsis-labs/phoenix-sdk/dist/index.js\");\nclass AdminClient extends driftClient_1.DriftClient {\n    async initialize(usdcMint, _adminControlsPrices) {\n        const stateAccountRPCResponse = await this.connection.getParsedAccountInfo(await this.getStatePublicKey());\n        if (stateAccountRPCResponse.value !== null) {\n            throw new Error(\"Clearing house already initialized\");\n        }\n        const [driftStatePublicKey] = await (0, pda_1.getDriftStateAccountPublicKeyAndNonce)(this.program.programId);\n        const initializeTx = await this.program.transaction.initialize({\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: driftStatePublicKey,\n                quoteAssetMint: usdcMint,\n                rent: web3_js_1.SYSVAR_RENT_PUBKEY,\n                driftSigner: this.getSignerPublicKey(),\n                systemProgram: anchor.web3.SystemProgram.programId,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            }\n        });\n        const { txSig: initializeTxSig } = await super.sendTransaction(initializeTx, [], this.opts);\n        return [\n            initializeTxSig\n        ];\n    }\n    async initializeSpotMarket(mint, optimalUtilization, optimalRate, maxRate, oracle, oracleSource, initialAssetWeight, maintenanceAssetWeight, initialLiabilityWeight, maintenanceLiabilityWeight, imfFactor = 0, liquidatorFee = 0, activeStatus = true, name = userName_1.DEFAULT_MARKET_NAME) {\n        const spotMarketIndex = this.getStateAccount().numberOfSpotMarkets;\n        const spotMarket = await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex);\n        const spotMarketVault = await (0, pda_1.getSpotMarketVaultPublicKey)(this.program.programId, spotMarketIndex);\n        const insuranceFundVault = await (0, pda_1.getInsuranceFundVaultPublicKey)(this.program.programId, spotMarketIndex);\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const initializeTx = await this.program.transaction.initializeSpotMarket(optimalUtilization, optimalRate, maxRate, oracleSource, initialAssetWeight, maintenanceAssetWeight, initialLiabilityWeight, maintenanceLiabilityWeight, imfFactor, liquidatorFee, activeStatus, nameBuffer, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket,\n                spotMarketVault,\n                insuranceFundVault,\n                driftSigner: this.getSignerPublicKey(),\n                spotMarketMint: mint,\n                oracle,\n                rent: web3_js_1.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            }\n        });\n        const { txSig } = await this.sendTransaction(initializeTx, [], this.opts);\n        await this.accountSubscriber.addSpotMarket(spotMarketIndex);\n        await this.accountSubscriber.addOracle({\n            source: oracleSource,\n            publicKey: oracle\n        });\n        return txSig;\n    }\n    async initializeSerumFulfillmentConfig(marketIndex, serumMarket, serumProgram) {\n        const serumOpenOrders = (0, pda_1.getSerumOpenOrdersPublicKey)(this.program.programId, serumMarket);\n        const serumFulfillmentConfig = (0, pda_1.getSerumFulfillmentConfigPublicKey)(this.program.programId, serumMarket);\n        const tx = await this.program.transaction.initializeSerumFulfillmentConfig(marketIndex, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                baseSpotMarket: this.getSpotMarketAccount(marketIndex).pubkey,\n                quoteSpotMarket: this.getQuoteSpotMarketAccount().pubkey,\n                driftSigner: this.getSignerPublicKey(),\n                serumProgram,\n                serumMarket,\n                serumOpenOrders,\n                rent: web3_js_1.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                serumFulfillmentConfig\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async initializePhoenixFulfillmentConfig(marketIndex, phoenixMarket) {\n        const phoenixFulfillmentConfig = (0, pda_1.getPhoenixFulfillmentConfigPublicKey)(this.program.programId, phoenixMarket);\n        const tx = await this.program.transaction.initializePhoenixFulfillmentConfig(marketIndex, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                baseSpotMarket: this.getSpotMarketAccount(marketIndex).pubkey,\n                quoteSpotMarket: this.getQuoteSpotMarketAccount().pubkey,\n                driftSigner: this.getSignerPublicKey(),\n                phoenixMarket: phoenixMarket,\n                phoenixProgram: phoenix_sdk_1.PROGRAM_ID,\n                rent: web3_js_1.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                phoenixFulfillmentConfig\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async initializePerpMarket(marketIndex, priceOracle, baseAssetReserve, quoteAssetReserve, periodicity, pegMultiplier = numericConstants_1.PEG_PRECISION, oracleSource = types_1.OracleSource.PYTH, marginRatioInitial = 2000, marginRatioMaintenance = 500, liquidatorFee = 0, activeStatus = true, name = userName_1.DEFAULT_MARKET_NAME) {\n        const currentPerpMarketIndex = this.getStateAccount().numberOfMarkets;\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, currentPerpMarketIndex);\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const initializeMarketTx = await this.program.transaction.initializePerpMarket(marketIndex, baseAssetReserve, quoteAssetReserve, periodicity, pegMultiplier, oracleSource, marginRatioInitial, marginRatioMaintenance, liquidatorFee, activeStatus, nameBuffer, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                oracle: priceOracle,\n                perpMarket: perpMarketPublicKey,\n                rent: web3_js_1.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId\n            }\n        });\n        const { txSig } = await this.sendTransaction(initializeMarketTx, [], this.opts);\n        while(this.getStateAccount().numberOfMarkets <= currentPerpMarketIndex){\n            await this.fetchAccounts();\n        }\n        await this.accountSubscriber.addPerpMarket(currentPerpMarketIndex);\n        await this.accountSubscriber.addOracle({\n            source: oracleSource,\n            publicKey: priceOracle\n        });\n        return txSig;\n    }\n    async deleteInitializedPerpMarket(marketIndex) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, marketIndex);\n        const deleteInitializeMarketTx = await this.program.transaction.deleteInitializedPerpMarket(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                perpMarket: perpMarketPublicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(deleteInitializeMarketTx, [], this.opts);\n        return txSig;\n    }\n    async moveAmmPrice(perpMarketIndex, baseAssetReserve, quoteAssetReserve, sqrtK) {\n        const marketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        if (sqrtK == undefined) {\n            sqrtK = (0, utils_1.squareRootBN)(baseAssetReserve.mul(quoteAssetReserve));\n        }\n        const tx = await this.program.transaction.moveAmmPrice(baseAssetReserve, quoteAssetReserve, sqrtK, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                perpMarket: marketPublicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateK(perpMarketIndex, sqrtK) {\n        const tx = await this.program.transaction.updateK(sqrtK, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex),\n                oracle: this.getPerpMarketAccount(perpMarketIndex).amm.oracle\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketConcentrationScale(perpMarketIndex, concentrationScale) {\n        return await this.program.rpc.updatePerpMarketConcentrationCoef(concentrationScale, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async moveAmmToPrice(perpMarketIndex, targetPrice) {\n        const perpMarket = this.getPerpMarketAccount(perpMarketIndex);\n        const [direction, tradeSize, _] = (0, trade_1.calculateTargetPriceTrade)(perpMarket, targetPrice, new anchor_1.BN(1000), \"quote\", undefined //todo\n        );\n        const [newQuoteAssetAmount, newBaseAssetAmount] = (0, amm_1.calculateAmmReservesAfterSwap)(perpMarket.amm, \"quote\", tradeSize, (0, amm_1.getSwapDirection)(\"quote\", direction));\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        const tx = await this.program.transaction.moveAmmPrice(newBaseAssetAmount, newQuoteAssetAmount, perpMarket.amm.sqrtK, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                perpMarket: perpMarketPublicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async repegAmmCurve(newPeg, perpMarketIndex) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        const ammData = this.getPerpMarketAccount(perpMarketIndex).amm;\n        const tx = await this.program.transaction.repegAmmCurve(newPeg, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                oracle: ammData.oracle,\n                perpMarket: perpMarketPublicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketAmmOracleTwap(perpMarketIndex) {\n        const ammData = this.getPerpMarketAccount(perpMarketIndex).amm;\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        return await this.program.rpc.updatePerpMarketAmmOracleTwap({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                oracle: ammData.oracle,\n                perpMarket: perpMarketPublicKey\n            }\n        });\n    }\n    async resetPerpMarketAmmOracleTwap(perpMarketIndex) {\n        const ammData = this.getPerpMarketAccount(perpMarketIndex).amm;\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        return await this.program.rpc.resetPerpMarketAmmOracleTwap({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                oracle: ammData.oracle,\n                perpMarket: perpMarketPublicKey\n            }\n        });\n    }\n    async depositIntoPerpMarketFeePool(perpMarketIndex, amount, sourceVault) {\n        const spotMarket = this.getQuoteSpotMarketAccount();\n        const tx = await this.program.transaction.depositIntoPerpMarketFeePool(amount, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex),\n                sourceVault,\n                driftSigner: this.getSignerPublicKey(),\n                quoteSpotMarket: spotMarket.pubkey,\n                spotMarketVault: spotMarket.vault,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateAdmin(admin) {\n        const tx = await this.program.transaction.updateAdmin(admin, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketCurveUpdateIntensity(perpMarketIndex, curveUpdateIntensity) {\n        // assert(curveUpdateIntensity >= 0 && curveUpdateIntensity <= 100);\n        // assert(Number.isInteger(curveUpdateIntensity));\n        return await this.program.rpc.updatePerpMarketCurveUpdateIntensity(curveUpdateIntensity, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updatePerpMarketTargetBaseAssetAmountPerLp(perpMarketIndex, targetBaseAssetAmountPerLP) {\n        return await this.program.rpc.updatePerpMarketTargetBaseAssetAmountPerLp(targetBaseAssetAmountPerLP, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updatePerpMarketMarginRatio(perpMarketIndex, marginRatioInitial, marginRatioMaintenance) {\n        const tx = await this.program.transaction.updatePerpMarketMarginRatio(marginRatioInitial, marginRatioMaintenance, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketImfFactor(perpMarketIndex, imfFactor, unrealizedPnlImfFactor) {\n        return await this.program.rpc.updatePerpMarketImfFactor(imfFactor, unrealizedPnlImfFactor, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updatePerpMarketBaseSpread(perpMarketIndex, baseSpread) {\n        const tx = await this.program.transaction.updatePerpMarketBaseSpread(baseSpread, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateAmmJitIntensity(perpMarketIndex, ammJitIntensity) {\n        const tx = await this.program.transaction.updateAmmJitIntensity(ammJitIntensity, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketName(perpMarketIndex, name) {\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const tx = await this.program.transaction.updatePerpMarketName(nameBuffer, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateSpotMarketName(spotMarketIndex, name) {\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        return await this.program.rpc.updateSpotMarketName(nameBuffer, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n    async updatePerpMarketPerLpBase(perpMarketIndex, perLpBase) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        return await this.program.rpc.updatePerpMarketPerLpBase(perLpBase, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: perpMarketPublicKey\n            }\n        });\n    }\n    async updatePerpMarketMaxSpread(perpMarketIndex, maxSpread) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        return await this.program.rpc.updatePerpMarketMaxSpread(maxSpread, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: perpMarketPublicKey\n            }\n        });\n    }\n    async updatePerpFeeStructure(feeStructure) {\n        const tx = this.program.transaction.updatePerpFeeStructure(feeStructure, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateSpotFeeStructure(feeStructure) {\n        const tx = await this.program.transaction.updateSpotFeeStructure(feeStructure, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateInitialPctToLiquidate(initialPctToLiquidate) {\n        return await this.program.rpc.updateInitialPctToLiquidate(initialPctToLiquidate, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n    }\n    async updateLiquidationDuration(liquidationDuration) {\n        return await this.program.rpc.updateLiquidationDuration(liquidationDuration, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n    }\n    async updateOracleGuardRails(oracleGuardRails) {\n        const tx = await this.program.transaction.updateOracleGuardRails(oracleGuardRails, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateStateSettlementDuration(settlementDuration) {\n        return await this.program.rpc.updateStateSettlementDuration(settlementDuration, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n    }\n    async updateWithdrawGuardThreshold(spotMarketIndex, withdrawGuardThreshold) {\n        const tx = await this.program.transaction.updateWithdrawGuardThreshold(withdrawGuardThreshold, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateSpotMarketIfFactor(spotMarketIndex, userIfFactor, totalIfFactor) {\n        const tx = await this.program.transaction.updateSpotMarketIfFactor(spotMarketIndex, userIfFactor, totalIfFactor, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateSpotMarketRevenueSettlePeriod(spotMarketIndex, revenueSettlePeriod) {\n        const tx = await this.program.transaction.updateSpotMarketRevenueSettlePeriod(revenueSettlePeriod, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateSpotMarketMaxTokenDeposits(spotMarketIndex, maxTokenDeposits) {\n        const tx = this.program.transaction.updateSpotMarketMaxTokenDeposits(maxTokenDeposits, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateInsuranceFundUnstakingPeriod(spotMarketIndex, insuranceWithdrawEscrowPeriod) {\n        const tx = await this.program.transaction.updateInsuranceFundUnstakingPeriod(insuranceWithdrawEscrowPeriod, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateLpCooldownTime(cooldownTime) {\n        const tx = await this.program.transaction.updateLpCooldownTime(cooldownTime, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketOracle(perpMarketIndex, oracle, oracleSource) {\n        const tx = await this.program.transaction.updatePerpMarketOracle(oracle, oracleSource, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex),\n                oracle: oracle\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketStepSizeAndTickSize(perpMarketIndex, stepSize, tickSize) {\n        const tx = await this.program.transaction.updatePerpMarketStepSizeAndTickSize(stepSize, tickSize, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketMinOrderSize(perpMarketIndex, orderSize) {\n        return await this.program.rpc.updatePerpMarketMinOrderSize(orderSize, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updateSpotMarketStepSizeAndTickSize(spotMarketIndex, stepSize, tickSize) {\n        return await this.program.rpc.updateSpotMarketStepSizeAndTickSize(stepSize, tickSize, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n    async updateSpotMarketMinOrderSize(spotMarketIndex, orderSize) {\n        return await this.program.rpc.updateSpotMarketMinOrderSize(orderSize, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n    async updatePerpMarketExpiry(perpMarketIndex, expiryTs) {\n        return await this.program.rpc.updatePerpMarketExpiry(expiryTs, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updateSpotMarketOracle(spotMarketIndex, oracle, oracleSource) {\n        return await this.program.rpc.updateSpotMarketOracle(oracle, oracleSource, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex),\n                oracle: oracle\n            }\n        });\n    }\n    async updateSpotMarketOrdersEnabled(spotMarketIndex, ordersEnabled) {\n        return await this.program.rpc.updateSpotMarketOrdersEnabled(ordersEnabled, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n    async updateSerumFulfillmentConfigStatus(serumFulfillmentConfig, status) {\n        return await this.program.rpc.updateSerumFulfillmentConfigStatus(status, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                serumFulfillmentConfig\n            }\n        });\n    }\n    async updateSpotMarketExpiry(spotMarketIndex, expiryTs) {\n        return await this.program.rpc.updateSpotMarketExpiry(expiryTs, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n    async updateWhitelistMint(whitelistMint) {\n        const tx = await this.program.transaction.updateWhitelistMint(whitelistMint, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateDiscountMint(discountMint) {\n        const tx = await this.program.transaction.updateDiscountMint(discountMint, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateSpotMarketMarginWeights(spotMarketIndex, initialAssetWeight, maintenanceAssetWeight, initialLiabilityWeight, maintenanceLiabilityWeight, imfFactor = 0) {\n        return await this.program.rpc.updateSpotMarketMarginWeights(initialAssetWeight, maintenanceAssetWeight, initialLiabilityWeight, maintenanceLiabilityWeight, imfFactor, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n    async updateSpotMarketBorrowRate(spotMarketIndex, optimalUtilization, optimalBorrowRate, optimalMaxRate) {\n        return await this.program.rpc.updateSpotMarketBorrowRate(optimalUtilization, optimalBorrowRate, optimalMaxRate, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n    async updateSpotMarketAssetTier(spotMarketIndex, assetTier) {\n        const tx = await this.program.transaction.updateSpotMarketAssetTier(assetTier, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx);\n        return txSig;\n    }\n    async updateSpotMarketStatus(spotMarketIndex, marketStatus) {\n        const tx = await this.program.transaction.updateSpotMarketStatus(marketStatus, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketStatus(perpMarketIndex, marketStatus) {\n        const tx = await this.program.transaction.updatePerpMarketStatus(marketStatus, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpMarketContractTier(perpMarketIndex, contractTier) {\n        const tx = await this.program.transaction.updatePerpMarketContractTier(contractTier, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateExchangeStatus(exchangeStatus) {\n        const tx = await this.program.transaction.updateExchangeStatus(exchangeStatus, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updatePerpAuctionDuration(minDuration) {\n        return await this.program.rpc.updatePerpAuctionDuration(typeof minDuration === \"number\" ? minDuration : minDuration.toNumber(), {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n    }\n    async updateSpotAuctionDuration(defaultAuctionDuration) {\n        return await this.program.rpc.updateSpotAuctionDuration(defaultAuctionDuration, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n    }\n    async updatePerpMarketMaxFillReserveFraction(perpMarketIndex, maxBaseAssetAmountRatio) {\n        return await this.program.rpc.updatePerpMarketMaxFillReserveFraction(maxBaseAssetAmountRatio, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updateMaxSlippageRatio(perpMarketIndex, maxSlippageRatio) {\n        return await this.program.rpc.updateMaxSlippageRatio(maxSlippageRatio, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: this.getPerpMarketAccount(perpMarketIndex).pubkey\n            }\n        });\n    }\n    async updatePerpMarketUnrealizedAssetWeight(perpMarketIndex, unrealizedInitialAssetWeight, unrealizedMaintenanceAssetWeight) {\n        return await this.program.rpc.updatePerpMarketUnrealizedAssetWeight(unrealizedInitialAssetWeight, unrealizedMaintenanceAssetWeight, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updatePerpMarketMaxImbalances(perpMarketIndex, unrealizedMaxImbalance, maxRevenueWithdrawPerPeriod, quoteMaxInsurance) {\n        return await this.program.rpc.updatePerpMarketMaxImbalances(unrealizedMaxImbalance, maxRevenueWithdrawPerPeriod, quoteMaxInsurance, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updatePerpMarketMaxOpenInterest(perpMarketIndex, maxOpenInterest) {\n        return await this.program.rpc.updatePerpMarketMaxOpenInterest(maxOpenInterest, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updateSerumVault(srmVault) {\n        return await this.program.rpc.updateSerumVault({\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                srmVault: srmVault\n            }\n        });\n    }\n    async updatePerpMarketLiquidationFee(perpMarketIndex, liquidatorFee, ifLiquidationFee) {\n        return await this.program.rpc.updatePerpMarketLiquidationFee(liquidatorFee, ifLiquidationFee, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                perpMarket: await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex)\n            }\n        });\n    }\n    async updateSpotMarketLiquidationFee(spotMarketIndex, liquidatorFee, ifLiquidationFee) {\n        return await this.program.rpc.updateSpotMarketLiquidationFee(liquidatorFee, ifLiquidationFee, {\n            accounts: {\n                admin: this.wallet.publicKey,\n                state: await this.getStatePublicKey(),\n                spotMarket: await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, spotMarketIndex)\n            }\n        });\n    }\n}\nexports.AdminClient = AdminClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hZG1pbkNsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBTUMsQ0FBQUEsT0FBT0MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0IsSUFBSUcsT0FBT1AsT0FBT1Esd0JBQXdCLENBQUNMLEdBQUdDO0lBQzlDLElBQUksQ0FBQ0csUUFBUyxVQUFTQSxPQUFPLENBQUNKLEVBQUVNLFVBQVUsR0FBR0YsS0FBS0csUUFBUSxJQUFJSCxLQUFLSSxZQUFZLEdBQUc7UUFDakZKLE9BQU87WUFBRUssWUFBWTtZQUFNQyxLQUFLO2dCQUFhLE9BQU9WLENBQUMsQ0FBQ0MsRUFBRTtZQUFFO1FBQUU7SUFDOUQ7SUFDQUosT0FBT2MsY0FBYyxDQUFDWixHQUFHRyxJQUFJRTtBQUNqQyxJQUFNLFNBQVNMLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDdEIsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JGLENBQUMsQ0FBQ0csR0FBRyxHQUFHRixDQUFDLENBQUNDLEVBQUU7QUFDaEIsQ0FBQztBQUNELElBQUlXLHFCQUFxQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGtCQUFrQixJQUFNZixDQUFBQSxPQUFPQyxNQUFNLEdBQUksU0FBU0MsQ0FBQyxFQUFFYyxDQUFDO0lBQ3pGaEIsT0FBT2MsY0FBYyxDQUFDWixHQUFHLFdBQVc7UUFBRVUsWUFBWTtRQUFNSyxPQUFPRDtJQUFFO0FBQ3JFLElBQUssU0FBU2QsQ0FBQyxFQUFFYyxDQUFDO0lBQ2RkLENBQUMsQ0FBQyxVQUFVLEdBQUdjO0FBQ25CO0FBQ0EsSUFBSUUsZUFBZSxDQUFDLE1BQUcsS0FBSyxPQUFHLEVB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LE1BQU0sSUFBSSxDQUFDWixpQkFBaUI7Z0JBQ25DOEMsWUFBWSxNQUFNLENBQUMsR0FBRzdELE1BQU04RCxzQkFBc0IsRUFBRSxJQUFJLENBQUMzQyxPQUFPLENBQUNDLFNBQVMsRUFBRXNDO1lBQ2hGO1FBQ0o7SUFDSjtBQUNKO0FBQ0FsRSxtQkFBbUIsR0FBR0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYWRtaW5DbGllbnQuanM/OTkzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5BZG1pbkNsaWVudCA9IHZvaWQgMDtcbmNvbnN0IHdlYjNfanNfMSA9IHJlcXVpcmUoXCJAc29sYW5hL3dlYjMuanNcIik7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCB1c2VyTmFtZV8xID0gcmVxdWlyZShcIi4vdXNlck5hbWVcIik7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IGFuY2hvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIikpO1xuY29uc3QgcGRhXzEgPSByZXF1aXJlKFwiLi9hZGRyZXNzZXMvcGRhXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL21hdGgvdXRpbHNcIik7XG5jb25zdCBzcGxfdG9rZW5fMSA9IHJlcXVpcmUoXCJAc29sYW5hL3NwbC10b2tlblwiKTtcbmNvbnN0IGRyaWZ0Q2xpZW50XzEgPSByZXF1aXJlKFwiLi9kcmlmdENsaWVudFwiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50cy9udW1lcmljQ29uc3RhbnRzXCIpO1xuY29uc3QgdHJhZGVfMSA9IHJlcXVpcmUoXCIuL21hdGgvdHJhZGVcIik7XG5jb25zdCBhbW1fMSA9IHJlcXVpcmUoXCIuL21hdGgvYW1tXCIpO1xuY29uc3QgcGhvZW5peF9zZGtfMSA9IHJlcXVpcmUoXCJAZWxsaXBzaXMtbGFicy9waG9lbml4LXNka1wiKTtcbmNsYXNzIEFkbWluQ2xpZW50IGV4dGVuZHMgZHJpZnRDbGllbnRfMS5EcmlmdENsaWVudCB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh1c2RjTWludCwgX2FkbWluQ29udHJvbHNQcmljZXMpIHtcbiAgICAgICAgY29uc3Qgc3RhdGVBY2NvdW50UlBDUmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uZ2V0UGFyc2VkQWNjb3VudEluZm8oYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpKTtcbiAgICAgICAgaWYgKHN0YXRlQWNjb3VudFJQQ1Jlc3BvbnNlLnZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsZWFyaW5nIGhvdXNlIGFscmVhZHkgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbZHJpZnRTdGF0ZVB1YmxpY0tleV0gPSBhd2FpdCAoMCwgcGRhXzEuZ2V0RHJpZnRTdGF0ZUFjY291bnRQdWJsaWNLZXlBbmROb25jZSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxpemVUeCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi5pbml0aWFsaXplKHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogZHJpZnRTdGF0ZVB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBxdW90ZUFzc2V0TWludDogdXNkY01pbnQsXG4gICAgICAgICAgICAgICAgcmVudDogd2ViM19qc18xLlNZU1ZBUl9SRU5UX1BVQktFWSxcbiAgICAgICAgICAgICAgICBkcmlmdFNpZ25lcjogdGhpcy5nZXRTaWduZXJQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzeXN0ZW1Qcm9ncmFtOiBhbmNob3Iud2ViMy5TeXN0ZW1Qcm9ncmFtLnByb2dyYW1JZCxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZzogaW5pdGlhbGl6ZVR4U2lnIH0gPSBhd2FpdCBzdXBlci5zZW5kVHJhbnNhY3Rpb24oaW5pdGlhbGl6ZVR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIFtpbml0aWFsaXplVHhTaWddO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplU3BvdE1hcmtldChtaW50LCBvcHRpbWFsVXRpbGl6YXRpb24sIG9wdGltYWxSYXRlLCBtYXhSYXRlLCBvcmFjbGUsIG9yYWNsZVNvdXJjZSwgaW5pdGlhbEFzc2V0V2VpZ2h0LCBtYWludGVuYW5jZUFzc2V0V2VpZ2h0LCBpbml0aWFsTGlhYmlsaXR5V2VpZ2h0LCBtYWludGVuYW5jZUxpYWJpbGl0eVdlaWdodCwgaW1mRmFjdG9yID0gMCwgbGlxdWlkYXRvckZlZSA9IDAsIGFjdGl2ZVN0YXR1cyA9IHRydWUsIG5hbWUgPSB1c2VyTmFtZV8xLkRFRkFVTFRfTUFSS0VUX05BTUUpIHtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldEluZGV4ID0gdGhpcy5nZXRTdGF0ZUFjY291bnQoKS5udW1iZXJPZlNwb3RNYXJrZXRzO1xuICAgICAgICBjb25zdCBzcG90TWFya2V0ID0gYXdhaXQgKDAsIHBkYV8xLmdldFNwb3RNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHNwb3RNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRWYXVsdCA9IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0VmF1bHRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHNwb3RNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGluc3VyYW5jZUZ1bmRWYXVsdCA9IGF3YWl0ICgwLCBwZGFfMS5nZXRJbnN1cmFuY2VGdW5kVmF1bHRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHNwb3RNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG5hbWVCdWZmZXIgPSAoMCwgdXNlck5hbWVfMS5lbmNvZGVOYW1lKShuYW1lKTtcbiAgICAgICAgY29uc3QgaW5pdGlhbGl6ZVR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLmluaXRpYWxpemVTcG90TWFya2V0KG9wdGltYWxVdGlsaXphdGlvbiwgb3B0aW1hbFJhdGUsIG1heFJhdGUsIG9yYWNsZVNvdXJjZSwgaW5pdGlhbEFzc2V0V2VpZ2h0LCBtYWludGVuYW5jZUFzc2V0V2VpZ2h0LCBpbml0aWFsTGlhYmlsaXR5V2VpZ2h0LCBtYWludGVuYW5jZUxpYWJpbGl0eVdlaWdodCwgaW1mRmFjdG9yLCBsaXF1aWRhdG9yRmVlLCBhY3RpdmVTdGF0dXMsIG5hbWVCdWZmZXIsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQsXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldFZhdWx0LFxuICAgICAgICAgICAgICAgIGluc3VyYW5jZUZ1bmRWYXVsdCxcbiAgICAgICAgICAgICAgICBkcmlmdFNpZ25lcjogdGhpcy5nZXRTaWduZXJQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0TWludDogbWludCxcbiAgICAgICAgICAgICAgICBvcmFjbGUsXG4gICAgICAgICAgICAgICAgcmVudDogd2ViM19qc18xLlNZU1ZBUl9SRU5UX1BVQktFWSxcbiAgICAgICAgICAgICAgICBzeXN0ZW1Qcm9ncmFtOiBhbmNob3Iud2ViMy5TeXN0ZW1Qcm9ncmFtLnByb2dyYW1JZCxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oaW5pdGlhbGl6ZVR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci5hZGRTcG90TWFya2V0KHNwb3RNYXJrZXRJbmRleCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWNjb3VudFN1YnNjcmliZXIuYWRkT3JhY2xlKHtcbiAgICAgICAgICAgIHNvdXJjZTogb3JhY2xlU291cmNlLFxuICAgICAgICAgICAgcHVibGljS2V5OiBvcmFjbGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemVTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnKG1hcmtldEluZGV4LCBzZXJ1bU1hcmtldCwgc2VydW1Qcm9ncmFtKSB7XG4gICAgICAgIGNvbnN0IHNlcnVtT3Blbk9yZGVycyA9ICgwLCBwZGFfMS5nZXRTZXJ1bU9wZW5PcmRlcnNQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHNlcnVtTWFya2V0KTtcbiAgICAgICAgY29uc3Qgc2VydW1GdWxmaWxsbWVudENvbmZpZyA9ICgwLCBwZGFfMS5nZXRTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnUHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzZXJ1bU1hcmtldCk7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLmluaXRpYWxpemVTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnKG1hcmtldEluZGV4LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBiYXNlU3BvdE1hcmtldDogdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkucHVia2V5LFxuICAgICAgICAgICAgICAgIHF1b3RlU3BvdE1hcmtldDogdGhpcy5nZXRRdW90ZVNwb3RNYXJrZXRBY2NvdW50KCkucHVia2V5LFxuICAgICAgICAgICAgICAgIGRyaWZ0U2lnbmVyOiB0aGlzLmdldFNpZ25lclB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNlcnVtUHJvZ3JhbSxcbiAgICAgICAgICAgICAgICBzZXJ1bU1hcmtldCxcbiAgICAgICAgICAgICAgICBzZXJ1bU9wZW5PcmRlcnMsXG4gICAgICAgICAgICAgICAgcmVudDogd2ViM19qc18xLlNZU1ZBUl9SRU5UX1BVQktFWSxcbiAgICAgICAgICAgICAgICBzeXN0ZW1Qcm9ncmFtOiBhbmNob3Iud2ViMy5TeXN0ZW1Qcm9ncmFtLnByb2dyYW1JZCxcbiAgICAgICAgICAgICAgICBzZXJ1bUZ1bGZpbGxtZW50Q29uZmlnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplUGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnKG1hcmtldEluZGV4LCBwaG9lbml4TWFya2V0KSB7XG4gICAgICAgIGNvbnN0IHBob2VuaXhGdWxmaWxsbWVudENvbmZpZyA9ICgwLCBwZGFfMS5nZXRQaG9lbml4RnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBob2VuaXhNYXJrZXQpO1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi5pbml0aWFsaXplUGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnKG1hcmtldEluZGV4LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBiYXNlU3BvdE1hcmtldDogdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkucHVia2V5LFxuICAgICAgICAgICAgICAgIHF1b3RlU3BvdE1hcmtldDogdGhpcy5nZXRRdW90ZVNwb3RNYXJrZXRBY2NvdW50KCkucHVia2V5LFxuICAgICAgICAgICAgICAgIGRyaWZ0U2lnbmVyOiB0aGlzLmdldFNpZ25lclB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBob2VuaXhNYXJrZXQ6IHBob2VuaXhNYXJrZXQsXG4gICAgICAgICAgICAgICAgcGhvZW5peFByb2dyYW06IHBob2VuaXhfc2RrXzEuUFJPR1JBTV9JRCxcbiAgICAgICAgICAgICAgICByZW50OiB3ZWIzX2pzXzEuU1lTVkFSX1JFTlRfUFVCS0VZLFxuICAgICAgICAgICAgICAgIHN5c3RlbVByb2dyYW06IGFuY2hvci53ZWIzLlN5c3RlbVByb2dyYW0ucHJvZ3JhbUlkLFxuICAgICAgICAgICAgICAgIHBob2VuaXhGdWxmaWxsbWVudENvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZVBlcnBNYXJrZXQobWFya2V0SW5kZXgsIHByaWNlT3JhY2xlLCBiYXNlQXNzZXRSZXNlcnZlLCBxdW90ZUFzc2V0UmVzZXJ2ZSwgcGVyaW9kaWNpdHksIHBlZ011bHRpcGxpZXIgPSBudW1lcmljQ29uc3RhbnRzXzEuUEVHX1BSRUNJU0lPTiwgb3JhY2xlU291cmNlID0gdHlwZXNfMS5PcmFjbGVTb3VyY2UuUFlUSCwgbWFyZ2luUmF0aW9Jbml0aWFsID0gMjAwMCwgbWFyZ2luUmF0aW9NYWludGVuYW5jZSA9IDUwMCwgbGlxdWlkYXRvckZlZSA9IDAsIGFjdGl2ZVN0YXR1cyA9IHRydWUsIG5hbWUgPSB1c2VyTmFtZV8xLkRFRkFVTFRfTUFSS0VUX05BTUUpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFBlcnBNYXJrZXRJbmRleCA9IHRoaXMuZ2V0U3RhdGVBY2NvdW50KCkubnVtYmVyT2ZNYXJrZXRzO1xuICAgICAgICBjb25zdCBwZXJwTWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIGN1cnJlbnRQZXJwTWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBuYW1lQnVmZmVyID0gKDAsIHVzZXJOYW1lXzEuZW5jb2RlTmFtZSkobmFtZSk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxpemVNYXJrZXRUeCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi5pbml0aWFsaXplUGVycE1hcmtldChtYXJrZXRJbmRleCwgYmFzZUFzc2V0UmVzZXJ2ZSwgcXVvdGVBc3NldFJlc2VydmUsIHBlcmlvZGljaXR5LCBwZWdNdWx0aXBsaWVyLCBvcmFjbGVTb3VyY2UsIG1hcmdpblJhdGlvSW5pdGlhbCwgbWFyZ2luUmF0aW9NYWludGVuYW5jZSwgbGlxdWlkYXRvckZlZSwgYWN0aXZlU3RhdHVzLCBuYW1lQnVmZmVyLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBvcmFjbGU6IHByaWNlT3JhY2xlLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IHBlcnBNYXJrZXRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgcmVudDogd2ViM19qc18xLlNZU1ZBUl9SRU5UX1BVQktFWSxcbiAgICAgICAgICAgICAgICBzeXN0ZW1Qcm9ncmFtOiBhbmNob3Iud2ViMy5TeXN0ZW1Qcm9ncmFtLnByb2dyYW1JZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihpbml0aWFsaXplTWFya2V0VHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICB3aGlsZSAodGhpcy5nZXRTdGF0ZUFjY291bnQoKS5udW1iZXJPZk1hcmtldHMgPD0gY3VycmVudFBlcnBNYXJrZXRJbmRleCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5mZXRjaEFjY291bnRzKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci5hZGRQZXJwTWFya2V0KGN1cnJlbnRQZXJwTWFya2V0SW5kZXgpO1xuICAgICAgICBhd2FpdCB0aGlzLmFjY291bnRTdWJzY3JpYmVyLmFkZE9yYWNsZSh7XG4gICAgICAgICAgICBzb3VyY2U6IG9yYWNsZVNvdXJjZSxcbiAgICAgICAgICAgIHB1YmxpY0tleTogcHJpY2VPcmFjbGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZUluaXRpYWxpemVkUGVycE1hcmtldChtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCBwZXJwTWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgZGVsZXRlSW5pdGlhbGl6ZU1hcmtldFR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLmRlbGV0ZUluaXRpYWxpemVkUGVycE1hcmtldChtYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogcGVycE1hcmtldFB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihkZWxldGVJbml0aWFsaXplTWFya2V0VHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIG1vdmVBbW1QcmljZShwZXJwTWFya2V0SW5kZXgsIGJhc2VBc3NldFJlc2VydmUsIHF1b3RlQXNzZXRSZXNlcnZlLCBzcXJ0Sykge1xuICAgICAgICBjb25zdCBtYXJrZXRQdWJsaWNLZXkgPSBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKHNxcnRLID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3FydEsgPSAoMCwgdXRpbHNfMS5zcXVhcmVSb290Qk4pKGJhc2VBc3NldFJlc2VydmUubXVsKHF1b3RlQXNzZXRSZXNlcnZlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24ubW92ZUFtbVByaWNlKGJhc2VBc3NldFJlc2VydmUsIHF1b3RlQXNzZXRSZXNlcnZlLCBzcXJ0Sywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogbWFya2V0UHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVLKHBlcnBNYXJrZXRJbmRleCwgc3FydEspIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlSyhzcXJ0Sywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCksXG4gICAgICAgICAgICAgICAgb3JhY2xlOiB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50KHBlcnBNYXJrZXRJbmRleCkuYW1tLm9yYWNsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldENvbmNlbnRyYXRpb25TY2FsZShwZXJwTWFya2V0SW5kZXgsIGNvbmNlbnRyYXRpb25TY2FsZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVQZXJwTWFya2V0Q29uY2VudHJhdGlvbkNvZWYoY29uY2VudHJhdGlvblNjYWxlLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBtb3ZlQW1tVG9QcmljZShwZXJwTWFya2V0SW5kZXgsIHRhcmdldFByaWNlKSB7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXQgPSB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50KHBlcnBNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IFtkaXJlY3Rpb24sIHRyYWRlU2l6ZSwgX10gPSAoMCwgdHJhZGVfMS5jYWxjdWxhdGVUYXJnZXRQcmljZVRyYWRlKShwZXJwTWFya2V0LCB0YXJnZXRQcmljZSwgbmV3IGFuY2hvcl8xLkJOKDEwMDApLCAncXVvdGUnLCB1bmRlZmluZWQgLy90b2RvXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IFtuZXdRdW90ZUFzc2V0QW1vdW50LCBuZXdCYXNlQXNzZXRBbW91bnRdID0gKDAsIGFtbV8xLmNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwKShwZXJwTWFya2V0LmFtbSwgJ3F1b3RlJywgdHJhZGVTaXplLCAoMCwgYW1tXzEuZ2V0U3dhcERpcmVjdGlvbikoJ3F1b3RlJywgZGlyZWN0aW9uKSk7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXRQdWJsaWNLZXkgPSBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24ubW92ZUFtbVByaWNlKG5ld0Jhc2VBc3NldEFtb3VudCwgbmV3UXVvdGVBc3NldEFtb3VudCwgcGVycE1hcmtldC5hbW0uc3FydEssIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IHBlcnBNYXJrZXRQdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHJlcGVnQW1tQ3VydmUobmV3UGVnLCBwZXJwTWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgcGVycE1hcmtldFB1YmxpY0tleSA9IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBhbW1EYXRhID0gdGhpcy5nZXRQZXJwTWFya2V0QWNjb3VudChwZXJwTWFya2V0SW5kZXgpLmFtbTtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24ucmVwZWdBbW1DdXJ2ZShuZXdQZWcsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIG9yYWNsZTogYW1tRGF0YS5vcmFjbGUsXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogcGVycE1hcmtldFB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldEFtbU9yYWNsZVR3YXAocGVycE1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IGFtbURhdGEgPSB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50KHBlcnBNYXJrZXRJbmRleCkuYW1tO1xuICAgICAgICBjb25zdCBwZXJwTWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVBlcnBNYXJrZXRBbW1PcmFjbGVUd2FwKHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIG9yYWNsZTogYW1tRGF0YS5vcmFjbGUsXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogcGVycE1hcmtldFB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyByZXNldFBlcnBNYXJrZXRBbW1PcmFjbGVUd2FwKHBlcnBNYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCBhbW1EYXRhID0gdGhpcy5nZXRQZXJwTWFya2V0QWNjb3VudChwZXJwTWFya2V0SW5kZXgpLmFtbTtcbiAgICAgICAgY29uc3QgcGVycE1hcmtldFB1YmxpY0tleSA9IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy5yZXNldFBlcnBNYXJrZXRBbW1PcmFjbGVUd2FwKHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIG9yYWNsZTogYW1tRGF0YS5vcmFjbGUsXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogcGVycE1hcmtldFB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBkZXBvc2l0SW50b1BlcnBNYXJrZXRGZWVQb29sKHBlcnBNYXJrZXRJbmRleCwgYW1vdW50LCBzb3VyY2VWYXVsdCkge1xuICAgICAgICBjb25zdCBzcG90TWFya2V0ID0gdGhpcy5nZXRRdW90ZVNwb3RNYXJrZXRBY2NvdW50KCk7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLmRlcG9zaXRJbnRvUGVycE1hcmtldEZlZVBvb2woYW1vdW50LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgICAgICBzb3VyY2VWYXVsdCxcbiAgICAgICAgICAgICAgICBkcmlmdFNpZ25lcjogdGhpcy5nZXRTaWduZXJQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBxdW90ZVNwb3RNYXJrZXQ6IHNwb3RNYXJrZXQucHVia2V5LFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXRWYXVsdDogc3BvdE1hcmtldC52YXVsdCxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUFkbWluKGFkbWluKSB7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZUFkbWluKGFkbWluLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldEN1cnZlVXBkYXRlSW50ZW5zaXR5KHBlcnBNYXJrZXRJbmRleCwgY3VydmVVcGRhdGVJbnRlbnNpdHkpIHtcbiAgICAgICAgLy8gYXNzZXJ0KGN1cnZlVXBkYXRlSW50ZW5zaXR5ID49IDAgJiYgY3VydmVVcGRhdGVJbnRlbnNpdHkgPD0gMTAwKTtcbiAgICAgICAgLy8gYXNzZXJ0KE51bWJlci5pc0ludGVnZXIoY3VydmVVcGRhdGVJbnRlbnNpdHkpKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlUGVycE1hcmtldEN1cnZlVXBkYXRlSW50ZW5zaXR5KGN1cnZlVXBkYXRlSW50ZW5zaXR5LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQZXJwTWFya2V0VGFyZ2V0QmFzZUFzc2V0QW1vdW50UGVyTHAocGVycE1hcmtldEluZGV4LCB0YXJnZXRCYXNlQXNzZXRBbW91bnRQZXJMUCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVQZXJwTWFya2V0VGFyZ2V0QmFzZUFzc2V0QW1vdW50UGVyTHAodGFyZ2V0QmFzZUFzc2V0QW1vdW50UGVyTFAsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBNYXJrZXRNYXJnaW5SYXRpbyhwZXJwTWFya2V0SW5kZXgsIG1hcmdpblJhdGlvSW5pdGlhbCwgbWFyZ2luUmF0aW9NYWludGVuYW5jZSkge1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVQZXJwTWFya2V0TWFyZ2luUmF0aW8obWFyZ2luUmF0aW9Jbml0aWFsLCBtYXJnaW5SYXRpb01haW50ZW5hbmNlLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldEltZkZhY3RvcihwZXJwTWFya2V0SW5kZXgsIGltZkZhY3RvciwgdW5yZWFsaXplZFBubEltZkZhY3Rvcikge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVQZXJwTWFya2V0SW1mRmFjdG9yKGltZkZhY3RvciwgdW5yZWFsaXplZFBubEltZkZhY3Rvciwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldEJhc2VTcHJlYWQocGVycE1hcmtldEluZGV4LCBiYXNlU3ByZWFkKSB7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVBlcnBNYXJrZXRCYXNlU3ByZWFkKGJhc2VTcHJlYWQsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVBbW1KaXRJbnRlbnNpdHkocGVycE1hcmtldEluZGV4LCBhbW1KaXRJbnRlbnNpdHkpIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlQW1tSml0SW50ZW5zaXR5KGFtbUppdEludGVuc2l0eSwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBNYXJrZXROYW1lKHBlcnBNYXJrZXRJbmRleCwgbmFtZSkge1xuICAgICAgICBjb25zdCBuYW1lQnVmZmVyID0gKDAsIHVzZXJOYW1lXzEuZW5jb2RlTmFtZSkobmFtZSk7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVBlcnBNYXJrZXROYW1lKG5hbWVCdWZmZXIsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90TWFya2V0TmFtZShzcG90TWFya2V0SW5kZXgsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgbmFtZUJ1ZmZlciA9ICgwLCB1c2VyTmFtZV8xLmVuY29kZU5hbWUpKG5hbWUpO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVTcG90TWFya2V0TmFtZShuYW1lQnVmZmVyLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgc3BvdE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQZXJwTWFya2V0UGVyTHBCYXNlKHBlcnBNYXJrZXRJbmRleCwgcGVyTHBCYXNlKSB7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXRQdWJsaWNLZXkgPSBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlUGVycE1hcmtldFBlckxwQmFzZShwZXJMcEJhc2UsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IHBlcnBNYXJrZXRQdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldE1heFNwcmVhZChwZXJwTWFya2V0SW5kZXgsIG1heFNwcmVhZCkge1xuICAgICAgICBjb25zdCBwZXJwTWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVBlcnBNYXJrZXRNYXhTcHJlYWQobWF4U3ByZWFkLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBwZXJwTWFya2V0UHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBGZWVTdHJ1Y3R1cmUoZmVlU3RydWN0dXJlKSB7XG4gICAgICAgIGNvbnN0IHR4ID0gdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVBlcnBGZWVTdHJ1Y3R1cmUoZmVlU3RydWN0dXJlLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU3BvdEZlZVN0cnVjdHVyZShmZWVTdHJ1Y3R1cmUpIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlU3BvdEZlZVN0cnVjdHVyZShmZWVTdHJ1Y3R1cmUsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVJbml0aWFsUGN0VG9MaXF1aWRhdGUoaW5pdGlhbFBjdFRvTGlxdWlkYXRlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZUluaXRpYWxQY3RUb0xpcXVpZGF0ZShpbml0aWFsUGN0VG9MaXF1aWRhdGUsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUxpcXVpZGF0aW9uRHVyYXRpb24obGlxdWlkYXRpb25EdXJhdGlvbikge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVMaXF1aWRhdGlvbkR1cmF0aW9uKGxpcXVpZGF0aW9uRHVyYXRpb24sIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZU9yYWNsZUd1YXJkUmFpbHMob3JhY2xlR3VhcmRSYWlscykge1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVPcmFjbGVHdWFyZFJhaWxzKG9yYWNsZUd1YXJkUmFpbHMsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTdGF0ZVNldHRsZW1lbnREdXJhdGlvbihzZXR0bGVtZW50RHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlU3RhdGVTZXR0bGVtZW50RHVyYXRpb24oc2V0dGxlbWVudER1cmF0aW9uLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVXaXRoZHJhd0d1YXJkVGhyZXNob2xkKHNwb3RNYXJrZXRJbmRleCwgd2l0aGRyYXdHdWFyZFRocmVzaG9sZCkge1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVXaXRoZHJhd0d1YXJkVGhyZXNob2xkKHdpdGhkcmF3R3VhcmRUaHJlc2hvbGQsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzcG90TWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90TWFya2V0SWZGYWN0b3Ioc3BvdE1hcmtldEluZGV4LCB1c2VySWZGYWN0b3IsIHRvdGFsSWZGYWN0b3IpIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlU3BvdE1hcmtldElmRmFjdG9yKHNwb3RNYXJrZXRJbmRleCwgdXNlcklmRmFjdG9yLCB0b3RhbElmRmFjdG9yLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgc3BvdE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU3BvdE1hcmtldFJldmVudWVTZXR0bGVQZXJpb2Qoc3BvdE1hcmtldEluZGV4LCByZXZlbnVlU2V0dGxlUGVyaW9kKSB7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVNwb3RNYXJrZXRSZXZlbnVlU2V0dGxlUGVyaW9kKHJldmVudWVTZXR0bGVQZXJpb2QsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzcG90TWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90TWFya2V0TWF4VG9rZW5EZXBvc2l0cyhzcG90TWFya2V0SW5kZXgsIG1heFRva2VuRGVwb3NpdHMpIHtcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlU3BvdE1hcmtldE1heFRva2VuRGVwb3NpdHMobWF4VG9rZW5EZXBvc2l0cywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFNwb3RNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHNwb3RNYXJrZXRJbmRleCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUluc3VyYW5jZUZ1bmRVbnN0YWtpbmdQZXJpb2Qoc3BvdE1hcmtldEluZGV4LCBpbnN1cmFuY2VXaXRoZHJhd0VzY3Jvd1BlcmlvZCkge1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVJbnN1cmFuY2VGdW5kVW5zdGFraW5nUGVyaW9kKGluc3VyYW5jZVdpdGhkcmF3RXNjcm93UGVyaW9kLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgc3BvdE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlTHBDb29sZG93blRpbWUoY29vbGRvd25UaW1lKSB7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZUxwQ29vbGRvd25UaW1lKGNvb2xkb3duVGltZSwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBNYXJrZXRPcmFjbGUocGVycE1hcmtldEluZGV4LCBvcmFjbGUsIG9yYWNsZVNvdXJjZSkge1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVQZXJwTWFya2V0T3JhY2xlKG9yYWNsZSwgb3JhY2xlU291cmNlLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgICAgICBvcmFjbGU6IG9yYWNsZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldFN0ZXBTaXplQW5kVGlja1NpemUocGVycE1hcmtldEluZGV4LCBzdGVwU2l6ZSwgdGlja1NpemUpIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlUGVycE1hcmtldFN0ZXBTaXplQW5kVGlja1NpemUoc3RlcFNpemUsIHRpY2tTaXplLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldE1pbk9yZGVyU2l6ZShwZXJwTWFya2V0SW5kZXgsIG9yZGVyU2l6ZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVQZXJwTWFya2V0TWluT3JkZXJTaXplKG9yZGVyU2l6ZSwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU3BvdE1hcmtldFN0ZXBTaXplQW5kVGlja1NpemUoc3BvdE1hcmtldEluZGV4LCBzdGVwU2l6ZSwgdGlja1NpemUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlU3BvdE1hcmtldFN0ZXBTaXplQW5kVGlja1NpemUoc3RlcFNpemUsIHRpY2tTaXplLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgc3BvdE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90TWFya2V0TWluT3JkZXJTaXplKHNwb3RNYXJrZXRJbmRleCwgb3JkZXJTaXplKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVNwb3RNYXJrZXRNaW5PcmRlclNpemUob3JkZXJTaXplLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgc3BvdE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQZXJwTWFya2V0RXhwaXJ5KHBlcnBNYXJrZXRJbmRleCwgZXhwaXJ5VHMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlUGVycE1hcmtldEV4cGlyeShleHBpcnlUcywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlU3BvdE1hcmtldE9yYWNsZShzcG90TWFya2V0SW5kZXgsIG9yYWNsZSwgb3JhY2xlU291cmNlKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVNwb3RNYXJrZXRPcmFjbGUob3JhY2xlLCBvcmFjbGVTb3VyY2UsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzcG90TWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgICAgIG9yYWNsZTogb3JhY2xlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNwb3RNYXJrZXRPcmRlcnNFbmFibGVkKHNwb3RNYXJrZXRJbmRleCwgb3JkZXJzRW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVTcG90TWFya2V0T3JkZXJzRW5hYmxlZChvcmRlcnNFbmFibGVkLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgc3BvdE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnU3RhdHVzKHNlcnVtRnVsZmlsbG1lbnRDb25maWcsIHN0YXR1cykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnU3RhdHVzKHN0YXR1cywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc2VydW1GdWxmaWxsbWVudENvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90TWFya2V0RXhwaXJ5KHNwb3RNYXJrZXRJbmRleCwgZXhwaXJ5VHMpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlU3BvdE1hcmtldEV4cGlyeShleHBpcnlUcywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFNwb3RNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHNwb3RNYXJrZXRJbmRleCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlV2hpdGVsaXN0TWludCh3aGl0ZWxpc3RNaW50KSB7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVdoaXRlbGlzdE1pbnQod2hpdGVsaXN0TWludCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZURpc2NvdW50TWludChkaXNjb3VudE1pbnQpIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlRGlzY291bnRNaW50KGRpc2NvdW50TWludCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNwb3RNYXJrZXRNYXJnaW5XZWlnaHRzKHNwb3RNYXJrZXRJbmRleCwgaW5pdGlhbEFzc2V0V2VpZ2h0LCBtYWludGVuYW5jZUFzc2V0V2VpZ2h0LCBpbml0aWFsTGlhYmlsaXR5V2VpZ2h0LCBtYWludGVuYW5jZUxpYWJpbGl0eVdlaWdodCwgaW1mRmFjdG9yID0gMCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVTcG90TWFya2V0TWFyZ2luV2VpZ2h0cyhpbml0aWFsQXNzZXRXZWlnaHQsIG1haW50ZW5hbmNlQXNzZXRXZWlnaHQsIGluaXRpYWxMaWFiaWxpdHlXZWlnaHQsIG1haW50ZW5hbmNlTGlhYmlsaXR5V2VpZ2h0LCBpbWZGYWN0b3IsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzcG90TWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNwb3RNYXJrZXRCb3Jyb3dSYXRlKHNwb3RNYXJrZXRJbmRleCwgb3B0aW1hbFV0aWxpemF0aW9uLCBvcHRpbWFsQm9ycm93UmF0ZSwgb3B0aW1hbE1heFJhdGUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlU3BvdE1hcmtldEJvcnJvd1JhdGUob3B0aW1hbFV0aWxpemF0aW9uLCBvcHRpbWFsQm9ycm93UmF0ZSwgb3B0aW1hbE1heFJhdGUsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzcG90TWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNwb3RNYXJrZXRBc3NldFRpZXIoc3BvdE1hcmtldEluZGV4LCBhc3NldFRpZXIpIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlU3BvdE1hcmtldEFzc2V0VGllcihhc3NldFRpZXIsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzcG90TWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90TWFya2V0U3RhdHVzKHNwb3RNYXJrZXRJbmRleCwgbWFya2V0U3RhdHVzKSB7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVNwb3RNYXJrZXRTdGF0dXMobWFya2V0U3RhdHVzLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0U3BvdE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgc3BvdE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldFN0YXR1cyhwZXJwTWFya2V0SW5kZXgsIG1hcmtldFN0YXR1cykge1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVQZXJwTWFya2V0U3RhdHVzKG1hcmtldFN0YXR1cywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogYXdhaXQgKDAsIHBkYV8xLmdldFBlcnBNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHBlcnBNYXJrZXRJbmRleCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBNYXJrZXRDb250cmFjdFRpZXIocGVycE1hcmtldEluZGV4LCBjb250cmFjdFRpZXIpIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlUGVycE1hcmtldENvbnRyYWN0VGllcihjb250cmFjdFRpZXIsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVFeGNoYW5nZVN0YXR1cyhleGNoYW5nZVN0YXR1cykge1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVFeGNoYW5nZVN0YXR1cyhleGNoYW5nZVN0YXR1cywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBBdWN0aW9uRHVyYXRpb24obWluRHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlUGVycEF1Y3Rpb25EdXJhdGlvbih0eXBlb2YgbWluRHVyYXRpb24gPT09ICdudW1iZXInID8gbWluRHVyYXRpb24gOiBtaW5EdXJhdGlvbi50b051bWJlcigpLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90QXVjdGlvbkR1cmF0aW9uKGRlZmF1bHRBdWN0aW9uRHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlU3BvdEF1Y3Rpb25EdXJhdGlvbihkZWZhdWx0QXVjdGlvbkR1cmF0aW9uLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQZXJwTWFya2V0TWF4RmlsbFJlc2VydmVGcmFjdGlvbihwZXJwTWFya2V0SW5kZXgsIG1heEJhc2VBc3NldEFtb3VudFJhdGlvKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVBlcnBNYXJrZXRNYXhGaWxsUmVzZXJ2ZUZyYWN0aW9uKG1heEJhc2VBc3NldEFtb3VudFJhdGlvLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVNYXhTbGlwcGFnZVJhdGlvKHBlcnBNYXJrZXRJbmRleCwgbWF4U2xpcHBhZ2VSYXRpbykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVNYXhTbGlwcGFnZVJhdGlvKG1heFNsaXBwYWdlUmF0aW8sIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IHRoaXMuZ2V0UGVycE1hcmtldEFjY291bnQocGVycE1hcmtldEluZGV4KS5wdWJrZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlUGVycE1hcmtldFVucmVhbGl6ZWRBc3NldFdlaWdodChwZXJwTWFya2V0SW5kZXgsIHVucmVhbGl6ZWRJbml0aWFsQXNzZXRXZWlnaHQsIHVucmVhbGl6ZWRNYWludGVuYW5jZUFzc2V0V2VpZ2h0KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVBlcnBNYXJrZXRVbnJlYWxpemVkQXNzZXRXZWlnaHQodW5yZWFsaXplZEluaXRpYWxBc3NldFdlaWdodCwgdW5yZWFsaXplZE1haW50ZW5hbmNlQXNzZXRXZWlnaHQsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBNYXJrZXRNYXhJbWJhbGFuY2VzKHBlcnBNYXJrZXRJbmRleCwgdW5yZWFsaXplZE1heEltYmFsYW5jZSwgbWF4UmV2ZW51ZVdpdGhkcmF3UGVyUGVyaW9kLCBxdW90ZU1heEluc3VyYW5jZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy51cGRhdGVQZXJwTWFya2V0TWF4SW1iYWxhbmNlcyh1bnJlYWxpemVkTWF4SW1iYWxhbmNlLCBtYXhSZXZlbnVlV2l0aGRyYXdQZXJQZXJpb2QsIHF1b3RlTWF4SW5zdXJhbmNlLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVQZXJwTWFya2V0TWF4T3BlbkludGVyZXN0KHBlcnBNYXJrZXRJbmRleCwgbWF4T3BlbkludGVyZXN0KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVBlcnBNYXJrZXRNYXhPcGVuSW50ZXJlc3QobWF4T3BlbkludGVyZXN0LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTZXJ1bVZhdWx0KHNybVZhdWx0KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLnVwZGF0ZVNlcnVtVmF1bHQoe1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3JtVmF1bHQ6IHNybVZhdWx0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBNYXJrZXRMaXF1aWRhdGlvbkZlZShwZXJwTWFya2V0SW5kZXgsIGxpcXVpZGF0b3JGZWUsIGlmTGlxdWlkYXRpb25GZWUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlUGVycE1hcmtldExpcXVpZGF0aW9uRmVlKGxpcXVpZGF0b3JGZWUsIGlmTGlxdWlkYXRpb25GZWUsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBlcnBNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNwb3RNYXJrZXRMaXF1aWRhdGlvbkZlZShzcG90TWFya2V0SW5kZXgsIGxpcXVpZGF0b3JGZWUsIGlmTGlxdWlkYXRpb25GZWUpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5ycGMudXBkYXRlU3BvdE1hcmtldExpcXVpZGF0aW9uRmVlKGxpcXVpZGF0b3JGZWUsIGlmTGlxdWlkYXRpb25GZWUsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IGF3YWl0ICgwLCBwZGFfMS5nZXRTcG90TWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBzcG90TWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5BZG1pbkNsaWVudCA9IEFkbWluQ2xpZW50O1xuIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9fZXNNb2R1bGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fc2V0TW9kdWxlRGVmYXVsdCIsInYiLCJ2YWx1ZSIsIl9faW1wb3J0U3RhciIsIm1vZCIsInJlc3VsdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImV4cG9ydHMiLCJBZG1pbkNsaWVudCIsIndlYjNfanNfMSIsInJlcXVpcmUiLCJ0eXBlc18xIiwidXNlck5hbWVfMSIsImFuY2hvcl8xIiwiYW5jaG9yIiwicGRhXzEiLCJ1dGlsc18xIiwic3BsX3Rva2VuXzEiLCJkcmlmdENsaWVudF8xIiwibnVtZXJpY0NvbnN0YW50c18xIiwidHJhZGVfMSIsImFtbV8xIiwicGhvZW5peF9zZGtfMSIsIkRyaWZ0Q2xpZW50IiwiaW5pdGlhbGl6ZSIsInVzZGNNaW50IiwiX2FkbWluQ29udHJvbHNQcmljZXMiLCJzdGF0ZUFjY291bnRSUENSZXNwb25zZSIsImNvbm5lY3Rpb24iLCJnZXRQYXJzZWRBY2NvdW50SW5mbyIsImdldFN0YXRlUHVibGljS2V5IiwiRXJyb3IiLCJkcmlmdFN0YXRlUHVibGljS2V5IiwiZ2V0RHJpZnRTdGF0ZUFjY291bnRQdWJsaWNLZXlBbmROb25jZSIsInByb2dyYW0iLCJwcm9ncmFtSWQiLCJpbml0aWFsaXplVHgiLCJ0cmFuc2FjdGlvbiIsImFjY291bnRzIiwiYWRtaW4iLCJ3YWxsZXQiLCJwdWJsaWNLZXkiLCJzdGF0ZSIsInF1b3RlQXNzZXRNaW50IiwicmVudCIsIlNZU1ZBUl9SRU5UX1BVQktFWSIsImRyaWZ0U2lnbmVyIiwiZ2V0U2lnbmVyUHVibGljS2V5Iiwic3lzdGVtUHJvZ3JhbSIsIndlYjMiLCJTeXN0ZW1Qcm9ncmFtIiwidG9rZW5Qcm9ncmFtIiwiVE9LRU5fUFJPR1JBTV9JRCIsInR4U2lnIiwiaW5pdGlhbGl6ZVR4U2lnIiwic2VuZFRyYW5zYWN0aW9uIiwib3B0cyIsImluaXRpYWxpemVTcG90TWFya2V0IiwibWludCIsIm9wdGltYWxVdGlsaXphdGlvbiIsIm9wdGltYWxSYXRlIiwibWF4UmF0ZSIsIm9yYWNsZSIsIm9yYWNsZVNvdXJjZSIsImluaXRpYWxBc3NldFdlaWdodCIsIm1haW50ZW5hbmNlQXNzZXRXZWlnaHQiLCJpbml0aWFsTGlhYmlsaXR5V2VpZ2h0IiwibWFpbnRlbmFuY2VMaWFiaWxpdHlXZWlnaHQiLCJpbWZGYWN0b3IiLCJsaXF1aWRhdG9yRmVlIiwiYWN0aXZlU3RhdHVzIiwibmFtZSIsIkRFRkFVTFRfTUFSS0VUX05BTUUiLCJzcG90TWFya2V0SW5kZXgiLCJnZXRTdGF0ZUFjY291bnQiLCJudW1iZXJPZlNwb3RNYXJrZXRzIiwic3BvdE1hcmtldCIsImdldFNwb3RNYXJrZXRQdWJsaWNLZXkiLCJzcG90TWFya2V0VmF1bHQiLCJnZXRTcG90TWFya2V0VmF1bHRQdWJsaWNLZXkiLCJpbnN1cmFuY2VGdW5kVmF1bHQiLCJnZXRJbnN1cmFuY2VGdW5kVmF1bHRQdWJsaWNLZXkiLCJuYW1lQnVmZmVyIiwiZW5jb2RlTmFtZSIsInNwb3RNYXJrZXRNaW50IiwiYWNjb3VudFN1YnNjcmliZXIiLCJhZGRTcG90TWFya2V0IiwiYWRkT3JhY2xlIiwic291cmNlIiwiaW5pdGlhbGl6ZVNlcnVtRnVsZmlsbG1lbnRDb25maWciLCJtYXJrZXRJbmRleCIsInNlcnVtTWFya2V0Iiwic2VydW1Qcm9ncmFtIiwic2VydW1PcGVuT3JkZXJzIiwiZ2V0U2VydW1PcGVuT3JkZXJzUHVibGljS2V5Iiwic2VydW1GdWxmaWxsbWVudENvbmZpZyIsImdldFNlcnVtRnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkiLCJ0eCIsImJhc2VTcG90TWFya2V0IiwiZ2V0U3BvdE1hcmtldEFjY291bnQiLCJwdWJrZXkiLCJxdW90ZVNwb3RNYXJrZXQiLCJnZXRRdW90ZVNwb3RNYXJrZXRBY2NvdW50IiwiaW5pdGlhbGl6ZVBob2VuaXhGdWxmaWxsbWVudENvbmZpZyIsInBob2VuaXhNYXJrZXQiLCJwaG9lbml4RnVsZmlsbG1lbnRDb25maWciLCJnZXRQaG9lbml4RnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkiLCJwaG9lbml4UHJvZ3JhbSIsIlBST0dSQU1fSUQiLCJpbml0aWFsaXplUGVycE1hcmtldCIsInByaWNlT3JhY2xlIiwiYmFzZUFzc2V0UmVzZXJ2ZSIsInF1b3RlQXNzZXRSZXNlcnZlIiwicGVyaW9kaWNpdHkiLCJwZWdNdWx0aXBsaWVyIiwiUEVHX1BSRUNJU0lPTiIsIk9yYWNsZVNvdXJjZSIsIlBZVEgiLCJtYXJnaW5SYXRpb0luaXRpYWwiLCJtYXJnaW5SYXRpb01haW50ZW5hbmNlIiwiY3VycmVudFBlcnBNYXJrZXRJbmRleCIsIm51bWJlck9mTWFya2V0cyIsInBlcnBNYXJrZXRQdWJsaWNLZXkiLCJnZXRQZXJwTWFya2V0UHVibGljS2V5IiwiaW5pdGlhbGl6ZU1hcmtldFR4IiwicGVycE1hcmtldCIsImZldGNoQWNjb3VudHMiLCJhZGRQZXJwTWFya2V0IiwiZGVsZXRlSW5pdGlhbGl6ZWRQZXJwTWFya2V0IiwiZGVsZXRlSW5pdGlhbGl6ZU1hcmtldFR4IiwibW92ZUFtbVByaWNlIiwicGVycE1hcmtldEluZGV4Iiwic3FydEsiLCJtYXJrZXRQdWJsaWNLZXkiLCJzcXVhcmVSb290Qk4iLCJtdWwiLCJ1cGRhdGVLIiwiZ2V0UGVycE1hcmtldEFjY291bnQiLCJhbW0iLCJ1cGRhdGVQZXJwTWFya2V0Q29uY2VudHJhdGlvblNjYWxlIiwiY29uY2VudHJhdGlvblNjYWxlIiwicnBjIiwidXBkYXRlUGVycE1hcmtldENvbmNlbnRyYXRpb25Db2VmIiwibW92ZUFtbVRvUHJpY2UiLCJ0YXJnZXRQcmljZSIsImRpcmVjdGlvbiIsInRyYWRlU2l6ZSIsIl8iLCJjYWxjdWxhdGVUYXJnZXRQcmljZVRyYWRlIiwiQk4iLCJuZXdRdW90ZUFzc2V0QW1vdW50IiwibmV3QmFzZUFzc2V0QW1vdW50IiwiY2FsY3VsYXRlQW1tUmVzZXJ2ZXNBZnRlclN3YXAiLCJnZXRTd2FwRGlyZWN0aW9uIiwicmVwZWdBbW1DdXJ2ZSIsIm5ld1BlZyIsImFtbURhdGEiLCJ1cGRhdGVQZXJwTWFya2V0QW1tT3JhY2xlVHdhcCIsInJlc2V0UGVycE1hcmtldEFtbU9yYWNsZVR3YXAiLCJkZXBvc2l0SW50b1BlcnBNYXJrZXRGZWVQb29sIiwiYW1vdW50Iiwic291cmNlVmF1bHQiLCJ2YXVsdCIsInVwZGF0ZUFkbWluIiwidXBkYXRlUGVycE1hcmtldEN1cnZlVXBkYXRlSW50ZW5zaXR5IiwiY3VydmVVcGRhdGVJbnRlbnNpdHkiLCJ1cGRhdGVQZXJwTWFya2V0VGFyZ2V0QmFzZUFzc2V0QW1vdW50UGVyTHAiLCJ0YXJnZXRCYXNlQXNzZXRBbW91bnRQZXJMUCIsInVwZGF0ZVBlcnBNYXJrZXRNYXJnaW5SYXRpbyIsInVwZGF0ZVBlcnBNYXJrZXRJbWZGYWN0b3IiLCJ1bnJlYWxpemVkUG5sSW1mRmFjdG9yIiwidXBkYXRlUGVycE1hcmtldEJhc2VTcHJlYWQiLCJiYXNlU3ByZWFkIiwidXBkYXRlQW1tSml0SW50ZW5zaXR5IiwiYW1tSml0SW50ZW5zaXR5IiwidXBkYXRlUGVycE1hcmtldE5hbWUiLCJ1cGRhdGVTcG90TWFya2V0TmFtZSIsInVwZGF0ZVBlcnBNYXJrZXRQZXJMcEJhc2UiLCJwZXJMcEJhc2UiLCJ1cGRhdGVQZXJwTWFya2V0TWF4U3ByZWFkIiwibWF4U3ByZWFkIiwidXBkYXRlUGVycEZlZVN0cnVjdHVyZSIsImZlZVN0cnVjdHVyZSIsInVwZGF0ZVNwb3RGZWVTdHJ1Y3R1cmUiLCJ1cGRhdGVJbml0aWFsUGN0VG9MaXF1aWRhdGUiLCJpbml0aWFsUGN0VG9MaXF1aWRhdGUiLCJ1cGRhdGVMaXF1aWRhdGlvbkR1cmF0aW9uIiwibGlxdWlkYXRpb25EdXJhdGlvbiIsInVwZGF0ZU9yYWNsZUd1YXJkUmFpbHMiLCJvcmFjbGVHdWFyZFJhaWxzIiwidXBkYXRlU3RhdGVTZXR0bGVtZW50RHVyYXRpb24iLCJzZXR0bGVtZW50RHVyYXRpb24iLCJ1cGRhdGVXaXRoZHJhd0d1YXJkVGhyZXNob2xkIiwid2l0aGRyYXdHdWFyZFRocmVzaG9sZCIsInVwZGF0ZVNwb3RNYXJrZXRJZkZhY3RvciIsInVzZXJJZkZhY3RvciIsInRvdGFsSWZGYWN0b3IiLCJ1cGRhdGVTcG90TWFya2V0UmV2ZW51ZVNldHRsZVBlcmlvZCIsInJldmVudWVTZXR0bGVQZXJpb2QiLCJ1cGRhdGVTcG90TWFya2V0TWF4VG9rZW5EZXBvc2l0cyIsIm1heFRva2VuRGVwb3NpdHMiLCJ1cGRhdGVJbnN1cmFuY2VGdW5kVW5zdGFraW5nUGVyaW9kIiwiaW5zdXJhbmNlV2l0aGRyYXdFc2Nyb3dQZXJpb2QiLCJ1cGRhdGVMcENvb2xkb3duVGltZSIsImNvb2xkb3duVGltZSIsInVwZGF0ZVBlcnBNYXJrZXRPcmFjbGUiLCJ1cGRhdGVQZXJwTWFya2V0U3RlcFNpemVBbmRUaWNrU2l6ZSIsInN0ZXBTaXplIiwidGlja1NpemUiLCJ1cGRhdGVQZXJwTWFya2V0TWluT3JkZXJTaXplIiwib3JkZXJTaXplIiwidXBkYXRlU3BvdE1hcmtldFN0ZXBTaXplQW5kVGlja1NpemUiLCJ1cGRhdGVTcG90TWFya2V0TWluT3JkZXJTaXplIiwidXBkYXRlUGVycE1hcmtldEV4cGlyeSIsImV4cGlyeVRzIiwidXBkYXRlU3BvdE1hcmtldE9yYWNsZSIsInVwZGF0ZVNwb3RNYXJrZXRPcmRlcnNFbmFibGVkIiwib3JkZXJzRW5hYmxlZCIsInVwZGF0ZVNlcnVtRnVsZmlsbG1lbnRDb25maWdTdGF0dXMiLCJzdGF0dXMiLCJ1cGRhdGVTcG90TWFya2V0RXhwaXJ5IiwidXBkYXRlV2hpdGVsaXN0TWludCIsIndoaXRlbGlzdE1pbnQiLCJ1cGRhdGVEaXNjb3VudE1pbnQiLCJkaXNjb3VudE1pbnQiLCJ1cGRhdGVTcG90TWFya2V0TWFyZ2luV2VpZ2h0cyIsInVwZGF0ZVNwb3RNYXJrZXRCb3Jyb3dSYXRlIiwib3B0aW1hbEJvcnJvd1JhdGUiLCJvcHRpbWFsTWF4UmF0ZSIsInVwZGF0ZVNwb3RNYXJrZXRBc3NldFRpZXIiLCJhc3NldFRpZXIiLCJ1cGRhdGVTcG90TWFya2V0U3RhdHVzIiwibWFya2V0U3RhdHVzIiwidXBkYXRlUGVycE1hcmtldFN0YXR1cyIsInVwZGF0ZVBlcnBNYXJrZXRDb250cmFjdFRpZXIiLCJjb250cmFjdFRpZXIiLCJ1cGRhdGVFeGNoYW5nZVN0YXR1cyIsImV4Y2hhbmdlU3RhdHVzIiwidXBkYXRlUGVycEF1Y3Rpb25EdXJhdGlvbiIsIm1pbkR1cmF0aW9uIiwidG9OdW1iZXIiLCJ1cGRhdGVTcG90QXVjdGlvbkR1cmF0aW9uIiwiZGVmYXVsdEF1Y3Rpb25EdXJhdGlvbiIsInVwZGF0ZVBlcnBNYXJrZXRNYXhGaWxsUmVzZXJ2ZUZyYWN0aW9uIiwibWF4QmFzZUFzc2V0QW1vdW50UmF0aW8iLCJ1cGRhdGVNYXhTbGlwcGFnZVJhdGlvIiwibWF4U2xpcHBhZ2VSYXRpbyIsInVwZGF0ZVBlcnBNYXJrZXRVbnJlYWxpemVkQXNzZXRXZWlnaHQiLCJ1bnJlYWxpemVkSW5pdGlhbEFzc2V0V2VpZ2h0IiwidW5yZWFsaXplZE1haW50ZW5hbmNlQXNzZXRXZWlnaHQiLCJ1cGRhdGVQZXJwTWFya2V0TWF4SW1iYWxhbmNlcyIsInVucmVhbGl6ZWRNYXhJbWJhbGFuY2UiLCJtYXhSZXZlbnVlV2l0aGRyYXdQZXJQZXJpb2QiLCJxdW90ZU1heEluc3VyYW5jZSIsInVwZGF0ZVBlcnBNYXJrZXRNYXhPcGVuSW50ZXJlc3QiLCJtYXhPcGVuSW50ZXJlc3QiLCJ1cGRhdGVTZXJ1bVZhdWx0Iiwic3JtVmF1bHQiLCJ1cGRhdGVQZXJwTWFya2V0TGlxdWlkYXRpb25GZWUiLCJpZkxpcXVpZGF0aW9uRmVlIiwidXBkYXRlU3BvdE1hcmtldExpcXVpZGF0aW9uRmVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/adminClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js":
/*!***********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/assert/assert.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.assert = void 0;\nfunction assert(condition, error) {\n    if (!condition) {\n        throw new Error(error || \"Unspecified AssertionError\");\n    }\n}\nexports.assert = assert;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hc3NlcnQvYXNzZXJ0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxjQUFjLEdBQUcsS0FBSztBQUN0QixTQUFTRSxPQUFPQyxTQUFTLEVBQUVDLEtBQUs7SUFDNUIsSUFBSSxDQUFDRCxXQUFXO1FBQ1osTUFBTSxJQUFJRSxNQUFNRCxTQUFTO0lBQzdCO0FBQ0o7QUFDQUosY0FBYyxHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hc3NlcnQvYXNzZXJ0LmpzPzM0YjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmFzc2VydCA9IHZvaWQgMDtcbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIGVycm9yKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yIHx8ICdVbnNwZWNpZmllZCBBc3NlcnRpb25FcnJvcicpO1xuICAgIH1cbn1cbmV4cG9ydHMuYXNzZXJ0ID0gYXNzZXJ0O1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiYXNzZXJ0IiwiY29uZGl0aW9uIiwiZXJyb3IiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/auctionSubscriber.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/auctionSubscriber/auctionSubscriber.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.AuctionSubscriber = void 0;\nconst memcmp_1 = __webpack_require__(/*! ../memcmp */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nclass AuctionSubscriber {\n    constructor({ driftClient, opts }){\n        this.driftClient = driftClient;\n        this.opts = opts || this.driftClient.opts;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        this.websocketId = this.driftClient.connection.onProgramAccountChange(this.driftClient.program.programId, (keyAccountInfo, context)=>{\n            const userAccount = this.driftClient.program.account.user.coder.accounts.decode(\"User\", keyAccountInfo.accountInfo.data);\n            this.eventEmitter.emit(\"onAccountUpdate\", userAccount, keyAccountInfo.accountId, context.slot);\n        }, this.driftClient.opts.commitment, [\n            (0, memcmp_1.getUserFilter)(),\n            (0, memcmp_1.getUserWithAuctionFilter)()\n        ]);\n    }\n    async unsubscribe() {\n        if (this.websocketId) {\n            await this.driftClient.connection.removeProgramAccountChangeListener(this.websocketId);\n        }\n    }\n}\nexports.AuctionSubscriber = AuctionSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hdWN0aW9uU3Vic2NyaWJlci9hdWN0aW9uU3Vic2NyaWJlci5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxXQUFXQyxtQkFBT0EsQ0FBQyxxRUFBVztBQUNwQyxNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRjtJQUNGSSxZQUFZLEVBQUVDLFdBQVcsRUFBRUMsSUFBSSxFQUFFLENBQUU7UUFDL0IsSUFBSSxDQUFDRCxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsSUFBSSxHQUFHQSxRQUFRLElBQUksQ0FBQ0QsV0FBVyxDQUFDQyxJQUFJO1FBQ3pDLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUlKLFNBQVNLLFlBQVk7SUFDakQ7SUFDQSxNQUFNQyxZQUFZO1FBQ2QsSUFBSSxDQUFDQyxXQUFXLEdBQUcsSUFBSSxDQUFDTCxXQUFXLENBQUNNLFVBQVUsQ0FBQ0Msc0JBQXNCLENBQUMsSUFBSSxDQUFDUCxXQUFXLENBQUNRLE9BQU8sQ0FBQ0MsU0FBUyxFQUFFLENBQUNDLGdCQUFnQkM7WUFDdkgsTUFBTUMsY0FBYyxJQUFJLENBQUNaLFdBQVcsQ0FBQ1EsT0FBTyxDQUFDSyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxRQUFRUCxlQUFlUSxXQUFXLENBQUNDLElBQUk7WUFDdkgsSUFBSSxDQUFDakIsWUFBWSxDQUFDa0IsSUFBSSxDQUFDLG1CQUFtQlIsYUFBYUYsZUFBZVcsU0FBUyxFQUFFVixRQUFRVyxJQUFJO1FBQ2pHLEdBQUcsSUFBSSxDQUFDdEIsV0FBVyxDQUFDQyxJQUFJLENBQUNzQixVQUFVLEVBQUU7WUFBRSxJQUFHM0IsU0FBUzRCLGFBQWE7WUFBTSxJQUFHNUIsU0FBUzZCLHdCQUF3QjtTQUFJO0lBQ2xIO0lBQ0EsTUFBTUMsY0FBYztRQUNoQixJQUFJLElBQUksQ0FBQ3JCLFdBQVcsRUFBRTtZQUNsQixNQUFNLElBQUksQ0FBQ0wsV0FBVyxDQUFDTSxVQUFVLENBQUNxQixrQ0FBa0MsQ0FBQyxJQUFJLENBQUN0QixXQUFXO1FBQ3pGO0lBQ0o7QUFDSjtBQUNBWix5QkFBeUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvYXVjdGlvblN1YnNjcmliZXIvYXVjdGlvblN1YnNjcmliZXIuanM/NzAyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQXVjdGlvblN1YnNjcmliZXIgPSB2b2lkIDA7XG5jb25zdCBtZW1jbXBfMSA9IHJlcXVpcmUoXCIuLi9tZW1jbXBcIik7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XG5jbGFzcyBBdWN0aW9uU3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IoeyBkcmlmdENsaWVudCwgb3B0cyB9KSB7XG4gICAgICAgIHRoaXMuZHJpZnRDbGllbnQgPSBkcmlmdENsaWVudDtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cyB8fCB0aGlzLmRyaWZ0Q2xpZW50Lm9wdHM7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gbmV3IGV2ZW50c18xLkV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBhc3luYyBzdWJzY3JpYmUoKSB7XG4gICAgICAgIHRoaXMud2Vic29ja2V0SWQgPSB0aGlzLmRyaWZ0Q2xpZW50LmNvbm5lY3Rpb24ub25Qcm9ncmFtQWNjb3VudENoYW5nZSh0aGlzLmRyaWZ0Q2xpZW50LnByb2dyYW0ucHJvZ3JhbUlkLCAoa2V5QWNjb3VudEluZm8sIGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJBY2NvdW50ID0gdGhpcy5kcmlmdENsaWVudC5wcm9ncmFtLmFjY291bnQudXNlci5jb2Rlci5hY2NvdW50cy5kZWNvZGUoJ1VzZXInLCBrZXlBY2NvdW50SW5mby5hY2NvdW50SW5mby5kYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ29uQWNjb3VudFVwZGF0ZScsIHVzZXJBY2NvdW50LCBrZXlBY2NvdW50SW5mby5hY2NvdW50SWQsIGNvbnRleHQuc2xvdCk7XG4gICAgICAgIH0sIHRoaXMuZHJpZnRDbGllbnQub3B0cy5jb21taXRtZW50LCBbKDAsIG1lbWNtcF8xLmdldFVzZXJGaWx0ZXIpKCksICgwLCBtZW1jbXBfMS5nZXRVc2VyV2l0aEF1Y3Rpb25GaWx0ZXIpKCldKTtcbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICh0aGlzLndlYnNvY2tldElkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRyaWZ0Q2xpZW50LmNvbm5lY3Rpb24ucmVtb3ZlUHJvZ3JhbUFjY291bnRDaGFuZ2VMaXN0ZW5lcih0aGlzLndlYnNvY2tldElkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuQXVjdGlvblN1YnNjcmliZXIgPSBBdWN0aW9uU3Vic2NyaWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkF1Y3Rpb25TdWJzY3JpYmVyIiwibWVtY21wXzEiLCJyZXF1aXJlIiwiZXZlbnRzXzEiLCJjb25zdHJ1Y3RvciIsImRyaWZ0Q2xpZW50Iiwib3B0cyIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmliZSIsIndlYnNvY2tldElkIiwiY29ubmVjdGlvbiIsIm9uUHJvZ3JhbUFjY291bnRDaGFuZ2UiLCJwcm9ncmFtIiwicHJvZ3JhbUlkIiwia2V5QWNjb3VudEluZm8iLCJjb250ZXh0IiwidXNlckFjY291bnQiLCJhY2NvdW50IiwidXNlciIsImNvZGVyIiwiYWNjb3VudHMiLCJkZWNvZGUiLCJhY2NvdW50SW5mbyIsImRhdGEiLCJlbWl0IiwiYWNjb3VudElkIiwic2xvdCIsImNvbW1pdG1lbnQiLCJnZXRVc2VyRmlsdGVyIiwiZ2V0VXNlcldpdGhBdWN0aW9uRmlsdGVyIiwidW5zdWJzY3JpYmUiLCJyZW1vdmVQcm9ncmFtQWNjb3VudENoYW5nZUxpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/auctionSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/auctionSubscriber/index.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __exportStar = (void 0) && (void 0).__exportStar || function(m, exports1) {\n    for(var p in m)if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports1, p)) __createBinding(exports1, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n__exportStar(__webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./auctionSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/auctionSubscriber.js\"), exports);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hdWN0aW9uU3Vic2NyaWJlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBTUMsQ0FBQUEsT0FBT0MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0IsSUFBSUcsT0FBT1AsT0FBT1Esd0JBQXdCLENBQUNMLEdBQUdDO0lBQzlDLElBQUksQ0FBQ0csUUFBUyxVQUFTQSxPQUFPLENBQUNKLEVBQUVNLFVBQVUsR0FBR0YsS0FBS0csUUFBUSxJQUFJSCxLQUFLSSxZQUFZLEdBQUc7UUFDakZKLE9BQU87WUFBRUssWUFBWTtZQUFNQyxLQUFLO2dCQUFhLE9BQU9WLENBQUMsQ0FBQ0MsRUFBRTtZQUFFO1FBQUU7SUFDOUQ7SUFDQUosT0FBT2MsY0FBYyxDQUFDWixHQUFHRyxJQUFJRTtBQUNqQyxJQUFNLFNBQVNMLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDdEIsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JGLENBQUMsQ0FBQ0csR0FBRyxHQUFHRixDQUFDLENBQUNDLEVBQUU7QUFDaEIsQ0FBQztBQUNELElBQUlXLGVBQWUsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxZQUFZLElBQUssU0FBU1osQ0FBQyxFQUFFYSxRQUFPO0lBQ2pFLElBQUssSUFBSUMsS0FBS2QsRUFBRyxJQUFJYyxNQUFNLGFBQWEsQ0FBQ2pCLE9BQU9rQixTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDSixVQUFTQyxJQUFJbEIsZ0JBQWdCaUIsVUFBU2IsR0FBR2M7QUFDM0g7QUFDQWpCLDhDQUE2QztJQUFFcUIsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3RE4sYUFBYU8sbUJBQU9BLENBQUMsb0ZBQVMsR0FBR047QUFDakNELGFBQWFPLG1CQUFPQSxDQUFDLDRHQUFxQixHQUFHTiIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hdWN0aW9uU3Vic2NyaWJlci9pbmRleC5qcz9kM2RhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdHlwZXNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2F1Y3Rpb25TdWJzY3JpYmVyXCIpLCBleHBvcnRzKTtcbiJdLCJuYW1lcyI6WyJfX2NyZWF0ZUJpbmRpbmciLCJPYmplY3QiLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsInVuZGVmaW5lZCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfX2VzTW9kdWxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZGVmaW5lUHJvcGVydHkiLCJfX2V4cG9ydFN0YXIiLCJleHBvcnRzIiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInZhbHVlIiwicmVxdWlyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/types.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/auctionSubscriber/types.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hdWN0aW9uU3Vic2NyaWJlci90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9hdWN0aW9uU3Vic2NyaWJlci90eXBlcy5qcz82ZjFjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/config.js":
/*!****************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/config.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.findAllMarketAndOracles = exports.getMarketsAndOraclesForSubscription = exports.initialize = exports.getConfig = exports.configs = exports.DRIFT_PROGRAM_ID = void 0;\nconst perpMarkets_1 = __webpack_require__(/*! ./constants/perpMarkets */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/perpMarkets.js\");\nconst spotMarkets_1 = __webpack_require__(/*! ./constants/spotMarkets */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/spotMarkets.js\");\nexports.DRIFT_PROGRAM_ID = \"dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH\";\nexports.configs = {\n    devnet: {\n        ENV: \"devnet\",\n        PYTH_ORACLE_MAPPING_ADDRESS: \"BmA9Z6FjioHJPpjT39QazZyhDRUdZy2ezwx4GiDdE2u2\",\n        DRIFT_PROGRAM_ID: exports.DRIFT_PROGRAM_ID,\n        USDC_MINT_ADDRESS: \"8zGuJQqwhZafTah7Uc7Z4tXRnguqkn5KLFAP8oV6PHe2\",\n        SERUM_V3: \"DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY\",\n        PHOENIX: \"PhoeNiXZ8ByJGLkxNfZRnkUfjvmuYqLR89jjFHGqdXY\",\n        V2_ALPHA_TICKET_MINT_ADDRESS: \"DeEiGWfCMP9psnLGkxGrBBMEAW5Jv8bBGMN8DCtFRCyB\",\n        PERP_MARKETS: perpMarkets_1.DevnetPerpMarkets,\n        SPOT_MARKETS: spotMarkets_1.DevnetSpotMarkets,\n        MARKET_LOOKUP_TABLE: \"FaMS3U4uBojvGn5FSDEPimddcXsCfwkKsFgMVVnDdxGb\"\n    },\n    \"mainnet-beta\": {\n        ENV: \"mainnet-beta\",\n        PYTH_ORACLE_MAPPING_ADDRESS: \"AHtgzX45WTKfkPG53L6WYhGEXwQkN1BVknET3sVsLL8J\",\n        DRIFT_PROGRAM_ID: exports.DRIFT_PROGRAM_ID,\n        USDC_MINT_ADDRESS: \"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\",\n        SERUM_V3: \"srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX\",\n        PHOENIX: \"PhoeNiXZ8ByJGLkxNfZRnkUfjvmuYqLR89jjFHGqdXY\",\n        V2_ALPHA_TICKET_MINT_ADDRESS: \"Cmvhycb6LQvvzaShGw4iDHRLzeSSryioAsU98DSSkMNa\",\n        PERP_MARKETS: perpMarkets_1.MainnetPerpMarkets,\n        SPOT_MARKETS: spotMarkets_1.MainnetSpotMarkets,\n        MARKET_LOOKUP_TABLE: \"D9cnvzswDikQDf53k4HpQ3KJ9y1Fv3HGGDFYMXnK5T6c\"\n    }\n};\nlet currentConfig = exports.configs.devnet;\nconst getConfig = ()=>currentConfig;\nexports.getConfig = getConfig;\n/**\n * Allows customization of the SDK's environment and endpoints. You can pass individual settings to override the settings with your own presets.\n *\n * Defaults to master environment if you don't use this function.\n * @param props\n * @returns\n */ const initialize = (props)=>{\n    var _a, _b;\n    //@ts-ignore\n    if (props.env === \"master\") return {\n        ...exports.configs[\"devnet\"],\n        ...(_a = props.overrideEnv) !== null && _a !== void 0 ? _a : {}\n    };\n    currentConfig = {\n        ...exports.configs[props.env],\n        ...(_b = props.overrideEnv) !== null && _b !== void 0 ? _b : {}\n    };\n    return currentConfig;\n};\nexports.initialize = initialize;\nfunction getMarketsAndOraclesForSubscription(env) {\n    const perpMarketIndexes = [];\n    const spotMarketIndexes = [];\n    const oracleInfos = new Map();\n    for (const market of perpMarkets_1.PerpMarkets[env]){\n        perpMarketIndexes.push(market.marketIndex);\n        oracleInfos.set(market.oracle.toString(), {\n            publicKey: market.oracle,\n            source: market.oracleSource\n        });\n    }\n    for (const spotMarket of spotMarkets_1.SpotMarkets[env]){\n        spotMarketIndexes.push(spotMarket.marketIndex);\n        oracleInfos.set(spotMarket.oracle.toString(), {\n            publicKey: spotMarket.oracle,\n            source: spotMarket.oracleSource\n        });\n    }\n    return {\n        perpMarketIndexes: perpMarketIndexes,\n        spotMarketIndexes: spotMarketIndexes,\n        oracleInfos: Array.from(oracleInfos.values())\n    };\n}\nexports.getMarketsAndOraclesForSubscription = getMarketsAndOraclesForSubscription;\nasync function findAllMarketAndOracles(program) {\n    const perpMarketIndexes = [];\n    const spotMarketIndexes = [];\n    const oracleInfos = new Map();\n    const perpMarketProgramAccounts = await program.account.perpMarket.all();\n    const spotMarketProgramAccounts = await program.account.spotMarket.all();\n    for (const perpMarketProgramAccount of perpMarketProgramAccounts){\n        const perpMarket = perpMarketProgramAccount.account;\n        perpMarketIndexes.push(perpMarket.marketIndex);\n        oracleInfos.set(perpMarket.amm.oracle.toString(), {\n            publicKey: perpMarket.amm.oracle,\n            source: perpMarket.amm.oracleSource\n        });\n    }\n    for (const spotMarketProgramAccount of spotMarketProgramAccounts){\n        const spotMarket = spotMarketProgramAccount.account;\n        spotMarketIndexes.push(spotMarket.marketIndex);\n        oracleInfos.set(spotMarket.oracle.toString(), {\n            publicKey: spotMarket.oracle,\n            source: spotMarket.oracleSource\n        });\n    }\n    return {\n        perpMarketIndexes,\n        spotMarketIndexes,\n        oracleInfos: Array.from(oracleInfos.values())\n    };\n}\nexports.findAllMarketAndOracles = findAllMarketAndOracles;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9jb25maWcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELCtCQUErQixHQUFHQSwyQ0FBMkMsR0FBR0Esa0JBQWtCLEdBQUdBLGlCQUFpQixHQUFHQSxlQUFlLEdBQUdBLHdCQUF3QixHQUFHLEtBQUs7QUFDM0ssTUFBTVEsZ0JBQWdCQyxtQkFBT0EsQ0FBQyxrR0FBeUI7QUFDdkQsTUFBTUMsZ0JBQWdCRCxtQkFBT0EsQ0FBQyxrR0FBeUI7QUFDdkRULHdCQUF3QixHQUFHO0FBQzNCQSxlQUFlLEdBQUc7SUFDZFcsUUFBUTtRQUNKQyxLQUFLO1FBQ0xDLDZCQUE2QjtRQUM3Qk4sa0JBQWtCUCxRQUFRTyxnQkFBZ0I7UUFDMUNPLG1CQUFtQjtRQUNuQkMsVUFBVTtRQUNWQyxTQUFTO1FBQ1RDLDhCQUE4QjtRQUM5QkMsY0FBY1YsY0FBY1csaUJBQWlCO1FBQzdDQyxjQUFjVixjQUFjVyxpQkFBaUI7UUFDN0NDLHFCQUFxQjtJQUN6QjtJQUNBLGdCQUFnQjtRQUNaVixLQUFLO1FBQ0xDLDZCQUE2QjtRQUM3Qk4sa0JBQWtCUCxRQUFRTyxnQkFBZ0I7UUFDMUNPLG1CQUFtQjtRQUNuQkMsVUFBVTtRQUNWQyxTQUFTO1FBQ1RDLDhCQUE4QjtRQUM5QkMsY0FBY1YsY0FBY2Usa0JBQWtCO1FBQzlDSCxjQUFjVixjQUFjYyxrQkFBa0I7UUFDOUNGLHFCQUFxQjtJQUN6QjtBQUNKO0FBQ0EsSUFBSUcsZ0JBQWdCekIsUUFBUU0sT0FBTyxDQUFDSyxNQUFNO0FBQzFDLE1BQU1OLFlBQVksSUFBTW9CO0FBQ3hCekIsaUJBQWlCLEdBQUdLO0FBQ3BCOzs7Ozs7Q0FNQyxHQUNELE1BQU1ELGFBQWEsQ0FBQ3NCO0lBQ2hCLElBQUlDLElBQUlDO0lBQ1IsWUFBWTtJQUNaLElBQUlGLE1BQU1HLEdBQUcsS0FBSyxVQUNkLE9BQU87UUFBRSxHQUFHN0IsUUFBUU0sT0FBTyxDQUFDLFNBQVM7UUFBRSxHQUFJLENBQUNxQixLQUFLRCxNQUFNSSxXQUFXLE1BQU0sUUFBUUgsT0FBTyxLQUFLLElBQUlBLEtBQUssQ0FBQyxDQUFDO0lBQUU7SUFDN0dGLGdCQUFnQjtRQUFFLEdBQUd6QixRQUFRTSxPQUFPLENBQUNvQixNQUFNRyxHQUFHLENBQUM7UUFBRSxHQUFJLENBQUNELEtBQUtGLE1BQU1JLFdBQVcsTUFBTSxRQUFRRixPQUFPLEtBQUssSUFBSUEsS0FBSyxDQUFDLENBQUM7SUFBRTtJQUNuSCxPQUFPSDtBQUNYO0FBQ0F6QixrQkFBa0IsR0FBR0k7QUFDckIsU0FBU0Qsb0NBQW9DMEIsR0FBRztJQUM1QyxNQUFNRSxvQkFBb0IsRUFBRTtJQUM1QixNQUFNQyxvQkFBb0IsRUFBRTtJQUM1QixNQUFNQyxjQUFjLElBQUlDO0lBQ3hCLEtBQUssTUFBTUMsVUFBVTNCLGNBQWM0QixXQUFXLENBQUNQLElBQUksQ0FBRTtRQUNqREUsa0JBQWtCTSxJQUFJLENBQUNGLE9BQU9HLFdBQVc7UUFDekNMLFlBQVlNLEdBQUcsQ0FBQ0osT0FBT0ssTUFBTSxDQUFDQyxRQUFRLElBQUk7WUFDdENDLFdBQVdQLE9BQU9LLE1BQU07WUFDeEJHLFFBQVFSLE9BQU9TLFlBQVk7UUFDL0I7SUFDSjtJQUNBLEtBQUssTUFBTUMsY0FBY25DLGNBQWNvQyxXQUFXLENBQUNqQixJQUFJLENBQUU7UUFDckRHLGtCQUFrQkssSUFBSSxDQUFDUSxXQUFXUCxXQUFXO1FBQzdDTCxZQUFZTSxHQUFHLENBQUNNLFdBQVdMLE1BQU0sQ0FBQ0MsUUFBUSxJQUFJO1lBQzFDQyxXQUFXRyxXQUFXTCxNQUFNO1lBQzVCRyxRQUFRRSxXQUFXRCxZQUFZO1FBQ25DO0lBQ0o7SUFDQSxPQUFPO1FBQ0hiLG1CQUFtQkE7UUFDbkJDLG1CQUFtQkE7UUFDbkJDLGFBQWFjLE1BQU1DLElBQUksQ0FBQ2YsWUFBWWdCLE1BQU07SUFDOUM7QUFDSjtBQUNBakQsMkNBQTJDLEdBQUdHO0FBQzlDLGVBQWVELHdCQUF3QmdELE9BQU87SUFDMUMsTUFBTW5CLG9CQUFvQixFQUFFO0lBQzVCLE1BQU1DLG9CQUFvQixFQUFFO0lBQzVCLE1BQU1DLGNBQWMsSUFBSUM7SUFDeEIsTUFBTWlCLDRCQUE2QixNQUFNRCxRQUFRRSxPQUFPLENBQUNDLFVBQVUsQ0FBQ0MsR0FBRztJQUN2RSxNQUFNQyw0QkFBNkIsTUFBTUwsUUFBUUUsT0FBTyxDQUFDUCxVQUFVLENBQUNTLEdBQUc7SUFDdkUsS0FBSyxNQUFNRSw0QkFBNEJMLDBCQUEyQjtRQUM5RCxNQUFNRSxhQUFhRyx5QkFBeUJKLE9BQU87UUFDbkRyQixrQkFBa0JNLElBQUksQ0FBQ2dCLFdBQVdmLFdBQVc7UUFDN0NMLFlBQVlNLEdBQUcsQ0FBQ2MsV0FBV0ksR0FBRyxDQUFDakIsTUFBTSxDQUFDQyxRQUFRLElBQUk7WUFDOUNDLFdBQVdXLFdBQVdJLEdBQUcsQ0FBQ2pCLE1BQU07WUFDaENHLFFBQVFVLFdBQVdJLEdBQUcsQ0FBQ2IsWUFBWTtRQUN2QztJQUNKO0lBQ0EsS0FBSyxNQUFNYyw0QkFBNEJILDBCQUEyQjtRQUM5RCxNQUFNVixhQUFhYSx5QkFBeUJOLE9BQU87UUFDbkRwQixrQkFBa0JLLElBQUksQ0FBQ1EsV0FBV1AsV0FBVztRQUM3Q0wsWUFBWU0sR0FBRyxDQUFDTSxXQUFXTCxNQUFNLENBQUNDLFFBQVEsSUFBSTtZQUMxQ0MsV0FBV0csV0FBV0wsTUFBTTtZQUM1QkcsUUFBUUUsV0FBV0QsWUFBWTtRQUNuQztJQUNKO0lBQ0EsT0FBTztRQUNIYjtRQUNBQztRQUNBQyxhQUFhYyxNQUFNQyxJQUFJLENBQUNmLFlBQVlnQixNQUFNO0lBQzlDO0FBQ0o7QUFDQWpELCtCQUErQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9jb25maWcuanM/NDViMyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZmluZEFsbE1hcmtldEFuZE9yYWNsZXMgPSBleHBvcnRzLmdldE1hcmtldHNBbmRPcmFjbGVzRm9yU3Vic2NyaXB0aW9uID0gZXhwb3J0cy5pbml0aWFsaXplID0gZXhwb3J0cy5nZXRDb25maWcgPSBleHBvcnRzLmNvbmZpZ3MgPSBleHBvcnRzLkRSSUZUX1BST0dSQU1fSUQgPSB2b2lkIDA7XG5jb25zdCBwZXJwTWFya2V0c18xID0gcmVxdWlyZShcIi4vY29uc3RhbnRzL3BlcnBNYXJrZXRzXCIpO1xuY29uc3Qgc3BvdE1hcmtldHNfMSA9IHJlcXVpcmUoXCIuL2NvbnN0YW50cy9zcG90TWFya2V0c1wiKTtcbmV4cG9ydHMuRFJJRlRfUFJPR1JBTV9JRCA9ICdkUmlmdHlIQTM5TVdFaTNtOWF1bmM1TXpSRjFKWXVCc2JuNlZQY24zM1VIJztcbmV4cG9ydHMuY29uZmlncyA9IHtcbiAgICBkZXZuZXQ6IHtcbiAgICAgICAgRU5WOiAnZGV2bmV0JyxcbiAgICAgICAgUFlUSF9PUkFDTEVfTUFQUElOR19BRERSRVNTOiAnQm1BOVo2Rmppb0hKUHBqVDM5UWF6WnloRFJVZFp5MmV6d3g0R2lEZEUydTInLFxuICAgICAgICBEUklGVF9QUk9HUkFNX0lEOiBleHBvcnRzLkRSSUZUX1BST0dSQU1fSUQsXG4gICAgICAgIFVTRENfTUlOVF9BRERSRVNTOiAnOHpHdUpRcXdoWmFmVGFoN1VjN1o0dFhSbmd1cWtuNUtMRkFQOG9WNlBIZTInLFxuICAgICAgICBTRVJVTV9WMzogJ0RFU1ZnSlZHYWpFZ0tHWGhiNlhtcURIR3ozVmpkZ1A3ckVWRVNCZ3htcm9ZJyxcbiAgICAgICAgUEhPRU5JWDogJ1Bob2VOaVhaOEJ5SkdMa3hOZlpSbmtVZmp2bXVZcUxSODlqakZIR3FkWFknLFxuICAgICAgICBWMl9BTFBIQV9USUNLRVRfTUlOVF9BRERSRVNTOiAnRGVFaUdXZkNNUDlwc25MR2t4R3JCQk1FQVc1SnY4YkJHTU44REN0RlJDeUInLFxuICAgICAgICBQRVJQX01BUktFVFM6IHBlcnBNYXJrZXRzXzEuRGV2bmV0UGVycE1hcmtldHMsXG4gICAgICAgIFNQT1RfTUFSS0VUUzogc3BvdE1hcmtldHNfMS5EZXZuZXRTcG90TWFya2V0cyxcbiAgICAgICAgTUFSS0VUX0xPT0tVUF9UQUJMRTogJ0ZhTVMzVTR1Qm9qdkduNUZTREVQaW1kZGNYc0Nmd2tLc0ZnTVZWbkRkeEdiJyxcbiAgICB9LFxuICAgICdtYWlubmV0LWJldGEnOiB7XG4gICAgICAgIEVOVjogJ21haW5uZXQtYmV0YScsXG4gICAgICAgIFBZVEhfT1JBQ0xFX01BUFBJTkdfQUREUkVTUzogJ0FIdGd6WDQ1V1RLZmtQRzUzTDZXWWhHRVh3UWtOMUJWa25FVDNzVnNMTDhKJyxcbiAgICAgICAgRFJJRlRfUFJPR1JBTV9JRDogZXhwb3J0cy5EUklGVF9QUk9HUkFNX0lELFxuICAgICAgICBVU0RDX01JTlRfQUREUkVTUzogJ0VQakZXZGQ1QXVmcVNTcWVNMnFOMXh6eWJhcEM4RzR3RUdHa1p3eVREdDF2JyxcbiAgICAgICAgU0VSVU1fVjM6ICdzcm1xUHZ5bUplRktRNHpHUWVkMUdGcHBna1JITDlrYUVMQ2J5a3NKdFBYJyxcbiAgICAgICAgUEhPRU5JWDogJ1Bob2VOaVhaOEJ5SkdMa3hOZlpSbmtVZmp2bXVZcUxSODlqakZIR3FkWFknLFxuICAgICAgICBWMl9BTFBIQV9USUNLRVRfTUlOVF9BRERSRVNTOiAnQ212aHljYjZMUXZ2emFTaEd3NGlESFJMemVTU3J5aW9Bc1U5OERTU2tNTmEnLFxuICAgICAgICBQRVJQX01BUktFVFM6IHBlcnBNYXJrZXRzXzEuTWFpbm5ldFBlcnBNYXJrZXRzLFxuICAgICAgICBTUE9UX01BUktFVFM6IHNwb3RNYXJrZXRzXzEuTWFpbm5ldFNwb3RNYXJrZXRzLFxuICAgICAgICBNQVJLRVRfTE9PS1VQX1RBQkxFOiAnRDljbnZ6c3dEaWtRRGY1M2s0SHBRM0tKOXkxRnYzSEdHREZZTVhuSzVUNmMnLFxuICAgIH0sXG59O1xubGV0IGN1cnJlbnRDb25maWcgPSBleHBvcnRzLmNvbmZpZ3MuZGV2bmV0O1xuY29uc3QgZ2V0Q29uZmlnID0gKCkgPT4gY3VycmVudENvbmZpZztcbmV4cG9ydHMuZ2V0Q29uZmlnID0gZ2V0Q29uZmlnO1xuLyoqXG4gKiBBbGxvd3MgY3VzdG9taXphdGlvbiBvZiB0aGUgU0RLJ3MgZW52aXJvbm1lbnQgYW5kIGVuZHBvaW50cy4gWW91IGNhbiBwYXNzIGluZGl2aWR1YWwgc2V0dGluZ3MgdG8gb3ZlcnJpZGUgdGhlIHNldHRpbmdzIHdpdGggeW91ciBvd24gcHJlc2V0cy5cbiAqXG4gKiBEZWZhdWx0cyB0byBtYXN0ZXIgZW52aXJvbm1lbnQgaWYgeW91IGRvbid0IHVzZSB0aGlzIGZ1bmN0aW9uLlxuICogQHBhcmFtIHByb3BzXG4gKiBAcmV0dXJuc1xuICovXG5jb25zdCBpbml0aWFsaXplID0gKHByb3BzKSA9PiB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICAvL0B0cy1pZ25vcmVcbiAgICBpZiAocHJvcHMuZW52ID09PSAnbWFzdGVyJylcbiAgICAgICAgcmV0dXJuIHsgLi4uZXhwb3J0cy5jb25maWdzWydkZXZuZXQnXSwgLi4uKChfYSA9IHByb3BzLm92ZXJyaWRlRW52KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fSkgfTtcbiAgICBjdXJyZW50Q29uZmlnID0geyAuLi5leHBvcnRzLmNvbmZpZ3NbcHJvcHMuZW52XSwgLi4uKChfYiA9IHByb3BzLm92ZXJyaWRlRW52KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB7fSkgfTtcbiAgICByZXR1cm4gY3VycmVudENvbmZpZztcbn07XG5leHBvcnRzLmluaXRpYWxpemUgPSBpbml0aWFsaXplO1xuZnVuY3Rpb24gZ2V0TWFya2V0c0FuZE9yYWNsZXNGb3JTdWJzY3JpcHRpb24oZW52KSB7XG4gICAgY29uc3QgcGVycE1hcmtldEluZGV4ZXMgPSBbXTtcbiAgICBjb25zdCBzcG90TWFya2V0SW5kZXhlcyA9IFtdO1xuICAgIGNvbnN0IG9yYWNsZUluZm9zID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgbWFya2V0IG9mIHBlcnBNYXJrZXRzXzEuUGVycE1hcmtldHNbZW52XSkge1xuICAgICAgICBwZXJwTWFya2V0SW5kZXhlcy5wdXNoKG1hcmtldC5tYXJrZXRJbmRleCk7XG4gICAgICAgIG9yYWNsZUluZm9zLnNldChtYXJrZXQub3JhY2xlLnRvU3RyaW5nKCksIHtcbiAgICAgICAgICAgIHB1YmxpY0tleTogbWFya2V0Lm9yYWNsZSxcbiAgICAgICAgICAgIHNvdXJjZTogbWFya2V0Lm9yYWNsZVNvdXJjZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc3BvdE1hcmtldCBvZiBzcG90TWFya2V0c18xLlNwb3RNYXJrZXRzW2Vudl0pIHtcbiAgICAgICAgc3BvdE1hcmtldEluZGV4ZXMucHVzaChzcG90TWFya2V0Lm1hcmtldEluZGV4KTtcbiAgICAgICAgb3JhY2xlSW5mb3Muc2V0KHNwb3RNYXJrZXQub3JhY2xlLnRvU3RyaW5nKCksIHtcbiAgICAgICAgICAgIHB1YmxpY0tleTogc3BvdE1hcmtldC5vcmFjbGUsXG4gICAgICAgICAgICBzb3VyY2U6IHNwb3RNYXJrZXQub3JhY2xlU291cmNlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGVycE1hcmtldEluZGV4ZXM6IHBlcnBNYXJrZXRJbmRleGVzLFxuICAgICAgICBzcG90TWFya2V0SW5kZXhlczogc3BvdE1hcmtldEluZGV4ZXMsXG4gICAgICAgIG9yYWNsZUluZm9zOiBBcnJheS5mcm9tKG9yYWNsZUluZm9zLnZhbHVlcygpKSxcbiAgICB9O1xufVxuZXhwb3J0cy5nZXRNYXJrZXRzQW5kT3JhY2xlc0ZvclN1YnNjcmlwdGlvbiA9IGdldE1hcmtldHNBbmRPcmFjbGVzRm9yU3Vic2NyaXB0aW9uO1xuYXN5bmMgZnVuY3Rpb24gZmluZEFsbE1hcmtldEFuZE9yYWNsZXMocHJvZ3JhbSkge1xuICAgIGNvbnN0IHBlcnBNYXJrZXRJbmRleGVzID0gW107XG4gICAgY29uc3Qgc3BvdE1hcmtldEluZGV4ZXMgPSBbXTtcbiAgICBjb25zdCBvcmFjbGVJbmZvcyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBwZXJwTWFya2V0UHJvZ3JhbUFjY291bnRzID0gKGF3YWl0IHByb2dyYW0uYWNjb3VudC5wZXJwTWFya2V0LmFsbCgpKTtcbiAgICBjb25zdCBzcG90TWFya2V0UHJvZ3JhbUFjY291bnRzID0gKGF3YWl0IHByb2dyYW0uYWNjb3VudC5zcG90TWFya2V0LmFsbCgpKTtcbiAgICBmb3IgKGNvbnN0IHBlcnBNYXJrZXRQcm9ncmFtQWNjb3VudCBvZiBwZXJwTWFya2V0UHJvZ3JhbUFjY291bnRzKSB7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXQgPSBwZXJwTWFya2V0UHJvZ3JhbUFjY291bnQuYWNjb3VudDtcbiAgICAgICAgcGVycE1hcmtldEluZGV4ZXMucHVzaChwZXJwTWFya2V0Lm1hcmtldEluZGV4KTtcbiAgICAgICAgb3JhY2xlSW5mb3Muc2V0KHBlcnBNYXJrZXQuYW1tLm9yYWNsZS50b1N0cmluZygpLCB7XG4gICAgICAgICAgICBwdWJsaWNLZXk6IHBlcnBNYXJrZXQuYW1tLm9yYWNsZSxcbiAgICAgICAgICAgIHNvdXJjZTogcGVycE1hcmtldC5hbW0ub3JhY2xlU291cmNlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBzcG90TWFya2V0UHJvZ3JhbUFjY291bnQgb2Ygc3BvdE1hcmtldFByb2dyYW1BY2NvdW50cykge1xuICAgICAgICBjb25zdCBzcG90TWFya2V0ID0gc3BvdE1hcmtldFByb2dyYW1BY2NvdW50LmFjY291bnQ7XG4gICAgICAgIHNwb3RNYXJrZXRJbmRleGVzLnB1c2goc3BvdE1hcmtldC5tYXJrZXRJbmRleCk7XG4gICAgICAgIG9yYWNsZUluZm9zLnNldChzcG90TWFya2V0Lm9yYWNsZS50b1N0cmluZygpLCB7XG4gICAgICAgICAgICBwdWJsaWNLZXk6IHNwb3RNYXJrZXQub3JhY2xlLFxuICAgICAgICAgICAgc291cmNlOiBzcG90TWFya2V0Lm9yYWNsZVNvdXJjZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHBlcnBNYXJrZXRJbmRleGVzLFxuICAgICAgICBzcG90TWFya2V0SW5kZXhlcyxcbiAgICAgICAgb3JhY2xlSW5mb3M6IEFycmF5LmZyb20ob3JhY2xlSW5mb3MudmFsdWVzKCkpLFxuICAgIH07XG59XG5leHBvcnRzLmZpbmRBbGxNYXJrZXRBbmRPcmFjbGVzID0gZmluZEFsbE1hcmtldEFuZE9yYWNsZXM7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJmaW5kQWxsTWFya2V0QW5kT3JhY2xlcyIsImdldE1hcmtldHNBbmRPcmFjbGVzRm9yU3Vic2NyaXB0aW9uIiwiaW5pdGlhbGl6ZSIsImdldENvbmZpZyIsImNvbmZpZ3MiLCJEUklGVF9QUk9HUkFNX0lEIiwicGVycE1hcmtldHNfMSIsInJlcXVpcmUiLCJzcG90TWFya2V0c18xIiwiZGV2bmV0IiwiRU5WIiwiUFlUSF9PUkFDTEVfTUFQUElOR19BRERSRVNTIiwiVVNEQ19NSU5UX0FERFJFU1MiLCJTRVJVTV9WMyIsIlBIT0VOSVgiLCJWMl9BTFBIQV9USUNLRVRfTUlOVF9BRERSRVNTIiwiUEVSUF9NQVJLRVRTIiwiRGV2bmV0UGVycE1hcmtldHMiLCJTUE9UX01BUktFVFMiLCJEZXZuZXRTcG90TWFya2V0cyIsIk1BUktFVF9MT09LVVBfVEFCTEUiLCJNYWlubmV0UGVycE1hcmtldHMiLCJNYWlubmV0U3BvdE1hcmtldHMiLCJjdXJyZW50Q29uZmlnIiwicHJvcHMiLCJfYSIsIl9iIiwiZW52Iiwib3ZlcnJpZGVFbnYiLCJwZXJwTWFya2V0SW5kZXhlcyIsInNwb3RNYXJrZXRJbmRleGVzIiwib3JhY2xlSW5mb3MiLCJNYXAiLCJtYXJrZXQiLCJQZXJwTWFya2V0cyIsInB1c2giLCJtYXJrZXRJbmRleCIsInNldCIsIm9yYWNsZSIsInRvU3RyaW5nIiwicHVibGljS2V5Iiwic291cmNlIiwib3JhY2xlU291cmNlIiwic3BvdE1hcmtldCIsIlNwb3RNYXJrZXRzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwicHJvZ3JhbSIsInBlcnBNYXJrZXRQcm9ncmFtQWNjb3VudHMiLCJhY2NvdW50IiwicGVycE1hcmtldCIsImFsbCIsInNwb3RNYXJrZXRQcm9ncmFtQWNjb3VudHMiLCJwZXJwTWFya2V0UHJvZ3JhbUFjY291bnQiLCJhbW0iLCJzcG90TWFya2V0UHJvZ3JhbUFjY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/config.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js":
/*!************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.MARGIN_PRECISION = exports.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO = exports.PRICE_TO_QUOTE_PRECISION = exports.PRICE_DIV_PEG = exports.AMM_TO_QUOTE_PRECISION_RATIO = exports.BASE_PRECISION_EXP = exports.BASE_PRECISION = exports.AMM_RESERVE_PRECISION = exports.PEG_PRECISION = exports.FUNDING_RATE_BUFFER_PRECISION = exports.FUNDING_RATE_PRECISION = exports.PRICE_PRECISION = exports.QUOTE_PRECISION = exports.LIQUIDATION_FEE_PRECISION = exports.SPOT_MARKET_IMF_PRECISION = exports.SPOT_MARKET_IMF_PRECISION_EXP = exports.SPOT_MARKET_BALANCE_PRECISION = exports.SPOT_MARKET_BALANCE_PRECISION_EXP = exports.SPOT_MARKET_WEIGHT_PRECISION = exports.SPOT_MARKET_UTILIZATION_PRECISION = exports.SPOT_MARKET_UTILIZATION_PRECISION_EXP = exports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION = exports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION_EXP = exports.SPOT_MARKET_RATE_PRECISION = exports.SPOT_MARKET_RATE_PRECISION_EXP = exports.AMM_RESERVE_PRECISION_EXP = exports.PEG_PRECISION_EXP = exports.FUNDING_RATE_PRECISION_EXP = exports.PRICE_PRECISION_EXP = exports.FUNDING_RATE_BUFFER_PRECISION_EXP = exports.QUOTE_PRECISION_EXP = exports.CONCENTRATION_PRECISION = exports.PERCENTAGE_PRECISION = exports.PERCENTAGE_PRECISION_EXP = exports.MAX_LEVERAGE_ORDER_SIZE = exports.MAX_LEVERAGE = exports.TEN_MILLION = exports.BN_MAX = exports.TEN_THOUSAND = exports.TEN = exports.NINE = exports.EIGHT = exports.SEVEN = exports.SIX = exports.FIVE = exports.FOUR = exports.THREE = exports.TWO = exports.ONE = exports.ZERO = void 0;\nexports.DEFAULT_REVENUE_SINCE_LAST_FUNDING_SPREAD_RETREAT = exports.OPEN_ORDER_MARGIN_REQUIREMENT = exports.LAMPORTS_EXP = exports.LAMPORTS_PRECISION = exports.QUOTE_SPOT_MARKET_INDEX = exports.ONE_YEAR = exports.ONE_HOUR = exports.FIVE_MINUTE = exports.LIQUIDATION_PCT_PRECISION = exports.BID_ASK_SPREAD_PRECISION = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst __1 = __webpack_require__(/*! ../ */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nexports.ZERO = new __1.BN(0);\nexports.ONE = new __1.BN(1);\nexports.TWO = new __1.BN(2);\nexports.THREE = new __1.BN(3);\nexports.FOUR = new __1.BN(4);\nexports.FIVE = new __1.BN(5);\nexports.SIX = new __1.BN(6);\nexports.SEVEN = new __1.BN(7);\nexports.EIGHT = new __1.BN(8);\nexports.NINE = new __1.BN(9);\nexports.TEN = new __1.BN(10);\nexports.TEN_THOUSAND = new __1.BN(10000);\nexports.BN_MAX = new __1.BN(Number.MAX_SAFE_INTEGER);\nexports.TEN_MILLION = exports.TEN_THOUSAND.mul(exports.TEN_THOUSAND);\nexports.MAX_LEVERAGE = new __1.BN(5);\nexports.MAX_LEVERAGE_ORDER_SIZE = new __1.BN(\"18446744073709551615\");\nexports.PERCENTAGE_PRECISION_EXP = new __1.BN(6);\nexports.PERCENTAGE_PRECISION = new __1.BN(10).pow(exports.PERCENTAGE_PRECISION_EXP);\nexports.CONCENTRATION_PRECISION = exports.PERCENTAGE_PRECISION;\nexports.QUOTE_PRECISION_EXP = new __1.BN(6);\nexports.FUNDING_RATE_BUFFER_PRECISION_EXP = new __1.BN(3);\nexports.PRICE_PRECISION_EXP = new __1.BN(6);\nexports.FUNDING_RATE_PRECISION_EXP = exports.PRICE_PRECISION_EXP.add(exports.FUNDING_RATE_BUFFER_PRECISION_EXP);\nexports.PEG_PRECISION_EXP = new __1.BN(6);\nexports.AMM_RESERVE_PRECISION_EXP = new __1.BN(9);\nexports.SPOT_MARKET_RATE_PRECISION_EXP = new __1.BN(6);\nexports.SPOT_MARKET_RATE_PRECISION = new __1.BN(10).pow(exports.SPOT_MARKET_RATE_PRECISION_EXP);\nexports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION_EXP = new __1.BN(10);\nexports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION = new __1.BN(10).pow(exports.SPOT_MARKET_CUMULATIVE_INTEREST_PRECISION_EXP);\nexports.SPOT_MARKET_UTILIZATION_PRECISION_EXP = new __1.BN(6);\nexports.SPOT_MARKET_UTILIZATION_PRECISION = new __1.BN(10).pow(exports.SPOT_MARKET_UTILIZATION_PRECISION_EXP);\nexports.SPOT_MARKET_WEIGHT_PRECISION = new __1.BN(10000);\nexports.SPOT_MARKET_BALANCE_PRECISION_EXP = new __1.BN(9);\nexports.SPOT_MARKET_BALANCE_PRECISION = new __1.BN(10).pow(exports.SPOT_MARKET_BALANCE_PRECISION_EXP);\nexports.SPOT_MARKET_IMF_PRECISION_EXP = new __1.BN(6);\nexports.SPOT_MARKET_IMF_PRECISION = new __1.BN(10).pow(exports.SPOT_MARKET_IMF_PRECISION_EXP);\nexports.LIQUIDATION_FEE_PRECISION = new __1.BN(1000000);\nexports.QUOTE_PRECISION = new __1.BN(10).pow(exports.QUOTE_PRECISION_EXP);\nexports.PRICE_PRECISION = new __1.BN(10).pow(exports.PRICE_PRECISION_EXP);\nexports.FUNDING_RATE_PRECISION = new __1.BN(10).pow(exports.FUNDING_RATE_PRECISION_EXP);\nexports.FUNDING_RATE_BUFFER_PRECISION = new __1.BN(10).pow(exports.FUNDING_RATE_BUFFER_PRECISION_EXP);\nexports.PEG_PRECISION = new __1.BN(10).pow(exports.PEG_PRECISION_EXP);\nexports.AMM_RESERVE_PRECISION = new __1.BN(10).pow(exports.AMM_RESERVE_PRECISION_EXP);\nexports.BASE_PRECISION = exports.AMM_RESERVE_PRECISION;\nexports.BASE_PRECISION_EXP = exports.AMM_RESERVE_PRECISION_EXP;\nexports.AMM_TO_QUOTE_PRECISION_RATIO = exports.AMM_RESERVE_PRECISION.div(exports.QUOTE_PRECISION); // 10^3\nexports.PRICE_DIV_PEG = exports.PRICE_PRECISION.div(exports.PEG_PRECISION); //10^1\nexports.PRICE_TO_QUOTE_PRECISION = exports.PRICE_PRECISION.div(exports.QUOTE_PRECISION); // 10^1\nexports.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO = exports.AMM_RESERVE_PRECISION.mul(exports.PEG_PRECISION).div(exports.QUOTE_PRECISION); // 10^9\nexports.MARGIN_PRECISION = exports.TEN_THOUSAND;\nexports.BID_ASK_SPREAD_PRECISION = new __1.BN(1000000); // 10^6\nexports.LIQUIDATION_PCT_PRECISION = exports.TEN_THOUSAND;\nexports.FIVE_MINUTE = new __1.BN(60 * 5);\nexports.ONE_HOUR = new __1.BN(60 * 60);\nexports.ONE_YEAR = new __1.BN(31536000);\nexports.QUOTE_SPOT_MARKET_INDEX = 0;\nexports.LAMPORTS_PRECISION = new __1.BN(web3_js_1.LAMPORTS_PER_SOL);\nexports.LAMPORTS_EXP = new __1.BN(Math.log10(web3_js_1.LAMPORTS_PER_SOL));\nexports.OPEN_ORDER_MARGIN_REQUIREMENT = exports.QUOTE_PRECISION.div(new __1.BN(100));\nexports.DEFAULT_REVENUE_SINCE_LAST_FUNDING_SPREAD_RETREAT = new __1.BN(-25).mul(exports.QUOTE_PRECISION);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsd0JBQXdCLEdBQUdBLDhDQUE4QyxHQUFHQSxnQ0FBZ0MsR0FBR0EscUJBQXFCLEdBQUdBLG9DQUFvQyxHQUFHQSwwQkFBMEIsR0FBR0Esc0JBQXNCLEdBQUdBLDZCQUE2QixHQUFHQSxxQkFBcUIsR0FBR0EscUNBQXFDLEdBQUdBLDhCQUE4QixHQUFHQSx1QkFBdUIsR0FBR0EsdUJBQXVCLEdBQUdBLGlDQUFpQyxHQUFHQSxpQ0FBaUMsR0FBR0EscUNBQXFDLEdBQUdBLHFDQUFxQyxHQUFHQSx5Q0FBeUMsR0FBR0Esb0NBQW9DLEdBQUdBLHlDQUF5QyxHQUFHQSw2Q0FBNkMsR0FBR0EsaURBQWlELEdBQUdBLHFEQUFxRCxHQUFHQSxrQ0FBa0MsR0FBR0Esc0NBQXNDLEdBQUdBLGlDQUFpQyxHQUFHQSx5QkFBeUIsR0FBR0Esa0NBQWtDLEdBQUdBLDJCQUEyQixHQUFHQSx5Q0FBeUMsR0FBR0EsMkJBQTJCLEdBQUdBLCtCQUErQixHQUFHQSw0QkFBNEIsR0FBR0EsZ0NBQWdDLEdBQUdBLCtCQUErQixHQUFHQSxvQkFBb0IsR0FBR0EsbUJBQW1CLEdBQUdBLGNBQWMsR0FBR0Esb0JBQW9CLEdBQUdBLFdBQVcsR0FBR0EsWUFBWSxHQUFHQSxhQUFhLEdBQUdBLGFBQWEsR0FBR0EsV0FBVyxHQUFHQSxZQUFZLEdBQUdBLFlBQVksR0FBR0EsYUFBYSxHQUFHQSxXQUFXLEdBQUdBLFdBQVcsR0FBR0EsWUFBWSxHQUFHLEtBQUs7QUFDMytDQSx5REFBeUQsR0FBR0EscUNBQXFDLEdBQUdBLG9CQUFvQixHQUFHQSwwQkFBMEIsR0FBR0EsK0JBQStCLEdBQUdBLGdCQUFnQixHQUFHQSxnQkFBZ0IsR0FBR0EsbUJBQW1CLEdBQUdBLGlD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QUFRVSxhQUFhLEVBQUU2RCxHQUFHLENBQUN2RSxRQUFRYyxlQUFlLEdBQUcsT0FBTztBQUMvSWQsd0JBQXdCLEdBQUdBLFFBQVF3QyxZQUFZO0FBQy9DeEMsZ0NBQWdDLEdBQUcsSUFBSWdFLElBQUlDLEVBQUUsQ0FBQyxVQUFVLE9BQU87QUFDL0RqRSxpQ0FBaUMsR0FBR0EsUUFBUXdDLFlBQVk7QUFDeER4QyxtQkFBbUIsR0FBRyxJQUFJZ0UsSUFBSUMsRUFBRSxDQUFDLEtBQUs7QUFDdENqRSxnQkFBZ0IsR0FBRyxJQUFJZ0UsSUFBSUMsRUFBRSxDQUFDLEtBQUs7QUFDbkNqRSxnQkFBZ0IsR0FBRyxJQUFJZ0UsSUFBSUMsRUFBRSxDQUFDO0FBQzlCakUsK0JBQStCLEdBQUc7QUFDbENBLDBCQUEwQixHQUFHLElBQUlnRSxJQUFJQyxFQUFFLENBQUNILFVBQVVVLGdCQUFnQjtBQUNsRXhFLG9CQUFvQixHQUFHLElBQUlnRSxJQUFJQyxFQUFFLENBQUNRLEtBQUtDLEtBQUssQ0FBQ1osVUFBVVUsZ0JBQWdCO0FBQ3ZFeEUscUNBQXFDLEdBQUdBLFFBQVFjLGVBQWUsQ0FBQ3lELEdBQUcsQ0FBQyxJQUFJUCxJQUFJQyxFQUFFLENBQUM7QUFDL0VqRSx5REFBeUQsR0FBRyxJQUFJZ0UsSUFBSUMsRUFBRSxDQUFDLENBQUMsSUFBSUcsR0FBRyxDQUFDcEUsUUFBUWMsZUFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50cy5qcz9hOWFkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5NQVJHSU5fUFJFQ0lTSU9OID0gZXhwb3J0cy5BTU1fVElNRVNfUEVHX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyA9IGV4cG9ydHMuUFJJQ0VfVE9fUVVPVEVfUFJFQ0lTSU9OID0gZXhwb3J0cy5QUklDRV9ESVZfUEVHID0gZXhwb3J0cy5BTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPID0gZXhwb3J0cy5CQVNFX1BSRUNJU0lPTl9FWFAgPSBleHBvcnRzLkJBU0VfUFJFQ0lTSU9OID0gZXhwb3J0cy5BTU1fUkVTRVJWRV9QUkVDSVNJT04gPSBleHBvcnRzLlBFR19QUkVDSVNJT04gPSBleHBvcnRzLkZVTkRJTkdfUkFURV9CVUZGRVJfUFJFQ0lTSU9OID0gZXhwb3J0cy5GVU5ESU5HX1JBVEVfUFJFQ0lTSU9OID0gZXhwb3J0cy5QUklDRV9QUkVDSVNJT04gPSBleHBvcnRzLlFVT1RFX1BSRUNJU0lPTiA9IGV4cG9ydHMuTElRVUlEQVRJT05fRkVFX1BSRUNJU0lPTiA9IGV4cG9ydHMuU1BPVF9NQVJLRVRfSU1GX1BSRUNJU0lPTiA9IGV4cG9ydHMuU1BPVF9NQVJLRVRfSU1GX1BSRUNJU0lPTl9FWFAgPSBleHBvcnRzLlNQT1RfTUFSS0VUX0JBTEFOQ0VfUFJFQ0lTSU9OID0gZXhwb3J0cy5TUE9UX01BUktFVF9CQUxBTkNFX1BSRUNJU0lPTl9FWFAgPSBleHBvcnRzLlNQT1RfTUFSS0VUX1dFSUdIVF9QUkVDSVNJT04gPSBleHBvcnRzLlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTiA9IGV4cG9ydHMuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OX0VYUCA9IGV4cG9ydHMuU1BPVF9NQVJLRVRfQ1VNVUxBVElWRV9JTlRFUkVTVF9QUkVDSVNJT04gPSBleHBvcnRzLlNQT1RfTUFSS0VUX0NVTVVMQVRJVkVfSU5URVJFU1RfUFJFQ0lTSU9OX0VYUCA9IGV4cG9ydHMuU1BPVF9NQVJLRVRfUkFURV9QUkVDSVNJT04gPSBleHBvcnRzLlNQT1RfTUFSS0VUX1JBVEVfUFJFQ0lTSU9OX0VYUCA9IGV4cG9ydHMuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OX0VYUCA9IGV4cG9ydHMuUEVHX1BSRUNJU0lPTl9FWFAgPSBleHBvcnRzLkZVTkRJTkdfUkFURV9QUkVDSVNJT05fRVhQID0gZXhwb3J0cy5QUklDRV9QUkVDSVNJT05fRVhQID0gZXhwb3J0cy5GVU5ESU5HX1JBVEVfQlVGRkVSX1BSRUNJU0lPTl9FWFAgPSBleHBvcnRzLlFVT1RFX1BSRUNJU0lPTl9FWFAgPSBleHBvcnRzLkNPTkNFTlRSQVRJT05fUFJFQ0lTSU9OID0gZXhwb3J0cy5QRVJDRU5UQUdFX1BSRUNJU0lPTiA9IGV4cG9ydHMuUEVSQ0VOVEFHRV9QUkVDSVNJT05fRVhQID0gZXhwb3J0cy5NQVhfTEVWRVJBR0VfT1JERVJfU0laRSA9IGV4cG9ydHMuTUFYX0xFVkVSQUdFID0gZXhwb3J0cy5URU5fTUlMTElPTiA9IGV4cG9ydHMuQk5fTUFYID0gZXhwb3J0cy5URU5fVEhPVVNBTkQgPSBleHBvcnRzLlRFTiA9IGV4cG9ydHMuTklORSA9IGV4cG9ydHMuRUlHSFQgPSBleHBvcnRzLlNFVkVOID0gZXhwb3J0cy5TSVggPSBleHBvcnRzLkZJVkUgPSBleHBvcnRzLkZPVVIgPSBleHBvcnRzLlRIUkVFID0gZXhwb3J0cy5UV08gPSBleHBvcnRzLk9ORSA9IGV4cG9ydHMuWkVSTyA9IHZvaWQgMDtcbmV4cG9ydHMuREVGQVVMVF9SRVZFTlVFX1NJTkNFX0xBU1RfRlVORElOR19TUFJFQURfUkVUUkVBVCA9IGV4cG9ydHMuT1BFTl9PUkRFUl9NQVJHSU5fUkVRVUlSRU1FTlQgPSBleHBvcnRzLkxBTVBPUlRTX0VYUCA9IGV4cG9ydHMuTEFNUE9SVFNfUFJFQ0lTSU9OID0gZXhwb3J0cy5RVU9URV9TUE9UX01BUktFVF9JTkRFWCA9IGV4cG9ydHMuT05FX1lFQVIgPSBleHBvcnRzLk9ORV9IT1VSID0gZXhwb3J0cy5GSVZFX01JTlVURSA9IGV4cG9ydHMuTElRVUlEQVRJT05fUENUX1BSRUNJU0lPTiA9IGV4cG9ydHMuQklEX0FTS19TUFJFQURfUFJFQ0lTSU9OID0gdm9pZCAwO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IF9fMSA9IHJlcXVpcmUoXCIuLi9cIik7XG5leHBvcnRzLlpFUk8gPSBuZXcgX18xLkJOKDApO1xuZXhwb3J0cy5PTkUgPSBuZXcgX18xLkJOKDEpO1xuZXhwb3J0cy5UV08gPSBuZXcgX18xLkJOKDIpO1xuZXhwb3J0cy5USFJFRSA9IG5ldyBfXzEuQk4oMyk7XG5leHBvcnRzLkZPVVIgPSBuZXcgX18xLkJOKDQpO1xuZXhwb3J0cy5GSVZFID0gbmV3IF9fMS5CTig1KTtcbmV4cG9ydHMuU0lYID0gbmV3IF9fMS5CTig2KTtcbmV4cG9ydHMuU0VWRU4gPSBuZXcgX18xLkJOKDcpO1xuZXhwb3J0cy5FSUdIVCA9IG5ldyBfXzEuQk4oOCk7XG5leHBvcnRzLk5JTkUgPSBuZXcgX18xLkJOKDkpO1xuZXhwb3J0cy5URU4gPSBuZXcgX18xLkJOKDEwKTtcbmV4cG9ydHMuVEVOX1RIT1VTQU5EID0gbmV3IF9fMS5CTigxMDAwMCk7XG5leHBvcnRzLkJOX01BWCA9IG5ldyBfXzEuQk4oTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpO1xuZXhwb3J0cy5URU5fTUlMTElPTiA9IGV4cG9ydHMuVEVOX1RIT1VTQU5ELm11bChleHBvcnRzLlRFTl9USE9VU0FORCk7XG5leHBvcnRzLk1BWF9MRVZFUkFHRSA9IG5ldyBfXzEuQk4oNSk7XG5leHBvcnRzLk1BWF9MRVZFUkFHRV9PUkRFUl9TSVpFID0gbmV3IF9fMS5CTignMTg0NDY3NDQwNzM3MDk1NTE2MTUnKTtcbmV4cG9ydHMuUEVSQ0VOVEFHRV9QUkVDSVNJT05fRVhQID0gbmV3IF9fMS5CTig2KTtcbmV4cG9ydHMuUEVSQ0VOVEFHRV9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwKS5wb3coZXhwb3J0cy5QRVJDRU5UQUdFX1BSRUNJU0lPTl9FWFApO1xuZXhwb3J0cy5DT05DRU5UUkFUSU9OX1BSRUNJU0lPTiA9IGV4cG9ydHMuUEVSQ0VOVEFHRV9QUkVDSVNJT047XG5leHBvcnRzLlFVT1RFX1BSRUNJU0lPTl9FWFAgPSBuZXcgX18xLkJOKDYpO1xuZXhwb3J0cy5GVU5ESU5HX1JBVEVfQlVGRkVSX1BSRUNJU0lPTl9FWFAgPSBuZXcgX18xLkJOKDMpO1xuZXhwb3J0cy5QUklDRV9QUkVDSVNJT05fRVhQID0gbmV3IF9fMS5CTig2KTtcbmV4cG9ydHMuRlVORElOR19SQVRFX1BSRUNJU0lPTl9FWFAgPSBleHBvcnRzLlBSSUNFX1BSRUNJU0lPTl9FWFAuYWRkKGV4cG9ydHMuRlVORElOR19SQVRFX0JVRkZFUl9QUkVDSVNJT05fRVhQKTtcbmV4cG9ydHMuUEVHX1BSRUNJU0lPTl9FWFAgPSBuZXcgX18xLkJOKDYpO1xuZXhwb3J0cy5BTU1fUkVTRVJWRV9QUkVDSVNJT05fRVhQID0gbmV3IF9fMS5CTig5KTtcbmV4cG9ydHMuU1BPVF9NQVJLRVRfUkFURV9QUkVDSVNJT05fRVhQID0gbmV3IF9fMS5CTig2KTtcbmV4cG9ydHMuU1BPVF9NQVJLRVRfUkFURV9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwKS5wb3coZXhwb3J0cy5TUE9UX01BUktFVF9SQVRFX1BSRUNJU0lPTl9FWFApO1xuZXhwb3J0cy5TUE9UX01BUktFVF9DVU1VTEFUSVZFX0lOVEVSRVNUX1BSRUNJU0lPTl9FWFAgPSBuZXcgX18xLkJOKDEwKTtcbmV4cG9ydHMuU1BPVF9NQVJLRVRfQ1VNVUxBVElWRV9JTlRFUkVTVF9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwKS5wb3coZXhwb3J0cy5TUE9UX01BUktFVF9DVU1VTEFUSVZFX0lOVEVSRVNUX1BSRUNJU0lPTl9FWFApO1xuZXhwb3J0cy5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT05fRVhQID0gbmV3IF9fMS5CTig2KTtcbmV4cG9ydHMuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OID0gbmV3IF9fMS5CTigxMCkucG93KGV4cG9ydHMuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OX0VYUCk7XG5leHBvcnRzLlNQT1RfTUFSS0VUX1dFSUdIVF9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwMDAwKTtcbmV4cG9ydHMuU1BPVF9NQVJLRVRfQkFMQU5DRV9QUkVDSVNJT05fRVhQID0gbmV3IF9fMS5CTig5KTtcbmV4cG9ydHMuU1BPVF9NQVJLRVRfQkFMQU5DRV9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwKS5wb3coZXhwb3J0cy5TUE9UX01BUktFVF9CQUxBTkNFX1BSRUNJU0lPTl9FWFApO1xuZXhwb3J0cy5TUE9UX01BUktFVF9JTUZfUFJFQ0lTSU9OX0VYUCA9IG5ldyBfXzEuQk4oNik7XG5leHBvcnRzLlNQT1RfTUFSS0VUX0lNRl9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwKS5wb3coZXhwb3J0cy5TUE9UX01BUktFVF9JTUZfUFJFQ0lTSU9OX0VYUCk7XG5leHBvcnRzLkxJUVVJREFUSU9OX0ZFRV9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwMDAwMDApO1xuZXhwb3J0cy5RVU9URV9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwKS5wb3coZXhwb3J0cy5RVU9URV9QUkVDSVNJT05fRVhQKTtcbmV4cG9ydHMuUFJJQ0VfUFJFQ0lTSU9OID0gbmV3IF9fMS5CTigxMCkucG93KGV4cG9ydHMuUFJJQ0VfUFJFQ0lTSU9OX0VYUCk7XG5leHBvcnRzLkZVTkRJTkdfUkFURV9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwKS5wb3coZXhwb3J0cy5GVU5ESU5HX1JBVEVfUFJFQ0lTSU9OX0VYUCk7XG5leHBvcnRzLkZVTkRJTkdfUkFURV9CVUZGRVJfUFJFQ0lTSU9OID0gbmV3IF9fMS5CTigxMCkucG93KGV4cG9ydHMuRlVORElOR19SQVRFX0JVRkZFUl9QUkVDSVNJT05fRVhQKTtcbmV4cG9ydHMuUEVHX1BSRUNJU0lPTiA9IG5ldyBfXzEuQk4oMTApLnBvdyhleHBvcnRzLlBFR19QUkVDSVNJT05fRVhQKTtcbmV4cG9ydHMuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OID0gbmV3IF9fMS5CTigxMCkucG93KGV4cG9ydHMuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OX0VYUCk7XG5leHBvcnRzLkJBU0VfUFJFQ0lTSU9OID0gZXhwb3J0cy5BTU1fUkVTRVJWRV9QUkVDSVNJT047XG5leHBvcnRzLkJBU0VfUFJFQ0lTSU9OX0VYUCA9IGV4cG9ydHMuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OX0VYUDtcbmV4cG9ydHMuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyA9IGV4cG9ydHMuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OLmRpdihleHBvcnRzLlFVT1RFX1BSRUNJU0lPTik7IC8vIDEwXjNcbmV4cG9ydHMuUFJJQ0VfRElWX1BFRyA9IGV4cG9ydHMuUFJJQ0VfUFJFQ0lTSU9OLmRpdihleHBvcnRzLlBFR19QUkVDSVNJT04pOyAvLzEwXjFcbmV4cG9ydHMuUFJJQ0VfVE9fUVVPVEVfUFJFQ0lTSU9OID0gZXhwb3J0cy5QUklDRV9QUkVDSVNJT04uZGl2KGV4cG9ydHMuUVVPVEVfUFJFQ0lTSU9OKTsgLy8gMTBeMVxuZXhwb3J0cy5BTU1fVElNRVNfUEVHX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyA9IGV4cG9ydHMuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OLm11bChleHBvcnRzLlBFR19QUkVDSVNJT04pLmRpdihleHBvcnRzLlFVT1RFX1BSRUNJU0lPTik7IC8vIDEwXjlcbmV4cG9ydHMuTUFSR0lOX1BSRUNJU0lPTiA9IGV4cG9ydHMuVEVOX1RIT1VTQU5EO1xuZXhwb3J0cy5CSURfQVNLX1NQUkVBRF9QUkVDSVNJT04gPSBuZXcgX18xLkJOKDEwMDAwMDApOyAvLyAxMF42XG5leHBvcnRzLkxJUVVJREFUSU9OX1BDVF9QUkVDSVNJT04gPSBleHBvcnRzLlRFTl9USE9VU0FORDtcbmV4cG9ydHMuRklWRV9NSU5VVEUgPSBuZXcgX18xLkJOKDYwICogNSk7XG5leHBvcnRzLk9ORV9IT1VSID0gbmV3IF9fMS5CTig2MCAqIDYwKTtcbmV4cG9ydHMuT05FX1lFQVIgPSBuZXcgX18xLkJOKDMxNTM2MDAwKTtcbmV4cG9ydHMuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVggPSAwO1xuZXhwb3J0cy5MQU1QT1JUU19QUkVDSVNJT04gPSBuZXcgX18xLkJOKHdlYjNfanNfMS5MQU1QT1JUU19QRVJfU09MKTtcbmV4cG9ydHMuTEFNUE9SVFNfRVhQID0gbmV3IF9fMS5CTihNYXRoLmxvZzEwKHdlYjNfanNfMS5MQU1QT1JUU19QRVJfU09MKSk7XG5leHBvcnRzLk9QRU5fT1JERVJfTUFSR0lOX1JFUVVJUkVNRU5UID0gZXhwb3J0cy5RVU9URV9QUkVDSVNJT04uZGl2KG5ldyBfXzEuQk4oMTAwKSk7XG5leHBvcnRzLkRFRkFVTFRfUkVWRU5VRV9TSU5DRV9MQVNUX0ZVTkRJTkdfU1BSRUFEX1JFVFJFQVQgPSBuZXcgX18xLkJOKC0yNSkubXVsKGV4cG9ydHMuUVVPVEVfUFJFQ0lTSU9OKTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIk1BUkdJTl9QUkVDSVNJT04iLCJBTU1fVElNRVNfUEVHX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyIsIlBSSUNFX1RPX1FVT1RFX1BSRUNJU0lPTiIsIlBSSUNFX0RJVl9QRUciLCJBTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPIiwiQkFTRV9QUkVDSVNJT05fRVhQIiwiQkFTRV9QUkVDSVNJT04iLCJBTU1fUkVTRVJWRV9QUkVDSVNJT04iLCJQRUdfUFJFQ0lTSU9OIiwiRlVORElOR19SQVRFX0JVRkZFUl9QUkVDSVNJT04iLCJGVU5ESU5HX1JBVEVfUFJFQ0lTSU9OIiwiUFJJQ0VfUFJFQ0lTSU9OIiwiUVVPVEVfUFJFQ0lTSU9OIiwiTElRVUlEQVRJT05fRkVFX1BSRUNJU0lPTiIsIlNQT1RfTUFSS0VUX0lNRl9QUkVDSVNJT04iLCJTUE9UX01BUktFVF9JTUZfUFJFQ0lTSU9OX0VYUCIsIlNQT1RfTUFSS0VUX0JBTEFOQ0VfUFJFQ0lTSU9OIiwiU1BPVF9NQVJLRVRfQkFMQU5DRV9QUkVDSVNJT05fRVhQIiwiU1BPVF9NQVJLRVRfV0VJR0hUX1BSRUNJU0lPTiIsIlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTiIsIlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTl9FWFAiLCJTUE9UX01BUktFVF9DVU1VTEFUSVZFX0lOVEVSRVNUX1BSRUNJU0lPTiIsIlNQT1RfTUFSS0VUX0NVTVVMQVRJVkVfSU5URVJFU1RfUFJFQ0lTSU9OX0VYUCIsIlNQT1RfTUFSS0VUX1JBVEVfUFJFQ0lTSU9OIiwiU1BPVF9NQVJLRVRfUkFURV9QUkVDSVNJT05fRVhQIiwiQU1NX1JFU0VSVkVfUFJFQ0lTSU9OX0VYUCIsIlBFR19QUkVDSVNJT05fRVhQIiwiRlVORElOR19SQVRFX1BSRUNJU0lPTl9FWFAiLCJQUklDRV9QUkVDSVNJT05fRVhQIiwiRlVORElOR19SQVRFX0JVRkZFUl9QUkVDSVNJT05fRVhQIiwiUVVPVEVfUFJFQ0lTSU9OX0VYUCIsIkNPTkNFTlRSQVRJT05fUFJFQ0lTSU9OIiwiUEVSQ0VOVEFHRV9QUkVDSVNJT04iLCJQRVJDRU5UQUdFX1BSRUNJU0lPTl9FWFAiLCJNQVhfTEVWRVJBR0VfT1JERVJfU0laRSIsIk1BWF9MRVZFUkFHRSIsIlRFTl9NSUxMSU9OIiwiQk5fTUFYIiwiVEVOX1RIT1VTQU5EIiwiVEVOIiwiTklORSIsIkVJR0hUIiwiU0VWRU4iLCJTSVgiLCJGSVZFIiwiRk9VUiIsIlRIUkVFIiwiVFdPIiwiT05FIiwiWkVSTyIsIkRFRkFVTFRfUkVWRU5VRV9TSU5DRV9MQVNUX0ZVTkRJTkdfU1BSRUFEX1JFVFJFQVQiLCJPUEVOX09SREVSX01BUkdJTl9SRVFVSVJFTUVOVCIsIkxBTVBPUlRTX0VYUCIsIkxBTVBPUlRTX1BSRUNJU0lPTiIsIlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYIiwiT05FX1lFQVIiLCJPTkVfSE9VUiIsIkZJVkVfTUlOVVRFIiwiTElRVUlEQVRJT05fUENUX1BSRUNJU0lPTiIsIkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTiIsIndlYjNfanNfMSIsInJlcXVpcmUiLCJfXzEiLCJCTiIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJtdWwiLCJwb3ciLCJhZGQiLCJkaXYiLCJMQU1QT1JUU19QRVJfU09MIiwiTWF0aCIsImxvZzEwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/constants/perpMarkets.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/constants/perpMarkets.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PerpMarkets = exports.MainnetPerpMarkets = exports.DevnetPerpMarkets = void 0;\nconst __1 = __webpack_require__(/*! ../ */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nexports.DevnetPerpMarkets = [\n    {\n        fullName: \"Solana\",\n        category: [\n            \"L1\",\n            \"Infra\"\n        ],\n        symbol: \"SOL-PERP\",\n        baseAssetSymbol: \"SOL\",\n        marketIndex: 0,\n        oracle: new web3_js_1.PublicKey(\"J83w4HKfqxwcq3BEMMkPFSppX3gqekLyLJBexebFVkix\"),\n        launchTs: 1655751353000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Bitcoin\",\n        category: [\n            \"L1\",\n            \"Payment\"\n        ],\n        symbol: \"BTC-PERP\",\n        baseAssetSymbol: \"BTC\",\n        marketIndex: 1,\n        oracle: new web3_js_1.PublicKey(\"HovQMDrbAgAYPCmHVSrezcSmkMtXSSUsLDFANExrZh2J\"),\n        launchTs: 1655751353000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Ethereum\",\n        category: [\n            \"L1\",\n            \"Infra\"\n        ],\n        symbol: \"ETH-PERP\",\n        baseAssetSymbol: \"ETH\",\n        marketIndex: 2,\n        oracle: new web3_js_1.PublicKey(\"EdVCmQ9FSPcVe5YySXDPCRmc8aDQLKJ9xvYBMZPie1Vw\"),\n        launchTs: 1637691133472,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Aptos\",\n        category: [\n            \"L1\",\n            \"Infra\"\n        ],\n        symbol: \"APT-PERP\",\n        baseAssetSymbol: \"APT\",\n        marketIndex: 3,\n        oracle: new web3_js_1.PublicKey(\"5d2QJ6u2NveZufmJ4noHja5EHs3Bv1DUMPLG5xfasSVs\"),\n        launchTs: 1675610186000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Bonk\",\n        category: [\n            \"Meme\",\n            \"Dog\"\n        ],\n        symbol: \"1MBONK-PERP\",\n        baseAssetSymbol: \"1MBONK\",\n        marketIndex: 4,\n        oracle: new web3_js_1.PublicKey(\"6bquU99ktV1VRiHDr8gMhDFt3kMfhCQo5nfNrg2Urvsn\"),\n        launchTs: 1677068931000,\n        oracleSource: __1.OracleSource.PYTH_1M\n    },\n    {\n        fullName: \"Polygon\",\n        category: [\n            \"L2\",\n            \"Infra\"\n        ],\n        symbol: \"MATIC-PERP\",\n        baseAssetSymbol: \"MATIC\",\n        marketIndex: 5,\n        oracle: new web3_js_1.PublicKey(\"FBirwuDFuRAu4iSGc7RGxN5koHB7EJM1wbCmyPuQoGur\"),\n        launchTs: 1677690149000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Arbitrum\",\n        category: [\n            \"L2\",\n            \"Infra\"\n        ],\n        symbol: \"ARB-PERP\",\n        baseAssetSymbol: \"ARB\",\n        marketIndex: 6,\n        oracle: new web3_js_1.PublicKey(\"4mRGHzjGerQNWKXyQAmr9kWqb9saPPHKqo1xziXGQ5Dh\"),\n        launchTs: 1679501812000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Doge\",\n        category: [\n            \"Meme\",\n            \"Dog\"\n        ],\n        symbol: \"DOGE-PERP\",\n        baseAssetSymbol: \"DOGE\",\n        marketIndex: 7,\n        oracle: new web3_js_1.PublicKey(\"4L6YhY8VvUgmqG5MvJkUJATtzB2rFqdrJwQCmFLv4Jzy\"),\n        launchTs: 1680808053000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Binance Coin\",\n        category: [\n            \"Exchange\"\n        ],\n        symbol: \"BNB-PERP\",\n        baseAssetSymbol: \"BNB\",\n        marketIndex: 8,\n        oracle: new web3_js_1.PublicKey(\"GwzBgrXb4PG59zjce24SF2b9JXbLEjJJTBkmytuEZj1b\"),\n        launchTs: 1680808053000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Sui\",\n        category: [\n            \"L1\"\n        ],\n        symbol: \"SUI-PERP\",\n        baseAssetSymbol: \"SUI\",\n        marketIndex: 9,\n        oracle: new web3_js_1.PublicKey(\"6SK9vS8eMSSj3LUX2dPku93CrNv8xLCp9ng39F39h7A5\"),\n        launchTs: 1683125906000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Pepe\",\n        category: [\n            \"Meme\"\n        ],\n        symbol: \"1MPEPE-PERP\",\n        baseAssetSymbol: \"1MPEPE\",\n        marketIndex: 10,\n        oracle: new web3_js_1.PublicKey(\"Gz9RfgDeAFSsH7BHDGyNTgCik74rjNwsodJpsCizzmkj\"),\n        launchTs: 1683781239000,\n        oracleSource: __1.OracleSource.PYTH_1M\n    },\n    {\n        fullName: \"OP\",\n        category: [\n            \"L2\",\n            \"Infra\"\n        ],\n        symbol: \"OP-PERP\",\n        baseAssetSymbol: \"OP\",\n        marketIndex: 11,\n        oracle: new web3_js_1.PublicKey(\"8ctSiDhA7eJoii4TkKV8Rx4KFdz3ycsA1FXy9wq56quG\"),\n        launchTs: 1686091480000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"RNDR\",\n        category: [\n            \"Infra\"\n        ],\n        symbol: \"RNDR-PERP\",\n        baseAssetSymbol: \"RNDR\",\n        marketIndex: 12,\n        oracle: new web3_js_1.PublicKey(\"C2QvUPBiU3fViSyqA4nZgGyYqLgYf9PRpd8B8oLoo48w\"),\n        launchTs: 1687201081000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"XRP\",\n        category: [\n            \"Payments\"\n        ],\n        symbol: \"XRP-PERP\",\n        baseAssetSymbol: \"XRP\",\n        marketIndex: 13,\n        oracle: new web3_js_1.PublicKey(\"DuG45Td6dgJBe64Ebymb1WjBys16L1VTQdoAURdsviqN\"),\n        launchTs: 1689270550000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"HNT\",\n        category: [\n            \"IoT\"\n        ],\n        symbol: \"HNT-PERP\",\n        baseAssetSymbol: \"HNT\",\n        marketIndex: 14,\n        oracle: new web3_js_1.PublicKey(\"6Eg8YdfFJQF2HHonzPUBSCCmyUEhrStg9VBLK957sBe6\"),\n        launchTs: 16922949550000,\n        oracleSource: __1.OracleSource.PYTH\n    }\n];\nexports.MainnetPerpMarkets = [\n    {\n        fullName: \"Solana\",\n        category: [\n            \"L1\",\n            \"Infra\"\n        ],\n        symbol: \"SOL-PERP\",\n        baseAssetSymbol: \"SOL\",\n        marketIndex: 0,\n        oracle: new web3_js_1.PublicKey(\"H6ARHf6YXhGYeQfUzQNGk6rDNnLBQKrenN712K4AQJEG\"),\n        launchTs: 1667560505000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Bitcoin\",\n        category: [\n            \"L1\",\n            \"Payment\"\n        ],\n        symbol: \"BTC-PERP\",\n        baseAssetSymbol: \"BTC\",\n        marketIndex: 1,\n        oracle: new web3_js_1.PublicKey(\"GVXRSBjFk6e6J3NbVPXohDJetcTjaeeuykUpbQF8UoMU\"),\n        launchTs: 1670347281000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Ethereum\",\n        category: [\n            \"L1\",\n            \"Infra\"\n        ],\n        symbol: \"ETH-PERP\",\n        baseAssetSymbol: \"ETH\",\n        marketIndex: 2,\n        oracle: new web3_js_1.PublicKey(\"JBu1AL4obBcCMqKBBxhpWCNUt136ijcuMZLFvTP7iWdB\"),\n        launchTs: 1670347281000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Aptos\",\n        category: [\n            \"L1\",\n            \"Infra\"\n        ],\n        symbol: \"APT-PERP\",\n        baseAssetSymbol: \"APT\",\n        marketIndex: 3,\n        oracle: new web3_js_1.PublicKey(\"FNNvb1AFDnDVPkocEri8mWbJ1952HQZtFLuwPiUjSJQ\"),\n        launchTs: 1675802661000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Bonk\",\n        category: [\n            \"Meme\"\n        ],\n        symbol: \"1MBONK-PERP\",\n        baseAssetSymbol: \"1MBONK\",\n        marketIndex: 4,\n        oracle: new web3_js_1.PublicKey(\"8ihFLu5FimgTQ1Unh4dVyEHUGodJ5gJQCrQf4KUVB9bN\"),\n        launchTs: 1677690149000,\n        oracleSource: __1.OracleSource.PYTH_1M\n    },\n    {\n        fullName: \"Polygon\",\n        category: [\n            \"L2\",\n            \"Infra\"\n        ],\n        symbol: \"MATIC-PERP\",\n        baseAssetSymbol: \"MATIC\",\n        marketIndex: 5,\n        oracle: new web3_js_1.PublicKey(\"7KVswB9vkCgeM3SHP7aGDijvdRAHK8P5wi9JXViCrtYh\"),\n        launchTs: 1677690149000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Arbitrum\",\n        category: [\n            \"L2\",\n            \"Infra\"\n        ],\n        symbol: \"ARB-PERP\",\n        baseAssetSymbol: \"ARB\",\n        marketIndex: 6,\n        oracle: new web3_js_1.PublicKey(\"5HRrdmghsnU3i2u5StaKaydS7eq3vnKVKwXMzCNKsc4C\"),\n        launchTs: 1679501812000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Doge\",\n        category: [\n            \"Meme\",\n            \"Dog\"\n        ],\n        symbol: \"DOGE-PERP\",\n        baseAssetSymbol: \"DOGE\",\n        marketIndex: 7,\n        oracle: new web3_js_1.PublicKey(\"FsSM3s38PX9K7Dn6eGzuE29S2Dsk1Sss1baytTQdCaQj\"),\n        launchTs: 1680808053000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Binance Coin\",\n        category: [\n            \"Exchange\"\n        ],\n        symbol: \"BNB-PERP\",\n        baseAssetSymbol: \"BNB\",\n        marketIndex: 8,\n        oracle: new web3_js_1.PublicKey(\"4CkQJBxhU8EZ2UjhigbtdaPbpTe6mqf811fipYBFbSYN\"),\n        launchTs: 1680808053000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Sui\",\n        category: [\n            \"L1\"\n        ],\n        symbol: \"SUI-PERP\",\n        baseAssetSymbol: \"SUI\",\n        marketIndex: 9,\n        oracle: new web3_js_1.PublicKey(\"3Qub3HaAJaa2xNY7SUqPKd3vVwTqDfDDkEUMPjXD2c1q\"),\n        launchTs: 1683125906000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"Pepe\",\n        category: [\n            \"Meme\"\n        ],\n        symbol: \"1MPEPE-PERP\",\n        baseAssetSymbol: \"1MPEPE\",\n        marketIndex: 10,\n        oracle: new web3_js_1.PublicKey(\"FSfxunDmjjbDV2QxpyxFCAPKmYJHSLnLuvQXDLkMzLBm\"),\n        launchTs: 1683781239000,\n        oracleSource: __1.OracleSource.PYTH_1M\n    },\n    {\n        fullName: \"OP\",\n        category: [\n            \"L2\",\n            \"Infra\"\n        ],\n        symbol: \"OP-PERP\",\n        baseAssetSymbol: \"OP\",\n        marketIndex: 11,\n        oracle: new web3_js_1.PublicKey(\"4o4CUwzFwLqCvmA5x1G4VzoZkAhAcbiuiYyjWX1CVbY2\"),\n        launchTs: 1686091480000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"RNDR\",\n        category: [\n            \"Infra\"\n        ],\n        symbol: \"RNDR-PERP\",\n        baseAssetSymbol: \"RNDR\",\n        marketIndex: 12,\n        oracle: new web3_js_1.PublicKey(\"CYGfrBJB9HgLf9iZyN4aH5HvUAi2htQ4MjPxeXMf4Egn\"),\n        launchTs: 1687201081000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"XRP\",\n        category: [\n            \"Payments\"\n        ],\n        symbol: \"XRP-PERP\",\n        baseAssetSymbol: \"XRP\",\n        marketIndex: 13,\n        oracle: new web3_js_1.PublicKey(\"Guffb8DAAxNH6kdoawYjPXTbwUhjmveh8R4LM6uEqRV1\"),\n        launchTs: 1689270550000,\n        oracleSource: __1.OracleSource.PYTH\n    },\n    {\n        fullName: \"HNT\",\n        category: [\n            \"IoT\"\n        ],\n        symbol: \"HNT-PERP\",\n        baseAssetSymbol: \"HNT\",\n        marketIndex: 14,\n        oracle: new web3_js_1.PublicKey(\"7moA1i5vQUpfDwSpK6Pw9s56ahB7WFGidtbL2ujWrVvm\"),\n        launchTs: 16922949550000,\n        oracleSource: __1.OracleSource.PYTH\n    }\n];\nexports.PerpMarkets = {\n    devnet: exports.DevnetPerpMarkets,\n    \"mainnet-beta\": exports.MainnetPerpMarkets\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9jb25zdGFudHMvcGVycE1hcmtldHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG1CQUFtQixHQUFHQSwwQkFBMEIsR0FBR0EseUJBQXlCLEdBQUcsS0FBSztBQUNwRixNQUFNSyxNQUFNQyxtQkFBT0EsQ0FBQyw4REFBSztBQUN6QixNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyw4RUFBaUI7QUFDM0NOLHlCQUF5QixHQUFHO0lBQ3hCO1FBQ0lRLFVBQVU7UUFDVkMsVUFBVTtZQUFDO1lBQU07U0FBUTtRQUN6QkMsUUFBUTtRQUNSQyxpQkFBaUI7UUFDakJDLGFBQWE7UUFDYkMsUUFBUSxJQUFJTixVQUFVTyxTQUFTLENBQUM7UUFDaENDLFVBQVU7UUFDVkMsY0FBY1gsSUFBSVksWUFBWSxDQUFDQyxJQUFJO0lBQ3ZDO0lBQ0E7UUFDSVYsVUFBVTtRQUNWQyxVQUFVO1lBQUM7WUFBTTtTQUFVO1FBQzNCQyxRQUFRO1FBQ1JDLGlCQUFpQjtRQUNqQkMsYUFBYTtRQUNiQyxRQUFRLElBQUlOLFVBQVVPLFNBQVMsQ0FBQztRQUNoQ0MsVUFBVTtRQUNWQyxjQUFjWCxJQUFJWSxZQUFZLENBQUNDLElBQUk7SUFDdkM7SUFDQTtRQUNJVixVQUFVO1FBQ1ZDLFVBQVU7WUFBQztZQUFNO1NBQVE7UUFDekJDLFFBQVE7UUFDUkMsaUJBQWlCO1FBQ2pCQyxhQUFhO1FBQ2JDLFFBQVEsSUFBSU4sVUFBVU8sU0FBUyxDQUFDO1FBQ2hDQyxVQUFVO1FBQ1ZDLGNBQWNYLElBQUlZLFlBQVksQ0FBQ0MsSUFBSTtJQUN2QztJQUNBO1FBQ0lWLFVBQVU7UUFDVkMsVUFBVTtZQUFDO1lBQU07U0FBUTtRQUN6QkMsUUFBUTtRQUNSQyxpQkFBaUI7UUFDakJDLGFBQWE7UUFDYkMsUUFBUSxJQUFJTixVQUFVTyxTQUFTLENBQUM7UUFDaENDLFVB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QUlZLFlBQVksQ0FBQ0UsT0FBTztJQUMxQztJQUNBO1FBQ0lYLFVBQVU7UUFDVkMsVUFBVTtZQUFDO1lBQU07U0FBUTtRQUN6QkMsUUFBUTtRQUNSQyxpQkFBaUI7UUFDakJDLGFBQWE7UUFDYkMsUUFBUSxJQUFJTixVQUFVTyxTQUFTLENBQUM7UUFDaENDLFVBQVU7UUFDVkMsY0FBY1gsSUFBSVksWUFBWSxDQUFDQyxJQUFJO0lBQ3ZDO0lBQ0E7UUFDSVYsVUFBVTtRQUNWQyxVQUFVO1lBQUM7U0FBUTtRQUNuQkMsUUFBUTtRQUNSQyxpQkFBaUI7UUFDakJDLGFBQWE7UUFDYkMsUUFBUSxJQUFJTixVQUFVTyxTQUFTLENBQUM7UUFDaENDLFVBQVU7UUFDVkMsY0FBY1gsSUFBSVksWUFBWSxDQUFDQyxJQUFJO0lBQ3ZDO0lBQ0E7UUFDSVYsVUFBVTtRQUNWQyxVQUFVO1lBQUM7U0FBVztRQUN0QkMsUUFBUTtRQUNSQyxpQkFBaUI7UUFDakJDLGFBQWE7UUFDYkMsUUFBUSxJQUFJTixVQUFVTyxTQUFTLENBQUM7UUFDaENDLFVBQVU7UUFDVkMsY0FBY1gsSUFBSVksWUFBWSxDQUFDQyxJQUFJO0lBQ3ZDO0lBQ0E7UUFDSVYsVUFBVTtRQUNWQyxVQUFVO1lBQUM7U0FBTTtRQUNqQkMsUUFBUTtRQUNSQyxpQkFBaUI7UUFDakJDLGFBQWE7UUFDYkMsUUFBUSxJQUFJTixVQUFVTyxTQUFTLENBQUM7UUFDaENDLFVBQVU7UUFDVkMsY0FBY1gsSUFBSVksWUFBWSxDQUFDQyxJQUFJO0lBQ3ZDO0NBQ0g7QUFDRGxCLG1CQUFtQixHQUFHO0lBQ2xCb0IsUUFBUXBCLFFBQVFJLGlCQUFpQjtJQUNqQyxnQkFBZ0JKLFFBQVFHLGtCQUFrQjtBQUM5QyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9jb25zdGFudHMvcGVycE1hcmtldHMuanM/MTJjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUGVycE1hcmtldHMgPSBleHBvcnRzLk1haW5uZXRQZXJwTWFya2V0cyA9IGV4cG9ydHMuRGV2bmV0UGVycE1hcmtldHMgPSB2b2lkIDA7XG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi4vXCIpO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmV4cG9ydHMuRGV2bmV0UGVycE1hcmtldHMgPSBbXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ1NvbGFuYScsXG4gICAgICAgIGNhdGVnb3J5OiBbJ0wxJywgJ0luZnJhJ10sXG4gICAgICAgIHN5bWJvbDogJ1NPTC1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnU09MJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDAsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0o4M3c0SEtmcXh3Y3EzQkVNTWtQRlNwcFgzZ3Fla0x5TEpCZXhlYkZWa2l4JyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjU1NzUxMzUzMDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdCaXRjb2luJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTDEnLCAnUGF5bWVudCddLFxuICAgICAgICBzeW1ib2w6ICdCVEMtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ0JUQycsXG4gICAgICAgIG1hcmtldEluZGV4OiAxLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdIb3ZRTURyYkFnQVlQQ21IVlNyZXpjU21rTXRYU1NVc0xERkFORXhyWmgySicpLFxuICAgICAgICBsYXVuY2hUczogMTY1NTc1MTM1MzAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnRXRoZXJldW0nLFxuICAgICAgICBjYXRlZ29yeTogWydMMScsICdJbmZyYSddLFxuICAgICAgICBzeW1ib2w6ICdFVEgtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ0VUSCcsXG4gICAgICAgIG1hcmtldEluZGV4OiAyLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdFZFZDbVE5RlNQY1ZlNVl5U1hEUENSbWM4YURRTEtKOXh2WUJNWlBpZTFWdycpLFxuICAgICAgICBsYXVuY2hUczogMTYzNzY5MTEzMzQ3MixcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnQXB0b3MnLFxuICAgICAgICBjYXRlZ29yeTogWydMMScsICdJbmZyYSddLFxuICAgICAgICBzeW1ib2w6ICdBUFQtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ0FQVCcsXG4gICAgICAgIG1hcmtldEluZGV4OiAzLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc1ZDJRSjZ1Mk52ZVp1Zm1KNG5vSGphNUVIczNCdjFEVU1QTEc1eGZhc1NWcycpLFxuICAgICAgICBsYXVuY2hUczogMTY3NTYxMDE4NjAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnQm9uaycsXG4gICAgICAgIGNhdGVnb3J5OiBbJ01lbWUnLCAnRG9nJ10sXG4gICAgICAgIHN5bWJvbDogJzFNQk9OSy1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnMU1CT05LJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDQsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzZicXVVOTlrdFYxVlJpSERyOGdNaERGdDNrTWZoQ1FvNW5mTnJnMlVydnNuJyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjc3MDY4OTMxMDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSF8xTSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdQb2x5Z29uJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTDInLCAnSW5mcmEnXSxcbiAgICAgICAgc3ltYm9sOiAnTUFUSUMtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ01BVElDJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDUsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0ZCaXJ3dURGdVJBdTRpU0djN1JHeE41a29IQjdFSk0xd2JDbXlQdVFvR3VyJyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjc3NjkwMTQ5MDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdBcmJpdHJ1bScsXG4gICAgICAgIGNhdGVnb3J5OiBbJ0wyJywgJ0luZnJhJ10sXG4gICAgICAgIHN5bWJvbDogJ0FSQi1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnQVJCJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDYsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzRtUkdIempHZXJRTldLWHlRQW1yOWtXcWI5c2FQUEhLcW8xeHppWEdRNURoJyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjc5NTAxODEyMDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdEb2dlJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTWVtZScsICdEb2cnXSxcbiAgICAgICAgc3ltYm9sOiAnRE9HRS1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnRE9HRScsXG4gICAgICAgIG1hcmtldEluZGV4OiA3LFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc0TDZZaFk4VnZVZ21xRzVNdkprVUpBVHR6QjJyRnFkckp3UUNtRkx2NEp6eScpLFxuICAgICAgICBsYXVuY2hUczogMTY4MDgwODA1MzAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnQmluYW5jZSBDb2luJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnRXhjaGFuZ2UnXSxcbiAgICAgICAgc3ltYm9sOiAnQk5CLVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICdCTkInLFxuICAgICAgICBtYXJrZXRJbmRleDogOCxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnR3d6QmdyWGI0UEc1OXpqY2UyNFNGMmI5SlhiTEVqSkpUQmtteXR1RVpqMWInKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2ODA4MDgwNTMwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ1N1aScsXG4gICAgICAgIGNhdGVnb3J5OiBbJ0wxJ10sXG4gICAgICAgIHN5bWJvbDogJ1NVSS1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnU1VJJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDksXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzZTSzl2UzhlTVNTajNMVVgyZFBrdTkzQ3JOdjh4TENwOW5nMzlGMzloN0E1JyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjgzMTI1OTA2MDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdQZXBlJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTWVtZSddLFxuICAgICAgICBzeW1ib2w6ICcxTVBFUEUtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJzFNUEVQRScsXG4gICAgICAgIG1hcmtldEluZGV4OiAxMCxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnR3o5UmZnRGVBRlNzSDdCSERHeU5UZ0Npazc0cmpOd3NvZEpwc0Npenpta2onKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2ODM3ODEyMzkwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRIXzFNLFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ09QJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTDInLCAnSW5mcmEnXSxcbiAgICAgICAgc3ltYm9sOiAnT1AtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ09QJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDExLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc4Y3RTaURoQTdlSm9paTRUa0tWOFJ4NEtGZHozeWNzQTFGWHk5d3E1NnF1RycpLFxuICAgICAgICBsYXVuY2hUczogMTY4NjA5MTQ4MDAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnUk5EUicsXG4gICAgICAgIGNhdGVnb3J5OiBbJ0luZnJhJ10sXG4gICAgICAgIHN5bWJvbDogJ1JORFItUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ1JORFInLFxuICAgICAgICBtYXJrZXRJbmRleDogMTIsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0MyUXZVUEJpVTNmVmlTeXFBNG5aZ0d5WXFMZ1lmOVBScGQ4QjhvTG9vNDh3JyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjg3MjAxMDgxMDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdYUlAnLFxuICAgICAgICBjYXRlZ29yeTogWydQYXltZW50cyddLFxuICAgICAgICBzeW1ib2w6ICdYUlAtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ1hSUCcsXG4gICAgICAgIG1hcmtldEluZGV4OiAxMyxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnRHVHNDVUZDZkZ0pCZTY0RWJ5bWIxV2pCeXMxNkwxVlRRZG9BVVJkc3ZpcU4nKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2ODkyNzA1NTAwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ0hOVCcsXG4gICAgICAgIGNhdGVnb3J5OiBbJ0lvVCddLFxuICAgICAgICBzeW1ib2w6ICdITlQtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ0hOVCcsXG4gICAgICAgIG1hcmtldEluZGV4OiAxNCxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnNkVnOFlkZkZKUUYySEhvbnpQVUJTQ0NteVVFaHJTdGc5VkJMSzk1N3NCZTYnKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2OTIyOTQ5NTUwMDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuXTtcbmV4cG9ydHMuTWFpbm5ldFBlcnBNYXJrZXRzID0gW1xuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdTb2xhbmEnLFxuICAgICAgICBjYXRlZ29yeTogWydMMScsICdJbmZyYSddLFxuICAgICAgICBzeW1ib2w6ICdTT0wtUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ1NPTCcsXG4gICAgICAgIG1hcmtldEluZGV4OiAwLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdINkFSSGY2WVhoR1llUWZVelFOR2s2ckRObkxCUUtyZW5ONzEySzRBUUpFRycpLFxuICAgICAgICBsYXVuY2hUczogMTY2NzU2MDUwNTAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnQml0Y29pbicsXG4gICAgICAgIGNhdGVnb3J5OiBbJ0wxJywgJ1BheW1lbnQnXSxcbiAgICAgICAgc3ltYm9sOiAnQlRDLVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICdCVEMnLFxuICAgICAgICBtYXJrZXRJbmRleDogMSxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnR1ZYUlNCakZrNmU2SjNOYlZQWG9oREpldGNUamFlZXV5a1VwYlFGOFVvTVUnKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2NzAzNDcyODEwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ0V0aGVyZXVtJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTDEnLCAnSW5mcmEnXSxcbiAgICAgICAgc3ltYm9sOiAnRVRILVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICdFVEgnLFxuICAgICAgICBtYXJrZXRJbmRleDogMixcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnSkJ1MUFMNG9iQmNDTXFLQkJ4aHBXQ05VdDEzNmlqY3VNWkxGdlRQN2lXZEInKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2NzAzNDcyODEwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ0FwdG9zJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTDEnLCAnSW5mcmEnXSxcbiAgICAgICAgc3ltYm9sOiAnQVBULVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICdBUFQnLFxuICAgICAgICBtYXJrZXRJbmRleDogMyxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnRk5OdmIxQUZEbkRWUGtvY0VyaThtV2JKMTk1MkhRWnRGTHV3UGlValNKUScpLFxuICAgICAgICBsYXVuY2hUczogMTY3NTgwMjY2MTAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnQm9uaycsXG4gICAgICAgIGNhdGVnb3J5OiBbJ01lbWUnXSxcbiAgICAgICAgc3ltYm9sOiAnMU1CT05LLVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICcxTUJPTksnLFxuICAgICAgICBtYXJrZXRJbmRleDogNCxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnOGloRkx1NUZpbWdUUTFVbmg0ZFZ5RUhVR29kSjVnSlFDclFmNEtVVkI5Yk4nKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2Nzc2OTAxNDkwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRIXzFNLFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ1BvbHlnb24nLFxuICAgICAgICBjYXRlZ29yeTogWydMMicsICdJbmZyYSddLFxuICAgICAgICBzeW1ib2w6ICdNQVRJQy1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnTUFUSUMnLFxuICAgICAgICBtYXJrZXRJbmRleDogNSxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnN0tWc3dCOXZrQ2dlTTNTSFA3YUdEaWp2ZFJBSEs4UDV3aTlKWFZpQ3J0WWgnKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2Nzc2OTAxNDkwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ0FyYml0cnVtJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTDInLCAnSW5mcmEnXSxcbiAgICAgICAgc3ltYm9sOiAnQVJCLVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICdBUkInLFxuICAgICAgICBtYXJrZXRJbmRleDogNixcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnNUhScmRtZ2hzblUzaTJ1NVN0YUtheWRTN2VxM3ZuS1ZLd1hNekNOS3NjNEMnKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2Nzk1MDE4MTIwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ0RvZ2UnLFxuICAgICAgICBjYXRlZ29yeTogWydNZW1lJywgJ0RvZyddLFxuICAgICAgICBzeW1ib2w6ICdET0dFLVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICdET0dFJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDcsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0ZzU00zczM4UFg5SzdEbjZlR3p1RTI5UzJEc2sxU3NzMWJheXRUUWRDYVFqJyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjgwODA4MDUzMDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdCaW5hbmNlIENvaW4nLFxuICAgICAgICBjYXRlZ29yeTogWydFeGNoYW5nZSddLFxuICAgICAgICBzeW1ib2w6ICdCTkItUEVSUCcsXG4gICAgICAgIGJhc2VBc3NldFN5bWJvbDogJ0JOQicsXG4gICAgICAgIG1hcmtldEluZGV4OiA4LFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc0Q2tRSkJ4aFU4RVoyVWpoaWdidGRhUGJwVGU2bXFmODExZmlwWUJGYlNZTicpLFxuICAgICAgICBsYXVuY2hUczogMTY4MDgwODA1MzAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnU3VpJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnTDEnXSxcbiAgICAgICAgc3ltYm9sOiAnU1VJLVBFUlAnLFxuICAgICAgICBiYXNlQXNzZXRTeW1ib2w6ICdTVUknLFxuICAgICAgICBtYXJrZXRJbmRleDogOSxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnM1F1YjNIYUFKYWEyeE5ZN1NVcVBLZDN2VndUcURmRERrRVVNUGpYRDJjMXEnKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2ODMxMjU5MDYwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ1BlcGUnLFxuICAgICAgICBjYXRlZ29yeTogWydNZW1lJ10sXG4gICAgICAgIHN5bWJvbDogJzFNUEVQRS1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnMU1QRVBFJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDEwLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdGU2Z4dW5EbWpqYkRWMlF4cHl4RkNBUEttWUpIU0xuTHV2UVhETGtNekxCbScpLFxuICAgICAgICBsYXVuY2hUczogMTY4Mzc4MTIzOTAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEhfMU0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnT1AnLFxuICAgICAgICBjYXRlZ29yeTogWydMMicsICdJbmZyYSddLFxuICAgICAgICBzeW1ib2w6ICdPUC1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnT1AnLFxuICAgICAgICBtYXJrZXRJbmRleDogMTEsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzRvNENVd3pGd0xxQ3ZtQTV4MUc0VnpvWmtBaEFjYml1aVl5aldYMUNWYlkyJyksXG4gICAgICAgIGxhdW5jaFRzOiAxNjg2MDkxNDgwMDAwLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgZnVsbE5hbWU6ICdSTkRSJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnSW5mcmEnXSxcbiAgICAgICAgc3ltYm9sOiAnUk5EUi1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnUk5EUicsXG4gICAgICAgIG1hcmtldEluZGV4OiAxMixcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnQ1lHZnJCSkI5SGdMZjlpWnlONGFINUh2VUFpMmh0UTRNalB4ZVhNZjRFZ24nKSxcbiAgICAgICAgbGF1bmNoVHM6IDE2ODcyMDEwODEwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG4gICAge1xuICAgICAgICBmdWxsTmFtZTogJ1hSUCcsXG4gICAgICAgIGNhdGVnb3J5OiBbJ1BheW1lbnRzJ10sXG4gICAgICAgIHN5bWJvbDogJ1hSUC1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnWFJQJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDEzLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdHdWZmYjhEQUF4Tkg2a2RvYXdZalBYVGJ3VWhqbXZlaDhSNExNNnVFcVJWMScpLFxuICAgICAgICBsYXVuY2hUczogMTY4OTI3MDU1MDAwMCxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGZ1bGxOYW1lOiAnSE5UJyxcbiAgICAgICAgY2F0ZWdvcnk6IFsnSW9UJ10sXG4gICAgICAgIHN5bWJvbDogJ0hOVC1QRVJQJyxcbiAgICAgICAgYmFzZUFzc2V0U3ltYm9sOiAnSE5UJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDE0LFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc3bW9BMWk1dlFVcGZEd1NwSzZQdzlzNTZhaEI3V0ZHaWR0YkwydWpXclZ2bScpLFxuICAgICAgICBsYXVuY2hUczogMTY5MjI5NDk1NTAwMDAsXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgIH0sXG5dO1xuZXhwb3J0cy5QZXJwTWFya2V0cyA9IHtcbiAgICBkZXZuZXQ6IGV4cG9ydHMuRGV2bmV0UGVycE1hcmtldHMsXG4gICAgJ21haW5uZXQtYmV0YSc6IGV4cG9ydHMuTWFpbm5ldFBlcnBNYXJrZXRzLFxufTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlBlcnBNYXJrZXRzIiwiTWFpbm5ldFBlcnBNYXJrZXRzIiwiRGV2bmV0UGVycE1hcmtldHMiLCJfXzEiLCJyZXF1aXJlIiwid2ViM19qc18xIiwiZnVsbE5hbWUiLCJjYXRlZ29yeSIsInN5bWJvbCIsImJhc2VBc3NldFN5bWJvbCIsIm1hcmtldEluZGV4Iiwib3JhY2xlIiwiUHVibGljS2V5IiwibGF1bmNoVHMiLCJvcmFjbGVTb3VyY2UiLCJPcmFjbGVTb3VyY2UiLCJQWVRIIiwiUFlUSF8xTSIsImRldm5ldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/constants/perpMarkets.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/constants/spotMarkets.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/constants/spotMarkets.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SpotMarkets = exports.MainnetSpotMarkets = exports.DevnetSpotMarkets = exports.WRAPPED_SOL_MINT = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst __1 = __webpack_require__(/*! ../ */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ./numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nexports.WRAPPED_SOL_MINT = new web3_js_1.PublicKey(\"So11111111111111111111111111111111111111112\");\nexports.DevnetSpotMarkets = [\n    {\n        symbol: \"USDC\",\n        marketIndex: 0,\n        oracle: new web3_js_1.PublicKey(\"5SSkXsEKQepHHAewytPVwdej4epN1nxgLVM84L4KXgy7\"),\n        oracleSource: __1.OracleSource.PYTH_STABLE_COIN,\n        mint: new web3_js_1.PublicKey(\"8zGuJQqwhZafTah7Uc7Z4tXRnguqkn5KLFAP8oV6PHe2\"),\n        precision: new __1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX\n    },\n    {\n        symbol: \"SOL\",\n        marketIndex: 1,\n        oracle: new web3_js_1.PublicKey(\"J83w4HKfqxwcq3BEMMkPFSppX3gqekLyLJBexebFVkix\"),\n        oracleSource: __1.OracleSource.PYTH,\n        mint: new web3_js_1.PublicKey(exports.WRAPPED_SOL_MINT),\n        precision: numericConstants_1.LAMPORTS_PRECISION,\n        precisionExp: numericConstants_1.LAMPORTS_EXP,\n        serumMarket: new web3_js_1.PublicKey(\"8N37SsnTu8RYxtjrV9SStjkkwVhmU8aCWhLvwduAPEKW\"),\n        phoenixMarket: new web3_js_1.PublicKey(\"78ehDnHgbkFxqXZwdFxa8HK7saX58GymeX2wNGdkqYLp\")\n    },\n    {\n        symbol: \"BTC\",\n        marketIndex: 2,\n        oracle: new web3_js_1.PublicKey(\"HovQMDrbAgAYPCmHVSrezcSmkMtXSSUsLDFANExrZh2J\"),\n        oracleSource: __1.OracleSource.PYTH,\n        mint: new web3_js_1.PublicKey(\"3BZPwbcqB5kKScF3TEXxwNfx5ipV13kbRVDvfVp5c6fv\"),\n        precision: new __1.BN(10).pow(numericConstants_1.SIX),\n        precisionExp: numericConstants_1.SIX,\n        serumMarket: new web3_js_1.PublicKey(\"AGsmbVu3MS9u68GEYABWosQQCZwmLcBHu4pWEuBYH7Za\")\n    }\n];\nexports.MainnetSpotMarkets = [\n    {\n        symbol: \"USDC\",\n        marketIndex: 0,\n        oracle: new web3_js_1.PublicKey(\"Gnt27xtC473ZT2Mw5u8wZ68Z3gULkSTb5DuxJy7eJotD\"),\n        oracleSource: __1.OracleSource.PYTH_STABLE_COIN,\n        mint: new web3_js_1.PublicKey(\"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\"),\n        precision: numericConstants_1.QUOTE_PRECISION,\n        precisionExp: numericConstants_1.QUOTE_PRECISION_EXP\n    },\n    {\n        symbol: \"SOL\",\n        marketIndex: 1,\n        oracle: new web3_js_1.PublicKey(\"H6ARHf6YXhGYeQfUzQNGk6rDNnLBQKrenN712K4AQJEG\"),\n        oracleSource: __1.OracleSource.PYTH,\n        mint: new web3_js_1.PublicKey(exports.WRAPPED_SOL_MINT),\n        precision: numericConstants_1.LAMPORTS_PRECISION,\n        precisionExp: numericConstants_1.LAMPORTS_EXP,\n        serumMarket: new web3_js_1.PublicKey(\"8BnEgHoWFysVcuFFX7QztDmzuH8r5ZFvyP3sYwn1XTh6\"),\n        phoenixMarket: new web3_js_1.PublicKey(\"4DoNfFBfF7UokCC2FQzriy7yHK6DY6NVdYpuekQ5pRgg\")\n    },\n    {\n        symbol: \"mSOL\",\n        marketIndex: 2,\n        oracle: new web3_js_1.PublicKey(\"E4v1BBgoso9s64TQvmyownAVJbhbEPGyzA3qn4n46qj9\"),\n        oracleSource: __1.OracleSource.PYTH,\n        mint: new web3_js_1.PublicKey(\"mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So\"),\n        precision: new __1.BN(10).pow(numericConstants_1.NINE),\n        precisionExp: numericConstants_1.NINE,\n        serumMarket: new web3_js_1.PublicKey(\"9Lyhks5bQQxb9EyyX55NtgKQzpM4WK7JCmeaWuQ5MoXD\")\n    },\n    {\n        symbol: \"wBTC\",\n        marketIndex: 3,\n        oracle: new web3_js_1.PublicKey(\"GVXRSBjFk6e6J3NbVPXohDJetcTjaeeuykUpbQF8UoMU\"),\n        oracleSource: __1.OracleSource.PYTH,\n        mint: new web3_js_1.PublicKey(\"3NZ9JMVBmGAqocybic2c7LQCJScmgsAZ6vQqTDzcqmJh\"),\n        precision: new __1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        serumMarket: new web3_js_1.PublicKey(\"3BAKsQd3RuhZKES2DGysMhjBdwjZYKYmxRqnSMtZ4KSN\")\n    },\n    {\n        symbol: \"wETH\",\n        marketIndex: 4,\n        oracle: new web3_js_1.PublicKey(\"JBu1AL4obBcCMqKBBxhpWCNUt136ijcuMZLFvTP7iWdB\"),\n        oracleSource: __1.OracleSource.PYTH,\n        mint: new web3_js_1.PublicKey(\"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs\"),\n        precision: new __1.BN(10).pow(numericConstants_1.EIGHT),\n        precisionExp: numericConstants_1.EIGHT,\n        serumMarket: new web3_js_1.PublicKey(\"BbJgE7HZMaDp5NTYvRh5jZSkQPVDTU8ubPFtpogUkEj4\")\n    },\n    {\n        symbol: \"USDT\",\n        marketIndex: 5,\n        oracle: new web3_js_1.PublicKey(\"3vxLXJqLqF3JG5TCbYycbKWRBbCJQLxQmBGCkyqEEefL\"),\n        oracleSource: __1.OracleSource.PYTH_STABLE_COIN,\n        mint: new web3_js_1.PublicKey(\"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB\"),\n        precision: numericConstants_1.QUOTE_PRECISION,\n        precisionExp: numericConstants_1.QUOTE_PRECISION_EXP,\n        serumMarket: new web3_js_1.PublicKey(\"B2na8Awyd7cpC59iEU43FagJAPLigr3AP3s38KM982bu\")\n    }\n];\nexports.SpotMarkets = {\n    devnet: exports.DevnetSpotMarkets,\n    \"mainnet-beta\": exports.MainnetSpotMarkets\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9jb25zdGFudHMvc3BvdE1hcmtldHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG1CQUFtQixHQUFHQSwwQkFBMEIsR0FBR0EseUJBQXlCLEdBQUdBLHdCQUF3QixHQUFHLEtBQUs7QUFDL0csTUFBTU0sWUFBWUMsbUJBQU9BLENBQUMsOEVBQWlCO0FBQzNDLE1BQU1DLE1BQU1ELG1CQUFPQSxDQUFDLDhEQUFLO0FBQ3pCLE1BQU1FLHFCQUFxQkYsbUJBQU9BLENBQUMsa0dBQW9CO0FBQ3ZEUCx3QkFBd0IsR0FBRyxJQUFJTSxVQUFVSSxTQUFTLENBQUM7QUFDbkRWLHlCQUF5QixHQUFHO0lBQ3hCO1FBQ0lXLFFBQVE7UUFDUkMsYUFBYTtRQUNiQyxRQUFRLElBQUlQLFVBQVVJLFNBQVMsQ0FBQztRQUNoQ0ksY0FBY04sSUFBSU8sWUFBWSxDQUFDQyxnQkFBZ0I7UUFDL0NDLE1BQU0sSUFBSVgsVUFBVUksU0FBUyxDQUFDO1FBQzlCUSxXQUFXLElBQUlWLElBQUlXLEVBQUUsQ0FBQyxJQUFJQyxHQUFHLENBQUNYLG1CQUFtQlksR0FBRztRQUNwREMsY0FBY2IsbUJBQW1CWSxHQUFHO0lBQ3hDO0lBQ0E7UUFDSVYsUUFBUTtRQUNSQyxhQUFhO1FBQ2JDLFFBQVEsSUFBSVAsVUFBVUksU0FBUyxDQUFDO1FBQ2hDSSxjQUFjTixJQUFJTyxZQUFZLENBQUNRLElBQUk7UUFDbkNOLE1BQU0sSUFBSVgsVUFBVUksU0FBUyxDQUFDVixRQUFRSyxnQkFBZ0I7UUFDdERhLFdBQVdULG1CQUFtQmUsa0JBQWtCO1FBQ2hERixjQUFjYixtQkFBbUJnQixZQUFZO1FBQzdDQyxhQUFhLElBQUlwQixVQUFVSSxTQUFTLENBQUM7UUFDckNpQixlQUFlLElBQUlyQixVQUFVSSxTQUFTLENBQUM7SUFDM0M7SUFDQTtRQUNJQyxRQUFRO1FBQ1JDLGFBQWE7UUFDYkMsUUFBUSxJQUFJUCxVQUFVSSxTQUFTLENBQUM7UUFDaENJLGNBQWNOLElBQUlPLFlBQVksQ0FBQ1EsSUFBSTtRQUNuQ04sTUFBTSxJQUFJWCxVQUFVSSxTQUFTLENBQUM7UUFDOUJRLFdBQVcsSUFBSVYsSUFBSVcsRUFBRSxDQUFDLElBQUlDLEdBQUcsQ0FBQ1gsbUJBQW1CWSxHQUFHO1FBQ3BEQyxjQUFjYixtQkFBbUJZLEdBQUc7UUFDcENLLGFBQWEsSUFBSXBCLFVBQVVJLFNBQVMsQ0FBQztJQUN6QztDQUNIO0FBQ0RWLDBCQUEwQixHQUFHO0lBQ3pCO1FBQ0lXLFFBQVE7UUFDUkMsYUFBYTtRQUNiQyxRQUFRLElBQUlQLFVBQVVJLFNBQVMsQ0FBQztRQUNoQ0ksY0FBY04sSUFBSU8sWUFBWSxDQUFDQyxnQkFBZ0I7UUFDL0NDLE1BQU0sSUFBSVgsVUFBVUksU0FBUyxDQUFDO1FBQzlCUSxXQUFXVCxtQkFBbUJtQixlQUFlO1FBQzdDTixjQUFjYixtQkFBbUJvQixtQkFBbUI7SUFDeEQ7SUFDQTtRQUNJbEIsUUFBUTtRQUNSQyxhQUFhO1FBQ2JDLFFBQVEsSUFBSVAsVUFBVUksU0FBUyxDQUFDO1FBQ2hDSSxjQUFjTixJQUFJTyxZQUFZLENBQUNRLElBQUk7UUFDbkNOLE1BQU0sSUFBSVgsVUFBVUksU0FBUyxDQUFDVixRQUFRSyxnQkFBZ0I7UUFDdERhLFdBQVdULG1CQUFtQmUsa0JBQWtCO1FBQ2hERixjQUFjYixtQkFBbUJnQixZQUFZO1FBQzdDQyxhQUFhLElBQUlwQixVQUFVSSxTQUFTLENBQUM7UUFDckNpQixlQUFlLElBQUlyQixVQUFVSSxTQUFTLENBQUM7SUFDM0M7SUFDQTtRQUNJQyxRQUFRO1FBQ1JDLGFBQWE7UUFDYkMsUUFBUSxJQUFJUCxVQUFVSSxTQUFTLENBQUM7UUFDaENJLGNBQWNOLElBQUlPLFlBQVksQ0FBQ1EsSUFBSTtRQUNuQ04sTUFBTSxJQUFJWCxVQUFVSSxTQUFTLENBQUM7UUFDOUJRLFdBQVcsSUFBSVYsSUFBSVcsRUFBRSxDQUFDLElBQUlDLEdBQUcsQ0FBQ1gsbUJBQW1CcUIsSUFBSTtRQUNyRFIsY0FBY2IsbUJBQW1CcUIsSUFBSTtRQUNyQ0osYUFBYSxJQUFJcEIsVUFBVUksU0FBUyxDQUFDO0lBQ3pDO0lBQ0E7UUFDSUMsUUFBUTtRQUNSQyxhQUFhO1FBQ2JDLFFBQVEsSUFBSVAsVUFBVUksU0FBUyxDQUFDO1FBQ2hDSSxjQUFjTixJQUFJTyxZQUFZLENBQUNRLElBQUk7UUFDbkNOLE1BQU0sSUFBSVgsVUFBVUksU0FBUyxDQUFDO1FBQzlCUSxXQUFXLElBQUlWLElBQUlXLEVBQUUsQ0FBQyxJQUFJQyxHQUFHLENBQUNYLG1CQUFtQnNCLEtBQUs7UUFDdERULGNBQWNiLG1CQUFtQnNCLEtBQUs7UUFDdENMLGFBQWEsSUFBSXBCLFVBQVVJLFNBQVMsQ0FBQztJQUN6QztJQUNBO1FBQ0lDLFFBQVE7UUFDUkMsYUFBYTtRQUNiQyxRQUFRLElBQUlQLFVBQVVJLFNBQVMsQ0FBQztRQUNoQ0ksY0FBY04sSUFBSU8sWUFBWSxDQUFDUSxJQUFJO1FBQ25DTixNQUFNLElBQUlYLFVBQVVJLFNBQVMsQ0FBQztRQUM5QlEsV0FBVyxJQUFJVixJQUFJVyxFQUFFLENBQUMsSUFBSUMsR0FBRyxDQUFDWCxtQkFBbUJzQixLQUFLO1FBQ3REVCxjQUFjYixtQkFBbUJzQixLQUFLO1FBQ3RDTCxhQUFhLElBQUlwQixVQUFVSSxTQUFTLENBQUM7SUFDekM7SUFDQTtRQUNJQyxRQUFRO1FBQ1JDLGFBQWE7UUFDYkMsUUFBUSxJQUFJUCxVQUFVSSxTQUFTLENBQUM7UUFDaENJLGNBQWNOLElBQUlPLFlBQVksQ0FBQ0MsZ0JBQWdCO1FBQy9DQyxNQUFNLElBQUlYLFVBQVVJLFNBQVMsQ0FBQztRQUM5QlEsV0FBV1QsbUJBQW1CbUIsZUFBZTtRQUM3Q04sY0FBY2IsbUJBQW1Cb0IsbUJBQW1CO1FBQ3BESCxhQUFhLElBQUlwQixVQUFVSSxTQUFTLENBQUM7SUFDekM7Q0FDSDtBQUNEVixtQkFBbUIsR0FBRztJQUNsQmdDLFFBQVFoQyxRQUFRSSxpQkFBaUI7SUFDakMsZ0JBQWdCSixRQUFRRyxrQkFBa0I7QUFDOUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvY29uc3RhbnRzL3Nwb3RNYXJrZXRzLmpzPzZhZjkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNwb3RNYXJrZXRzID0gZXhwb3J0cy5NYWlubmV0U3BvdE1hcmtldHMgPSBleHBvcnRzLkRldm5ldFNwb3RNYXJrZXRzID0gZXhwb3J0cy5XUkFQUEVEX1NPTF9NSU5UID0gdm9pZCAwO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IF9fMSA9IHJlcXVpcmUoXCIuLi9cIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9udW1lcmljQ29uc3RhbnRzXCIpO1xuZXhwb3J0cy5XUkFQUEVEX1NPTF9NSU5UID0gbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ1NvMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTInKTtcbmV4cG9ydHMuRGV2bmV0U3BvdE1hcmtldHMgPSBbXG4gICAge1xuICAgICAgICBzeW1ib2w6ICdVU0RDJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDAsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzVTU2tYc0VLUWVwSEhBZXd5dFBWd2RlajRlcE4xbnhnTFZNODRMNEtYZ3k3JyksXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRIX1NUQUJMRV9DT0lOLFxuICAgICAgICBtaW50OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnOHpHdUpRcXdoWmFmVGFoN1VjN1o0dFhSbmd1cWtuNUtMRkFQOG9WNlBIZTInKSxcbiAgICAgICAgcHJlY2lzaW9uOiBuZXcgX18xLkJOKDEwKS5wb3cobnVtZXJpY0NvbnN0YW50c18xLlNJWCksXG4gICAgICAgIHByZWNpc2lvbkV4cDogbnVtZXJpY0NvbnN0YW50c18xLlNJWCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgc3ltYm9sOiAnU09MJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDEsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0o4M3c0SEtmcXh3Y3EzQkVNTWtQRlNwcFgzZ3Fla0x5TEpCZXhlYkZWa2l4JyksXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgICAgICBtaW50OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleShleHBvcnRzLldSQVBQRURfU09MX01JTlQpLFxuICAgICAgICBwcmVjaXNpb246IG51bWVyaWNDb25zdGFudHNfMS5MQU1QT1JUU19QUkVDSVNJT04sXG4gICAgICAgIHByZWNpc2lvbkV4cDogbnVtZXJpY0NvbnN0YW50c18xLkxBTVBPUlRTX0VYUCxcbiAgICAgICAgc2VydW1NYXJrZXQ6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc4TjM3U3NuVHU4Ull4dGpyVjlTU3Rqa2t3VmhtVThhQ1doTHZ3ZHVBUEVLVycpLFxuICAgICAgICBwaG9lbml4TWFya2V0OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnNzhlaERuSGdia0Z4cVhad2RGeGE4SEs3c2FYNThHeW1lWDJ3Tkdka3FZTHAnKSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgc3ltYm9sOiAnQlRDJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDIsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0hvdlFNRHJiQWdBWVBDbUhWU3JlemNTbWtNdFhTU1VzTERGQU5FeHJaaDJKJyksXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgICAgICBtaW50OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnM0JaUHdiY3FCNWtLU2NGM1RFWHh3TmZ4NWlwVjEza2JSVkR2ZlZwNWM2ZnYnKSxcbiAgICAgICAgcHJlY2lzaW9uOiBuZXcgX18xLkJOKDEwKS5wb3cobnVtZXJpY0NvbnN0YW50c18xLlNJWCksXG4gICAgICAgIHByZWNpc2lvbkV4cDogbnVtZXJpY0NvbnN0YW50c18xLlNJWCxcbiAgICAgICAgc2VydW1NYXJrZXQ6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdBR3NtYlZ1M01TOXU2OEdFWUFCV29zUVFDWndtTGNCSHU0cFdFdUJZSDdaYScpLFxuICAgIH0sXG5dO1xuZXhwb3J0cy5NYWlubmV0U3BvdE1hcmtldHMgPSBbXG4gICAge1xuICAgICAgICBzeW1ib2w6ICdVU0RDJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDAsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0dudDI3eHRDNDczWlQyTXc1dTh3WjY4WjNnVUxrU1RiNUR1eEp5N2VKb3REJyksXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRIX1NUQUJMRV9DT0lOLFxuICAgICAgICBtaW50OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnRVBqRldkZDVBdWZxU1NxZU0ycU4xeHp5YmFwQzhHNHdFR0drWnd5VER0MXYnKSxcbiAgICAgICAgcHJlY2lzaW9uOiBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OLFxuICAgICAgICBwcmVjaXNpb25FeHA6IG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT05fRVhQLFxuICAgIH0sXG4gICAge1xuICAgICAgICBzeW1ib2w6ICdTT0wnLFxuICAgICAgICBtYXJrZXRJbmRleDogMSxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnSDZBUkhmNllYaEdZZVFmVXpRTkdrNnJETm5MQlFLcmVuTjcxMks0QVFKRUcnKSxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgICAgIG1pbnQ6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KGV4cG9ydHMuV1JBUFBFRF9TT0xfTUlOVCksXG4gICAgICAgIHByZWNpc2lvbjogbnVtZXJpY0NvbnN0YW50c18xLkxBTVBPUlRTX1BSRUNJU0lPTixcbiAgICAgICAgcHJlY2lzaW9uRXhwOiBudW1lcmljQ29uc3RhbnRzXzEuTEFNUE9SVFNfRVhQLFxuICAgICAgICBzZXJ1bU1hcmtldDogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzhCbkVnSG9XRnlzVmN1RkZYN1F6dERtenVIOHI1WkZ2eVAzc1l3bjFYVGg2JyksXG4gICAgICAgIHBob2VuaXhNYXJrZXQ6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc0RG9OZkZCZkY3VW9rQ0MyRlF6cml5N3lISzZEWTZOVmRZcHVla1E1cFJnZycpLFxuICAgIH0sXG4gICAge1xuICAgICAgICBzeW1ib2w6ICdtU09MJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDIsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0U0djFCQmdvc285czY0VFF2bXlvd25BVkpiaGJFUEd5ekEzcW40bjQ2cWo5JyksXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRILFxuICAgICAgICBtaW50OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnbVNvTHpZQ3hIZFlnZHpVMTZnNVFTaDNpNUszejNLWks3eXRmcWNKbTdTbycpLFxuICAgICAgICBwcmVjaXNpb246IG5ldyBfXzEuQk4oMTApLnBvdyhudW1lcmljQ29uc3RhbnRzXzEuTklORSksXG4gICAgICAgIHByZWNpc2lvbkV4cDogbnVtZXJpY0NvbnN0YW50c18xLk5JTkUsXG4gICAgICAgIHNlcnVtTWFya2V0OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnOUx5aGtzNWJRUXhiOUV5eVg1NU50Z0tRenBNNFdLN0pDbWVhV3VRNU1vWEQnKSxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgc3ltYm9sOiAnd0JUQycsXG4gICAgICAgIG1hcmtldEluZGV4OiAzLFxuICAgICAgICBvcmFjbGU6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdHVlhSU0JqRms2ZTZKM05iVlBYb2hESmV0Y1RqYWVldXlrVXBiUUY4VW9NVScpLFxuICAgICAgICBvcmFjbGVTb3VyY2U6IF9fMS5PcmFjbGVTb3VyY2UuUFlUSCxcbiAgICAgICAgbWludDogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzNOWjlKTVZCbUdBcW9jeWJpYzJjN0xRQ0pTY21nc0FaNnZRcVREemNxbUpoJyksXG4gICAgICAgIHByZWNpc2lvbjogbmV3IF9fMS5CTigxMCkucG93KG51bWVyaWNDb25zdGFudHNfMS5FSUdIVCksXG4gICAgICAgIHByZWNpc2lvbkV4cDogbnVtZXJpY0NvbnN0YW50c18xLkVJR0hULFxuICAgICAgICBzZXJ1bU1hcmtldDogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzNCQUtzUWQzUnVoWktFUzJER3lzTWhqQmR3alpZS1lteFJxblNNdFo0S1NOJyksXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHN5bWJvbDogJ3dFVEgnLFxuICAgICAgICBtYXJrZXRJbmRleDogNCxcbiAgICAgICAgb3JhY2xlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnSkJ1MUFMNG9iQmNDTXFLQkJ4aHBXQ05VdDEzNmlqY3VNWkxGdlRQN2lXZEInKSxcbiAgICAgICAgb3JhY2xlU291cmNlOiBfXzEuT3JhY2xlU291cmNlLlBZVEgsXG4gICAgICAgIG1pbnQ6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCc3dmZDWFRVWHg1V0pWNUpBRGsxN0RVSjRrc2dhdTd1dE5LajRiOTYzdm94cycpLFxuICAgICAgICBwcmVjaXNpb246IG5ldyBfXzEuQk4oMTApLnBvdyhudW1lcmljQ29uc3RhbnRzXzEuRUlHSFQpLFxuICAgICAgICBwcmVjaXNpb25FeHA6IG51bWVyaWNDb25zdGFudHNfMS5FSUdIVCxcbiAgICAgICAgc2VydW1NYXJrZXQ6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdCYkpnRTdIWk1hRHA1TlRZdlJoNWpaU2tRUFZEVFU4dWJQRnRwb2dVa0VqNCcpLFxuICAgIH0sXG4gICAge1xuICAgICAgICBzeW1ib2w6ICdVU0RUJyxcbiAgICAgICAgbWFya2V0SW5kZXg6IDUsXG4gICAgICAgIG9yYWNsZTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzN2eExYSnFMcUYzSkc1VENiWXljYktXUkJiQ0pRTHhRbUJHQ2t5cUVFZWZMJyksXG4gICAgICAgIG9yYWNsZVNvdXJjZTogX18xLk9yYWNsZVNvdXJjZS5QWVRIX1NUQUJMRV9DT0lOLFxuICAgICAgICBtaW50OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnRXM5dk1GcnphQ0VSbUpmckY0SDJGWUQ0S0NvTmtZMTFNY0NlOEJlbndOWUInKSxcbiAgICAgICAgcHJlY2lzaW9uOiBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OLFxuICAgICAgICBwcmVjaXNpb25FeHA6IG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT05fRVhQLFxuICAgICAgICBzZXJ1bU1hcmtldDogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0IybmE4QXd5ZDdjcEM1OWlFVTQzRmFnSkFQTGlncjNBUDNzMzhLTTk4MmJ1JyksXG4gICAgfSxcbl07XG5leHBvcnRzLlNwb3RNYXJrZXRzID0ge1xuICAgIGRldm5ldDogZXhwb3J0cy5EZXZuZXRTcG90TWFya2V0cyxcbiAgICAnbWFpbm5ldC1iZXRhJzogZXhwb3J0cy5NYWlubmV0U3BvdE1hcmtldHMsXG59O1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiU3BvdE1hcmtldHMiLCJNYWlubmV0U3BvdE1hcmtldHMiLCJEZXZuZXRTcG90TWFya2V0cyIsIldSQVBQRURfU09MX01JTlQiLCJ3ZWIzX2pzXzEiLCJyZXF1aXJlIiwiX18xIiwibnVtZXJpY0NvbnN0YW50c18xIiwiUHVibGljS2V5Iiwic3ltYm9sIiwibWFya2V0SW5kZXgiLCJvcmFjbGUiLCJvcmFjbGVTb3VyY2UiLCJPcmFjbGVTb3VyY2UiLCJQWVRIX1NUQUJMRV9DT0lOIiwibWludCIsInByZWNpc2lvbiIsIkJOIiwicG93IiwiU0lYIiwicHJlY2lzaW9uRXhwIiwiUFlUSCIsIkxBTVBPUlRTX1BSRUNJU0lPTiIsIkxBTVBPUlRTX0VYUCIsInNlcnVtTWFya2V0IiwicGhvZW5peE1hcmtldCIsIlFVT1RFX1BSRUNJU0lPTiIsIlFVT1RFX1BSRUNJU0lPTl9FWFAiLCJOSU5FIiwiRUlHSFQiLCJkZXZuZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/constants/spotMarkets.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOB.js":
/*!*******************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/DLOB.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DLOB = void 0;\nconst NodeList_1 = __webpack_require__(/*! ./NodeList */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/NodeList.js\");\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst exchangeStatus_1 = __webpack_require__(/*! ../math/exchangeStatus */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/exchangeStatus.js\");\nconst orderBookLevels_1 = __webpack_require__(/*! ./orderBookLevels */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/orderBookLevels.js\");\nconst SUPPORTED_ORDER_TYPES = [\n    \"market\",\n    \"limit\",\n    \"triggerMarket\",\n    \"triggerLimit\",\n    \"oracle\"\n];\nclass DLOB {\n    constructor(){\n        this.openOrders = new Map();\n        this.orderLists = new Map();\n        this.maxSlotForRestingLimitOrders = 0;\n        this.initialized = false;\n        this.init();\n    }\n    init() {\n        this.openOrders.set(\"perp\", new Set());\n        this.openOrders.set(\"spot\", new Set());\n        this.orderLists.set(\"perp\", new Map());\n        this.orderLists.set(\"spot\", new Map());\n    }\n    clear() {\n        for (const marketType of this.openOrders.keys()){\n            this.openOrders.get(marketType).clear();\n        }\n        this.openOrders.clear();\n        for (const marketType of this.orderLists.keys()){\n            for (const marketIndex of this.orderLists.get(marketType).keys()){\n                const marketNodeLists = this.orderLists.get(marketType).get(marketIndex);\n                for (const side of Object.keys(marketNodeLists)){\n                    for (const orderType of Object.keys(marketNodeLists[side])){\n                        marketNodeLists[side][orderType].clear();\n                    }\n                }\n            }\n        }\n        this.orderLists.clear();\n        this.maxSlotForRestingLimitOrders = 0;\n        this.init();\n    }\n    /**\n     * initializes a new DLOB instance\n     *\n     * @returns a promise that resolves when the DLOB is initialized\n     */ async initFromUserMap(userMap, slot) {\n        if (this.initialized) {\n            return false;\n        }\n        // initialize the dlob with the user map\n        for (const user of userMap.values()){\n            const userAccount = user.getUserAccount();\n            const userAccountPubkey = user.getUserAccountPublicKey();\n            for (const order of userAccount.orders){\n                this.insertOrder(order, userAccountPubkey, slot);\n            }\n        }\n        this.initialized = true;\n        return true;\n    }\n    initFromOrders(dlobOrders, slot) {\n        if (this.initialized) {\n            return false;\n        }\n        for (const { user, order } of dlobOrders){\n            this.insertOrder(order, user, slot);\n        }\n        this.initialized = true;\n        return true;\n    }\n    handleOrderRecord(record, slot) {\n        this.insertOrder(record.order, record.user, slot);\n    }\n    handleOrderActionRecord(record, slot) {\n        if ((0, __1.isOneOfVariant)(record.action, [\n            \"place\",\n            \"expire\"\n        ])) {\n            return;\n        }\n        if ((0, __1.isVariant)(record.action, \"trigger\")) {\n            if (record.taker !== null) {\n                const takerOrder = this.getOrder(record.takerOrderId, record.taker);\n                if (takerOrder) {\n                    this.trigger(takerOrder, record.taker, slot);\n                }\n            }\n            if (record.maker !== null) {\n                const makerOrder = this.getOrder(record.makerOrderId, record.maker);\n                if (makerOrder) {\n                    this.trigger(makerOrder, record.maker, slot);\n                }\n            }\n        } else if ((0, __1.isVariant)(record.action, \"fill\")) {\n            if (record.taker !== null) {\n                const takerOrder = this.getOrder(record.takerOrderId, record.taker);\n                if (takerOrder) {\n                    this.updateOrder(takerOrder, record.taker, slot, record.takerOrderCumulativeBaseAssetAmountFilled);\n                }\n            }\n            if (record.maker !== null) {\n                const makerOrder = this.getOrder(record.makerOrderId, record.maker);\n                if (makerOrder) {\n                    this.updateOrder(makerOrder, record.maker, slot, record.makerOrderCumulativeBaseAssetAmountFilled);\n                }\n            }\n        } else if ((0, __1.isVariant)(record.action, \"cancel\")) {\n            if (record.taker !== null) {\n                const takerOrder = this.getOrder(record.takerOrderId, record.taker);\n                if (takerOrder) {\n                    this.delete(takerOrder, record.taker, slot);\n                }\n            }\n            if (record.maker !== null) {\n                const makerOrder = this.getOrder(record.makerOrderId, record.maker);\n                if (makerOrder) {\n                    this.delete(makerOrder, record.maker, slot);\n                }\n            }\n        }\n    }\n    insertOrder(order, userAccount, slot, onInsert) {\n        var _a;\n        if ((0, __1.isVariant)(order.status, \"init\")) {\n            return;\n        }\n        if (!(0, __1.isOneOfVariant)(order.orderType, SUPPORTED_ORDER_TYPES)) {\n            return;\n        }\n        const marketType = (0, __1.getVariant)(order.marketType);\n        if (!this.orderLists.get(marketType).has(order.marketIndex)) {\n            this.addOrderList(marketType, order.marketIndex);\n        }\n        if ((0, __1.isVariant)(order.status, \"open\")) {\n            this.openOrders.get(marketType).add((0, NodeList_1.getOrderSignature)(order.orderId, userAccount));\n        }\n        (_a = this.getListForOrder(order, slot)) === null || _a === void 0 ? void 0 : _a.insert(order, marketType, userAccount);\n        if (onInsert) {\n            onInsert();\n        }\n    }\n    addOrderList(marketType, marketIndex) {\n        this.orderLists.get(marketType).set(marketIndex, {\n            restingLimit: {\n                ask: new NodeList_1.NodeList(\"restingLimit\", \"asc\"),\n                bid: new NodeList_1.NodeList(\"restingLimit\", \"desc\")\n            },\n            floatingLimit: {\n                ask: new NodeList_1.NodeList(\"floatingLimit\", \"asc\"),\n                bid: new NodeList_1.NodeList(\"floatingLimit\", \"desc\")\n            },\n            takingLimit: {\n                ask: new NodeList_1.NodeList(\"takingLimit\", \"asc\"),\n                bid: new NodeList_1.NodeList(\"takingLimit\", \"asc\")\n            },\n            market: {\n                ask: new NodeList_1.NodeList(\"market\", \"asc\"),\n                bid: new NodeList_1.NodeList(\"market\", \"asc\")\n            },\n            trigger: {\n                above: new NodeList_1.NodeList(\"trigger\", \"asc\"),\n                below: new NodeList_1.NodeList(\"trigger\", \"desc\")\n            }\n        });\n    }\n    updateOrder(order, userAccount, slot, cumulativeBaseAssetAmountFilled, onUpdate) {\n        var _a;\n        this.updateRestingLimitOrders(slot);\n        if (order.baseAssetAmount.eq(cumulativeBaseAssetAmountFilled)) {\n            this.delete(order, userAccount, slot);\n            return;\n        }\n        if (order.baseAssetAmountFilled.eq(cumulativeBaseAssetAmountFilled)) {\n            return;\n        }\n        const newOrder = {\n            ...order\n        };\n        newOrder.baseAssetAmountFilled = cumulativeBaseAssetAmountFilled;\n        (_a = this.getListForOrder(order, slot)) === null || _a === void 0 ? void 0 : _a.update(newOrder, userAccount);\n        if (onUpdate) {\n            onUpdate();\n        }\n    }\n    trigger(order, userAccount, slot, onTrigger) {\n        var _a;\n        if ((0, __1.isVariant)(order.status, \"init\")) {\n            return;\n        }\n        this.updateRestingLimitOrders(slot);\n        if ((0, __1.isTriggered)(order)) {\n            return;\n        }\n        const marketType = (0, __1.getVariant)(order.marketType);\n        const triggerList = this.orderLists.get(marketType).get(order.marketIndex).trigger[(0, __1.isVariant)(order.triggerCondition, \"above\") ? \"above\" : \"below\"];\n        triggerList.remove(order, userAccount);\n        (_a = this.getListForOrder(order, slot)) === null || _a === void 0 ? void 0 : _a.insert(order, marketType, userAccount);\n        if (onTrigger) {\n            onTrigger();\n        }\n    }\n    delete(order, userAccount, slot, onDelete) {\n        var _a;\n        if ((0, __1.isVariant)(order.status, \"init\")) {\n            return;\n        }\n        this.updateRestingLimitOrders(slot);\n        (_a = this.getListForOrder(order, slot)) === null || _a === void 0 ? void 0 : _a.remove(order, userAccount);\n        if (onDelete) {\n            onDelete();\n        }\n    }\n    getListForOrder(order, slot) {\n        const isInactiveTriggerOrder = (0, __1.mustBeTriggered)(order) && !(0, __1.isTriggered)(order);\n        let type;\n        if (isInactiveTriggerOrder) {\n            type = \"trigger\";\n        } else if ((0, __1.isOneOfVariant)(order.orderType, [\n            \"market\",\n            \"triggerMarket\",\n            \"oracle\"\n        ])) {\n            type = \"market\";\n        } else if (order.oraclePriceOffset !== 0) {\n            type = \"floatingLimit\";\n        } else {\n            const isResting = (0, __1.isRestingLimitOrder)(order, slot);\n            type = isResting ? \"restingLimit\" : \"takingLimit\";\n        }\n        let subType;\n        if (isInactiveTriggerOrder) {\n            subType = (0, __1.isVariant)(order.triggerCondition, \"above\") ? \"above\" : \"below\";\n        } else {\n            subType = (0, __1.isVariant)(order.direction, \"long\") ? \"bid\" : \"ask\";\n        }\n        const marketType = (0, __1.getVariant)(order.marketType);\n        if (!this.orderLists.has(marketType)) {\n            return undefined;\n        }\n        return this.orderLists.get(marketType).get(order.marketIndex)[type][subType];\n    }\n    updateRestingLimitOrders(slot) {\n        if (slot <= this.maxSlotForRestingLimitOrders) {\n            return;\n        }\n        this.maxSlotForRestingLimitOrders = slot;\n        this.updateRestingLimitOrdersForMarketType(slot, \"perp\");\n        this.updateRestingLimitOrdersForMarketType(slot, \"spot\");\n    }\n    updateRestingLimitOrdersForMarketType(slot, marketTypeStr) {\n        for (const [_, nodeLists] of this.orderLists.get(marketTypeStr)){\n            const nodesToUpdate = [];\n            for (const node of nodeLists.takingLimit.ask.getGenerator()){\n                if (!(0, __1.isRestingLimitOrder)(node.order, slot)) {\n                    continue;\n                }\n                nodesToUpdate.push({\n                    side: \"ask\",\n                    node\n                });\n            }\n            for (const node of nodeLists.takingLimit.bid.getGenerator()){\n                if (!(0, __1.isRestingLimitOrder)(node.order, slot)) {\n                    continue;\n                }\n                nodesToUpdate.push({\n                    side: \"bid\",\n                    node\n                });\n            }\n            for (const nodeToUpdate of nodesToUpdate){\n                const { side, node } = nodeToUpdate;\n                nodeLists.takingLimit[side].remove(node.order, node.userAccount);\n                nodeLists.restingLimit[side].insert(node.order, marketTypeStr, node.userAccount);\n            }\n        }\n    }\n    getOrder(orderId, userAccount) {\n        const orderSignature = (0, NodeList_1.getOrderSignature)(orderId, userAccount);\n        for (const nodeList of this.getNodeLists()){\n            const node = nodeList.get(orderSignature);\n            if (node) {\n                return node.order;\n            }\n        }\n        return undefined;\n    }\n    findNodesToFill(marketIndex, fallbackBid, fallbackAsk, slot, ts, marketType, oraclePriceData, stateAccount, marketAccount) {\n        if ((0, exchangeStatus_1.fillPaused)(stateAccount, marketAccount)) {\n            return [];\n        }\n        const isAmmPaused = (0, exchangeStatus_1.ammPaused)(stateAccount, marketAccount);\n        const minAuctionDuration = (0, __1.isVariant)(marketType, \"perp\") ? stateAccount.minPerpAuctionDuration : 0;\n        const restingLimitOrderNodesToFill = this.findRestingLimitOrderNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, minAuctionDuration, fallbackAsk, fallbackBid);\n        const takingOrderNodesToFill = this.findTakingNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, minAuctionDuration, fallbackAsk, fallbackBid);\n        // get expired market nodes\n        const expiredNodesToFill = this.findExpiredNodesToFill(marketIndex, ts, marketType);\n        // for spot, multiple makers isn't supported, so don't merge\n        if ((0, __1.isVariant)(marketType, \"spot\")) {\n            return restingLimitOrderNodesToFill.concat(takingOrderNodesToFill, expiredNodesToFill);\n        }\n        return this.mergeNodesToFill(restingLimitOrderNodesToFill, takingOrderNodesToFill).concat(expiredNodesToFill);\n    }\n    mergeNodesToFill(restingLimitOrderNodesToFill, takingOrderNodesToFill) {\n        const mergedNodesToFill = new Map();\n        const mergeNodesToFillHelper = (nodesToFillArray)=>{\n            nodesToFillArray.forEach((nodeToFill)=>{\n                const nodeSignature = (0, NodeList_1.getOrderSignature)(nodeToFill.node.order.orderId, nodeToFill.node.userAccount);\n                if (!mergedNodesToFill.has(nodeSignature)) {\n                    mergedNodesToFill.set(nodeSignature, {\n                        node: nodeToFill.node,\n                        makerNodes: []\n                    });\n                }\n                if (nodeToFill.makerNodes) {\n                    mergedNodesToFill.get(nodeSignature).makerNodes.push(...nodeToFill.makerNodes);\n                }\n            });\n        };\n        mergeNodesToFillHelper(restingLimitOrderNodesToFill);\n        mergeNodesToFillHelper(takingOrderNodesToFill);\n        return Array.from(mergedNodesToFill.values());\n    }\n    findRestingLimitOrderNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, minAuctionDuration, fallbackAsk, fallbackBid) {\n        const nodesToFill = new Array();\n        const crossingNodes = this.findCrossingRestingLimitOrders(marketIndex, slot, marketType, oraclePriceData);\n        for (const crossingNode of crossingNodes){\n            nodesToFill.push(crossingNode);\n        }\n        if (fallbackBid && !isAmmPaused) {\n            const askGenerator = this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData);\n            const asksCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, askGenerator, fallbackBid, (askPrice, fallbackPrice)=>{\n                return askPrice.lte(fallbackPrice);\n            }, minAuctionDuration);\n            for (const askCrossingFallback of asksCrossingFallback){\n                nodesToFill.push(askCrossingFallback);\n            }\n        }\n        if (fallbackAsk && !isAmmPaused) {\n            const bidGenerator = this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData);\n            const bidsCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, bidGenerator, fallbackAsk, (bidPrice, fallbackPrice)=>{\n                return bidPrice.gte(fallbackPrice);\n            }, minAuctionDuration);\n            for (const bidCrossingFallback of bidsCrossingFallback){\n                nodesToFill.push(bidCrossingFallback);\n            }\n        }\n        return nodesToFill;\n    }\n    findTakingNodesToFill(marketIndex, slot, marketType, oraclePriceData, isAmmPaused, minAuctionDuration, fallbackAsk, fallbackBid) {\n        const nodesToFill = new Array();\n        let takingOrderGenerator = this.getTakingAsks(marketIndex, marketType, slot, oraclePriceData);\n        const takingAsksCrossingBids = this.findTakingNodesCrossingMakerNodes(marketIndex, slot, marketType, oraclePriceData, takingOrderGenerator, this.getMakerLimitBids.bind(this), (takerPrice, makerPrice)=>{\n            if ((0, __1.isVariant)(marketType, \"spot\")) {\n                if (takerPrice === undefined) {\n                    return false;\n                }\n                if (fallbackBid && makerPrice.lt(fallbackBid)) {\n                    return false;\n                }\n            }\n            return takerPrice === undefined || takerPrice.lte(makerPrice);\n        }, fallbackAsk);\n        for (const takingAskCrossingBid of takingAsksCrossingBids){\n            nodesToFill.push(takingAskCrossingBid);\n        }\n        if (fallbackBid && !isAmmPaused) {\n            takingOrderGenerator = this.getTakingAsks(marketIndex, marketType, slot, oraclePriceData);\n            const takingAsksCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, takingOrderGenerator, fallbackBid, (takerPrice, fallbackPrice)=>{\n                return takerPrice === undefined || takerPrice.lte(fallbackPrice);\n            }, minAuctionDuration);\n            for (const takingAskCrossingFallback of takingAsksCrossingFallback){\n                nodesToFill.push(takingAskCrossingFallback);\n            }\n        }\n        takingOrderGenerator = this.getTakingBids(marketIndex, marketType, slot, oraclePriceData);\n        const takingBidsToFill = this.findTakingNodesCrossingMakerNodes(marketIndex, slot, marketType, oraclePriceData, takingOrderGenerator, this.getMakerLimitAsks.bind(this), (takerPrice, makerPrice)=>{\n            if ((0, __1.isVariant)(marketType, \"spot\")) {\n                if (takerPrice === undefined) {\n                    return false;\n                }\n                if (fallbackAsk && makerPrice.gt(fallbackAsk)) {\n                    return false;\n                }\n            }\n            return takerPrice === undefined || takerPrice.gte(makerPrice);\n        }, fallbackBid);\n        for (const takingBidToFill of takingBidsToFill){\n            nodesToFill.push(takingBidToFill);\n        }\n        if (fallbackAsk && !isAmmPaused) {\n            takingOrderGenerator = this.getTakingBids(marketIndex, marketType, slot, oraclePriceData);\n            const takingBidsCrossingFallback = this.findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, takingOrderGenerator, fallbackAsk, (takerPrice, fallbackPrice)=>{\n                return takerPrice === undefined || takerPrice.gte(fallbackPrice);\n            }, minAuctionDuration);\n            for (const marketBidCrossingFallback of takingBidsCrossingFallback){\n                nodesToFill.push(marketBidCrossingFallback);\n            }\n        }\n        return nodesToFill;\n    }\n    findTakingNodesCrossingMakerNodes(marketIndex, slot, marketType, oraclePriceData, takerNodeGenerator, makerNodeGeneratorFn, doesCross, fallbackPrice) {\n        const nodesToFill = new Array();\n        for (const takerNode of takerNodeGenerator){\n            const makerNodeGenerator = makerNodeGeneratorFn(marketIndex, slot, marketType, oraclePriceData, fallbackPrice);\n            for (const makerNode of makerNodeGenerator){\n                // Can't match orders from the same user\n                const sameUser = takerNode.userAccount.equals(makerNode.userAccount);\n                if (sameUser) {\n                    continue;\n                }\n                const makerPrice = makerNode.getPrice(oraclePriceData, slot);\n                const takerPrice = takerNode.getPrice(oraclePriceData, slot);\n                const ordersCross = doesCross(takerPrice, makerPrice);\n                if (!ordersCross) {\n                    break;\n                }\n                nodesToFill.push({\n                    node: takerNode,\n                    makerNodes: [\n                        makerNode\n                    ]\n                });\n                const makerOrder = makerNode.order;\n                const takerOrder = takerNode.order;\n                const makerBaseRemaining = makerOrder.baseAssetAmount.sub(makerOrder.baseAssetAmountFilled);\n                const takerBaseRemaining = takerOrder.baseAssetAmount.sub(takerOrder.baseAssetAmountFilled);\n                const baseFilled = __1.BN.min(makerBaseRemaining, takerBaseRemaining);\n                const newMakerOrder = {\n                    ...makerOrder\n                };\n                newMakerOrder.baseAssetAmountFilled = makerOrder.baseAssetAmountFilled.add(baseFilled);\n                this.getListForOrder(newMakerOrder, slot).update(newMakerOrder, makerNode.userAccount);\n                const newTakerOrder = {\n                    ...takerOrder\n                };\n                newTakerOrder.baseAssetAmountFilled = takerOrder.baseAssetAmountFilled.add(baseFilled);\n                this.getListForOrder(newTakerOrder, slot).update(newTakerOrder, takerNode.userAccount);\n                if (newTakerOrder.baseAssetAmountFilled.eq(takerOrder.baseAssetAmount)) {\n                    break;\n                }\n            }\n        }\n        return nodesToFill;\n    }\n    findNodesCrossingFallbackLiquidity(marketType, slot, oraclePriceData, nodeGenerator, fallbackPrice, doesCross, minAuctionDuration) {\n        var _a;\n        const nodesToFill = new Array();\n        let nextNode = nodeGenerator.next();\n        while(!nextNode.done){\n            const node = nextNode.value;\n            if ((0, __1.isVariant)(marketType, \"spot\") && ((_a = node.order) === null || _a === void 0 ? void 0 : _a.postOnly)) {\n                nextNode = nodeGenerator.next();\n                continue;\n            }\n            const nodePrice = (0, __1.getLimitPrice)(node.order, oraclePriceData, slot);\n            // order crosses if there is no limit price or it crosses fallback price\n            const crosses = doesCross(nodePrice, fallbackPrice);\n            // fallback is available if auction is complete or it's a spot order\n            const fallbackAvailable = (0, __1.isVariant)(marketType, \"spot\") || (0, __1.isFallbackAvailableLiquiditySource)(node.order, minAuctionDuration, slot);\n            if (crosses && fallbackAvailable) {\n                nodesToFill.push({\n                    node: node,\n                    makerNodes: []\n                });\n            }\n            nextNode = nodeGenerator.next();\n        }\n        return nodesToFill;\n    }\n    findExpiredNodesToFill(marketIndex, ts, marketType) {\n        const nodesToFill = new Array();\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        const nodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!nodeLists) {\n            return nodesToFill;\n        }\n        // All bids/asks that can expire\n        // dont try to expire limit orders with tif as its inefficient use of blockspace\n        const bidGenerators = [\n            nodeLists.takingLimit.bid.getGenerator(),\n            nodeLists.restingLimit.bid.getGenerator(),\n            nodeLists.floatingLimit.bid.getGenerator(),\n            nodeLists.market.bid.getGenerator()\n        ];\n        const askGenerators = [\n            nodeLists.takingLimit.ask.getGenerator(),\n            nodeLists.restingLimit.ask.getGenerator(),\n            nodeLists.floatingLimit.ask.getGenerator(),\n            nodeLists.market.ask.getGenerator()\n        ];\n        for (const bidGenerator of bidGenerators){\n            for (const bid of bidGenerator){\n                if ((0, __1.isOrderExpired)(bid.order, ts, true)) {\n                    nodesToFill.push({\n                        node: bid,\n                        makerNodes: []\n                    });\n                }\n            }\n        }\n        for (const askGenerator of askGenerators){\n            for (const ask of askGenerator){\n                if ((0, __1.isOrderExpired)(ask.order, ts, true)) {\n                    nodesToFill.push({\n                        node: ask,\n                        makerNodes: []\n                    });\n                }\n            }\n        }\n        return nodesToFill;\n    }\n    findJitAuctionNodesToFill(marketIndex, slot, oraclePriceData, marketType) {\n        const nodesToFill = new Array();\n        // Then see if there are orders still in JIT auction\n        for (const marketBid of this.getTakingBids(marketIndex, marketType, slot, oraclePriceData)){\n            nodesToFill.push({\n                node: marketBid,\n                makerNodes: []\n            });\n        }\n        for (const marketAsk of this.getTakingAsks(marketIndex, marketType, slot, oraclePriceData)){\n            nodesToFill.push({\n                node: marketAsk,\n                makerNodes: []\n            });\n        }\n        return nodesToFill;\n    }\n    *getTakingBids(marketIndex, marketType, slot, oraclePriceData) {\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        const orderLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!orderLists) {\n            return;\n        }\n        this.updateRestingLimitOrders(slot);\n        const generatorList = [\n            orderLists.market.bid.getGenerator(),\n            orderLists.takingLimit.bid.getGenerator()\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode)=>{\n            return bestNode.order.slot.lt(currentNode.order.slot);\n        });\n    }\n    *getTakingAsks(marketIndex, marketType, slot, oraclePriceData) {\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        const orderLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!orderLists) {\n            return;\n        }\n        this.updateRestingLimitOrders(slot);\n        const generatorList = [\n            orderLists.market.ask.getGenerator(),\n            orderLists.takingLimit.ask.getGenerator()\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode)=>{\n            return bestNode.order.slot.lt(currentNode.order.slot);\n        });\n    }\n    *getBestNode(generatorList, oraclePriceData, slot, compareFcn) {\n        const generators = generatorList.map((generator)=>{\n            return {\n                next: generator.next(),\n                generator\n            };\n        });\n        let sideExhausted = false;\n        while(!sideExhausted){\n            const bestGenerator = generators.reduce((bestGenerator, currentGenerator)=>{\n                if (currentGenerator.next.done) {\n                    return bestGenerator;\n                }\n                if (bestGenerator.next.done) {\n                    return currentGenerator;\n                }\n                const bestValue = bestGenerator.next.value;\n                const currentValue = currentGenerator.next.value;\n                return compareFcn(bestValue, currentValue, slot, oraclePriceData) ? bestGenerator : currentGenerator;\n            });\n            if (!bestGenerator.next.done) {\n                // skip this node if it's already completely filled\n                if (bestGenerator.next.value.isBaseFilled()) {\n                    bestGenerator.next = bestGenerator.generator.next();\n                    continue;\n                }\n                yield bestGenerator.next.value;\n                bestGenerator.next = bestGenerator.generator.next();\n            } else {\n                sideExhausted = true;\n            }\n        }\n    }\n    *getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData) {\n        if ((0, __1.isVariant)(marketType, \"spot\") && !oraclePriceData) {\n            throw new Error(\"Must provide OraclePriceData to get spot asks\");\n        }\n        this.updateRestingLimitOrders(slot);\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        const nodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!nodeLists) {\n            return;\n        }\n        const generatorList = [\n            nodeLists.restingLimit.ask.getGenerator(),\n            nodeLists.floatingLimit.ask.getGenerator()\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData)=>{\n            return bestNode.getPrice(oraclePriceData, slot).lt(currentNode.getPrice(oraclePriceData, slot));\n        });\n    }\n    /**\n     * Filters the limit asks that are resting and do not cross fallback bid\n     * Taking orders can only fill against orders that meet this criteria\n     *\n     * @returns\n     */ *getMakerLimitAsks(marketIndex, slot, marketType, oraclePriceData, fallbackBid) {\n        const isPerpMarket = (0, __1.isVariant)(marketType, \"perp\");\n        for (const node of this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData)){\n            if (isPerpMarket && fallbackBid && node.getPrice(oraclePriceData, slot).lte(fallbackBid)) {\n                continue;\n            }\n            yield node;\n        }\n    }\n    *getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData) {\n        if ((0, __1.isVariant)(marketType, \"spot\") && !oraclePriceData) {\n            throw new Error(\"Must provide OraclePriceData to get spot bids\");\n        }\n        this.updateRestingLimitOrders(slot);\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        const nodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        if (!nodeLists) {\n            return;\n        }\n        const generatorList = [\n            nodeLists.restingLimit.bid.getGenerator(),\n            nodeLists.floatingLimit.bid.getGenerator()\n        ];\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData)=>{\n            return bestNode.getPrice(oraclePriceData, slot).gt(currentNode.getPrice(oraclePriceData, slot));\n        });\n    }\n    /**\n     * Filters the limit bids that are post only, have been place for sufficiently long or are below the fallback ask\n     * Market orders can only fill against orders that meet this criteria\n     *\n     * @returns\n     */ *getMakerLimitBids(marketIndex, slot, marketType, oraclePriceData, fallbackAsk) {\n        const isPerpMarket = (0, __1.isVariant)(marketType, \"perp\");\n        for (const node of this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData)){\n            if (isPerpMarket && fallbackAsk && node.getPrice(oraclePriceData, slot).gte(fallbackAsk)) {\n                continue;\n            }\n            yield node;\n        }\n    }\n    *getAsks(marketIndex, fallbackAsk, slot, marketType, oraclePriceData) {\n        if ((0, __1.isVariant)(marketType, \"spot\") && !oraclePriceData) {\n            throw new Error(\"Must provide OraclePriceData to get spot asks\");\n        }\n        const generatorList = [\n            this.getTakingAsks(marketIndex, marketType, slot, oraclePriceData),\n            this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData)\n        ];\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        if (marketTypeStr === \"perp\" && fallbackAsk) {\n            generatorList.push((0, NodeList_1.getVammNodeGenerator)(fallbackAsk));\n        }\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData)=>{\n            const bestNodeTaking = bestNode.order ? (0, __1.isTakingOrder)(bestNode.order, slot) : false;\n            const currentNodeTaking = currentNode.order ? (0, __1.isTakingOrder)(currentNode.order, slot) : false;\n            if (bestNodeTaking && currentNodeTaking) {\n                return bestNode.order.slot.lt(currentNode.order.slot);\n            }\n            if (bestNodeTaking) {\n                return true;\n            }\n            if (currentNodeTaking) {\n                return false;\n            }\n            return bestNode.getPrice(oraclePriceData, slot).lt(currentNode.getPrice(oraclePriceData, slot));\n        });\n    }\n    *getBids(marketIndex, fallbackBid, slot, marketType, oraclePriceData) {\n        if ((0, __1.isVariant)(marketType, \"spot\") && !oraclePriceData) {\n            throw new Error(\"Must provide OraclePriceData to get spot bids\");\n        }\n        const generatorList = [\n            this.getTakingBids(marketIndex, marketType, slot, oraclePriceData),\n            this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData)\n        ];\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        if (marketTypeStr === \"perp\" && fallbackBid) {\n            generatorList.push((0, NodeList_1.getVammNodeGenerator)(fallbackBid));\n        }\n        yield* this.getBestNode(generatorList, oraclePriceData, slot, (bestNode, currentNode, slot, oraclePriceData)=>{\n            const bestNodeTaking = bestNode.order ? (0, __1.isTakingOrder)(bestNode.order, slot) : false;\n            const currentNodeTaking = currentNode.order ? (0, __1.isTakingOrder)(currentNode.order, slot) : false;\n            if (bestNodeTaking && currentNodeTaking) {\n                return bestNode.order.slot.lt(currentNode.order.slot);\n            }\n            if (bestNodeTaking) {\n                return true;\n            }\n            if (currentNodeTaking) {\n                return false;\n            }\n            return bestNode.getPrice(oraclePriceData, slot).gt(currentNode.getPrice(oraclePriceData, slot));\n        });\n    }\n    findCrossingRestingLimitOrders(marketIndex, slot, marketType, oraclePriceData) {\n        const nodesToFill = new Array();\n        for (const askNode of this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData)){\n            const bidGenerator = this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData);\n            for (const bidNode of bidGenerator){\n                const bidPrice = bidNode.getPrice(oraclePriceData, slot);\n                const askPrice = askNode.getPrice(oraclePriceData, slot);\n                // orders don't cross\n                if (bidPrice.lt(askPrice)) {\n                    break;\n                }\n                const bidOrder = bidNode.order;\n                const askOrder = askNode.order;\n                // Can't match orders from the same user\n                const sameUser = bidNode.userAccount.equals(askNode.userAccount);\n                if (sameUser) {\n                    continue;\n                }\n                const makerAndTaker = this.determineMakerAndTaker(askNode, bidNode);\n                // unable to match maker and taker due to post only or slot\n                if (!makerAndTaker) {\n                    continue;\n                }\n                const { takerNode, makerNode } = makerAndTaker;\n                const bidBaseRemaining = bidOrder.baseAssetAmount.sub(bidOrder.baseAssetAmountFilled);\n                const askBaseRemaining = askOrder.baseAssetAmount.sub(askOrder.baseAssetAmountFilled);\n                const baseFilled = __1.BN.min(bidBaseRemaining, askBaseRemaining);\n                const newBidOrder = {\n                    ...bidOrder\n                };\n                newBidOrder.baseAssetAmountFilled = bidOrder.baseAssetAmountFilled.add(baseFilled);\n                this.getListForOrder(newBidOrder, slot).update(newBidOrder, bidNode.userAccount);\n                // ask completely filled\n                const newAskOrder = {\n                    ...askOrder\n                };\n                newAskOrder.baseAssetAmountFilled = askOrder.baseAssetAmountFilled.add(baseFilled);\n                this.getListForOrder(newAskOrder, slot).update(newAskOrder, askNode.userAccount);\n                nodesToFill.push({\n                    node: takerNode,\n                    makerNodes: [\n                        makerNode\n                    ]\n                });\n                if (newAskOrder.baseAssetAmount.eq(newAskOrder.baseAssetAmountFilled)) {\n                    break;\n                }\n            }\n        }\n        return nodesToFill;\n    }\n    determineMakerAndTaker(askNode, bidNode) {\n        const askSlot = askNode.order.slot.add(new __1.BN(askNode.order.auctionDuration));\n        const bidSlot = bidNode.order.slot.add(new __1.BN(bidNode.order.auctionDuration));\n        if (bidNode.order.postOnly && askNode.order.postOnly) {\n            return undefined;\n        } else if (bidNode.order.postOnly) {\n            return {\n                takerNode: askNode,\n                makerNode: bidNode\n            };\n        } else if (askNode.order.postOnly) {\n            return {\n                takerNode: bidNode,\n                makerNode: askNode\n            };\n        } else if (askSlot.lte(bidSlot)) {\n            return {\n                takerNode: bidNode,\n                makerNode: askNode\n            };\n        } else {\n            return {\n                takerNode: askNode,\n                makerNode: bidNode\n            };\n        }\n    }\n    getBestAsk(marketIndex, fallbackAsk, slot, marketType, oraclePriceData) {\n        return this.getAsks(marketIndex, fallbackAsk, slot, marketType, oraclePriceData).next().value.getPrice(oraclePriceData, slot);\n    }\n    getBestBid(marketIndex, fallbackBid, slot, marketType, oraclePriceData) {\n        return this.getBids(marketIndex, fallbackBid, slot, marketType, oraclePriceData).next().value.getPrice(oraclePriceData, slot);\n    }\n    findNodesToTrigger(marketIndex, slot, oraclePrice, marketType, stateAccount) {\n        if ((0, exchangeStatus_1.exchangePaused)(stateAccount)) {\n            return [];\n        }\n        const nodesToTrigger = [];\n        const marketTypeStr = (0, __1.getVariant)(marketType);\n        const marketNodeLists = this.orderLists.get(marketTypeStr).get(marketIndex);\n        const triggerAboveList = marketNodeLists ? marketNodeLists.trigger.above : undefined;\n        if (triggerAboveList) {\n            for (const node of triggerAboveList.getGenerator()){\n                if (oraclePrice.gt(node.order.triggerPrice)) {\n                    nodesToTrigger.push({\n                        node: node\n                    });\n                } else {\n                    break;\n                }\n            }\n        }\n        const triggerBelowList = marketNodeLists ? marketNodeLists.trigger.below : undefined;\n        if (triggerBelowList) {\n            for (const node of triggerBelowList.getGenerator()){\n                if (oraclePrice.lt(node.order.triggerPrice)) {\n                    nodesToTrigger.push({\n                        node: node\n                    });\n                } else {\n                    break;\n                }\n            }\n        }\n        return nodesToTrigger;\n    }\n    printTopOfOrderLists(sdkConfig, driftClient, slotSubscriber, marketIndex, marketType) {\n        if ((0, __1.isVariant)(marketType, \"perp\")) {\n            const market = driftClient.getPerpMarketAccount(marketIndex);\n            const slot = slotSubscriber.getSlot();\n            const oraclePriceData = driftClient.getOracleDataForPerpMarket(marketIndex);\n            const fallbackAsk = (0, __1.calculateAskPrice)(market, oraclePriceData);\n            const fallbackBid = (0, __1.calculateBidPrice)(market, oraclePriceData);\n            const bestAsk = this.getBestAsk(marketIndex, fallbackAsk, slot, marketType, oraclePriceData);\n            const bestBid = this.getBestBid(marketIndex, fallbackBid, slot, marketType, oraclePriceData);\n            const mid = bestAsk.add(bestBid).div(new __1.BN(2));\n            const bidSpread = ((0, __1.convertToNumber)(bestBid, __1.PRICE_PRECISION) / (0, __1.convertToNumber)(oraclePriceData.price, __1.PRICE_PRECISION) - 1) * 100.0;\n            const askSpread = ((0, __1.convertToNumber)(bestAsk, __1.PRICE_PRECISION) / (0, __1.convertToNumber)(oraclePriceData.price, __1.PRICE_PRECISION) - 1) * 100.0;\n            console.log(`Market ${sdkConfig.MARKETS[marketIndex].symbol} Orders`);\n            console.log(`  Ask`, (0, __1.convertToNumber)(bestAsk, __1.PRICE_PRECISION).toFixed(3), `(${askSpread.toFixed(4)}%)`);\n            console.log(`  Mid`, (0, __1.convertToNumber)(mid, __1.PRICE_PRECISION).toFixed(3));\n            console.log(`  Bid`, (0, __1.convertToNumber)(bestBid, __1.PRICE_PRECISION).toFixed(3), `(${bidSpread.toFixed(4)}%)`);\n        } else if ((0, __1.isVariant)(marketType, \"spot\")) {\n            const slot = slotSubscriber.getSlot();\n            const oraclePriceData = driftClient.getOracleDataForPerpMarket(marketIndex);\n            const bestAsk = this.getBestAsk(marketIndex, undefined, slot, marketType, oraclePriceData);\n            const bestBid = this.getBestBid(marketIndex, undefined, slot, marketType, oraclePriceData);\n            const mid = bestAsk.add(bestBid).div(new __1.BN(2));\n            const bidSpread = ((0, __1.convertToNumber)(bestBid, __1.PRICE_PRECISION) / (0, __1.convertToNumber)(oraclePriceData.price, __1.PRICE_PRECISION) - 1) * 100.0;\n            const askSpread = ((0, __1.convertToNumber)(bestAsk, __1.PRICE_PRECISION) / (0, __1.convertToNumber)(oraclePriceData.price, __1.PRICE_PRECISION) - 1) * 100.0;\n            console.log(`Market ${sdkConfig.MARKETS[marketIndex].symbol} Orders`);\n            console.log(`  Ask`, (0, __1.convertToNumber)(bestAsk, __1.PRICE_PRECISION).toFixed(3), `(${askSpread.toFixed(4)}%)`);\n            console.log(`  Mid`, (0, __1.convertToNumber)(mid, __1.PRICE_PRECISION).toFixed(3));\n            console.log(`  Bid`, (0, __1.convertToNumber)(bestBid, __1.PRICE_PRECISION).toFixed(3), `(${bidSpread.toFixed(4)}%)`);\n        }\n    }\n    getDLOBOrders() {\n        const dlobOrders = [];\n        for (const nodeList of this.getNodeLists()){\n            for (const node of nodeList.getGenerator()){\n                dlobOrders.push({\n                    user: node.userAccount,\n                    order: node.order\n                });\n            }\n        }\n        return dlobOrders;\n    }\n    *getNodeLists() {\n        for (const [_, nodeLists] of this.orderLists.get(\"perp\")){\n            yield nodeLists.restingLimit.bid;\n            yield nodeLists.restingLimit.ask;\n            yield nodeLists.takingLimit.bid;\n            yield nodeLists.takingLimit.ask;\n            yield nodeLists.market.bid;\n            yield nodeLists.market.ask;\n            yield nodeLists.floatingLimit.bid;\n            yield nodeLists.floatingLimit.ask;\n            yield nodeLists.trigger.above;\n            yield nodeLists.trigger.below;\n        }\n        for (const [_, nodeLists] of this.orderLists.get(\"spot\")){\n            yield nodeLists.restingLimit.bid;\n            yield nodeLists.restingLimit.ask;\n            yield nodeLists.takingLimit.bid;\n            yield nodeLists.takingLimit.ask;\n            yield nodeLists.market.bid;\n            yield nodeLists.market.ask;\n            yield nodeLists.floatingLimit.bid;\n            yield nodeLists.floatingLimit.ask;\n            yield nodeLists.trigger.above;\n            yield nodeLists.trigger.below;\n        }\n    }\n    /**\n     * Get an L2 view of the order book for a given market.\n     *\n     * @param marketIndex\n     * @param marketType\n     * @param slot\n     * @param oraclePriceData\n     * @param depth how many levels of the order book to return\n     * @param fallbackAsk best ask for fallback liquidity, only relevant for perps\n     * @param fallbackBid best bid for fallback liquidity, only relevant for perps\n     * @param fallbackL2Generators L2 generators for fallback liquidity e.g. vAMM {@link getVammL2Generator}, openbook {@link SerumSubscriber}\n     */ getL2({ marketIndex, marketType, slot, oraclePriceData, depth, fallbackAsk, fallbackBid, fallbackL2Generators = [] }) {\n        const makerAskL2LevelGenerator = (0, orderBookLevels_1.getL2GeneratorFromDLOBNodes)(this.getMakerLimitAsks(marketIndex, slot, marketType, oraclePriceData, fallbackBid), oraclePriceData, slot);\n        const fallbackAskGenerators = fallbackL2Generators.map((fallbackL2Generator)=>{\n            return fallbackL2Generator.getL2Asks();\n        });\n        const askL2LevelGenerator = (0, orderBookLevels_1.mergeL2LevelGenerators)([\n            makerAskL2LevelGenerator,\n            ...fallbackAskGenerators\n        ], (a, b)=>{\n            return a.price.lt(b.price);\n        });\n        const asks = (0, orderBookLevels_1.createL2Levels)(askL2LevelGenerator, depth);\n        const makerBidGenerator = (0, orderBookLevels_1.getL2GeneratorFromDLOBNodes)(this.getMakerLimitBids(marketIndex, slot, marketType, oraclePriceData, fallbackAsk), oraclePriceData, slot);\n        const fallbackBidGenerators = fallbackL2Generators.map((fallbackOrders)=>{\n            return fallbackOrders.getL2Bids();\n        });\n        const bidL2LevelGenerator = (0, orderBookLevels_1.mergeL2LevelGenerators)([\n            makerBidGenerator,\n            ...fallbackBidGenerators\n        ], (a, b)=>{\n            return a.price.gt(b.price);\n        });\n        const bids = (0, orderBookLevels_1.createL2Levels)(bidL2LevelGenerator, depth);\n        return {\n            bids,\n            asks\n        };\n    }\n    /**\n     * Get an L3 view of the order book for a given market. Does not include fallback liquidity sources\n     *\n     * @param marketIndex\n     * @param marketType\n     * @param slot\n     * @param oraclePriceData\n     */ getL3({ marketIndex, marketType, slot, oraclePriceData }) {\n        const bids = [];\n        const asks = [];\n        const restingAsks = this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData);\n        for (const ask of restingAsks){\n            asks.push({\n                price: ask.getPrice(oraclePriceData, slot),\n                size: ask.order.baseAssetAmount.sub(ask.order.baseAssetAmountFilled),\n                maker: ask.userAccount,\n                orderId: ask.order.orderId\n            });\n        }\n        const restingBids = this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData);\n        for (const bid of restingBids){\n            bids.push({\n                price: bid.getPrice(oraclePriceData, slot),\n                size: bid.order.baseAssetAmount.sub(bid.order.baseAssetAmountFilled),\n                maker: bid.userAccount,\n                orderId: bid.order.orderId\n            });\n        }\n        return {\n            bids,\n            asks\n        };\n    }\n    estimateFillExactBaseAmountInForSide(baseAmountIn, oraclePriceData, slot, dlobSide) {\n        let runningSumQuote = __1.ZERO;\n        let runningSumBase = __1.ZERO;\n        for (const side of dlobSide){\n            const price = side.getPrice(oraclePriceData, slot); //side.order.quoteAssetAmount.div(side.order.baseAssetAmount);\n            const baseAmountRemaining = side.order.baseAssetAmount.sub(side.order.baseAssetAmountFilled);\n            if (runningSumBase.add(baseAmountRemaining).gt(baseAmountIn)) {\n                const remainingBase = baseAmountIn.sub(runningSumBase);\n                runningSumBase = runningSumBase.add(remainingBase);\n                runningSumQuote = runningSumQuote.add(remainingBase.mul(price));\n                break;\n            } else {\n                runningSumBase = runningSumBase.add(baseAmountRemaining);\n                runningSumQuote = runningSumQuote.add(baseAmountRemaining.mul(price));\n            }\n        }\n        return runningSumQuote.mul(__1.QUOTE_PRECISION).div(__1.BASE_PRECISION.mul(__1.PRICE_PRECISION));\n    }\n    /**\n     *\n     * @param param.marketIndex the index of the market\n     * @param param.marketType the type of the market\n     * @param param.baseAmount the base amount in to estimate\n     * @param param.orderDirection the direction of the trade\n     * @param param.slot current slot for estimating dlob node price\n     * @param param.oraclePriceData the oracle price data\n     * @returns the estimated quote amount filled: QUOTE_PRECISION\n     */ estimateFillWithExactBaseAmount({ marketIndex, marketType, baseAmount, orderDirection, slot, oraclePriceData }) {\n        if ((0, __1.isVariant)(orderDirection, \"long\")) {\n            return this.estimateFillExactBaseAmountInForSide(baseAmount, oraclePriceData, slot, this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData));\n        } else if ((0, __1.isVariant)(orderDirection, \"short\")) {\n            return this.estimateFillExactBaseAmountInForSide(baseAmount, oraclePriceData, slot, this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData));\n        }\n    }\n    getBestMakers({ marketIndex, marketType, direction, slot, oraclePriceData, numMakers }) {\n        const makers = new Map();\n        const generator = (0, __1.isVariant)(direction, \"long\") ? this.getRestingLimitBids(marketIndex, slot, marketType, oraclePriceData) : this.getRestingLimitAsks(marketIndex, slot, marketType, oraclePriceData);\n        for (const node of generator){\n            if (!makers.has(node.userAccount.toString())) {\n                makers.set(node.userAccount.toString(), node.userAccount);\n            }\n            if (makers.size === numMakers) {\n                break;\n            }\n        }\n        return Array.from(makers.values());\n    }\n}\nexports.DLOB = DLOB;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL0RMT0IuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELFlBQVksR0FBRyxLQUFLO0FBQ3BCLE1BQU1HLGFBQWFDLG1CQUFPQSxDQUFDLDZFQUFZO0FBQ3ZDLE1BQU1DLE1BQU1ELG1CQUFPQSxDQUFDLDZEQUFJO0FBQ3hCLE1BQU1FLG1CQUFtQkYsbUJBQU9BLENBQUMsK0ZBQXdCO0FBQ3pELE1BQU1HLG9CQUFvQkgsbUJBQU9BLENBQUMsMkZBQW1CO0FBQ3JELE1BQU1JLHdCQUF3QjtJQUMxQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0g7QUFDRCxNQUFNTjtJQUNGTyxhQUFjO1FBQ1YsSUFBSSxDQUFDQyxVQUFVLEdBQUcsSUFBSUM7UUFDdEIsSUFBSSxDQUFDQyxVQUFVLEdBQUcsSUFBSUQ7UUFDdEIsSUFBSSxDQUFDRSw0QkFBNEIsR0FBRztRQUNwQyxJQUFJLENBQUNDLFdBQVcsR0FBRztRQUNuQixJQUFJLENBQUNDLElBQUk7SUFDYjtJQUNBQSxPQUFPO1FBQ0gsSUFBSSxDQUFDTCxVQUFVLENBQUNNLEdBQUcsQ0FBQyxRQUFRLElBQUlDO1FBQ2hDLElBQUksQ0FBQ1AsVUFBVSxDQUFDTSxHQUFHLENBQUMsUUFBUSxJQUFJQztRQUNoQyxJQUFJLENBQUNMLFVBQVUsQ0FBQ0ksR0FBRyxDQUFDLFFBQVEsSUFBSUw7UUFDaEMsSUFBSSxDQUFDQyxVQUFVLENBQUNJLEdBQUcsQ0FBQyxRQUFRLElBQUlMO0lBQ3BDO0lBQ0FPLFFBQVE7UUFDSixLQUFLLE1BQU1DLGNBQWMsSUFBSSxDQUFDVCxVQUFVLENBQUNVLElBQUksR0FBSTtZQUM3QyxJQUFJLENBQUNWLFVBQVUsQ0FBQ1csR0FBRyxDQUFDRixZQUFZRCxLQUFLO1FBQ3pDO1FBQ0EsSUFBSSxDQUFDUixVQUFVLENBQUNRLEtBQUs7UUFDckIsS0FBSyxN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QUFtQixDQUFDN0gsYUFBYU0sTUFBTVQsWUFBWWtHO1FBQ2hKLE9BQ0ssSUFBSSxDQUFDLEdBQUdoSCxJQUFJd0MsU0FBUyxFQUFFa1IsZ0JBQWdCLFVBQVU7WUFDbEQsT0FBTyxJQUFJLENBQUNiLG9DQUFvQyxDQUFDWSxZQUFZek0saUJBQWlCekYsTUFBTSxJQUFJLENBQUMrSCxtQkFBbUIsQ0FBQ3JJLGFBQWFNLE1BQU1ULFlBQVlrRztRQUNoSjtJQUNKO0lBQ0EyTSxjQUFjLEVBQUUxUyxXQUFXLEVBQUVILFVBQVUsRUFBRWdGLFNBQVMsRUFBRXZFLElBQUksRUFBRXlGLGVBQWUsRUFBRTRNLFNBQVMsRUFBRyxFQUFFO1FBQ3JGLE1BQU1DLFNBQVMsSUFBSXZUO1FBQ25CLE1BQU1pTixZQUFZLENBQUMsR0FBR3ZOLElBQUl3QyxTQUFTLEVBQUVzRCxXQUFXLFVBQzFDLElBQUksQ0FBQ3dELG1CQUFtQixDQUFDckksYUFBYU0sTUFBTVQsWUFBWWtHLG1CQUN4RCxJQUFJLENBQUM4QixtQkFBbUIsQ0FBQzdILGFBQWFNLE1BQU1ULFlBQVlrRztRQUM5RCxLQUFLLE1BQU1YLFFBQVFrSCxVQUFXO1lBQzFCLElBQUksQ0FBQ3NHLE9BQU9wUSxHQUFHLENBQUM0QyxLQUFLM0UsV0FBVyxDQUFDb1MsUUFBUSxLQUFLO2dCQUMxQ0QsT0FBT2xULEdBQUcsQ0FBQzBGLEtBQUszRSxXQUFXLENBQUNvUyxRQUFRLElBQUl6TixLQUFLM0UsV0FBVztZQUM1RDtZQUNBLElBQUltUyxPQUFPbEIsSUFBSSxLQUFLaUIsV0FBVztnQkFDM0I7WUFDSjtRQUNKO1FBQ0EsT0FBT3JMLE1BQU1DLElBQUksQ0FBQ3FMLE9BQU9wUyxNQUFNO0lBQ25DO0FBQ0o7QUFDQTlCLFlBQVksR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvZGxvYi9ETE9CLmpzPzM5YmMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRMT0IgPSB2b2lkIDA7XG5jb25zdCBOb2RlTGlzdF8xID0gcmVxdWlyZShcIi4vTm9kZUxpc3RcIik7XG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi5cIik7XG5jb25zdCBleGNoYW5nZVN0YXR1c18xID0gcmVxdWlyZShcIi4uL21hdGgvZXhjaGFuZ2VTdGF0dXNcIik7XG5jb25zdCBvcmRlckJvb2tMZXZlbHNfMSA9IHJlcXVpcmUoXCIuL29yZGVyQm9va0xldmVsc1wiKTtcbmNvbnN0IFNVUFBPUlRFRF9PUkRFUl9UWVBFUyA9IFtcbiAgICAnbWFya2V0JyxcbiAgICAnbGltaXQnLFxuICAgICd0cmlnZ2VyTWFya2V0JyxcbiAgICAndHJpZ2dlckxpbWl0JyxcbiAgICAnb3JhY2xlJyxcbl07XG5jbGFzcyBETE9CIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vcGVuT3JkZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLm9yZGVyTGlzdHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubWF4U2xvdEZvclJlc3RpbmdMaW1pdE9yZGVycyA9IDA7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMub3Blbk9yZGVycy5zZXQoJ3BlcnAnLCBuZXcgU2V0KCkpO1xuICAgICAgICB0aGlzLm9wZW5PcmRlcnMuc2V0KCdzcG90JywgbmV3IFNldCgpKTtcbiAgICAgICAgdGhpcy5vcmRlckxpc3RzLnNldCgncGVycCcsIG5ldyBNYXAoKSk7XG4gICAgICAgIHRoaXMub3JkZXJMaXN0cy5zZXQoJ3Nwb3QnLCBuZXcgTWFwKCkpO1xuICAgIH1cbiAgICBjbGVhcigpIHtcbiAgICAgICAgZm9yIChjb25zdCBtYXJrZXRUeXBlIG9mIHRoaXMub3Blbk9yZGVycy5rZXlzKCkpIHtcbiAgICAgICAgICAgIHRoaXMub3Blbk9yZGVycy5nZXQobWFya2V0VHlwZSkuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wZW5PcmRlcnMuY2xlYXIoKTtcbiAgICAgICAgZm9yIChjb25zdCBtYXJrZXRUeXBlIG9mIHRoaXMub3JkZXJMaXN0cy5rZXlzKCkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWFya2V0SW5kZXggb2YgdGhpcy5vcmRlckxpc3RzLmdldChtYXJrZXRUeXBlKS5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXROb2RlTGlzdHMgPSB0aGlzLm9yZGVyTGlzdHNcbiAgICAgICAgICAgICAgICAgICAgLmdldChtYXJrZXRUeXBlKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0KG1hcmtldEluZGV4KTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNpZGUgb2YgT2JqZWN0LmtleXMobWFya2V0Tm9kZUxpc3RzKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG9yZGVyVHlwZSBvZiBPYmplY3Qua2V5cyhtYXJrZXROb2RlTGlzdHNbc2lkZV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXROb2RlTGlzdHNbc2lkZV1bb3JkZXJUeXBlXS5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMub3JkZXJMaXN0cy5jbGVhcigpO1xuICAgICAgICB0aGlzLm1heFNsb3RGb3JSZXN0aW5nTGltaXRPcmRlcnMgPSAwO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogaW5pdGlhbGl6ZXMgYSBuZXcgRExPQiBpbnN0YW5jZVxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgRExPQiBpcyBpbml0aWFsaXplZFxuICAgICAqL1xuICAgIGFzeW5jIGluaXRGcm9tVXNlck1hcCh1c2VyTWFwLCBzbG90KSB7XG4gICAgICAgIGlmICh0aGlzLmluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgZGxvYiB3aXRoIHRoZSB1c2VyIG1hcFxuICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgdXNlck1hcC52YWx1ZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB1c2VyLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmtleSA9IHVzZXIuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3JkZXIgb2YgdXNlckFjY291bnQub3JkZXJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRPcmRlcihvcmRlciwgdXNlckFjY291bnRQdWJrZXksIHNsb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaW5pdEZyb21PcmRlcnMoZGxvYk9yZGVycywgc2xvdCkge1xuICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgeyB1c2VyLCBvcmRlciB9IG9mIGRsb2JPcmRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0T3JkZXIob3JkZXIsIHVzZXIsIHNsb3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaGFuZGxlT3JkZXJSZWNvcmQocmVjb3JkLCBzbG90KSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0T3JkZXIocmVjb3JkLm9yZGVyLCByZWNvcmQudXNlciwgc2xvdCk7XG4gICAgfVxuICAgIGhhbmRsZU9yZGVyQWN0aW9uUmVjb3JkKHJlY29yZCwgc2xvdCkge1xuICAgICAgICBpZiAoKDAsIF9fMS5pc09uZU9mVmFyaWFudCkocmVjb3JkLmFjdGlvbiwgWydwbGFjZScsICdleHBpcmUnXSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKDAsIF9fMS5pc1ZhcmlhbnQpKHJlY29yZC5hY3Rpb24sICd0cmlnZ2VyJykpIHtcbiAgICAgICAgICAgIGlmIChyZWNvcmQudGFrZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWtlck9yZGVyID0gdGhpcy5nZXRPcmRlcihyZWNvcmQudGFrZXJPcmRlcklkLCByZWNvcmQudGFrZXIpO1xuICAgICAgICAgICAgICAgIGlmICh0YWtlck9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcih0YWtlck9yZGVyLCByZWNvcmQudGFrZXIsIHNsb3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZWNvcmQubWFrZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYWtlck9yZGVyID0gdGhpcy5nZXRPcmRlcihyZWNvcmQubWFrZXJPcmRlcklkLCByZWNvcmQubWFrZXIpO1xuICAgICAgICAgICAgICAgIGlmIChtYWtlck9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihtYWtlck9yZGVyLCByZWNvcmQubWFrZXIsIHNsb3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoMCwgX18xLmlzVmFyaWFudCkocmVjb3JkLmFjdGlvbiwgJ2ZpbGwnKSkge1xuICAgICAgICAgICAgaWYgKHJlY29yZC50YWtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRha2VyT3JkZXIgPSB0aGlzLmdldE9yZGVyKHJlY29yZC50YWtlck9yZGVySWQsIHJlY29yZC50YWtlcik7XG4gICAgICAgICAgICAgICAgaWYgKHRha2VyT3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPcmRlcih0YWtlck9yZGVyLCByZWNvcmQudGFrZXIsIHNsb3QsIHJlY29yZC50YWtlck9yZGVyQ3VtdWxhdGl2ZUJhc2VBc3NldEFtb3VudEZpbGxlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY29yZC5tYWtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ha2VyT3JkZXIgPSB0aGlzLmdldE9yZGVyKHJlY29yZC5tYWtlck9yZGVySWQsIHJlY29yZC5tYWtlcik7XG4gICAgICAgICAgICAgICAgaWYgKG1ha2VyT3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPcmRlcihtYWtlck9yZGVyLCByZWNvcmQubWFrZXIsIHNsb3QsIHJlY29yZC5tYWtlck9yZGVyQ3VtdWxhdGl2ZUJhc2VBc3NldEFtb3VudEZpbGxlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCgwLCBfXzEuaXNWYXJpYW50KShyZWNvcmQuYWN0aW9uLCAnY2FuY2VsJykpIHtcbiAgICAgICAgICAgIGlmIChyZWNvcmQudGFrZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWtlck9yZGVyID0gdGhpcy5nZXRPcmRlcihyZWNvcmQudGFrZXJPcmRlcklkLCByZWNvcmQudGFrZXIpO1xuICAgICAgICAgICAgICAgIGlmICh0YWtlck9yZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlKHRha2VyT3JkZXIsIHJlY29yZC50YWtlciwgc2xvdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY29yZC5tYWtlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ha2VyT3JkZXIgPSB0aGlzLmdldE9yZGVyKHJlY29yZC5tYWtlck9yZGVySWQsIHJlY29yZC5tYWtlcik7XG4gICAgICAgICAgICAgICAgaWYgKG1ha2VyT3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGUobWFrZXJPcmRlciwgcmVjb3JkLm1ha2VyLCBzbG90KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5zZXJ0T3JkZXIob3JkZXIsIHVzZXJBY2NvdW50LCBzbG90LCBvbkluc2VydCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkob3JkZXIuc3RhdHVzLCAnaW5pdCcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoMCwgX18xLmlzT25lT2ZWYXJpYW50KShvcmRlci5vcmRlclR5cGUsIFNVUFBPUlRFRF9PUkRFUl9UWVBFUykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXJrZXRUeXBlID0gKDAsIF9fMS5nZXRWYXJpYW50KShvcmRlci5tYXJrZXRUeXBlKTtcbiAgICAgICAgaWYgKCF0aGlzLm9yZGVyTGlzdHMuZ2V0KG1hcmtldFR5cGUpLmhhcyhvcmRlci5tYXJrZXRJbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3JkZXJMaXN0KG1hcmtldFR5cGUsIG9yZGVyLm1hcmtldEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKDAsIF9fMS5pc1ZhcmlhbnQpKG9yZGVyLnN0YXR1cywgJ29wZW4nKSkge1xuICAgICAgICAgICAgdGhpcy5vcGVuT3JkZXJzXG4gICAgICAgICAgICAgICAgLmdldChtYXJrZXRUeXBlKVxuICAgICAgICAgICAgICAgIC5hZGQoKDAsIE5vZGVMaXN0XzEuZ2V0T3JkZXJTaWduYXR1cmUpKG9yZGVyLm9yZGVySWQsIHVzZXJBY2NvdW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgKF9hID0gdGhpcy5nZXRMaXN0Rm9yT3JkZXIob3JkZXIsIHNsb3QpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5zZXJ0KG9yZGVyLCBtYXJrZXRUeXBlLCB1c2VyQWNjb3VudCk7XG4gICAgICAgIGlmIChvbkluc2VydCkge1xuICAgICAgICAgICAgb25JbnNlcnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRPcmRlckxpc3QobWFya2V0VHlwZSwgbWFya2V0SW5kZXgpIHtcbiAgICAgICAgdGhpcy5vcmRlckxpc3RzLmdldChtYXJrZXRUeXBlKS5zZXQobWFya2V0SW5kZXgsIHtcbiAgICAgICAgICAgIHJlc3RpbmdMaW1pdDoge1xuICAgICAgICAgICAgICAgIGFzazogbmV3IE5vZGVMaXN0XzEuTm9kZUxpc3QoJ3Jlc3RpbmdMaW1pdCcsICdhc2MnKSxcbiAgICAgICAgICAgICAgICBiaWQ6IG5ldyBOb2RlTGlzdF8xLk5vZGVMaXN0KCdyZXN0aW5nTGltaXQnLCAnZGVzYycpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZsb2F0aW5nTGltaXQ6IHtcbiAgICAgICAgICAgICAgICBhc2s6IG5ldyBOb2RlTGlzdF8xLk5vZGVMaXN0KCdmbG9hdGluZ0xpbWl0JywgJ2FzYycpLFxuICAgICAgICAgICAgICAgIGJpZDogbmV3IE5vZGVMaXN0XzEuTm9kZUxpc3QoJ2Zsb2F0aW5nTGltaXQnLCAnZGVzYycpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRha2luZ0xpbWl0OiB7XG4gICAgICAgICAgICAgICAgYXNrOiBuZXcgTm9kZUxpc3RfMS5Ob2RlTGlzdCgndGFraW5nTGltaXQnLCAnYXNjJyksXG4gICAgICAgICAgICAgICAgYmlkOiBuZXcgTm9kZUxpc3RfMS5Ob2RlTGlzdCgndGFraW5nTGltaXQnLCAnYXNjJyksIC8vIGFsd2F5cyBzb3J0IGFzY2VuZGluZyBmb3IgbWFya2V0IG9yZGVyc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hcmtldDoge1xuICAgICAgICAgICAgICAgIGFzazogbmV3IE5vZGVMaXN0XzEuTm9kZUxpc3QoJ21hcmtldCcsICdhc2MnKSxcbiAgICAgICAgICAgICAgICBiaWQ6IG5ldyBOb2RlTGlzdF8xLk5vZGVMaXN0KCdtYXJrZXQnLCAnYXNjJyksIC8vIGFsd2F5cyBzb3J0IGFzY2VuZGluZyBmb3IgbWFya2V0IG9yZGVyc1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyaWdnZXI6IHtcbiAgICAgICAgICAgICAgICBhYm92ZTogbmV3IE5vZGVMaXN0XzEuTm9kZUxpc3QoJ3RyaWdnZXInLCAnYXNjJyksXG4gICAgICAgICAgICAgICAgYmVsb3c6IG5ldyBOb2RlTGlzdF8xLk5vZGVMaXN0KCd0cmlnZ2VyJywgJ2Rlc2MnKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGVPcmRlcihvcmRlciwgdXNlckFjY291bnQsIHNsb3QsIGN1bXVsYXRpdmVCYXNlQXNzZXRBbW91bnRGaWxsZWQsIG9uVXBkYXRlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy51cGRhdGVSZXN0aW5nTGltaXRPcmRlcnMoc2xvdCk7XG4gICAgICAgIGlmIChvcmRlci5iYXNlQXNzZXRBbW91bnQuZXEoY3VtdWxhdGl2ZUJhc2VBc3NldEFtb3VudEZpbGxlZCkpIHtcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlKG9yZGVyLCB1c2VyQWNjb3VudCwgc2xvdCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZC5lcShjdW11bGF0aXZlQmFzZUFzc2V0QW1vdW50RmlsbGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld09yZGVyID0ge1xuICAgICAgICAgICAgLi4ub3JkZXIsXG4gICAgICAgIH07XG4gICAgICAgIG5ld09yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCA9IGN1bXVsYXRpdmVCYXNlQXNzZXRBbW91bnRGaWxsZWQ7XG4gICAgICAgIChfYSA9IHRoaXMuZ2V0TGlzdEZvck9yZGVyKG9yZGVyLCBzbG90KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVwZGF0ZShuZXdPcmRlciwgdXNlckFjY291bnQpO1xuICAgICAgICBpZiAob25VcGRhdGUpIHtcbiAgICAgICAgICAgIG9uVXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJpZ2dlcihvcmRlciwgdXNlckFjY291bnQsIHNsb3QsIG9uVHJpZ2dlcikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkob3JkZXIuc3RhdHVzLCAnaW5pdCcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVSZXN0aW5nTGltaXRPcmRlcnMoc2xvdCk7XG4gICAgICAgIGlmICgoMCwgX18xLmlzVHJpZ2dlcmVkKShvcmRlcikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXJrZXRUeXBlID0gKDAsIF9fMS5nZXRWYXJpYW50KShvcmRlci5tYXJrZXRUeXBlKTtcbiAgICAgICAgY29uc3QgdHJpZ2dlckxpc3QgPSB0aGlzLm9yZGVyTGlzdHMuZ2V0KG1hcmtldFR5cGUpLmdldChvcmRlci5tYXJrZXRJbmRleClcbiAgICAgICAgICAgIC50cmlnZ2VyWygwLCBfXzEuaXNWYXJpYW50KShvcmRlci50cmlnZ2VyQ29uZGl0aW9uLCAnYWJvdmUnKSA/ICdhYm92ZScgOiAnYmVsb3cnXTtcbiAgICAgICAgdHJpZ2dlckxpc3QucmVtb3ZlKG9yZGVyLCB1c2VyQWNjb3VudCk7XG4gICAgICAgIChfYSA9IHRoaXMuZ2V0TGlzdEZvck9yZGVyKG9yZGVyLCBzbG90KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluc2VydChvcmRlciwgbWFya2V0VHlwZSwgdXNlckFjY291bnQpO1xuICAgICAgICBpZiAob25UcmlnZ2VyKSB7XG4gICAgICAgICAgICBvblRyaWdnZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWxldGUob3JkZXIsIHVzZXJBY2NvdW50LCBzbG90LCBvbkRlbGV0ZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkob3JkZXIuc3RhdHVzLCAnaW5pdCcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVSZXN0aW5nTGltaXRPcmRlcnMoc2xvdCk7XG4gICAgICAgIChfYSA9IHRoaXMuZ2V0TGlzdEZvck9yZGVyKG9yZGVyLCBzbG90KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlbW92ZShvcmRlciwgdXNlckFjY291bnQpO1xuICAgICAgICBpZiAob25EZWxldGUpIHtcbiAgICAgICAgICAgIG9uRGVsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TGlzdEZvck9yZGVyKG9yZGVyLCBzbG90KSB7XG4gICAgICAgIGNvbnN0IGlzSW5hY3RpdmVUcmlnZ2VyT3JkZXIgPSAoMCwgX18xLm11c3RCZVRyaWdnZXJlZCkob3JkZXIpICYmICEoMCwgX18xLmlzVHJpZ2dlcmVkKShvcmRlcik7XG4gICAgICAgIGxldCB0eXBlO1xuICAgICAgICBpZiAoaXNJbmFjdGl2ZVRyaWdnZXJPcmRlcikge1xuICAgICAgICAgICAgdHlwZSA9ICd0cmlnZ2VyJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoMCwgX18xLmlzT25lT2ZWYXJpYW50KShvcmRlci5vcmRlclR5cGUsIFsnbWFya2V0JywgJ3RyaWdnZXJNYXJrZXQnLCAnb3JhY2xlJ10pKSB7XG4gICAgICAgICAgICB0eXBlID0gJ21hcmtldCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3JkZXIub3JhY2xlUHJpY2VPZmZzZXQgIT09IDApIHtcbiAgICAgICAgICAgIHR5cGUgPSAnZmxvYXRpbmdMaW1pdCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpc1Jlc3RpbmcgPSAoMCwgX18xLmlzUmVzdGluZ0xpbWl0T3JkZXIpKG9yZGVyLCBzbG90KTtcbiAgICAgICAgICAgIHR5cGUgPSBpc1Jlc3RpbmcgPyAncmVzdGluZ0xpbWl0JyA6ICd0YWtpbmdMaW1pdCc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN1YlR5cGU7XG4gICAgICAgIGlmIChpc0luYWN0aXZlVHJpZ2dlck9yZGVyKSB7XG4gICAgICAgICAgICBzdWJUeXBlID0gKDAsIF9fMS5pc1ZhcmlhbnQpKG9yZGVyLnRyaWdnZXJDb25kaXRpb24sICdhYm92ZScpID8gJ2Fib3ZlJyA6ICdiZWxvdyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdWJUeXBlID0gKDAsIF9fMS5pc1ZhcmlhbnQpKG9yZGVyLmRpcmVjdGlvbiwgJ2xvbmcnKSA/ICdiaWQnIDogJ2Fzayc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWFya2V0VHlwZSA9ICgwLCBfXzEuZ2V0VmFyaWFudCkob3JkZXIubWFya2V0VHlwZSk7XG4gICAgICAgIGlmICghdGhpcy5vcmRlckxpc3RzLmhhcyhtYXJrZXRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcmRlckxpc3RzLmdldChtYXJrZXRUeXBlKS5nZXQob3JkZXIubWFya2V0SW5kZXgpW3R5cGVdW3N1YlR5cGVdO1xuICAgIH1cbiAgICB1cGRhdGVSZXN0aW5nTGltaXRPcmRlcnMoc2xvdCkge1xuICAgICAgICBpZiAoc2xvdCA8PSB0aGlzLm1heFNsb3RGb3JSZXN0aW5nTGltaXRPcmRlcnMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1heFNsb3RGb3JSZXN0aW5nTGltaXRPcmRlcnMgPSBzbG90O1xuICAgICAgICB0aGlzLnVwZGF0ZVJlc3RpbmdMaW1pdE9yZGVyc0Zvck1hcmtldFR5cGUoc2xvdCwgJ3BlcnAnKTtcbiAgICAgICAgdGhpcy51cGRhdGVSZXN0aW5nTGltaXRPcmRlcnNGb3JNYXJrZXRUeXBlKHNsb3QsICdzcG90Jyk7XG4gICAgfVxuICAgIHVwZGF0ZVJlc3RpbmdMaW1pdE9yZGVyc0Zvck1hcmtldFR5cGUoc2xvdCwgbWFya2V0VHlwZVN0cikge1xuICAgICAgICBmb3IgKGNvbnN0IFtfLCBub2RlTGlzdHNdIG9mIHRoaXMub3JkZXJMaXN0cy5nZXQobWFya2V0VHlwZVN0cikpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzVG9VcGRhdGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2RlTGlzdHMudGFraW5nTGltaXQuYXNrLmdldEdlbmVyYXRvcigpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoMCwgX18xLmlzUmVzdGluZ0xpbWl0T3JkZXIpKG5vZGUub3JkZXIsIHNsb3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2Rlc1RvVXBkYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzaWRlOiAnYXNrJyxcbiAgICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBub2RlTGlzdHMudGFraW5nTGltaXQuYmlkLmdldEdlbmVyYXRvcigpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoMCwgX18xLmlzUmVzdGluZ0xpbWl0T3JkZXIpKG5vZGUub3JkZXIsIHNsb3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2Rlc1RvVXBkYXRlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzaWRlOiAnYmlkJyxcbiAgICAgICAgICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZVRvVXBkYXRlIG9mIG5vZGVzVG9VcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNpZGUsIG5vZGUgfSA9IG5vZGVUb1VwZGF0ZTtcbiAgICAgICAgICAgICAgICBub2RlTGlzdHMudGFraW5nTGltaXRbc2lkZV0ucmVtb3ZlKG5vZGUub3JkZXIsIG5vZGUudXNlckFjY291bnQpO1xuICAgICAgICAgICAgICAgIG5vZGVMaXN0cy5yZXN0aW5nTGltaXRbc2lkZV0uaW5zZXJ0KG5vZGUub3JkZXIsIG1hcmtldFR5cGVTdHIsIG5vZGUudXNlckFjY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdldE9yZGVyKG9yZGVySWQsIHVzZXJBY2NvdW50KSB7XG4gICAgICAgIGNvbnN0IG9yZGVyU2lnbmF0dXJlID0gKDAsIE5vZGVMaXN0XzEuZ2V0T3JkZXJTaWduYXR1cmUpKG9yZGVySWQsIHVzZXJBY2NvdW50KTtcbiAgICAgICAgZm9yIChjb25zdCBub2RlTGlzdCBvZiB0aGlzLmdldE5vZGVMaXN0cygpKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbm9kZUxpc3QuZ2V0KG9yZGVyU2lnbmF0dXJlKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUub3JkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZmluZE5vZGVzVG9GaWxsKG1hcmtldEluZGV4LCBmYWxsYmFja0JpZCwgZmFsbGJhY2tBc2ssIHNsb3QsIHRzLCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEsIHN0YXRlQWNjb3VudCwgbWFya2V0QWNjb3VudCkge1xuICAgICAgICBpZiAoKDAsIGV4Y2hhbmdlU3RhdHVzXzEuZmlsbFBhdXNlZCkoc3RhdGVBY2NvdW50LCBtYXJrZXRBY2NvdW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzQW1tUGF1c2VkID0gKDAsIGV4Y2hhbmdlU3RhdHVzXzEuYW1tUGF1c2VkKShzdGF0ZUFjY291bnQsIG1hcmtldEFjY291bnQpO1xuICAgICAgICBjb25zdCBtaW5BdWN0aW9uRHVyYXRpb24gPSAoMCwgX18xLmlzVmFyaWFudCkobWFya2V0VHlwZSwgJ3BlcnAnKVxuICAgICAgICAgICAgPyBzdGF0ZUFjY291bnQubWluUGVycEF1Y3Rpb25EdXJhdGlvblxuICAgICAgICAgICAgOiAwO1xuICAgICAgICBjb25zdCByZXN0aW5nTGltaXRPcmRlck5vZGVzVG9GaWxsID0gdGhpcy5maW5kUmVzdGluZ0xpbWl0T3JkZXJOb2Rlc1RvRmlsbChtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhLCBpc0FtbVBhdXNlZCwgbWluQXVjdGlvbkR1cmF0aW9uLCBmYWxsYmFja0FzaywgZmFsbGJhY2tCaWQpO1xuICAgICAgICBjb25zdCB0YWtpbmdPcmRlck5vZGVzVG9GaWxsID0gdGhpcy5maW5kVGFraW5nTm9kZXNUb0ZpbGwobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSwgaXNBbW1QYXVzZWQsIG1pbkF1Y3Rpb25EdXJhdGlvbiwgZmFsbGJhY2tBc2ssIGZhbGxiYWNrQmlkKTtcbiAgICAgICAgLy8gZ2V0IGV4cGlyZWQgbWFya2V0IG5vZGVzXG4gICAgICAgIGNvbnN0IGV4cGlyZWROb2Rlc1RvRmlsbCA9IHRoaXMuZmluZEV4cGlyZWROb2Rlc1RvRmlsbChtYXJrZXRJbmRleCwgdHMsIG1hcmtldFR5cGUpO1xuICAgICAgICAvLyBmb3Igc3BvdCwgbXVsdGlwbGUgbWFrZXJzIGlzbid0IHN1cHBvcnRlZCwgc28gZG9uJ3QgbWVyZ2VcbiAgICAgICAgaWYgKCgwLCBfXzEuaXNWYXJpYW50KShtYXJrZXRUeXBlLCAnc3BvdCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdGluZ0xpbWl0T3JkZXJOb2Rlc1RvRmlsbC5jb25jYXQodGFraW5nT3JkZXJOb2Rlc1RvRmlsbCwgZXhwaXJlZE5vZGVzVG9GaWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZU5vZGVzVG9GaWxsKHJlc3RpbmdMaW1pdE9yZGVyTm9kZXNUb0ZpbGwsIHRha2luZ09yZGVyTm9kZXNUb0ZpbGwpLmNvbmNhdChleHBpcmVkTm9kZXNUb0ZpbGwpO1xuICAgIH1cbiAgICBtZXJnZU5vZGVzVG9GaWxsKHJlc3RpbmdMaW1pdE9yZGVyTm9kZXNUb0ZpbGwsIHRha2luZ09yZGVyTm9kZXNUb0ZpbGwpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkTm9kZXNUb0ZpbGwgPSBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IG1lcmdlTm9kZXNUb0ZpbGxIZWxwZXIgPSAobm9kZXNUb0ZpbGxBcnJheSkgPT4ge1xuICAgICAgICAgICAgbm9kZXNUb0ZpbGxBcnJheS5mb3JFYWNoKChub2RlVG9GaWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9kZVNpZ25hdHVyZSA9ICgwLCBOb2RlTGlzdF8xLmdldE9yZGVyU2lnbmF0dXJlKShub2RlVG9GaWxsLm5vZGUub3JkZXIub3JkZXJJZCwgbm9kZVRvRmlsbC5ub2RlLnVzZXJBY2NvdW50KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1lcmdlZE5vZGVzVG9GaWxsLmhhcyhub2RlU2lnbmF0dXJlKSkge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWROb2Rlc1RvRmlsbC5zZXQobm9kZVNpZ25hdHVyZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogbm9kZVRvRmlsbC5ub2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZXJOb2RlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZVRvRmlsbC5tYWtlck5vZGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZE5vZGVzVG9GaWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0KG5vZGVTaWduYXR1cmUpXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFrZXJOb2Rlcy5wdXNoKC4uLm5vZGVUb0ZpbGwubWFrZXJOb2Rlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIG1lcmdlTm9kZXNUb0ZpbGxIZWxwZXIocmVzdGluZ0xpbWl0T3JkZXJOb2Rlc1RvRmlsbCk7XG4gICAgICAgIG1lcmdlTm9kZXNUb0ZpbGxIZWxwZXIodGFraW5nT3JkZXJOb2Rlc1RvRmlsbCk7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKG1lcmdlZE5vZGVzVG9GaWxsLnZhbHVlcygpKTtcbiAgICB9XG4gICAgZmluZFJlc3RpbmdMaW1pdE9yZGVyTm9kZXNUb0ZpbGwobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSwgaXNBbW1QYXVzZWQsIG1pbkF1Y3Rpb25EdXJhdGlvbiwgZmFsbGJhY2tBc2ssIGZhbGxiYWNrQmlkKSB7XG4gICAgICAgIGNvbnN0IG5vZGVzVG9GaWxsID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGNvbnN0IGNyb3NzaW5nTm9kZXMgPSB0aGlzLmZpbmRDcm9zc2luZ1Jlc3RpbmdMaW1pdE9yZGVycyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgZm9yIChjb25zdCBjcm9zc2luZ05vZGUgb2YgY3Jvc3NpbmdOb2Rlcykge1xuICAgICAgICAgICAgbm9kZXNUb0ZpbGwucHVzaChjcm9zc2luZ05vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmYWxsYmFja0JpZCAmJiAhaXNBbW1QYXVzZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGFza0dlbmVyYXRvciA9IHRoaXMuZ2V0UmVzdGluZ0xpbWl0QXNrcyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGFza3NDcm9zc2luZ0ZhbGxiYWNrID0gdGhpcy5maW5kTm9kZXNDcm9zc2luZ0ZhbGxiYWNrTGlxdWlkaXR5KG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSwgYXNrR2VuZXJhdG9yLCBmYWxsYmFja0JpZCwgKGFza1ByaWNlLCBmYWxsYmFja1ByaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFza1ByaWNlLmx0ZShmYWxsYmFja1ByaWNlKTtcbiAgICAgICAgICAgIH0sIG1pbkF1Y3Rpb25EdXJhdGlvbik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFza0Nyb3NzaW5nRmFsbGJhY2sgb2YgYXNrc0Nyb3NzaW5nRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBub2Rlc1RvRmlsbC5wdXNoKGFza0Nyb3NzaW5nRmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmYWxsYmFja0FzayAmJiAhaXNBbW1QYXVzZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGJpZEdlbmVyYXRvciA9IHRoaXMuZ2V0UmVzdGluZ0xpbWl0QmlkcyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGJpZHNDcm9zc2luZ0ZhbGxiYWNrID0gdGhpcy5maW5kTm9kZXNDcm9zc2luZ0ZhbGxiYWNrTGlxdWlkaXR5KG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSwgYmlkR2VuZXJhdG9yLCBmYWxsYmFja0FzaywgKGJpZFByaWNlLCBmYWxsYmFja1ByaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpZFByaWNlLmd0ZShmYWxsYmFja1ByaWNlKTtcbiAgICAgICAgICAgIH0sIG1pbkF1Y3Rpb25EdXJhdGlvbik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJpZENyb3NzaW5nRmFsbGJhY2sgb2YgYmlkc0Nyb3NzaW5nRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBub2Rlc1RvRmlsbC5wdXNoKGJpZENyb3NzaW5nRmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2Rlc1RvRmlsbDtcbiAgICB9XG4gICAgZmluZFRha2luZ05vZGVzVG9GaWxsKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEsIGlzQW1tUGF1c2VkLCBtaW5BdWN0aW9uRHVyYXRpb24sIGZhbGxiYWNrQXNrLCBmYWxsYmFja0JpZCkge1xuICAgICAgICBjb25zdCBub2Rlc1RvRmlsbCA9IG5ldyBBcnJheSgpO1xuICAgICAgICBsZXQgdGFraW5nT3JkZXJHZW5lcmF0b3IgPSB0aGlzLmdldFRha2luZ0Fza3MobWFya2V0SW5kZXgsIG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgIGNvbnN0IHRha2luZ0Fza3NDcm9zc2luZ0JpZHMgPSB0aGlzLmZpbmRUYWtpbmdOb2Rlc0Nyb3NzaW5nTWFrZXJOb2RlcyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhLCB0YWtpbmdPcmRlckdlbmVyYXRvciwgdGhpcy5nZXRNYWtlckxpbWl0Qmlkcy5iaW5kKHRoaXMpLCAodGFrZXJQcmljZSwgbWFrZXJQcmljZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCgwLCBfXzEuaXNWYXJpYW50KShtYXJrZXRUeXBlLCAnc3BvdCcpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRha2VyUHJpY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmYWxsYmFja0JpZCAmJiBtYWtlclByaWNlLmx0KGZhbGxiYWNrQmlkKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRha2VyUHJpY2UgPT09IHVuZGVmaW5lZCB8fCB0YWtlclByaWNlLmx0ZShtYWtlclByaWNlKTtcbiAgICAgICAgfSwgZmFsbGJhY2tBc2spO1xuICAgICAgICBmb3IgKGNvbnN0IHRha2luZ0Fza0Nyb3NzaW5nQmlkIG9mIHRha2luZ0Fza3NDcm9zc2luZ0JpZHMpIHtcbiAgICAgICAgICAgIG5vZGVzVG9GaWxsLnB1c2godGFraW5nQXNrQ3Jvc3NpbmdCaWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmYWxsYmFja0JpZCAmJiAhaXNBbW1QYXVzZWQpIHtcbiAgICAgICAgICAgIHRha2luZ09yZGVyR2VuZXJhdG9yID0gdGhpcy5nZXRUYWtpbmdBc2tzKG1hcmtldEluZGV4LCBtYXJrZXRUeXBlLCBzbG90LCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgY29uc3QgdGFraW5nQXNrc0Nyb3NzaW5nRmFsbGJhY2sgPSB0aGlzLmZpbmROb2Rlc0Nyb3NzaW5nRmFsbGJhY2tMaXF1aWRpdHkobWFya2V0VHlwZSwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhLCB0YWtpbmdPcmRlckdlbmVyYXRvciwgZmFsbGJhY2tCaWQsICh0YWtlclByaWNlLCBmYWxsYmFja1ByaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRha2VyUHJpY2UgPT09IHVuZGVmaW5lZCB8fCB0YWtlclByaWNlLmx0ZShmYWxsYmFja1ByaWNlKTtcbiAgICAgICAgICAgIH0sIG1pbkF1Y3Rpb25EdXJhdGlvbik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRha2luZ0Fza0Nyb3NzaW5nRmFsbGJhY2sgb2YgdGFraW5nQXNrc0Nyb3NzaW5nRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBub2Rlc1RvRmlsbC5wdXNoKHRha2luZ0Fza0Nyb3NzaW5nRmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRha2luZ09yZGVyR2VuZXJhdG9yID0gdGhpcy5nZXRUYWtpbmdCaWRzKG1hcmtldEluZGV4LCBtYXJrZXRUeXBlLCBzbG90LCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICBjb25zdCB0YWtpbmdCaWRzVG9GaWxsID0gdGhpcy5maW5kVGFraW5nTm9kZXNDcm9zc2luZ01ha2VyTm9kZXMobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSwgdGFraW5nT3JkZXJHZW5lcmF0b3IsIHRoaXMuZ2V0TWFrZXJMaW1pdEFza3MuYmluZCh0aGlzKSwgKHRha2VyUHJpY2UsIG1ha2VyUHJpY2UpID0+IHtcbiAgICAgICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkobWFya2V0VHlwZSwgJ3Nwb3QnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0YWtlclByaWNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmFsbGJhY2tBc2sgJiYgbWFrZXJQcmljZS5ndChmYWxsYmFja0FzaykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0YWtlclByaWNlID09PSB1bmRlZmluZWQgfHwgdGFrZXJQcmljZS5ndGUobWFrZXJQcmljZSk7XG4gICAgICAgIH0sIGZhbGxiYWNrQmlkKTtcbiAgICAgICAgZm9yIChjb25zdCB0YWtpbmdCaWRUb0ZpbGwgb2YgdGFraW5nQmlkc1RvRmlsbCkge1xuICAgICAgICAgICAgbm9kZXNUb0ZpbGwucHVzaCh0YWtpbmdCaWRUb0ZpbGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmYWxsYmFja0FzayAmJiAhaXNBbW1QYXVzZWQpIHtcbiAgICAgICAgICAgIHRha2luZ09yZGVyR2VuZXJhdG9yID0gdGhpcy5nZXRUYWtpbmdCaWRzKG1hcmtldEluZGV4LCBtYXJrZXRUeXBlLCBzbG90LCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgY29uc3QgdGFraW5nQmlkc0Nyb3NzaW5nRmFsbGJhY2sgPSB0aGlzLmZpbmROb2Rlc0Nyb3NzaW5nRmFsbGJhY2tMaXF1aWRpdHkobWFya2V0VHlwZSwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhLCB0YWtpbmdPcmRlckdlbmVyYXRvciwgZmFsbGJhY2tBc2ssICh0YWtlclByaWNlLCBmYWxsYmFja1ByaWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRha2VyUHJpY2UgPT09IHVuZGVmaW5lZCB8fCB0YWtlclByaWNlLmd0ZShmYWxsYmFja1ByaWNlKTtcbiAgICAgICAgICAgIH0sIG1pbkF1Y3Rpb25EdXJhdGlvbik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1hcmtldEJpZENyb3NzaW5nRmFsbGJhY2sgb2YgdGFraW5nQmlkc0Nyb3NzaW5nRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBub2Rlc1RvRmlsbC5wdXNoKG1hcmtldEJpZENyb3NzaW5nRmFsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2Rlc1RvRmlsbDtcbiAgICB9XG4gICAgZmluZFRha2luZ05vZGVzQ3Jvc3NpbmdNYWtlck5vZGVzKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEsIHRha2VyTm9kZUdlbmVyYXRvciwgbWFrZXJOb2RlR2VuZXJhdG9yRm4sIGRvZXNDcm9zcywgZmFsbGJhY2tQcmljZSkge1xuICAgICAgICBjb25zdCBub2Rlc1RvRmlsbCA9IG5ldyBBcnJheSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHRha2VyTm9kZSBvZiB0YWtlck5vZGVHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ha2VyTm9kZUdlbmVyYXRvciA9IG1ha2VyTm9kZUdlbmVyYXRvckZuKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEsIGZhbGxiYWNrUHJpY2UpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBtYWtlck5vZGUgb2YgbWFrZXJOb2RlR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2FuJ3QgbWF0Y2ggb3JkZXJzIGZyb20gdGhlIHNhbWUgdXNlclxuICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVVc2VyID0gdGFrZXJOb2RlLnVzZXJBY2NvdW50LmVxdWFscyhtYWtlck5vZGUudXNlckFjY291bnQpO1xuICAgICAgICAgICAgICAgIGlmIChzYW1lVXNlcikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbWFrZXJQcmljZSA9IG1ha2VyTm9kZS5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRha2VyUHJpY2UgPSB0YWtlck5vZGUuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmRlcnNDcm9zcyA9IGRvZXNDcm9zcyh0YWtlclByaWNlLCBtYWtlclByaWNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW9yZGVyc0Nyb3NzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1hcmtldCBvcmRlcnMgYXJlbid0IHNvcnRlZCBieSBwcmljZSwgdGhleSBhcmUgc29ydGVkIGJ5IHRpbWUsIHNvIHdlIG5lZWQgdG8gdHJhdmVyc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3VnaCBhbGwgb2YgZW1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGVzVG9GaWxsLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0YWtlck5vZGUsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyTm9kZXM6IFttYWtlck5vZGVdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ha2VyT3JkZXIgPSBtYWtlck5vZGUub3JkZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFrZXJPcmRlciA9IHRha2VyTm9kZS5vcmRlcjtcbiAgICAgICAgICAgICAgICBjb25zdCBtYWtlckJhc2VSZW1haW5pbmcgPSBtYWtlck9yZGVyLmJhc2VBc3NldEFtb3VudC5zdWIobWFrZXJPcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRha2VyQmFzZVJlbWFpbmluZyA9IHRha2VyT3JkZXIuYmFzZUFzc2V0QW1vdW50LnN1Yih0YWtlck9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUZpbGxlZCA9IF9fMS5CTi5taW4obWFrZXJCYXNlUmVtYWluaW5nLCB0YWtlckJhc2VSZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld01ha2VyT3JkZXIgPSB7IC4uLm1ha2VyT3JkZXIgfTtcbiAgICAgICAgICAgICAgICBuZXdNYWtlck9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCA9XG4gICAgICAgICAgICAgICAgICAgIG1ha2VyT3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkLmFkZChiYXNlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldExpc3RGb3JPcmRlcihuZXdNYWtlck9yZGVyLCBzbG90KS51cGRhdGUobmV3TWFrZXJPcmRlciwgbWFrZXJOb2RlLnVzZXJBY2NvdW50KTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYWtlck9yZGVyID0geyAuLi50YWtlck9yZGVyIH07XG4gICAgICAgICAgICAgICAgbmV3VGFrZXJPcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQgPVxuICAgICAgICAgICAgICAgICAgICB0YWtlck9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZC5hZGQoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0Rm9yT3JkZXIobmV3VGFrZXJPcmRlciwgc2xvdCkudXBkYXRlKG5ld1Rha2VyT3JkZXIsIHRha2VyTm9kZS51c2VyQWNjb3VudCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1Rha2VyT3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkLmVxKHRha2VyT3JkZXIuYmFzZUFzc2V0QW1vdW50KSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzVG9GaWxsO1xuICAgIH1cbiAgICBmaW5kTm9kZXNDcm9zc2luZ0ZhbGxiYWNrTGlxdWlkaXR5KG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSwgbm9kZUdlbmVyYXRvciwgZmFsbGJhY2tQcmljZSwgZG9lc0Nyb3NzLCBtaW5BdWN0aW9uRHVyYXRpb24pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBub2Rlc1RvRmlsbCA9IG5ldyBBcnJheSgpO1xuICAgICAgICBsZXQgbmV4dE5vZGUgPSBub2RlR2VuZXJhdG9yLm5leHQoKTtcbiAgICAgICAgd2hpbGUgKCFuZXh0Tm9kZS5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBub2RlID0gbmV4dE5vZGUudmFsdWU7XG4gICAgICAgICAgICBpZiAoKDAsIF9fMS5pc1ZhcmlhbnQpKG1hcmtldFR5cGUsICdzcG90JykgJiYgKChfYSA9IG5vZGUub3JkZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3N0T25seSkpIHtcbiAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGVHZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgbm9kZVByaWNlID0gKDAsIF9fMS5nZXRMaW1pdFByaWNlKShub2RlLm9yZGVyLCBvcmFjbGVQcmljZURhdGEsIHNsb3QpO1xuICAgICAgICAgICAgLy8gb3JkZXIgY3Jvc3NlcyBpZiB0aGVyZSBpcyBubyBsaW1pdCBwcmljZSBvciBpdCBjcm9zc2VzIGZhbGxiYWNrIHByaWNlXG4gICAgICAgICAgICBjb25zdCBjcm9zc2VzID0gZG9lc0Nyb3NzKG5vZGVQcmljZSwgZmFsbGJhY2tQcmljZSk7XG4gICAgICAgICAgICAvLyBmYWxsYmFjayBpcyBhdmFpbGFibGUgaWYgYXVjdGlvbiBpcyBjb21wbGV0ZSBvciBpdCdzIGEgc3BvdCBvcmRlclxuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tBdmFpbGFibGUgPSAoMCwgX18xLmlzVmFyaWFudCkobWFya2V0VHlwZSwgJ3Nwb3QnKSB8fFxuICAgICAgICAgICAgICAgICgwLCBfXzEuaXNGYWxsYmFja0F2YWlsYWJsZUxpcXVpZGl0eVNvdXJjZSkobm9kZS5vcmRlciwgbWluQXVjdGlvbkR1cmF0aW9uLCBzbG90KTtcbiAgICAgICAgICAgIGlmIChjcm9zc2VzICYmIGZhbGxiYWNrQXZhaWxhYmxlKSB7XG4gICAgICAgICAgICAgICAgbm9kZXNUb0ZpbGwucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyTm9kZXM6IFtdLCAvLyBmaWxsZWQgYnkgZmFsbGJhY2tcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHROb2RlID0gbm9kZUdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzVG9GaWxsO1xuICAgIH1cbiAgICBmaW5kRXhwaXJlZE5vZGVzVG9GaWxsKG1hcmtldEluZGV4LCB0cywgbWFya2V0VHlwZSkge1xuICAgICAgICBjb25zdCBub2Rlc1RvRmlsbCA9IG5ldyBBcnJheSgpO1xuICAgICAgICBjb25zdCBtYXJrZXRUeXBlU3RyID0gKDAsIF9fMS5nZXRWYXJpYW50KShtYXJrZXRUeXBlKTtcbiAgICAgICAgY29uc3Qgbm9kZUxpc3RzID0gdGhpcy5vcmRlckxpc3RzLmdldChtYXJrZXRUeXBlU3RyKS5nZXQobWFya2V0SW5kZXgpO1xuICAgICAgICBpZiAoIW5vZGVMaXN0cykge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzVG9GaWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsbCBiaWRzL2Fza3MgdGhhdCBjYW4gZXhwaXJlXG4gICAgICAgIC8vIGRvbnQgdHJ5IHRvIGV4cGlyZSBsaW1pdCBvcmRlcnMgd2l0aCB0aWYgYXMgaXRzIGluZWZmaWNpZW50IHVzZSBvZiBibG9ja3NwYWNlXG4gICAgICAgIGNvbnN0IGJpZEdlbmVyYXRvcnMgPSBbXG4gICAgICAgICAgICBub2RlTGlzdHMudGFraW5nTGltaXQuYmlkLmdldEdlbmVyYXRvcigpLFxuICAgICAgICAgICAgbm9kZUxpc3RzLnJlc3RpbmdMaW1pdC5iaWQuZ2V0R2VuZXJhdG9yKCksXG4gICAgICAgICAgICBub2RlTGlzdHMuZmxvYXRpbmdMaW1pdC5iaWQuZ2V0R2VuZXJhdG9yKCksXG4gICAgICAgICAgICBub2RlTGlzdHMubWFya2V0LmJpZC5nZXRHZW5lcmF0b3IoKSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYXNrR2VuZXJhdG9ycyA9IFtcbiAgICAgICAgICAgIG5vZGVMaXN0cy50YWtpbmdMaW1pdC5hc2suZ2V0R2VuZXJhdG9yKCksXG4gICAgICAgICAgICBub2RlTGlzdHMucmVzdGluZ0xpbWl0LmFzay5nZXRHZW5lcmF0b3IoKSxcbiAgICAgICAgICAgIG5vZGVMaXN0cy5mbG9hdGluZ0xpbWl0LmFzay5nZXRHZW5lcmF0b3IoKSxcbiAgICAgICAgICAgIG5vZGVMaXN0cy5tYXJrZXQuYXNrLmdldEdlbmVyYXRvcigpLFxuICAgICAgICBdO1xuICAgICAgICBmb3IgKGNvbnN0IGJpZEdlbmVyYXRvciBvZiBiaWRHZW5lcmF0b3JzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJpZCBvZiBiaWRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoKDAsIF9fMS5pc09yZGVyRXhwaXJlZCkoYmlkLm9yZGVyLCB0cywgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNUb0ZpbGwucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOiBiaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWtlck5vZGVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgYXNrR2VuZXJhdG9yIG9mIGFza0dlbmVyYXRvcnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXNrIG9mIGFza0dlbmVyYXRvcikge1xuICAgICAgICAgICAgICAgIGlmICgoMCwgX18xLmlzT3JkZXJFeHBpcmVkKShhc2sub3JkZXIsIHRzLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1RvRmlsbC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IGFzayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VyTm9kZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzVG9GaWxsO1xuICAgIH1cbiAgICBmaW5kSml0QXVjdGlvbk5vZGVzVG9GaWxsKG1hcmtldEluZGV4LCBzbG90LCBvcmFjbGVQcmljZURhdGEsIG1hcmtldFR5cGUpIHtcbiAgICAgICAgY29uc3Qgbm9kZXNUb0ZpbGwgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgLy8gVGhlbiBzZWUgaWYgdGhlcmUgYXJlIG9yZGVycyBzdGlsbCBpbiBKSVQgYXVjdGlvblxuICAgICAgICBmb3IgKGNvbnN0IG1hcmtldEJpZCBvZiB0aGlzLmdldFRha2luZ0JpZHMobWFya2V0SW5kZXgsIG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSkpIHtcbiAgICAgICAgICAgIG5vZGVzVG9GaWxsLnB1c2goe1xuICAgICAgICAgICAgICAgIG5vZGU6IG1hcmtldEJpZCxcbiAgICAgICAgICAgICAgICBtYWtlck5vZGVzOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgbWFya2V0QXNrIG9mIHRoaXMuZ2V0VGFraW5nQXNrcyhtYXJrZXRJbmRleCwgbWFya2V0VHlwZSwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhKSkge1xuICAgICAgICAgICAgbm9kZXNUb0ZpbGwucHVzaCh7XG4gICAgICAgICAgICAgICAgbm9kZTogbWFya2V0QXNrLFxuICAgICAgICAgICAgICAgIG1ha2VyTm9kZXM6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzVG9GaWxsO1xuICAgIH1cbiAgICAqZ2V0VGFraW5nQmlkcyhtYXJrZXRJbmRleCwgbWFya2V0VHlwZSwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgICAgIGNvbnN0IG1hcmtldFR5cGVTdHIgPSAoMCwgX18xLmdldFZhcmlhbnQpKG1hcmtldFR5cGUpO1xuICAgICAgICBjb25zdCBvcmRlckxpc3RzID0gdGhpcy5vcmRlckxpc3RzLmdldChtYXJrZXRUeXBlU3RyKS5nZXQobWFya2V0SW5kZXgpO1xuICAgICAgICBpZiAoIW9yZGVyTGlzdHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVJlc3RpbmdMaW1pdE9yZGVycyhzbG90KTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdG9yTGlzdCA9IFtcbiAgICAgICAgICAgIG9yZGVyTGlzdHMubWFya2V0LmJpZC5nZXRHZW5lcmF0b3IoKSxcbiAgICAgICAgICAgIG9yZGVyTGlzdHMudGFraW5nTGltaXQuYmlkLmdldEdlbmVyYXRvcigpLFxuICAgICAgICBdO1xuICAgICAgICB5aWVsZCogdGhpcy5nZXRCZXN0Tm9kZShnZW5lcmF0b3JMaXN0LCBvcmFjbGVQcmljZURhdGEsIHNsb3QsIChiZXN0Tm9kZSwgY3VycmVudE5vZGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBiZXN0Tm9kZS5vcmRlci5zbG90Lmx0KGN1cnJlbnROb2RlLm9yZGVyLnNsb3QpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgKmdldFRha2luZ0Fza3MobWFya2V0SW5kZXgsIG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSkge1xuICAgICAgICBjb25zdCBtYXJrZXRUeXBlU3RyID0gKDAsIF9fMS5nZXRWYXJpYW50KShtYXJrZXRUeXBlKTtcbiAgICAgICAgY29uc3Qgb3JkZXJMaXN0cyA9IHRoaXMub3JkZXJMaXN0cy5nZXQobWFya2V0VHlwZVN0cikuZ2V0KG1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKCFvcmRlckxpc3RzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVSZXN0aW5nTGltaXRPcmRlcnMoc2xvdCk7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRvckxpc3QgPSBbXG4gICAgICAgICAgICBvcmRlckxpc3RzLm1hcmtldC5hc2suZ2V0R2VuZXJhdG9yKCksXG4gICAgICAgICAgICBvcmRlckxpc3RzLnRha2luZ0xpbWl0LmFzay5nZXRHZW5lcmF0b3IoKSxcbiAgICAgICAgXTtcbiAgICAgICAgeWllbGQqIHRoaXMuZ2V0QmVzdE5vZGUoZ2VuZXJhdG9yTGlzdCwgb3JhY2xlUHJpY2VEYXRhLCBzbG90LCAoYmVzdE5vZGUsIGN1cnJlbnROb2RlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYmVzdE5vZGUub3JkZXIuc2xvdC5sdChjdXJyZW50Tm9kZS5vcmRlci5zbG90KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICpnZXRCZXN0Tm9kZShnZW5lcmF0b3JMaXN0LCBvcmFjbGVQcmljZURhdGEsIHNsb3QsIGNvbXBhcmVGY24pIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdG9ycyA9IGdlbmVyYXRvckxpc3QubWFwKChnZW5lcmF0b3IpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmV4dDogZ2VuZXJhdG9yLm5leHQoKSxcbiAgICAgICAgICAgICAgICBnZW5lcmF0b3IsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHNpZGVFeGhhdXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKCFzaWRlRXhoYXVzdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBiZXN0R2VuZXJhdG9yID0gZ2VuZXJhdG9ycy5yZWR1Y2UoKGJlc3RHZW5lcmF0b3IsIGN1cnJlbnRHZW5lcmF0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEdlbmVyYXRvci5uZXh0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJlc3RHZW5lcmF0b3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChiZXN0R2VuZXJhdG9yLm5leHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudEdlbmVyYXRvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYmVzdFZhbHVlID0gYmVzdEdlbmVyYXRvci5uZXh0LnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRHZW5lcmF0b3IubmV4dC52YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZUZjbihiZXN0VmFsdWUsIGN1cnJlbnRWYWx1ZSwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhKVxuICAgICAgICAgICAgICAgICAgICA/IGJlc3RHZW5lcmF0b3JcbiAgICAgICAgICAgICAgICAgICAgOiBjdXJyZW50R2VuZXJhdG9yO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWJlc3RHZW5lcmF0b3IubmV4dC5kb25lKSB7XG4gICAgICAgICAgICAgICAgLy8gc2tpcCB0aGlzIG5vZGUgaWYgaXQncyBhbHJlYWR5IGNvbXBsZXRlbHkgZmlsbGVkXG4gICAgICAgICAgICAgICAgaWYgKGJlc3RHZW5lcmF0b3IubmV4dC52YWx1ZS5pc0Jhc2VGaWxsZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICBiZXN0R2VuZXJhdG9yLm5leHQgPSBiZXN0R2VuZXJhdG9yLmdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB5aWVsZCBiZXN0R2VuZXJhdG9yLm5leHQudmFsdWU7XG4gICAgICAgICAgICAgICAgYmVzdEdlbmVyYXRvci5uZXh0ID0gYmVzdEdlbmVyYXRvci5nZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2lkZUV4aGF1c3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgKmdldFJlc3RpbmdMaW1pdEFza3MobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSkge1xuICAgICAgICBpZiAoKDAsIF9fMS5pc1ZhcmlhbnQpKG1hcmtldFR5cGUsICdzcG90JykgJiYgIW9yYWNsZVByaWNlRGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgT3JhY2xlUHJpY2VEYXRhIHRvIGdldCBzcG90IGFza3MnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVJlc3RpbmdMaW1pdE9yZGVycyhzbG90KTtcbiAgICAgICAgY29uc3QgbWFya2V0VHlwZVN0ciA9ICgwLCBfXzEuZ2V0VmFyaWFudCkobWFya2V0VHlwZSk7XG4gICAgICAgIGNvbnN0IG5vZGVMaXN0cyA9IHRoaXMub3JkZXJMaXN0cy5nZXQobWFya2V0VHlwZVN0cikuZ2V0KG1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKCFub2RlTGlzdHMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBnZW5lcmF0b3JMaXN0ID0gW1xuICAgICAgICAgICAgbm9kZUxpc3RzLnJlc3RpbmdMaW1pdC5hc2suZ2V0R2VuZXJhdG9yKCksXG4gICAgICAgICAgICBub2RlTGlzdHMuZmxvYXRpbmdMaW1pdC5hc2suZ2V0R2VuZXJhdG9yKCksXG4gICAgICAgIF07XG4gICAgICAgIHlpZWxkKiB0aGlzLmdldEJlc3ROb2RlKGdlbmVyYXRvckxpc3QsIG9yYWNsZVByaWNlRGF0YSwgc2xvdCwgKGJlc3ROb2RlLCBjdXJyZW50Tm9kZSwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYmVzdE5vZGVcbiAgICAgICAgICAgICAgICAuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KVxuICAgICAgICAgICAgICAgIC5sdChjdXJyZW50Tm9kZS5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbHRlcnMgdGhlIGxpbWl0IGFza3MgdGhhdCBhcmUgcmVzdGluZyBhbmQgZG8gbm90IGNyb3NzIGZhbGxiYWNrIGJpZFxuICAgICAqIFRha2luZyBvcmRlcnMgY2FuIG9ubHkgZmlsbCBhZ2FpbnN0IG9yZGVycyB0aGF0IG1lZXQgdGhpcyBjcml0ZXJpYVxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICAqZ2V0TWFrZXJMaW1pdEFza3MobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSwgZmFsbGJhY2tCaWQpIHtcbiAgICAgICAgY29uc3QgaXNQZXJwTWFya2V0ID0gKDAsIF9fMS5pc1ZhcmlhbnQpKG1hcmtldFR5cGUsICdwZXJwJyk7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLmdldFJlc3RpbmdMaW1pdEFza3MobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSkpIHtcbiAgICAgICAgICAgIGlmIChpc1BlcnBNYXJrZXQgJiZcbiAgICAgICAgICAgICAgICBmYWxsYmFja0JpZCAmJlxuICAgICAgICAgICAgICAgIG5vZGUuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KS5sdGUoZmFsbGJhY2tCaWQpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCBub2RlO1xuICAgICAgICB9XG4gICAgfVxuICAgICpnZXRSZXN0aW5nTGltaXRCaWRzKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICAgICAgaWYgKCgwLCBfXzEuaXNWYXJpYW50KShtYXJrZXRUeXBlLCAnc3BvdCcpICYmICFvcmFjbGVQcmljZURhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBwcm92aWRlIE9yYWNsZVByaWNlRGF0YSB0byBnZXQgc3BvdCBiaWRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVSZXN0aW5nTGltaXRPcmRlcnMoc2xvdCk7XG4gICAgICAgIGNvbnN0IG1hcmtldFR5cGVTdHIgPSAoMCwgX18xLmdldFZhcmlhbnQpKG1hcmtldFR5cGUpO1xuICAgICAgICBjb25zdCBub2RlTGlzdHMgPSB0aGlzLm9yZGVyTGlzdHMuZ2V0KG1hcmtldFR5cGVTdHIpLmdldChtYXJrZXRJbmRleCk7XG4gICAgICAgIGlmICghbm9kZUxpc3RzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2VuZXJhdG9yTGlzdCA9IFtcbiAgICAgICAgICAgIG5vZGVMaXN0cy5yZXN0aW5nTGltaXQuYmlkLmdldEdlbmVyYXRvcigpLFxuICAgICAgICAgICAgbm9kZUxpc3RzLmZsb2F0aW5nTGltaXQuYmlkLmdldEdlbmVyYXRvcigpLFxuICAgICAgICBdO1xuICAgICAgICB5aWVsZCogdGhpcy5nZXRCZXN0Tm9kZShnZW5lcmF0b3JMaXN0LCBvcmFjbGVQcmljZURhdGEsIHNsb3QsIChiZXN0Tm9kZSwgY3VycmVudE5vZGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGJlc3ROb2RlXG4gICAgICAgICAgICAgICAgLmdldFByaWNlKG9yYWNsZVByaWNlRGF0YSwgc2xvdClcbiAgICAgICAgICAgICAgICAuZ3QoY3VycmVudE5vZGUuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWx0ZXJzIHRoZSBsaW1pdCBiaWRzIHRoYXQgYXJlIHBvc3Qgb25seSwgaGF2ZSBiZWVuIHBsYWNlIGZvciBzdWZmaWNpZW50bHkgbG9uZyBvciBhcmUgYmVsb3cgdGhlIGZhbGxiYWNrIGFza1xuICAgICAqIE1hcmtldCBvcmRlcnMgY2FuIG9ubHkgZmlsbCBhZ2FpbnN0IG9yZGVycyB0aGF0IG1lZXQgdGhpcyBjcml0ZXJpYVxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICAqZ2V0TWFrZXJMaW1pdEJpZHMobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSwgZmFsbGJhY2tBc2spIHtcbiAgICAgICAgY29uc3QgaXNQZXJwTWFya2V0ID0gKDAsIF9fMS5pc1ZhcmlhbnQpKG1hcmtldFR5cGUsICdwZXJwJyk7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzLmdldFJlc3RpbmdMaW1pdEJpZHMobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSkpIHtcbiAgICAgICAgICAgIGlmIChpc1BlcnBNYXJrZXQgJiZcbiAgICAgICAgICAgICAgICBmYWxsYmFja0FzayAmJlxuICAgICAgICAgICAgICAgIG5vZGUuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KS5ndGUoZmFsbGJhY2tBc2spKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCBub2RlO1xuICAgICAgICB9XG4gICAgfVxuICAgICpnZXRBc2tzKG1hcmtldEluZGV4LCBmYWxsYmFja0Fzaywgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkobWFya2V0VHlwZSwgJ3Nwb3QnKSAmJiAhb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3QgcHJvdmlkZSBPcmFjbGVQcmljZURhdGEgdG8gZ2V0IHNwb3QgYXNrcycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdlbmVyYXRvckxpc3QgPSBbXG4gICAgICAgICAgICB0aGlzLmdldFRha2luZ0Fza3MobWFya2V0SW5kZXgsIG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSksXG4gICAgICAgICAgICB0aGlzLmdldFJlc3RpbmdMaW1pdEFza3MobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSksXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IG1hcmtldFR5cGVTdHIgPSAoMCwgX18xLmdldFZhcmlhbnQpKG1hcmtldFR5cGUpO1xuICAgICAgICBpZiAobWFya2V0VHlwZVN0ciA9PT0gJ3BlcnAnICYmIGZhbGxiYWNrQXNrKSB7XG4gICAgICAgICAgICBnZW5lcmF0b3JMaXN0LnB1c2goKDAsIE5vZGVMaXN0XzEuZ2V0VmFtbU5vZGVHZW5lcmF0b3IpKGZhbGxiYWNrQXNrKSk7XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIHRoaXMuZ2V0QmVzdE5vZGUoZ2VuZXJhdG9yTGlzdCwgb3JhY2xlUHJpY2VEYXRhLCBzbG90LCAoYmVzdE5vZGUsIGN1cnJlbnROb2RlLCBzbG90LCBvcmFjbGVQcmljZURhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJlc3ROb2RlVGFraW5nID0gYmVzdE5vZGUub3JkZXJcbiAgICAgICAgICAgICAgICA/ICgwLCBfXzEuaXNUYWtpbmdPcmRlcikoYmVzdE5vZGUub3JkZXIsIHNsb3QpXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlVGFraW5nID0gY3VycmVudE5vZGUub3JkZXJcbiAgICAgICAgICAgICAgICA/ICgwLCBfXzEuaXNUYWtpbmdPcmRlcikoY3VycmVudE5vZGUub3JkZXIsIHNsb3QpXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChiZXN0Tm9kZVRha2luZyAmJiBjdXJyZW50Tm9kZVRha2luZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBiZXN0Tm9kZS5vcmRlci5zbG90Lmx0KGN1cnJlbnROb2RlLm9yZGVyLnNsb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlc3ROb2RlVGFraW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudE5vZGVUYWtpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYmVzdE5vZGVcbiAgICAgICAgICAgICAgICAuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KVxuICAgICAgICAgICAgICAgIC5sdChjdXJyZW50Tm9kZS5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICpnZXRCaWRzKG1hcmtldEluZGV4LCBmYWxsYmFja0JpZCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkobWFya2V0VHlwZSwgJ3Nwb3QnKSAmJiAhb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3QgcHJvdmlkZSBPcmFjbGVQcmljZURhdGEgdG8gZ2V0IHNwb3QgYmlkcycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdlbmVyYXRvckxpc3QgPSBbXG4gICAgICAgICAgICB0aGlzLmdldFRha2luZ0JpZHMobWFya2V0SW5kZXgsIG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSksXG4gICAgICAgICAgICB0aGlzLmdldFJlc3RpbmdMaW1pdEJpZHMobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSksXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IG1hcmtldFR5cGVTdHIgPSAoMCwgX18xLmdldFZhcmlhbnQpKG1hcmtldFR5cGUpO1xuICAgICAgICBpZiAobWFya2V0VHlwZVN0ciA9PT0gJ3BlcnAnICYmIGZhbGxiYWNrQmlkKSB7XG4gICAgICAgICAgICBnZW5lcmF0b3JMaXN0LnB1c2goKDAsIE5vZGVMaXN0XzEuZ2V0VmFtbU5vZGVHZW5lcmF0b3IpKGZhbGxiYWNrQmlkKSk7XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIHRoaXMuZ2V0QmVzdE5vZGUoZ2VuZXJhdG9yTGlzdCwgb3JhY2xlUHJpY2VEYXRhLCBzbG90LCAoYmVzdE5vZGUsIGN1cnJlbnROb2RlLCBzbG90LCBvcmFjbGVQcmljZURhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJlc3ROb2RlVGFraW5nID0gYmVzdE5vZGUub3JkZXJcbiAgICAgICAgICAgICAgICA/ICgwLCBfXzEuaXNUYWtpbmdPcmRlcikoYmVzdE5vZGUub3JkZXIsIHNsb3QpXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnROb2RlVGFraW5nID0gY3VycmVudE5vZGUub3JkZXJcbiAgICAgICAgICAgICAgICA/ICgwLCBfXzEuaXNUYWtpbmdPcmRlcikoY3VycmVudE5vZGUub3JkZXIsIHNsb3QpXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChiZXN0Tm9kZVRha2luZyAmJiBjdXJyZW50Tm9kZVRha2luZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBiZXN0Tm9kZS5vcmRlci5zbG90Lmx0KGN1cnJlbnROb2RlLm9yZGVyLnNsb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlc3ROb2RlVGFraW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudE5vZGVUYWtpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYmVzdE5vZGVcbiAgICAgICAgICAgICAgICAuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KVxuICAgICAgICAgICAgICAgIC5ndChjdXJyZW50Tm9kZS5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbmRDcm9zc2luZ1Jlc3RpbmdMaW1pdE9yZGVycyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgICAgIGNvbnN0IG5vZGVzVG9GaWxsID0gbmV3IEFycmF5KCk7XG4gICAgICAgIGZvciAoY29uc3QgYXNrTm9kZSBvZiB0aGlzLmdldFJlc3RpbmdMaW1pdEFza3MobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGJpZEdlbmVyYXRvciA9IHRoaXMuZ2V0UmVzdGluZ0xpbWl0QmlkcyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYmlkTm9kZSBvZiBiaWRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiaWRQcmljZSA9IGJpZE5vZGUuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICAgICAgICAgICAgICBjb25zdCBhc2tQcmljZSA9IGFza05vZGUuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICAgICAgICAgICAgICAvLyBvcmRlcnMgZG9uJ3QgY3Jvc3NcbiAgICAgICAgICAgICAgICBpZiAoYmlkUHJpY2UubHQoYXNrUHJpY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBiaWRPcmRlciA9IGJpZE5vZGUub3JkZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgYXNrT3JkZXIgPSBhc2tOb2RlLm9yZGVyO1xuICAgICAgICAgICAgICAgIC8vIENhbid0IG1hdGNoIG9yZGVycyBmcm9tIHRoZSBzYW1lIHVzZXJcbiAgICAgICAgICAgICAgICBjb25zdCBzYW1lVXNlciA9IGJpZE5vZGUudXNlckFjY291bnQuZXF1YWxzKGFza05vZGUudXNlckFjY291bnQpO1xuICAgICAgICAgICAgICAgIGlmIChzYW1lVXNlcikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbWFrZXJBbmRUYWtlciA9IHRoaXMuZGV0ZXJtaW5lTWFrZXJBbmRUYWtlcihhc2tOb2RlLCBiaWROb2RlKTtcbiAgICAgICAgICAgICAgICAvLyB1bmFibGUgdG8gbWF0Y2ggbWFrZXIgYW5kIHRha2VyIGR1ZSB0byBwb3N0IG9ubHkgb3Igc2xvdFxuICAgICAgICAgICAgICAgIGlmICghbWFrZXJBbmRUYWtlcikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgeyB0YWtlck5vZGUsIG1ha2VyTm9kZSB9ID0gbWFrZXJBbmRUYWtlcjtcbiAgICAgICAgICAgICAgICBjb25zdCBiaWRCYXNlUmVtYWluaW5nID0gYmlkT3JkZXIuYmFzZUFzc2V0QW1vdW50LnN1YihiaWRPcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFza0Jhc2VSZW1haW5pbmcgPSBhc2tPcmRlci5iYXNlQXNzZXRBbW91bnQuc3ViKGFza09yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUZpbGxlZCA9IF9fMS5CTi5taW4oYmlkQmFzZVJlbWFpbmluZywgYXNrQmFzZVJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QmlkT3JkZXIgPSB7IC4uLmJpZE9yZGVyIH07XG4gICAgICAgICAgICAgICAgbmV3QmlkT3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkID1cbiAgICAgICAgICAgICAgICAgICAgYmlkT3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkLmFkZChiYXNlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdldExpc3RGb3JPcmRlcihuZXdCaWRPcmRlciwgc2xvdCkudXBkYXRlKG5ld0JpZE9yZGVyLCBiaWROb2RlLnVzZXJBY2NvdW50KTtcbiAgICAgICAgICAgICAgICAvLyBhc2sgY29tcGxldGVseSBmaWxsZWRcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdBc2tPcmRlciA9IHsgLi4uYXNrT3JkZXIgfTtcbiAgICAgICAgICAgICAgICBuZXdBc2tPcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQgPVxuICAgICAgICAgICAgICAgICAgICBhc2tPcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQuYWRkKGJhc2VGaWxsZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdEZvck9yZGVyKG5ld0Fza09yZGVyLCBzbG90KS51cGRhdGUobmV3QXNrT3JkZXIsIGFza05vZGUudXNlckFjY291bnQpO1xuICAgICAgICAgICAgICAgIG5vZGVzVG9GaWxsLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlOiB0YWtlck5vZGUsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VyTm9kZXM6IFttYWtlck5vZGVdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChuZXdBc2tPcmRlci5iYXNlQXNzZXRBbW91bnQuZXEobmV3QXNrT3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzVG9GaWxsO1xuICAgIH1cbiAgICBkZXRlcm1pbmVNYWtlckFuZFRha2VyKGFza05vZGUsIGJpZE5vZGUpIHtcbiAgICAgICAgY29uc3QgYXNrU2xvdCA9IGFza05vZGUub3JkZXIuc2xvdC5hZGQobmV3IF9fMS5CTihhc2tOb2RlLm9yZGVyLmF1Y3Rpb25EdXJhdGlvbikpO1xuICAgICAgICBjb25zdCBiaWRTbG90ID0gYmlkTm9kZS5vcmRlci5zbG90LmFkZChuZXcgX18xLkJOKGJpZE5vZGUub3JkZXIuYXVjdGlvbkR1cmF0aW9uKSk7XG4gICAgICAgIGlmIChiaWROb2RlLm9yZGVyLnBvc3RPbmx5ICYmIGFza05vZGUub3JkZXIucG9zdE9ubHkpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYmlkTm9kZS5vcmRlci5wb3N0T25seSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0YWtlck5vZGU6IGFza05vZGUsXG4gICAgICAgICAgICAgICAgbWFrZXJOb2RlOiBiaWROb2RlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhc2tOb2RlLm9yZGVyLnBvc3RPbmx5KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRha2VyTm9kZTogYmlkTm9kZSxcbiAgICAgICAgICAgICAgICBtYWtlck5vZGU6IGFza05vZGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFza1Nsb3QubHRlKGJpZFNsb3QpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRha2VyTm9kZTogYmlkTm9kZSxcbiAgICAgICAgICAgICAgICBtYWtlck5vZGU6IGFza05vZGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0YWtlck5vZGU6IGFza05vZGUsXG4gICAgICAgICAgICAgICAgbWFrZXJOb2RlOiBiaWROb2RlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRCZXN0QXNrKG1hcmtldEluZGV4LCBmYWxsYmFja0Fzaywgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFza3MobWFya2V0SW5kZXgsIGZhbGxiYWNrQXNrLCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpXG4gICAgICAgICAgICAubmV4dCgpXG4gICAgICAgICAgICAudmFsdWUuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICB9XG4gICAgZ2V0QmVzdEJpZChtYXJrZXRJbmRleCwgZmFsbGJhY2tCaWQsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRCaWRzKG1hcmtldEluZGV4LCBmYWxsYmFja0JpZCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKVxuICAgICAgICAgICAgLm5leHQoKVxuICAgICAgICAgICAgLnZhbHVlLmdldFByaWNlKG9yYWNsZVByaWNlRGF0YSwgc2xvdCk7XG4gICAgfVxuICAgIGZpbmROb2Rlc1RvVHJpZ2dlcihtYXJrZXRJbmRleCwgc2xvdCwgb3JhY2xlUHJpY2UsIG1hcmtldFR5cGUsIHN0YXRlQWNjb3VudCkge1xuICAgICAgICBpZiAoKDAsIGV4Y2hhbmdlU3RhdHVzXzEuZXhjaGFuZ2VQYXVzZWQpKHN0YXRlQWNjb3VudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub2Rlc1RvVHJpZ2dlciA9IFtdO1xuICAgICAgICBjb25zdCBtYXJrZXRUeXBlU3RyID0gKDAsIF9fMS5nZXRWYXJpYW50KShtYXJrZXRUeXBlKTtcbiAgICAgICAgY29uc3QgbWFya2V0Tm9kZUxpc3RzID0gdGhpcy5vcmRlckxpc3RzLmdldChtYXJrZXRUeXBlU3RyKS5nZXQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCB0cmlnZ2VyQWJvdmVMaXN0ID0gbWFya2V0Tm9kZUxpc3RzXG4gICAgICAgICAgICA/IG1hcmtldE5vZGVMaXN0cy50cmlnZ2VyLmFib3ZlXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRyaWdnZXJBYm92ZUxpc3QpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0cmlnZ2VyQWJvdmVMaXN0LmdldEdlbmVyYXRvcigpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9yYWNsZVByaWNlLmd0KG5vZGUub3JkZXIudHJpZ2dlclByaWNlKSkge1xuICAgICAgICAgICAgICAgICAgICBub2Rlc1RvVHJpZ2dlci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyaWdnZXJCZWxvd0xpc3QgPSBtYXJrZXROb2RlTGlzdHNcbiAgICAgICAgICAgID8gbWFya2V0Tm9kZUxpc3RzLnRyaWdnZXIuYmVsb3dcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAodHJpZ2dlckJlbG93TGlzdCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRyaWdnZXJCZWxvd0xpc3QuZ2V0R2VuZXJhdG9yKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAob3JhY2xlUHJpY2UubHQobm9kZS5vcmRlci50cmlnZ2VyUHJpY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzVG9UcmlnZ2VyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vZGVzVG9UcmlnZ2VyO1xuICAgIH1cbiAgICBwcmludFRvcE9mT3JkZXJMaXN0cyhzZGtDb25maWcsIGRyaWZ0Q2xpZW50LCBzbG90U3Vic2NyaWJlciwgbWFya2V0SW5kZXgsIG1hcmtldFR5cGUpIHtcbiAgICAgICAgaWYgKCgwLCBfXzEuaXNWYXJpYW50KShtYXJrZXRUeXBlLCAncGVycCcpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXJrZXQgPSBkcmlmdENsaWVudC5nZXRQZXJwTWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgICAgICBjb25zdCBzbG90ID0gc2xvdFN1YnNjcmliZXIuZ2V0U2xvdCgpO1xuICAgICAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2VEYXRhID0gZHJpZnRDbGllbnQuZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQobWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tBc2sgPSAoMCwgX18xLmNhbGN1bGF0ZUFza1ByaWNlKShtYXJrZXQsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja0JpZCA9ICgwLCBfXzEuY2FsY3VsYXRlQmlkUHJpY2UpKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgIGNvbnN0IGJlc3RBc2sgPSB0aGlzLmdldEJlc3RBc2sobWFya2V0SW5kZXgsIGZhbGxiYWNrQXNrLCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgY29uc3QgYmVzdEJpZCA9IHRoaXMuZ2V0QmVzdEJpZChtYXJrZXRJbmRleCwgZmFsbGJhY2tCaWQsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgICAgICBjb25zdCBtaWQgPSBiZXN0QXNrLmFkZChiZXN0QmlkKS5kaXYobmV3IF9fMS5CTigyKSk7XG4gICAgICAgICAgICBjb25zdCBiaWRTcHJlYWQgPSAoKDAsIF9fMS5jb252ZXJ0VG9OdW1iZXIpKGJlc3RCaWQsIF9fMS5QUklDRV9QUkVDSVNJT04pIC9cbiAgICAgICAgICAgICAgICAoMCwgX18xLmNvbnZlcnRUb051bWJlcikob3JhY2xlUHJpY2VEYXRhLnByaWNlLCBfXzEuUFJJQ0VfUFJFQ0lTSU9OKSAtXG4gICAgICAgICAgICAgICAgMSkgKlxuICAgICAgICAgICAgICAgIDEwMC4wO1xuICAgICAgICAgICAgY29uc3QgYXNrU3ByZWFkID0gKCgwLCBfXzEuY29udmVydFRvTnVtYmVyKShiZXN0QXNrLCBfXzEuUFJJQ0VfUFJFQ0lTSU9OKSAvXG4gICAgICAgICAgICAgICAgKDAsIF9fMS5jb252ZXJ0VG9OdW1iZXIpKG9yYWNsZVByaWNlRGF0YS5wcmljZSwgX18xLlBSSUNFX1BSRUNJU0lPTikgLVxuICAgICAgICAgICAgICAgIDEpICpcbiAgICAgICAgICAgICAgICAxMDAuMDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBNYXJrZXQgJHtzZGtDb25maWcuTUFSS0VUU1ttYXJrZXRJbmRleF0uc3ltYm9sfSBPcmRlcnNgKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIEFza2AsICgwLCBfXzEuY29udmVydFRvTnVtYmVyKShiZXN0QXNrLCBfXzEuUFJJQ0VfUFJFQ0lTSU9OKS50b0ZpeGVkKDMpLCBgKCR7YXNrU3ByZWFkLnRvRml4ZWQoNCl9JSlgKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1pZGAsICgwLCBfXzEuY29udmVydFRvTnVtYmVyKShtaWQsIF9fMS5QUklDRV9QUkVDSVNJT04pLnRvRml4ZWQoMykpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCAgQmlkYCwgKDAsIF9fMS5jb252ZXJ0VG9OdW1iZXIpKGJlc3RCaWQsIF9fMS5QUklDRV9QUkVDSVNJT04pLnRvRml4ZWQoMyksIGAoJHtiaWRTcHJlYWQudG9GaXhlZCg0KX0lKWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCgwLCBfXzEuaXNWYXJpYW50KShtYXJrZXRUeXBlLCAnc3BvdCcpKSB7XG4gICAgICAgICAgICBjb25zdCBzbG90ID0gc2xvdFN1YnNjcmliZXIuZ2V0U2xvdCgpO1xuICAgICAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2VEYXRhID0gZHJpZnRDbGllbnQuZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQobWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgYmVzdEFzayA9IHRoaXMuZ2V0QmVzdEFzayhtYXJrZXRJbmRleCwgdW5kZWZpbmVkLCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgY29uc3QgYmVzdEJpZCA9IHRoaXMuZ2V0QmVzdEJpZChtYXJrZXRJbmRleCwgdW5kZWZpbmVkLCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgY29uc3QgbWlkID0gYmVzdEFzay5hZGQoYmVzdEJpZCkuZGl2KG5ldyBfXzEuQk4oMikpO1xuICAgICAgICAgICAgY29uc3QgYmlkU3ByZWFkID0gKCgwLCBfXzEuY29udmVydFRvTnVtYmVyKShiZXN0QmlkLCBfXzEuUFJJQ0VfUFJFQ0lTSU9OKSAvXG4gICAgICAgICAgICAgICAgKDAsIF9fMS5jb252ZXJ0VG9OdW1iZXIpKG9yYWNsZVByaWNlRGF0YS5wcmljZSwgX18xLlBSSUNFX1BSRUNJU0lPTikgLVxuICAgICAgICAgICAgICAgIDEpICpcbiAgICAgICAgICAgICAgICAxMDAuMDtcbiAgICAgICAgICAgIGNvbnN0IGFza1NwcmVhZCA9ICgoMCwgX18xLmNvbnZlcnRUb051bWJlcikoYmVzdEFzaywgX18xLlBSSUNFX1BSRUNJU0lPTikgL1xuICAgICAgICAgICAgICAgICgwLCBfXzEuY29udmVydFRvTnVtYmVyKShvcmFjbGVQcmljZURhdGEucHJpY2UsIF9fMS5QUklDRV9QUkVDSVNJT04pIC1cbiAgICAgICAgICAgICAgICAxKSAqXG4gICAgICAgICAgICAgICAgMTAwLjA7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgTWFya2V0ICR7c2RrQ29uZmlnLk1BUktFVFNbbWFya2V0SW5kZXhdLnN5bWJvbH0gT3JkZXJzYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgICBBc2tgLCAoMCwgX18xLmNvbnZlcnRUb051bWJlcikoYmVzdEFzaywgX18xLlBSSUNFX1BSRUNJU0lPTikudG9GaXhlZCgzKSwgYCgke2Fza1NwcmVhZC50b0ZpeGVkKDQpfSUpYCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgICBNaWRgLCAoMCwgX18xLmNvbnZlcnRUb051bWJlcikobWlkLCBfXzEuUFJJQ0VfUFJFQ0lTSU9OKS50b0ZpeGVkKDMpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIEJpZGAsICgwLCBfXzEuY29udmVydFRvTnVtYmVyKShiZXN0QmlkLCBfXzEuUFJJQ0VfUFJFQ0lTSU9OKS50b0ZpeGVkKDMpLCBgKCR7YmlkU3ByZWFkLnRvRml4ZWQoNCl9JSlgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRETE9CT3JkZXJzKCkge1xuICAgICAgICBjb25zdCBkbG9iT3JkZXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZUxpc3Qgb2YgdGhpcy5nZXROb2RlTGlzdHMoKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVMaXN0LmdldEdlbmVyYXRvcigpKSB7XG4gICAgICAgICAgICAgICAgZGxvYk9yZGVycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcjogbm9kZS51c2VyQWNjb3VudCxcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IG5vZGUub3JkZXIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRsb2JPcmRlcnM7XG4gICAgfVxuICAgICpnZXROb2RlTGlzdHMoKSB7XG4gICAgICAgIGZvciAoY29uc3QgW18sIG5vZGVMaXN0c10gb2YgdGhpcy5vcmRlckxpc3RzLmdldCgncGVycCcpKSB7XG4gICAgICAgICAgICB5aWVsZCBub2RlTGlzdHMucmVzdGluZ0xpbWl0LmJpZDtcbiAgICAgICAgICAgIHlpZWxkIG5vZGVMaXN0cy5yZXN0aW5nTGltaXQuYXNrO1xuICAgICAgICAgICAgeWllbGQgbm9kZUxpc3RzLnRha2luZ0xpbWl0LmJpZDtcbiAgICAgICAgICAgIHlpZWxkIG5vZGVMaXN0cy50YWtpbmdMaW1pdC5hc2s7XG4gICAgICAgICAgICB5aWVsZCBub2RlTGlzdHMubWFya2V0LmJpZDtcbiAgICAgICAgICAgIHlpZWxkIG5vZGVMaXN0cy5tYXJrZXQuYXNrO1xuICAgICAgICAgICAgeWllbGQgbm9kZUxpc3RzLmZsb2F0aW5nTGltaXQuYmlkO1xuICAgICAgICAgICAgeWllbGQgbm9kZUxpc3RzLmZsb2F0aW5nTGltaXQuYXNrO1xuICAgICAgICAgICAgeWllbGQgbm9kZUxpc3RzLnRyaWdnZXIuYWJvdmU7XG4gICAgICAgICAgICB5aWVsZCBub2RlTGlzdHMudHJpZ2dlci5iZWxvdztcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtfLCBub2RlTGlzdHNdIG9mIHRoaXMub3JkZXJMaXN0cy5nZXQoJ3Nwb3QnKSkge1xuICAgICAgICAgICAgeWllbGQgbm9kZUxpc3RzLnJlc3RpbmdMaW1pdC5iaWQ7XG4gICAgICAgICAgICB5aWVsZCBub2RlTGlzdHMucmVzdGluZ0xpbWl0LmFzaztcbiAgICAgICAgICAgIHlpZWxkIG5vZGVMaXN0cy50YWtpbmdMaW1pdC5iaWQ7XG4gICAgICAgICAgICB5aWVsZCBub2RlTGlzdHMudGFraW5nTGltaXQuYXNrO1xuICAgICAgICAgICAgeWllbGQgbm9kZUxpc3RzLm1hcmtldC5iaWQ7XG4gICAgICAgICAgICB5aWVsZCBub2RlTGlzdHMubWFya2V0LmFzaztcbiAgICAgICAgICAgIHlpZWxkIG5vZGVMaXN0cy5mbG9hdGluZ0xpbWl0LmJpZDtcbiAgICAgICAgICAgIHlpZWxkIG5vZGVMaXN0cy5mbG9hdGluZ0xpbWl0LmFzaztcbiAgICAgICAgICAgIHlpZWxkIG5vZGVMaXN0cy50cmlnZ2VyLmFib3ZlO1xuICAgICAgICAgICAgeWllbGQgbm9kZUxpc3RzLnRyaWdnZXIuYmVsb3c7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFuIEwyIHZpZXcgb2YgdGhlIG9yZGVyIGJvb2sgZm9yIGEgZ2l2ZW4gbWFya2V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIG1hcmtldFR5cGVcbiAgICAgKiBAcGFyYW0gc2xvdFxuICAgICAqIEBwYXJhbSBvcmFjbGVQcmljZURhdGFcbiAgICAgKiBAcGFyYW0gZGVwdGggaG93IG1hbnkgbGV2ZWxzIG9mIHRoZSBvcmRlciBib29rIHRvIHJldHVyblxuICAgICAqIEBwYXJhbSBmYWxsYmFja0FzayBiZXN0IGFzayBmb3IgZmFsbGJhY2sgbGlxdWlkaXR5LCBvbmx5IHJlbGV2YW50IGZvciBwZXJwc1xuICAgICAqIEBwYXJhbSBmYWxsYmFja0JpZCBiZXN0IGJpZCBmb3IgZmFsbGJhY2sgbGlxdWlkaXR5LCBvbmx5IHJlbGV2YW50IGZvciBwZXJwc1xuICAgICAqIEBwYXJhbSBmYWxsYmFja0wyR2VuZXJhdG9ycyBMMiBnZW5lcmF0b3JzIGZvciBmYWxsYmFjayBsaXF1aWRpdHkgZS5nLiB2QU1NIHtAbGluayBnZXRWYW1tTDJHZW5lcmF0b3J9LCBvcGVuYm9vayB7QGxpbmsgU2VydW1TdWJzY3JpYmVyfVxuICAgICAqL1xuICAgIGdldEwyKHsgbWFya2V0SW5kZXgsIG1hcmtldFR5cGUsIHNsb3QsIG9yYWNsZVByaWNlRGF0YSwgZGVwdGgsIGZhbGxiYWNrQXNrLCBmYWxsYmFja0JpZCwgZmFsbGJhY2tMMkdlbmVyYXRvcnMgPSBbXSwgfSkge1xuICAgICAgICBjb25zdCBtYWtlckFza0wyTGV2ZWxHZW5lcmF0b3IgPSAoMCwgb3JkZXJCb29rTGV2ZWxzXzEuZ2V0TDJHZW5lcmF0b3JGcm9tRExPQk5vZGVzKSh0aGlzLmdldE1ha2VyTGltaXRBc2tzKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEsIGZhbGxiYWNrQmlkKSwgb3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tBc2tHZW5lcmF0b3JzID0gZmFsbGJhY2tMMkdlbmVyYXRvcnMubWFwKChmYWxsYmFja0wyR2VuZXJhdG9yKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tMMkdlbmVyYXRvci5nZXRMMkFza3MoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGFza0wyTGV2ZWxHZW5lcmF0b3IgPSAoMCwgb3JkZXJCb29rTGV2ZWxzXzEubWVyZ2VMMkxldmVsR2VuZXJhdG9ycykoW21ha2VyQXNrTDJMZXZlbEdlbmVyYXRvciwgLi4uZmFsbGJhY2tBc2tHZW5lcmF0b3JzXSwgKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhLnByaWNlLmx0KGIucHJpY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYXNrcyA9ICgwLCBvcmRlckJvb2tMZXZlbHNfMS5jcmVhdGVMMkxldmVscykoYXNrTDJMZXZlbEdlbmVyYXRvciwgZGVwdGgpO1xuICAgICAgICBjb25zdCBtYWtlckJpZEdlbmVyYXRvciA9ICgwLCBvcmRlckJvb2tMZXZlbHNfMS5nZXRMMkdlbmVyYXRvckZyb21ETE9CTm9kZXMpKHRoaXMuZ2V0TWFrZXJMaW1pdEJpZHMobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSwgZmFsbGJhY2tBc2spLCBvcmFjbGVQcmljZURhdGEsIHNsb3QpO1xuICAgICAgICBjb25zdCBmYWxsYmFja0JpZEdlbmVyYXRvcnMgPSBmYWxsYmFja0wyR2VuZXJhdG9ycy5tYXAoKGZhbGxiYWNrT3JkZXJzKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZmFsbGJhY2tPcmRlcnMuZ2V0TDJCaWRzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBiaWRMMkxldmVsR2VuZXJhdG9yID0gKDAsIG9yZGVyQm9va0xldmVsc18xLm1lcmdlTDJMZXZlbEdlbmVyYXRvcnMpKFttYWtlckJpZEdlbmVyYXRvciwgLi4uZmFsbGJhY2tCaWRHZW5lcmF0b3JzXSwgKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhLnByaWNlLmd0KGIucHJpY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYmlkcyA9ICgwLCBvcmRlckJvb2tMZXZlbHNfMS5jcmVhdGVMMkxldmVscykoYmlkTDJMZXZlbEdlbmVyYXRvciwgZGVwdGgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmlkcyxcbiAgICAgICAgICAgIGFza3MsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhbiBMMyB2aWV3IG9mIHRoZSBvcmRlciBib29rIGZvciBhIGdpdmVuIG1hcmtldC4gRG9lcyBub3QgaW5jbHVkZSBmYWxsYmFjayBsaXF1aWRpdHkgc291cmNlc1xuICAgICAqXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIG1hcmtldFR5cGVcbiAgICAgKiBAcGFyYW0gc2xvdFxuICAgICAqIEBwYXJhbSBvcmFjbGVQcmljZURhdGFcbiAgICAgKi9cbiAgICBnZXRMMyh7IG1hcmtldEluZGV4LCBtYXJrZXRUeXBlLCBzbG90LCBvcmFjbGVQcmljZURhdGEsIH0pIHtcbiAgICAgICAgY29uc3QgYmlkcyA9IFtdO1xuICAgICAgICBjb25zdCBhc2tzID0gW107XG4gICAgICAgIGNvbnN0IHJlc3RpbmdBc2tzID0gdGhpcy5nZXRSZXN0aW5nTGltaXRBc2tzKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICBmb3IgKGNvbnN0IGFzayBvZiByZXN0aW5nQXNrcykge1xuICAgICAgICAgICAgYXNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwcmljZTogYXNrLmdldFByaWNlKG9yYWNsZVByaWNlRGF0YSwgc2xvdCksXG4gICAgICAgICAgICAgICAgc2l6ZTogYXNrLm9yZGVyLmJhc2VBc3NldEFtb3VudC5zdWIoYXNrLm9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCksXG4gICAgICAgICAgICAgICAgbWFrZXI6IGFzay51c2VyQWNjb3VudCxcbiAgICAgICAgICAgICAgICBvcmRlcklkOiBhc2sub3JkZXIub3JkZXJJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3RpbmdCaWRzID0gdGhpcy5nZXRSZXN0aW5nTGltaXRCaWRzKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICBmb3IgKGNvbnN0IGJpZCBvZiByZXN0aW5nQmlkcykge1xuICAgICAgICAgICAgYmlkcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwcmljZTogYmlkLmdldFByaWNlKG9yYWNsZVByaWNlRGF0YSwgc2xvdCksXG4gICAgICAgICAgICAgICAgc2l6ZTogYmlkLm9yZGVyLmJhc2VBc3NldEFtb3VudC5zdWIoYmlkLm9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCksXG4gICAgICAgICAgICAgICAgbWFrZXI6IGJpZC51c2VyQWNjb3VudCxcbiAgICAgICAgICAgICAgICBvcmRlcklkOiBiaWQub3JkZXIub3JkZXJJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiaWRzLFxuICAgICAgICAgICAgYXNrcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZXN0aW1hdGVGaWxsRXhhY3RCYXNlQW1vdW50SW5Gb3JTaWRlKGJhc2VBbW91bnRJbiwgb3JhY2xlUHJpY2VEYXRhLCBzbG90LCBkbG9iU2lkZSkge1xuICAgICAgICBsZXQgcnVubmluZ1N1bVF1b3RlID0gX18xLlpFUk87XG4gICAgICAgIGxldCBydW5uaW5nU3VtQmFzZSA9IF9fMS5aRVJPO1xuICAgICAgICBmb3IgKGNvbnN0IHNpZGUgb2YgZGxvYlNpZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByaWNlID0gc2lkZS5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpOyAvL3NpZGUub3JkZXIucXVvdGVBc3NldEFtb3VudC5kaXYoc2lkZS5vcmRlci5iYXNlQXNzZXRBbW91bnQpO1xuICAgICAgICAgICAgY29uc3QgYmFzZUFtb3VudFJlbWFpbmluZyA9IHNpZGUub3JkZXIuYmFzZUFzc2V0QW1vdW50LnN1YihzaWRlLm9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCk7XG4gICAgICAgICAgICBpZiAocnVubmluZ1N1bUJhc2UuYWRkKGJhc2VBbW91bnRSZW1haW5pbmcpLmd0KGJhc2VBbW91bnRJbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdCYXNlID0gYmFzZUFtb3VudEluLnN1YihydW5uaW5nU3VtQmFzZSk7XG4gICAgICAgICAgICAgICAgcnVubmluZ1N1bUJhc2UgPSBydW5uaW5nU3VtQmFzZS5hZGQocmVtYWluaW5nQmFzZSk7XG4gICAgICAgICAgICAgICAgcnVubmluZ1N1bVF1b3RlID0gcnVubmluZ1N1bVF1b3RlLmFkZChyZW1haW5pbmdCYXNlLm11bChwcmljZSkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcnVubmluZ1N1bUJhc2UgPSBydW5uaW5nU3VtQmFzZS5hZGQoYmFzZUFtb3VudFJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgcnVubmluZ1N1bVF1b3RlID0gcnVubmluZ1N1bVF1b3RlLmFkZChiYXNlQW1vdW50UmVtYWluaW5nLm11bChwcmljZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5uaW5nU3VtUXVvdGVcbiAgICAgICAgICAgIC5tdWwoX18xLlFVT1RFX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYoX18xLkJBU0VfUFJFQ0lTSU9OLm11bChfXzEuUFJJQ0VfUFJFQ0lTSU9OKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhcmFtLm1hcmtldEluZGV4IHRoZSBpbmRleCBvZiB0aGUgbWFya2V0XG4gICAgICogQHBhcmFtIHBhcmFtLm1hcmtldFR5cGUgdGhlIHR5cGUgb2YgdGhlIG1hcmtldFxuICAgICAqIEBwYXJhbSBwYXJhbS5iYXNlQW1vdW50IHRoZSBiYXNlIGFtb3VudCBpbiB0byBlc3RpbWF0ZVxuICAgICAqIEBwYXJhbSBwYXJhbS5vcmRlckRpcmVjdGlvbiB0aGUgZGlyZWN0aW9uIG9mIHRoZSB0cmFkZVxuICAgICAqIEBwYXJhbSBwYXJhbS5zbG90IGN1cnJlbnQgc2xvdCBmb3IgZXN0aW1hdGluZyBkbG9iIG5vZGUgcHJpY2VcbiAgICAgKiBAcGFyYW0gcGFyYW0ub3JhY2xlUHJpY2VEYXRhIHRoZSBvcmFjbGUgcHJpY2UgZGF0YVxuICAgICAqIEByZXR1cm5zIHRoZSBlc3RpbWF0ZWQgcXVvdGUgYW1vdW50IGZpbGxlZDogUVVPVEVfUFJFQ0lTSU9OXG4gICAgICovXG4gICAgZXN0aW1hdGVGaWxsV2l0aEV4YWN0QmFzZUFtb3VudCh7IG1hcmtldEluZGV4LCBtYXJrZXRUeXBlLCBiYXNlQW1vdW50LCBvcmRlckRpcmVjdGlvbiwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhLCB9KSB7XG4gICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkob3JkZXJEaXJlY3Rpb24sICdsb25nJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVzdGltYXRlRmlsbEV4YWN0QmFzZUFtb3VudEluRm9yU2lkZShiYXNlQW1vdW50LCBvcmFjbGVQcmljZURhdGEsIHNsb3QsIHRoaXMuZ2V0UmVzdGluZ0xpbWl0QXNrcyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKDAsIF9fMS5pc1ZhcmlhbnQpKG9yZGVyRGlyZWN0aW9uLCAnc2hvcnQnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXN0aW1hdGVGaWxsRXhhY3RCYXNlQW1vdW50SW5Gb3JTaWRlKGJhc2VBbW91bnQsIG9yYWNsZVByaWNlRGF0YSwgc2xvdCwgdGhpcy5nZXRSZXN0aW5nTGltaXRCaWRzKG1hcmtldEluZGV4LCBzbG90LCBtYXJrZXRUeXBlLCBvcmFjbGVQcmljZURhdGEpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRCZXN0TWFrZXJzKHsgbWFya2V0SW5kZXgsIG1hcmtldFR5cGUsIGRpcmVjdGlvbiwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhLCBudW1NYWtlcnMsIH0pIHtcbiAgICAgICAgY29uc3QgbWFrZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSAoMCwgX18xLmlzVmFyaWFudCkoZGlyZWN0aW9uLCAnbG9uZycpXG4gICAgICAgICAgICA/IHRoaXMuZ2V0UmVzdGluZ0xpbWl0QmlkcyhtYXJrZXRJbmRleCwgc2xvdCwgbWFya2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhKVxuICAgICAgICAgICAgOiB0aGlzLmdldFJlc3RpbmdMaW1pdEFza3MobWFya2V0SW5kZXgsIHNsb3QsIG1hcmtldFR5cGUsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmICghbWFrZXJzLmhhcyhub2RlLnVzZXJBY2NvdW50LnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgICAgbWFrZXJzLnNldChub2RlLnVzZXJBY2NvdW50LnRvU3RyaW5nKCksIG5vZGUudXNlckFjY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1ha2Vycy5zaXplID09PSBudW1NYWtlcnMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShtYWtlcnMudmFsdWVzKCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuRExPQiA9IERMT0I7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJETE9CIiwiTm9kZUxpc3RfMSIsInJlcXVpcmUiLCJfXzEiLCJleGNoYW5nZVN0YXR1c18xIiwib3JkZXJCb29rTGV2ZWxzXzEiLCJTVVBQT1JURURfT1JERVJfVFlQRVMiLCJjb25zdHJ1Y3RvciIsIm9wZW5PcmRlcnMiLCJNYXAiLCJvcmRlckxpc3RzIiwibWF4U2xvdEZvclJlc3RpbmdMaW1pdE9yZGVycyIsImluaXRpYWxpemVkIiwiaW5pdCIsInNldCIsIlNldCIsImNsZWFyIiwibWFya2V0VHlwZSIsImtleXMiLCJnZXQiLCJtYXJrZXRJbmRleCIsIm1hcmtldE5vZGVMaXN0cyIsInNpZGUiLCJvcmRlclR5cGUiLCJpbml0RnJvbVVzZXJNYXAiLCJ1c2VyTWFwIiwic2xvdCIsInVzZXIiLCJ2YWx1ZXMiLCJ1c2VyQWNjb3VudCIsImdldFVzZXJBY2NvdW50IiwidXNlckFjY291bnRQdWJrZXkiLCJnZXRVc2VyQWNjb3VudFB1YmxpY0tleSIsIm9yZGVyIiwib3JkZXJzIiwiaW5zZXJ0T3JkZXIiLCJpbml0RnJvbU9yZGVycyIsImRsb2JPcmRlcnMiLCJoYW5kbGVPcmRlclJlY29yZCIsInJlY29yZCIsImhhbmRsZU9yZGVyQWN0aW9uUmVjb3JkIiwiaXNPbmVPZlZhcmlhbnQiLCJhY3Rpb24iLCJpc1ZhcmlhbnQiLCJ0YWtlciIsInRha2VyT3JkZXIiLCJnZXRPcmRlciIsInRha2VyT3JkZXJJZCIsInRyaWdnZXIiLCJtYWtlciIsIm1ha2VyT3JkZXIiLCJtYWtlck9yZGVySWQiLCJ1cGRhdGVPcmRlciIsInRha2VyT3JkZXJDdW11bGF0aXZlQmFzZUFzc2V0QW1vdW50RmlsbGVkIiwibWFrZXJPcmRlckN1bXVsYXRpdmVCYXNlQXNzZXRBbW91bnRGaWxsZWQiLCJkZWxldGUiLCJvbkluc2VydCIsIl9hIiwic3RhdHVzIiwiZ2V0VmFyaWFudCIsImhhcyIsImFkZE9yZGVyTGlzdCIsImFkZCIsImdldE9yZGVyU2lnbmF0dXJlIiwib3JkZXJJZCIsImdldExpc3RGb3JPcmRlciIsImluc2VydCIsInJlc3RpbmdMaW1pdCIsImFzayIsIk5vZGVMaXN0IiwiYmlkIiwiZmxvYXRpbmdMaW1pdCIsInRha2luZ0xpbWl0IiwibWFya2V0IiwiYWJvdmUiLCJiZWxvdyIsImN1bXVsYXRpdmVCYXNlQXNzZXRBbW91bnRGaWxsZWQiLCJvblVwZGF0ZSIsInVwZGF0ZVJlc3RpbmdMaW1pdE9yZGVycyIsImJhc2VBc3NldEFtb3VudCIsImVxIiwiYmFzZUFzc2V0QW1vdW50RmlsbGVkIiwibmV3T3JkZXIiLCJ1cGRhdGUiLCJvblRyaWdnZXIiLCJpc1RyaWdnZXJlZCIsInRyaWdnZXJMaXN0IiwidHJpZ2dlckNvbmRpdGlvbiIsInJlbW92ZSIsIm9uRGVsZXRlIiwiaXNJbmFjdGl2ZVRyaWdnZXJPcmRlciIsIm11c3RCZVRyaWdnZXJlZCIsInR5cGUiLCJvcmFjbGVQcmljZU9mZnNldCIsImlzUmVzdGluZyIsImlzUmVzdGluZ0xpbWl0T3JkZXIiLCJzdWJUeXBlIiwiZGlyZWN0aW9uIiwidW5kZWZpbmVkIiwidXBkYXRlUmVzdGluZ0xpbWl0T3JkZXJzRm9yTWFya2V0VHlwZSIsIm1hcmtldFR5cGVTdHIiLCJfIiwibm9kZUxpc3RzIiwibm9kZXNUb1VwZGF0ZSIsIm5vZGUiLCJnZXRHZW5lcmF0b3IiLCJwdXNoIiwibm9kZVRvVXBkYXRlIiwib3JkZXJTaWduYXR1cmUiLCJub2RlTGlzdCIsImdldE5vZGVMaXN0cyIsImZpbmROb2Rlc1RvRmlsbCIsImZhbGxiYWNrQmlkIiwiZmFsbGJhY2tBc2siLCJ0cyIsIm9yYWNsZVByaWNlRGF0YSIsInN0YXRlQWNjb3VudCIsIm1hcmtldEFjY291bnQiLCJmaWxsUGF1c2VkIiwiaXNBbW1QYXVzZWQiLCJhbW1QYXVzZWQiLCJtaW5BdWN0aW9uRHVyYXRpb24iLCJtaW5QZXJwQXVjdGlvbkR1cmF0aW9uIiwicmVzdGluZ0xpbWl0T3JkZXJOb2Rlc1RvRmlsbCIsImZpbmRSZXN0aW5nTGltaXRPcmRlck5vZGVzVG9GaWxsIiwidGFraW5nT3JkZXJOb2Rlc1RvRmlsbCIsImZpbmRUYWtpbmdOb2Rlc1RvRmlsbCIsImV4cGlyZWROb2Rlc1RvRmlsbCIsImZpbmRFeHBpcmVkTm9kZXNUb0ZpbGwiLCJjb25jYXQiLCJtZXJnZU5vZGVzVG9GaWxsIiwibWVyZ2VkTm9kZXNUb0ZpbGwiLCJtZXJnZU5vZGVzVG9GaWxsSGVscGVyIiwibm9kZXNUb0ZpbGxBcnJheSIsImZvckVhY2giLCJub2RlVG9GaWxsIiwibm9kZVNpZ25hdHVyZSIsIm1ha2VyTm9kZXMiLCJBcnJheSIsImZyb20iLCJub2Rlc1RvRmlsbCIsImNyb3NzaW5nTm9kZXMiLCJmaW5kQ3Jvc3NpbmdSZXN0aW5nTGltaXRPcmRlcnMiLCJjcm9zc2luZ05vZGUiLCJhc2tHZW5lcmF0b3IiLCJnZXRSZXN0aW5nTGltaXRBc2tzIiwiYXNrc0Nyb3NzaW5nRmFsbGJhY2siLCJmaW5kTm9kZXNDcm9zc2luZ0ZhbGxiYWNrTGlxdWlkaXR5IiwiYXNrUHJpY2UiLCJmYWxsYmFja1ByaWNlIiwibHRlIiwiYXNrQ3Jvc3NpbmdGYWxsYmFjayIsImJpZEdlbmVyYXRvciIsImdldFJlc3RpbmdMaW1pdEJpZHMiLCJiaWRzQ3Jvc3NpbmdGYWxsYmFjayIsImJpZFByaWNlIiwiZ3RlIiwiYmlkQ3Jvc3NpbmdGYWxsYmFjayIsInRha2luZ09yZGVyR2VuZXJhdG9yIiwiZ2V0VGFraW5nQXNrcyIsInRha2luZ0Fza3NDcm9zc2luZ0JpZHMiLCJmaW5kVGFraW5nTm9kZXNDcm9zc2luZ01ha2VyTm9kZXMiLCJnZXRNYWtlckxpbWl0QmlkcyIsImJpbmQiLCJ0YWtlclByaWNlIiwibWFrZXJQcmljZSIsImx0IiwidGFraW5nQXNrQ3Jvc3NpbmdCaWQiLCJ0YWtpbmdBc2tzQ3Jvc3NpbmdGYWxsYmFjayIsInRha2luZ0Fza0Nyb3NzaW5nRmFsbGJhY2siLCJnZXRUYWtpbmdCaWRzIiwidGFraW5nQmlkc1RvRmlsbCIsImdldE1ha2VyTGltaXRBc2tzIiwiZ3QiLCJ0YWtpbmdCaWRUb0ZpbGwiLCJ0YWtpbmdCaWRzQ3Jvc3NpbmdGYWxsYmFjayIsIm1hcmtldEJpZENyb3NzaW5nRmFsbGJhY2siLCJ0YWtlck5vZGVHZW5lcmF0b3IiLCJtYWtlck5vZGVHZW5lcmF0b3JGbiIsImRvZXNDcm9zcyIsInRha2VyTm9kZSIsIm1ha2VyTm9kZUdlbmVyYXRvciIsIm1ha2VyTm9kZSIsInNhbWVVc2VyIiwiZXF1YWxzIiwiZ2V0UHJpY2UiLCJvcmRlcnNDcm9zcyIsIm1ha2VyQmFzZVJlbWFpbmluZyIsInN1YiIsInRha2VyQmFzZVJlbWFpbmluZyIsImJhc2VGaWxsZWQiLCJCTiIsIm1pbiIsIm5ld01ha2VyT3JkZXIiLCJuZXdUYWtlck9yZGVyIiwibm9kZUdlbmVyYXRvciIsIm5leHROb2RlIiwibmV4dCIsImRvbmUiLCJwb3N0T25seSIsIm5vZGVQcmljZSIsImdldExpbWl0UHJpY2UiLCJjcm9zc2VzIiwiZmFsbGJhY2tBdmFpbGFibGUiLCJpc0ZhbGxiYWNrQXZhaWxhYmxlTGlxdWlkaXR5U291cmNlIiwiYmlkR2VuZXJhdG9ycyIsImFza0dlbmVyYXRvcnMiLCJpc09yZGVyRXhwaXJlZCIsImZpbmRKaXRBdWN0aW9uTm9kZXNUb0ZpbGwiLCJtYXJrZXRCaWQiLCJtYXJrZXRBc2siLCJnZW5lcmF0b3JMaXN0IiwiZ2V0QmVzdE5vZGUiLCJiZXN0Tm9kZSIsImN1cnJlbnROb2RlIiwiY29tcGFyZUZjbiIsImdlbmVyYXRvcnMiLCJtYXAiLCJnZW5lcmF0b3IiLCJzaWRlRXhoYXVzdGVkIiwiYmVzdEdlbmVyYXRvciIsInJlZHVjZSIsImN1cnJlbnRHZW5lcmF0b3IiLCJiZXN0VmFsdWUiLCJjdXJyZW50VmFsdWUiLCJpc0Jhc2VGaWxsZWQiLCJFcnJvciIsImlzUGVycE1hcmtldCIsImdldEFza3MiLCJnZXRWYW1tTm9kZUdlbmVyYXRvciIsImJlc3ROb2RlVGFraW5nIiwiaXNUYWtpbmdPcmRlciIsImN1cnJlbnROb2RlVGFraW5nIiwiZ2V0QmlkcyIsImFza05vZGUiLCJiaWROb2RlIiwiYmlkT3JkZXIiLCJhc2tPcmRlciIsIm1ha2VyQW5kVGFrZXIiLCJkZXRlcm1pbmVNYWtlckFuZFRha2VyIiwiYmlkQmFzZVJlbWFpbmluZyIsImFza0Jhc2VSZW1haW5pbmciLCJuZXdCaWRPcmRlciIsIm5ld0Fza09yZGVyIiwiYXNrU2xvdCIsImF1Y3Rpb25EdXJhdGlvbiIsImJpZFNsb3QiLCJnZXRCZXN0QXNrIiwiZ2V0QmVzdEJpZCIsImZpbmROb2Rlc1RvVHJpZ2dlciIsIm9yYWNsZVByaWNlIiwiZXhjaGFuZ2VQYXVzZWQiLCJub2Rlc1RvVHJpZ2dlciIsInRyaWdnZXJBYm92ZUxpc3QiLCJ0cmlnZ2VyUHJpY2UiLCJ0cmlnZ2VyQmVsb3dMaXN0IiwicHJpbnRUb3BPZk9yZGVyTGlzdHMiLCJzZGtDb25maWciLCJkcmlmdENsaWVudCIsInNsb3RTdWJzY3JpYmVyIiwiZ2V0UGVycE1hcmtldEFjY291bnQiLCJnZXRTbG90IiwiZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQiLCJjYWxjdWxhdGVBc2tQcmljZSIsImNhbGN1bGF0ZUJpZFByaWNlIiwiYmVzdEFzayIsImJlc3RCaWQiLCJtaWQiLCJkaXYiLCJiaWRTcHJlYWQiLCJjb252ZXJ0VG9OdW1iZXIiLCJQUklDRV9QUkVDSVNJT04iLCJwcmljZSIsImFza1NwcmVhZCIsImNvbnNvbGUiLCJsb2ciLCJNQVJLRVRTIiwic3ltYm9sIiwidG9GaXhlZCIsImdldERMT0JPcmRlcnMiLCJnZXRMMiIsImRlcHRoIiwiZmFsbGJhY2tMMkdlbmVyYXRvcnMiLCJtYWtlckFza0wyTGV2ZWxHZW5lcmF0b3IiLCJnZXRMMkdlbmVyYXRvckZyb21ETE9CTm9kZXMiLCJmYWxsYmFja0Fza0dlbmVyYXRvcnMiLCJmYWxsYmFja0wyR2VuZXJhdG9yIiwiZ2V0TDJBc2tzIiwiYXNrTDJMZXZlbEdlbmVyYXRvciIsIm1lcmdlTDJMZXZlbEdlbmVyYXRvcnMiLCJhIiwiYiIsImFza3MiLCJjcmVhdGVMMkxldmVscyIsIm1ha2VyQmlkR2VuZXJhdG9yIiwiZmFsbGJhY2tCaWRHZW5lcmF0b3JzIiwiZmFsbGJhY2tPcmRlcnMiLCJnZXRMMkJpZHMiLCJiaWRMMkxldmVsR2VuZXJhdG9yIiwiYmlkcyIsImdldEwzIiwicmVzdGluZ0Fza3MiLCJzaXplIiwicmVzdGluZ0JpZHMiLCJlc3RpbWF0ZUZpbGxFeGFjdEJhc2VBbW91bnRJbkZvclNpZGUiLCJiYXNlQW1vdW50SW4iLCJkbG9iU2lkZSIsInJ1bm5pbmdTdW1RdW90ZSIsIlpFUk8iLCJydW5uaW5nU3VtQmFzZSIsImJhc2VBbW91bnRSZW1haW5pbmciLCJyZW1haW5pbmdCYXNlIiwibXVsIiwiUVVPVEVfUFJFQ0lTSU9OIiwiQkFTRV9QUkVDSVNJT04iLCJlc3RpbWF0ZUZpbGxXaXRoRXhhY3RCYXNlQW1vdW50IiwiYmFzZUFtb3VudCIsIm9yZGVyRGlyZWN0aW9uIiwiZ2V0QmVzdE1ha2VycyIsIm51bU1ha2VycyIsIm1ha2VycyIsInRvU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOB.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBApiClient.js":
/*!****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/DLOBApiClient.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DLOBApiClient = void 0;\nconst node_fetch_1 = __importDefault(__webpack_require__(/*! node-fetch */ \"(ssr)/./node_modules/node-fetch/lib/index.mjs\"));\nconst DLOBOrders_1 = __webpack_require__(/*! ./DLOBOrders */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBOrders.js\");\nconst DLOB_1 = __webpack_require__(/*! ./DLOB */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOB.js\");\nclass DLOBApiClient {\n    constructor(config){\n        this.dlobCoder = DLOBOrders_1.DLOBOrdersCoder.create();\n        this.lastSeenSlot = 0;\n        this.url = config.url;\n    }\n    async getDLOB(slot) {\n        const r = await (0, node_fetch_1.default)(this.url);\n        if (!r.ok) {\n            throw new Error(`Failed to fetch DLOB from ${this.url}. Status: ${r.status}, ${r.statusText}`);\n        }\n        const resp = await r.json();\n        const responseSlot = resp[\"slot\"];\n        if (responseSlot > this.lastSeenSlot) {\n            const dlobOrdersBuffer = Buffer.from(resp[\"data\"], \"base64\");\n            const dlobOrders = this.dlobCoder.decode(Buffer.from(dlobOrdersBuffer));\n            const dlob = new DLOB_1.DLOB();\n            dlob.initFromOrders(dlobOrders, slot);\n            this.lastSeenDLOB = dlob;\n            this.lastSeenSlot = responseSlot;\n        }\n        return this.lastSeenDLOB;\n    }\n}\nexports.DLOBApiClient = DLOBApiClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL0RMT0JBcGlDbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQUUsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHFCQUFxQixHQUFHLEtBQUs7QUFDN0IsTUFBTUcsZUFBZVIsZ0JBQWdCUyxtQkFBT0EsQ0FBQyxpRUFBWTtBQUN6RCxNQUFNQyxlQUFlRCxtQkFBT0EsQ0FBQyxpRkFBYztBQUMzQyxNQUFNRSxTQUFTRixtQkFBT0EsQ0FBQyxxRUFBUTtBQUMvQixNQUFNRjtJQUNGSyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFDQyxTQUFTLEdBQUdKLGFBQWFLLGVBQWUsQ0FBQ0MsTUFBTTtRQUNwRCxJQUFJLENBQUNDLFlBQVksR0FBRztRQUNwQixJQUFJLENBQUNDLEdBQUcsR0FBR0wsT0FBT0ssR0FBRztJQUN6QjtJQUNBLE1BQU1DLFFBQVFDLElBQUksRUFBRTtRQUNoQixNQUFNQyxJQUFJLE1BQU0sQ0FBQyxHQUFHYixhQUFhYyxPQUFPLEVBQUUsSUFBSSxDQUFDSixHQUFHO1FBQ2xELElBQUksQ0FBQ0csRUFBRUUsRUFBRSxFQUFFO1lBQ1AsTUFBTSxJQUFJQyxNQUFNLENBQUMsMEJBQTBCLEVBQUUsSUFBSSxDQUFDTixHQUFHLENBQUMsVUFBVSxFQUFFRyxFQUFFSSxNQUFNLENBQUMsRUFBRSxFQUFFSixFQUFFSyxVQUFVLENBQUMsQ0FBQztRQUNqRztRQUNBLE1BQU1DLE9BQU8sTUFBTU4sRUFBRU8sSUFBSTtRQUN6QixNQUFNQyxlQUFlRixJQUFJLENBQUMsT0FBTztRQUNqQyxJQUFJRSxlQUFlLElBQUksQ0FBQ1osWUFBWSxFQUFFO1lBQ2xDLE1BQU1hLG1CQUFtQkMsT0FBT0MsSUFBSSxDQUFDTCxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ25ELE1BQU1NLGFBQWEsSUFBSSxDQUFDbkIsU0FBUyxDQUFDb0IsTUFBTSxDQUFDSCxPQUFPQyxJQUFJLENBQUNGO1lBQ3JELE1BQU1LLE9BQU8sSUFBSXhCLE9BQU95QixJQUFJO1lBQzVCRCxLQUFLRSxjQUFjLENBQUNKLFlBQVliO1lBQ2hDLElBQUksQ0FBQ2tCLFlBQVksR0FBR0g7WUFDcEIsSUFBSSxDQUFDbEIsWUFBWSxHQUFHWTtRQUN4QjtRQUNBLE9BQU8sSUFBSSxDQUFDUyxZQUFZO0lBQzVCO0FBQ0o7QUFDQWpDLHFCQUFxQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL0RMT0JBcGlDbGllbnQuanM/YThlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRExPQkFwaUNsaWVudCA9IHZvaWQgMDtcbmNvbnN0IG5vZGVfZmV0Y2hfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibm9kZS1mZXRjaFwiKSk7XG5jb25zdCBETE9CT3JkZXJzXzEgPSByZXF1aXJlKFwiLi9ETE9CT3JkZXJzXCIpO1xuY29uc3QgRExPQl8xID0gcmVxdWlyZShcIi4vRExPQlwiKTtcbmNsYXNzIERMT0JBcGlDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLmRsb2JDb2RlciA9IERMT0JPcmRlcnNfMS5ETE9CT3JkZXJzQ29kZXIuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMubGFzdFNlZW5TbG90ID0gMDtcbiAgICAgICAgdGhpcy51cmwgPSBjb25maWcudXJsO1xuICAgIH1cbiAgICBhc3luYyBnZXRETE9CKHNsb3QpIHtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0ICgwLCBub2RlX2ZldGNoXzEuZGVmYXVsdCkodGhpcy51cmwpO1xuICAgICAgICBpZiAoIXIub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIERMT0IgZnJvbSAke3RoaXMudXJsfS4gU3RhdHVzOiAke3Iuc3RhdHVzfSwgJHtyLnN0YXR1c1RleHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHIuanNvbigpO1xuICAgICAgICBjb25zdCByZXNwb25zZVNsb3QgPSByZXNwWydzbG90J107XG4gICAgICAgIGlmIChyZXNwb25zZVNsb3QgPiB0aGlzLmxhc3RTZWVuU2xvdCkge1xuICAgICAgICAgICAgY29uc3QgZGxvYk9yZGVyc0J1ZmZlciA9IEJ1ZmZlci5mcm9tKHJlc3BbJ2RhdGEnXSwgJ2Jhc2U2NCcpO1xuICAgICAgICAgICAgY29uc3QgZGxvYk9yZGVycyA9IHRoaXMuZGxvYkNvZGVyLmRlY29kZShCdWZmZXIuZnJvbShkbG9iT3JkZXJzQnVmZmVyKSk7XG4gICAgICAgICAgICBjb25zdCBkbG9iID0gbmV3IERMT0JfMS5ETE9CKCk7XG4gICAgICAgICAgICBkbG9iLmluaXRGcm9tT3JkZXJzKGRsb2JPcmRlcnMsIHNsb3QpO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2VlbkRMT0IgPSBkbG9iO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2VlblNsb3QgPSByZXNwb25zZVNsb3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdFNlZW5ETE9CO1xuICAgIH1cbn1cbmV4cG9ydHMuRExPQkFwaUNsaWVudCA9IERMT0JBcGlDbGllbnQ7XG4iXSwibmFtZXMiOlsiX19pbXBvcnREZWZhdWx0IiwibW9kIiwiX19lc01vZHVsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRExPQkFwaUNsaWVudCIsIm5vZGVfZmV0Y2hfMSIsInJlcXVpcmUiLCJETE9CT3JkZXJzXzEiLCJETE9CXzEiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImRsb2JDb2RlciIsIkRMT0JPcmRlcnNDb2RlciIsImNyZWF0ZSIsImxhc3RTZWVuU2xvdCIsInVybCIsImdldERMT0IiLCJzbG90IiwiciIsImRlZmF1bHQiLCJvayIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsInJlc3AiLCJqc29uIiwicmVzcG9uc2VTbG90IiwiZGxvYk9yZGVyc0J1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJkbG9iT3JkZXJzIiwiZGVjb2RlIiwiZGxvYiIsIkRMT0IiLCJpbml0RnJvbU9yZGVycyIsImxhc3RTZWVuRExPQiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBApiClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBNode.js":
/*!***********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/DLOBNode.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.createNode = exports.TriggerOrderNode = exports.MarketOrderNode = exports.FloatingLimitOrderNode = exports.RestingLimitOrderNode = exports.TakingLimitOrderNode = exports.OrderNode = void 0;\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst NodeList_1 = __webpack_require__(/*! ./NodeList */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/NodeList.js\");\nclass OrderNode {\n    constructor(order, userAccount){\n        this.haveFilled = false;\n        this.haveTrigger = false;\n        // Copy the order over to the node\n        this.order = {\n            ...order\n        };\n        this.userAccount = userAccount;\n        this.sortValue = this.getSortValue(order);\n    }\n    getLabel() {\n        let msg = `Order ${(0, NodeList_1.getOrderSignature)(this.order.orderId, this.userAccount)}`;\n        msg += ` ${(0, __1.isVariant)(this.order.direction, \"long\") ? \"LONG\" : \"SHORT\"} `;\n        msg += `${(0, __1.convertToNumber)(this.order.baseAssetAmount, __1.AMM_RESERVE_PRECISION).toFixed(3)}`;\n        if (this.order.price.gt(__1.ZERO)) {\n            msg += ` @ ${(0, __1.convertToNumber)(this.order.price, __1.PRICE_PRECISION).toFixed(3)}`;\n        }\n        if (this.order.triggerPrice.gt(__1.ZERO)) {\n            msg += ` ${(0, __1.isVariant)(this.order.triggerCondition, \"below\") ? \"BELOW\" : \"ABOVE\"}`;\n            msg += ` ${(0, __1.convertToNumber)(this.order.triggerPrice, __1.PRICE_PRECISION).toFixed(3)}`;\n        }\n        return msg;\n    }\n    getPrice(oraclePriceData, slot) {\n        return (0, __1.getLimitPrice)(this.order, oraclePriceData, slot);\n    }\n    isBaseFilled() {\n        return this.order.baseAssetAmountFilled.eq(this.order.baseAssetAmount);\n    }\n    isVammNode() {\n        return false;\n    }\n}\nexports.OrderNode = OrderNode;\nclass TakingLimitOrderNode extends OrderNode {\n    getSortValue(order) {\n        return order.slot;\n    }\n}\nexports.TakingLimitOrderNode = TakingLimitOrderNode;\nclass RestingLimitOrderNode extends OrderNode {\n    getSortValue(order) {\n        return order.price;\n    }\n}\nexports.RestingLimitOrderNode = RestingLimitOrderNode;\nclass FloatingLimitOrderNode extends OrderNode {\n    getSortValue(order) {\n        return new __1.BN(order.oraclePriceOffset);\n    }\n}\nexports.FloatingLimitOrderNode = FloatingLimitOrderNode;\nclass MarketOrderNode extends OrderNode {\n    getSortValue(order) {\n        return order.slot;\n    }\n}\nexports.MarketOrderNode = MarketOrderNode;\nclass TriggerOrderNode extends OrderNode {\n    getSortValue(order) {\n        return order.triggerPrice;\n    }\n}\nexports.TriggerOrderNode = TriggerOrderNode;\nfunction createNode(nodeType, order, userAccount) {\n    switch(nodeType){\n        case \"floatingLimit\":\n            return new FloatingLimitOrderNode(order, userAccount);\n        case \"restingLimit\":\n            return new RestingLimitOrderNode(order, userAccount);\n        case \"takingLimit\":\n            return new TakingLimitOrderNode(order, userAccount);\n        case \"market\":\n            return new MarketOrderNode(order, userAccount);\n        case \"trigger\":\n            return new TriggerOrderNode(order, userAccount);\n        default:\n            throw Error(`Unknown DLOBNode type ${nodeType}`);\n    }\n}\nexports.createNode = createNode;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL0RMT0JOb2RlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBR0Esd0JBQXdCLEdBQUdBLHVCQUF1QixHQUFHQSw4QkFBOEIsR0FBR0EsNkJBQTZCLEdBQUdBLDRCQUE0QixHQUFHQSxpQkFBaUIsR0FBRyxLQUFLO0FBQ25NLE1BQU1TLE1BQU1DLG1CQUFPQSxDQUFDLDZEQUFJO0FBQ3hCLE1BQU1DLGFBQWFELG1CQUFPQSxDQUFDLDZFQUFZO0FBQ3ZDLE1BQU1GO0lBQ0ZJLFlBQVlDLEtBQUssRUFBRUMsV0FBVyxDQUFFO1FBQzVCLElBQUksQ0FBQ0MsVUFBVSxHQUFHO1FBQ2xCLElBQUksQ0FBQ0MsV0FBVyxHQUFHO1FBQ25CLGtDQUFrQztRQUNsQyxJQUFJLENBQUNILEtBQUssR0FBRztZQUFFLEdBQUdBLEtBQUs7UUFBQztRQUN4QixJQUFJLENBQUNDLFdBQVcsR0FBR0E7UUFDbkIsSUFBSSxDQUFDRyxTQUFTLEdBQUcsSUFBSSxDQUFDQyxZQUFZLENBQUNMO0lBQ3ZDO0lBQ0FNLFdBQVc7UUFDUCxJQUFJQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBR1QsV0FBV1UsaUJBQWlCLEVBQUUsSUFBSSxDQUFDUixLQUFLLENBQUNTLE9BQU8sRUFBRSxJQUFJLENBQUNSLFdBQVcsRUFBRSxDQUFDO1FBQzVGTSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBR1gsSUFBSWMsU0FBUyxFQUFFLElBQUksQ0FBQ1YsS0FBSyxDQUFDVyxTQUFTLEVBQUUsVUFBVSxTQUFTLFFBQVEsQ0FBQyxDQUFDO1FBQ2pGSixPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUdYLElBQUlnQixlQUFlLEVBQUUsSUFBSSxDQUFDWixLQUFLLENBQUNhLGVBQWUsRUFBRWpCLElBQUlrQixxQkFBcUIsRUFBRUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUN0RyxJQUFJLElBQUksQ0FBQ2YsS0FBSyxDQUFDZ0IsS0FBSyxDQUFDQyxFQUFFLENBQUNyQixJQUFJc0IsSUFBSSxHQUFHO1lBQy9CWCxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBR1gsSUFBSWdCLGVBQWUsRUFBRSxJQUFJLENBQUNaLEtBQUssQ0FBQ2dCLEtBQUssRUFBRXBCLElBQUl1QixlQUFlLEVBQUVKLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFDN0Y7UUFDQSxJQUFJLElBQUksQ0FBQ2YsS0FBSyxDQUFDb0IsWUFBWSxDQUFDSCxFQUFFLENBQUNyQixJQUFJc0IsSUFBSSxHQUFHO1lBQ3RDWCxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBR1gsSUFBSWMsU0FBUyxFQUFFLElBQUksQ0FBQ1YsS0FBSyxDQUFDcUIsZ0JBQWdCLEVBQUUsV0FBVyxVQUFVLFFBQVEsQ0FBQztZQUN6RmQsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUdYLElBQUlnQixlQUFlLEVBQUUsSUFBSSxDQUFDWixLQUFLLENBQUNvQixZQUFZLEVBQUV4QixJQUFJdUIsZUFBZSxFQUFFSixPQUFPLENBQUMsR0FBRyxDQUFDO1FBQ2xHO1FBQ0EsT0FBT1I7SUFDWDtJQUNBZSxTQUFTQyxlQUFlLEVBQUVDLElBQUksRUFBRTtRQUM1QixPQUFPLENBQUMsR0FBRzVCLElBQUk2QixhQUFhLEVBQUUsSUFBSSxDQUFDekIsS0FBSyxFQUFFdUIsaUJBQWlCQztJQUMvRDtJQUNBRSxlQUFlO1FBQ1gsT0FBTyxJQUFJLENBQUMxQixLQUFLLENBQUMyQixxQkFBcUIsQ0FBQ0MsRUFBRSxDQUFDLElBQUksQ0FBQzVCLEtBQUssQ0FBQ2EsZUFBZTtJQUN6RTtJQUNBZ0IsYUFBYTtRQUNULE9BQU87SUFDWDtBQUNKO0FBQ0ExQyxpQkFBaUIsR0FBR1E7QUFDcEIsTUFBTUQsNkJBQTZCQztJQUMvQlUsYUFBYUwsS0FBSyxFQUFFO1FBQ2hCLE9BQU9BLE1BQU13QixJQUFJO0lBQ3JCO0FBQ0o7QUFDQXJDLDRCQUE0QixHQUFHTztBQUMvQixNQUFNRCw4QkFBOEJFO0lBQ2hDVSxhQUFhTCxLQUFLLEVBQUU7UUFDaEIsT0FBT0EsTUFBTWdCLEtBQUs7SUFDdEI7QUFDSjtBQUNBN0IsNkJBQTZCLEdBQUdNO0FBQ2hDLE1BQU1ELCtCQUErQkc7SUFDakNVLGFBQWFMLEtBQUssRUFBRTtRQUNoQixPQUFPLElBQUlKLElBQUlrQyxFQUFFLENBQUM5QixNQUFNK0IsaUJBQWlCO0lBQzdDO0FBQ0o7QUFDQTVDLDhCQUE4QixHQUFHSztBQUNqQyxNQUFNRCx3QkFBd0JJO0lBQzFCVSxhQUFhTCxLQUFLLEVBQUU7UUFDaEIsT0FBT0EsTUFBTXdCLElBQUk7SUFDckI7QUFDSjtBQUNBckMsdUJBQXVCLEdBQUdJO0FBQzFCLE1BQU1ELHlCQUF5Qks7SUFDM0JVLGFBQWFMLEtBQUssRUFBRTtRQUNoQixPQUFPQSxNQUFNb0IsWUFBWTtJQUM3QjtBQUNKO0FBQ0FqQyx3QkFBd0IsR0FBR0c7QUFDM0IsU0FBU0QsV0FBVzJDLFFBQVEsRUFBRWhDLEtBQUssRUFBRUMsV0FBVztJQUM1QyxPQUFRK0I7UUFDSixLQUFLO1lBQ0QsT0FBTyxJQUFJeEMsdUJBQXVCUSxPQUFPQztRQUM3QyxLQUFLO1lBQ0QsT0FBTyxJQUFJUixzQkFBc0JPLE9BQU9DO1FBQzVDLEtBQUs7WUFDRCxPQUFPLElBQUlQLHFCQUFxQk0sT0FBT0M7UUFDM0MsS0FBSztZQUNELE9BQU8sSUFBSVYsZ0JBQWdCUyxPQUFPQztRQUN0QyxLQUFLO1lBQ0QsT0FBTyxJQUFJWCxpQkFBaUJVLE9BQU9DO1FBQ3ZDO1lBQ0ksTUFBTWdDLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRUQsU0FBUyxDQUFDO0lBQ3ZEO0FBQ0o7QUFDQTdDLGtCQUFrQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL0RMT0JOb2RlLmpzPzFjYjUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyZWF0ZU5vZGUgPSBleHBvcnRzLlRyaWdnZXJPcmRlck5vZGUgPSBleHBvcnRzLk1hcmtldE9yZGVyTm9kZSA9IGV4cG9ydHMuRmxvYXRpbmdMaW1pdE9yZGVyTm9kZSA9IGV4cG9ydHMuUmVzdGluZ0xpbWl0T3JkZXJOb2RlID0gZXhwb3J0cy5UYWtpbmdMaW1pdE9yZGVyTm9kZSA9IGV4cG9ydHMuT3JkZXJOb2RlID0gdm9pZCAwO1xuY29uc3QgX18xID0gcmVxdWlyZShcIi4uXCIpO1xuY29uc3QgTm9kZUxpc3RfMSA9IHJlcXVpcmUoXCIuL05vZGVMaXN0XCIpO1xuY2xhc3MgT3JkZXJOb2RlIHtcbiAgICBjb25zdHJ1Y3RvcihvcmRlciwgdXNlckFjY291bnQpIHtcbiAgICAgICAgdGhpcy5oYXZlRmlsbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGF2ZVRyaWdnZXIgPSBmYWxzZTtcbiAgICAgICAgLy8gQ29weSB0aGUgb3JkZXIgb3ZlciB0byB0aGUgbm9kZVxuICAgICAgICB0aGlzLm9yZGVyID0geyAuLi5vcmRlciB9O1xuICAgICAgICB0aGlzLnVzZXJBY2NvdW50ID0gdXNlckFjY291bnQ7XG4gICAgICAgIHRoaXMuc29ydFZhbHVlID0gdGhpcy5nZXRTb3J0VmFsdWUob3JkZXIpO1xuICAgIH1cbiAgICBnZXRMYWJlbCgpIHtcbiAgICAgICAgbGV0IG1zZyA9IGBPcmRlciAkeygwLCBOb2RlTGlzdF8xLmdldE9yZGVyU2lnbmF0dXJlKSh0aGlzLm9yZGVyLm9yZGVySWQsIHRoaXMudXNlckFjY291bnQpfWA7XG4gICAgICAgIG1zZyArPSBgICR7KDAsIF9fMS5pc1ZhcmlhbnQpKHRoaXMub3JkZXIuZGlyZWN0aW9uLCAnbG9uZycpID8gJ0xPTkcnIDogJ1NIT1JUJ30gYDtcbiAgICAgICAgbXNnICs9IGAkeygwLCBfXzEuY29udmVydFRvTnVtYmVyKSh0aGlzLm9yZGVyLmJhc2VBc3NldEFtb3VudCwgX18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTikudG9GaXhlZCgzKX1gO1xuICAgICAgICBpZiAodGhpcy5vcmRlci5wcmljZS5ndChfXzEuWkVSTykpIHtcbiAgICAgICAgICAgIG1zZyArPSBgIEAgJHsoMCwgX18xLmNvbnZlcnRUb051bWJlcikodGhpcy5vcmRlci5wcmljZSwgX18xLlBSSUNFX1BSRUNJU0lPTikudG9GaXhlZCgzKX1gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9yZGVyLnRyaWdnZXJQcmljZS5ndChfXzEuWkVSTykpIHtcbiAgICAgICAgICAgIG1zZyArPSBgICR7KDAsIF9fMS5pc1ZhcmlhbnQpKHRoaXMub3JkZXIudHJpZ2dlckNvbmRpdGlvbiwgJ2JlbG93JykgPyAnQkVMT1cnIDogJ0FCT1ZFJ31gO1xuICAgICAgICAgICAgbXNnICs9IGAgJHsoMCwgX18xLmNvbnZlcnRUb051bWJlcikodGhpcy5vcmRlci50cmlnZ2VyUHJpY2UsIF9fMS5QUklDRV9QUkVDSVNJT04pLnRvRml4ZWQoMyl9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXNnO1xuICAgIH1cbiAgICBnZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpIHtcbiAgICAgICAgcmV0dXJuICgwLCBfXzEuZ2V0TGltaXRQcmljZSkodGhpcy5vcmRlciwgb3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICB9XG4gICAgaXNCYXNlRmlsbGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQuZXEodGhpcy5vcmRlci5iYXNlQXNzZXRBbW91bnQpO1xuICAgIH1cbiAgICBpc1ZhbW1Ob2RlKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0cy5PcmRlck5vZGUgPSBPcmRlck5vZGU7XG5jbGFzcyBUYWtpbmdMaW1pdE9yZGVyTm9kZSBleHRlbmRzIE9yZGVyTm9kZSB7XG4gICAgZ2V0U29ydFZhbHVlKG9yZGVyKSB7XG4gICAgICAgIHJldHVybiBvcmRlci5zbG90O1xuICAgIH1cbn1cbmV4cG9ydHMuVGFraW5nTGltaXRPcmRlck5vZGUgPSBUYWtpbmdMaW1pdE9yZGVyTm9kZTtcbmNsYXNzIFJlc3RpbmdMaW1pdE9yZGVyTm9kZSBleHRlbmRzIE9yZGVyTm9kZSB7XG4gICAgZ2V0U29ydFZhbHVlKG9yZGVyKSB7XG4gICAgICAgIHJldHVybiBvcmRlci5wcmljZTtcbiAgICB9XG59XG5leHBvcnRzLlJlc3RpbmdMaW1pdE9yZGVyTm9kZSA9IFJlc3RpbmdMaW1pdE9yZGVyTm9kZTtcbmNsYXNzIEZsb2F0aW5nTGltaXRPcmRlck5vZGUgZXh0ZW5kcyBPcmRlck5vZGUge1xuICAgIGdldFNvcnRWYWx1ZShvcmRlcikge1xuICAgICAgICByZXR1cm4gbmV3IF9fMS5CTihvcmRlci5vcmFjbGVQcmljZU9mZnNldCk7XG4gICAgfVxufVxuZXhwb3J0cy5GbG9hdGluZ0xpbWl0T3JkZXJOb2RlID0gRmxvYXRpbmdMaW1pdE9yZGVyTm9kZTtcbmNsYXNzIE1hcmtldE9yZGVyTm9kZSBleHRlbmRzIE9yZGVyTm9kZSB7XG4gICAgZ2V0U29ydFZhbHVlKG9yZGVyKSB7XG4gICAgICAgIHJldHVybiBvcmRlci5zbG90O1xuICAgIH1cbn1cbmV4cG9ydHMuTWFya2V0T3JkZXJOb2RlID0gTWFya2V0T3JkZXJOb2RlO1xuY2xhc3MgVHJpZ2dlck9yZGVyTm9kZSBleHRlbmRzIE9yZGVyTm9kZSB7XG4gICAgZ2V0U29ydFZhbHVlKG9yZGVyKSB7XG4gICAgICAgIHJldHVybiBvcmRlci50cmlnZ2VyUHJpY2U7XG4gICAgfVxufVxuZXhwb3J0cy5UcmlnZ2VyT3JkZXJOb2RlID0gVHJpZ2dlck9yZGVyTm9kZTtcbmZ1bmN0aW9uIGNyZWF0ZU5vZGUobm9kZVR5cGUsIG9yZGVyLCB1c2VyQWNjb3VudCkge1xuICAgIHN3aXRjaCAobm9kZVR5cGUpIHtcbiAgICAgICAgY2FzZSAnZmxvYXRpbmdMaW1pdCc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0aW5nTGltaXRPcmRlck5vZGUob3JkZXIsIHVzZXJBY2NvdW50KTtcbiAgICAgICAgY2FzZSAncmVzdGluZ0xpbWl0JzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzdGluZ0xpbWl0T3JkZXJOb2RlKG9yZGVyLCB1c2VyQWNjb3VudCk7XG4gICAgICAgIGNhc2UgJ3Rha2luZ0xpbWl0JzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgVGFraW5nTGltaXRPcmRlck5vZGUob3JkZXIsIHVzZXJBY2NvdW50KTtcbiAgICAgICAgY2FzZSAnbWFya2V0JzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgTWFya2V0T3JkZXJOb2RlKG9yZGVyLCB1c2VyQWNjb3VudCk7XG4gICAgICAgIGNhc2UgJ3RyaWdnZXInOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmlnZ2VyT3JkZXJOb2RlKG9yZGVyLCB1c2VyQWNjb3VudCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVW5rbm93biBETE9CTm9kZSB0eXBlICR7bm9kZVR5cGV9YCk7XG4gICAgfVxufVxuZXhwb3J0cy5jcmVhdGVOb2RlID0gY3JlYXRlTm9kZTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNyZWF0ZU5vZGUiLCJUcmlnZ2VyT3JkZXJOb2RlIiwiTWFya2V0T3JkZXJOb2RlIiwiRmxvYXRpbmdMaW1pdE9yZGVyTm9kZSIsIlJlc3RpbmdMaW1pdE9yZGVyTm9kZSIsIlRha2luZ0xpbWl0T3JkZXJOb2RlIiwiT3JkZXJOb2RlIiwiX18xIiwicmVxdWlyZSIsIk5vZGVMaXN0XzEiLCJjb25zdHJ1Y3RvciIsIm9yZGVyIiwidXNlckFjY291bnQiLCJoYXZlRmlsbGVkIiwiaGF2ZVRyaWdnZXIiLCJzb3J0VmFsdWUiLCJnZXRTb3J0VmFsdWUiLCJnZXRMYWJlbCIsIm1zZyIsImdldE9yZGVyU2lnbmF0dXJlIiwib3JkZXJJZCIsImlzVmFyaWFudCIsImRpcmVjdGlvbiIsImNvbnZlcnRUb051bWJlciIsImJhc2VBc3NldEFtb3VudCIsIkFNTV9SRVNFUlZFX1BSRUNJU0lPTiIsInRvRml4ZWQiLCJwcmljZSIsImd0IiwiWkVSTyIsIlBSSUNFX1BSRUNJU0lPTiIsInRyaWdnZXJQcmljZSIsInRyaWdnZXJDb25kaXRpb24iLCJnZXRQcmljZSIsIm9yYWNsZVByaWNlRGF0YSIsInNsb3QiLCJnZXRMaW1pdFByaWNlIiwiaXNCYXNlRmlsbGVkIiwiYmFzZUFzc2V0QW1vdW50RmlsbGVkIiwiZXEiLCJpc1ZhbW1Ob2RlIiwiQk4iLCJvcmFjbGVQcmljZU9mZnNldCIsIm5vZGVUeXBlIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBNode.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBOrders.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/DLOBOrders.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DLOBOrdersCoder = void 0;\nconst idl_1 = __webpack_require__(/*! @coral-xyz/anchor/dist/cjs/coder/borsh/idl */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/cjs/coder/borsh/idl.js\");\nconst dlobIdl_json_1 = __importDefault(__webpack_require__(/*! ./dlobIdl.json */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/dlobIdl.json\"));\nclass DLOBOrdersCoder {\n    constructor(idl){\n        this.idl = idl;\n    }\n    static create() {\n        return new DLOBOrdersCoder(dlobIdl_json_1.default);\n    }\n    encode(dlobOrders) {\n        const layout = idl_1.IdlCoder.fieldLayout({\n            type: {\n                vec: {\n                    defined: \"DLOBOrder\"\n                }\n            }\n        }, this.idl.types);\n        const size = 150 * dlobOrders.length;\n        const buffer = Buffer.alloc(size);\n        const len = layout.encode(dlobOrders, buffer);\n        return buffer.slice(0, len);\n    }\n    decode(buffer) {\n        const layout = idl_1.IdlCoder.fieldLayout({\n            type: {\n                vec: {\n                    defined: \"DLOBOrder\"\n                }\n            }\n        }, this.idl.types);\n        return layout.decode(buffer);\n    }\n}\nexports.DLOBOrdersCoder = DLOBOrdersCoder;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL0RMT0JPcmRlcnMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQUUsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHLEtBQUs7QUFDL0IsTUFBTUcsUUFBUUMsbUJBQU9BLENBQUMsc0hBQTRDO0FBQ2xFLE1BQU1DLGlCQUFpQlYsZ0JBQWdCUyxtQkFBT0EsQ0FBQyxrRkFBZ0I7QUFDL0QsTUFBTUY7SUFDRkksWUFBWUMsR0FBRyxDQUFFO1FBQ2IsSUFBSSxDQUFDQSxHQUFHLEdBQUdBO0lBQ2Y7SUFDQSxPQUFPQyxTQUFTO1FBQ1osT0FBTyxJQUFJTixnQkFBZ0JHLGVBQWVJLE9BQU87SUFDckQ7SUFDQUMsT0FBT0MsVUFBVSxFQUFFO1FBQ2YsTUFBTUMsU0FBU1QsTUFBTVUsUUFBUSxDQUFDQyxXQUFXLENBQUM7WUFDdENDLE1BQU07Z0JBQ0ZDLEtBQUs7b0JBQ0RDLFNBQVM7Z0JBQ2I7WUFDSjtRQUNKLEdBQUcsSUFBSSxDQUFDVixHQUFHLENBQUNXLEtBQUs7UUFDakIsTUFBTUMsT0FBTyxNQUFNUixXQUFXUyxNQUFNO1FBQ3BDLE1BQU1DLFNBQVNDLE9BQU9DLEtBQUssQ0FBQ0o7UUFDNUIsTUFBTUssTUFBTVosT0FBT0YsTUFBTSxDQUFDQyxZQUFZVTtRQUN0QyxPQUFPQSxPQUFPSSxLQUFLLENBQUMsR0FBR0Q7SUFDM0I7SUFDQUUsT0FBT0wsTUFBTSxFQUFFO1FBQ1gsTUFBTVQsU0FBU1QsTUFBTVUsUUFBUSxDQUFDQyxXQUFXLENBQUM7WUFDdENDLE1BQU07Z0JBQ0ZDLEtBQUs7b0JBQ0RDLFNBQVM7Z0JBQ2I7WUFDSjtRQUNKLEdBQUcsSUFBSSxDQUFDVixHQUFHLENBQUNXLEtBQUs7UUFDakIsT0FBT04sT0FBT2MsTUFBTSxDQUFDTDtJQUN6QjtBQUNKO0FBQ0FyQix1QkFBdUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvZGxvYi9ETE9CT3JkZXJzLmpzP2E3ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRMT0JPcmRlcnNDb2RlciA9IHZvaWQgMDtcbmNvbnN0IGlkbF8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yL2Rpc3QvY2pzL2NvZGVyL2JvcnNoL2lkbFwiKTtcbmNvbnN0IGRsb2JJZGxfanNvbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2Rsb2JJZGwuanNvblwiKSk7XG5jbGFzcyBETE9CT3JkZXJzQ29kZXIge1xuICAgIGNvbnN0cnVjdG9yKGlkbCkge1xuICAgICAgICB0aGlzLmlkbCA9IGlkbDtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBETE9CT3JkZXJzQ29kZXIoZGxvYklkbF9qc29uXzEuZGVmYXVsdCk7XG4gICAgfVxuICAgIGVuY29kZShkbG9iT3JkZXJzKSB7XG4gICAgICAgIGNvbnN0IGxheW91dCA9IGlkbF8xLklkbENvZGVyLmZpZWxkTGF5b3V0KHtcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICB2ZWM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0RMT0JPcmRlcicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sIHRoaXMuaWRsLnR5cGVzKTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IDE1MCAqIGRsb2JPcmRlcnMubGVuZ3RoO1xuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuYWxsb2Moc2l6ZSk7XG4gICAgICAgIGNvbnN0IGxlbiA9IGxheW91dC5lbmNvZGUoZGxvYk9yZGVycywgYnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlci5zbGljZSgwLCBsZW4pO1xuICAgIH1cbiAgICBkZWNvZGUoYnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IGxheW91dCA9IGlkbF8xLklkbENvZGVyLmZpZWxkTGF5b3V0KHtcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICB2ZWM6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0RMT0JPcmRlcicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sIHRoaXMuaWRsLnR5cGVzKTtcbiAgICAgICAgcmV0dXJuIGxheW91dC5kZWNvZGUoYnVmZmVyKTtcbiAgICB9XG59XG5leHBvcnRzLkRMT0JPcmRlcnNDb2RlciA9IERMT0JPcmRlcnNDb2RlcjtcbiJdLCJuYW1lcyI6WyJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJfX2VzTW9kdWxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJETE9CT3JkZXJzQ29kZXIiLCJpZGxfMSIsInJlcXVpcmUiLCJkbG9iSWRsX2pzb25fMSIsImNvbnN0cnVjdG9yIiwiaWRsIiwiY3JlYXRlIiwiZGVmYXVsdCIsImVuY29kZSIsImRsb2JPcmRlcnMiLCJsYXlvdXQiLCJJZGxDb2RlciIsImZpZWxkTGF5b3V0IiwidHlwZSIsInZlYyIsImRlZmluZWQiLCJ0eXBlcyIsInNpemUiLCJsZW5ndGgiLCJidWZmZXIiLCJCdWZmZXIiLCJhbGxvYyIsImxlbiIsInNsaWNlIiwiZGVjb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBOrders.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBSubscriber.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/DLOBSubscriber.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DLOBSubscriber = void 0;\nconst DLOB_1 = __webpack_require__(/*! ./DLOB */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOB.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst orderBookLevels_1 = __webpack_require__(/*! ./orderBookLevels */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/orderBookLevels.js\");\nconst market_1 = __webpack_require__(/*! ../math/market */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/market.js\");\nclass DLOBSubscriber {\n    constructor(config){\n        this.dlob = new DLOB_1.DLOB();\n        this.driftClient = config.driftClient;\n        this.dlobSource = config.dlobSource;\n        this.slotSource = config.slotSource;\n        this.updateFrequency = config.updateFrequency;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        if (this.intervalId) {\n            return;\n        }\n        await this.updateDLOB();\n        this.intervalId = setInterval(async ()=>{\n            try {\n                await this.updateDLOB();\n                this.eventEmitter.emit(\"update\", this.dlob);\n            } catch (e) {\n                this.eventEmitter.emit(\"error\", e);\n            }\n        }, this.updateFrequency);\n    }\n    async updateDLOB() {\n        this.dlob = await this.dlobSource.getDLOB(this.slotSource.getSlot());\n    }\n    getDLOB() {\n        return this.dlob;\n    }\n    /**\n     * Get the L2 order book for a given market.\n     *\n     * @param marketName e.g. \"SOL-PERP\" or \"SOL\". If not provided, marketIndex and marketType must be provided.\n     * @param marketIndex\n     * @param marketType\n     * @param depth Number of orders to include in the order book. Defaults to 10.\n     * @param includeVamm Whether to include the VAMM orders in the order book. Defaults to false. If true, creates vAMM generator {@link getVammL2Generator} and adds it to fallbackL2Generators.\n     * @param fallbackL2Generators L2 generators for fallback liquidity e.g. vAMM {@link getVammL2Generator}, openbook {@link SerumSubscriber}\n     */ getL2({ marketName, marketIndex, marketType, depth = 10, includeVamm = false, numVammOrders, fallbackL2Generators = [] }) {\n        if (marketName) {\n            const derivedMarketInfo = this.driftClient.getMarketIndexAndType(marketName);\n            if (!derivedMarketInfo) {\n                throw new Error(`Market ${marketName} not found`);\n            }\n            marketIndex = derivedMarketInfo.marketIndex;\n            marketType = derivedMarketInfo.marketType;\n        } else {\n            if (marketIndex === undefined || marketType === undefined) {\n                throw new Error(\"Either marketName or marketIndex and marketType must be provided\");\n            }\n        }\n        let oraclePriceData;\n        let fallbackBid;\n        let fallbackAsk;\n        const isPerp = (0, types_1.isVariant)(marketType, \"perp\");\n        if (isPerp) {\n            const perpMarketAccount = this.driftClient.getPerpMarketAccount(marketIndex);\n            oraclePriceData = this.driftClient.getOracleDataForPerpMarket(perpMarketAccount.marketIndex);\n            fallbackBid = (0, market_1.calculateBidPrice)(perpMarketAccount, oraclePriceData);\n            fallbackAsk = (0, market_1.calculateAskPrice)(perpMarketAccount, oraclePriceData);\n        } else {\n            oraclePriceData = this.driftClient.getOracleDataForSpotMarket(marketIndex);\n        }\n        if (isPerp && includeVamm) {\n            fallbackL2Generators = [\n                (0, orderBookLevels_1.getVammL2Generator)({\n                    marketAccount: this.driftClient.getPerpMarketAccount(marketIndex),\n                    oraclePriceData,\n                    numOrders: numVammOrders !== null && numVammOrders !== void 0 ? numVammOrders : depth\n                })\n            ];\n        }\n        return this.dlob.getL2({\n            marketIndex,\n            marketType,\n            depth,\n            oraclePriceData,\n            slot: this.slotSource.getSlot(),\n            fallbackBid,\n            fallbackAsk,\n            fallbackL2Generators: fallbackL2Generators\n        });\n    }\n    /**\n     * Get the L3 order book for a given market.\n     *\n     * @param marketName e.g. \"SOL-PERP\" or \"SOL\". If not provided, marketIndex and marketType must be provided.\n     * @param marketIndex\n     * @param marketType\n     */ getL3({ marketName, marketIndex, marketType }) {\n        if (marketName) {\n            const derivedMarketInfo = this.driftClient.getMarketIndexAndType(marketName);\n            if (!derivedMarketInfo) {\n                throw new Error(`Market ${marketName} not found`);\n            }\n            marketIndex = derivedMarketInfo.marketIndex;\n            marketType = derivedMarketInfo.marketType;\n        } else {\n            if (marketIndex === undefined || marketType === undefined) {\n                throw new Error(\"Either marketName or marketIndex and marketType must be provided\");\n            }\n        }\n        let oraclePriceData;\n        const isPerp = (0, types_1.isVariant)(marketType, \"perp\");\n        if (isPerp) {\n            oraclePriceData = this.driftClient.getOracleDataForPerpMarket(marketIndex);\n        } else {\n            oraclePriceData = this.driftClient.getOracleDataForSpotMarket(marketIndex);\n        }\n        return this.dlob.getL3({\n            marketIndex,\n            marketType,\n            oraclePriceData,\n            slot: this.slotSource.getSlot()\n        });\n    }\n    async unsubscribe() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n}\nexports.DLOBSubscriber = DLOBSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL0RMT0JTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxzQkFBc0IsR0FBRyxLQUFLO0FBQzlCLE1BQU1HLFNBQVNDLG1CQUFPQSxDQUFDLHFFQUFRO0FBQy9CLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLE1BQU1HLG9CQUFvQkgsbUJBQU9BLENBQUMsMkZBQW1CO0FBQ3JELE1BQU1JLFdBQVdKLG1CQUFPQSxDQUFDLCtFQUFnQjtBQUN6QyxNQUFNRjtJQUNGTyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFDQyxJQUFJLEdBQUcsSUFBSVIsT0FBT1MsSUFBSTtRQUMzQixJQUFJLENBQUNDLFdBQVcsR0FBR0gsT0FBT0csV0FBVztRQUNyQyxJQUFJLENBQUNDLFVBQVUsR0FBR0osT0FBT0ksVUFBVTtRQUNuQyxJQUFJLENBQUNDLFVBQVUsR0FBR0wsT0FBT0ssVUFBVTtRQUNuQyxJQUFJLENBQUNDLGVBQWUsR0FBR04sT0FBT00sZUFBZTtRQUM3QyxJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJWixTQUFTYSxZQUFZO0lBQ2pEO0lBQ0EsTUFBTUMsWUFBWTtRQUNkLElBQUksSUFBSSxDQUFDQyxVQUFVLEVBQUU7WUFDakI7UUFDSjtRQUNBLE1BQU0sSUFBSSxDQUFDQyxVQUFVO1FBQ3JCLElBQUksQ0FBQ0QsVUFBVSxHQUFHRSxZQUFZO1lBQzFCLElBQUk7Z0JBQ0EsTUFBTSxJQUFJLENBQUNELFVBQVU7Z0JBQ3JCLElBQUksQ0FBQ0osWUFBWSxDQUFDTSxJQUFJLENBQUMsVUFBVSxJQUFJLENBQUNaLElBQUk7WUFDOUMsRUFDQSxPQUFPYSxHQUFHO2dCQUNOLElBQUksQ0FBQ1AsWUFBWSxDQUFDTSxJQUFJLENBQUMsU0FBU0M7WUFDcEM7UUFDSixHQUFHLElBQUksQ0FBQ1IsZUFBZTtJQUMzQjtJQUNBLE1BQU1LLGFBQWE7UUFDZixJQUFJLENBQUNWLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQ0csVUFBVSxDQUFDVyxPQUFPLENBQUMsSUFBSSxDQUFDVixVQUFVLENBQUNXLE9BQU87SUFDckU7SUFDQUQsVUFBVTtRQUNOLE9BQU8sSUFBSSxDQUFDZCxJQUFJO0lBQ3BCO0lBQ0E7Ozs7Ozs7OztLQVNDLEdBQ0RnQixNQUFNLEVBQUVDLFVBQVUsRUFBRUMsV0FBVyxFQUFFQyxVQUFVLEVBQUVDLFFBQVEsRUFBRSxFQUFFQyxjQUFjLEtBQUssRUFBRUMsYUFBYSxFQUFFQyx1QkFBdUIsRUFBRSxFQUFHLEVBQUU7UUFDdkgsSUFBSU4sWUFBWTtZQUNaLE1BQU1PLG9CQUFvQixJQUFJLENBQUN0QixXQUFXLENBQUN1QixxQkFBcUIsQ0FBQ1I7WUFDakUsSUFBSSxDQUFDTyxtQkFBbUI7Z0JBQ3BCLE1BQU0sSUFBSUUsTUFBTSxDQUFDLE9BQU8sRUFBRVQsV0FBVyxVQUFVLENBQUM7WUFDcEQ7WUFDQUMsY0FBY00sa0JBQWtCTixXQUFXO1lBQzNDQyxhQUFhSyxrQkFBa0JMLFVBQVU7UUFDN0MsT0FDSztZQUNELElBQUlELGdCQUFnQlMsYUFBYVIsZUFBZVEsV0FBVztnQkFDdkQsTUFBTSxJQUFJRCxNQUFNO1lBQ3BCO1FBQ0o7UUFDQSxJQUFJRTtRQUNKLElBQUlDO1FBQ0osSUFBSUM7UUFDSixNQUFNQyxTQUFTLENBQUMsR0FBR3BDLFFBQVFxQyxTQUFTLEVBQUViLFlBQVk7UUFDbEQsSUFBSVksUUFBUTtZQUNSLE1BQU1FLG9CQUFvQixJQUFJLENBQUMvQixXQUFXLENBQUNnQyxvQkFBb0IsQ0FBQ2hCO1lBQ2hFVSxrQkFBa0IsSUFBSSxDQUFDMUIsV0FBVyxDQUFDaUMsMEJBQTBCLENBQUNGLGtCQUFrQmYsV0FBVztZQUMzRlcsY0FBYyxDQUFDLEdBQUdoQyxTQUFTdUMsaUJBQWlCLEVBQUVILG1CQUFtQkw7WUFDakVFLGNBQWMsQ0FBQyxHQUFHakMsU0FBU3dDLGlCQUFpQixFQUFFSixtQkFBbUJMO1FBQ3JFLE9BQ0s7WUFDREEsa0JBQ0ksSUFBSSxDQUFDMUIsV0FBVyxDQUFDb0MsMEJBQTBCLENBQUNwQjtRQUNwRDtRQUNBLElBQUlhLFVBQVVWLGFBQWE7WUFDdkJFLHVCQUF1QjtnQkFDbEIsSUFBRzNCLGtCQUFrQjJDLGtCQUFrQixFQUFFO29CQUN0Q0MsZUFBZSxJQUFJLENBQUN0QyxXQUFXLENBQUNnQyxvQkFBb0IsQ0FBQ2hCO29CQUNyRFU7b0JBQ0FhLFdBQVduQixrQkFBa0IsUUFBUUEsa0JBQWtCLEtBQUssSUFBSUEsZ0JBQWdCRjtnQkFDcEY7YUFDSDtRQUNMO1FBQ0EsT0FBTyxJQUFJLENBQUNwQixJQUFJLENBQUNnQixLQUFLLENBQUM7WUFDbkJFO1lBQ0FDO1lBQ0FDO1lBQ0FRO1lBQ0FjLE1BQU0sSUFBSSxDQUFDdEMsVUFBVSxDQUFDVyxPQUFPO1lBQzdCYztZQUNBQztZQUNBUCxzQkFBc0JBO1FBQzFCO0lBQ0o7SUFDQTs7Ozs7O0tBTUMsR0FDRG9CLE1BQU0sRUFBRTFCLFVBQVUsRUFBRUMsV0FBVyxFQUFFQyxVQUFVLEVBQUcsRUFBRTtRQUM1QyxJQUFJRixZQUFZO1lBQ1osTUFBTU8sb0JBQW9CLElBQUksQ0FBQ3RCLFdBQVcsQ0FBQ3VCLHFCQUFxQixDQUFDUjtZQUNqRSxJQUFJLENBQUNPLG1CQUFtQjtnQkFDcEIsTUFBTSxJQUFJRSxNQUFNLENBQUMsT0FBTyxFQUFFVCxXQUFXLFVBQVUsQ0FBQztZQUNwRDtZQUNBQyxjQUFjTSxrQkFBa0JOLFdBQVc7WUFDM0NDLGFBQWFLLGtCQUFrQkwsVUFBVTtRQUM3QyxPQUNLO1lBQ0QsSUFBSUQsZ0JBQWdCUyxhQUFhUixlQUFlUSxXQUFXO2dCQUN2RCxNQUFNLElBQUlELE1BQU07WUFDcEI7UUFDSjtRQUNBLElBQUlFO1FBQ0osTUFBTUcsU0FBUyxDQUFDLEdBQUdwQyxRQUFRcUMsU0FBUyxFQUFFYixZQUFZO1FBQ2xELElBQUlZLFFBQVE7WUFDUkgsa0JBQ0ksSUFBSSxDQUFDMUIsV0FBVyxDQUFDaUMsMEJBQTBCLENBQUNqQjtRQUNwRCxPQUNLO1lBQ0RVLGtCQUNJLElBQUksQ0FBQzFCLFdBQVcsQ0FBQ29DLDBCQUEwQixDQUFDcEI7UUFDcEQ7UUFDQSxPQUFPLElBQUksQ0FBQ2xCLElBQUksQ0FBQzJDLEtBQUssQ0FBQztZQUNuQnpCO1lBQ0FDO1lBQ0FTO1lBQ0FjLE1BQU0sSUFBSSxDQUFDdEMsVUFBVSxDQUFDVyxPQUFPO1FBQ2pDO0lBQ0o7SUFDQSxNQUFNNkIsY0FBYztRQUNoQixJQUFJLElBQUksQ0FBQ25DLFVBQVUsRUFBRTtZQUNqQm9DLGNBQWMsSUFBSSxDQUFDcEMsVUFBVTtZQUM3QixJQUFJLENBQUNBLFVBQVUsR0FBR2tCO1FBQ3RCO0lBQ0o7QUFDSjtBQUNBdEMsc0JBQXNCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2Rsb2IvRExPQlN1YnNjcmliZXIuanM/YWM3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRExPQlN1YnNjcmliZXIgPSB2b2lkIDA7XG5jb25zdCBETE9CXzEgPSByZXF1aXJlKFwiLi9ETE9CXCIpO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IG9yZGVyQm9va0xldmVsc18xID0gcmVxdWlyZShcIi4vb3JkZXJCb29rTGV2ZWxzXCIpO1xuY29uc3QgbWFya2V0XzEgPSByZXF1aXJlKFwiLi4vbWF0aC9tYXJrZXRcIik7XG5jbGFzcyBETE9CU3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuZGxvYiA9IG5ldyBETE9CXzEuRExPQigpO1xuICAgICAgICB0aGlzLmRyaWZ0Q2xpZW50ID0gY29uZmlnLmRyaWZ0Q2xpZW50O1xuICAgICAgICB0aGlzLmRsb2JTb3VyY2UgPSBjb25maWcuZGxvYlNvdXJjZTtcbiAgICAgICAgdGhpcy5zbG90U291cmNlID0gY29uZmlnLnNsb3RTb3VyY2U7XG4gICAgICAgIHRoaXMudXBkYXRlRnJlcXVlbmN5ID0gY29uZmlnLnVwZGF0ZUZyZXF1ZW5jeTtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgZXZlbnRzXzEuRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRExPQigpO1xuICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRExPQigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ3VwZGF0ZScsIHRoaXMuZGxvYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMudXBkYXRlRnJlcXVlbmN5KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlRExPQigpIHtcbiAgICAgICAgdGhpcy5kbG9iID0gYXdhaXQgdGhpcy5kbG9iU291cmNlLmdldERMT0IodGhpcy5zbG90U291cmNlLmdldFNsb3QoKSk7XG4gICAgfVxuICAgIGdldERMT0IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRsb2I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgTDIgb3JkZXIgYm9vayBmb3IgYSBnaXZlbiBtYXJrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFya2V0TmFtZSBlLmcuIFwiU09MLVBFUlBcIiBvciBcIlNPTFwiLiBJZiBub3QgcHJvdmlkZWQsIG1hcmtldEluZGV4IGFuZCBtYXJrZXRUeXBlIG11c3QgYmUgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIG1hcmtldFR5cGVcbiAgICAgKiBAcGFyYW0gZGVwdGggTnVtYmVyIG9mIG9yZGVycyB0byBpbmNsdWRlIGluIHRoZSBvcmRlciBib29rLiBEZWZhdWx0cyB0byAxMC5cbiAgICAgKiBAcGFyYW0gaW5jbHVkZVZhbW0gV2hldGhlciB0byBpbmNsdWRlIHRoZSBWQU1NIG9yZGVycyBpbiB0aGUgb3JkZXIgYm9vay4gRGVmYXVsdHMgdG8gZmFsc2UuIElmIHRydWUsIGNyZWF0ZXMgdkFNTSBnZW5lcmF0b3Ige0BsaW5rIGdldFZhbW1MMkdlbmVyYXRvcn0gYW5kIGFkZHMgaXQgdG8gZmFsbGJhY2tMMkdlbmVyYXRvcnMuXG4gICAgICogQHBhcmFtIGZhbGxiYWNrTDJHZW5lcmF0b3JzIEwyIGdlbmVyYXRvcnMgZm9yIGZhbGxiYWNrIGxpcXVpZGl0eSBlLmcuIHZBTU0ge0BsaW5rIGdldFZhbW1MMkdlbmVyYXRvcn0sIG9wZW5ib29rIHtAbGluayBTZXJ1bVN1YnNjcmliZXJ9XG4gICAgICovXG4gICAgZ2V0TDIoeyBtYXJrZXROYW1lLCBtYXJrZXRJbmRleCwgbWFya2V0VHlwZSwgZGVwdGggPSAxMCwgaW5jbHVkZVZhbW0gPSBmYWxzZSwgbnVtVmFtbU9yZGVycywgZmFsbGJhY2tMMkdlbmVyYXRvcnMgPSBbXSwgfSkge1xuICAgICAgICBpZiAobWFya2V0TmFtZSkge1xuICAgICAgICAgICAgY29uc3QgZGVyaXZlZE1hcmtldEluZm8gPSB0aGlzLmRyaWZ0Q2xpZW50LmdldE1hcmtldEluZGV4QW5kVHlwZShtYXJrZXROYW1lKTtcbiAgICAgICAgICAgIGlmICghZGVyaXZlZE1hcmtldEluZm8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hcmtldCAke21hcmtldE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFya2V0SW5kZXggPSBkZXJpdmVkTWFya2V0SW5mby5tYXJrZXRJbmRleDtcbiAgICAgICAgICAgIG1hcmtldFR5cGUgPSBkZXJpdmVkTWFya2V0SW5mby5tYXJrZXRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1hcmtldEluZGV4ID09PSB1bmRlZmluZWQgfHwgbWFya2V0VHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFaXRoZXIgbWFya2V0TmFtZSBvciBtYXJrZXRJbmRleCBhbmQgbWFya2V0VHlwZSBtdXN0IGJlIHByb3ZpZGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9yYWNsZVByaWNlRGF0YTtcbiAgICAgICAgbGV0IGZhbGxiYWNrQmlkO1xuICAgICAgICBsZXQgZmFsbGJhY2tBc2s7XG4gICAgICAgIGNvbnN0IGlzUGVycCA9ICgwLCB0eXBlc18xLmlzVmFyaWFudCkobWFya2V0VHlwZSwgJ3BlcnAnKTtcbiAgICAgICAgaWYgKGlzUGVycCkge1xuICAgICAgICAgICAgY29uc3QgcGVycE1hcmtldEFjY291bnQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFBlcnBNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIG9yYWNsZVByaWNlRGF0YSA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQocGVycE1hcmtldEFjY291bnQubWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgZmFsbGJhY2tCaWQgPSAoMCwgbWFya2V0XzEuY2FsY3VsYXRlQmlkUHJpY2UpKHBlcnBNYXJrZXRBY2NvdW50LCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgZmFsbGJhY2tBc2sgPSAoMCwgbWFya2V0XzEuY2FsY3VsYXRlQXNrUHJpY2UpKHBlcnBNYXJrZXRBY2NvdW50LCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3JhY2xlUHJpY2VEYXRhID1cbiAgICAgICAgICAgICAgICB0aGlzLmRyaWZ0Q2xpZW50LmdldE9yYWNsZURhdGFGb3JTcG90TWFya2V0KG1hcmtldEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQZXJwICYmIGluY2x1ZGVWYW1tKSB7XG4gICAgICAgICAgICBmYWxsYmFja0wyR2VuZXJhdG9ycyA9IFtcbiAgICAgICAgICAgICAgICAoMCwgb3JkZXJCb29rTGV2ZWxzXzEuZ2V0VmFtbUwyR2VuZXJhdG9yKSh7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtldEFjY291bnQ6IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICBvcmFjbGVQcmljZURhdGEsXG4gICAgICAgICAgICAgICAgICAgIG51bU9yZGVyczogbnVtVmFtbU9yZGVycyAhPT0gbnVsbCAmJiBudW1WYW1tT3JkZXJzICE9PSB2b2lkIDAgPyBudW1WYW1tT3JkZXJzIDogZGVwdGgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRsb2IuZ2V0TDIoe1xuICAgICAgICAgICAgbWFya2V0SW5kZXgsXG4gICAgICAgICAgICBtYXJrZXRUeXBlLFxuICAgICAgICAgICAgZGVwdGgsXG4gICAgICAgICAgICBvcmFjbGVQcmljZURhdGEsXG4gICAgICAgICAgICBzbG90OiB0aGlzLnNsb3RTb3VyY2UuZ2V0U2xvdCgpLFxuICAgICAgICAgICAgZmFsbGJhY2tCaWQsXG4gICAgICAgICAgICBmYWxsYmFja0FzayxcbiAgICAgICAgICAgIGZhbGxiYWNrTDJHZW5lcmF0b3JzOiBmYWxsYmFja0wyR2VuZXJhdG9ycyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgTDMgb3JkZXIgYm9vayBmb3IgYSBnaXZlbiBtYXJrZXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWFya2V0TmFtZSBlLmcuIFwiU09MLVBFUlBcIiBvciBcIlNPTFwiLiBJZiBub3QgcHJvdmlkZWQsIG1hcmtldEluZGV4IGFuZCBtYXJrZXRUeXBlIG11c3QgYmUgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIG1hcmtldFR5cGVcbiAgICAgKi9cbiAgICBnZXRMMyh7IG1hcmtldE5hbWUsIG1hcmtldEluZGV4LCBtYXJrZXRUeXBlLCB9KSB7XG4gICAgICAgIGlmIChtYXJrZXROYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBkZXJpdmVkTWFya2V0SW5mbyA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0TWFya2V0SW5kZXhBbmRUeXBlKG1hcmtldE5hbWUpO1xuICAgICAgICAgICAgaWYgKCFkZXJpdmVkTWFya2V0SW5mbykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWFya2V0ICR7bWFya2V0TmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXJrZXRJbmRleCA9IGRlcml2ZWRNYXJrZXRJbmZvLm1hcmtldEluZGV4O1xuICAgICAgICAgICAgbWFya2V0VHlwZSA9IGRlcml2ZWRNYXJrZXRJbmZvLm1hcmtldFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobWFya2V0SW5kZXggPT09IHVuZGVmaW5lZCB8fCBtYXJrZXRUeXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VpdGhlciBtYXJrZXROYW1lIG9yIG1hcmtldEluZGV4IGFuZCBtYXJrZXRUeXBlIG11c3QgYmUgcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb3JhY2xlUHJpY2VEYXRhO1xuICAgICAgICBjb25zdCBpc1BlcnAgPSAoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG1hcmtldFR5cGUsICdwZXJwJyk7XG4gICAgICAgIGlmIChpc1BlcnApIHtcbiAgICAgICAgICAgIG9yYWNsZVByaWNlRGF0YSA9XG4gICAgICAgICAgICAgICAgdGhpcy5kcmlmdENsaWVudC5nZXRPcmFjbGVEYXRhRm9yUGVycE1hcmtldChtYXJrZXRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcmFjbGVQcmljZURhdGEgPVxuICAgICAgICAgICAgICAgIHRoaXMuZHJpZnRDbGllbnQuZ2V0T3JhY2xlRGF0YUZvclNwb3RNYXJrZXQobWFya2V0SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRsb2IuZ2V0TDMoe1xuICAgICAgICAgICAgbWFya2V0SW5kZXgsXG4gICAgICAgICAgICBtYXJrZXRUeXBlLFxuICAgICAgICAgICAgb3JhY2xlUHJpY2VEYXRhLFxuICAgICAgICAgICAgc2xvdDogdGhpcy5zbG90U291cmNlLmdldFNsb3QoKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcnZhbElkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICB0aGlzLmludGVydmFsSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkRMT0JTdWJzY3JpYmVyID0gRExPQlN1YnNjcmliZXI7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJETE9CU3Vic2NyaWJlciIsIkRMT0JfMSIsInJlcXVpcmUiLCJldmVudHNfMSIsInR5cGVzXzEiLCJvcmRlckJvb2tMZXZlbHNfMSIsIm1hcmtldF8xIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJkbG9iIiwiRExPQiIsImRyaWZ0Q2xpZW50IiwiZGxvYlNvdXJjZSIsInNsb3RTb3VyY2UiLCJ1cGRhdGVGcmVxdWVuY3kiLCJldmVudEVtaXR0ZXIiLCJFdmVudEVtaXR0ZXIiLCJzdWJzY3JpYmUiLCJpbnRlcnZhbElkIiwidXBkYXRlRExPQiIsInNldEludGVydmFsIiwiZW1pdCIsImUiLCJnZXRETE9CIiwiZ2V0U2xvdCIsImdldEwyIiwibWFya2V0TmFtZSIsIm1hcmtldEluZGV4IiwibWFya2V0VHlwZSIsImRlcHRoIiwiaW5jbHVkZVZhbW0iLCJudW1WYW1tT3JkZXJzIiwiZmFsbGJhY2tMMkdlbmVyYXRvcnMiLCJkZXJpdmVkTWFya2V0SW5mbyIsImdldE1hcmtldEluZGV4QW5kVHlwZSIsIkVycm9yIiwidW5kZWZpbmVkIiwib3JhY2xlUHJpY2VEYXRhIiwiZmFsbGJhY2tCaWQiLCJmYWxsYmFja0FzayIsImlzUGVycCIsImlzVmFyaWFudCIsInBlcnBNYXJrZXRBY2NvdW50IiwiZ2V0UGVycE1hcmtldEFjY291bnQiLCJnZXRPcmFjbGVEYXRhRm9yUGVycE1hcmtldCIsImNhbGN1bGF0ZUJpZFByaWNlIiwiY2FsY3VsYXRlQXNrUHJpY2UiLCJnZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldCIsImdldFZhbW1MMkdlbmVyYXRvciIsIm1hcmtldEFjY291bnQiLCJudW1PcmRlcnMiLCJzbG90IiwiZ2V0TDMiLCJ1bnN1YnNjcmliZSIsImNsZWFySW50ZXJ2YWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/NodeList.js":
/*!***********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/NodeList.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getVammNodeGenerator = exports.NodeList = exports.getOrderSignature = void 0;\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst DLOBNode_1 = __webpack_require__(/*! ./DLOBNode */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBNode.js\");\nfunction getOrderSignature(orderId, userAccount) {\n    return `${userAccount.toString()}-${orderId.toString()}`;\n}\nexports.getOrderSignature = getOrderSignature;\nclass NodeList {\n    constructor(nodeType, sortDirection){\n        this.nodeType = nodeType;\n        this.sortDirection = sortDirection;\n        this.length = 0;\n        this.nodeMap = new Map();\n    }\n    clear() {\n        this.head = undefined;\n        this.length = 0;\n        this.nodeMap.clear();\n    }\n    insert(order, marketType, userAccount) {\n        if ((0, __1.isVariant)(order.status, \"init\")) {\n            return;\n        }\n        const newNode = (0, DLOBNode_1.createNode)(this.nodeType, order, userAccount);\n        const orderSignature = getOrderSignature(order.orderId, userAccount);\n        if (this.nodeMap.has(orderSignature)) {\n            return;\n        }\n        this.nodeMap.set(orderSignature, newNode);\n        this.length += 1;\n        if (this.head === undefined) {\n            this.head = newNode;\n            return;\n        }\n        if (this.prependNode(this.head, newNode)) {\n            this.head.previous = newNode;\n            newNode.next = this.head;\n            this.head = newNode;\n            return;\n        }\n        let currentNode = this.head;\n        while(currentNode.next !== undefined && !this.prependNode(currentNode.next, newNode)){\n            currentNode = currentNode.next;\n        }\n        newNode.next = currentNode.next;\n        if (currentNode.next !== undefined) {\n            newNode.next.previous = newNode;\n        }\n        currentNode.next = newNode;\n        newNode.previous = currentNode;\n    }\n    prependNode(currentNode, newNode) {\n        const currentOrder = currentNode.order;\n        const newOrder = newNode.order;\n        const currentOrderSortPrice = currentNode.sortValue;\n        const newOrderSortPrice = newNode.sortValue;\n        if (newOrderSortPrice.eq(currentOrderSortPrice)) {\n            return newOrder.slot.lt(currentOrder.slot);\n        }\n        if (this.sortDirection === \"asc\") {\n            return newOrderSortPrice.lt(currentOrderSortPrice);\n        } else {\n            return newOrderSortPrice.gt(currentOrderSortPrice);\n        }\n    }\n    update(order, userAccount) {\n        const orderId = getOrderSignature(order.orderId, userAccount);\n        if (this.nodeMap.has(orderId)) {\n            const node = this.nodeMap.get(orderId);\n            Object.assign(node.order, order);\n            node.haveFilled = false;\n        }\n    }\n    remove(order, userAccount) {\n        const orderId = getOrderSignature(order.orderId, userAccount);\n        if (this.nodeMap.has(orderId)) {\n            const node = this.nodeMap.get(orderId);\n            if (node.next) {\n                node.next.previous = node.previous;\n            }\n            if (node.previous) {\n                node.previous.next = node.next;\n            }\n            if (this.head && node.order.orderId === this.head.order.orderId) {\n                this.head = node.next;\n            }\n            node.previous = undefined;\n            node.next = undefined;\n            this.nodeMap.delete(orderId);\n            this.length--;\n        }\n    }\n    *getGenerator() {\n        let node = this.head;\n        while(node !== undefined){\n            yield node;\n            node = node.next;\n        }\n    }\n    has(order, userAccount) {\n        return this.nodeMap.has(getOrderSignature(order.orderId, userAccount));\n    }\n    get(orderSignature) {\n        return this.nodeMap.get(orderSignature);\n    }\n    print() {\n        let currentNode = this.head;\n        while(currentNode !== undefined){\n            console.log(currentNode.getLabel());\n            currentNode = currentNode.next;\n        }\n    }\n    printTop() {\n        if (this.head) {\n            console.log(this.sortDirection.toUpperCase(), this.head.getLabel());\n        } else {\n            console.log(\"---\");\n        }\n    }\n}\nexports.NodeList = NodeList;\nfunction* getVammNodeGenerator(price) {\n    if (!price) {\n        return;\n    }\n    yield {\n        getPrice: ()=>price,\n        isVammNode: ()=>true,\n        order: undefined,\n        userAccount: undefined,\n        isBaseFilled: ()=>false,\n        haveFilled: false\n    };\n}\nexports.getVammNodeGenerator = getVammNodeGenerator;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL05vZGVMaXN0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBR0EsZ0JBQWdCLEdBQUdBLHlCQUF5QixHQUFHLEtBQUs7QUFDbkYsTUFBTUssTUFBTUMsbUJBQU9BLENBQUMsNkRBQUk7QUFDeEIsTUFBTUMsYUFBYUQsbUJBQU9BLENBQUMsNkVBQVk7QUFDdkMsU0FBU0Ysa0JBQWtCSSxPQUFPLEVBQUVDLFdBQVc7SUFDM0MsT0FBTyxDQUFDLEVBQUVBLFlBQVlDLFFBQVEsR0FBRyxDQUFDLEVBQUVGLFFBQVFFLFFBQVEsR0FBRyxDQUFDO0FBQzVEO0FBQ0FWLHlCQUF5QixHQUFHSTtBQUM1QixNQUFNRDtJQUNGUSxZQUFZQyxRQUFRLEVBQUVDLGFBQWEsQ0FBRTtRQUNqQyxJQUFJLENBQUNELFFBQVEsR0FBR0E7UUFDaEIsSUFBSSxDQUFDQyxhQUFhLEdBQUdBO1FBQ3JCLElBQUksQ0FBQ0MsTUFBTSxHQUFHO1FBQ2QsSUFBSSxDQUFDQyxPQUFPLEdBQUcsSUFBSUM7SUFDdkI7SUFDQUMsUUFBUTtRQUNKLElBQUksQ0FBQ0MsSUFBSSxHQUFHQztRQUNaLElBQUksQ0FBQ0wsTUFBTSxHQUFHO1FBQ2QsSUFBSSxDQUFDQyxPQUFPLENBQUNFLEtBQUs7SUFDdEI7SUFDQUcsT0FBT0MsS0FBSyxFQUFFQyxVQUFVLEVBQUViLFdBQVcsRUFBRTtRQUNuQyxJQUFJLENBQUMsR0FBR0osSUFBSWtCLFNBQVMsRUFBRUYsTUFBTUcsTUFBTSxFQUFFLFNBQVM7WUFDMUM7UUFDSjtRQUNBLE1BQU1DLFVBQVUsQ0FBQyxHQUFHbEIsV0FBV21CLFVBQVUsRUFBRSxJQUFJLENBQUNkLFFBQVEsRUFBRVMsT0FBT1o7UUFDakUsTUFBTWtCLGlCQUFpQnZCLGtCQUFrQmlCLE1BQU1iLE9BQU8sRUFBRUM7UUFDeEQs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LGFBQWFVO1FBQ2J5QyxjQUFjLElBQU07UUFDcEJiLFlBQVk7SUFDaEI7QUFDSjtBQUNBL0MsNEJBQTRCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2Rsb2IvTm9kZUxpc3QuanM/YjE2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0VmFtbU5vZGVHZW5lcmF0b3IgPSBleHBvcnRzLk5vZGVMaXN0ID0gZXhwb3J0cy5nZXRPcmRlclNpZ25hdHVyZSA9IHZvaWQgMDtcbmNvbnN0IF9fMSA9IHJlcXVpcmUoXCIuLlwiKTtcbmNvbnN0IERMT0JOb2RlXzEgPSByZXF1aXJlKFwiLi9ETE9CTm9kZVwiKTtcbmZ1bmN0aW9uIGdldE9yZGVyU2lnbmF0dXJlKG9yZGVySWQsIHVzZXJBY2NvdW50KSB7XG4gICAgcmV0dXJuIGAke3VzZXJBY2NvdW50LnRvU3RyaW5nKCl9LSR7b3JkZXJJZC50b1N0cmluZygpfWA7XG59XG5leHBvcnRzLmdldE9yZGVyU2lnbmF0dXJlID0gZ2V0T3JkZXJTaWduYXR1cmU7XG5jbGFzcyBOb2RlTGlzdCB7XG4gICAgY29uc3RydWN0b3Iobm9kZVR5cGUsIHNvcnREaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5ub2RlVHlwZSA9IG5vZGVUeXBlO1xuICAgICAgICB0aGlzLnNvcnREaXJlY3Rpb24gPSBzb3J0RGlyZWN0aW9uO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubm9kZU1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLm5vZGVNYXAuY2xlYXIoKTtcbiAgICB9XG4gICAgaW5zZXJ0KG9yZGVyLCBtYXJrZXRUeXBlLCB1c2VyQWNjb3VudCkge1xuICAgICAgICBpZiAoKDAsIF9fMS5pc1ZhcmlhbnQpKG9yZGVyLnN0YXR1cywgJ2luaXQnKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld05vZGUgPSAoMCwgRExPQk5vZGVfMS5jcmVhdGVOb2RlKSh0aGlzLm5vZGVUeXBlLCBvcmRlciwgdXNlckFjY291bnQpO1xuICAgICAgICBjb25zdCBvcmRlclNpZ25hdHVyZSA9IGdldE9yZGVyU2lnbmF0dXJlKG9yZGVyLm9yZGVySWQsIHVzZXJBY2NvdW50KTtcbiAgICAgICAgaWYgKHRoaXMubm9kZU1hcC5oYXMob3JkZXJTaWduYXR1cmUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub2RlTWFwLnNldChvcmRlclNpZ25hdHVyZSwgbmV3Tm9kZSk7XG4gICAgICAgIHRoaXMubGVuZ3RoICs9IDE7XG4gICAgICAgIGlmICh0aGlzLmhlYWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcmVwZW5kTm9kZSh0aGlzLmhlYWQsIG5ld05vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQucHJldmlvdXMgPSBuZXdOb2RlO1xuICAgICAgICAgICAgbmV3Tm9kZS5uZXh0ID0gdGhpcy5oZWFkO1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VycmVudE5vZGUgPSB0aGlzLmhlYWQ7XG4gICAgICAgIHdoaWxlIChjdXJyZW50Tm9kZS5uZXh0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICF0aGlzLnByZXBlbmROb2RlKGN1cnJlbnROb2RlLm5leHQsIG5ld05vZGUpKSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgbmV3Tm9kZS5uZXh0ID0gY3VycmVudE5vZGUubmV4dDtcbiAgICAgICAgaWYgKGN1cnJlbnROb2RlLm5leHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3Tm9kZS5uZXh0LnByZXZpb3VzID0gbmV3Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50Tm9kZS5uZXh0ID0gbmV3Tm9kZTtcbiAgICAgICAgbmV3Tm9kZS5wcmV2aW91cyA9IGN1cnJlbnROb2RlO1xuICAgIH1cbiAgICBwcmVwZW5kTm9kZShjdXJyZW50Tm9kZSwgbmV3Tm9kZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50T3JkZXIgPSBjdXJyZW50Tm9kZS5vcmRlcjtcbiAgICAgICAgY29uc3QgbmV3T3JkZXIgPSBuZXdOb2RlLm9yZGVyO1xuICAgICAgICBjb25zdCBjdXJyZW50T3JkZXJTb3J0UHJpY2UgPSBjdXJyZW50Tm9kZS5zb3J0VmFsdWU7XG4gICAgICAgIGNvbnN0IG5ld09yZGVyU29ydFByaWNlID0gbmV3Tm9kZS5zb3J0VmFsdWU7XG4gICAgICAgIGlmIChuZXdPcmRlclNvcnRQcmljZS5lcShjdXJyZW50T3JkZXJTb3J0UHJpY2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3T3JkZXIuc2xvdC5sdChjdXJyZW50T3JkZXIuc2xvdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc29ydERpcmVjdGlvbiA9PT0gJ2FzYycpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdPcmRlclNvcnRQcmljZS5sdChjdXJyZW50T3JkZXJTb3J0UHJpY2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ld09yZGVyU29ydFByaWNlLmd0KGN1cnJlbnRPcmRlclNvcnRQcmljZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlKG9yZGVyLCB1c2VyQWNjb3VudCkge1xuICAgICAgICBjb25zdCBvcmRlcklkID0gZ2V0T3JkZXJTaWduYXR1cmUob3JkZXIub3JkZXJJZCwgdXNlckFjY291bnQpO1xuICAgICAgICBpZiAodGhpcy5ub2RlTWFwLmhhcyhvcmRlcklkKSkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZU1hcC5nZXQob3JkZXJJZCk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG5vZGUub3JkZXIsIG9yZGVyKTtcbiAgICAgICAgICAgIG5vZGUuaGF2ZUZpbGxlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZShvcmRlciwgdXNlckFjY291bnQpIHtcbiAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGdldE9yZGVyU2lnbmF0dXJlKG9yZGVyLm9yZGVySWQsIHVzZXJBY2NvdW50KTtcbiAgICAgICAgaWYgKHRoaXMubm9kZU1hcC5oYXMob3JkZXJJZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5vZGVNYXAuZ2V0KG9yZGVySWQpO1xuICAgICAgICAgICAgaWYgKG5vZGUubmV4dCkge1xuICAgICAgICAgICAgICAgIG5vZGUubmV4dC5wcmV2aW91cyA9IG5vZGUucHJldmlvdXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS5wcmV2aW91cykge1xuICAgICAgICAgICAgICAgIG5vZGUucHJldmlvdXMubmV4dCA9IG5vZGUubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmhlYWQgJiYgbm9kZS5vcmRlci5vcmRlcklkID09PSB0aGlzLmhlYWQub3JkZXIub3JkZXJJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZCA9IG5vZGUubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUucHJldmlvdXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBub2RlLm5leHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLm5vZGVNYXAuZGVsZXRlKG9yZGVySWQpO1xuICAgICAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAqZ2V0R2VuZXJhdG9yKCkge1xuICAgICAgICBsZXQgbm9kZSA9IHRoaXMuaGVhZDtcbiAgICAgICAgd2hpbGUgKG5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgeWllbGQgbm9kZTtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLm5leHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFzKG9yZGVyLCB1c2VyQWNjb3VudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlTWFwLmhhcyhnZXRPcmRlclNpZ25hdHVyZShvcmRlci5vcmRlcklkLCB1c2VyQWNjb3VudCkpO1xuICAgIH1cbiAgICBnZXQob3JkZXJTaWduYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZU1hcC5nZXQob3JkZXJTaWduYXR1cmUpO1xuICAgIH1cbiAgICBwcmludCgpIHtcbiAgICAgICAgbGV0IGN1cnJlbnROb2RlID0gdGhpcy5oZWFkO1xuICAgICAgICB3aGlsZSAoY3VycmVudE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY3VycmVudE5vZGUuZ2V0TGFiZWwoKSk7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLm5leHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpbnRUb3AoKSB7XG4gICAgICAgIGlmICh0aGlzLmhlYWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc29ydERpcmVjdGlvbi50b1VwcGVyQ2FzZSgpLCB0aGlzLmhlYWQuZ2V0TGFiZWwoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLk5vZGVMaXN0ID0gTm9kZUxpc3Q7XG5mdW5jdGlvbiogZ2V0VmFtbU5vZGVHZW5lcmF0b3IocHJpY2UpIHtcbiAgICBpZiAoIXByaWNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgeWllbGQge1xuICAgICAgICBnZXRQcmljZTogKCkgPT4gcHJpY2UsXG4gICAgICAgIGlzVmFtbU5vZGU6ICgpID0+IHRydWUsXG4gICAgICAgIG9yZGVyOiB1bmRlZmluZWQsXG4gICAgICAgIHVzZXJBY2NvdW50OiB1bmRlZmluZWQsXG4gICAgICAgIGlzQmFzZUZpbGxlZDogKCkgPT4gZmFsc2UsXG4gICAgICAgIGhhdmVGaWxsZWQ6IGZhbHNlLFxuICAgIH07XG59XG5leHBvcnRzLmdldFZhbW1Ob2RlR2VuZXJhdG9yID0gZ2V0VmFtbU5vZGVHZW5lcmF0b3I7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRWYW1tTm9kZUdlbmVyYXRvciIsIk5vZGVMaXN0IiwiZ2V0T3JkZXJTaWduYXR1cmUiLCJfXzEiLCJyZXF1aXJlIiwiRExPQk5vZGVfMSIsIm9yZGVySWQiLCJ1c2VyQWNjb3VudCIsInRvU3RyaW5nIiwiY29uc3RydWN0b3IiLCJub2RlVHlwZSIsInNvcnREaXJlY3Rpb24iLCJsZW5ndGgiLCJub2RlTWFwIiwiTWFwIiwiY2xlYXIiLCJoZWFkIiwidW5kZWZpbmVkIiwiaW5zZXJ0Iiwib3JkZXIiLCJtYXJrZXRUeXBlIiwiaXNWYXJpYW50Iiwic3RhdHVzIiwibmV3Tm9kZSIsImNyZWF0ZU5vZGUiLCJvcmRlclNpZ25hdHVyZSIsImhhcyIsInNldCIsInByZXBlbmROb2RlIiwicHJldmlvdXMiLCJuZXh0IiwiY3VycmVudE5vZGUiLCJjdXJyZW50T3JkZXIiLCJuZXdPcmRlciIsImN1cnJlbnRPcmRlclNvcnRQcmljZSIsInNvcnRWYWx1ZSIsIm5ld09yZGVyU29ydFByaWNlIiwiZXEiLCJzbG90IiwibHQiLCJndCIsInVwZGF0ZSIsIm5vZGUiLCJnZXQiLCJhc3NpZ24iLCJoYXZlRmlsbGVkIiwicmVtb3ZlIiwiZGVsZXRlIiwiZ2V0R2VuZXJhdG9yIiwicHJpbnQiLCJjb25zb2xlIiwibG9nIiwiZ2V0TGFiZWwiLCJwcmludFRvcCIsInRvVXBwZXJDYXNlIiwicHJpY2UiLCJnZXRQcmljZSIsImlzVmFtbU5vZGUiLCJpc0Jhc2VGaWxsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/NodeList.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/orderBookLevels.js":
/*!******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/orderBookLevels.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.groupL2 = exports.getVammL2Generator = exports.createL2Levels = exports.mergeL2LevelGenerators = exports.getL2GeneratorFromDLOBNodes = void 0;\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\n/**\n * Get an {@link Generator<L2Level>} generator from a {@link Generator<DLOBNode>}\n * @param dlobNodes e.g. {@link DLOB#getMakerLimitAsks} or {@link DLOB#getMakerLimitBids}\n * @param oraclePriceData\n * @param slot\n */ function* getL2GeneratorFromDLOBNodes(dlobNodes, oraclePriceData, slot) {\n    for (const dlobNode of dlobNodes){\n        const size = dlobNode.order.baseAssetAmount.sub(dlobNode.order.baseAssetAmountFilled);\n        yield {\n            size,\n            price: dlobNode.getPrice(oraclePriceData, slot),\n            sources: {\n                dlob: size\n            }\n        };\n    }\n}\nexports.getL2GeneratorFromDLOBNodes = getL2GeneratorFromDLOBNodes;\nfunction* mergeL2LevelGenerators(l2LevelGenerators, compare) {\n    const generators = l2LevelGenerators.map((generator)=>{\n        return {\n            generator,\n            next: generator.next()\n        };\n    });\n    let next;\n    do {\n        next = generators.reduce((best, next)=>{\n            if (next.next.done) {\n                return best;\n            }\n            if (!best) {\n                return next;\n            }\n            if (compare(next.next.value, best.next.value)) {\n                return next;\n            } else {\n                return best;\n            }\n        }, undefined);\n        if (next) {\n            yield next.next.value;\n            next.next = next.generator.next();\n        }\n    }while (next !== undefined);\n}\nexports.mergeL2LevelGenerators = mergeL2LevelGenerators;\nfunction createL2Levels(generator, depth) {\n    const levels = [];\n    for (const level of generator){\n        const price = level.price;\n        const size = level.size;\n        if (levels.length > 0 && levels[levels.length - 1].price.eq(price)) {\n            const currentLevel = levels[levels.length - 1];\n            currentLevel.size = currentLevel.size.add(size);\n            for (const [source, size] of Object.entries(level.sources)){\n                if (currentLevel.sources[source]) {\n                    currentLevel.sources[source] = currentLevel.sources[source].add(size);\n                } else {\n                    currentLevel.sources[source] = size;\n                }\n            }\n        } else if (levels.length === depth) {\n            break;\n        } else {\n            levels.push(level);\n        }\n    }\n    return levels;\n}\nexports.createL2Levels = createL2Levels;\nfunction getVammL2Generator({ marketAccount, oraclePriceData, numOrders, now }) {\n    const updatedAmm = (0, __1.calculateUpdatedAMM)(marketAccount.amm, oraclePriceData);\n    const [openBids, openAsks] = (0, __1.calculateMarketOpenBidAsk)(updatedAmm.baseAssetReserve, updatedAmm.minBaseAssetReserve, updatedAmm.maxBaseAssetReserve, updatedAmm.orderStepSize);\n    now = now !== null && now !== void 0 ? now : new __1.BN(Date.now() / 1000);\n    const [bidReserves, askReserves] = (0, __1.calculateSpreadReserves)(updatedAmm, oraclePriceData, now);\n    let numBids = 0;\n    const baseSize = openBids.div(new __1.BN(numOrders));\n    const bidAmm = {\n        baseAssetReserve: bidReserves.baseAssetReserve,\n        quoteAssetReserve: bidReserves.quoteAssetReserve,\n        sqrtK: updatedAmm.sqrtK,\n        pegMultiplier: updatedAmm.pegMultiplier\n    };\n    const getL2Bids = function*() {\n        while(numBids < numOrders && baseSize.gt(__1.ZERO)){\n            const [afterSwapQuoteReserves, afterSwapBaseReserves] = (0, __1.calculateAmmReservesAfterSwap)(bidAmm, \"base\", baseSize, __1.SwapDirection.ADD);\n            const quoteSwapped = (0, __1.calculateQuoteAssetAmountSwapped)(bidAmm.quoteAssetReserve.sub(afterSwapQuoteReserves).abs(), bidAmm.pegMultiplier, __1.SwapDirection.ADD);\n            const price = quoteSwapped.mul(__1.BASE_PRECISION).div(baseSize);\n            bidAmm.baseAssetReserve = afterSwapBaseReserves;\n            bidAmm.quoteAssetReserve = afterSwapQuoteReserves;\n            yield {\n                price,\n                size: baseSize,\n                sources: {\n                    vamm: baseSize\n                }\n            };\n            numBids++;\n        }\n    };\n    let numAsks = 0;\n    const askSize = openAsks.abs().div(new __1.BN(numOrders));\n    const askAmm = {\n        baseAssetReserve: askReserves.baseAssetReserve,\n        quoteAssetReserve: askReserves.quoteAssetReserve,\n        sqrtK: updatedAmm.sqrtK,\n        pegMultiplier: updatedAmm.pegMultiplier\n    };\n    const getL2Asks = function*() {\n        while(numAsks < numOrders && askSize.gt(__1.ZERO)){\n            const [afterSwapQuoteReserves, afterSwapBaseReserves] = (0, __1.calculateAmmReservesAfterSwap)(askAmm, \"base\", askSize, __1.SwapDirection.REMOVE);\n            const quoteSwapped = (0, __1.calculateQuoteAssetAmountSwapped)(askAmm.quoteAssetReserve.sub(afterSwapQuoteReserves).abs(), askAmm.pegMultiplier, __1.SwapDirection.REMOVE);\n            const price = quoteSwapped.mul(__1.BASE_PRECISION).div(askSize);\n            askAmm.baseAssetReserve = afterSwapBaseReserves;\n            askAmm.quoteAssetReserve = afterSwapQuoteReserves;\n            yield {\n                price,\n                size: askSize,\n                sources: {\n                    vamm: baseSize\n                }\n            };\n            numAsks++;\n        }\n    };\n    return {\n        getL2Bids,\n        getL2Asks\n    };\n}\nexports.getVammL2Generator = getVammL2Generator;\nfunction groupL2(l2, grouping, depth) {\n    return {\n        bids: groupL2Levels(l2.bids, grouping, __1.PositionDirection.LONG, depth),\n        asks: groupL2Levels(l2.asks, grouping, __1.PositionDirection.SHORT, depth)\n    };\n}\nexports.groupL2 = groupL2;\nfunction groupL2Levels(levels, grouping, direction, depth) {\n    const groupedLevels = [];\n    for (const level of levels){\n        const price = (0, __1.standardizePrice)(level.price, grouping, direction);\n        const size = level.size;\n        if (groupedLevels.length > 0 && groupedLevels[groupedLevels.length - 1].price.eq(price)) {\n            const currentLevel = groupedLevels[groupedLevels.length - 1];\n            currentLevel.size = currentLevel.size.add(size);\n            for (const [source, size] of Object.entries(level.sources)){\n                if (currentLevel.sources[source]) {\n                    currentLevel.sources[source] = currentLevel.sources[source].add(size);\n                } else {\n                    currentLevel.sources[source] = size;\n                }\n            }\n        } else {\n            const groupedLevel = {\n                price: price,\n                size,\n                sources: level.sources\n            };\n            groupedLevels.push(groupedLevel);\n        }\n        if (groupedLevels.length === depth) {\n            break;\n        }\n    }\n    return groupedLevels;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL29yZGVyQm9va0xldmVscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZUFBZSxHQUFHQSwwQkFBMEIsR0FBR0Esc0JBQXNCLEdBQUdBLDhCQUE4QixHQUFHQSxtQ0FBbUMsR0FBRyxLQUFLO0FBQ3BKLE1BQU1PLE1BQU1DLG1CQUFPQSxDQUFDLDZEQUFJO0FBQ3hCOzs7OztDQUtDLEdBQ0QsVUFBVUYsNEJBQTRCRyxTQUFTLEVBQUVDLGVBQWUsRUFBRUMsSUFBSTtJQUNsRSxLQUFLLE1BQU1DLFlBQVlILFVBQVc7UUFDOUIsTUFBTUksT0FBT0QsU0FBU0UsS0FBSyxDQUFDQyxlQUFlLENBQUNDLEdBQUcsQ0FBQ0osU0FBU0UsS0FBSyxDQUFDRyxxQkFBcUI7UUFDcEYsTUFBTTtZQUNGSjtZQUNBSyxPQUFPTixTQUFTTyxRQUFRLENBQUNULGlCQUFpQkM7WUFDMUNTLFNBQVM7Z0JBQ0xDLE1BQU1SO1lBQ1Y7UUFDSjtJQUNKO0FBQ0o7QUFDQWIsbUNBQW1DLEdBQUdNO0FBQ3RDLFVBQVVELHVCQUF1QmlCLGlCQUFpQixFQUFFQyxPQUFPO0lBQ3ZELE1BQU1DLGFBQWFGLGtCQUFrQkcsR0FBRyxDQUFDLENBQUNDO1FBQ3RDLE9BQU87WUFDSEE7WUFDQUMsTUFBTUQsVUFBVUMsSUFBSTtRQUN4QjtJQUNKO0lBQ0EsSUFBSUE7SUFDSixHQUFHO1FBQ0NBLE9BQU9ILFdBQVdJLE1BQU0sQ0FBQyxDQUFDQyxNQUFNRjtZQUM1QixJQUFJQSxLQUFLQSxJQUFJLENBQUNHLElBQUksRUFBRTtnQkFDaEIsT0FBT0Q7WUFDWDtZQUNBLElBQUksQ0FBQ0EsTUFBTTtnQkFDUCxPQUFPRjtZQUNYO1lBQ0EsSUFBSUosUUFBUUksS0FBS0EsSUFBSSxDQUFDMUIsS0FBSyxFQUFFNEIsS0FBS0YsSUFBSSxDQUFDMUIsS0FBSyxH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QixJQUFJLENBQUN5QixHQUFHLENBQUN6QjtZQUMxQyxLQUFLLE1BQU0sQ0FBQzBCLFFBQVExQixLQUFLLElBQUlmLE9BQU8wQyxPQUFPLENBQUNOLE1BQU1kLE9BQU8sRUFBRztnQkFDeEQsSUFBSWlCLGFBQWFqQixPQUFPLENBQUNtQixPQUFPLEVBQUU7b0JBQzlCRixhQUFhakIsT0FBTyxDQUFDbUIsT0FBTyxHQUFHRixhQUFhakIsT0FBTyxDQUFDbUIsT0FBTyxDQUFDRCxHQUFHLENBQUN6QjtnQkFDcEUsT0FDSztvQkFDRHdCLGFBQWFqQixPQUFPLENBQUNtQixPQUFPLEdBQUcxQjtnQkFDbkM7WUFDSjtRQUNKLE9BQ0s7WUFDRCxNQUFNb0YsZUFBZTtnQkFDakIvRSxPQUFPQTtnQkFDUEw7Z0JBQ0FPLFNBQVNjLE1BQU1kLE9BQU87WUFDMUI7WUFDQTJFLGNBQWN0RCxJQUFJLENBQUN3RDtRQUN2QjtRQUNBLElBQUlGLGNBQWM1RCxNQUFNLEtBQUtILE9BQU87WUFDaEM7UUFDSjtJQUNKO0lBQ0EsT0FBTytEO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvZGxvYi9vcmRlckJvb2tMZXZlbHMuanM/NzhkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ3JvdXBMMiA9IGV4cG9ydHMuZ2V0VmFtbUwyR2VuZXJhdG9yID0gZXhwb3J0cy5jcmVhdGVMMkxldmVscyA9IGV4cG9ydHMubWVyZ2VMMkxldmVsR2VuZXJhdG9ycyA9IGV4cG9ydHMuZ2V0TDJHZW5lcmF0b3JGcm9tRExPQk5vZGVzID0gdm9pZCAwO1xuY29uc3QgX18xID0gcmVxdWlyZShcIi4uXCIpO1xuLyoqXG4gKiBHZXQgYW4ge0BsaW5rIEdlbmVyYXRvcjxMMkxldmVsPn0gZ2VuZXJhdG9yIGZyb20gYSB7QGxpbmsgR2VuZXJhdG9yPERMT0JOb2RlPn1cbiAqIEBwYXJhbSBkbG9iTm9kZXMgZS5nLiB7QGxpbmsgRExPQiNnZXRNYWtlckxpbWl0QXNrc30gb3Ige0BsaW5rIERMT0IjZ2V0TWFrZXJMaW1pdEJpZHN9XG4gKiBAcGFyYW0gb3JhY2xlUHJpY2VEYXRhXG4gKiBAcGFyYW0gc2xvdFxuICovXG5mdW5jdGlvbiogZ2V0TDJHZW5lcmF0b3JGcm9tRExPQk5vZGVzKGRsb2JOb2Rlcywgb3JhY2xlUHJpY2VEYXRhLCBzbG90KSB7XG4gICAgZm9yIChjb25zdCBkbG9iTm9kZSBvZiBkbG9iTm9kZXMpIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGRsb2JOb2RlLm9yZGVyLmJhc2VBc3NldEFtb3VudC5zdWIoZGxvYk5vZGUub3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkKTtcbiAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgIHByaWNlOiBkbG9iTm9kZS5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpLFxuICAgICAgICAgICAgc291cmNlczoge1xuICAgICAgICAgICAgICAgIGRsb2I6IHNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydHMuZ2V0TDJHZW5lcmF0b3JGcm9tRExPQk5vZGVzID0gZ2V0TDJHZW5lcmF0b3JGcm9tRExPQk5vZGVzO1xuZnVuY3Rpb24qIG1lcmdlTDJMZXZlbEdlbmVyYXRvcnMobDJMZXZlbEdlbmVyYXRvcnMsIGNvbXBhcmUpIHtcbiAgICBjb25zdCBnZW5lcmF0b3JzID0gbDJMZXZlbEdlbmVyYXRvcnMubWFwKChnZW5lcmF0b3IpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRvcixcbiAgICAgICAgICAgIG5leHQ6IGdlbmVyYXRvci5uZXh0KCksXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgbGV0IG5leHQ7XG4gICAgZG8ge1xuICAgICAgICBuZXh0ID0gZ2VuZXJhdG9ycy5yZWR1Y2UoKGJlc3QsIG5leHQpID0+IHtcbiAgICAgICAgICAgIGlmIChuZXh0Lm5leHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBiZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFiZXN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29tcGFyZShuZXh0Lm5leHQudmFsdWUsIGJlc3QubmV4dC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBiZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB1bmRlZmluZWQpO1xuICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgeWllbGQgbmV4dC5uZXh0LnZhbHVlO1xuICAgICAgICAgICAgbmV4dC5uZXh0ID0gbmV4dC5nZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICB9XG4gICAgfSB3aGlsZSAobmV4dCAhPT0gdW5kZWZpbmVkKTtcbn1cbmV4cG9ydHMubWVyZ2VMMkxldmVsR2VuZXJhdG9ycyA9IG1lcmdlTDJMZXZlbEdlbmVyYXRvcnM7XG5mdW5jdGlvbiBjcmVhdGVMMkxldmVscyhnZW5lcmF0b3IsIGRlcHRoKSB7XG4gICAgY29uc3QgbGV2ZWxzID0gW107XG4gICAgZm9yIChjb25zdCBsZXZlbCBvZiBnZW5lcmF0b3IpIHtcbiAgICAgICAgY29uc3QgcHJpY2UgPSBsZXZlbC5wcmljZTtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGxldmVsLnNpemU7XG4gICAgICAgIGlmIChsZXZlbHMubGVuZ3RoID4gMCAmJiBsZXZlbHNbbGV2ZWxzLmxlbmd0aCAtIDFdLnByaWNlLmVxKHByaWNlKSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudExldmVsID0gbGV2ZWxzW2xldmVscy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGN1cnJlbnRMZXZlbC5zaXplID0gY3VycmVudExldmVsLnNpemUuYWRkKHNpemUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBbc291cmNlLCBzaXplXSBvZiBPYmplY3QuZW50cmllcyhsZXZlbC5zb3VyY2VzKSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TGV2ZWwuc291cmNlc1tzb3VyY2VdKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMZXZlbC5zb3VyY2VzW3NvdXJjZV0gPSBjdXJyZW50TGV2ZWwuc291cmNlc1tzb3VyY2VdLmFkZChzaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMZXZlbC5zb3VyY2VzW3NvdXJjZV0gPSBzaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZXZlbHMubGVuZ3RoID09PSBkZXB0aCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXZlbHMucHVzaChsZXZlbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxldmVscztcbn1cbmV4cG9ydHMuY3JlYXRlTDJMZXZlbHMgPSBjcmVhdGVMMkxldmVscztcbmZ1bmN0aW9uIGdldFZhbW1MMkdlbmVyYXRvcih7IG1hcmtldEFjY291bnQsIG9yYWNsZVByaWNlRGF0YSwgbnVtT3JkZXJzLCBub3csIH0pIHtcbiAgICBjb25zdCB1cGRhdGVkQW1tID0gKDAsIF9fMS5jYWxjdWxhdGVVcGRhdGVkQU1NKShtYXJrZXRBY2NvdW50LmFtbSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBbb3BlbkJpZHMsIG9wZW5Bc2tzXSA9ICgwLCBfXzEuY2FsY3VsYXRlTWFya2V0T3BlbkJpZEFzaykodXBkYXRlZEFtbS5iYXNlQXNzZXRSZXNlcnZlLCB1cGRhdGVkQW1tLm1pbkJhc2VBc3NldFJlc2VydmUsIHVwZGF0ZWRBbW0ubWF4QmFzZUFzc2V0UmVzZXJ2ZSwgdXBkYXRlZEFtbS5vcmRlclN0ZXBTaXplKTtcbiAgICBub3cgPSBub3cgIT09IG51bGwgJiYgbm93ICE9PSB2b2lkIDAgPyBub3cgOiBuZXcgX18xLkJOKERhdGUubm93KCkgLyAxMDAwKTtcbiAgICBjb25zdCBbYmlkUmVzZXJ2ZXMsIGFza1Jlc2VydmVzXSA9ICgwLCBfXzEuY2FsY3VsYXRlU3ByZWFkUmVzZXJ2ZXMpKHVwZGF0ZWRBbW0sIG9yYWNsZVByaWNlRGF0YSwgbm93KTtcbiAgICBsZXQgbnVtQmlkcyA9IDA7XG4gICAgY29uc3QgYmFzZVNpemUgPSBvcGVuQmlkcy5kaXYobmV3IF9fMS5CTihudW1PcmRlcnMpKTtcbiAgICBjb25zdCBiaWRBbW0gPSB7XG4gICAgICAgIGJhc2VBc3NldFJlc2VydmU6IGJpZFJlc2VydmVzLmJhc2VBc3NldFJlc2VydmUsXG4gICAgICAgIHF1b3RlQXNzZXRSZXNlcnZlOiBiaWRSZXNlcnZlcy5xdW90ZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgc3FydEs6IHVwZGF0ZWRBbW0uc3FydEssXG4gICAgICAgIHBlZ011bHRpcGxpZXI6IHVwZGF0ZWRBbW0ucGVnTXVsdGlwbGllcixcbiAgICB9O1xuICAgIGNvbnN0IGdldEwyQmlkcyA9IGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdoaWxlIChudW1CaWRzIDwgbnVtT3JkZXJzICYmIGJhc2VTaXplLmd0KF9fMS5aRVJPKSkge1xuICAgICAgICAgICAgY29uc3QgW2FmdGVyU3dhcFF1b3RlUmVzZXJ2ZXMsIGFmdGVyU3dhcEJhc2VSZXNlcnZlc10gPSAoMCwgX18xLmNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwKShiaWRBbW0sICdiYXNlJywgYmFzZVNpemUsIF9fMS5Td2FwRGlyZWN0aW9uLkFERCk7XG4gICAgICAgICAgICBjb25zdCBxdW90ZVN3YXBwZWQgPSAoMCwgX18xLmNhbGN1bGF0ZVF1b3RlQXNzZXRBbW91bnRTd2FwcGVkKShiaWRBbW0ucXVvdGVBc3NldFJlc2VydmUuc3ViKGFmdGVyU3dhcFF1b3RlUmVzZXJ2ZXMpLmFicygpLCBiaWRBbW0ucGVnTXVsdGlwbGllciwgX18xLlN3YXBEaXJlY3Rpb24uQUREKTtcbiAgICAgICAgICAgIGNvbnN0IHByaWNlID0gcXVvdGVTd2FwcGVkLm11bChfXzEuQkFTRV9QUkVDSVNJT04pLmRpdihiYXNlU2l6ZSk7XG4gICAgICAgICAgICBiaWRBbW0uYmFzZUFzc2V0UmVzZXJ2ZSA9IGFmdGVyU3dhcEJhc2VSZXNlcnZlcztcbiAgICAgICAgICAgIGJpZEFtbS5xdW90ZUFzc2V0UmVzZXJ2ZSA9IGFmdGVyU3dhcFF1b3RlUmVzZXJ2ZXM7XG4gICAgICAgICAgICB5aWVsZCB7XG4gICAgICAgICAgICAgICAgcHJpY2UsXG4gICAgICAgICAgICAgICAgc2l6ZTogYmFzZVNpemUsXG4gICAgICAgICAgICAgICAgc291cmNlczogeyB2YW1tOiBiYXNlU2l6ZSB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG51bUJpZHMrKztcbiAgICAgICAgfVxuICAgIH07XG4gICAgbGV0IG51bUFza3MgPSAwO1xuICAgIGNvbnN0IGFza1NpemUgPSBvcGVuQXNrcy5hYnMoKS5kaXYobmV3IF9fMS5CTihudW1PcmRlcnMpKTtcbiAgICBjb25zdCBhc2tBbW0gPSB7XG4gICAgICAgIGJhc2VBc3NldFJlc2VydmU6IGFza1Jlc2VydmVzLmJhc2VBc3NldFJlc2VydmUsXG4gICAgICAgIHF1b3RlQXNzZXRSZXNlcnZlOiBhc2tSZXNlcnZlcy5xdW90ZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgc3FydEs6IHVwZGF0ZWRBbW0uc3FydEssXG4gICAgICAgIHBlZ011bHRpcGxpZXI6IHVwZGF0ZWRBbW0ucGVnTXVsdGlwbGllcixcbiAgICB9O1xuICAgIGNvbnN0IGdldEwyQXNrcyA9IGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIHdoaWxlIChudW1Bc2tzIDwgbnVtT3JkZXJzICYmIGFza1NpemUuZ3QoX18xLlpFUk8pKSB7XG4gICAgICAgICAgICBjb25zdCBbYWZ0ZXJTd2FwUXVvdGVSZXNlcnZlcywgYWZ0ZXJTd2FwQmFzZVJlc2VydmVzXSA9ICgwLCBfXzEuY2FsY3VsYXRlQW1tUmVzZXJ2ZXNBZnRlclN3YXApKGFza0FtbSwgJ2Jhc2UnLCBhc2tTaXplLCBfXzEuU3dhcERpcmVjdGlvbi5SRU1PVkUpO1xuICAgICAgICAgICAgY29uc3QgcXVvdGVTd2FwcGVkID0gKDAsIF9fMS5jYWxjdWxhdGVRdW90ZUFzc2V0QW1vdW50U3dhcHBlZCkoYXNrQW1tLnF1b3RlQXNzZXRSZXNlcnZlLnN1YihhZnRlclN3YXBRdW90ZVJlc2VydmVzKS5hYnMoKSwgYXNrQW1tLnBlZ011bHRpcGxpZXIsIF9fMS5Td2FwRGlyZWN0aW9uLlJFTU9WRSk7XG4gICAgICAgICAgICBjb25zdCBwcmljZSA9IHF1b3RlU3dhcHBlZC5tdWwoX18xLkJBU0VfUFJFQ0lTSU9OKS5kaXYoYXNrU2l6ZSk7XG4gICAgICAgICAgICBhc2tBbW0uYmFzZUFzc2V0UmVzZXJ2ZSA9IGFmdGVyU3dhcEJhc2VSZXNlcnZlcztcbiAgICAgICAgICAgIGFza0FtbS5xdW90ZUFzc2V0UmVzZXJ2ZSA9IGFmdGVyU3dhcFF1b3RlUmVzZXJ2ZXM7XG4gICAgICAgICAgICB5aWVsZCB7XG4gICAgICAgICAgICAgICAgcHJpY2UsXG4gICAgICAgICAgICAgICAgc2l6ZTogYXNrU2l6ZSxcbiAgICAgICAgICAgICAgICBzb3VyY2VzOiB7IHZhbW06IGJhc2VTaXplIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbnVtQXNrcysrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRMMkJpZHMsXG4gICAgICAgIGdldEwyQXNrcyxcbiAgICB9O1xufVxuZXhwb3J0cy5nZXRWYW1tTDJHZW5lcmF0b3IgPSBnZXRWYW1tTDJHZW5lcmF0b3I7XG5mdW5jdGlvbiBncm91cEwyKGwyLCBncm91cGluZywgZGVwdGgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBiaWRzOiBncm91cEwyTGV2ZWxzKGwyLmJpZHMsIGdyb3VwaW5nLCBfXzEuUG9zaXRpb25EaXJlY3Rpb24uTE9ORywgZGVwdGgpLFxuICAgICAgICBhc2tzOiBncm91cEwyTGV2ZWxzKGwyLmFza3MsIGdyb3VwaW5nLCBfXzEuUG9zaXRpb25EaXJlY3Rpb24uU0hPUlQsIGRlcHRoKSxcbiAgICB9O1xufVxuZXhwb3J0cy5ncm91cEwyID0gZ3JvdXBMMjtcbmZ1bmN0aW9uIGdyb3VwTDJMZXZlbHMobGV2ZWxzLCBncm91cGluZywgZGlyZWN0aW9uLCBkZXB0aCkge1xuICAgIGNvbnN0IGdyb3VwZWRMZXZlbHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGxldmVsIG9mIGxldmVscykge1xuICAgICAgICBjb25zdCBwcmljZSA9ICgwLCBfXzEuc3RhbmRhcmRpemVQcmljZSkobGV2ZWwucHJpY2UsIGdyb3VwaW5nLCBkaXJlY3Rpb24pO1xuICAgICAgICBjb25zdCBzaXplID0gbGV2ZWwuc2l6ZTtcbiAgICAgICAgaWYgKGdyb3VwZWRMZXZlbHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgZ3JvdXBlZExldmVsc1tncm91cGVkTGV2ZWxzLmxlbmd0aCAtIDFdLnByaWNlLmVxKHByaWNlKSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudExldmVsID0gZ3JvdXBlZExldmVsc1tncm91cGVkTGV2ZWxzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY3VycmVudExldmVsLnNpemUgPSBjdXJyZW50TGV2ZWwuc2l6ZS5hZGQoc2l6ZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtzb3VyY2UsIHNpemVdIG9mIE9iamVjdC5lbnRyaWVzKGxldmVsLnNvdXJjZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMZXZlbC5zb3VyY2VzW3NvdXJjZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExldmVsLnNvdXJjZXNbc291cmNlXSA9IGN1cnJlbnRMZXZlbC5zb3VyY2VzW3NvdXJjZV0uYWRkKHNpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudExldmVsLnNvdXJjZXNbc291cmNlXSA9IHNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBlZExldmVsID0ge1xuICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZSxcbiAgICAgICAgICAgICAgICBzaXplLFxuICAgICAgICAgICAgICAgIHNvdXJjZXM6IGxldmVsLnNvdXJjZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ3JvdXBlZExldmVscy5wdXNoKGdyb3VwZWRMZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdyb3VwZWRMZXZlbHMubGVuZ3RoID09PSBkZXB0aCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGdyb3VwZWRMZXZlbHM7XG59XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJncm91cEwyIiwiZ2V0VmFtbUwyR2VuZXJhdG9yIiwiY3JlYXRlTDJMZXZlbHMiLCJtZXJnZUwyTGV2ZWxHZW5lcmF0b3JzIiwiZ2V0TDJHZW5lcmF0b3JGcm9tRExPQk5vZGVzIiwiX18xIiwicmVxdWlyZSIsImRsb2JOb2RlcyIsIm9yYWNsZVByaWNlRGF0YSIsInNsb3QiLCJkbG9iTm9kZSIsInNpemUiLCJvcmRlciIsImJhc2VBc3NldEFtb3VudCIsInN1YiIsImJhc2VBc3NldEFtb3VudEZpbGxlZCIsInByaWNlIiwiZ2V0UHJpY2UiLCJzb3VyY2VzIiwiZGxvYiIsImwyTGV2ZWxHZW5lcmF0b3JzIiwiY29tcGFyZSIsImdlbmVyYXRvcnMiLCJtYXAiLCJnZW5lcmF0b3IiLCJuZXh0IiwicmVkdWNlIiwiYmVzdCIsImRvbmUiLCJ1bmRlZmluZWQiLCJkZXB0aCIsImxldmVscyIsImxldmVsIiwibGVuZ3RoIiwiZXEiLCJjdXJyZW50TGV2ZWwiLCJhZGQiLCJzb3VyY2UiLCJlbnRyaWVzIiwicHVzaCIsIm1hcmtldEFjY291bnQiLCJudW1PcmRlcnMiLCJub3ciLCJ1cGRhdGVkQW1tIiwiY2FsY3VsYXRlVXBkYXRlZEFNTSIsImFtbSIsIm9wZW5CaWRzIiwib3BlbkFza3MiLCJjYWxjdWxhdGVNYXJrZXRPcGVuQmlkQXNrIiwiYmFzZUFzc2V0UmVzZXJ2ZSIsIm1pbkJhc2VBc3NldFJlc2VydmUiLCJtYXhCYXNlQXNzZXRSZXNlcnZlIiwib3JkZXJTdGVwU2l6ZSIsIkJOIiwiRGF0ZSIsImJpZFJlc2VydmVzIiwiYXNrUmVzZXJ2ZXMiLCJjYWxjdWxhdGVTcHJlYWRSZXNlcnZlcyIsIm51bUJpZHMiLCJiYXNlU2l6ZSIsImRpdiIsImJpZEFtbSIsInF1b3RlQXNzZXRSZXNlcnZlIiwic3FydEsiLCJwZWdNdWx0aXBsaWVyIiwiZ2V0TDJCaWRzIiwiZ3QiLCJaRVJPIiwiYWZ0ZXJTd2FwUXVvdGVSZXNlcnZlcyIsImFmdGVyU3dhcEJhc2VSZXNlcnZlcyIsImNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwIiwiU3dhcERpcmVjdGlvbiIsIkFERCIsInF1b3RlU3dhcHBlZCIsImNhbGN1bGF0ZVF1b3RlQXNzZXRBbW91bnRTd2FwcGVkIiwiYWJzIiwibXVsIiwiQkFTRV9QUkVDSVNJT04iLCJ2YW1tIiwibnVtQXNrcyIsImFza1NpemUiLCJhc2tBbW0iLCJnZXRMMkFza3MiLCJSRU1PVkUiLCJsMiIsImdyb3VwaW5nIiwiYmlkcyIsImdyb3VwTDJMZXZlbHMiLCJQb3NpdGlvbkRpcmVjdGlvbiIsIkxPTkciLCJhc2tzIiwiU0hPUlQiLCJkaXJlY3Rpb24iLCJncm91cGVkTGV2ZWxzIiwic3RhbmRhcmRpemVQcmljZSIsImdyb3VwZWRMZXZlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/orderBookLevels.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/types.js":
/*!********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/types.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kbG9iL3R5cGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2Rsb2IvdHlwZXMuanM/MzhiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/driftClient.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/driftClient.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __setModuleDefault = (void 0) && (void 0).__setModuleDefault || (Object.create ? function(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (void 0) && (void 0).__importStar || function(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k in mod)if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    }\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DriftClient = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst bs58_1 = __importDefault(__webpack_require__(/*! bs58 */ \"(ssr)/./node_modules/bs58/index.js\"));\nconst spl_token_1 = __webpack_require__(/*! @solana/spl-token */ \"(ssr)/./node_modules/@solana/spl-token/lib/cjs/index.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst anchor = __importStar(__webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\"));\nconst drift_json_1 = __importDefault(__webpack_require__(/*! ./idl/drift.json */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/idl/drift.json\"));\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst pda_1 = __webpack_require__(/*! ./addresses/pda */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\");\nconst utils_1 = __webpack_require__(/*! ./tx/utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tx/utils.js\");\nconst numericConstants_1 = __webpack_require__(/*! ./constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst position_1 = __webpack_require__(/*! ./math/position */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/position.js\");\nconst spotBalance_1 = __webpack_require__(/*! ./math/spotBalance */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js\");\nconst userName_1 = __webpack_require__(/*! ./userName */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userName.js\");\nconst pollingDriftClientAccountSubscriber_1 = __webpack_require__(/*! ./accounts/pollingDriftClientAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingDriftClientAccountSubscriber.js\");\nconst webSocketDriftClientAccountSubscriber_1 = __webpack_require__(/*! ./accounts/webSocketDriftClientAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketDriftClientAccountSubscriber.js\");\nconst retryTxSender_1 = __webpack_require__(/*! ./tx/retryTxSender */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tx/retryTxSender.js\");\nconst user_1 = __webpack_require__(/*! ./user */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/user.js\");\nconst config_1 = __webpack_require__(/*! ./config */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/config.js\");\nconst spotMarkets_1 = __webpack_require__(/*! ./constants/spotMarkets */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/spotMarkets.js\");\nconst userStats_1 = __webpack_require__(/*! ./userStats */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userStats.js\");\nconst spotPosition_1 = __webpack_require__(/*! ./math/spotPosition */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotPosition.js\");\nconst market_1 = __webpack_require__(/*! ./math/market */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/market.js\");\nconst fetch_1 = __webpack_require__(/*! ./accounts/fetch */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/fetch.js\");\nconst spotMarket_1 = __webpack_require__(/*! ./math/spotMarket */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotMarket.js\");\nconst memcmp_1 = __webpack_require__(/*! ./memcmp */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js\");\nconst marinade_1 = __webpack_require__(/*! ./marinade */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/index.js\");\nconst orderParams_1 = __webpack_require__(/*! ./orderParams */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderParams.js\");\n/**\n * # DriftClient\n * This class is the main way to interact with Drift Protocol. It allows you to subscribe to the various accounts where the Market's state is stored, as well as: opening positions, liquidating, settling funding, depositing & withdrawing, and more.\n */ class DriftClient {\n    get isSubscribed() {\n        return this._isSubscribed && this.accountSubscriber.isSubscribed;\n    }\n    set isSubscribed(val) {\n        this._isSubscribed = val;\n    }\n    constructor(config){\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u;\n        this.users = new Map();\n        this._isSubscribed = false;\n        this.perpMarketLastSlotCache = new Map();\n        this.spotMarketLastSlotCache = new Map();\n        this.mustIncludePerpMarketIndexes = new Set();\n        this.mustIncludeSpotMarketIndexes = new Set();\n        this.connection = config.connection;\n        this.wallet = config.wallet;\n        this.opts = config.opts || anchor_1.AnchorProvider.defaultOptions();\n        this.provider = new anchor_1.AnchorProvider(config.connection, config.wallet, this.opts);\n        this.program = new anchor_1.Program(drift_json_1.default, (_a = config.programID) !== null && _a !== void 0 ? _a : new web3_js_1.PublicKey(config_1.DRIFT_PROGRAM_ID), this.provider);\n        this.authority = (_b = config.authority) !== null && _b !== void 0 ? _b : this.wallet.publicKey;\n        this.activeSubAccountId = (_c = config.activeSubAccountId) !== null && _c !== void 0 ? _c : 0;\n        this.skipLoadUsers = (_d = config.skipLoadUsers) !== null && _d !== void 0 ? _d : false;\n        this.txVersion = (_e = config.txVersion) !== null && _e !== void 0 ? _e : \"legacy\";\n        this.txParams = {\n            computeUnits: (_g = (_f = config.txParams) === null || _f === void 0 ? void 0 : _f.computeUnits) !== null && _g !== void 0 ? _g : 600000,\n            computeUnitsPrice: (_j = (_h = config.txParams) === null || _h === void 0 ? void 0 : _h.computeUnitsPrice) !== null && _j !== void 0 ? _j : 0\n        };\n        if (config.includeDelegates && config.subAccountIds) {\n            throw new Error(\"Can only pass one of includeDelegates or subAccountIds. If you want to specify subaccount ids for multiple authorities, pass authoritySubaccountMap instead\");\n        }\n        if (config.authoritySubAccountMap && config.subAccountIds) {\n            throw new Error(\"Can only pass one of authoritySubaccountMap or subAccountIds\");\n        }\n        if (config.authoritySubAccountMap && config.includeDelegates) {\n            throw new Error(\"Can only pass one of authoritySubaccountMap or includeDelegates\");\n        }\n        this.authoritySubAccountMap = config.authoritySubAccountMap ? config.authoritySubAccountMap : config.subAccountIds ? new Map([\n            [\n                this.authority.toString(),\n                config.subAccountIds\n            ]\n        ]) : new Map();\n        this.includeDelegates = (_k = config.includeDelegates) !== null && _k !== void 0 ? _k : false;\n        if (((_l = config.accountSubscription) === null || _l === void 0 ? void 0 : _l.type) === \"polling\") {\n            this.userAccountSubscriptionConfig = {\n                type: \"polling\",\n                accountLoader: config.accountSubscription.accountLoader\n            };\n            this.userStatsAccountSubscriptionConfig = {\n                type: \"polling\",\n                accountLoader: config.accountSubscription.accountLoader\n            };\n        } else {\n            this.userAccountSubscriptionConfig = {\n                type: \"websocket\"\n            };\n            this.userStatsAccountSubscriptionConfig = {\n                type: \"websocket\"\n            };\n        }\n        if (config.userStats) {\n            this.userStats = new userStats_1.UserStats({\n                driftClient: this,\n                userStatsAccountPublicKey: (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.authority),\n                accountSubscription: this.userAccountSubscriptionConfig\n            });\n        }\n        this.marketLookupTable = config.marketLookupTable;\n        if (config.env && !this.marketLookupTable) {\n            this.marketLookupTable = new web3_js_1.PublicKey(config_1.configs[config.env].MARKET_LOOKUP_TABLE);\n        }\n        const noMarketsAndOraclesSpecified = config.perpMarketIndexes === undefined && config.spotMarketIndexes === undefined && config.oracleInfos === undefined;\n        if (((_m = config.accountSubscription) === null || _m === void 0 ? void 0 : _m.type) === \"polling\") {\n            this.accountSubscriber = new pollingDriftClientAccountSubscriber_1.PollingDriftClientAccountSubscriber(this.program, config.accountSubscription.accountLoader, (_o = config.perpMarketIndexes) !== null && _o !== void 0 ? _o : [], (_p = config.spotMarketIndexes) !== null && _p !== void 0 ? _p : [], (_q = config.oracleInfos) !== null && _q !== void 0 ? _q : [], noMarketsAndOraclesSpecified);\n        } else {\n            this.accountSubscriber = new webSocketDriftClientAccountSubscriber_1.WebSocketDriftClientAccountSubscriber(this.program, (_r = config.perpMarketIndexes) !== null && _r !== void 0 ? _r : [], (_s = config.spotMarketIndexes) !== null && _s !== void 0 ? _s : [], (_t = config.oracleInfos) !== null && _t !== void 0 ? _t : [], noMarketsAndOraclesSpecified);\n        }\n        this.eventEmitter = this.accountSubscriber.eventEmitter;\n        this.txSender = (_u = config.txSender) !== null && _u !== void 0 ? _u : new retryTxSender_1.RetryTxSender({\n            connection: this.connection,\n            wallet: this.wallet,\n            opts: this.opts\n        });\n    }\n    getUserMapKey(subAccountId, authority) {\n        return `${subAccountId}_${authority.toString()}`;\n    }\n    createUser(subAccountId, accountSubscriptionConfig, authority) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, authority !== null && authority !== void 0 ? authority : this.authority, subAccountId);\n        return new user_1.User({\n            driftClient: this,\n            userAccountPublicKey,\n            accountSubscription: accountSubscriptionConfig\n        });\n    }\n    async subscribe() {\n        let subscribePromises = [\n            this.addAndSubscribeToUsers()\n        ].concat(this.accountSubscriber.subscribe());\n        if (this.userStats !== undefined) {\n            subscribePromises = subscribePromises.concat(this.userStats.subscribe());\n        }\n        this.isSubscribed = (await Promise.all(subscribePromises)).reduce((success, prevSuccess)=>success && prevSuccess);\n        return this.isSubscribed;\n    }\n    subscribeUsers() {\n        return [\n            ...this.users.values()\n        ].map((user)=>user.subscribe());\n    }\n    /**\n     *\tForces the accountSubscriber to fetch account updates from rpc\n     */ async fetchAccounts() {\n        let promises = [\n            ...this.users.values()\n        ].map((user)=>user.fetchAccounts()).concat(this.accountSubscriber.fetch());\n        if (this.userStats) {\n            promises = promises.concat(this.userStats.fetchAccounts());\n        }\n        await Promise.all(promises);\n    }\n    async unsubscribe() {\n        let unsubscribePromises = this.unsubscribeUsers().concat(this.accountSubscriber.unsubscribe());\n        if (this.userStats !== undefined) {\n            unsubscribePromises = unsubscribePromises.concat(this.userStats.unsubscribe());\n        }\n        await Promise.all(unsubscribePromises);\n        this.isSubscribed = false;\n    }\n    unsubscribeUsers() {\n        return [\n            ...this.users.values()\n        ].map((user)=>user.unsubscribe());\n    }\n    async getStatePublicKey() {\n        if (this.statePublicKey) {\n            return this.statePublicKey;\n        }\n        this.statePublicKey = await (0, pda_1.getDriftStateAccountPublicKey)(this.program.programId);\n        return this.statePublicKey;\n    }\n    getSignerPublicKey() {\n        if (this.signerPublicKey) {\n            return this.signerPublicKey;\n        }\n        this.signerPublicKey = (0, pda_1.getDriftSignerPublicKey)(this.program.programId);\n        return this.signerPublicKey;\n    }\n    getStateAccount() {\n        return this.accountSubscriber.getStateAccountAndSlot().data;\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     */ async forceGetStateAccount() {\n        await this.accountSubscriber.fetch();\n        return this.accountSubscriber.getStateAccountAndSlot().data;\n    }\n    getPerpMarketAccount(marketIndex) {\n        var _a;\n        return (_a = this.accountSubscriber.getMarketAccountAndSlot(marketIndex)) === null || _a === void 0 ? void 0 : _a.data;\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     * @param marketIndex\n     */ async forceGetPerpMarketAccount(marketIndex) {\n        var _a, _b;\n        await this.accountSubscriber.fetch();\n        let data = (_a = this.accountSubscriber.getMarketAccountAndSlot(marketIndex)) === null || _a === void 0 ? void 0 : _a.data;\n        let i = 0;\n        while(data === undefined && i < 10){\n            await this.accountSubscriber.fetch();\n            data = (_b = this.accountSubscriber.getMarketAccountAndSlot(marketIndex)) === null || _b === void 0 ? void 0 : _b.data;\n            i++;\n        }\n        return data;\n    }\n    getPerpMarketAccounts() {\n        return this.accountSubscriber.getMarketAccountsAndSlots().filter((value)=>value !== undefined).map((value)=>value.data);\n    }\n    getSpotMarketAccount(marketIndex) {\n        return this.accountSubscriber.getSpotMarketAccountAndSlot(marketIndex).data;\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     * @param marketIndex\n     */ async forceGetSpotMarketAccount(marketIndex) {\n        await this.accountSubscriber.fetch();\n        return this.accountSubscriber.getSpotMarketAccountAndSlot(marketIndex).data;\n    }\n    getSpotMarketAccounts() {\n        return this.accountSubscriber.getSpotMarketAccountsAndSlots().filter((value)=>value !== undefined).map((value)=>value.data);\n    }\n    getQuoteSpotMarketAccount() {\n        return this.accountSubscriber.getSpotMarketAccountAndSlot(numericConstants_1.QUOTE_SPOT_MARKET_INDEX).data;\n    }\n    getOraclePriceDataAndSlot(oraclePublicKey) {\n        return this.accountSubscriber.getOraclePriceDataAndSlot(oraclePublicKey);\n    }\n    async getSerumV3FulfillmentConfig(serumMarket) {\n        const address = await (0, pda_1.getSerumFulfillmentConfigPublicKey)(this.program.programId, serumMarket);\n        return await this.program.account.serumV3FulfillmentConfig.fetch(address);\n    }\n    async getPhoenixV1FulfillmentConfig(phoenixMarket) {\n        const address = await (0, pda_1.getPhoenixFulfillmentConfigPublicKey)(this.program.programId, phoenixMarket);\n        return await this.program.account.phoenixV1FulfillmentConfig.fetch(address);\n    }\n    async fetchMarketLookupTableAccount() {\n        if (this.lookupTableAccount) return this.lookupTableAccount;\n        if (!this.marketLookupTable) {\n            console.log(\"Market lookup table address not set\");\n            return;\n        }\n        const lookupTableAccount = (await this.connection.getAddressLookupTable(this.marketLookupTable)).value;\n        this.lookupTableAccount = lookupTableAccount;\n        return lookupTableAccount;\n    }\n    /**\n     * Update the wallet to use for drift transactions and linked user account\n     * @param newWallet\n     * @param subAccountIds\n     * @param activeSubAccountId\n     * @param includeDelegates\n     */ async updateWallet(newWallet, subAccountIds, activeSubAccountId, includeDelegates, authoritySubaccountMap) {\n        const newProvider = new anchor_1.AnchorProvider(this.connection, newWallet, this.opts);\n        const newProgram = new anchor_1.Program(drift_json_1.default, this.program.programId, newProvider);\n        this.skipLoadUsers = false;\n        // Update provider for txSender with new wallet details\n        this.txSender.wallet = newWallet;\n        this.wallet = newWallet;\n        this.provider = newProvider;\n        this.program = newProgram;\n        this.authority = newWallet.publicKey;\n        this.activeSubAccountId = activeSubAccountId;\n        this.userStatsAccountPublicKey = undefined;\n        this.includeDelegates = includeDelegates !== null && includeDelegates !== void 0 ? includeDelegates : false;\n        if (includeDelegates && subAccountIds) {\n            throw new Error(\"Can only pass one of includeDelegates or subAccountIds. If you want to specify subaccount ids for multiple authorities, pass authoritySubaccountMap instead\");\n        }\n        if (authoritySubaccountMap && subAccountIds) {\n            throw new Error(\"Can only pass one of authoritySubaccountMap or subAccountIds\");\n        }\n        if (authoritySubaccountMap && includeDelegates) {\n            throw new Error(\"Can only pass one of authoritySubaccountMap or includeDelegates\");\n        }\n        this.authoritySubAccountMap = authoritySubaccountMap ? authoritySubaccountMap : subAccountIds ? new Map([\n            [\n                this.authority.toString(),\n                subAccountIds\n            ]\n        ]) : new Map();\n        let success = true;\n        if (this.isSubscribed) {\n            await Promise.all(this.unsubscribeUsers());\n            if (this.userStats) {\n                await this.userStats.unsubscribe();\n                this.userStats = new userStats_1.UserStats({\n                    driftClient: this,\n                    userStatsAccountPublicKey: this.getUserStatsAccountPublicKey(),\n                    accountSubscription: this.userStatsAccountSubscriptionConfig\n                });\n                await this.userStats.subscribe();\n            }\n            this.users.clear();\n            success = await this.addAndSubscribeToUsers();\n        }\n        return success;\n    }\n    switchActiveUser(subAccountId, authority) {\n        this.activeSubAccountId = subAccountId;\n        this.authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        this.userStatsAccountPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.authority);\n    }\n    async addUser(subAccountId, authority, userAccount) {\n        authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        const userKey = this.getUserMapKey(subAccountId, authority);\n        if (this.users.has(userKey) && this.users.get(userKey).isSubscribed) {\n            return true;\n        }\n        const user = this.createUser(subAccountId, this.userAccountSubscriptionConfig, authority);\n        const result = await user.subscribe(userAccount);\n        if (result) {\n            this.users.set(userKey, user);\n            return true;\n        } else {\n            return false;\n        }\n    }\n    /**\n     * Adds and subscribes to users based on params set by the constructor or by updateWallet.\n     */ async addAndSubscribeToUsers() {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        // save the rpc calls if driftclient is initialized without a real wallet\n        if (this.skipLoadUsers) return true;\n        let result = true;\n        if (this.authoritySubAccountMap && this.authoritySubAccountMap.size > 0) {\n            this.authoritySubAccountMap.forEach(async (value, key)=>{\n                for (const subAccountId of value){\n                    result = result && await this.addUser(subAccountId, new web3_js_1.PublicKey(key));\n                }\n            });\n            if (this.activeSubAccountId == undefined) {\n                this.switchActiveUser((_a = [\n                    ...this.authoritySubAccountMap.values()\n                ][0][0]) !== null && _a !== void 0 ? _a : 0, new web3_js_1.PublicKey((_b = [\n                    ...this.authoritySubAccountMap.keys()\n                ][0]) !== null && _b !== void 0 ? _b : this.authority.toString()));\n            }\n        } else {\n            const userAccounts = (_c = await this.getUserAccountsForAuthority(this.wallet.publicKey)) !== null && _c !== void 0 ? _c : [];\n            let delegatedAccounts = [];\n            if (this.includeDelegates) {\n                delegatedAccounts = (_d = await this.getUserAccountsForDelegate(this.wallet.publicKey)) !== null && _d !== void 0 ? _d : [];\n            }\n            for (const account of userAccounts.concat(delegatedAccounts)){\n                result = result && await this.addUser(account.subAccountId, account.authority, account);\n            }\n            if (this.activeSubAccountId == undefined) {\n                this.switchActiveUser((_f = (_e = userAccounts.concat(delegatedAccounts)[0]) === null || _e === void 0 ? void 0 : _e.subAccountId) !== null && _f !== void 0 ? _f : 0, (_h = (_g = userAccounts.concat(delegatedAccounts)[0]) === null || _g === void 0 ? void 0 : _g.authority) !== null && _h !== void 0 ? _h : this.authority);\n            }\n        }\n        return result;\n    }\n    async initializeUserAccount(subAccountId = 0, name = userName_1.DEFAULT_USER_NAME, referrerInfo) {\n        const [userAccountPublicKey, initializeUserAccountIx] = await this.getInitializeUserInstructions(subAccountId, name, referrerInfo);\n        const tx = new web3_js_1.Transaction();\n        if (subAccountId === 0) {\n            if (!await this.checkIfAccountExists(this.getUserStatsAccountPublicKey())) {\n                tx.add(await this.getInitializeUserStatsIx());\n            }\n        }\n        tx.add(initializeUserAccountIx);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        await this.addUser(subAccountId);\n        return [\n            txSig,\n            userAccountPublicKey\n        ];\n    }\n    async getInitializeUserInstructions(subAccountId = 0, name = userName_1.DEFAULT_USER_NAME, referrerInfo) {\n        const userAccountPublicKey = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const remainingAccounts = new Array();\n        if (referrerInfo !== undefined) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        const state = this.getStateAccount();\n        if (!state.whitelistMint.equals(web3_js_1.PublicKey.default)) {\n            const associatedTokenPublicKey = await (0, spl_token_1.getAssociatedTokenAddress)(state.whitelistMint, this.wallet.publicKey);\n            remainingAccounts.push({\n                pubkey: associatedTokenPublicKey,\n                isWritable: false,\n                isSigner: false\n            });\n        }\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const initializeUserAccountIx = await this.program.instruction.initializeUser(subAccountId, nameBuffer, {\n            accounts: {\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                state: await this.getStatePublicKey()\n            },\n            remainingAccounts\n        });\n        return [\n            userAccountPublicKey,\n            initializeUserAccountIx\n        ];\n    }\n    async getInitializeUserStatsIx() {\n        return await this.program.instruction.initializeUserStats({\n            accounts: {\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                state: await this.getStatePublicKey()\n            }\n        });\n    }\n    async getNextSubAccountId() {\n        const userStats = this.getUserStats();\n        let userStatsAccount;\n        if (!userStats) {\n            userStatsAccount = await (0, fetch_1.fetchUserStatsAccount)(this.connection, this.program, this.wallet.publicKey);\n        } else {\n            userStatsAccount = userStats.getAccount();\n        }\n        return userStatsAccount.numberOfSubAccountsCreated;\n    }\n    async initializeReferrerName(name) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, 0);\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const referrerNameAccountPublicKey = (0, pda_1.getReferrerNamePublicKeySync)(this.program.programId, nameBuffer);\n        const tx = await this.program.transaction.initializeReferrerName(nameBuffer, {\n            accounts: {\n                referrerName: referrerNameAccountPublicKey,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateUserName(name, subAccountId = 0) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const tx = await this.program.transaction.updateUserName(subAccountId, nameBuffer, {\n            accounts: {\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateUserCustomMarginRatio(marginRatio, subAccountId = 0) {\n        const tx = await this.program.transaction.updateUserCustomMarginRatio(subAccountId, marginRatio, {\n            accounts: {\n                user: await this.getUserAccountPublicKey(),\n                authority: this.wallet.publicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserMarginTradingEnabledIx(marginTradingEnabled, subAccountId = 0, userAccountPublicKey) {\n        const userAccountPublicKeyToUse = userAccountPublicKey || (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        await this.addUser(subAccountId, this.wallet.publicKey);\n        let remainingAccounts;\n        try {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [\n                    this.getUserAccount(subAccountId)\n                ]\n            });\n        } catch (err) {\n            remainingAccounts = [];\n        }\n        return await this.program.instruction.updateUserMarginTradingEnabled(subAccountId, marginTradingEnabled, {\n            accounts: {\n                user: userAccountPublicKeyToUse,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async updateUserMarginTradingEnabled(marginTradingEnabled, subAccountId = 0) {\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        await this.addUser(subAccountId, this.wallet.publicKey);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(subAccountId)\n            ]\n        });\n        const tx = await this.program.transaction.updateUserMarginTradingEnabled(subAccountId, marginTradingEnabled, {\n            accounts: {\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async updateUserDelegate(delegate, subAccountId = 0) {\n        const tx = await this.program.transaction.updateUserDelegate(subAccountId, delegate, {\n            accounts: {\n                user: await this.getUserAccountPublicKey(),\n                authority: this.wallet.publicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async fetchAllUserAccounts(includeIdle = true) {\n        let filters = undefined;\n        if (!includeIdle) {\n            filters = [\n                (0, memcmp_1.getNonIdleUserFilter)()\n            ];\n        }\n        return await this.program.account.user.all(filters);\n    }\n    async getUserAccountsForDelegate(delegate) {\n        const programAccounts = await this.program.account.user.all([\n            {\n                memcmp: {\n                    offset: 40,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */ bytes: bs58_1.default.encode(delegate.toBuffer())\n                }\n            }\n        ]);\n        return programAccounts.map((programAccount)=>programAccount.account).sort((a, b)=>a.subAccountId - b.subAccountId);\n    }\n    async getUserAccountsAndAddressesForAuthority(authority) {\n        const programAccounts = await this.program.account.user.all([\n            {\n                memcmp: {\n                    offset: 8,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */ bytes: bs58_1.default.encode(authority.toBuffer())\n                }\n            }\n        ]);\n        return programAccounts.map((programAccount)=>programAccount);\n    }\n    async getUserAccountsForAuthority(authority) {\n        const programAccounts = await this.program.account.user.all([\n            {\n                memcmp: {\n                    offset: 8,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */ bytes: bs58_1.default.encode(authority.toBuffer())\n                }\n            }\n        ]);\n        return programAccounts.map((programAccount)=>programAccount.account).sort((a, b)=>a.subAccountId - b.subAccountId);\n    }\n    async getReferredUserStatsAccountsByReferrer(referrer) {\n        const programAccounts = await this.program.account.userStats.all([\n            {\n                memcmp: {\n                    offset: 40,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */ bytes: bs58_1.default.encode(referrer.toBuffer())\n                }\n            }\n        ]);\n        return programAccounts.map((programAccount)=>programAccount.account);\n    }\n    async getReferrerNameAccountsForAuthority(authority) {\n        const programAccounts = await this.program.account.referrerName.all([\n            {\n                memcmp: {\n                    offset: 8,\n                    /** data to match, as base-58 encoded string and limited to less than 129 bytes */ bytes: bs58_1.default.encode(authority.toBuffer())\n                }\n            }\n        ]);\n        return programAccounts.map((programAccount)=>programAccount.account);\n    }\n    async deleteUser(subAccountId = 0, txParams) {\n        var _a;\n        const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.wallet.publicKey, subAccountId);\n        const ix = await this.program.instruction.deleteUser({\n            accounts: {\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                state: await this.getStatePublicKey()\n            }\n        });\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(ix, txParams), [], this.opts);\n        const userMapKey = this.getUserMapKey(subAccountId, this.wallet.publicKey);\n        await ((_a = this.users.get(userMapKey)) === null || _a === void 0 ? void 0 : _a.unsubscribe());\n        this.users.delete(userMapKey);\n        return txSig;\n    }\n    getUser(subAccountId, authority) {\n        subAccountId = subAccountId !== null && subAccountId !== void 0 ? subAccountId : this.activeSubAccountId;\n        authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        const userMapKey = this.getUserMapKey(subAccountId, authority);\n        if (!this.users.has(userMapKey)) {\n            throw new Error(`DriftClient has no user for user id ${userMapKey}`);\n        }\n        return this.users.get(userMapKey);\n    }\n    hasUser(subAccountId, authority) {\n        subAccountId = subAccountId !== null && subAccountId !== void 0 ? subAccountId : this.activeSubAccountId;\n        authority = authority !== null && authority !== void 0 ? authority : this.authority;\n        const userMapKey = this.getUserMapKey(subAccountId, authority);\n        return this.users.has(userMapKey);\n    }\n    getUsers() {\n        // delegate users get added to the end\n        return [\n            ...this.users.values()\n        ].filter((acct)=>acct.getUserAccount().authority.equals(this.wallet.publicKey)).concat([\n            ...this.users.values()\n        ].filter((acct)=>!acct.getUserAccount().authority.equals(this.wallet.publicKey)));\n    }\n    getUserStats() {\n        return this.userStats;\n    }\n    async fetchReferrerNameAccount(name) {\n        const nameBuffer = (0, userName_1.encodeName)(name);\n        const referrerNameAccountPublicKey = (0, pda_1.getReferrerNamePublicKeySync)(this.program.programId, nameBuffer);\n        return await this.program.account.referrerName.fetch(referrerNameAccountPublicKey);\n    }\n    getUserStatsAccountPublicKey() {\n        if (this.userStatsAccountPublicKey) {\n            return this.userStatsAccountPublicKey;\n        }\n        this.userStatsAccountPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, this.authority);\n        return this.userStatsAccountPublicKey;\n    }\n    async getUserAccountPublicKey(subAccountId, authority) {\n        return this.getUser(subAccountId, authority).userAccountPublicKey;\n    }\n    getUserAccount(subAccountId, authority) {\n        return this.getUser(subAccountId, authority).getUserAccount();\n    }\n    /**\n     * Forces a fetch to rpc before returning accounts. Useful for anchor tests.\n     * @param subAccountId\n     */ async forceGetUserAccount(subAccountId) {\n        await this.getUser(subAccountId).fetchAccounts();\n        return this.getUser(subAccountId).getUserAccount();\n    }\n    getUserAccountAndSlot(subAccountId) {\n        return this.getUser(subAccountId).getUserAccountAndSlot();\n    }\n    getSpotPosition(marketIndex) {\n        return this.getUserAccount().spotPositions.find((spotPosition)=>spotPosition.marketIndex === marketIndex);\n    }\n    getQuoteAssetTokenAmount() {\n        return this.getTokenAmount(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n    }\n    /**\n     * Returns the token amount for a given market. The spot market precision is based on the token mint decimals.\n     * Positive if it is a deposit, negative if it is a borrow.\n     * @param marketIndex\n     */ getTokenAmount(marketIndex) {\n        const spotPosition = this.getSpotPosition(marketIndex);\n        if (spotPosition === undefined) {\n            return numericConstants_1.ZERO;\n        }\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        return (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarket, spotPosition.balanceType), spotPosition.balanceType);\n    }\n    /**\n     * Converts an amount to the spot precision for a given market. The spot market precision is based on the token mint decimals.\n     * @param marketIndex\n     * @param amount\n     */ convertToSpotPrecision(marketIndex, amount) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        return (0, spotMarket_1.castNumberToSpotPrecision)(amount, spotMarket);\n    }\n    /**\n     * Converts an amount to the perp precision. The perp market precision is {@link BASE_PRECISION} (1e9).\n     * @param amount\n     */ convertToPerpPrecision(amount) {\n        amount = typeof amount === \"number\" ? new anchor_1.BN(amount) : amount;\n        return amount.mul(numericConstants_1.BASE_PRECISION);\n    }\n    /**\n     * Converts an amount to the price precision. The perp market precision is {@link PRICE_PRECISION} (1e6).\n     * @param amount\n     */ convertToPricePrecision(amount) {\n        amount = typeof amount === \"number\" ? new anchor_1.BN(amount) : amount;\n        return amount.mul(numericConstants_1.PRICE_PRECISION);\n    }\n    /**\n     * Each drift instruction must include perp and sport market accounts in the ix remaining accounts.\n     * Use this function to force a subset of markets to be included in the remaining accounts for every ix\n     *\n     * @param perpMarketIndexes\n     * @param spotMarketIndexes\n     */ mustIncludeMarketsInIx({ perpMarketIndexes, spotMarketIndexes }) {\n        perpMarketIndexes.forEach((perpMarketIndex)=>{\n            this.mustIncludePerpMarketIndexes.add(perpMarketIndex);\n        });\n        spotMarketIndexes.forEach((spotMarketIndex)=>{\n            this.mustIncludeSpotMarketIndexes.add(spotMarketIndex);\n        });\n    }\n    getRemainingAccounts(params) {\n        var _a;\n        const { oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap } = this.getRemainingAccountMapsForUsers(params.userAccounts);\n        if (params.useMarketLastSlotCache) {\n            const lastUserSlot = (_a = this.getUserAccountAndSlot()) === null || _a === void 0 ? void 0 : _a.slot;\n            for (const [marketIndex, slot] of this.perpMarketLastSlotCache.entries()){\n                // if cache has more recent slot than user positions account slot, add market to remaining accounts\n                // otherwise remove from slot\n                if (slot > lastUserSlot) {\n                    this.addPerpMarketToRemainingAccountMaps(marketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n                } else {\n                    this.perpMarketLastSlotCache.delete(marketIndex);\n                }\n            }\n            for (const [marketIndex, slot] of this.spotMarketLastSlotCache.entries()){\n                // if cache has more recent slot than user positions account slot, add market to remaining accounts\n                // otherwise remove from slot\n                if (slot > lastUserSlot) {\n                    this.addSpotMarketToRemainingAccountMaps(marketIndex, false, oracleAccountMap, spotMarketAccountMap);\n                } else {\n                    this.spotMarketLastSlotCache.delete(marketIndex);\n                }\n            }\n        }\n        if (params.readablePerpMarketIndex !== undefined) {\n            const readablePerpMarketIndexes = Array.isArray(params.readablePerpMarketIndex) ? params.readablePerpMarketIndex : [\n                params.readablePerpMarketIndex\n            ];\n            for (const marketIndex of readablePerpMarketIndexes){\n                this.addPerpMarketToRemainingAccountMaps(marketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n            }\n        }\n        for (const perpMarketIndex of this.mustIncludePerpMarketIndexes.values()){\n            this.addPerpMarketToRemainingAccountMaps(perpMarketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n        }\n        if (params.readableSpotMarketIndexes !== undefined) {\n            for (const readableSpotMarketIndex of params.readableSpotMarketIndexes){\n                this.addSpotMarketToRemainingAccountMaps(readableSpotMarketIndex, false, oracleAccountMap, spotMarketAccountMap);\n            }\n        }\n        for (const spotMarketIndex of this.mustIncludeSpotMarketIndexes.values()){\n            this.addSpotMarketToRemainingAccountMaps(spotMarketIndex, false, oracleAccountMap, spotMarketAccountMap);\n        }\n        if (params.writablePerpMarketIndexes !== undefined) {\n            for (const writablePerpMarketIndex of params.writablePerpMarketIndexes){\n                this.addPerpMarketToRemainingAccountMaps(writablePerpMarketIndex, true, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n            }\n        }\n        if (params.writableSpotMarketIndexes !== undefined) {\n            for (const writableSpotMarketIndex of params.writableSpotMarketIndexes){\n                this.addSpotMarketToRemainingAccountMaps(writableSpotMarketIndex, true, oracleAccountMap, spotMarketAccountMap);\n            }\n        }\n        return [\n            ...oracleAccountMap.values(),\n            ...spotMarketAccountMap.values(),\n            ...perpMarketAccountMap.values()\n        ];\n    }\n    addPerpMarketToRemainingAccountMaps(marketIndex, writable, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap) {\n        const perpMarketAccount = this.getPerpMarketAccount(marketIndex);\n        perpMarketAccountMap.set(marketIndex, {\n            pubkey: perpMarketAccount.pubkey,\n            isSigner: false,\n            isWritable: writable\n        });\n        oracleAccountMap.set(perpMarketAccount.amm.oracle.toString(), {\n            pubkey: perpMarketAccount.amm.oracle,\n            isSigner: false,\n            isWritable: false\n        });\n        this.addSpotMarketToRemainingAccountMaps(perpMarketAccount.quoteSpotMarketIndex, false, oracleAccountMap, spotMarketAccountMap);\n    }\n    addSpotMarketToRemainingAccountMaps(marketIndex, writable, oracleAccountMap, spotMarketAccountMap) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        spotMarketAccountMap.set(spotMarketAccount.marketIndex, {\n            pubkey: spotMarketAccount.pubkey,\n            isSigner: false,\n            isWritable: writable\n        });\n        if (!spotMarketAccount.oracle.equals(web3_js_1.PublicKey.default)) {\n            oracleAccountMap.set(spotMarketAccount.oracle.toString(), {\n                pubkey: spotMarketAccount.oracle,\n                isSigner: false,\n                isWritable: false\n            });\n        }\n    }\n    getRemainingAccountMapsForUsers(userAccounts) {\n        const oracleAccountMap = new Map();\n        const spotMarketAccountMap = new Map();\n        const perpMarketAccountMap = new Map();\n        for (const userAccount of userAccounts){\n            for (const spotPosition of userAccount.spotPositions){\n                if (!(0, spotPosition_1.isSpotPositionAvailable)(spotPosition)) {\n                    this.addSpotMarketToRemainingAccountMaps(spotPosition.marketIndex, false, oracleAccountMap, spotMarketAccountMap);\n                    if (!spotPosition.openAsks.eq(numericConstants_1.ZERO) || !spotPosition.openBids.eq(numericConstants_1.ZERO)) {\n                        this.addSpotMarketToRemainingAccountMaps(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, false, oracleAccountMap, spotMarketAccountMap);\n                    }\n                }\n            }\n            for (const position of userAccount.perpPositions){\n                if (!(0, position_1.positionIsAvailable)(position)) {\n                    this.addPerpMarketToRemainingAccountMaps(position.marketIndex, false, oracleAccountMap, spotMarketAccountMap, perpMarketAccountMap);\n                }\n            }\n        }\n        return {\n            oracleAccountMap,\n            spotMarketAccountMap,\n            perpMarketAccountMap\n        };\n    }\n    getOrder(orderId) {\n        var _a;\n        return (_a = this.getUserAccount()) === null || _a === void 0 ? void 0 : _a.orders.find((order)=>order.orderId === orderId);\n    }\n    getOrderByUserId(userOrderId) {\n        var _a;\n        return (_a = this.getUserAccount()) === null || _a === void 0 ? void 0 : _a.orders.find((order)=>order.userOrderId === userOrderId);\n    }\n    /**\n     * Get the associated token address for the given spot market\n     * @param marketIndex\n     * @param useNative\n     */ async getAssociatedTokenAccount(marketIndex, useNative = true) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        if (useNative && spotMarket.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT)) {\n            return this.wallet.publicKey;\n        }\n        const mint = spotMarket.mint;\n        return await (0, spl_token_1.getAssociatedTokenAddress)(mint, this.wallet.publicKey);\n    }\n    createAssociatedTokenAccountIdempotentInstruction(account, payer, owner, mint) {\n        return new web3_js_1.TransactionInstruction({\n            keys: [\n                {\n                    pubkey: payer,\n                    isSigner: true,\n                    isWritable: true\n                },\n                {\n                    pubkey: account,\n                    isSigner: false,\n                    isWritable: true\n                },\n                {\n                    pubkey: owner,\n                    isSigner: false,\n                    isWritable: false\n                },\n                {\n                    pubkey: mint,\n                    isSigner: false,\n                    isWritable: false\n                },\n                {\n                    pubkey: anchor.web3.SystemProgram.programId,\n                    isSigner: false,\n                    isWritable: false\n                },\n                {\n                    pubkey: spl_token_1.TOKEN_PROGRAM_ID,\n                    isSigner: false,\n                    isWritable: false\n                }\n            ],\n            programId: spl_token_1.ASSOCIATED_TOKEN_PROGRAM_ID,\n            data: Buffer.from([\n                0x1\n            ])\n        });\n    }\n    /**\n     * Deposit funds into the given spot market\n     *\n     * @param amount\n     * @param marketIndex\n     * @param associatedTokenAccount can be the wallet public key if using native sol\n     * @param subAccountId\n     * @param reduceOnly\n     */ async deposit(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly = false) {\n        const tx = new web3_js_1.Transaction();\n        tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n            units: 600000\n        }));\n        const additionalSigners = [];\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const signerAuthority = this.wallet.publicKey;\n        const createWSOLTokenAccount = isSolMarket && associatedTokenAccount.equals(signerAuthority);\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(amount, true);\n            associatedTokenAccount = pubkey;\n            ixs.forEach((ix)=>{\n                tx.add(ix);\n            });\n        }\n        const depositCollateralIx = await this.getDepositInstruction(amount, marketIndex, associatedTokenAccount, subAccountId, reduceOnly, true);\n        tx.add(depositCollateralIx);\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            tx.add((0, spl_token_1.createCloseAccountInstruction)(associatedTokenAccount, signerAuthority, signerAuthority, []));\n        }\n        const { txSig, slot } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        this.spotMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getDepositInstruction(amount, marketIndex, userTokenAccount, subAccountId, reduceOnly = false, userInitialized = true) {\n        const userAccountPublicKey = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.authority, subAccountId !== null && subAccountId !== void 0 ? subAccountId : this.activeSubAccountId);\n        let remainingAccounts = [];\n        if (userInitialized) {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [\n                    await this.forceGetUserAccount()\n                ],\n                useMarketLastSlotCache: true,\n                writableSpotMarketIndexes: [\n                    marketIndex\n                ]\n            });\n        } else {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [],\n                writableSpotMarketIndexes: [\n                    marketIndex\n                ]\n            });\n        }\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        return await this.program.instruction.deposit(marketIndex, amount, reduceOnly, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                spotMarketVault: spotMarketAccount.vault,\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                userTokenAccount: userTokenAccount,\n                authority: this.wallet.publicKey,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts\n        });\n    }\n    async checkIfAccountExists(account) {\n        try {\n            const accountInfo = await this.connection.getAccountInfo(account);\n            return accountInfo != null;\n        } catch (e) {\n            // Doesn't already exist\n            return false;\n        }\n    }\n    async getWrappedSolAccountCreationIxs(amount, includeRent) {\n        const authority = this.wallet.publicKey;\n        // Generate a random seed for wrappedSolAccount.\n        const seed = web3_js_1.Keypair.generate().publicKey.toBase58().slice(0, 32);\n        // Calculate a publicKey that will be controlled by the authority.\n        const wrappedSolAccount = await web3_js_1.PublicKey.createWithSeed(authority, seed, spl_token_1.TOKEN_PROGRAM_ID);\n        const result = {\n            ixs: [],\n            signers: [],\n            pubkey: wrappedSolAccount\n        };\n        const rentSpaceLamports = new anchor_1.BN(web3_js_1.LAMPORTS_PER_SOL / 100);\n        const lamports = includeRent ? amount.add(rentSpaceLamports) : rentSpaceLamports;\n        result.ixs.push(web3_js_1.SystemProgram.createAccountWithSeed({\n            fromPubkey: authority,\n            basePubkey: authority,\n            seed,\n            newAccountPubkey: wrappedSolAccount,\n            lamports: lamports.toNumber(),\n            space: 165,\n            programId: spl_token_1.TOKEN_PROGRAM_ID\n        }));\n        result.ixs.push((0, spl_token_1.createInitializeAccountInstruction)(wrappedSolAccount, spotMarkets_1.WRAPPED_SOL_MINT, authority));\n        return result;\n    }\n    getAssociatedTokenAccountCreationIx(tokenMintAddress, associatedTokenAddress) {\n        return (0, spl_token_1.createAssociatedTokenAccountInstruction)(this.wallet.publicKey, associatedTokenAddress, this.wallet.publicKey, tokenMintAddress);\n    }\n    /**\n     * Creates the User account for a user, and deposits some initial collateral\n     * @param amount\n     * @param userTokenAccount\n     * @param marketIndex\n     * @param subAccountId\n     * @param name\n     * @param fromSubAccountId\n     * @returns\n     */ async initializeUserAccountAndDepositCollateral(amount, userTokenAccount, marketIndex = 0, subAccountId = 0, name = userName_1.DEFAULT_USER_NAME, fromSubAccountId, referrerInfo, txParams) {\n        var _a;\n        const [userAccountPublicKey, initializeUserAccountIx] = await this.getInitializeUserInstructions(subAccountId, name, referrerInfo);\n        const additionalSigners = [];\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarket.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const tx = new web3_js_1.Transaction();\n        tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n            units: (_a = txParams === null || txParams === void 0 ? void 0 : txParams.computeUnits) !== null && _a !== void 0 ? _a : 600000\n        }));\n        if (txParams === null || txParams === void 0 ? void 0 : txParams.computeUnitsPrice) {\n            tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n                microLamports: txParams.computeUnitsPrice\n            }));\n        }\n        const authority = this.wallet.publicKey;\n        const isFromSubaccount = fromSubAccountId !== null && fromSubAccountId !== undefined && !isNaN(fromSubAccountId);\n        const createWSOLTokenAccount = isSolMarket && userTokenAccount.equals(authority) && !isFromSubaccount;\n        if (createWSOLTokenAccount) {\n            const { ixs: startIxs, pubkey } = await this.getWrappedSolAccountCreationIxs(amount, true);\n            userTokenAccount = pubkey;\n            startIxs.forEach((ix)=>{\n                tx.add(ix);\n            });\n        }\n        const depositCollateralIx = isFromSubaccount ? await this.getTransferDepositIx(amount, marketIndex, fromSubAccountId, subAccountId) : await this.getDepositInstruction(amount, marketIndex, userTokenAccount, subAccountId, false, false);\n        if (subAccountId === 0) {\n            if (!await this.checkIfAccountExists(this.getUserStatsAccountPublicKey())) {\n                tx.add(await this.getInitializeUserStatsIx());\n            }\n        }\n        tx.add(initializeUserAccountIx).add(depositCollateralIx);\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            tx.add((0, spl_token_1.createCloseAccountInstruction)(userTokenAccount, authority, authority, []));\n        }\n        const { txSig, slot } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        this.spotMarketLastSlotCache.set(marketIndex, slot);\n        await this.addUser(subAccountId);\n        return [\n            txSig,\n            userAccountPublicKey\n        ];\n    }\n    async initializeUserAccountForDevnet(subAccountId = 0, name = userName_1.DEFAULT_USER_NAME, marketIndex, tokenFaucet, amount, referrerInfo) {\n        const [associateTokenPublicKey, createAssociatedAccountIx, mintToIx] = await tokenFaucet.createAssociatedTokenAccountAndMintToInstructions(this.wallet.publicKey, amount);\n        const [userAccountPublicKey, initializeUserAccountIx] = await this.getInitializeUserInstructions(subAccountId, name, referrerInfo);\n        const depositCollateralIx = await this.getDepositInstruction(amount, marketIndex, associateTokenPublicKey, subAccountId, false, false);\n        const tx = new web3_js_1.Transaction().add(createAssociatedAccountIx).add(mintToIx);\n        if (subAccountId === 0) {\n            if (!await this.checkIfAccountExists(this.getUserStatsAccountPublicKey())) {\n                tx.add(await this.getInitializeUserStatsIx());\n            }\n        }\n        tx.add(initializeUserAccountIx).add(depositCollateralIx);\n        const txSig = await this.program.provider.sendAndConfirm(tx, []);\n        await this.addUser(subAccountId);\n        return [\n            txSig,\n            userAccountPublicKey\n        ];\n    }\n    /**\n     * Withdraws from a user account. If deposit doesn't already exist, creates a borrow\n     * @param amount\n     * @param marketIndex\n     * @param associatedTokenAddress - the token account to withdraw to. can be the wallet public key if using native sol\n     * @param reduceOnly\n     */ async withdraw(amount, marketIndex, associatedTokenAddress, reduceOnly = false) {\n        const tx = new web3_js_1.Transaction();\n        tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n            units: 600000\n        }));\n        const additionalSigners = [];\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const authority = this.wallet.publicKey;\n        const createWSOLTokenAccount = isSolMarket && associatedTokenAddress.equals(authority);\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(amount, false);\n            associatedTokenAddress = pubkey;\n            ixs.forEach((ix)=>{\n                tx.add(ix);\n            });\n        } else {\n            const accountExists = await this.checkIfAccountExists(associatedTokenAddress);\n            if (!accountExists) {\n                const createAssociatedTokenAccountIx = this.getAssociatedTokenAccountCreationIx(spotMarketAccount.mint, associatedTokenAddress);\n                tx.add(createAssociatedTokenAccountIx);\n            }\n        }\n        const withdrawCollateral = await this.getWithdrawIx(amount, spotMarketAccount.marketIndex, associatedTokenAddress, reduceOnly);\n        tx.add(withdrawCollateral);\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            tx.add((0, spl_token_1.createCloseAccountInstruction)(associatedTokenAddress, authority, authority, []));\n        }\n        const { txSig, slot } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        this.spotMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getWithdrawIx(amount, marketIndex, userTokenAccount, reduceOnly = false) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                marketIndex\n            ],\n            readableSpotMarketIndexes: [\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        return await this.program.instruction.withdraw(marketIndex, amount, reduceOnly, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                spotMarketVault: spotMarketAccount.vault,\n                driftSigner: this.getSignerPublicKey(),\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                userTokenAccount: userTokenAccount,\n                authority: this.wallet.publicKey,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts\n        });\n    }\n    /**\n     * Withdraws from the fromSubAccount and deposits into the toSubAccount\n     * @param amount\n     * @param marketIndex\n     * @param fromSubAccountId\n     * @param toSubAccountId\n     * @param txParams\n     */ async transferDeposit(amount, marketIndex, fromSubAccountId, toSubAccountId, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getTransferDepositIx(amount, marketIndex, fromSubAccountId, toSubAccountId), txParams), [], this.opts);\n        if (fromSubAccountId === this.activeSubAccountId || toSubAccountId === this.activeSubAccountId) {\n            this.spotMarketLastSlotCache.set(marketIndex, slot);\n        }\n        return txSig;\n    }\n    async getTransferDepositIx(amount, marketIndex, fromSubAccountId, toSubAccountId) {\n        const fromUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, fromSubAccountId);\n        const toUser = await (0, pda_1.getUserAccountPublicKey)(this.program.programId, this.wallet.publicKey, toSubAccountId);\n        let remainingAccounts;\n        const userMapKey = this.getUserMapKey(fromSubAccountId, this.wallet.publicKey);\n        if (this.users.has(userMapKey)) {\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [\n                    this.users.get(userMapKey).getUserAccount()\n                ],\n                useMarketLastSlotCache: true,\n                writableSpotMarketIndexes: [\n                    marketIndex\n                ]\n            });\n        } else {\n            const userAccountPublicKey = (0, pda_1.getUserAccountPublicKeySync)(this.program.programId, this.authority, fromSubAccountId);\n            const fromUserAccount = await this.program.account.user.fetch(userAccountPublicKey);\n            remainingAccounts = this.getRemainingAccounts({\n                userAccounts: [\n                    fromUserAccount\n                ],\n                useMarketLastSlotCache: true,\n                writableSpotMarketIndexes: [\n                    marketIndex\n                ]\n            });\n        }\n        return await this.program.instruction.transferDeposit(marketIndex, amount, {\n            accounts: {\n                authority: this.wallet.publicKey,\n                fromUser,\n                toUser,\n                userStats: this.getUserStatsAccountPublicKey(),\n                state: await this.getStatePublicKey(),\n                spotMarketVault: this.getSpotMarketAccount(marketIndex).vault\n            },\n            remainingAccounts\n        });\n    }\n    async updateSpotMarketCumulativeInterest(marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.updateSpotMarketCumulativeInterestIx(marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async updateSpotMarketCumulativeInterestIx(marketIndex) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        return await this.program.instruction.updateSpotMarketCumulativeInterest({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                spotMarketVault: spotMarket.vault,\n                oracle: spotMarket.oracle\n            }\n        });\n    }\n    async settleLP(settleeUserAccountPublicKey, marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.settleLPIx(settleeUserAccountPublicKey, marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async settleLPIx(settleeUserAccountPublicKey, marketIndex) {\n        const settleeUserAccount = await this.program.account.user.fetch(settleeUserAccountPublicKey);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                settleeUserAccount\n            ],\n            writablePerpMarketIndexes: [\n                marketIndex\n            ]\n        });\n        return this.program.instruction.settleLp(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: settleeUserAccountPublicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async removePerpLpShares(marketIndex, sharesToBurn, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getRemovePerpLpSharesIx(marketIndex, sharesToBurn), txParams), [], this.opts);\n        return txSig;\n    }\n    async removePerpLpSharesInExpiringMarket(marketIndex, userAccountPublicKey, sharesToBurn, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getRemovePerpLpSharesInExpiringMarket(marketIndex, userAccountPublicKey, sharesToBurn), txParams), [], this.opts);\n        return txSig;\n    }\n    async getRemovePerpLpSharesInExpiringMarket(marketIndex, userAccountPublicKey, sharesToBurn) {\n        const userAccount = await this.program.account.user.fetch(userAccountPublicKey);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                userAccount\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [\n                marketIndex\n            ]\n        });\n        if (sharesToBurn == undefined) {\n            const perpPosition = userAccount.perpPositions.filter((position)=>position.marketIndex === marketIndex)[0];\n            sharesToBurn = perpPosition.lpShares;\n            console.log(\"burning lp shares:\", sharesToBurn.toString());\n        }\n        return this.program.instruction.removePerpLpSharesInExpiringMarket(sharesToBurn, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async getRemovePerpLpSharesIx(marketIndex, sharesToBurn) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [\n                marketIndex\n            ]\n        });\n        if (sharesToBurn == undefined) {\n            const userAccount = this.getUserAccount();\n            const perpPosition = userAccount.perpPositions.filter((position)=>position.marketIndex === marketIndex)[0];\n            sharesToBurn = perpPosition.lpShares;\n            console.log(\"burning lp shares:\", sharesToBurn.toString());\n        }\n        return this.program.instruction.removePerpLpShares(sharesToBurn, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async addPerpLpShares(amount, marketIndex, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getAddPerpLpSharesIx(amount, marketIndex), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getAddPerpLpSharesIx(amount, marketIndex) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [\n                marketIndex\n            ]\n        });\n        return this.program.instruction.addPerpLpShares(amount, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    getQuoteValuePerLpShare(marketIndex) {\n        const perpMarketAccount = this.getPerpMarketAccount(marketIndex);\n        const openBids = anchor_1.BN.max(perpMarketAccount.amm.baseAssetReserve.sub(perpMarketAccount.amm.minBaseAssetReserve), numericConstants_1.ZERO);\n        const openAsks = anchor_1.BN.max(perpMarketAccount.amm.maxBaseAssetReserve.sub(perpMarketAccount.amm.baseAssetReserve), numericConstants_1.ZERO);\n        const oraclePriceData = this.getOracleDataForPerpMarket(marketIndex);\n        const maxOpenBidsAsks = anchor_1.BN.max(openBids, openAsks);\n        const quoteValuePerLpShare = maxOpenBidsAsks.mul(oraclePriceData.price).mul(numericConstants_1.QUOTE_PRECISION).div(numericConstants_1.PRICE_PRECISION).div(perpMarketAccount.amm.sqrtK);\n        return quoteValuePerLpShare;\n    }\n    /**\n     * @deprecated use {@link placePerpOrder} or {@link placeAndTakePerpOrder} instead\n     */ async openPosition(direction, amount, marketIndex, limitPrice) {\n        return await this.placeAndTakePerpOrder({\n            orderType: types_1.OrderType.MARKET,\n            marketIndex,\n            direction,\n            baseAssetAmount: amount,\n            price: limitPrice\n        });\n    }\n    async sendSignedTx(tx) {\n        const { txSig } = await this.sendTransaction(tx, undefined, this.opts, true);\n        return txSig;\n    }\n    /**\n     * Sends a market order and returns a signed tx which can fill the order against the vamm, which the caller can use to fill their own order if required.\n     * @param orderParams\n     * @param userAccountPublicKey\n     * @param userAccount\n     * @param makerInfo\n     * @param txParams\n     * @param bracketOrdersParams\n     * @returns\n     */ async sendMarketOrderAndGetSignedFillTx(orderParams, userAccountPublicKey, userAccount, makerInfo, txParams, bracketOrdersParams = new Array(), referrerInfo, useVersionedTx = true) {\n        var _a, _b;\n        const marketIndex = orderParams.marketIndex;\n        const orderId = userAccount.nextOrderId;\n        const bracketOrderIxs = [];\n        const placePerpOrderIx = await this.getPlacePerpOrderIx(orderParams);\n        for (const bracketOrderParams of bracketOrdersParams){\n            const placeBracketOrderIx = await this.getPlacePerpOrderIx(bracketOrderParams);\n            bracketOrderIxs.push(placeBracketOrderIx);\n        }\n        const fillPerpOrderIx = await this.getFillPerpOrderIx(userAccountPublicKey, userAccount, {\n            orderId,\n            marketIndex\n        }, makerInfo, referrerInfo);\n        const walletSupportsVersionedTxns = //@ts-ignore\n        (_b = (_a = this.wallet.supportedTransactionVersions) === null || _a === void 0 ? void 0 : _a.size) !== null && _b !== void 0 ? _b : 0 > 1;\n        // use versioned transactions if there is a lookup table account and wallet is compatible\n        if (walletSupportsVersionedTxns && useVersionedTx) {\n            const versionedMarketOrderTx = await this.buildTransaction([\n                placePerpOrderIx\n            ].concat(bracketOrderIxs), txParams, 0);\n            const versionedFillTx = await this.buildTransaction([\n                fillPerpOrderIx\n            ], txParams, 0);\n            const [signedVersionedMarketOrderTx, signedVersionedFillTx] = await this.provider.wallet.signAllTransactions([\n                //@ts-ignore\n                versionedMarketOrderTx,\n                //@ts-ignore\n                versionedFillTx\n            ]);\n            const { txSig, slot } = await this.txSender.sendRawTransaction(signedVersionedMarketOrderTx.serialize(), this.opts);\n            this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n            return {\n                txSig,\n                signedFillTx: signedVersionedFillTx\n            };\n        } else {\n            const marketOrderTx = (0, utils_1.wrapInTx)(placePerpOrderIx, txParams === null || txParams === void 0 ? void 0 : txParams.computeUnits, txParams === null || txParams === void 0 ? void 0 : txParams.computeUnitsPrice);\n            if (bracketOrderIxs.length > 0) {\n                marketOrderTx.add(...bracketOrderIxs);\n            }\n            const fillTx = (0, utils_1.wrapInTx)(fillPerpOrderIx, txParams === null || txParams === void 0 ? void 0 : txParams.computeUnits, txParams === null || txParams === void 0 ? void 0 : txParams.computeUnitsPrice);\n            // Apply the latest blockhash to the txs so that we can sign before sending them\n            const currentBlockHash = (await this.connection.getLatestBlockhash(\"finalized\")).blockhash;\n            marketOrderTx.recentBlockhash = currentBlockHash;\n            fillTx.recentBlockhash = currentBlockHash;\n            marketOrderTx.feePayer = userAccount.authority;\n            fillTx.feePayer = userAccount.authority;\n            const [signedMarketOrderTx, signedFillTx] = await this.provider.wallet.signAllTransactions([\n                marketOrderTx,\n                fillTx\n            ]);\n            const { txSig, slot } = await this.sendTransaction(signedMarketOrderTx, [], this.opts, true);\n            this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n            return {\n                txSig,\n                signedFillTx\n            };\n        }\n    }\n    async placePerpOrder(orderParams, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlacePerpOrderIx(orderParams), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return txSig;\n    }\n    async getPlacePerpOrderIx(orderParams) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, {\n            marketType: types_1.MarketType.PERP\n        });\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            readablePerpMarketIndex: orderParams.marketIndex\n        });\n        return await this.program.instruction.placePerpOrder(orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async updateAMMs(marketIndexes, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateAMMsIx(marketIndexes), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateAMMsIx(marketIndexes) {\n        for(let i = marketIndexes.length; i < 5; i++){\n            marketIndexes.push(100);\n        }\n        const marketAccountInfos = [];\n        const oracleAccountInfos = [];\n        for (const marketIndex of marketIndexes){\n            if (marketIndex !== 100) {\n                const market = this.getPerpMarketAccount(marketIndex);\n                marketAccountInfos.push({\n                    pubkey: market.pubkey,\n                    isWritable: true,\n                    isSigner: false\n                });\n                oracleAccountInfos.push({\n                    pubkey: market.amm.oracle,\n                    isWritable: false,\n                    isSigner: false\n                });\n            }\n        }\n        const remainingAccounts = oracleAccountInfos.concat(marketAccountInfos);\n        return await this.program.instruction.updateAmms(marketIndexes, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async settleExpiredMarket(marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getSettleExpiredMarketIx(marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getSettleExpiredMarketIx(marketIndex) {\n        const marketAccountInfos = [];\n        const oracleAccountInfos = [];\n        const spotMarketAccountInfos = [];\n        const market = this.getPerpMarketAccount(marketIndex);\n        marketAccountInfos.push({\n            pubkey: market.pubkey,\n            isWritable: true,\n            isSigner: false\n        });\n        oracleAccountInfos.push({\n            pubkey: market.amm.oracle,\n            isWritable: false,\n            isSigner: false\n        });\n        spotMarketAccountInfos.push({\n            pubkey: this.getSpotMarketAccount(numericConstants_1.QUOTE_SPOT_MARKET_INDEX).pubkey,\n            isSigner: false,\n            isWritable: true\n        });\n        const remainingAccounts = oracleAccountInfos.concat(spotMarketAccountInfos).concat(marketAccountInfos);\n        return await this.program.instruction.settleExpiredMarket(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async settleExpiredMarketPoolsToRevenuePool(perpMarketIndex, txParams) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        const spotMarketPublicKey = await (0, pda_1.getSpotMarketPublicKey)(this.program.programId, numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        const ix = await this.program.instruction.settleExpiredMarketPoolsToRevenuePool({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                admin: this.wallet.publicKey,\n                spotMarket: spotMarketPublicKey,\n                perpMarket: perpMarketPublicKey\n            }\n        });\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(ix, txParams), [], this.opts);\n        return txSig;\n    }\n    async cancelOrder(orderId, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrderIx(orderId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getCancelOrderIx(orderId) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true\n        });\n        return await this.program.instruction.cancelOrder(orderId !== null && orderId !== void 0 ? orderId : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async cancelOrderByUserId(userOrderId, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrderByUserIdIx(userOrderId), txParams), [], this.opts);\n        return txSig;\n    }\n    async getCancelOrderByUserIdIx(userOrderId) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const order = this.getOrderByUserId(userOrderId);\n        const oracle = this.getPerpMarketAccount(order.marketIndex).amm.oracle;\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true\n        });\n        return await this.program.instruction.cancelOrderByUserId(userOrderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey,\n                oracle\n            },\n            remainingAccounts\n        });\n    }\n    async cancelOrdersByIds(orderIds, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrdersByIdsIx(orderIds), txParams), [], this.opts);\n        return txSig;\n    }\n    async getCancelOrdersByIdsIx(orderIds) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true\n        });\n        return await this.program.instruction.cancelOrdersByIds(orderIds, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async cancelOrders(marketType, marketIndex, direction, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getCancelOrdersIx(marketType, marketIndex, direction), txParams), [], this.opts);\n        return txSig;\n    }\n    async getCancelOrdersIx(marketType, marketIndex, direction) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        let readablePerpMarketIndex = undefined;\n        let readableSpotMarketIndexes = undefined;\n        if (marketIndex) {\n            if (marketType && (0, types_1.isVariant)(marketType, \"perp\")) {\n                readablePerpMarketIndex = marketIndex;\n            } else if (marketType && (0, types_1.isVariant)(marketType, \"spot\")) {\n                readableSpotMarketIndexes = [\n                    marketIndex\n                ];\n            }\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            readablePerpMarketIndex,\n            readableSpotMarketIndexes,\n            useMarketLastSlotCache: true\n        });\n        return await this.program.instruction.cancelOrders(marketType !== null && marketType !== void 0 ? marketType : null, marketIndex !== null && marketIndex !== void 0 ? marketIndex : null, direction !== null && direction !== void 0 ? direction : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async cancelAndPlaceOrders(cancelOrderParams, placeOrderParams, txParams) {\n        const ixs = [\n            await this.getCancelOrdersIx(cancelOrderParams.marketType, cancelOrderParams.marketIndex, cancelOrderParams.direction),\n            await this.getPlaceOrdersIx(placeOrderParams)\n        ];\n        const tx = await this.buildTransaction(ixs, txParams);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async placeOrders(params, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceOrdersIx(params), txParams), [], this.opts);\n        return txSig;\n    }\n    async getPlaceOrdersIx(params) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const readablePerpMarketIndex = [];\n        const readableSpotMarketIndexes = [];\n        for (const param of params){\n            if (!param.marketType) {\n                throw new Error(\"must set param.marketType\");\n            }\n            if ((0, types_1.isVariant)(param.marketType, \"perp\")) {\n                readablePerpMarketIndex.push(param.marketIndex);\n            } else {\n                readableSpotMarketIndexes.push(param.marketIndex);\n            }\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            readablePerpMarketIndex,\n            readableSpotMarketIndexes,\n            useMarketLastSlotCache: true\n        });\n        return await this.program.instruction.placeOrders(params, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async fillPerpOrder(userAccountPublicKey, user, order, makerInfo, referrerInfo, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getFillPerpOrderIx(userAccountPublicKey, user, order, makerInfo, referrerInfo), txParams), [], this.opts);\n        return txSig;\n    }\n    async getFillPerpOrderIx(userAccountPublicKey, userAccount, order, makerInfo, referrerInfo) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const fillerPublicKey = await this.getUserAccountPublicKey();\n        const fillerStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const marketIndex = order ? order.marketIndex : userAccount.orders.find((order)=>order.orderId === userAccount.nextOrderId - 1).marketIndex;\n        makerInfo = Array.isArray(makerInfo) ? makerInfo : makerInfo ? [\n            makerInfo\n        ] : [];\n        const userAccounts = [\n            userAccount\n        ];\n        for (const maker of makerInfo){\n            userAccounts.push(maker.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            writablePerpMarketIndexes: [\n                marketIndex\n            ]\n        });\n        for (const maker of makerInfo){\n            remainingAccounts.push({\n                pubkey: maker.maker,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: maker.makerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        if (referrerInfo) {\n            const referrerIsMaker = makerInfo.find((maker)=>maker.maker.equals(referrerInfo.referrer)) !== undefined;\n            if (!referrerIsMaker) {\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrer,\n                    isWritable: true,\n                    isSigner: false\n                });\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrerStats,\n                    isWritable: true,\n                    isSigner: false\n                });\n            }\n        }\n        const orderId = order.orderId;\n        return await this.program.instruction.fillPerpOrder(orderId, null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler: fillerPublicKey,\n                fillerStats: fillerStatsPublicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async getRevertFillIx() {\n        const fillerPublicKey = await this.getUserAccountPublicKey();\n        const fillerStatsPublicKey = this.getUserStatsAccountPublicKey();\n        return this.program.instruction.revertFill({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler: fillerPublicKey,\n                fillerStats: fillerStatsPublicKey,\n                authority: this.wallet.publicKey\n            }\n        });\n    }\n    async placeSpotOrder(orderParams, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceSpotOrderIx(orderParams), txParams), [], this.opts);\n        this.spotMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        this.spotMarketLastSlotCache.set(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, slot);\n        return txSig;\n    }\n    async getPlaceSpotOrderIx(orderParams) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, {\n            marketType: types_1.MarketType.SPOT\n        });\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            readableSpotMarketIndexes: [\n                orderParams.marketIndex,\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        return await this.program.instruction.placeSpotOrder(orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async fillSpotOrder(userAccountPublicKey, user, order, fulfillmentConfig, makerInfo, referrerInfo, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getFillSpotOrderIx(userAccountPublicKey, user, order, fulfillmentConfig, makerInfo, referrerInfo), txParams), [], this.opts);\n        return txSig;\n    }\n    async getFillSpotOrderIx(userAccountPublicKey, userAccount, order, fulfillmentConfig, makerInfo, referrerInfo) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const fillerPublicKey = await this.getUserAccountPublicKey();\n        const fillerStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const marketIndex = order ? order.marketIndex : userAccount.orders.find((order)=>order.orderId === userAccount.nextOrderId - 1).marketIndex;\n        const userAccounts = [\n            userAccount\n        ];\n        if (makerInfo !== undefined) {\n            userAccounts.push(makerInfo.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            writableSpotMarketIndexes: [\n                marketIndex,\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        if (makerInfo) {\n            remainingAccounts.push({\n                pubkey: makerInfo.maker,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: makerInfo.makerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        const orderId = order.orderId;\n        const makerOrderId = makerInfo ? makerInfo.order.orderId : null;\n        this.addSpotFulfillmentAccounts(marketIndex, remainingAccounts, fulfillmentConfig);\n        return await this.program.instruction.fillSpotOrder(orderId, fulfillmentConfig ? fulfillmentConfig.fulfillmentType : null, makerOrderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler: fillerPublicKey,\n                fillerStats: fillerStatsPublicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    addSpotFulfillmentAccounts(marketIndex, remainingAccounts, fulfillmentConfig) {\n        if (fulfillmentConfig) {\n            if (\"serumProgramId\" in fulfillmentConfig) {\n                this.addSerumRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig);\n            } else if (\"phoenixProgramId\" in fulfillmentConfig) {\n                this.addPhoenixRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig);\n            } else {\n                throw Error(\"Invalid fulfillment config type\");\n            }\n        } else {\n            remainingAccounts.push({\n                pubkey: this.getSpotMarketAccount(marketIndex).vault,\n                isWritable: false,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: this.getQuoteSpotMarketAccount().vault,\n                isWritable: false,\n                isSigner: false\n            });\n        }\n    }\n    addSerumRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig) {\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.pubkey,\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumProgramId,\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumMarket,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumRequestQueue,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumEventQueue,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumBids,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumAsks,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumBaseVault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumQuoteVault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.serumOpenOrders,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: (0, pda_1.getSerumSignerPublicKey)(fulfillmentConfig.serumProgramId, fulfillmentConfig.serumMarket, fulfillmentConfig.serumSignerNonce),\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: this.getSignerPublicKey(),\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: spl_token_1.TOKEN_PROGRAM_ID,\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: this.getSpotMarketAccount(marketIndex).vault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: this.getQuoteSpotMarketAccount().vault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: this.getStateAccount().srmVault,\n            isWritable: false,\n            isSigner: false\n        });\n    }\n    addPhoenixRemainingAccounts(marketIndex, remainingAccounts, fulfillmentConfig) {\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.pubkey,\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixProgramId,\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixLogAuthority,\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixMarket,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: this.getSignerPublicKey(),\n            isWritable: false,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixBaseVault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: fulfillmentConfig.phoenixQuoteVault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: this.getSpotMarketAccount(marketIndex).vault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: this.getQuoteSpotMarketAccount().vault,\n            isWritable: true,\n            isSigner: false\n        });\n        remainingAccounts.push({\n            pubkey: spl_token_1.TOKEN_PROGRAM_ID,\n            isWritable: false,\n            isSigner: false\n        });\n    }\n    /**\n     * Swap tokens in drift account using jupiter\n     * @param jupiterClient jupiter client to find routes and jupiter instructions\n     * @param outMarketIndex the market index of the token you're buying\n     * @param inMarketIndex the market index of the token you're selling\n     * @param outAssociatedTokenAccount the token account to receive the token being sold on jupiter\n     * @param inAssociatedTokenAccount the token account to\n     * @param amount the amount of TokenIn, regardless of swapMode\n     * @param slippageBps the max slippage passed to jupiter api\n     * @param swapMode jupiter swapMode (ExactIn or ExactOut), default is ExactIn\n     * @param route the jupiter route to use for the swap\n     * @param reduceOnly specify if In or Out token on the drift account must reduceOnly, checked at end of swap\n     * @param txParams\n     */ async swap({ jupiterClient, outMarketIndex, inMarketIndex, outAssociatedTokenAccount, inAssociatedTokenAccount, amount, slippageBps, swapMode, route, reduceOnly, txParams }) {\n        const { ixs, lookupTables } = await this.getJupiterSwapIx({\n            jupiterClient,\n            outMarketIndex,\n            inMarketIndex,\n            outAssociatedTokenAccount,\n            inAssociatedTokenAccount,\n            amount,\n            slippageBps,\n            swapMode,\n            route,\n            reduceOnly\n        });\n        const tx = await this.buildTransaction(ixs, txParams, 0, lookupTables);\n        const { txSig, slot } = await this.sendTransaction(tx);\n        this.spotMarketLastSlotCache.set(outMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(inMarketIndex, slot);\n        return txSig;\n    }\n    async getJupiterSwapIx({ jupiterClient, outMarketIndex, inMarketIndex, outAssociatedTokenAccount, inAssociatedTokenAccount, amount, slippageBps, swapMode, onlyDirectRoutes, route, reduceOnly, userAccountPublicKey }) {\n        const outMarket = this.getSpotMarketAccount(outMarketIndex);\n        const inMarket = this.getSpotMarketAccount(inMarketIndex);\n        if (!route) {\n            const routes = await jupiterClient.getRoutes({\n                inputMint: inMarket.mint,\n                outputMint: outMarket.mint,\n                amount,\n                slippageBps,\n                swapMode,\n                onlyDirectRoutes\n            });\n            if (!routes || routes.length === 0) {\n                throw new Error(\"No jupiter routes found\");\n            }\n            route = routes[0];\n        }\n        const transaction = await jupiterClient.getSwapTransaction({\n            route,\n            userPublicKey: this.provider.wallet.publicKey,\n            slippageBps\n        });\n        const { transactionMessage, lookupTables } = await jupiterClient.getTransactionMessageAndLookupTables({\n            transaction\n        });\n        const jupiterInstructions = jupiterClient.getJupiterInstructions({\n            transactionMessage,\n            inputMint: inMarket.mint,\n            outputMint: outMarket.mint\n        });\n        const preInstructions = [];\n        if (!outAssociatedTokenAccount) {\n            outAssociatedTokenAccount = await this.getAssociatedTokenAccount(outMarket.marketIndex, false);\n            const accountInfo = await this.connection.getAccountInfo(outAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(outAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, outMarket.mint));\n            }\n        }\n        if (!inAssociatedTokenAccount) {\n            inAssociatedTokenAccount = await this.getAssociatedTokenAccount(inMarket.marketIndex, false);\n            const accountInfo = await this.connection.getAccountInfo(inAssociatedTokenAccount);\n            if (!accountInfo) {\n                preInstructions.push(this.createAssociatedTokenAccountIdempotentInstruction(inAssociatedTokenAccount, this.provider.wallet.publicKey, this.provider.wallet.publicKey, inMarket.mint));\n            }\n        }\n        const { beginSwapIx, endSwapIx } = await this.getSwapIx({\n            outMarketIndex,\n            inMarketIndex,\n            amountIn: amount,\n            inTokenAccount: inAssociatedTokenAccount,\n            outTokenAccount: outAssociatedTokenAccount,\n            reduceOnly,\n            userAccountPublicKey\n        });\n        const ixs = [\n            ...preInstructions,\n            beginSwapIx,\n            ...jupiterInstructions,\n            endSwapIx\n        ];\n        return {\n            ixs,\n            lookupTables\n        };\n    }\n    /**\n     * Get the drift begin_swap and end_swap instructions\n     *\n     * @param outMarketIndex the market index of the token you're buying\n     * @param inMarketIndex the market index of the token you're selling\n     * @param amountIn the amount of the token to sell\n     * @param inTokenAccount the token account to move the tokens being sold\n     * @param outTokenAccount the token account to receive the tokens being bought\n     * @param limitPrice the limit price of the swap\n     * @param reduceOnly\n     * @param userAccountPublicKey optional, specify a custom userAccountPublicKey to use instead of getting the current user account; can be helpful if the account is being created within the current tx\n     */ async getSwapIx({ outMarketIndex, inMarketIndex, amountIn, inTokenAccount, outTokenAccount, limitPrice, reduceOnly, userAccountPublicKey }) {\n        const userAccountPublicKeyToUse = userAccountPublicKey || await this.getUserAccountPublicKey();\n        const userAccounts = [];\n        if (this.hasUser() && this.getUser().getUserAccountAndSlot()) {\n            userAccounts.push(this.getUser().getUserAccountAndSlot().data);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            writableSpotMarketIndexes: [\n                outMarketIndex,\n                inMarketIndex\n            ]\n        });\n        const outSpotMarket = this.getSpotMarketAccount(outMarketIndex);\n        const inSpotMarket = this.getSpotMarketAccount(inMarketIndex);\n        const beginSwapIx = await this.program.instruction.beginSwap(inMarketIndex, outMarketIndex, amountIn, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKeyToUse,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                outSpotMarketVault: outSpotMarket.vault,\n                inSpotMarketVault: inSpotMarket.vault,\n                inTokenAccount,\n                outTokenAccount,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY\n            },\n            remainingAccounts\n        });\n        const endSwapIx = await this.program.instruction.endSwap(inMarketIndex, outMarketIndex, limitPrice !== null && limitPrice !== void 0 ? limitPrice : null, reduceOnly !== null && reduceOnly !== void 0 ? reduceOnly : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKeyToUse,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                outSpotMarketVault: outSpotMarket.vault,\n                inSpotMarketVault: inSpotMarket.vault,\n                inTokenAccount,\n                outTokenAccount,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                driftSigner: this.getStateAccount().signer,\n                instructions: anchor.web3.SYSVAR_INSTRUCTIONS_PUBKEY\n            },\n            remainingAccounts\n        });\n        return {\n            beginSwapIx,\n            endSwapIx\n        };\n    }\n    async stakeForMSOL({ amount }) {\n        const ixs = await this.getStakeForMSOLIx({\n            amount\n        });\n        const tx = await this.buildTransaction(ixs);\n        return this.sendTransaction(tx);\n    }\n    async getStakeForMSOLIx({ amount, userAccountPublicKey }) {\n        const wSOLMint = this.getSpotMarketAccount(1).mint;\n        const mSOLAccount = await this.getAssociatedTokenAccount(2);\n        const wSOLAccount = await this.getAssociatedTokenAccount(1, false);\n        const wSOLAccountExists = await this.checkIfAccountExists(wSOLAccount);\n        const closeWSOLIx = (0, spl_token_1.createCloseAccountInstruction)(wSOLAccount, this.wallet.publicKey, this.wallet.publicKey);\n        const createWSOLIx = await this.createAssociatedTokenAccountIdempotentInstruction(wSOLAccount, this.wallet.publicKey, this.wallet.publicKey, wSOLMint);\n        const { beginSwapIx, endSwapIx } = await this.getSwapIx({\n            inMarketIndex: 1,\n            outMarketIndex: 2,\n            amountIn: amount,\n            inTokenAccount: wSOLAccount,\n            outTokenAccount: mSOLAccount,\n            userAccountPublicKey\n        });\n        const program = (0, marinade_1.getMarinadeFinanceProgram)(this.provider);\n        const depositIx = await (0, marinade_1.getMarinadeDepositIx)({\n            program,\n            mSOLAccount: mSOLAccount,\n            transferFrom: this.wallet.publicKey,\n            amount\n        });\n        const ixs = [];\n        if (!wSOLAccountExists) {\n            ixs.push(createWSOLIx);\n        }\n        ixs.push(beginSwapIx, closeWSOLIx, depositIx, createWSOLIx, endSwapIx);\n        return ixs;\n    }\n    async triggerOrder(userAccountPublicKey, user, order, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getTriggerOrderIx(userAccountPublicKey, user, order), txParams), [], this.opts);\n        return txSig;\n    }\n    async getTriggerOrderIx(userAccountPublicKey, userAccount, order) {\n        const fillerPublicKey = await this.getUserAccountPublicKey();\n        let remainingAccountsParams;\n        if ((0, types_1.isVariant)(order.marketType, \"perp\")) {\n            remainingAccountsParams = {\n                userAccounts: [\n                    userAccount\n                ],\n                writablePerpMarketIndexes: [\n                    order.marketIndex\n                ]\n            };\n        } else {\n            remainingAccountsParams = {\n                userAccounts: [\n                    userAccount\n                ],\n                writableSpotMarketIndexes: [\n                    order.marketIndex,\n                    numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n                ]\n            };\n        }\n        const remainingAccounts = this.getRemainingAccounts(remainingAccountsParams);\n        const orderId = order.orderId;\n        return await this.program.instruction.triggerOrder(orderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler: fillerPublicKey,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async forceCancelOrders(userAccountPublicKey, user, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getForceCancelOrdersIx(userAccountPublicKey, user), txParams), [], this.opts);\n        return txSig;\n    }\n    async getForceCancelOrdersIx(userAccountPublicKey, userAccount) {\n        const fillerPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                userAccount\n            ],\n            writableSpotMarketIndexes: [\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        return await this.program.instruction.forceCancelOrders({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler: fillerPublicKey,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async updateUserIdle(userAccountPublicKey, user, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateUserIdleIx(userAccountPublicKey, user), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserIdleIx(userAccountPublicKey, userAccount) {\n        const fillerPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                userAccount\n            ]\n        });\n        return await this.program.instruction.updateUserIdle({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler: fillerPublicKey,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async updateUserOpenOrdersCount(userAccountPublicKey, user, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateUserOpenOrdersCountIx(userAccountPublicKey, user), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateUserOpenOrdersCountIx(userAccountPublicKey, userAccount) {\n        const fillerPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                userAccount\n            ]\n        });\n        return await this.program.instruction.updateUserOpenOrdersCount({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                filler: fillerPublicKey,\n                user: userAccountPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async placeAndTakePerpOrder(orderParams, makerInfo, referrerInfo, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceAndTakePerpOrderIx(orderParams, makerInfo, referrerInfo), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return txSig;\n    }\n    async getPlaceAndTakePerpOrderIx(orderParams, makerInfo, referrerInfo) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, {\n            marketType: types_1.MarketType.PERP\n        });\n        const userStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        makerInfo = Array.isArray(makerInfo) ? makerInfo : makerInfo ? [\n            makerInfo\n        ] : [];\n        const userAccounts = [\n            this.getUserAccount()\n        ];\n        for (const maker of makerInfo){\n            userAccounts.push(maker.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [\n                orderParams.marketIndex\n            ]\n        });\n        for (const maker of makerInfo){\n            remainingAccounts.push({\n                pubkey: maker.maker,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: maker.makerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        if (referrerInfo) {\n            const referrerIsMaker = makerInfo.find((maker)=>maker.maker.equals(referrerInfo.referrer)) !== undefined;\n            if (!referrerIsMaker) {\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrer,\n                    isWritable: true,\n                    isSigner: false\n                });\n                remainingAccounts.push({\n                    pubkey: referrerInfo.referrerStats,\n                    isWritable: true,\n                    isSigner: false\n                });\n            }\n        }\n        return await this.program.instruction.placeAndTakePerpOrder(orderParams, null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async placeAndMakePerpOrder(orderParams, takerInfo, referrerInfo, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceAndMakePerpOrderIx(orderParams, takerInfo, referrerInfo), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        return txSig;\n    }\n    async getPlaceAndMakePerpOrderIx(orderParams, takerInfo, referrerInfo) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, {\n            marketType: types_1.MarketType.PERP\n        });\n        const userStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                takerInfo.takerUserAccount\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [\n                orderParams.marketIndex\n            ]\n        });\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        const takerOrderId = takerInfo.order.orderId;\n        return await this.program.instruction.placeAndMakePerpOrder(orderParams, takerOrderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                taker: takerInfo.taker,\n                takerStats: takerInfo.takerStats,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async placeAndTakeSpotOrder(orderParams, fulfillmentConfig, makerInfo, referrerInfo, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceAndTakeSpotOrderIx(orderParams, fulfillmentConfig, makerInfo, referrerInfo), txParams), [], this.opts);\n        this.spotMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        this.spotMarketLastSlotCache.set(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, slot);\n        return txSig;\n    }\n    async getPlaceAndTakeSpotOrderIx(orderParams, fulfillmentConfig, makerInfo, referrerInfo) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, {\n            marketType: types_1.MarketType.SPOT\n        });\n        const userStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const userAccounts = [\n            this.getUserAccount()\n        ];\n        if (makerInfo !== undefined) {\n            userAccounts.push(makerInfo.makerUserAccount);\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts,\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                orderParams.marketIndex,\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        let makerOrderId = null;\n        if (makerInfo) {\n            makerOrderId = makerInfo.order.orderId;\n            remainingAccounts.push({\n                pubkey: makerInfo.maker,\n                isSigner: false,\n                isWritable: true\n            });\n            remainingAccounts.push({\n                pubkey: makerInfo.makerStats,\n                isSigner: false,\n                isWritable: true\n            });\n        }\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        this.addSpotFulfillmentAccounts(orderParams.marketIndex, remainingAccounts, fulfillmentConfig);\n        return await this.program.instruction.placeAndTakeSpotOrder(orderParams, fulfillmentConfig ? fulfillmentConfig.fulfillmentType : null, makerOrderId, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async placeAndMakeSpotOrder(orderParams, takerInfo, fulfillmentConfig, referrerInfo, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getPlaceAndMakeSpotOrderIx(orderParams, takerInfo, fulfillmentConfig, referrerInfo), txParams), [], this.opts);\n        this.spotMarketLastSlotCache.set(orderParams.marketIndex, slot);\n        this.spotMarketLastSlotCache.set(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, slot);\n        return txSig;\n    }\n    async getPlaceAndMakeSpotOrderIx(orderParams, takerInfo, fulfillmentConfig, referrerInfo) {\n        orderParams = (0, orderParams_1.getOrderParams)(orderParams, {\n            marketType: types_1.MarketType.SPOT\n        });\n        const userStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                takerInfo.takerUserAccount\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                orderParams.marketIndex,\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        if (referrerInfo) {\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrer,\n                isWritable: true,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: referrerInfo.referrerStats,\n                isWritable: true,\n                isSigner: false\n            });\n        }\n        this.addSpotFulfillmentAccounts(orderParams.marketIndex, remainingAccounts, fulfillmentConfig);\n        const takerOrderId = takerInfo.order.orderId;\n        return await this.program.instruction.placeAndMakeSpotOrder(orderParams, takerOrderId, fulfillmentConfig ? fulfillmentConfig.fulfillmentType : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                taker: takerInfo.taker,\n                takerStats: takerInfo.takerStats,\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    /**\n     * @deprecated use {@link placePerpOrder} or {@link placeAndTakePerpOrder} instead\n     */ async closePosition(marketIndex, limitPrice) {\n        const userPosition = this.getUser().getPerpPosition(marketIndex);\n        if (!userPosition) {\n            throw Error(`No position in market ${marketIndex.toString()}`);\n        }\n        return await this.placeAndTakePerpOrder({\n            orderType: types_1.OrderType.MARKET,\n            marketIndex,\n            direction: (0, position_1.findDirectionToClose)(userPosition),\n            baseAssetAmount: userPosition.baseAssetAmount.abs(),\n            reduceOnly: true,\n            price: limitPrice\n        });\n    }\n    /**\n     * Modifies an open order by closing it and replacing it with a new order.\n     * @deprecated use modifyOrder instead\n     * @param orderId: The open order to modify\n     * @param newBaseAmount: The new base amount for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newLimitPice: The new limit price for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newOraclePriceOffset: The new oracle price offset for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @returns\n     */ async modifyPerpOrder(orderId, newBaseAmount, newLimitPrice, newOraclePriceOffset) {\n        return this.modifyOrder({\n            orderId,\n            newBaseAmount,\n            newLimitPrice,\n            newOraclePriceOffset\n        });\n    }\n    /**\n     * Modifies an open order by closing it and replacing it with a new order.\n     * @deprecated use modifyOrderByUserOrderId instead\n     * @param userOrderId: The open order to modify\n     * @param newBaseAmount: The new base amount for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newLimitPice: The new limit price for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @param newOraclePriceOffset: The new oracle price offset for the order. One of [newBaseAmount|newLimitPrice|newOraclePriceOffset] must be provided.\n     * @returns\n     */ async modifyPerpOrderByUserOrderId(userOrderId, newBaseAmount, newLimitPrice, newOraclePriceOffset) {\n        return this.modifyOrderByUserOrderId({\n            userOrderId,\n            newBaseAmount,\n            newLimitPrice,\n            newOraclePriceOffset\n        });\n    }\n    /**\n     * Modifies an open order (spot or perp) by closing it and replacing it with a new order.\n     * @param orderParams.orderId: The open order to modify\n     * @param orderParams.newDirection: The new direction for the order\n     * @param orderParams.newBaseAmount: The new base amount for the order\n     * @param orderParams.newLimitPice: The new limit price for the order\n     * @param orderParams.newOraclePriceOffset: The new oracle price offset for the order\n     * @param orderParams.newTriggerPrice: Optional - Thew new trigger price for the order.\n     * @param orderParams.auctionDuration:\n     * @param orderParams.auctionStartPrice:\n     * @param orderParams.auctionEndPrice:\n     * @param orderParams.reduceOnly:\n     * @param orderParams.postOnly:\n     * @param orderParams.immediateOrCancel:\n     * @param orderParams.policy:\n     * @param orderParams.maxTs:\n     * @returns\n     */ async modifyOrder(orderParams, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getModifyOrderIx(orderParams), txParams), [], this.opts);\n        return txSig;\n    }\n    async getModifyOrderIx({ orderId, newDirection, newBaseAmount, newLimitPrice, newOraclePriceOffset, newTriggerPrice, newTriggerCondition, auctionDuration, auctionStartPrice, auctionEndPrice, reduceOnly, postOnly, immediateOrCancel, maxTs, policy }) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true\n        });\n        const orderParams = {\n            baseAssetAmount: newBaseAmount || null,\n            direction: newDirection || null,\n            price: newLimitPrice || null,\n            oraclePriceOffset: newOraclePriceOffset || null,\n            triggerPrice: newTriggerPrice || null,\n            triggerCondition: newTriggerCondition || null,\n            auctionDuration: auctionDuration || null,\n            auctionStartPrice: auctionStartPrice || null,\n            auctionEndPrice: auctionEndPrice || null,\n            reduceOnly: reduceOnly || null,\n            postOnly: postOnly || null,\n            immediateOrCancel: immediateOrCancel || null,\n            policy: policy || null,\n            maxTs: maxTs || null\n        };\n        return await this.program.instruction.modifyOrder(orderId, orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    /**\n     * Modifies an open order by closing it and replacing it with a new order.\n     * @param orderParams.userOrderId: The open order to modify\n     * @param orderParams.newDirection: The new direction for the order\n     * @param orderParams.newBaseAmount: The new base amount for the order\n     * @param orderParams.newLimitPice: The new limit price for the order\n     * @param orderParams.newOraclePriceOffset: The new oracle price offset for the order\n     * @param orderParams.newTriggerPrice: Optional - Thew new trigger price for the order.\n     * @param orderParams.auctionDuration: Only required if order type changed to market from something else\n     * @param orderParams.auctionStartPrice: Only required if order type changed to market from something else\n     * @param orderParams.auctionEndPrice: Only required if order type changed to market from something else\n     * @param orderParams.reduceOnly:\n     * @param orderParams.postOnly:\n     * @param orderParams.immediateOrCancel:\n     * @param orderParams.policy:\n     * @param orderParams.maxTs:\n     * @returns\n     */ async modifyOrderByUserOrderId(orderParams, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getModifyOrderByUserIdIx(orderParams), txParams), [], this.opts);\n        return txSig;\n    }\n    async getModifyOrderByUserIdIx({ userOrderId, newDirection, newBaseAmount, newLimitPrice, newOraclePriceOffset, newTriggerPrice, newTriggerCondition, auctionDuration, auctionStartPrice, auctionEndPrice, reduceOnly, postOnly, immediateOrCancel, maxTs, policy }) {\n        const userAccountPublicKey = await this.getUserAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true\n        });\n        const orderParams = {\n            baseAssetAmount: newBaseAmount || null,\n            direction: newDirection || null,\n            price: newLimitPrice || null,\n            oraclePriceOffset: newOraclePriceOffset || null,\n            triggerPrice: newTriggerPrice || null,\n            triggerCondition: newTriggerCondition || null,\n            auctionDuration: auctionDuration || null,\n            auctionStartPrice: auctionStartPrice || null,\n            auctionEndPrice: auctionEndPrice || null,\n            reduceOnly: reduceOnly || null,\n            postOnly: postOnly || null,\n            immediateOrCancel: immediateOrCancel || null,\n            policy: policy || null,\n            maxTs: maxTs || null\n        };\n        return await this.program.instruction.modifyOrderByUserId(userOrderId, orderParams, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey\n            },\n            remainingAccounts\n        });\n    }\n    async settlePNLs(users, marketIndexes) {\n        const ixs = await this.getSettlePNLsIxs(users, marketIndexes);\n        const tx = new web3_js_1.Transaction().add(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n            units: 1000000\n        })).add(...ixs);\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async getSettlePNLsIxs(users, marketIndexes) {\n        const ixs = [];\n        for (const { settleeUserAccountPublicKey, settleeUserAccount } of users){\n            for (const marketIndex of marketIndexes){\n                ixs.push(await this.settlePNLIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndex));\n            }\n        }\n        return ixs;\n    }\n    async settlePNL(settleeUserAccountPublicKey, settleeUserAccount, marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.settlePNLIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async settlePNLIx(settleeUserAccountPublicKey, settleeUserAccount, marketIndex) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                settleeUserAccount\n            ],\n            writablePerpMarketIndexes: [\n                marketIndex\n            ],\n            writableSpotMarketIndexes: [\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        return await this.program.instruction.settlePnl(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: settleeUserAccountPublicKey,\n                spotMarketVault: this.getQuoteSpotMarketAccount().vault\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async liquidatePerp(userAccountPublicKey, userAccount, marketIndex, maxBaseAssetAmount, limitPrice, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidatePerpIx(userAccountPublicKey, userAccount, marketIndex, maxBaseAssetAmount, limitPrice), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(marketIndex, slot);\n        return txSig;\n    }\n    async getLiquidatePerpIx(userAccountPublicKey, userAccount, marketIndex, maxBaseAssetAmount, limitPrice) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidatorPublicKey = await this.getUserAccountPublicKey();\n        const liquidatorStatsPublicKey = this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                userAccount\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [\n                marketIndex\n            ]\n        });\n        return await this.program.instruction.liquidatePerp(marketIndex, maxBaseAssetAmount, limitPrice !== null && limitPrice !== void 0 ? limitPrice : null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator: liquidatorPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async liquidateSpot(userAccountPublicKey, userAccount, assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidateSpotIx(userAccountPublicKey, userAccount, assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice), txParams), [], this.opts);\n        this.spotMarketLastSlotCache.set(assetMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(liabilityMarketIndex, slot);\n        return txSig;\n    }\n    async getLiquidateSpotIx(userAccountPublicKey, userAccount, assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidatorPublicKey = await this.getUserAccountPublicKey();\n        const liquidatorStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                userAccount\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                liabilityMarketIndex,\n                assetMarketIndex\n            ]\n        });\n        return await this.program.instruction.liquidateSpot(assetMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice || null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator: liquidatorPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async liquidateBorrowForPerpPnl(userAccountPublicKey, userAccount, perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidateBorrowForPerpPnlIx(userAccountPublicKey, userAccount, perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(perpMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(liabilityMarketIndex, slot);\n        return txSig;\n    }\n    async getLiquidateBorrowForPerpPnlIx(userAccountPublicKey, userAccount, perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidatorPublicKey = await this.getUserAccountPublicKey();\n        const liquidatorStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                userAccount\n            ],\n            writablePerpMarketIndexes: [\n                perpMarketIndex\n            ],\n            writableSpotMarketIndexes: [\n                liabilityMarketIndex\n            ]\n        });\n        return await this.program.instruction.liquidateBorrowForPerpPnl(perpMarketIndex, liabilityMarketIndex, maxLiabilityTransfer, limitPrice || null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator: liquidatorPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async liquidatePerpPnlForDeposit(userAccountPublicKey, userAccount, perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice, txParams) {\n        const { txSig, slot } = await this.sendTransaction(await this.buildTransaction(await this.getLiquidatePerpPnlForDepositIx(userAccountPublicKey, userAccount, perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice), txParams), [], this.opts);\n        this.perpMarketLastSlotCache.set(perpMarketIndex, slot);\n        this.spotMarketLastSlotCache.set(assetMarketIndex, slot);\n        return txSig;\n    }\n    async getLiquidatePerpPnlForDepositIx(userAccountPublicKey, userAccount, perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidatorPublicKey = await this.getUserAccountPublicKey();\n        const liquidatorStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                userAccount\n            ],\n            writablePerpMarketIndexes: [\n                perpMarketIndex\n            ],\n            writableSpotMarketIndexes: [\n                assetMarketIndex\n            ]\n        });\n        return await this.program.instruction.liquidatePerpPnlForDeposit(perpMarketIndex, assetMarketIndex, maxPnlTransfer, limitPrice || null, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator: liquidatorPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async resolvePerpBankruptcy(userAccountPublicKey, userAccount, marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getResolvePerpBankruptcyIx(userAccountPublicKey, userAccount, marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getResolvePerpBankruptcyIx(userAccountPublicKey, userAccount, marketIndex) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidatorPublicKey = await this.getUserAccountPublicKey();\n        const liquidatorStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                userAccount\n            ],\n            writablePerpMarketIndexes: [\n                marketIndex\n            ],\n            writableSpotMarketIndexes: [\n                numericConstants_1.QUOTE_SPOT_MARKET_INDEX\n            ]\n        });\n        const spotMarket = this.getQuoteSpotMarketAccount();\n        return await this.program.instruction.resolvePerpBankruptcy(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidator: liquidatorPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async resolveSpotBankruptcy(userAccountPublicKey, userAccount, marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getResolveSpotBankruptcyIx(userAccountPublicKey, userAccount, marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getResolveSpotBankruptcyIx(userAccountPublicKey, userAccount, marketIndex) {\n        const userStatsPublicKey = (0, pda_1.getUserStatsAccountPublicKey)(this.program.programId, userAccount.authority);\n        const liquidatorPublicKey = await this.getUserAccountPublicKey();\n        const liquidatorStatsPublicKey = await this.getUserStatsAccountPublicKey();\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount(),\n                userAccount\n            ],\n            writableSpotMarketIndexes: [\n                marketIndex\n            ]\n        });\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        return await this.program.instruction.resolveSpotBankruptcy(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                user: userAccountPublicKey,\n                userStats: userStatsPublicKey,\n                liquidatorStats: liquidatorStatsPublicKey,\n                liquidator: liquidatorPublicKey,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async updateFundingRate(perpMarketIndex, oracle, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdateFundingRateIx(perpMarketIndex, oracle), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdateFundingRateIx(perpMarketIndex, oracle) {\n        const perpMarketPublicKey = await (0, pda_1.getPerpMarketPublicKey)(this.program.programId, perpMarketIndex);\n        return await this.program.instruction.updateFundingRate(perpMarketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                perpMarket: perpMarketPublicKey,\n                oracle: oracle\n            }\n        });\n    }\n    async updatePerpBidAskTwap(perpMarketIndex, makers, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getUpdatePerpBidAskTwapIx(perpMarketIndex, makers), txParams), [], this.opts);\n        return txSig;\n    }\n    async getUpdatePerpBidAskTwapIx(perpMarketIndex, makers) {\n        const perpMarket = this.getPerpMarketAccount(perpMarketIndex);\n        const remainingAccounts = [];\n        for (const [maker, makerStats] of makers){\n            remainingAccounts.push({\n                pubkey: maker,\n                isWritable: false,\n                isSigner: false\n            });\n            remainingAccounts.push({\n                pubkey: makerStats,\n                isWritable: false,\n                isSigner: false\n            });\n        }\n        return await this.program.instruction.updatePerpBidAskTwap({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                perpMarket: perpMarket.pubkey,\n                oracle: perpMarket.amm.oracle,\n                authority: this.wallet.publicKey,\n                keeperStats: this.getUserStatsAccountPublicKey()\n            },\n            remainingAccounts\n        });\n    }\n    async settleFundingPayment(userAccountPublicKey, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getSettleFundingPaymentIx(userAccountPublicKey), txParams), [], this.opts);\n        return txSig;\n    }\n    async getSettleFundingPaymentIx(userAccountPublicKey) {\n        const userAccount = await this.program.account.user.fetch(userAccountPublicKey);\n        const writablePerpMarketIndexes = [];\n        for (const position of userAccount.perpPositions){\n            if (!(0, position_1.positionIsAvailable)(position)) {\n                writablePerpMarketIndexes.push(position.marketIndex);\n            }\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                userAccount\n            ],\n            writablePerpMarketIndexes\n        });\n        return await this.program.instruction.settleFundingPayment({\n            accounts: {\n                state: await this.getStatePublicKey(),\n                user: userAccountPublicKey\n            },\n            remainingAccounts\n        });\n    }\n    triggerEvent(eventName, data) {\n        this.eventEmitter.emit(eventName, data);\n    }\n    getOracleDataForPerpMarket(marketIndex) {\n        const oracleKey = this.getPerpMarketAccount(marketIndex).amm.oracle;\n        const oracleData = this.getOraclePriceDataAndSlot(oracleKey).data;\n        return oracleData;\n    }\n    getOracleDataForSpotMarket(marketIndex) {\n        const oracleKey = this.getSpotMarketAccount(marketIndex).oracle;\n        const oracleData = this.getOraclePriceDataAndSlot(oracleKey).data;\n        return oracleData;\n    }\n    async initializeInsuranceFundStake(marketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getInitializeInsuranceFundStakeIx(marketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getInitializeInsuranceFundStakeIx(marketIndex) {\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        return await this.program.instruction.initializeInsuranceFundStake(marketIndex, {\n            accounts: {\n                insuranceFundStake: ifStakeAccountPublicKey,\n                spotMarket: this.getSpotMarketAccount(marketIndex).pubkey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                payer: this.wallet.publicKey,\n                rent: anchor.web3.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                state: await this.getStatePublicKey()\n            }\n        });\n    }\n    async getAddInsuranceFundStakeIx(marketIndex, amount, collateralAccountPublicKey) {\n        const spotMarket = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                marketIndex\n            ]\n        });\n        const ix = this.program.instruction.addInsuranceFundStake(marketIndex, amount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                userTokenAccount: collateralAccountPublicKey,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts\n        });\n        return ix;\n    }\n    /**\n     * Add to an insurance fund stake and optionally initialize the account\n     */ async addInsuranceFundStake({ marketIndex, amount, collateralAccountPublicKey, initializeStakeAccount, fromSubaccount }) {\n        const tx = new web3_js_1.Transaction();\n        const additionalSigners = [];\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const createWSOLTokenAccount = isSolMarket && collateralAccountPublicKey.equals(this.wallet.publicKey);\n        let tokenAccount;\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(amount, true);\n            tokenAccount = pubkey;\n            ixs.forEach((ix)=>{\n                tx.add(ix);\n            });\n        } else {\n            tokenAccount = collateralAccountPublicKey;\n        }\n        if (fromSubaccount) {\n            const withdrawIx = await this.getWithdrawIx(amount, marketIndex, tokenAccount);\n            tx.add(withdrawIx);\n        }\n        if (initializeStakeAccount) {\n            const initializeIx = await this.getInitializeInsuranceFundStakeIx(marketIndex);\n            tx.add(initializeIx);\n        }\n        const addFundsIx = await this.getAddInsuranceFundStakeIx(marketIndex, amount, tokenAccount);\n        tx.add(addFundsIx);\n        if (createWSOLTokenAccount) {\n            tx.add((0, spl_token_1.createCloseAccountInstruction)(tokenAccount, this.wallet.publicKey, this.wallet.publicKey, []));\n        }\n        const { txSig } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        return txSig;\n    }\n    async requestRemoveInsuranceFundStake(marketIndex, amount) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                marketIndex\n            ]\n        });\n        const tx = await this.program.transaction.requestRemoveInsuranceFundStake(marketIndex, amount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault\n            },\n            remainingAccounts\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async cancelRequestRemoveInsuranceFundStake(marketIndex) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                marketIndex\n            ]\n        });\n        const tx = await this.program.transaction.cancelRequestRemoveInsuranceFundStake(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault\n            },\n            remainingAccounts\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async removeInsuranceFundStake(marketIndex, collateralAccountPublicKey) {\n        const tx = new web3_js_1.Transaction();\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const ifStakeAccountPublicKey = (0, pda_1.getInsuranceFundStakeAccountPublicKey)(this.program.programId, this.wallet.publicKey, marketIndex);\n        const additionalSigners = [];\n        const isSolMarket = spotMarketAccount.mint.equals(spotMarkets_1.WRAPPED_SOL_MINT);\n        const createWSOLTokenAccount = isSolMarket && collateralAccountPublicKey.equals(this.wallet.publicKey);\n        let tokenAccount;\n        if (createWSOLTokenAccount) {\n            const { ixs, pubkey } = await this.getWrappedSolAccountCreationIxs(numericConstants_1.ZERO, true);\n            tokenAccount = pubkey;\n            ixs.forEach((ix)=>{\n                tx.add(ix);\n            });\n        } else {\n            tokenAccount = collateralAccountPublicKey;\n        }\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                marketIndex\n            ]\n        });\n        const removeStakeIx = await this.program.instruction.removeInsuranceFundStake(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                insuranceFundStake: ifStakeAccountPublicKey,\n                userStats: this.getUserStatsAccountPublicKey(),\n                authority: this.wallet.publicKey,\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                userTokenAccount: tokenAccount,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts\n        });\n        tx.add(removeStakeIx);\n        // Close the wrapped sol account at the end of the transaction\n        if (createWSOLTokenAccount) {\n            tx.add((0, spl_token_1.createCloseAccountInstruction)(tokenAccount, this.wallet.publicKey, this.wallet.publicKey, []));\n        }\n        const { txSig } = await this.sendTransaction(tx, additionalSigners, this.opts);\n        return txSig;\n    }\n    async settleRevenueToInsuranceFund(marketIndex) {\n        const spotMarketAccount = this.getSpotMarketAccount(marketIndex);\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writableSpotMarketIndexes: [\n                marketIndex\n            ]\n        });\n        const tx = await this.program.transaction.settleRevenueToInsuranceFund(marketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarketAccount.pubkey,\n                spotMarketVault: spotMarketAccount.vault,\n                driftSigner: this.getSignerPublicKey(),\n                insuranceFundVault: spotMarketAccount.insuranceFund.vault,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    async resolvePerpPnlDeficit(spotMarketIndex, perpMarketIndex, txParams) {\n        const { txSig } = await this.sendTransaction(await this.buildTransaction(await this.getResolvePerpPnlDeficitIx(spotMarketIndex, perpMarketIndex), txParams), [], this.opts);\n        return txSig;\n    }\n    async getResolvePerpPnlDeficitIx(spotMarketIndex, perpMarketIndex) {\n        const remainingAccounts = this.getRemainingAccounts({\n            userAccounts: [\n                this.getUserAccount()\n            ],\n            useMarketLastSlotCache: true,\n            writablePerpMarketIndexes: [\n                perpMarketIndex\n            ],\n            writableSpotMarketIndexes: [\n                spotMarketIndex\n            ]\n        });\n        const spotMarket = this.getSpotMarketAccount(spotMarketIndex);\n        return await this.program.instruction.resolvePerpPnlDeficit(spotMarketIndex, perpMarketIndex, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                authority: this.wallet.publicKey,\n                spotMarketVault: spotMarket.vault,\n                insuranceFundVault: spotMarket.insuranceFund.vault,\n                driftSigner: this.getSignerPublicKey(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            },\n            remainingAccounts: remainingAccounts\n        });\n    }\n    async depositIntoSpotMarketRevenuePool(marketIndex, amount, userTokenAccountPublicKey) {\n        const spotMarket = await this.getSpotMarketAccount(marketIndex);\n        const tx = await this.program.transaction.depositIntoSpotMarketRevenuePool(amount, {\n            accounts: {\n                state: await this.getStatePublicKey(),\n                spotMarket: spotMarket.pubkey,\n                authority: this.wallet.publicKey,\n                spotMarketVault: spotMarket.vault,\n                userTokenAccount: userTokenAccountPublicKey,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            }\n        });\n        const { txSig } = await this.sendTransaction(tx, [], this.opts);\n        return txSig;\n    }\n    getPerpMarketExtendedInfo(marketIndex) {\n        var _a, _b;\n        const marketAccount = this.getPerpMarketAccount(marketIndex);\n        const quoteAccount = this.getSpotMarketAccount(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        const extendedInfo = {\n            marketIndex,\n            minOrderSize: (_a = marketAccount.amm) === null || _a === void 0 ? void 0 : _a.minOrderSize,\n            marginMaintenance: marketAccount.marginRatioMaintenance,\n            pnlPoolValue: (0, spotBalance_1.getTokenAmount)((_b = marketAccount.pnlPool) === null || _b === void 0 ? void 0 : _b.scaledBalance, quoteAccount, types_1.SpotBalanceType.DEPOSIT),\n            contractTier: marketAccount.contractTier,\n            availableInsurance: (0, market_1.calculateMarketMaxAvailableInsurance)(marketAccount, quoteAccount)\n        };\n        return extendedInfo;\n    }\n    /**\n     * Returns the market index and type for a given market name\n     * E.g. \"SOL-PERP\" -> { marketIndex: 0, marketType: MarketType.PERP }\n     *\n     * @param name\n     */ getMarketIndexAndType(name) {\n        name = name.toUpperCase();\n        for (const perpMarketAccount of this.getPerpMarketAccounts()){\n            if ((0, userName_1.decodeName)(perpMarketAccount.name).toUpperCase() === name) {\n                return {\n                    marketIndex: perpMarketAccount.marketIndex,\n                    marketType: types_1.MarketType.PERP\n                };\n            }\n        }\n        for (const spotMarketAccount of this.getSpotMarketAccounts()){\n            if ((0, userName_1.decodeName)(spotMarketAccount.name).toUpperCase() === name) {\n                return {\n                    marketIndex: spotMarketAccount.marketIndex,\n                    marketType: types_1.MarketType.SPOT\n                };\n            }\n        }\n        return undefined;\n    }\n    sendTransaction(tx, additionalSigners, opts, preSigned) {\n        // @ts-ignore\n        if (!tx.message) {\n            return this.txSender.send(tx, additionalSigners, opts, preSigned);\n        } else {\n            return this.txSender.sendVersionedTransaction(tx, additionalSigners, opts, preSigned);\n        }\n    }\n    async buildTransaction(instructions, txParams, txVersion, lookupTables) {\n        var _a, _b;\n        const allIx = [];\n        const computeUnits = (_a = txParams === null || txParams === void 0 ? void 0 : txParams.computeUnits) !== null && _a !== void 0 ? _a : this.txParams.computeUnits;\n        if (computeUnits !== 200000) {\n            allIx.push(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n                units: computeUnits\n            }));\n        }\n        const computeUnitsPrice = (_b = txParams === null || txParams === void 0 ? void 0 : txParams.computeUnitsPrice) !== null && _b !== void 0 ? _b : this.txParams.computeUnitsPrice;\n        if (computeUnitsPrice !== 0) {\n            allIx.push(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n                microLamports: computeUnitsPrice\n            }));\n        }\n        if (Array.isArray(instructions)) {\n            allIx.push(...instructions);\n        } else {\n            allIx.push(instructions);\n        }\n        txVersion = txVersion !== null && txVersion !== void 0 ? txVersion : this.txVersion;\n        if (txVersion === \"legacy\") {\n            return new web3_js_1.Transaction().add(...allIx);\n        } else {\n            const marketLookupTable = await this.fetchMarketLookupTableAccount();\n            lookupTables = lookupTables ? [\n                ...lookupTables,\n                marketLookupTable\n            ] : [\n                marketLookupTable\n            ];\n            const message = new web3_js_1.TransactionMessage({\n                payerKey: this.provider.wallet.publicKey,\n                recentBlockhash: (await this.provider.connection.getRecentBlockhash(this.opts.preflightCommitment)).blockhash,\n                instructions: allIx\n            }).compileToV0Message(lookupTables);\n            return new web3_js_1.VersionedTransaction(message);\n        }\n    }\n}\nexports.DriftClient = DriftClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kcmlmdENsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBTUMsQ0FBQUEsT0FBT0MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0IsSUFBSUcsT0FBT1AsT0FBT1Esd0JBQXdCLENBQUNMLEdBQUdDO0lBQzlDLElBQUksQ0FBQ0csUUFBUyxVQUFTQSxPQUFPLENBQUNKLEVBQUVNLFVBQVUsR0FBR0YsS0FBS0csUUFBUSxJQUFJSCxLQUFLSSxZQUFZLEdBQUc7UUFDakZKLE9BQU87WUFBRUssWUFBWTtZQUFNQyxLQUFLO2dCQUFhLE9BQU9WLENBQUMsQ0FBQ0MsRUFBRTtZQUFFO1FBQUU7SUFDOUQ7SUFDQUosT0FBT2MsY0FBYyxDQUFDWixHQUFHRyxJQUFJRTtBQUNqQyxJQUFNLFNBQVNMLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDdEIsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JGLENBQUMsQ0FBQ0csR0FBRyxHQUFHRixDQUFDLENBQUNDLEVBQUU7QUFDaEIsQ0FBQztBQUNELElBQUlXLHFCQUFxQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGtCQUFrQixJQUFNZixDQUFBQSxPQUFPQyxNQUFNLEdBQUksU0FBU0MsQ0FBQyxFQUFFYyxDQUFDO0lBQ3pGaEIsT0FBT2MsY0FBYyxDQUFDWixHQUFHLFdBQVc7UUFBRVUsWUFBWTtRQUFNSyxPQUFPRDtJQUFFO0FBQ3JFLElBQUssU0FBU2QsQ0FBQyxFQUFFYyxDQUFDO0lBQ2RkLENBQUMsQ0FBQyxVQUFVLEdBQUdjO0FBQ25CO0FBQ0EsSUFBSUUsZUFBZSxDQUFDLE1BQUcsS0FBSyxPQUFHLEVB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OUM7SUFDSjtBQUNKO0FBQ0E5dkIsbUJBQW1CLEdBQUdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2RyaWZ0Q2xpZW50LmpzP2EwYTAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuRHJpZnRDbGllbnQgPSB2b2lkIDA7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IGJzNThfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiYnM1OFwiKSk7XG5jb25zdCBzcGxfdG9rZW5fMSA9IHJlcXVpcmUoXCJAc29sYW5hL3NwbC10b2tlblwiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IGFuY2hvciA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIikpO1xuY29uc3QgZHJpZnRfanNvbl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL2lkbC9kcmlmdC5qc29uXCIpKTtcbmNvbnN0IHdlYjNfanNfMSA9IHJlcXVpcmUoXCJAc29sYW5hL3dlYjMuanNcIik7XG5jb25zdCBwZGFfMSA9IHJlcXVpcmUoXCIuL2FkZHJlc3Nlcy9wZGFcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdHgvdXRpbHNcIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IHBvc2l0aW9uXzEgPSByZXF1aXJlKFwiLi9tYXRoL3Bvc2l0aW9uXCIpO1xuY29uc3Qgc3BvdEJhbGFuY2VfMSA9IHJlcXVpcmUoXCIuL21hdGgvc3BvdEJhbGFuY2VcIik7XG5jb25zdCB1c2VyTmFtZV8xID0gcmVxdWlyZShcIi4vdXNlck5hbWVcIik7XG5jb25zdCBwb2xsaW5nRHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlcl8xID0gcmVxdWlyZShcIi4vYWNjb3VudHMvcG9sbGluZ0RyaWZ0Q2xpZW50QWNjb3VudFN1YnNjcmliZXJcIik7XG5jb25zdCB3ZWJTb2NrZXREcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyXzEgPSByZXF1aXJlKFwiLi9hY2NvdW50cy93ZWJTb2NrZXREcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyXCIpO1xuY29uc3QgcmV0cnlUeFNlbmRlcl8xID0gcmVxdWlyZShcIi4vdHgvcmV0cnlUeFNlbmRlclwiKTtcbmNvbnN0IHVzZXJfMSA9IHJlcXVpcmUoXCIuL3VzZXJcIik7XG5jb25zdCBjb25maWdfMSA9IHJlcXVpcmUoXCIuL2NvbmZpZ1wiKTtcbmNvbnN0IHNwb3RNYXJrZXRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHMvc3BvdE1hcmtldHNcIik7XG5jb25zdCB1c2VyU3RhdHNfMSA9IHJlcXVpcmUoXCIuL3VzZXJTdGF0c1wiKTtcbmNvbnN0IHNwb3RQb3NpdGlvbl8xID0gcmVxdWlyZShcIi4vbWF0aC9zcG90UG9zaXRpb25cIik7XG5jb25zdCBtYXJrZXRfMSA9IHJlcXVpcmUoXCIuL21hdGgvbWFya2V0XCIpO1xuY29uc3QgZmV0Y2hfMSA9IHJlcXVpcmUoXCIuL2FjY291bnRzL2ZldGNoXCIpO1xuY29uc3Qgc3BvdE1hcmtldF8xID0gcmVxdWlyZShcIi4vbWF0aC9zcG90TWFya2V0XCIpO1xuY29uc3QgbWVtY21wXzEgPSByZXF1aXJlKFwiLi9tZW1jbXBcIik7XG5jb25zdCBtYXJpbmFkZV8xID0gcmVxdWlyZShcIi4vbWFyaW5hZGVcIik7XG5jb25zdCBvcmRlclBhcmFtc18xID0gcmVxdWlyZShcIi4vb3JkZXJQYXJhbXNcIik7XG4vKipcbiAqICMgRHJpZnRDbGllbnRcbiAqIFRoaXMgY2xhc3MgaXMgdGhlIG1haW4gd2F5IHRvIGludGVyYWN0IHdpdGggRHJpZnQgUHJvdG9jb2wuIEl0IGFsbG93cyB5b3UgdG8gc3Vic2NyaWJlIHRvIHRoZSB2YXJpb3VzIGFjY291bnRzIHdoZXJlIHRoZSBNYXJrZXQncyBzdGF0ZSBpcyBzdG9yZWQsIGFzIHdlbGwgYXM6IG9wZW5pbmcgcG9zaXRpb25zLCBsaXF1aWRhdGluZywgc2V0dGxpbmcgZnVuZGluZywgZGVwb3NpdGluZyAmIHdpdGhkcmF3aW5nLCBhbmQgbW9yZS5cbiAqL1xuY2xhc3MgRHJpZnRDbGllbnQge1xuICAgIGdldCBpc1N1YnNjcmliZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1N1YnNjcmliZWQgJiYgdGhpcy5hY2NvdW50U3Vic2NyaWJlci5pc1N1YnNjcmliZWQ7XG4gICAgfVxuICAgIHNldCBpc1N1YnNjcmliZWQodmFsKSB7XG4gICAgICAgIHRoaXMuX2lzU3Vic2NyaWJlZCA9IHZhbDtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaywgX2wsIF9tLCBfbywgX3AsIF9xLCBfciwgX3MsIF90LCBfdTtcbiAgICAgICAgdGhpcy51c2VycyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5faXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGVycE1hcmtldExhc3RTbG90Q2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuc3BvdE1hcmtldExhc3RTbG90Q2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMubXVzdEluY2x1ZGVQZXJwTWFya2V0SW5kZXhlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5tdXN0SW5jbHVkZVNwb3RNYXJrZXRJbmRleGVzID0gbmV3IFNldCgpO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25maWcuY29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy53YWxsZXQgPSBjb25maWcud2FsbGV0O1xuICAgICAgICB0aGlzLm9wdHMgPSBjb25maWcub3B0cyB8fCBhbmNob3JfMS5BbmNob3JQcm92aWRlci5kZWZhdWx0T3B0aW9ucygpO1xuICAgICAgICB0aGlzLnByb3ZpZGVyID0gbmV3IGFuY2hvcl8xLkFuY2hvclByb3ZpZGVyKGNvbmZpZy5jb25uZWN0aW9uLCBjb25maWcud2FsbGV0LCB0aGlzLm9wdHMpO1xuICAgICAgICB0aGlzLnByb2dyYW0gPSBuZXcgYW5jaG9yXzEuUHJvZ3JhbShkcmlmdF9qc29uXzEuZGVmYXVsdCwgKF9hID0gY29uZmlnLnByb2dyYW1JRCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoY29uZmlnXzEuRFJJRlRfUFJPR1JBTV9JRCksIHRoaXMucHJvdmlkZXIpO1xuICAgICAgICB0aGlzLmF1dGhvcml0eSA9IChfYiA9IGNvbmZpZy5hdXRob3JpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRoaXMud2FsbGV0LnB1YmxpY0tleTtcbiAgICAgICAgdGhpcy5hY3RpdmVTdWJBY2NvdW50SWQgPSAoX2MgPSBjb25maWcuYWN0aXZlU3ViQWNjb3VudElkKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwO1xuICAgICAgICB0aGlzLnNraXBMb2FkVXNlcnMgPSAoX2QgPSBjb25maWcuc2tpcExvYWRVc2VycykgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogZmFsc2U7XG4gICAgICAgIHRoaXMudHhWZXJzaW9uID0gKF9lID0gY29uZmlnLnR4VmVyc2lvbikgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogJ2xlZ2FjeSc7XG4gICAgICAgIHRoaXMudHhQYXJhbXMgPSB7XG4gICAgICAgICAgICBjb21wdXRlVW5pdHM6IChfZyA9IChfZiA9IGNvbmZpZy50eFBhcmFtcykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmNvbXB1dGVVbml0cykgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogNjAwMDAwLFxuICAgICAgICAgICAgY29tcHV0ZVVuaXRzUHJpY2U6IChfaiA9IChfaCA9IGNvbmZpZy50eFBhcmFtcykgPT09IG51bGwgfHwgX2ggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9oLmNvbXB1dGVVbml0c1ByaWNlKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiAwLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoY29uZmlnLmluY2x1ZGVEZWxlZ2F0ZXMgJiYgY29uZmlnLnN1YkFjY291bnRJZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgcGFzcyBvbmUgb2YgaW5jbHVkZURlbGVnYXRlcyBvciBzdWJBY2NvdW50SWRzLiBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5IHN1YmFjY291bnQgaWRzIGZvciBtdWx0aXBsZSBhdXRob3JpdGllcywgcGFzcyBhdXRob3JpdHlTdWJhY2NvdW50TWFwIGluc3RlYWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLmF1dGhvcml0eVN1YkFjY291bnRNYXAgJiYgY29uZmlnLnN1YkFjY291bnRJZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgcGFzcyBvbmUgb2YgYXV0aG9yaXR5U3ViYWNjb3VudE1hcCBvciBzdWJBY2NvdW50SWRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5hdXRob3JpdHlTdWJBY2NvdW50TWFwICYmIGNvbmZpZy5pbmNsdWRlRGVsZWdhdGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbiBvbmx5IHBhc3Mgb25lIG9mIGF1dGhvcml0eVN1YmFjY291bnRNYXAgb3IgaW5jbHVkZURlbGVnYXRlcycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXV0aG9yaXR5U3ViQWNjb3VudE1hcCA9IGNvbmZpZy5hdXRob3JpdHlTdWJBY2NvdW50TWFwXG4gICAgICAgICAgICA/IGNvbmZpZy5hdXRob3JpdHlTdWJBY2NvdW50TWFwXG4gICAgICAgICAgICA6IGNvbmZpZy5zdWJBY2NvdW50SWRzXG4gICAgICAgICAgICAgICAgPyBuZXcgTWFwKFtbdGhpcy5hdXRob3JpdHkudG9TdHJpbmcoKSwgY29uZmlnLnN1YkFjY291bnRJZHNdXSlcbiAgICAgICAgICAgICAgICA6IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5pbmNsdWRlRGVsZWdhdGVzID0gKF9rID0gY29uZmlnLmluY2x1ZGVEZWxlZ2F0ZXMpICE9PSBudWxsICYmIF9rICE9PSB2b2lkIDAgPyBfayA6IGZhbHNlO1xuICAgICAgICBpZiAoKChfbCA9IGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uKSA9PT0gbnVsbCB8fCBfbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2wudHlwZSkgPT09ICdwb2xsaW5nJykge1xuICAgICAgICAgICAgdGhpcy51c2VyQWNjb3VudFN1YnNjcmlwdGlvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncG9sbGluZycsXG4gICAgICAgICAgICAgICAgYWNjb3VudExvYWRlcjogY29uZmlnLmFjY291bnRTdWJzY3JpcHRpb24uYWNjb3VudExvYWRlcixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnVzZXJTdGF0c0FjY291bnRTdWJzY3JpcHRpb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3BvbGxpbmcnLFxuICAgICAgICAgICAgICAgIGFjY291bnRMb2FkZXI6IGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uLmFjY291bnRMb2FkZXIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy51c2VyQWNjb3VudFN1YnNjcmlwdGlvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnd2Vic29ja2V0JyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnVzZXJTdGF0c0FjY291bnRTdWJzY3JpcHRpb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3dlYnNvY2tldCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudXNlclN0YXRzKSB7XG4gICAgICAgICAgICB0aGlzLnVzZXJTdGF0cyA9IG5ldyB1c2VyU3RhdHNfMS5Vc2VyU3RhdHMoe1xuICAgICAgICAgICAgICAgIGRyaWZ0Q2xpZW50OiB0aGlzLFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXk6ICgwLCBwZGFfMS5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB0aGlzLmF1dGhvcml0eSksXG4gICAgICAgICAgICAgICAgYWNjb3VudFN1YnNjcmlwdGlvbjogdGhpcy51c2VyQWNjb3VudFN1YnNjcmlwdGlvbkNvbmZpZyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFya2V0TG9va3VwVGFibGUgPSBjb25maWcubWFya2V0TG9va3VwVGFibGU7XG4gICAgICAgIGlmIChjb25maWcuZW52ICYmICF0aGlzLm1hcmtldExvb2t1cFRhYmxlKSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtldExvb2t1cFRhYmxlID0gbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoY29uZmlnXzEuY29uZmlnc1tjb25maWcuZW52XS5NQVJLRVRfTE9PS1VQX1RBQkxFKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub01hcmtldHNBbmRPcmFjbGVzU3BlY2lmaWVkID0gY29uZmlnLnBlcnBNYXJrZXRJbmRleGVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGNvbmZpZy5zcG90TWFya2V0SW5kZXhlcyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICBjb25maWcub3JhY2xlSW5mb3MgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCgoX20gPSBjb25maWcuYWNjb3VudFN1YnNjcmlwdGlvbikgPT09IG51bGwgfHwgX20gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tLnR5cGUpID09PSAncG9sbGluZycpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjb3VudFN1YnNjcmliZXIgPSBuZXcgcG9sbGluZ0RyaWZ0Q2xpZW50QWNjb3VudFN1YnNjcmliZXJfMS5Qb2xsaW5nRHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlcih0aGlzLnByb2dyYW0sIGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uLmFjY291bnRMb2FkZXIsIChfbyA9IGNvbmZpZy5wZXJwTWFya2V0SW5kZXhlcykgIT09IG51bGwgJiYgX28gIT09IHZvaWQgMCA/IF9vIDogW10sIChfcCA9IGNvbmZpZy5zcG90TWFya2V0SW5kZXhlcykgIT09IG51bGwgJiYgX3AgIT09IHZvaWQgMCA/IF9wIDogW10sIChfcSA9IGNvbmZpZy5vcmFjbGVJbmZvcykgIT09IG51bGwgJiYgX3EgIT09IHZvaWQgMCA/IF9xIDogW10sIG5vTWFya2V0c0FuZE9yYWNsZXNTcGVjaWZpZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY2NvdW50U3Vic2NyaWJlciA9IG5ldyB3ZWJTb2NrZXREcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyXzEuV2ViU29ja2V0RHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlcih0aGlzLnByb2dyYW0sIChfciA9IGNvbmZpZy5wZXJwTWFya2V0SW5kZXhlcykgIT09IG51bGwgJiYgX3IgIT09IHZvaWQgMCA/IF9yIDogW10sIChfcyA9IGNvbmZpZy5zcG90TWFya2V0SW5kZXhlcykgIT09IG51bGwgJiYgX3MgIT09IHZvaWQgMCA/IF9zIDogW10sIChfdCA9IGNvbmZpZy5vcmFjbGVJbmZvcykgIT09IG51bGwgJiYgX3QgIT09IHZvaWQgMCA/IF90IDogW10sIG5vTWFya2V0c0FuZE9yYWNsZXNTcGVjaWZpZWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5ldmVudEVtaXR0ZXI7XG4gICAgICAgIHRoaXMudHhTZW5kZXIgPVxuICAgICAgICAgICAgKF91ID0gY29uZmlnLnR4U2VuZGVyKSAhPT0gbnVsbCAmJiBfdSAhPT0gdm9pZCAwID8gX3UgOiBuZXcgcmV0cnlUeFNlbmRlcl8xLlJldHJ5VHhTZW5kZXIoe1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb246IHRoaXMuY29ubmVjdGlvbixcbiAgICAgICAgICAgICAgICB3YWxsZXQ6IHRoaXMud2FsbGV0LFxuICAgICAgICAgICAgICAgIG9wdHM6IHRoaXMub3B0cyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRVc2VyTWFwS2V5KHN1YkFjY291bnRJZCwgYXV0aG9yaXR5KSB7XG4gICAgICAgIHJldHVybiBgJHtzdWJBY2NvdW50SWR9XyR7YXV0aG9yaXR5LnRvU3RyaW5nKCl9YDtcbiAgICB9XG4gICAgY3JlYXRlVXNlcihzdWJBY2NvdW50SWQsIGFjY291bnRTdWJzY3JpcHRpb25Db25maWcsIGF1dGhvcml0eSkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleVN5bmMpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIGF1dGhvcml0eSAhPT0gbnVsbCAmJiBhdXRob3JpdHkgIT09IHZvaWQgMCA/IGF1dGhvcml0eSA6IHRoaXMuYXV0aG9yaXR5LCBzdWJBY2NvdW50SWQpO1xuICAgICAgICByZXR1cm4gbmV3IHVzZXJfMS5Vc2VyKHtcbiAgICAgICAgICAgIGRyaWZ0Q2xpZW50OiB0aGlzLFxuICAgICAgICAgICAgdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICBhY2NvdW50U3Vic2NyaXB0aW9uOiBhY2NvdW50U3Vic2NyaXB0aW9uQ29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKCkge1xuICAgICAgICBsZXQgc3Vic2NyaWJlUHJvbWlzZXMgPSBbdGhpcy5hZGRBbmRTdWJzY3JpYmVUb1VzZXJzKCldLmNvbmNhdCh0aGlzLmFjY291bnRTdWJzY3JpYmVyLnN1YnNjcmliZSgpKTtcbiAgICAgICAgaWYgKHRoaXMudXNlclN0YXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZVByb21pc2VzID0gc3Vic2NyaWJlUHJvbWlzZXMuY29uY2F0KHRoaXMudXNlclN0YXRzLnN1YnNjcmliZSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IChhd2FpdCBQcm9taXNlLmFsbChzdWJzY3JpYmVQcm9taXNlcykpLnJlZHVjZSgoc3VjY2VzcywgcHJldlN1Y2Nlc3MpID0+IHN1Y2Nlc3MgJiYgcHJldlN1Y2Nlc3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5pc1N1YnNjcmliZWQ7XG4gICAgfVxuICAgIHN1YnNjcmliZVVzZXJzKCkge1xuICAgICAgICByZXR1cm4gWy4uLnRoaXMudXNlcnMudmFsdWVzKCldLm1hcCgodXNlcikgPT4gdXNlci5zdWJzY3JpYmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqXHRGb3JjZXMgdGhlIGFjY291bnRTdWJzY3JpYmVyIHRvIGZldGNoIGFjY291bnQgdXBkYXRlcyBmcm9tIHJwY1xuICAgICAqL1xuICAgIGFzeW5jIGZldGNoQWNjb3VudHMoKSB7XG4gICAgICAgIGxldCBwcm9taXNlcyA9IFsuLi50aGlzLnVzZXJzLnZhbHVlcygpXVxuICAgICAgICAgICAgLm1hcCgodXNlcikgPT4gdXNlci5mZXRjaEFjY291bnRzKCkpXG4gICAgICAgICAgICAuY29uY2F0KHRoaXMuYWNjb3VudFN1YnNjcmliZXIuZmV0Y2goKSk7XG4gICAgICAgIGlmICh0aGlzLnVzZXJTdGF0cykge1xuICAgICAgICAgICAgcHJvbWlzZXMgPSBwcm9taXNlcy5jb25jYXQodGhpcy51c2VyU3RhdHMuZmV0Y2hBY2NvdW50cygpKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBsZXQgdW5zdWJzY3JpYmVQcm9taXNlcyA9IHRoaXMudW5zdWJzY3JpYmVVc2VycygpLmNvbmNhdCh0aGlzLmFjY291bnRTdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICBpZiAodGhpcy51c2VyU3RhdHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmVQcm9taXNlcyA9IHVuc3Vic2NyaWJlUHJvbWlzZXMuY29uY2F0KHRoaXMudXNlclN0YXRzLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHVuc3Vic2NyaWJlUHJvbWlzZXMpO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZVVzZXJzKCkge1xuICAgICAgICByZXR1cm4gWy4uLnRoaXMudXNlcnMudmFsdWVzKCldLm1hcCgodXNlcikgPT4gdXNlci51bnN1YnNjcmliZSgpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U3RhdGVQdWJsaWNLZXkoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlUHVibGljS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVB1YmxpY0tleTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlUHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldERyaWZ0U3RhdGVBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVQdWJsaWNLZXk7XG4gICAgfVxuICAgIGdldFNpZ25lclB1YmxpY0tleSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2lnbmVyUHVibGljS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaWduZXJQdWJsaWNLZXk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaWduZXJQdWJsaWNLZXkgPSAoMCwgcGRhXzEuZ2V0RHJpZnRTaWduZXJQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQpO1xuICAgICAgICByZXR1cm4gdGhpcy5zaWduZXJQdWJsaWNLZXk7XG4gICAgfVxuICAgIGdldFN0YXRlQWNjb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudFN1YnNjcmliZXIuZ2V0U3RhdGVBY2NvdW50QW5kU2xvdCgpLmRhdGE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcmNlcyBhIGZldGNoIHRvIHJwYyBiZWZvcmUgcmV0dXJuaW5nIGFjY291bnRzLiBVc2VmdWwgZm9yIGFuY2hvciB0ZXN0cy5cbiAgICAgKi9cbiAgICBhc3luYyBmb3JjZUdldFN0YXRlQWNjb3VudCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci5mZXRjaCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5nZXRTdGF0ZUFjY291bnRBbmRTbG90KCkuZGF0YTtcbiAgICB9XG4gICAgZ2V0UGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5nZXRNYXJrZXRBY2NvdW50QW5kU2xvdChtYXJrZXRJbmRleCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JjZXMgYSBmZXRjaCB0byBycGMgYmVmb3JlIHJldHVybmluZyBhY2NvdW50cy4gVXNlZnVsIGZvciBhbmNob3IgdGVzdHMuXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICovXG4gICAgYXN5bmMgZm9yY2VHZXRQZXJwTWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBhd2FpdCB0aGlzLmFjY291bnRTdWJzY3JpYmVyLmZldGNoKCk7XG4gICAgICAgIGxldCBkYXRhID0gKF9hID0gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5nZXRNYXJrZXRBY2NvdW50QW5kU2xvdChtYXJrZXRJbmRleCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kYXRhO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHdoaWxlIChkYXRhID09PSB1bmRlZmluZWQgJiYgaSA8IDEwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjY291bnRTdWJzY3JpYmVyLmZldGNoKCk7XG4gICAgICAgICAgICBkYXRhID0gKF9iID0gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5nZXRNYXJrZXRBY2NvdW50QW5kU2xvdChtYXJrZXRJbmRleCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5kYXRhO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBnZXRQZXJwTWFya2V0QWNjb3VudHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRTdWJzY3JpYmVyXG4gICAgICAgICAgICAuZ2V0TWFya2V0QWNjb3VudHNBbmRTbG90cygpXG4gICAgICAgICAgICAuZmlsdGVyKCh2YWx1ZSkgPT4gdmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIC5tYXAoKHZhbHVlKSA9PiB2YWx1ZS5kYXRhKTtcbiAgICB9XG4gICAgZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudFN1YnNjcmliZXIuZ2V0U3BvdE1hcmtldEFjY291bnRBbmRTbG90KG1hcmtldEluZGV4KS5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JjZXMgYSBmZXRjaCB0byBycGMgYmVmb3JlIHJldHVybmluZyBhY2NvdW50cy4gVXNlZnVsIGZvciBhbmNob3IgdGVzdHMuXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICovXG4gICAgYXN5bmMgZm9yY2VHZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjY291bnRTdWJzY3JpYmVyLmZldGNoKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRTdWJzY3JpYmVyLmdldFNwb3RNYXJrZXRBY2NvdW50QW5kU2xvdChtYXJrZXRJbmRleCkuZGF0YTtcbiAgICB9XG4gICAgZ2V0U3BvdE1hcmtldEFjY291bnRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50U3Vic2NyaWJlclxuICAgICAgICAgICAgLmdldFNwb3RNYXJrZXRBY2NvdW50c0FuZFNsb3RzKClcbiAgICAgICAgICAgIC5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgLm1hcCgodmFsdWUpID0+IHZhbHVlLmRhdGEpO1xuICAgIH1cbiAgICBnZXRRdW90ZVNwb3RNYXJrZXRBY2NvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5nZXRTcG90TWFya2V0QWNjb3VudEFuZFNsb3QobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYKS5kYXRhO1xuICAgIH1cbiAgICBnZXRPcmFjbGVQcmljZURhdGFBbmRTbG90KG9yYWNsZVB1YmxpY0tleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5nZXRPcmFjbGVQcmljZURhdGFBbmRTbG90KG9yYWNsZVB1YmxpY0tleSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFNlcnVtVjNGdWxmaWxsbWVudENvbmZpZyhzZXJ1bU1hcmtldCkge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gYXdhaXQgKDAsIHBkYV8xLmdldFNlcnVtRnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHNlcnVtTWFya2V0KTtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLnByb2dyYW0uYWNjb3VudC5zZXJ1bVYzRnVsZmlsbG1lbnRDb25maWcuZmV0Y2goYWRkcmVzcykpO1xuICAgIH1cbiAgICBhc3luYyBnZXRQaG9lbml4VjFGdWxmaWxsbWVudENvbmZpZyhwaG9lbml4TWFya2V0KSB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSBhd2FpdCAoMCwgcGRhXzEuZ2V0UGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnUHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwaG9lbml4TWFya2V0KTtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLnByb2dyYW0uYWNjb3VudC5waG9lbml4VjFGdWxmaWxsbWVudENvbmZpZy5mZXRjaChhZGRyZXNzKSk7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoTWFya2V0TG9va3VwVGFibGVBY2NvdW50KCkge1xuICAgICAgICBpZiAodGhpcy5sb29rdXBUYWJsZUFjY291bnQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb29rdXBUYWJsZUFjY291bnQ7XG4gICAgICAgIGlmICghdGhpcy5tYXJrZXRMb29rdXBUYWJsZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01hcmtldCBsb29rdXAgdGFibGUgYWRkcmVzcyBub3Qgc2V0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9va3VwVGFibGVBY2NvdW50ID0gKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRBZGRyZXNzTG9va3VwVGFibGUodGhpcy5tYXJrZXRMb29rdXBUYWJsZSkpLnZhbHVlO1xuICAgICAgICB0aGlzLmxvb2t1cFRhYmxlQWNjb3VudCA9IGxvb2t1cFRhYmxlQWNjb3VudDtcbiAgICAgICAgcmV0dXJuIGxvb2t1cFRhYmxlQWNjb3VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSB3YWxsZXQgdG8gdXNlIGZvciBkcmlmdCB0cmFuc2FjdGlvbnMgYW5kIGxpbmtlZCB1c2VyIGFjY291bnRcbiAgICAgKiBAcGFyYW0gbmV3V2FsbGV0XG4gICAgICogQHBhcmFtIHN1YkFjY291bnRJZHNcbiAgICAgKiBAcGFyYW0gYWN0aXZlU3ViQWNjb3VudElkXG4gICAgICogQHBhcmFtIGluY2x1ZGVEZWxlZ2F0ZXNcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVXYWxsZXQobmV3V2FsbGV0LCBzdWJBY2NvdW50SWRzLCBhY3RpdmVTdWJBY2NvdW50SWQsIGluY2x1ZGVEZWxlZ2F0ZXMsIGF1dGhvcml0eVN1YmFjY291bnRNYXApIHtcbiAgICAgICAgY29uc3QgbmV3UHJvdmlkZXIgPSBuZXcgYW5jaG9yXzEuQW5jaG9yUHJvdmlkZXIodGhpcy5jb25uZWN0aW9uLCBuZXdXYWxsZXQsIHRoaXMub3B0cyk7XG4gICAgICAgIGNvbnN0IG5ld1Byb2dyYW0gPSBuZXcgYW5jaG9yXzEuUHJvZ3JhbShkcmlmdF9qc29uXzEuZGVmYXVsdCwgdGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgbmV3UHJvdmlkZXIpO1xuICAgICAgICB0aGlzLnNraXBMb2FkVXNlcnMgPSBmYWxzZTtcbiAgICAgICAgLy8gVXBkYXRlIHByb3ZpZGVyIGZvciB0eFNlbmRlciB3aXRoIG5ldyB3YWxsZXQgZGV0YWlsc1xuICAgICAgICB0aGlzLnR4U2VuZGVyLndhbGxldCA9IG5ld1dhbGxldDtcbiAgICAgICAgdGhpcy53YWxsZXQgPSBuZXdXYWxsZXQ7XG4gICAgICAgIHRoaXMucHJvdmlkZXIgPSBuZXdQcm92aWRlcjtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gbmV3UHJvZ3JhbTtcbiAgICAgICAgdGhpcy5hdXRob3JpdHkgPSBuZXdXYWxsZXQucHVibGljS2V5O1xuICAgICAgICB0aGlzLmFjdGl2ZVN1YkFjY291bnRJZCA9IGFjdGl2ZVN1YkFjY291bnRJZDtcbiAgICAgICAgdGhpcy51c2VyU3RhdHNBY2NvdW50UHVibGljS2V5ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmluY2x1ZGVEZWxlZ2F0ZXMgPSBpbmNsdWRlRGVsZWdhdGVzICE9PSBudWxsICYmIGluY2x1ZGVEZWxlZ2F0ZXMgIT09IHZvaWQgMCA/IGluY2x1ZGVEZWxlZ2F0ZXMgOiBmYWxzZTtcbiAgICAgICAgaWYgKGluY2x1ZGVEZWxlZ2F0ZXMgJiYgc3ViQWNjb3VudElkcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSBwYXNzIG9uZSBvZiBpbmNsdWRlRGVsZWdhdGVzIG9yIHN1YkFjY291bnRJZHMuIElmIHlvdSB3YW50IHRvIHNwZWNpZnkgc3ViYWNjb3VudCBpZHMgZm9yIG11bHRpcGxlIGF1dGhvcml0aWVzLCBwYXNzIGF1dGhvcml0eVN1YmFjY291bnRNYXAgaW5zdGVhZCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdXRob3JpdHlTdWJhY2NvdW50TWFwICYmIHN1YkFjY291bnRJZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuIG9ubHkgcGFzcyBvbmUgb2YgYXV0aG9yaXR5U3ViYWNjb3VudE1hcCBvciBzdWJBY2NvdW50SWRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF1dGhvcml0eVN1YmFjY291bnRNYXAgJiYgaW5jbHVkZURlbGVnYXRlcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSBwYXNzIG9uZSBvZiBhdXRob3JpdHlTdWJhY2NvdW50TWFwIG9yIGluY2x1ZGVEZWxlZ2F0ZXMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmF1dGhvcml0eVN1YkFjY291bnRNYXAgPSBhdXRob3JpdHlTdWJhY2NvdW50TWFwXG4gICAgICAgICAgICA/IGF1dGhvcml0eVN1YmFjY291bnRNYXBcbiAgICAgICAgICAgIDogc3ViQWNjb3VudElkc1xuICAgICAgICAgICAgICAgID8gbmV3IE1hcChbW3RoaXMuYXV0aG9yaXR5LnRvU3RyaW5nKCksIHN1YkFjY291bnRJZHNdXSlcbiAgICAgICAgICAgICAgICA6IG5ldyBNYXAoKTtcbiAgICAgICAgbGV0IHN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5pc1N1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMudW5zdWJzY3JpYmVVc2VycygpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJTdGF0cykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlclN0YXRzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VyU3RhdHMgPSBuZXcgdXNlclN0YXRzXzEuVXNlclN0YXRzKHtcbiAgICAgICAgICAgICAgICAgICAgZHJpZnRDbGllbnQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXk6IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50U3Vic2NyaXB0aW9uOiB0aGlzLnVzZXJTdGF0c0FjY291bnRTdWJzY3JpcHRpb25Db25maWcsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyU3RhdHMuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVzZXJzLmNsZWFyKCk7XG4gICAgICAgICAgICBzdWNjZXNzID0gYXdhaXQgdGhpcy5hZGRBbmRTdWJzY3JpYmVUb1VzZXJzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfVxuICAgIHN3aXRjaEFjdGl2ZVVzZXIoc3ViQWNjb3VudElkLCBhdXRob3JpdHkpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVTdWJBY2NvdW50SWQgPSBzdWJBY2NvdW50SWQ7XG4gICAgICAgIHRoaXMuYXV0aG9yaXR5ID0gYXV0aG9yaXR5ICE9PSBudWxsICYmIGF1dGhvcml0eSAhPT0gdm9pZCAwID8gYXV0aG9yaXR5IDogdGhpcy5hdXRob3JpdHk7XG4gICAgICAgIHRoaXMudXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB0aGlzLmF1dGhvcml0eSk7XG4gICAgfVxuICAgIGFzeW5jIGFkZFVzZXIoc3ViQWNjb3VudElkLCBhdXRob3JpdHksIHVzZXJBY2NvdW50KSB7XG4gICAgICAgIGF1dGhvcml0eSA9IGF1dGhvcml0eSAhPT0gbnVsbCAmJiBhdXRob3JpdHkgIT09IHZvaWQgMCA/IGF1dGhvcml0eSA6IHRoaXMuYXV0aG9yaXR5O1xuICAgICAgICBjb25zdCB1c2VyS2V5ID0gdGhpcy5nZXRVc2VyTWFwS2V5KHN1YkFjY291bnRJZCwgYXV0aG9yaXR5KTtcbiAgICAgICAgaWYgKHRoaXMudXNlcnMuaGFzKHVzZXJLZXkpICYmIHRoaXMudXNlcnMuZ2V0KHVzZXJLZXkpLmlzU3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlciA9IHRoaXMuY3JlYXRlVXNlcihzdWJBY2NvdW50SWQsIHRoaXMudXNlckFjY291bnRTdWJzY3JpcHRpb25Db25maWcsIGF1dGhvcml0eSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZXIuc3Vic2NyaWJlKHVzZXJBY2NvdW50KTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy51c2Vycy5zZXQodXNlcktleSwgdXNlcik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuZCBzdWJzY3JpYmVzIHRvIHVzZXJzIGJhc2VkIG9uIHBhcmFtcyBzZXQgYnkgdGhlIGNvbnN0cnVjdG9yIG9yIGJ5IHVwZGF0ZVdhbGxldC5cbiAgICAgKi9cbiAgICBhc3luYyBhZGRBbmRTdWJzY3JpYmVUb1VzZXJzKCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xuICAgICAgICAvLyBzYXZlIHRoZSBycGMgY2FsbHMgaWYgZHJpZnRjbGllbnQgaXMgaW5pdGlhbGl6ZWQgd2l0aG91dCBhIHJlYWwgd2FsbGV0XG4gICAgICAgIGlmICh0aGlzLnNraXBMb2FkVXNlcnMpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmF1dGhvcml0eVN1YkFjY291bnRNYXAgJiYgdGhpcy5hdXRob3JpdHlTdWJBY2NvdW50TWFwLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmF1dGhvcml0eVN1YkFjY291bnRNYXAuZm9yRWFjaChhc3luYyAodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViQWNjb3VudElkIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgJiYgKGF3YWl0IHRoaXMuYWRkVXNlcihzdWJBY2NvdW50SWQsIG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KGtleSkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVN1YkFjY291bnRJZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaEFjdGl2ZVVzZXIoKF9hID0gWy4uLnRoaXMuYXV0aG9yaXR5U3ViQWNjb3VudE1hcC52YWx1ZXMoKV1bMF1bMF0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDAsIG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KChfYiA9IFsuLi50aGlzLmF1dGhvcml0eVN1YkFjY291bnRNYXAua2V5cygpXVswXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdGhpcy5hdXRob3JpdHkudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXNlckFjY291bnRzID0gKF9jID0gKGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRzRm9yQXV0aG9yaXR5KHRoaXMud2FsbGV0LnB1YmxpY0tleSkpKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBbXTtcbiAgICAgICAgICAgIGxldCBkZWxlZ2F0ZWRBY2NvdW50cyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5jbHVkZURlbGVnYXRlcykge1xuICAgICAgICAgICAgICAgIGRlbGVnYXRlZEFjY291bnRzID1cbiAgICAgICAgICAgICAgICAgICAgKF9kID0gKGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRzRm9yRGVsZWdhdGUodGhpcy53YWxsZXQucHVibGljS2V5KSkpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBhY2NvdW50IG9mIHVzZXJBY2NvdW50cy5jb25jYXQoZGVsZWdhdGVkQWNjb3VudHMpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5hZGRVc2VyKGFjY291bnQuc3ViQWNjb3VudElkLCBhY2NvdW50LmF1dGhvcml0eSwgYWNjb3VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlU3ViQWNjb3VudElkID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQWN0aXZlVXNlcigoX2YgPSAoX2UgPSB1c2VyQWNjb3VudHMuY29uY2F0KGRlbGVnYXRlZEFjY291bnRzKVswXSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnN1YkFjY291bnRJZCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMCwgKF9oID0gKF9nID0gdXNlckFjY291bnRzLmNvbmNhdChkZWxlZ2F0ZWRBY2NvdW50cylbMF0pID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5hdXRob3JpdHkpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IHRoaXMuYXV0aG9yaXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplVXNlckFjY291bnQoc3ViQWNjb3VudElkID0gMCwgbmFtZSA9IHVzZXJOYW1lXzEuREVGQVVMVF9VU0VSX05BTUUsIHJlZmVycmVySW5mbykge1xuICAgICAgICBjb25zdCBbdXNlckFjY291bnRQdWJsaWNLZXksIGluaXRpYWxpemVVc2VyQWNjb3VudEl4XSA9IGF3YWl0IHRoaXMuZ2V0SW5pdGlhbGl6ZVVzZXJJbnN0cnVjdGlvbnMoc3ViQWNjb3VudElkLCBuYW1lLCByZWZlcnJlckluZm8pO1xuICAgICAgICBjb25zdCB0eCA9IG5ldyB3ZWIzX2pzXzEuVHJhbnNhY3Rpb24oKTtcbiAgICAgICAgaWYgKHN1YkFjY291bnRJZCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5jaGVja0lmQWNjb3VudEV4aXN0cyh0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKSkpKSB7XG4gICAgICAgICAgICAgICAgdHguYWRkKGF3YWl0IHRoaXMuZ2V0SW5pdGlhbGl6ZVVzZXJTdGF0c0l4KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHR4LmFkZChpbml0aWFsaXplVXNlckFjY291bnRJeCk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hZGRVc2VyKHN1YkFjY291bnRJZCk7XG4gICAgICAgIHJldHVybiBbdHhTaWcsIHVzZXJBY2NvdW50UHVibGljS2V5XTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0SW5pdGlhbGl6ZVVzZXJJbnN0cnVjdGlvbnMoc3ViQWNjb3VudElkID0gMCwgbmFtZSA9IHVzZXJOYW1lXzEuREVGQVVMVF9VU0VSX05BTUUsIHJlZmVycmVySW5mbykge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9IGF3YWl0ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy53YWxsZXQucHVibGljS2V5LCBzdWJBY2NvdW50SWQpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBpZiAocmVmZXJyZXJJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHB1YmtleTogcmVmZXJyZXJJbmZvLnJlZmVycmVyLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlclN0YXRzLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmdldFN0YXRlQWNjb3VudCgpO1xuICAgICAgICBpZiAoIXN0YXRlLndoaXRlbGlzdE1pbnQuZXF1YWxzKHdlYjNfanNfMS5QdWJsaWNLZXkuZGVmYXVsdCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGFzc29jaWF0ZWRUb2tlblB1YmxpY0tleSA9IGF3YWl0ICgwLCBzcGxfdG9rZW5fMS5nZXRBc3NvY2lhdGVkVG9rZW5BZGRyZXNzKShzdGF0ZS53aGl0ZWxpc3RNaW50LCB0aGlzLndhbGxldC5wdWJsaWNLZXkpO1xuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgcHVia2V5OiBhc3NvY2lhdGVkVG9rZW5QdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmFtZUJ1ZmZlciA9ICgwLCB1c2VyTmFtZV8xLmVuY29kZU5hbWUpKG5hbWUpO1xuICAgICAgICBjb25zdCBpbml0aWFsaXplVXNlckFjY291bnRJeCA9IGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5pbml0aWFsaXplVXNlcihzdWJBY2NvdW50SWQsIG5hbWVCdWZmZXIsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBwYXllcjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHJlbnQ6IGFuY2hvci53ZWIzLlNZU1ZBUl9SRU5UX1BVQktFWSxcbiAgICAgICAgICAgICAgICBzeXN0ZW1Qcm9ncmFtOiBhbmNob3Iud2ViMy5TeXN0ZW1Qcm9ncmFtLnByb2dyYW1JZCxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFt1c2VyQWNjb3VudFB1YmxpY0tleSwgaW5pdGlhbGl6ZVVzZXJBY2NvdW50SXhdO1xuICAgIH1cbiAgICBhc3luYyBnZXRJbml0aWFsaXplVXNlclN0YXRzSXgoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uaW5pdGlhbGl6ZVVzZXJTdGF0cyh7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgcGF5ZXI6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICByZW50OiBhbmNob3Iud2ViMy5TWVNWQVJfUkVOVF9QVUJLRVksXG4gICAgICAgICAgICAgICAgc3lzdGVtUHJvZ3JhbTogYW5jaG9yLndlYjMuU3lzdGVtUHJvZ3JhbS5wcm9ncmFtSWQsXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXROZXh0U3ViQWNjb3VudElkKCkge1xuICAgICAgICBjb25zdCB1c2VyU3RhdHMgPSB0aGlzLmdldFVzZXJTdGF0cygpO1xuICAgICAgICBsZXQgdXNlclN0YXRzQWNjb3VudDtcbiAgICAgICAgaWYgKCF1c2VyU3RhdHMpIHtcbiAgICAgICAgICAgIHVzZXJTdGF0c0FjY291bnQgPSBhd2FpdCAoMCwgZmV0Y2hfMS5mZXRjaFVzZXJTdGF0c0FjY291bnQpKHRoaXMuY29ubmVjdGlvbiwgdGhpcy5wcm9ncmFtLCB0aGlzLndhbGxldC5wdWJsaWNLZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXNlclN0YXRzQWNjb3VudCA9IHVzZXJTdGF0cy5nZXRBY2NvdW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZXJTdGF0c0FjY291bnQubnVtYmVyT2ZTdWJBY2NvdW50c0NyZWF0ZWQ7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemVSZWZlcnJlck5hbWUobmFtZSkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleVN5bmMpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgMCk7XG4gICAgICAgIGNvbnN0IG5hbWVCdWZmZXIgPSAoMCwgdXNlck5hbWVfMS5lbmNvZGVOYW1lKShuYW1lKTtcbiAgICAgICAgY29uc3QgcmVmZXJyZXJOYW1lQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRSZWZlcnJlck5hbWVQdWJsaWNLZXlTeW5jKSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBuYW1lQnVmZmVyKTtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24uaW5pdGlhbGl6ZVJlZmVycmVyTmFtZShuYW1lQnVmZmVyLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHJlZmVycmVyTmFtZTogcmVmZXJyZXJOYW1lQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHM6IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHBheWVyOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgcmVudDogYW5jaG9yLndlYjMuU1lTVkFSX1JFTlRfUFVCS0VZLFxuICAgICAgICAgICAgICAgIHN5c3RlbVByb2dyYW06IGFuY2hvci53ZWIzLlN5c3RlbVByb2dyYW0ucHJvZ3JhbUlkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVVc2VyTmFtZShuYW1lLCBzdWJBY2NvdW50SWQgPSAwKSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5ID0gKDAsIHBkYV8xLmdldFVzZXJBY2NvdW50UHVibGljS2V5U3luYykodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy53YWxsZXQucHVibGljS2V5LCBzdWJBY2NvdW50SWQpO1xuICAgICAgICBjb25zdCBuYW1lQnVmZmVyID0gKDAsIHVzZXJOYW1lXzEuZW5jb2RlTmFtZSkobmFtZSk7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVVzZXJOYW1lKHN1YkFjY291bnRJZCwgbmFtZUJ1ZmZlciwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlVXNlckN1c3RvbU1hcmdpblJhdGlvKG1hcmdpblJhdGlvLCBzdWJBY2NvdW50SWQgPSAwKSB7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnVwZGF0ZVVzZXJDdXN0b21NYXJnaW5SYXRpbyhzdWJBY2NvdW50SWQsIG1hcmdpblJhdGlvLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHVzZXI6IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0VXBkYXRlVXNlck1hcmdpblRyYWRpbmdFbmFibGVkSXgobWFyZ2luVHJhZGluZ0VuYWJsZWQsIHN1YkFjY291bnRJZCA9IDAsIHVzZXJBY2NvdW50UHVibGljS2V5KSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5VG9Vc2UgPSB1c2VyQWNjb3VudFB1YmxpY0tleSB8fFxuICAgICAgICAgICAgKDAsIHBkYV8xLmdldFVzZXJBY2NvdW50UHVibGljS2V5U3luYykodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy53YWxsZXQucHVibGljS2V5LCBzdWJBY2NvdW50SWQpO1xuICAgICAgICBhd2FpdCB0aGlzLmFkZFVzZXIoc3ViQWNjb3VudElkLCB0aGlzLndhbGxldC5wdWJsaWNLZXkpO1xuICAgICAgICBsZXQgcmVtYWluaW5nQWNjb3VudHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoc3ViQWNjb3VudElkKV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24udXBkYXRlVXNlck1hcmdpblRyYWRpbmdFbmFibGVkKHN1YkFjY291bnRJZCwgbWFyZ2luVHJhZGluZ0VuYWJsZWQsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXlUb1VzZSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVVzZXJNYXJnaW5UcmFkaW5nRW5hYmxlZChtYXJnaW5UcmFkaW5nRW5hYmxlZCwgc3ViQWNjb3VudElkID0gMCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleVN5bmMpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgc3ViQWNjb3VudElkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hZGRVc2VyKHN1YkFjY291bnRJZCwgdGhpcy53YWxsZXQucHVibGljS2V5KTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoc3ViQWNjb3VudElkKV0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi51cGRhdGVVc2VyTWFyZ2luVHJhZGluZ0VuYWJsZWQoc3ViQWNjb3VudElkLCBtYXJnaW5UcmFkaW5nRW5hYmxlZCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVVc2VyRGVsZWdhdGUoZGVsZWdhdGUsIHN1YkFjY291bnRJZCA9IDApIHtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLnByb2dyYW0udHJhbnNhY3Rpb24udXBkYXRlVXNlckRlbGVnYXRlKHN1YkFjY291bnRJZCwgZGVsZWdhdGUsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgdXNlcjogYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBmZXRjaEFsbFVzZXJBY2NvdW50cyhpbmNsdWRlSWRsZSA9IHRydWUpIHtcbiAgICAgICAgbGV0IGZpbHRlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghaW5jbHVkZUlkbGUpIHtcbiAgICAgICAgICAgIGZpbHRlcnMgPSBbKDAsIG1lbWNtcF8xLmdldE5vbklkbGVVc2VyRmlsdGVyKSgpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMucHJvZ3JhbS5hY2NvdW50LnVzZXIuYWxsKGZpbHRlcnMpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0VXNlckFjY291bnRzRm9yRGVsZWdhdGUoZGVsZWdhdGUpIHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbUFjY291bnRzID0gYXdhaXQgdGhpcy5wcm9ncmFtLmFjY291bnQudXNlci5hbGwoW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1lbWNtcDoge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDQwLFxuICAgICAgICAgICAgICAgICAgICAvKiogZGF0YSB0byBtYXRjaCwgYXMgYmFzZS01OCBlbmNvZGVkIHN0cmluZyBhbmQgbGltaXRlZCB0byBsZXNzIHRoYW4gMTI5IGJ5dGVzICovXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzOiBiczU4XzEuZGVmYXVsdC5lbmNvZGUoZGVsZWdhdGUudG9CdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgICByZXR1cm4gcHJvZ3JhbUFjY291bnRzXG4gICAgICAgICAgICAubWFwKChwcm9ncmFtQWNjb3VudCkgPT4gcHJvZ3JhbUFjY291bnQuYWNjb3VudClcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnN1YkFjY291bnRJZCAtIGIuc3ViQWNjb3VudElkKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0VXNlckFjY291bnRzQW5kQWRkcmVzc2VzRm9yQXV0aG9yaXR5KGF1dGhvcml0eSkge1xuICAgICAgICBjb25zdCBwcm9ncmFtQWNjb3VudHMgPSBhd2FpdCB0aGlzLnByb2dyYW0uYWNjb3VudC51c2VyLmFsbChbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWVtY21wOiB7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogOCxcbiAgICAgICAgICAgICAgICAgICAgLyoqIGRhdGEgdG8gbWF0Y2gsIGFzIGJhc2UtNTggZW5jb2RlZCBzdHJpbmcgYW5kIGxpbWl0ZWQgdG8gbGVzcyB0aGFuIDEyOSBieXRlcyAqL1xuICAgICAgICAgICAgICAgICAgICBieXRlczogYnM1OF8xLmRlZmF1bHQuZW5jb2RlKGF1dGhvcml0eS50b0J1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBwcm9ncmFtQWNjb3VudHMubWFwKChwcm9ncmFtQWNjb3VudCkgPT4gcHJvZ3JhbUFjY291bnQpO1xuICAgIH1cbiAgICBhc3luYyBnZXRVc2VyQWNjb3VudHNGb3JBdXRob3JpdHkoYXV0aG9yaXR5KSB7XG4gICAgICAgIGNvbnN0IHByb2dyYW1BY2NvdW50cyA9IGF3YWl0IHRoaXMucHJvZ3JhbS5hY2NvdW50LnVzZXIuYWxsKFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtZW1jbXA6IHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiA4LFxuICAgICAgICAgICAgICAgICAgICAvKiogZGF0YSB0byBtYXRjaCwgYXMgYmFzZS01OCBlbmNvZGVkIHN0cmluZyBhbmQgbGltaXRlZCB0byBsZXNzIHRoYW4gMTI5IGJ5dGVzICovXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzOiBiczU4XzEuZGVmYXVsdC5lbmNvZGUoYXV0aG9yaXR5LnRvQnVmZmVyKCkpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIHByb2dyYW1BY2NvdW50c1xuICAgICAgICAgICAgLm1hcCgocHJvZ3JhbUFjY291bnQpID0+IHByb2dyYW1BY2NvdW50LmFjY291bnQpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5zdWJBY2NvdW50SWQgLSBiLnN1YkFjY291bnRJZCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFJlZmVycmVkVXNlclN0YXRzQWNjb3VudHNCeVJlZmVycmVyKHJlZmVycmVyKSB7XG4gICAgICAgIGNvbnN0IHByb2dyYW1BY2NvdW50cyA9IGF3YWl0IHRoaXMucHJvZ3JhbS5hY2NvdW50LnVzZXJTdGF0cy5hbGwoW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1lbWNtcDoge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDQwLFxuICAgICAgICAgICAgICAgICAgICAvKiogZGF0YSB0byBtYXRjaCwgYXMgYmFzZS01OCBlbmNvZGVkIHN0cmluZyBhbmQgbGltaXRlZCB0byBsZXNzIHRoYW4gMTI5IGJ5dGVzICovXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzOiBiczU4XzEuZGVmYXVsdC5lbmNvZGUocmVmZXJyZXIudG9CdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgICByZXR1cm4gcHJvZ3JhbUFjY291bnRzLm1hcCgocHJvZ3JhbUFjY291bnQpID0+IHByb2dyYW1BY2NvdW50LmFjY291bnQpO1xuICAgIH1cbiAgICBhc3luYyBnZXRSZWZlcnJlck5hbWVBY2NvdW50c0ZvckF1dGhvcml0eShhdXRob3JpdHkpIHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbUFjY291bnRzID0gYXdhaXQgdGhpcy5wcm9ncmFtLmFjY291bnQucmVmZXJyZXJOYW1lLmFsbChbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWVtY21wOiB7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogOCxcbiAgICAgICAgICAgICAgICAgICAgLyoqIGRhdGEgdG8gbWF0Y2gsIGFzIGJhc2UtNTggZW5jb2RlZCBzdHJpbmcgYW5kIGxpbWl0ZWQgdG8gbGVzcyB0aGFuIDEyOSBieXRlcyAqL1xuICAgICAgICAgICAgICAgICAgICBieXRlczogYnM1OF8xLmRlZmF1bHQuZW5jb2RlKGF1dGhvcml0eS50b0J1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICAgIHJldHVybiBwcm9ncmFtQWNjb3VudHMubWFwKChwcm9ncmFtQWNjb3VudCkgPT4gcHJvZ3JhbUFjY291bnQuYWNjb3VudCk7XG4gICAgfVxuICAgIGFzeW5jIGRlbGV0ZVVzZXIoc3ViQWNjb3VudElkID0gMCwgdHhQYXJhbXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleVN5bmMpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgc3ViQWNjb3VudElkKTtcbiAgICAgICAgY29uc3QgaXggPSBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uZGVsZXRlVXNlcih7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oaXgsIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIGNvbnN0IHVzZXJNYXBLZXkgPSB0aGlzLmdldFVzZXJNYXBLZXkoc3ViQWNjb3VudElkLCB0aGlzLndhbGxldC5wdWJsaWNLZXkpO1xuICAgICAgICBhd2FpdCAoKF9hID0gdGhpcy51c2Vycy5nZXQodXNlck1hcEtleSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51bnN1YnNjcmliZSgpKTtcbiAgICAgICAgdGhpcy51c2Vycy5kZWxldGUodXNlck1hcEtleSk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgZ2V0VXNlcihzdWJBY2NvdW50SWQsIGF1dGhvcml0eSkge1xuICAgICAgICBzdWJBY2NvdW50SWQgPSBzdWJBY2NvdW50SWQgIT09IG51bGwgJiYgc3ViQWNjb3VudElkICE9PSB2b2lkIDAgPyBzdWJBY2NvdW50SWQgOiB0aGlzLmFjdGl2ZVN1YkFjY291bnRJZDtcbiAgICAgICAgYXV0aG9yaXR5ID0gYXV0aG9yaXR5ICE9PSBudWxsICYmIGF1dGhvcml0eSAhPT0gdm9pZCAwID8gYXV0aG9yaXR5IDogdGhpcy5hdXRob3JpdHk7XG4gICAgICAgIGNvbnN0IHVzZXJNYXBLZXkgPSB0aGlzLmdldFVzZXJNYXBLZXkoc3ViQWNjb3VudElkLCBhdXRob3JpdHkpO1xuICAgICAgICBpZiAoIXRoaXMudXNlcnMuaGFzKHVzZXJNYXBLZXkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERyaWZ0Q2xpZW50IGhhcyBubyB1c2VyIGZvciB1c2VyIGlkICR7dXNlck1hcEtleX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy51c2Vycy5nZXQodXNlck1hcEtleSk7XG4gICAgfVxuICAgIGhhc1VzZXIoc3ViQWNjb3VudElkLCBhdXRob3JpdHkpIHtcbiAgICAgICAgc3ViQWNjb3VudElkID0gc3ViQWNjb3VudElkICE9PSBudWxsICYmIHN1YkFjY291bnRJZCAhPT0gdm9pZCAwID8gc3ViQWNjb3VudElkIDogdGhpcy5hY3RpdmVTdWJBY2NvdW50SWQ7XG4gICAgICAgIGF1dGhvcml0eSA9IGF1dGhvcml0eSAhPT0gbnVsbCAmJiBhdXRob3JpdHkgIT09IHZvaWQgMCA/IGF1dGhvcml0eSA6IHRoaXMuYXV0aG9yaXR5O1xuICAgICAgICBjb25zdCB1c2VyTWFwS2V5ID0gdGhpcy5nZXRVc2VyTWFwS2V5KHN1YkFjY291bnRJZCwgYXV0aG9yaXR5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlcnMuaGFzKHVzZXJNYXBLZXkpO1xuICAgIH1cbiAgICBnZXRVc2VycygpIHtcbiAgICAgICAgLy8gZGVsZWdhdGUgdXNlcnMgZ2V0IGFkZGVkIHRvIHRoZSBlbmRcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLnVzZXJzLnZhbHVlcygpXVxuICAgICAgICAgICAgLmZpbHRlcigoYWNjdCkgPT4gYWNjdC5nZXRVc2VyQWNjb3VudCgpLmF1dGhvcml0eS5lcXVhbHModGhpcy53YWxsZXQucHVibGljS2V5KSlcbiAgICAgICAgICAgIC5jb25jYXQoWy4uLnRoaXMudXNlcnMudmFsdWVzKCldLmZpbHRlcigoYWNjdCkgPT4gIWFjY3QuZ2V0VXNlckFjY291bnQoKS5hdXRob3JpdHkuZXF1YWxzKHRoaXMud2FsbGV0LnB1YmxpY0tleSkpKTtcbiAgICB9XG4gICAgZ2V0VXNlclN0YXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyU3RhdHM7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoUmVmZXJyZXJOYW1lQWNjb3VudChuYW1lKSB7XG4gICAgICAgIGNvbnN0IG5hbWVCdWZmZXIgPSAoMCwgdXNlck5hbWVfMS5lbmNvZGVOYW1lKShuYW1lKTtcbiAgICAgICAgY29uc3QgcmVmZXJyZXJOYW1lQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRSZWZlcnJlck5hbWVQdWJsaWNLZXlTeW5jKSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBuYW1lQnVmZmVyKTtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLnByb2dyYW0uYWNjb3VudC5yZWZlcnJlck5hbWUuZmV0Y2gocmVmZXJyZXJOYW1lQWNjb3VudFB1YmxpY0tleSkpO1xuICAgIH1cbiAgICBnZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCkge1xuICAgICAgICBpZiAodGhpcy51c2VyU3RhdHNBY2NvdW50UHVibGljS2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51c2VyU3RhdHNBY2NvdW50UHVibGljS2V5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB0aGlzLmF1dGhvcml0eSk7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXk7XG4gICAgfVxuICAgIGFzeW5jIGdldFVzZXJBY2NvdW50UHVibGljS2V5KHN1YkFjY291bnRJZCwgYXV0aG9yaXR5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVzZXIoc3ViQWNjb3VudElkLCBhdXRob3JpdHkpLnVzZXJBY2NvdW50UHVibGljS2V5O1xuICAgIH1cbiAgICBnZXRVc2VyQWNjb3VudChzdWJBY2NvdW50SWQsIGF1dGhvcml0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyKHN1YkFjY291bnRJZCwgYXV0aG9yaXR5KS5nZXRVc2VyQWNjb3VudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JjZXMgYSBmZXRjaCB0byBycGMgYmVmb3JlIHJldHVybmluZyBhY2NvdW50cy4gVXNlZnVsIGZvciBhbmNob3IgdGVzdHMuXG4gICAgICogQHBhcmFtIHN1YkFjY291bnRJZFxuICAgICAqL1xuICAgIGFzeW5jIGZvcmNlR2V0VXNlckFjY291bnQoc3ViQWNjb3VudElkKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VXNlcihzdWJBY2NvdW50SWQpLmZldGNoQWNjb3VudHMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlcihzdWJBY2NvdW50SWQpLmdldFVzZXJBY2NvdW50KCk7XG4gICAgfVxuICAgIGdldFVzZXJBY2NvdW50QW5kU2xvdChzdWJBY2NvdW50SWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlcihzdWJBY2NvdW50SWQpLmdldFVzZXJBY2NvdW50QW5kU2xvdCgpO1xuICAgIH1cbiAgICBnZXRTcG90UG9zaXRpb24obWFya2V0SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlckFjY291bnQoKS5zcG90UG9zaXRpb25zLmZpbmQoKHNwb3RQb3NpdGlvbikgPT4gc3BvdFBvc2l0aW9uLm1hcmtldEluZGV4ID09PSBtYXJrZXRJbmRleCk7XG4gICAgfVxuICAgIGdldFF1b3RlQXNzZXRUb2tlbkFtb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VG9rZW5BbW91bnQobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdG9rZW4gYW1vdW50IGZvciBhIGdpdmVuIG1hcmtldC4gVGhlIHNwb3QgbWFya2V0IHByZWNpc2lvbiBpcyBiYXNlZCBvbiB0aGUgdG9rZW4gbWludCBkZWNpbWFscy5cbiAgICAgKiBQb3NpdGl2ZSBpZiBpdCBpcyBhIGRlcG9zaXQsIG5lZ2F0aXZlIGlmIGl0IGlzIGEgYm9ycm93LlxuICAgICAqIEBwYXJhbSBtYXJrZXRJbmRleFxuICAgICAqL1xuICAgIGdldFRva2VuQW1vdW50KG1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHNwb3RQb3NpdGlvbiA9IHRoaXMuZ2V0U3BvdFBvc2l0aW9uKG1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKHNwb3RQb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICByZXR1cm4gKDAsIHNwb3RCYWxhbmNlXzEuZ2V0U2lnbmVkVG9rZW5BbW91bnQpKCgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShzcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldCwgc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlKSwgc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYW4gYW1vdW50IHRvIHRoZSBzcG90IHByZWNpc2lvbiBmb3IgYSBnaXZlbiBtYXJrZXQuIFRoZSBzcG90IG1hcmtldCBwcmVjaXNpb24gaXMgYmFzZWQgb24gdGhlIHRva2VuIG1pbnQgZGVjaW1hbHMuXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIGFtb3VudFxuICAgICAqL1xuICAgIGNvbnZlcnRUb1Nwb3RQcmVjaXNpb24obWFya2V0SW5kZXgsIGFtb3VudCkge1xuICAgICAgICBjb25zdCBzcG90TWFya2V0ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiAoMCwgc3BvdE1hcmtldF8xLmNhc3ROdW1iZXJUb1Nwb3RQcmVjaXNpb24pKGFtb3VudCwgc3BvdE1hcmtldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIGFtb3VudCB0byB0aGUgcGVycCBwcmVjaXNpb24uIFRoZSBwZXJwIG1hcmtldCBwcmVjaXNpb24gaXMge0BsaW5rIEJBU0VfUFJFQ0lTSU9OfSAoMWU5KS5cbiAgICAgKiBAcGFyYW0gYW1vdW50XG4gICAgICovXG4gICAgY29udmVydFRvUGVycFByZWNpc2lvbihhbW91bnQpIHtcbiAgICAgICAgYW1vdW50ID0gdHlwZW9mIGFtb3VudCA9PT0gJ251bWJlcicgPyBuZXcgYW5jaG9yXzEuQk4oYW1vdW50KSA6IGFtb3VudDtcbiAgICAgICAgcmV0dXJuIGFtb3VudC5tdWwobnVtZXJpY0NvbnN0YW50c18xLkJBU0VfUFJFQ0lTSU9OKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYW4gYW1vdW50IHRvIHRoZSBwcmljZSBwcmVjaXNpb24uIFRoZSBwZXJwIG1hcmtldCBwcmVjaXNpb24gaXMge0BsaW5rIFBSSUNFX1BSRUNJU0lPTn0gKDFlNikuXG4gICAgICogQHBhcmFtIGFtb3VudFxuICAgICAqL1xuICAgIGNvbnZlcnRUb1ByaWNlUHJlY2lzaW9uKGFtb3VudCkge1xuICAgICAgICBhbW91bnQgPSB0eXBlb2YgYW1vdW50ID09PSAnbnVtYmVyJyA/IG5ldyBhbmNob3JfMS5CTihhbW91bnQpIDogYW1vdW50O1xuICAgICAgICByZXR1cm4gYW1vdW50Lm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRWFjaCBkcmlmdCBpbnN0cnVjdGlvbiBtdXN0IGluY2x1ZGUgcGVycCBhbmQgc3BvcnQgbWFya2V0IGFjY291bnRzIGluIHRoZSBpeCByZW1haW5pbmcgYWNjb3VudHMuXG4gICAgICogVXNlIHRoaXMgZnVuY3Rpb24gdG8gZm9yY2UgYSBzdWJzZXQgb2YgbWFya2V0cyB0byBiZSBpbmNsdWRlZCBpbiB0aGUgcmVtYWluaW5nIGFjY291bnRzIGZvciBldmVyeSBpeFxuICAgICAqXG4gICAgICogQHBhcmFtIHBlcnBNYXJrZXRJbmRleGVzXG4gICAgICogQHBhcmFtIHNwb3RNYXJrZXRJbmRleGVzXG4gICAgICovXG4gICAgbXVzdEluY2x1ZGVNYXJrZXRzSW5JeCh7IHBlcnBNYXJrZXRJbmRleGVzLCBzcG90TWFya2V0SW5kZXhlcywgfSkge1xuICAgICAgICBwZXJwTWFya2V0SW5kZXhlcy5mb3JFYWNoKChwZXJwTWFya2V0SW5kZXgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXVzdEluY2x1ZGVQZXJwTWFya2V0SW5kZXhlcy5hZGQocGVycE1hcmtldEluZGV4KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNwb3RNYXJrZXRJbmRleGVzLmZvckVhY2goKHNwb3RNYXJrZXRJbmRleCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXN0SW5jbHVkZVNwb3RNYXJrZXRJbmRleGVzLmFkZChzcG90TWFya2V0SW5kZXgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0UmVtYWluaW5nQWNjb3VudHMocGFyYW1zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgeyBvcmFjbGVBY2NvdW50TWFwLCBzcG90TWFya2V0QWNjb3VudE1hcCwgcGVycE1hcmtldEFjY291bnRNYXAgfSA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudE1hcHNGb3JVc2VycyhwYXJhbXMudXNlckFjY291bnRzKTtcbiAgICAgICAgaWYgKHBhcmFtcy51c2VNYXJrZXRMYXN0U2xvdENhY2hlKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0VXNlclNsb3QgPSAoX2EgPSB0aGlzLmdldFVzZXJBY2NvdW50QW5kU2xvdCgpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc2xvdDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW21hcmtldEluZGV4LCBzbG90LF0gb2YgdGhpcy5wZXJwTWFya2V0TGFzdFNsb3RDYWNoZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBjYWNoZSBoYXMgbW9yZSByZWNlbnQgc2xvdCB0aGFuIHVzZXIgcG9zaXRpb25zIGFjY291bnQgc2xvdCwgYWRkIG1hcmtldCB0byByZW1haW5pbmcgYWNjb3VudHNcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgcmVtb3ZlIGZyb20gc2xvdFxuICAgICAgICAgICAgICAgIGlmIChzbG90ID4gbGFzdFVzZXJTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUGVycE1hcmtldFRvUmVtYWluaW5nQWNjb3VudE1hcHMobWFya2V0SW5kZXgsIGZhbHNlLCBvcmFjbGVBY2NvdW50TWFwLCBzcG90TWFya2V0QWNjb3VudE1hcCwgcGVycE1hcmtldEFjY291bnRNYXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJwTWFya2V0TGFzdFNsb3RDYWNoZS5kZWxldGUobWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgW21hcmtldEluZGV4LCBzbG90LF0gb2YgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBjYWNoZSBoYXMgbW9yZSByZWNlbnQgc2xvdCB0aGFuIHVzZXIgcG9zaXRpb25zIGFjY291bnQgc2xvdCwgYWRkIG1hcmtldCB0byByZW1haW5pbmcgYWNjb3VudHNcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgcmVtb3ZlIGZyb20gc2xvdFxuICAgICAgICAgICAgICAgIGlmIChzbG90ID4gbGFzdFVzZXJTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkU3BvdE1hcmtldFRvUmVtYWluaW5nQWNjb3VudE1hcHMobWFya2V0SW5kZXgsIGZhbHNlLCBvcmFjbGVBY2NvdW50TWFwLCBzcG90TWFya2V0QWNjb3VudE1hcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwb3RNYXJrZXRMYXN0U2xvdENhY2hlLmRlbGV0ZShtYXJrZXRJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMucmVhZGFibGVQZXJwTWFya2V0SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcmVhZGFibGVQZXJwTWFya2V0SW5kZXhlcyA9IEFycmF5LmlzQXJyYXkocGFyYW1zLnJlYWRhYmxlUGVycE1hcmtldEluZGV4KVxuICAgICAgICAgICAgICAgID8gcGFyYW1zLnJlYWRhYmxlUGVycE1hcmtldEluZGV4XG4gICAgICAgICAgICAgICAgOiBbcGFyYW1zLnJlYWRhYmxlUGVycE1hcmtldEluZGV4XTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbWFya2V0SW5kZXggb2YgcmVhZGFibGVQZXJwTWFya2V0SW5kZXhlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGVycE1hcmtldFRvUmVtYWluaW5nQWNjb3VudE1hcHMobWFya2V0SW5kZXgsIGZhbHNlLCBvcmFjbGVBY2NvdW50TWFwLCBzcG90TWFya2V0QWNjb3VudE1hcCwgcGVycE1hcmtldEFjY291bnRNYXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcGVycE1hcmtldEluZGV4IG9mIHRoaXMubXVzdEluY2x1ZGVQZXJwTWFya2V0SW5kZXhlcy52YWx1ZXMoKSkge1xuICAgICAgICAgICAgdGhpcy5hZGRQZXJwTWFya2V0VG9SZW1haW5pbmdBY2NvdW50TWFwcyhwZXJwTWFya2V0SW5kZXgsIGZhbHNlLCBvcmFjbGVBY2NvdW50TWFwLCBzcG90TWFya2V0QWNjb3VudE1hcCwgcGVycE1hcmtldEFjY291bnRNYXApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMucmVhZGFibGVTcG90TWFya2V0SW5kZXhlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlYWRhYmxlU3BvdE1hcmtldEluZGV4IG9mIHBhcmFtcy5yZWFkYWJsZVNwb3RNYXJrZXRJbmRleGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRTcG90TWFya2V0VG9SZW1haW5pbmdBY2NvdW50TWFwcyhyZWFkYWJsZVNwb3RNYXJrZXRJbmRleCwgZmFsc2UsIG9yYWNsZUFjY291bnRNYXAsIHNwb3RNYXJrZXRBY2NvdW50TWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHNwb3RNYXJrZXRJbmRleCBvZiB0aGlzLm11c3RJbmNsdWRlU3BvdE1hcmtldEluZGV4ZXMudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkU3BvdE1hcmtldFRvUmVtYWluaW5nQWNjb3VudE1hcHMoc3BvdE1hcmtldEluZGV4LCBmYWxzZSwgb3JhY2xlQWNjb3VudE1hcCwgc3BvdE1hcmtldEFjY291bnRNYXApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJhbXMud3JpdGFibGVQZXJwTWFya2V0SW5kZXhlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHdyaXRhYmxlUGVycE1hcmtldEluZGV4IG9mIHBhcmFtcy53cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRQZXJwTWFya2V0VG9SZW1haW5pbmdBY2NvdW50TWFwcyh3cml0YWJsZVBlcnBNYXJrZXRJbmRleCwgdHJ1ZSwgb3JhY2xlQWNjb3VudE1hcCwgc3BvdE1hcmtldEFjY291bnRNYXAsIHBlcnBNYXJrZXRBY2NvdW50TWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLndyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB3cml0YWJsZVNwb3RNYXJrZXRJbmRleCBvZiBwYXJhbXMud3JpdGFibGVTcG90TWFya2V0SW5kZXhlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkU3BvdE1hcmtldFRvUmVtYWluaW5nQWNjb3VudE1hcHMod3JpdGFibGVTcG90TWFya2V0SW5kZXgsIHRydWUsIG9yYWNsZUFjY291bnRNYXAsIHNwb3RNYXJrZXRBY2NvdW50TWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4ub3JhY2xlQWNjb3VudE1hcC52YWx1ZXMoKSxcbiAgICAgICAgICAgIC4uLnNwb3RNYXJrZXRBY2NvdW50TWFwLnZhbHVlcygpLFxuICAgICAgICAgICAgLi4ucGVycE1hcmtldEFjY291bnRNYXAudmFsdWVzKCksXG4gICAgICAgIF07XG4gICAgfVxuICAgIGFkZFBlcnBNYXJrZXRUb1JlbWFpbmluZ0FjY291bnRNYXBzKG1hcmtldEluZGV4LCB3cml0YWJsZSwgb3JhY2xlQWNjb3VudE1hcCwgc3BvdE1hcmtldEFjY291bnRNYXAsIHBlcnBNYXJrZXRBY2NvdW50TWFwKSB7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXRBY2NvdW50ID0gdGhpcy5nZXRQZXJwTWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIHBlcnBNYXJrZXRBY2NvdW50TWFwLnNldChtYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgcHVia2V5OiBwZXJwTWFya2V0QWNjb3VudC5wdWJrZXksXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB3cml0YWJsZSxcbiAgICAgICAgfSk7XG4gICAgICAgIG9yYWNsZUFjY291bnRNYXAuc2V0KHBlcnBNYXJrZXRBY2NvdW50LmFtbS5vcmFjbGUudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgcHVia2V5OiBwZXJwTWFya2V0QWNjb3VudC5hbW0ub3JhY2xlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZFNwb3RNYXJrZXRUb1JlbWFpbmluZ0FjY291bnRNYXBzKHBlcnBNYXJrZXRBY2NvdW50LnF1b3RlU3BvdE1hcmtldEluZGV4LCBmYWxzZSwgb3JhY2xlQWNjb3VudE1hcCwgc3BvdE1hcmtldEFjY291bnRNYXApO1xuICAgIH1cbiAgICBhZGRTcG90TWFya2V0VG9SZW1haW5pbmdBY2NvdW50TWFwcyhtYXJrZXRJbmRleCwgd3JpdGFibGUsIG9yYWNsZUFjY291bnRNYXAsIHNwb3RNYXJrZXRBY2NvdW50TWFwKSB7XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRBY2NvdW50ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIHNwb3RNYXJrZXRBY2NvdW50TWFwLnNldChzcG90TWFya2V0QWNjb3VudC5tYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgcHVia2V5OiBzcG90TWFya2V0QWNjb3VudC5wdWJrZXksXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB3cml0YWJsZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghc3BvdE1hcmtldEFjY291bnQub3JhY2xlLmVxdWFscyh3ZWIzX2pzXzEuUHVibGljS2V5LmRlZmF1bHQpKSB7XG4gICAgICAgICAgICBvcmFjbGVBY2NvdW50TWFwLnNldChzcG90TWFya2V0QWNjb3VudC5vcmFjbGUudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgICAgIHB1YmtleTogc3BvdE1hcmtldEFjY291bnQub3JhY2xlLFxuICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc1dyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFJlbWFpbmluZ0FjY291bnRNYXBzRm9yVXNlcnModXNlckFjY291bnRzKSB7XG4gICAgICAgIGNvbnN0IG9yYWNsZUFjY291bnRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRBY2NvdW50TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBjb25zdCBwZXJwTWFya2V0QWNjb3VudE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCB1c2VyQWNjb3VudCBvZiB1c2VyQWNjb3VudHMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3BvdFBvc2l0aW9uIG9mIHVzZXJBY2NvdW50LnNwb3RQb3NpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoISgwLCBzcG90UG9zaXRpb25fMS5pc1Nwb3RQb3NpdGlvbkF2YWlsYWJsZSkoc3BvdFBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFNwb3RNYXJrZXRUb1JlbWFpbmluZ0FjY291bnRNYXBzKHNwb3RQb3NpdGlvbi5tYXJrZXRJbmRleCwgZmFsc2UsIG9yYWNsZUFjY291bnRNYXAsIHNwb3RNYXJrZXRBY2NvdW50TWFwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzcG90UG9zaXRpb24ub3BlbkFza3MuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhc3BvdFBvc2l0aW9uLm9wZW5CaWRzLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTcG90TWFya2V0VG9SZW1haW5pbmdBY2NvdW50TWFwcyhudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgsIGZhbHNlLCBvcmFjbGVBY2NvdW50TWFwLCBzcG90TWFya2V0QWNjb3VudE1hcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBvc2l0aW9uIG9mIHVzZXJBY2NvdW50LnBlcnBQb3NpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoISgwLCBwb3NpdGlvbl8xLnBvc2l0aW9uSXNBdmFpbGFibGUpKHBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBlcnBNYXJrZXRUb1JlbWFpbmluZ0FjY291bnRNYXBzKHBvc2l0aW9uLm1hcmtldEluZGV4LCBmYWxzZSwgb3JhY2xlQWNjb3VudE1hcCwgc3BvdE1hcmtldEFjY291bnRNYXAsIHBlcnBNYXJrZXRBY2NvdW50TWFwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9yYWNsZUFjY291bnRNYXAsXG4gICAgICAgICAgICBzcG90TWFya2V0QWNjb3VudE1hcCxcbiAgICAgICAgICAgIHBlcnBNYXJrZXRBY2NvdW50TWFwLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRPcmRlcihvcmRlcklkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuZ2V0VXNlckFjY291bnQoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm9yZGVycy5maW5kKChvcmRlcikgPT4gb3JkZXIub3JkZXJJZCA9PT0gb3JkZXJJZCk7XG4gICAgfVxuICAgIGdldE9yZGVyQnlVc2VySWQodXNlck9yZGVySWQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5nZXRVc2VyQWNjb3VudCgpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3JkZXJzLmZpbmQoKG9yZGVyKSA9PiBvcmRlci51c2VyT3JkZXJJZCA9PT0gdXNlck9yZGVySWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFzc29jaWF0ZWQgdG9rZW4gYWRkcmVzcyBmb3IgdGhlIGdpdmVuIHNwb3QgbWFya2V0XG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIHVzZU5hdGl2ZVxuICAgICAqL1xuICAgIGFzeW5jIGdldEFzc29jaWF0ZWRUb2tlbkFjY291bnQobWFya2V0SW5kZXgsIHVzZU5hdGl2ZSA9IHRydWUpIHtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBpZiAodXNlTmF0aXZlICYmIHNwb3RNYXJrZXQubWludC5lcXVhbHMoc3BvdE1hcmtldHNfMS5XUkFQUEVEX1NPTF9NSU5UKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2FsbGV0LnB1YmxpY0tleTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtaW50ID0gc3BvdE1hcmtldC5taW50O1xuICAgICAgICByZXR1cm4gYXdhaXQgKDAsIHNwbF90b2tlbl8xLmdldEFzc29jaWF0ZWRUb2tlbkFkZHJlc3MpKG1pbnQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSk7XG4gICAgfVxuICAgIGNyZWF0ZUFzc29jaWF0ZWRUb2tlbkFjY291bnRJZGVtcG90ZW50SW5zdHJ1Y3Rpb24oYWNjb3VudCwgcGF5ZXIsIG93bmVyLCBtaW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgd2ViM19qc18xLlRyYW5zYWN0aW9uSW5zdHJ1Y3Rpb24oe1xuICAgICAgICAgICAga2V5czogW1xuICAgICAgICAgICAgICAgIHsgcHVia2V5OiBwYXllciwgaXNTaWduZXI6IHRydWUsIGlzV3JpdGFibGU6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHB1YmtleTogYWNjb3VudCwgaXNTaWduZXI6IGZhbHNlLCBpc1dyaXRhYmxlOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyBwdWJrZXk6IG93bmVyLCBpc1NpZ25lcjogZmFsc2UsIGlzV3JpdGFibGU6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyBwdWJrZXk6IG1pbnQsIGlzU2lnbmVyOiBmYWxzZSwgaXNXcml0YWJsZTogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHB1YmtleTogYW5jaG9yLndlYjMuU3lzdGVtUHJvZ3JhbS5wcm9ncmFtSWQsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7IHB1YmtleTogc3BsX3Rva2VuXzEuVE9LRU5fUFJPR1JBTV9JRCwgaXNTaWduZXI6IGZhbHNlLCBpc1dyaXRhYmxlOiBmYWxzZSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHByb2dyYW1JZDogc3BsX3Rva2VuXzEuQVNTT0NJQVRFRF9UT0tFTl9QUk9HUkFNX0lELFxuICAgICAgICAgICAgZGF0YTogQnVmZmVyLmZyb20oWzB4MV0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVwb3NpdCBmdW5kcyBpbnRvIHRoZSBnaXZlbiBzcG90IG1hcmtldFxuICAgICAqXG4gICAgICogQHBhcmFtIGFtb3VudFxuICAgICAqIEBwYXJhbSBtYXJrZXRJbmRleFxuICAgICAqIEBwYXJhbSBhc3NvY2lhdGVkVG9rZW5BY2NvdW50IGNhbiBiZSB0aGUgd2FsbGV0IHB1YmxpYyBrZXkgaWYgdXNpbmcgbmF0aXZlIHNvbFxuICAgICAqIEBwYXJhbSBzdWJBY2NvdW50SWRcbiAgICAgKiBAcGFyYW0gcmVkdWNlT25seVxuICAgICAqL1xuICAgIGFzeW5jIGRlcG9zaXQoYW1vdW50LCBtYXJrZXRJbmRleCwgYXNzb2NpYXRlZFRva2VuQWNjb3VudCwgc3ViQWNjb3VudElkLCByZWR1Y2VPbmx5ID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgdHggPSBuZXcgd2ViM19qc18xLlRyYW5zYWN0aW9uKCk7XG4gICAgICAgIHR4LmFkZCh3ZWIzX2pzXzEuQ29tcHV0ZUJ1ZGdldFByb2dyYW0uc2V0Q29tcHV0ZVVuaXRMaW1pdCh7XG4gICAgICAgICAgICB1bml0czogNjAwMDAwLFxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxTaWduZXJzID0gW107XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRBY2NvdW50ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGlzU29sTWFya2V0ID0gc3BvdE1hcmtldEFjY291bnQubWludC5lcXVhbHMoc3BvdE1hcmtldHNfMS5XUkFQUEVEX1NPTF9NSU5UKTtcbiAgICAgICAgY29uc3Qgc2lnbmVyQXV0aG9yaXR5ID0gdGhpcy53YWxsZXQucHVibGljS2V5O1xuICAgICAgICBjb25zdCBjcmVhdGVXU09MVG9rZW5BY2NvdW50ID0gaXNTb2xNYXJrZXQgJiYgYXNzb2NpYXRlZFRva2VuQWNjb3VudC5lcXVhbHMoc2lnbmVyQXV0aG9yaXR5KTtcbiAgICAgICAgaWYgKGNyZWF0ZVdTT0xUb2tlbkFjY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXhzLCBwdWJrZXkgfSA9IGF3YWl0IHRoaXMuZ2V0V3JhcHBlZFNvbEFjY291bnRDcmVhdGlvbkl4cyhhbW91bnQsIHRydWUpO1xuICAgICAgICAgICAgYXNzb2NpYXRlZFRva2VuQWNjb3VudCA9IHB1YmtleTtcbiAgICAgICAgICAgIGl4cy5mb3JFYWNoKChpeCkgPT4ge1xuICAgICAgICAgICAgICAgIHR4LmFkZChpeCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXBvc2l0Q29sbGF0ZXJhbEl4ID0gYXdhaXQgdGhpcy5nZXREZXBvc2l0SW5zdHJ1Y3Rpb24oYW1vdW50LCBtYXJrZXRJbmRleCwgYXNzb2NpYXRlZFRva2VuQWNjb3VudCwgc3ViQWNjb3VudElkLCByZWR1Y2VPbmx5LCB0cnVlKTtcbiAgICAgICAgdHguYWRkKGRlcG9zaXRDb2xsYXRlcmFsSXgpO1xuICAgICAgICAvLyBDbG9zZSB0aGUgd3JhcHBlZCBzb2wgYWNjb3VudCBhdCB0aGUgZW5kIG9mIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBpZiAoY3JlYXRlV1NPTFRva2VuQWNjb3VudCkge1xuICAgICAgICAgICAgdHguYWRkKCgwLCBzcGxfdG9rZW5fMS5jcmVhdGVDbG9zZUFjY291bnRJbnN0cnVjdGlvbikoYXNzb2NpYXRlZFRva2VuQWNjb3VudCwgc2lnbmVyQXV0aG9yaXR5LCBzaWduZXJBdXRob3JpdHksIFtdKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIGFkZGl0aW9uYWxTaWduZXJzLCB0aGlzLm9wdHMpO1xuICAgICAgICB0aGlzLnNwb3RNYXJrZXRMYXN0U2xvdENhY2hlLnNldChtYXJrZXRJbmRleCwgc2xvdCk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0RGVwb3NpdEluc3RydWN0aW9uKGFtb3VudCwgbWFya2V0SW5kZXgsIHVzZXJUb2tlbkFjY291bnQsIHN1YkFjY291bnRJZCwgcmVkdWNlT25seSA9IGZhbHNlLCB1c2VySW5pdGlhbGl6ZWQgPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFVzZXJBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB0aGlzLmF1dGhvcml0eSwgc3ViQWNjb3VudElkICE9PSBudWxsICYmIHN1YkFjY291bnRJZCAhPT0gdm9pZCAwID8gc3ViQWNjb3VudElkIDogdGhpcy5hY3RpdmVTdWJBY2NvdW50SWQpO1xuICAgICAgICBsZXQgcmVtYWluaW5nQWNjb3VudHMgPSBbXTtcbiAgICAgICAgaWYgKHVzZXJJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgICAgICB1c2VyQWNjb3VudHM6IFthd2FpdCB0aGlzLmZvcmNlR2V0VXNlckFjY291bnQoKV0sXG4gICAgICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbbWFya2V0SW5kZXhdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgICAgIHVzZXJBY2NvdW50czogW10sXG4gICAgICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW21hcmtldEluZGV4XSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRBY2NvdW50ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uZGVwb3NpdChtYXJrZXRJbmRleCwgYW1vdW50LCByZWR1Y2VPbmx5LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogc3BvdE1hcmtldEFjY291bnQucHVia2V5LFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXRWYXVsdDogc3BvdE1hcmtldEFjY291bnQudmF1bHQsXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyVG9rZW5BY2NvdW50OiB1c2VyVG9rZW5BY2NvdW50LFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHRva2VuUHJvZ3JhbTogc3BsX3Rva2VuXzEuVE9LRU5fUFJPR1JBTV9JRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGNoZWNrSWZBY2NvdW50RXhpc3RzKGFjY291bnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gYXdhaXQgdGhpcy5jb25uZWN0aW9uLmdldEFjY291bnRJbmZvKGFjY291bnQpO1xuICAgICAgICAgICAgcmV0dXJuIGFjY291bnRJbmZvICE9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIERvZXNuJ3QgYWxyZWFkeSBleGlzdFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGdldFdyYXBwZWRTb2xBY2NvdW50Q3JlYXRpb25JeHMoYW1vdW50LCBpbmNsdWRlUmVudCkge1xuICAgICAgICBjb25zdCBhdXRob3JpdHkgPSB0aGlzLndhbGxldC5wdWJsaWNLZXk7XG4gICAgICAgIC8vIEdlbmVyYXRlIGEgcmFuZG9tIHNlZWQgZm9yIHdyYXBwZWRTb2xBY2NvdW50LlxuICAgICAgICBjb25zdCBzZWVkID0gd2ViM19qc18xLktleXBhaXIuZ2VuZXJhdGUoKS5wdWJsaWNLZXkudG9CYXNlNTgoKS5zbGljZSgwLCAzMik7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBhIHB1YmxpY0tleSB0aGF0IHdpbGwgYmUgY29udHJvbGxlZCBieSB0aGUgYXV0aG9yaXR5LlxuICAgICAgICBjb25zdCB3cmFwcGVkU29sQWNjb3VudCA9IGF3YWl0IHdlYjNfanNfMS5QdWJsaWNLZXkuY3JlYXRlV2l0aFNlZWQoYXV0aG9yaXR5LCBzZWVkLCBzcGxfdG9rZW5fMS5UT0tFTl9QUk9HUkFNX0lEKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgaXhzOiBbXSxcbiAgICAgICAgICAgIHNpZ25lcnM6IFtdLFxuICAgICAgICAgICAgcHVia2V5OiB3cmFwcGVkU29sQWNjb3VudCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVudFNwYWNlTGFtcG9ydHMgPSBuZXcgYW5jaG9yXzEuQk4od2ViM19qc18xLkxBTVBPUlRTX1BFUl9TT0wgLyAxMDApO1xuICAgICAgICBjb25zdCBsYW1wb3J0cyA9IGluY2x1ZGVSZW50XG4gICAgICAgICAgICA/IGFtb3VudC5hZGQocmVudFNwYWNlTGFtcG9ydHMpXG4gICAgICAgICAgICA6IHJlbnRTcGFjZUxhbXBvcnRzO1xuICAgICAgICByZXN1bHQuaXhzLnB1c2god2ViM19qc18xLlN5c3RlbVByb2dyYW0uY3JlYXRlQWNjb3VudFdpdGhTZWVkKHtcbiAgICAgICAgICAgIGZyb21QdWJrZXk6IGF1dGhvcml0eSxcbiAgICAgICAgICAgIGJhc2VQdWJrZXk6IGF1dGhvcml0eSxcbiAgICAgICAgICAgIHNlZWQsXG4gICAgICAgICAgICBuZXdBY2NvdW50UHVia2V5OiB3cmFwcGVkU29sQWNjb3VudCxcbiAgICAgICAgICAgIGxhbXBvcnRzOiBsYW1wb3J0cy50b051bWJlcigpLFxuICAgICAgICAgICAgc3BhY2U6IDE2NSxcbiAgICAgICAgICAgIHByb2dyYW1JZDogc3BsX3Rva2VuXzEuVE9LRU5fUFJPR1JBTV9JRCxcbiAgICAgICAgfSkpO1xuICAgICAgICByZXN1bHQuaXhzLnB1c2goKDAsIHNwbF90b2tlbl8xLmNyZWF0ZUluaXRpYWxpemVBY2NvdW50SW5zdHJ1Y3Rpb24pKHdyYXBwZWRTb2xBY2NvdW50LCBzcG90TWFya2V0c18xLldSQVBQRURfU09MX01JTlQsIGF1dGhvcml0eSkpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXRBc3NvY2lhdGVkVG9rZW5BY2NvdW50Q3JlYXRpb25JeCh0b2tlbk1pbnRBZGRyZXNzLCBhc3NvY2lhdGVkVG9rZW5BZGRyZXNzKSB7XG4gICAgICAgIHJldHVybiAoMCwgc3BsX3Rva2VuXzEuY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudEluc3RydWN0aW9uKSh0aGlzLndhbGxldC5wdWJsaWNLZXksIGFzc29jaWF0ZWRUb2tlbkFkZHJlc3MsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgdG9rZW5NaW50QWRkcmVzcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIFVzZXIgYWNjb3VudCBmb3IgYSB1c2VyLCBhbmQgZGVwb3NpdHMgc29tZSBpbml0aWFsIGNvbGxhdGVyYWxcbiAgICAgKiBAcGFyYW0gYW1vdW50XG4gICAgICogQHBhcmFtIHVzZXJUb2tlbkFjY291bnRcbiAgICAgKiBAcGFyYW0gbWFya2V0SW5kZXhcbiAgICAgKiBAcGFyYW0gc3ViQWNjb3VudElkXG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcGFyYW0gZnJvbVN1YkFjY291bnRJZFxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVVzZXJBY2NvdW50QW5kRGVwb3NpdENvbGxhdGVyYWwoYW1vdW50LCB1c2VyVG9rZW5BY2NvdW50LCBtYXJrZXRJbmRleCA9IDAsIHN1YkFjY291bnRJZCA9IDAsIG5hbWUgPSB1c2VyTmFtZV8xLkRFRkFVTFRfVVNFUl9OQU1FLCBmcm9tU3ViQWNjb3VudElkLCByZWZlcnJlckluZm8sIHR4UGFyYW1zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgW3VzZXJBY2NvdW50UHVibGljS2V5LCBpbml0aWFsaXplVXNlckFjY291bnRJeF0gPSBhd2FpdCB0aGlzLmdldEluaXRpYWxpemVVc2VySW5zdHJ1Y3Rpb25zKHN1YkFjY291bnRJZCwgbmFtZSwgcmVmZXJyZXJJbmZvKTtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFNpZ25lcnMgPSBbXTtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBpc1NvbE1hcmtldCA9IHNwb3RNYXJrZXQubWludC5lcXVhbHMoc3BvdE1hcmtldHNfMS5XUkFQUEVEX1NPTF9NSU5UKTtcbiAgICAgICAgY29uc3QgdHggPSBuZXcgd2ViM19qc18xLlRyYW5zYWN0aW9uKCk7XG4gICAgICAgIHR4LmFkZCh3ZWIzX2pzXzEuQ29tcHV0ZUJ1ZGdldFByb2dyYW0uc2V0Q29tcHV0ZVVuaXRMaW1pdCh7XG4gICAgICAgICAgICB1bml0czogKF9hID0gdHhQYXJhbXMgPT09IG51bGwgfHwgdHhQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHR4UGFyYW1zLmNvbXB1dGVVbml0cykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogNjAwMDAwLFxuICAgICAgICB9KSk7XG4gICAgICAgIGlmICh0eFBhcmFtcyA9PT0gbnVsbCB8fCB0eFBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHhQYXJhbXMuY29tcHV0ZVVuaXRzUHJpY2UpIHtcbiAgICAgICAgICAgIHR4LmFkZCh3ZWIzX2pzXzEuQ29tcHV0ZUJ1ZGdldFByb2dyYW0uc2V0Q29tcHV0ZVVuaXRQcmljZSh7XG4gICAgICAgICAgICAgICAgbWljcm9MYW1wb3J0czogdHhQYXJhbXMuY29tcHV0ZVVuaXRzUHJpY2UsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXV0aG9yaXR5ID0gdGhpcy53YWxsZXQucHVibGljS2V5O1xuICAgICAgICBjb25zdCBpc0Zyb21TdWJhY2NvdW50ID0gZnJvbVN1YkFjY291bnRJZCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgZnJvbVN1YkFjY291bnRJZCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAhaXNOYU4oZnJvbVN1YkFjY291bnRJZCk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVdTT0xUb2tlbkFjY291bnQgPSBpc1NvbE1hcmtldCAmJiB1c2VyVG9rZW5BY2NvdW50LmVxdWFscyhhdXRob3JpdHkpICYmICFpc0Zyb21TdWJhY2NvdW50O1xuICAgICAgICBpZiAoY3JlYXRlV1NPTFRva2VuQWNjb3VudCkge1xuICAgICAgICAgICAgY29uc3QgeyBpeHM6IHN0YXJ0SXhzLCBwdWJrZXkgfSA9IGF3YWl0IHRoaXMuZ2V0V3JhcHBlZFNvbEFjY291bnRDcmVhdGlvbkl4cyhhbW91bnQsIHRydWUpO1xuICAgICAgICAgICAgdXNlclRva2VuQWNjb3VudCA9IHB1YmtleTtcbiAgICAgICAgICAgIHN0YXJ0SXhzLmZvckVhY2goKGl4KSA9PiB7XG4gICAgICAgICAgICAgICAgdHguYWRkKGl4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlcG9zaXRDb2xsYXRlcmFsSXggPSBpc0Zyb21TdWJhY2NvdW50XG4gICAgICAgICAgICA/IGF3YWl0IHRoaXMuZ2V0VHJhbnNmZXJEZXBvc2l0SXgoYW1vdW50LCBtYXJrZXRJbmRleCwgZnJvbVN1YkFjY291bnRJZCwgc3ViQWNjb3VudElkKVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmdldERlcG9zaXRJbnN0cnVjdGlvbihhbW91bnQsIG1hcmtldEluZGV4LCB1c2VyVG9rZW5BY2NvdW50LCBzdWJBY2NvdW50SWQsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIGlmIChzdWJBY2NvdW50SWQgPT09IDApIHtcbiAgICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuY2hlY2tJZkFjY291bnRFeGlzdHModGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCkpKSkge1xuICAgICAgICAgICAgICAgIHR4LmFkZChhd2FpdCB0aGlzLmdldEluaXRpYWxpemVVc2VyU3RhdHNJeCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0eC5hZGQoaW5pdGlhbGl6ZVVzZXJBY2NvdW50SXgpLmFkZChkZXBvc2l0Q29sbGF0ZXJhbEl4KTtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIHdyYXBwZWQgc29sIGFjY291bnQgYXQgdGhlIGVuZCBvZiB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgaWYgKGNyZWF0ZVdTT0xUb2tlbkFjY291bnQpIHtcbiAgICAgICAgICAgIHR4LmFkZCgoMCwgc3BsX3Rva2VuXzEuY3JlYXRlQ2xvc2VBY2NvdW50SW5zdHJ1Y3Rpb24pKHVzZXJUb2tlbkFjY291bnQsIGF1dGhvcml0eSwgYXV0aG9yaXR5LCBbXSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdHhTaWcsIHNsb3QgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBhZGRpdGlvbmFsU2lnbmVycywgdGhpcy5vcHRzKTtcbiAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQobWFya2V0SW5kZXgsIHNsb3QpO1xuICAgICAgICBhd2FpdCB0aGlzLmFkZFVzZXIoc3ViQWNjb3VudElkKTtcbiAgICAgICAgcmV0dXJuIFt0eFNpZywgdXNlckFjY291bnRQdWJsaWNLZXldO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplVXNlckFjY291bnRGb3JEZXZuZXQoc3ViQWNjb3VudElkID0gMCwgbmFtZSA9IHVzZXJOYW1lXzEuREVGQVVMVF9VU0VSX05BTUUsIG1hcmtldEluZGV4LCB0b2tlbkZhdWNldCwgYW1vdW50LCByZWZlcnJlckluZm8pIHtcbiAgICAgICAgY29uc3QgW2Fzc29jaWF0ZVRva2VuUHVibGljS2V5LCBjcmVhdGVBc3NvY2lhdGVkQWNjb3VudEl4LCBtaW50VG9JeF0gPSBhd2FpdCB0b2tlbkZhdWNldC5jcmVhdGVBc3NvY2lhdGVkVG9rZW5BY2NvdW50QW5kTWludFRvSW5zdHJ1Y3Rpb25zKHRoaXMud2FsbGV0LnB1YmxpY0tleSwgYW1vdW50KTtcbiAgICAgICAgY29uc3QgW3VzZXJBY2NvdW50UHVibGljS2V5LCBpbml0aWFsaXplVXNlckFjY291bnRJeF0gPSBhd2FpdCB0aGlzLmdldEluaXRpYWxpemVVc2VySW5zdHJ1Y3Rpb25zKHN1YkFjY291bnRJZCwgbmFtZSwgcmVmZXJyZXJJbmZvKTtcbiAgICAgICAgY29uc3QgZGVwb3NpdENvbGxhdGVyYWxJeCA9IGF3YWl0IHRoaXMuZ2V0RGVwb3NpdEluc3RydWN0aW9uKGFtb3VudCwgbWFya2V0SW5kZXgsIGFzc29jaWF0ZVRva2VuUHVibGljS2V5LCBzdWJBY2NvdW50SWQsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IHR4ID0gbmV3IHdlYjNfanNfMS5UcmFuc2FjdGlvbigpLmFkZChjcmVhdGVBc3NvY2lhdGVkQWNjb3VudEl4KS5hZGQobWludFRvSXgpO1xuICAgICAgICBpZiAoc3ViQWNjb3VudElkID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmNoZWNrSWZBY2NvdW50RXhpc3RzKHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpKSkpIHtcbiAgICAgICAgICAgICAgICB0eC5hZGQoYXdhaXQgdGhpcy5nZXRJbml0aWFsaXplVXNlclN0YXRzSXgoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdHguYWRkKGluaXRpYWxpemVVc2VyQWNjb3VudEl4KS5hZGQoZGVwb3NpdENvbGxhdGVyYWxJeCk7XG4gICAgICAgIGNvbnN0IHR4U2lnID0gYXdhaXQgdGhpcy5wcm9ncmFtLnByb3ZpZGVyLnNlbmRBbmRDb25maXJtKHR4LCBbXSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWRkVXNlcihzdWJBY2NvdW50SWQpO1xuICAgICAgICByZXR1cm4gW3R4U2lnLCB1c2VyQWNjb3VudFB1YmxpY0tleV07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdpdGhkcmF3cyBmcm9tIGEgdXNlciBhY2NvdW50LiBJZiBkZXBvc2l0IGRvZXNuJ3QgYWxyZWFkeSBleGlzdCwgY3JlYXRlcyBhIGJvcnJvd1xuICAgICAqIEBwYXJhbSBhbW91bnRcbiAgICAgKiBAcGFyYW0gbWFya2V0SW5kZXhcbiAgICAgKiBAcGFyYW0gYXNzb2NpYXRlZFRva2VuQWRkcmVzcyAtIHRoZSB0b2tlbiBhY2NvdW50IHRvIHdpdGhkcmF3IHRvLiBjYW4gYmUgdGhlIHdhbGxldCBwdWJsaWMga2V5IGlmIHVzaW5nIG5hdGl2ZSBzb2xcbiAgICAgKiBAcGFyYW0gcmVkdWNlT25seVxuICAgICAqL1xuICAgIGFzeW5jIHdpdGhkcmF3KGFtb3VudCwgbWFya2V0SW5kZXgsIGFzc29jaWF0ZWRUb2tlbkFkZHJlc3MsIHJlZHVjZU9ubHkgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCB0eCA9IG5ldyB3ZWIzX2pzXzEuVHJhbnNhY3Rpb24oKTtcbiAgICAgICAgdHguYWRkKHdlYjNfanNfMS5Db21wdXRlQnVkZ2V0UHJvZ3JhbS5zZXRDb21wdXRlVW5pdExpbWl0KHtcbiAgICAgICAgICAgIHVuaXRzOiA2MDAwMDAsXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbFNpZ25lcnMgPSBbXTtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldEFjY291bnQgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgaXNTb2xNYXJrZXQgPSBzcG90TWFya2V0QWNjb3VudC5taW50LmVxdWFscyhzcG90TWFya2V0c18xLldSQVBQRURfU09MX01JTlQpO1xuICAgICAgICBjb25zdCBhdXRob3JpdHkgPSB0aGlzLndhbGxldC5wdWJsaWNLZXk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVdTT0xUb2tlbkFjY291bnQgPSBpc1NvbE1hcmtldCAmJiBhc3NvY2lhdGVkVG9rZW5BZGRyZXNzLmVxdWFscyhhdXRob3JpdHkpO1xuICAgICAgICBpZiAoY3JlYXRlV1NPTFRva2VuQWNjb3VudCkge1xuICAgICAgICAgICAgY29uc3QgeyBpeHMsIHB1YmtleSB9ID0gYXdhaXQgdGhpcy5nZXRXcmFwcGVkU29sQWNjb3VudENyZWF0aW9uSXhzKGFtb3VudCwgZmFsc2UpO1xuICAgICAgICAgICAgYXNzb2NpYXRlZFRva2VuQWRkcmVzcyA9IHB1YmtleTtcbiAgICAgICAgICAgIGl4cy5mb3JFYWNoKChpeCkgPT4ge1xuICAgICAgICAgICAgICAgIHR4LmFkZChpeCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRFeGlzdHMgPSBhd2FpdCB0aGlzLmNoZWNrSWZBY2NvdW50RXhpc3RzKGFzc29jaWF0ZWRUb2tlbkFkZHJlc3MpO1xuICAgICAgICAgICAgaWYgKCFhY2NvdW50RXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudEl4ID0gdGhpcy5nZXRBc3NvY2lhdGVkVG9rZW5BY2NvdW50Q3JlYXRpb25JeChzcG90TWFya2V0QWNjb3VudC5taW50LCBhc3NvY2lhdGVkVG9rZW5BZGRyZXNzKTtcbiAgICAgICAgICAgICAgICB0eC5hZGQoY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudEl4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3aXRoZHJhd0NvbGxhdGVyYWwgPSBhd2FpdCB0aGlzLmdldFdpdGhkcmF3SXgoYW1vdW50LCBzcG90TWFya2V0QWNjb3VudC5tYXJrZXRJbmRleCwgYXNzb2NpYXRlZFRva2VuQWRkcmVzcywgcmVkdWNlT25seSk7XG4gICAgICAgIHR4LmFkZCh3aXRoZHJhd0NvbGxhdGVyYWwpO1xuICAgICAgICAvLyBDbG9zZSB0aGUgd3JhcHBlZCBzb2wgYWNjb3VudCBhdCB0aGUgZW5kIG9mIHRoZSB0cmFuc2FjdGlvblxuICAgICAgICBpZiAoY3JlYXRlV1NPTFRva2VuQWNjb3VudCkge1xuICAgICAgICAgICAgdHguYWRkKCgwLCBzcGxfdG9rZW5fMS5jcmVhdGVDbG9zZUFjY291bnRJbnN0cnVjdGlvbikoYXNzb2NpYXRlZFRva2VuQWRkcmVzcywgYXV0aG9yaXR5LCBhdXRob3JpdHksIFtdKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIGFkZGl0aW9uYWxTaWduZXJzLCB0aGlzLm9wdHMpO1xuICAgICAgICB0aGlzLnNwb3RNYXJrZXRMYXN0U2xvdENhY2hlLnNldChtYXJrZXRJbmRleCwgc2xvdCk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0V2l0aGRyYXdJeChhbW91bnQsIG1hcmtldEluZGV4LCB1c2VyVG9rZW5BY2NvdW50LCByZWR1Y2VPbmx5ID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCldLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgICAgICByZWFkYWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbbnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRBY2NvdW50ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ud2l0aGRyYXcobWFya2V0SW5kZXgsIGFtb3VudCwgcmVkdWNlT25seSwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IHNwb3RNYXJrZXRBY2NvdW50LnB1YmtleSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0VmF1bHQ6IHNwb3RNYXJrZXRBY2NvdW50LnZhdWx0LFxuICAgICAgICAgICAgICAgIGRyaWZ0U2lnbmVyOiB0aGlzLmdldFNpZ25lclB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgdXNlclRva2VuQWNjb3VudDogdXNlclRva2VuQWNjb3VudCxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaXRoZHJhd3MgZnJvbSB0aGUgZnJvbVN1YkFjY291bnQgYW5kIGRlcG9zaXRzIGludG8gdGhlIHRvU3ViQWNjb3VudFxuICAgICAqIEBwYXJhbSBhbW91bnRcbiAgICAgKiBAcGFyYW0gbWFya2V0SW5kZXhcbiAgICAgKiBAcGFyYW0gZnJvbVN1YkFjY291bnRJZFxuICAgICAqIEBwYXJhbSB0b1N1YkFjY291bnRJZFxuICAgICAqIEBwYXJhbSB0eFBhcmFtc1xuICAgICAqL1xuICAgIGFzeW5jIHRyYW5zZmVyRGVwb3NpdChhbW91bnQsIG1hcmtldEluZGV4LCBmcm9tU3ViQWNjb3VudElkLCB0b1N1YkFjY291bnRJZCwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0VHJhbnNmZXJEZXBvc2l0SXgoYW1vdW50LCBtYXJrZXRJbmRleCwgZnJvbVN1YkFjY291bnRJZCwgdG9TdWJBY2NvdW50SWQpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICBpZiAoZnJvbVN1YkFjY291bnRJZCA9PT0gdGhpcy5hY3RpdmVTdWJBY2NvdW50SWQgfHxcbiAgICAgICAgICAgIHRvU3ViQWNjb3VudElkID09PSB0aGlzLmFjdGl2ZVN1YkFjY291bnRJZCkge1xuICAgICAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQobWFya2V0SW5kZXgsIHNsb3QpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0VHJhbnNmZXJEZXBvc2l0SXgoYW1vdW50LCBtYXJrZXRJbmRleCwgZnJvbVN1YkFjY291bnRJZCwgdG9TdWJBY2NvdW50SWQpIHtcbiAgICAgICAgY29uc3QgZnJvbVVzZXIgPSBhd2FpdCAoMCwgcGRhXzEuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgZnJvbVN1YkFjY291bnRJZCk7XG4gICAgICAgIGNvbnN0IHRvVXNlciA9IGF3YWl0ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy53YWxsZXQucHVibGljS2V5LCB0b1N1YkFjY291bnRJZCk7XG4gICAgICAgIGxldCByZW1haW5pbmdBY2NvdW50cztcbiAgICAgICAgY29uc3QgdXNlck1hcEtleSA9IHRoaXMuZ2V0VXNlck1hcEtleShmcm9tU3ViQWNjb3VudElkLCB0aGlzLndhbGxldC5wdWJsaWNLZXkpO1xuICAgICAgICBpZiAodGhpcy51c2Vycy5oYXModXNlck1hcEtleSkpIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy51c2Vycy5nZXQodXNlck1hcEtleSkuZ2V0VXNlckFjY291bnQoKV0sXG4gICAgICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbbWFya2V0SW5kZXhdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleVN5bmMpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHRoaXMuYXV0aG9yaXR5LCBmcm9tU3ViQWNjb3VudElkKTtcbiAgICAgICAgICAgIGNvbnN0IGZyb21Vc2VyQWNjb3VudCA9IChhd2FpdCB0aGlzLnByb2dyYW0uYWNjb3VudC51c2VyLmZldGNoKHVzZXJBY2NvdW50UHVibGljS2V5KSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgICAgIHVzZXJBY2NvdW50czogW2Zyb21Vc2VyQWNjb3VudF0sXG4gICAgICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbbWFya2V0SW5kZXhdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi50cmFuc2ZlckRlcG9zaXQobWFya2V0SW5kZXgsIGFtb3VudCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBmcm9tVXNlcixcbiAgICAgICAgICAgICAgICB0b1VzZXIsXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXRWYXVsdDogdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkudmF1bHQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyB1cGRhdGVTcG90TWFya2V0Q3VtdWxhdGl2ZUludGVyZXN0KG1hcmtldEluZGV4LCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy51cGRhdGVTcG90TWFya2V0Q3VtdWxhdGl2ZUludGVyZXN0SXgobWFya2V0SW5kZXgpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVNwb3RNYXJrZXRDdW11bGF0aXZlSW50ZXJlc3RJeChtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCBzcG90TWFya2V0ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24udXBkYXRlU3BvdE1hcmtldEN1bXVsYXRpdmVJbnRlcmVzdCh7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogc3BvdE1hcmtldC5wdWJrZXksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldFZhdWx0OiBzcG90TWFya2V0LnZhdWx0LFxuICAgICAgICAgICAgICAgIG9yYWNsZTogc3BvdE1hcmtldC5vcmFjbGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc2V0dGxlTFAoc2V0dGxlZVVzZXJBY2NvdW50UHVibGljS2V5LCBtYXJrZXRJbmRleCwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuc2V0dGxlTFBJeChzZXR0bGVlVXNlckFjY291bnRQdWJsaWNLZXksIG1hcmtldEluZGV4KSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBzZXR0bGVMUEl4KHNldHRsZWVVc2VyQWNjb3VudFB1YmxpY0tleSwgbWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc2V0dGxlZVVzZXJBY2NvdW50ID0gKGF3YWl0IHRoaXMucHJvZ3JhbS5hY2NvdW50LnVzZXIuZmV0Y2goc2V0dGxlZVVzZXJBY2NvdW50UHVibGljS2V5KSk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFtzZXR0bGVlVXNlckFjY291bnRdLFxuICAgICAgICAgICAgd3JpdGFibGVQZXJwTWFya2V0SW5kZXhlczogW21hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uc2V0dGxlTHAobWFya2V0SW5kZXgsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyOiBzZXR0bGVlVXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHM6IHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcmVtb3ZlUGVycExwU2hhcmVzKG1hcmtldEluZGV4LCBzaGFyZXNUb0J1cm4sIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFJlbW92ZVBlcnBMcFNoYXJlc0l4KG1hcmtldEluZGV4LCBzaGFyZXNUb0J1cm4pLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZVBlcnBMcFNoYXJlc0luRXhwaXJpbmdNYXJrZXQobWFya2V0SW5kZXgsIHVzZXJBY2NvdW50UHVibGljS2V5LCBzaGFyZXNUb0J1cm4sIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFJlbW92ZVBlcnBMcFNoYXJlc0luRXhwaXJpbmdNYXJrZXQobWFya2V0SW5kZXgsIHVzZXJBY2NvdW50UHVibGljS2V5LCBzaGFyZXNUb0J1cm4pLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldFJlbW92ZVBlcnBMcFNoYXJlc0luRXhwaXJpbmdNYXJrZXQobWFya2V0SW5kZXgsIHVzZXJBY2NvdW50UHVibGljS2V5LCBzaGFyZXNUb0J1cm4pIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSAoYXdhaXQgdGhpcy5wcm9ncmFtLmFjY291bnQudXNlci5mZXRjaCh1c2VyQWNjb3VudFB1YmxpY0tleSkpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdXNlckFjY291bnRdLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlUGVycE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2hhcmVzVG9CdXJuID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgcGVycFBvc2l0aW9uID0gdXNlckFjY291bnQucGVycFBvc2l0aW9ucy5maWx0ZXIoKHBvc2l0aW9uKSA9PiBwb3NpdGlvbi5tYXJrZXRJbmRleCA9PT0gbWFya2V0SW5kZXgpWzBdO1xuICAgICAgICAgICAgc2hhcmVzVG9CdXJuID0gcGVycFBvc2l0aW9uLmxwU2hhcmVzO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2J1cm5pbmcgbHAgc2hhcmVzOicsIHNoYXJlc1RvQnVybi50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnJlbW92ZVBlcnBMcFNoYXJlc0luRXhwaXJpbmdNYXJrZXQoc2hhcmVzVG9CdXJuLCBtYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzOiByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFJlbW92ZVBlcnBMcFNoYXJlc0l4KG1hcmtldEluZGV4LCBzaGFyZXNUb0J1cm4pIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCldLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlUGVycE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2hhcmVzVG9CdXJuID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgICAgICBjb25zdCBwZXJwUG9zaXRpb24gPSB1c2VyQWNjb3VudC5wZXJwUG9zaXRpb25zLmZpbHRlcigocG9zaXRpb24pID0+IHBvc2l0aW9uLm1hcmtldEluZGV4ID09PSBtYXJrZXRJbmRleClbMF07XG4gICAgICAgICAgICBzaGFyZXNUb0J1cm4gPSBwZXJwUG9zaXRpb24ubHBTaGFyZXM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYnVybmluZyBscCBzaGFyZXM6Jywgc2hhcmVzVG9CdXJuLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ucmVtb3ZlUGVycExwU2hhcmVzKHNoYXJlc1RvQnVybiwgbWFya2V0SW5kZXgsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50czogcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBhZGRQZXJwTHBTaGFyZXMoYW1vdW50LCBtYXJrZXRJbmRleCwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0QWRkUGVycExwU2hhcmVzSXgoYW1vdW50LCBtYXJrZXRJbmRleCksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHRoaXMucGVycE1hcmtldExhc3RTbG90Q2FjaGUuc2V0KG1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRBZGRQZXJwTHBTaGFyZXNJeChhbW91bnQsIG1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXSxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzOiBbbWFya2V0SW5kZXhdLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5hZGRQZXJwTHBTaGFyZXMoYW1vdW50LCBtYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzOiByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFF1b3RlVmFsdWVQZXJMcFNoYXJlKG1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXRBY2NvdW50ID0gdGhpcy5nZXRQZXJwTWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG9wZW5CaWRzID0gYW5jaG9yXzEuQk4ubWF4KHBlcnBNYXJrZXRBY2NvdW50LmFtbS5iYXNlQXNzZXRSZXNlcnZlLnN1YihwZXJwTWFya2V0QWNjb3VudC5hbW0ubWluQmFzZUFzc2V0UmVzZXJ2ZSksIG51bWVyaWNDb25zdGFudHNfMS5aRVJPKTtcbiAgICAgICAgY29uc3Qgb3BlbkFza3MgPSBhbmNob3JfMS5CTi5tYXgocGVycE1hcmtldEFjY291bnQuYW1tLm1heEJhc2VBc3NldFJlc2VydmUuc3ViKHBlcnBNYXJrZXRBY2NvdW50LmFtbS5iYXNlQXNzZXRSZXNlcnZlKSwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgICAgICBjb25zdCBvcmFjbGVQcmljZURhdGEgPSB0aGlzLmdldE9yYWNsZURhdGFGb3JQZXJwTWFya2V0KG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgbWF4T3BlbkJpZHNBc2tzID0gYW5jaG9yXzEuQk4ubWF4KG9wZW5CaWRzLCBvcGVuQXNrcyk7XG4gICAgICAgIGNvbnN0IHF1b3RlVmFsdWVQZXJMcFNoYXJlID0gbWF4T3BlbkJpZHNBc2tzXG4gICAgICAgICAgICAubXVsKG9yYWNsZVByaWNlRGF0YS5wcmljZSlcbiAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYocGVycE1hcmtldEFjY291bnQuYW1tLnNxcnRLKTtcbiAgICAgICAgcmV0dXJuIHF1b3RlVmFsdWVQZXJMcFNoYXJlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCB1c2Uge0BsaW5rIHBsYWNlUGVycE9yZGVyfSBvciB7QGxpbmsgcGxhY2VBbmRUYWtlUGVycE9yZGVyfSBpbnN0ZWFkXG4gICAgICovXG4gICAgYXN5bmMgb3BlblBvc2l0aW9uKGRpcmVjdGlvbiwgYW1vdW50LCBtYXJrZXRJbmRleCwgbGltaXRQcmljZSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wbGFjZUFuZFRha2VQZXJwT3JkZXIoe1xuICAgICAgICAgICAgb3JkZXJUeXBlOiB0eXBlc18xLk9yZGVyVHlwZS5NQVJLRVQsXG4gICAgICAgICAgICBtYXJrZXRJbmRleCxcbiAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICAgIGJhc2VBc3NldEFtb3VudDogYW1vdW50LFxuICAgICAgICAgICAgcHJpY2U6IGxpbWl0UHJpY2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZW5kU2lnbmVkVHgodHgpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIHVuZGVmaW5lZCwgdGhpcy5vcHRzLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhIG1hcmtldCBvcmRlciBhbmQgcmV0dXJucyBhIHNpZ25lZCB0eCB3aGljaCBjYW4gZmlsbCB0aGUgb3JkZXIgYWdhaW5zdCB0aGUgdmFtbSwgd2hpY2ggdGhlIGNhbGxlciBjYW4gdXNlIHRvIGZpbGwgdGhlaXIgb3duIG9yZGVyIGlmIHJlcXVpcmVkLlxuICAgICAqIEBwYXJhbSBvcmRlclBhcmFtc1xuICAgICAqIEBwYXJhbSB1c2VyQWNjb3VudFB1YmxpY0tleVxuICAgICAqIEBwYXJhbSB1c2VyQWNjb3VudFxuICAgICAqIEBwYXJhbSBtYWtlckluZm9cbiAgICAgKiBAcGFyYW0gdHhQYXJhbXNcbiAgICAgKiBAcGFyYW0gYnJhY2tldE9yZGVyc1BhcmFtc1xuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgc2VuZE1hcmtldE9yZGVyQW5kR2V0U2lnbmVkRmlsbFR4KG9yZGVyUGFyYW1zLCB1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlckFjY291bnQsIG1ha2VySW5mbywgdHhQYXJhbXMsIGJyYWNrZXRPcmRlcnNQYXJhbXMgPSBuZXcgQXJyYXkoKSwgcmVmZXJyZXJJbmZvLCB1c2VWZXJzaW9uZWRUeCA9IHRydWUpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWFya2V0SW5kZXggPSBvcmRlclBhcmFtcy5tYXJrZXRJbmRleDtcbiAgICAgICAgY29uc3Qgb3JkZXJJZCA9IHVzZXJBY2NvdW50Lm5leHRPcmRlcklkO1xuICAgICAgICBjb25zdCBicmFja2V0T3JkZXJJeHMgPSBbXTtcbiAgICAgICAgY29uc3QgcGxhY2VQZXJwT3JkZXJJeCA9IGF3YWl0IHRoaXMuZ2V0UGxhY2VQZXJwT3JkZXJJeChvcmRlclBhcmFtcyk7XG4gICAgICAgIGZvciAoY29uc3QgYnJhY2tldE9yZGVyUGFyYW1zIG9mIGJyYWNrZXRPcmRlcnNQYXJhbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlQnJhY2tldE9yZGVySXggPSBhd2FpdCB0aGlzLmdldFBsYWNlUGVycE9yZGVySXgoYnJhY2tldE9yZGVyUGFyYW1zKTtcbiAgICAgICAgICAgIGJyYWNrZXRPcmRlckl4cy5wdXNoKHBsYWNlQnJhY2tldE9yZGVySXgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGxQZXJwT3JkZXJJeCA9IGF3YWl0IHRoaXMuZ2V0RmlsbFBlcnBPcmRlckl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyQWNjb3VudCwge1xuICAgICAgICAgICAgb3JkZXJJZCxcbiAgICAgICAgICAgIG1hcmtldEluZGV4LFxuICAgICAgICB9LCBtYWtlckluZm8sIHJlZmVycmVySW5mbyk7XG4gICAgICAgIGNvbnN0IHdhbGxldFN1cHBvcnRzVmVyc2lvbmVkVHhucyA9IFxuICAgICAgICAvL0B0cy1pZ25vcmVcbiAgICAgICAgKF9iID0gKF9hID0gdGhpcy53YWxsZXQuc3VwcG9ydGVkVHJhbnNhY3Rpb25WZXJzaW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNpemUpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDAgPiAxO1xuICAgICAgICAvLyB1c2UgdmVyc2lvbmVkIHRyYW5zYWN0aW9ucyBpZiB0aGVyZSBpcyBhIGxvb2t1cCB0YWJsZSBhY2NvdW50IGFuZCB3YWxsZXQgaXMgY29tcGF0aWJsZVxuICAgICAgICBpZiAod2FsbGV0U3VwcG9ydHNWZXJzaW9uZWRUeG5zICYmIHVzZVZlcnNpb25lZFR4KSB7XG4gICAgICAgICAgICBjb25zdCB2ZXJzaW9uZWRNYXJrZXRPcmRlclR4ID0gYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKFtwbGFjZVBlcnBPcmRlckl4XS5jb25jYXQoYnJhY2tldE9yZGVySXhzKSwgdHhQYXJhbXMsIDApO1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbmVkRmlsbFR4ID0gYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKFtmaWxsUGVycE9yZGVySXhdLCB0eFBhcmFtcywgMCk7XG4gICAgICAgICAgICBjb25zdCBbc2lnbmVkVmVyc2lvbmVkTWFya2V0T3JkZXJUeCwgc2lnbmVkVmVyc2lvbmVkRmlsbFR4XSA9IGF3YWl0IHRoaXMucHJvdmlkZXIud2FsbGV0LnNpZ25BbGxUcmFuc2FjdGlvbnMoW1xuICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIHZlcnNpb25lZE1hcmtldE9yZGVyVHgsXG4gICAgICAgICAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgdmVyc2lvbmVkRmlsbFR4LFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBjb25zdCB7IHR4U2lnLCBzbG90IH0gPSBhd2FpdCB0aGlzLnR4U2VuZGVyLnNlbmRSYXdUcmFuc2FjdGlvbihzaWduZWRWZXJzaW9uZWRNYXJrZXRPcmRlclR4LnNlcmlhbGl6ZSgpLCB0aGlzLm9wdHMpO1xuICAgICAgICAgICAgdGhpcy5wZXJwTWFya2V0TGFzdFNsb3RDYWNoZS5zZXQob3JkZXJQYXJhbXMubWFya2V0SW5kZXgsIHNsb3QpO1xuICAgICAgICAgICAgcmV0dXJuIHsgdHhTaWcsIHNpZ25lZEZpbGxUeDogc2lnbmVkVmVyc2lvbmVkRmlsbFR4IH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtYXJrZXRPcmRlclR4ID0gKDAsIHV0aWxzXzEud3JhcEluVHgpKHBsYWNlUGVycE9yZGVySXgsIHR4UGFyYW1zID09PSBudWxsIHx8IHR4UGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0eFBhcmFtcy5jb21wdXRlVW5pdHMsIHR4UGFyYW1zID09PSBudWxsIHx8IHR4UGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0eFBhcmFtcy5jb21wdXRlVW5pdHNQcmljZSk7XG4gICAgICAgICAgICBpZiAoYnJhY2tldE9yZGVySXhzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBtYXJrZXRPcmRlclR4LmFkZCguLi5icmFja2V0T3JkZXJJeHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsbFR4ID0gKDAsIHV0aWxzXzEud3JhcEluVHgpKGZpbGxQZXJwT3JkZXJJeCwgdHhQYXJhbXMgPT09IG51bGwgfHwgdHhQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHR4UGFyYW1zLmNvbXB1dGVVbml0cywgdHhQYXJhbXMgPT09IG51bGwgfHwgdHhQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHR4UGFyYW1zLmNvbXB1dGVVbml0c1ByaWNlKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBsYXRlc3QgYmxvY2toYXNoIHRvIHRoZSB0eHMgc28gdGhhdCB3ZSBjYW4gc2lnbiBiZWZvcmUgc2VuZGluZyB0aGVtXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QmxvY2tIYXNoID0gKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRMYXRlc3RCbG9ja2hhc2goJ2ZpbmFsaXplZCcpKS5ibG9ja2hhc2g7XG4gICAgICAgICAgICBtYXJrZXRPcmRlclR4LnJlY2VudEJsb2NraGFzaCA9IGN1cnJlbnRCbG9ja0hhc2g7XG4gICAgICAgICAgICBmaWxsVHgucmVjZW50QmxvY2toYXNoID0gY3VycmVudEJsb2NrSGFzaDtcbiAgICAgICAgICAgIG1hcmtldE9yZGVyVHguZmVlUGF5ZXIgPSB1c2VyQWNjb3VudC5hdXRob3JpdHk7XG4gICAgICAgICAgICBmaWxsVHguZmVlUGF5ZXIgPSB1c2VyQWNjb3VudC5hdXRob3JpdHk7XG4gICAgICAgICAgICBjb25zdCBbc2lnbmVkTWFya2V0T3JkZXJUeCwgc2lnbmVkRmlsbFR4XSA9IGF3YWl0IHRoaXMucHJvdmlkZXIud2FsbGV0LnNpZ25BbGxUcmFuc2FjdGlvbnMoW21hcmtldE9yZGVyVHgsIGZpbGxUeF0pO1xuICAgICAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oc2lnbmVkTWFya2V0T3JkZXJUeCwgW10sIHRoaXMub3B0cywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnBlcnBNYXJrZXRMYXN0U2xvdENhY2hlLnNldChvcmRlclBhcmFtcy5tYXJrZXRJbmRleCwgc2xvdCk7XG4gICAgICAgICAgICByZXR1cm4geyB0eFNpZywgc2lnbmVkRmlsbFR4IH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcGxhY2VQZXJwT3JkZXIob3JkZXJQYXJhbXMsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcsIHNsb3QgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFBsYWNlUGVycE9yZGVySXgob3JkZXJQYXJhbXMpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICB0aGlzLnBlcnBNYXJrZXRMYXN0U2xvdENhY2hlLnNldChvcmRlclBhcmFtcy5tYXJrZXRJbmRleCwgc2xvdCk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0UGxhY2VQZXJwT3JkZXJJeChvcmRlclBhcmFtcykge1xuICAgICAgICBvcmRlclBhcmFtcyA9ICgwLCBvcmRlclBhcmFtc18xLmdldE9yZGVyUGFyYW1zKShvcmRlclBhcmFtcywgeyBtYXJrZXRUeXBlOiB0eXBlc18xLk1hcmtldFR5cGUuUEVSUCB9KTtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCldLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlYWRhYmxlUGVycE1hcmtldEluZGV4OiBvcmRlclBhcmFtcy5tYXJrZXRJbmRleCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ucGxhY2VQZXJwT3JkZXIob3JkZXJQYXJhbXMsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHM6IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlQU1NcyhtYXJrZXRJbmRleGVzLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRVcGRhdGVBTU1zSXgobWFya2V0SW5kZXhlcyksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0VXBkYXRlQU1Nc0l4KG1hcmtldEluZGV4ZXMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IG1hcmtldEluZGV4ZXMubGVuZ3RoOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgICAgICBtYXJrZXRJbmRleGVzLnB1c2goMTAwKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXJrZXRBY2NvdW50SW5mb3MgPSBbXTtcbiAgICAgICAgY29uc3Qgb3JhY2xlQWNjb3VudEluZm9zID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbWFya2V0SW5kZXggb2YgbWFya2V0SW5kZXhlcykge1xuICAgICAgICAgICAgaWYgKG1hcmtldEluZGV4ICE9PSAxMDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXQgPSB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICAgICAgICAgICAgICBtYXJrZXRBY2NvdW50SW5mb3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHB1YmtleTogbWFya2V0LnB1YmtleSxcbiAgICAgICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG9yYWNsZUFjY291bnRJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcHVia2V5OiBtYXJrZXQuYW1tLm9yYWNsZSxcbiAgICAgICAgICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IG9yYWNsZUFjY291bnRJbmZvcy5jb25jYXQobWFya2V0QWNjb3VudEluZm9zKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi51cGRhdGVBbW1zKG1hcmtldEluZGV4ZXMsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHNldHRsZUV4cGlyZWRNYXJrZXQobWFya2V0SW5kZXgsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFNldHRsZUV4cGlyZWRNYXJrZXRJeChtYXJrZXRJbmRleCksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0U2V0dGxlRXhwaXJlZE1hcmtldEl4KG1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IG1hcmtldEFjY291bnRJbmZvcyA9IFtdO1xuICAgICAgICBjb25zdCBvcmFjbGVBY2NvdW50SW5mb3MgPSBbXTtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldEFjY291bnRJbmZvcyA9IFtdO1xuICAgICAgICBjb25zdCBtYXJrZXQgPSB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICAgICAgbWFya2V0QWNjb3VudEluZm9zLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBtYXJrZXQucHVia2V5LFxuICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIG9yYWNsZUFjY291bnRJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogbWFya2V0LmFtbS5vcmFjbGUsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHNwb3RNYXJrZXRBY2NvdW50SW5mb3MucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYKS5wdWJrZXksXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSBvcmFjbGVBY2NvdW50SW5mb3NcbiAgICAgICAgICAgIC5jb25jYXQoc3BvdE1hcmtldEFjY291bnRJbmZvcylcbiAgICAgICAgICAgIC5jb25jYXQobWFya2V0QWNjb3VudEluZm9zKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5zZXR0bGVFeHBpcmVkTWFya2V0KG1hcmtldEluZGV4LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZXR0bGVFeHBpcmVkTWFya2V0UG9vbHNUb1JldmVudWVQb29sKHBlcnBNYXJrZXRJbmRleCwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcGVycE1hcmtldFB1YmxpY0tleSA9IGF3YWl0ICgwLCBwZGFfMS5nZXRQZXJwTWFya2V0UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCBwZXJwTWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBzcG90TWFya2V0UHVibGljS2V5ID0gYXdhaXQgKDAsIHBkYV8xLmdldFNwb3RNYXJrZXRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9TUE9UX01BUktFVF9JTkRFWCk7XG4gICAgICAgIGNvbnN0IGl4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnNldHRsZUV4cGlyZWRNYXJrZXRQb29sc1RvUmV2ZW51ZVBvb2woe1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGFkbWluOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogc3BvdE1hcmtldFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBwZXJwTWFya2V0UHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihpeCwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBjYW5jZWxPcmRlcihvcmRlcklkLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRDYW5jZWxPcmRlckl4KG9yZGVySWQpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldENhbmNlbE9yZGVySXgob3JkZXJJZCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoKV0sXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5jYW5jZWxPcmRlcihvcmRlcklkICE9PSBudWxsICYmIG9yZGVySWQgIT09IHZvaWQgMCA/IG9yZGVySWQgOiBudWxsLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjYW5jZWxPcmRlckJ5VXNlcklkKHVzZXJPcmRlcklkLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRDYW5jZWxPcmRlckJ5VXNlcklkSXgodXNlck9yZGVySWQpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldENhbmNlbE9yZGVyQnlVc2VySWRJeCh1c2VyT3JkZXJJZCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSB0aGlzLmdldE9yZGVyQnlVc2VySWQodXNlck9yZGVySWQpO1xuICAgICAgICBjb25zdCBvcmFjbGUgPSB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50KG9yZGVyLm1hcmtldEluZGV4KS5hbW0ub3JhY2xlO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXSxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLmNhbmNlbE9yZGVyQnlVc2VySWQodXNlck9yZGVySWQsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBvcmFjbGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjYW5jZWxPcmRlcnNCeUlkcyhvcmRlcklkcywgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0Q2FuY2VsT3JkZXJzQnlJZHNJeChvcmRlcklkcyksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q2FuY2VsT3JkZXJzQnlJZHNJeChvcmRlcklkcykge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoKV0sXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5jYW5jZWxPcmRlcnNCeUlkcyhvcmRlcklkcywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY2FuY2VsT3JkZXJzKG1hcmtldFR5cGUsIG1hcmtldEluZGV4LCBkaXJlY3Rpb24sIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldENhbmNlbE9yZGVyc0l4KG1hcmtldFR5cGUsIG1hcmtldEluZGV4LCBkaXJlY3Rpb24pLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldENhbmNlbE9yZGVyc0l4KG1hcmtldFR5cGUsIG1hcmtldEluZGV4LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGxldCByZWFkYWJsZVBlcnBNYXJrZXRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgICAgbGV0IHJlYWRhYmxlU3BvdE1hcmtldEluZGV4ZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChtYXJrZXRJbmRleCkge1xuICAgICAgICAgICAgaWYgKG1hcmtldFR5cGUgJiYgKDAsIHR5cGVzXzEuaXNWYXJpYW50KShtYXJrZXRUeXBlLCAncGVycCcpKSB7XG4gICAgICAgICAgICAgICAgcmVhZGFibGVQZXJwTWFya2V0SW5kZXggPSBtYXJrZXRJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcmtldFR5cGUgJiYgKDAsIHR5cGVzXzEuaXNWYXJpYW50KShtYXJrZXRUeXBlLCAnc3BvdCcpKSB7XG4gICAgICAgICAgICAgICAgcmVhZGFibGVTcG90TWFya2V0SW5kZXhlcyA9IFttYXJrZXRJbmRleF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoKV0sXG4gICAgICAgICAgICByZWFkYWJsZVBlcnBNYXJrZXRJbmRleCxcbiAgICAgICAgICAgIHJlYWRhYmxlU3BvdE1hcmtldEluZGV4ZXMsXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5jYW5jZWxPcmRlcnMobWFya2V0VHlwZSAhPT0gbnVsbCAmJiBtYXJrZXRUeXBlICE9PSB2b2lkIDAgPyBtYXJrZXRUeXBlIDogbnVsbCwgbWFya2V0SW5kZXggIT09IG51bGwgJiYgbWFya2V0SW5kZXggIT09IHZvaWQgMCA/IG1hcmtldEluZGV4IDogbnVsbCwgZGlyZWN0aW9uICE9PSBudWxsICYmIGRpcmVjdGlvbiAhPT0gdm9pZCAwID8gZGlyZWN0aW9uIDogbnVsbCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY2FuY2VsQW5kUGxhY2VPcmRlcnMoY2FuY2VsT3JkZXJQYXJhbXMsIHBsYWNlT3JkZXJQYXJhbXMsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGl4cyA9IFtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0Q2FuY2VsT3JkZXJzSXgoY2FuY2VsT3JkZXJQYXJhbXMubWFya2V0VHlwZSwgY2FuY2VsT3JkZXJQYXJhbXMubWFya2V0SW5kZXgsIGNhbmNlbE9yZGVyUGFyYW1zLmRpcmVjdGlvbiksXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldFBsYWNlT3JkZXJzSXgocGxhY2VPcmRlclBhcmFtcyksXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGl4cywgdHhQYXJhbXMpO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgcGxhY2VPcmRlcnMocGFyYW1zLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRQbGFjZU9yZGVyc0l4KHBhcmFtcyksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0UGxhY2VPcmRlcnNJeChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlYWRhYmxlUGVycE1hcmtldEluZGV4ID0gW107XG4gICAgICAgIGNvbnN0IHJlYWRhYmxlU3BvdE1hcmtldEluZGV4ZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhbSBvZiBwYXJhbXMpIHtcbiAgICAgICAgICAgIGlmICghcGFyYW0ubWFya2V0VHlwZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbXVzdCBzZXQgcGFyYW0ubWFya2V0VHlwZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkocGFyYW0ubWFya2V0VHlwZSwgJ3BlcnAnKSkge1xuICAgICAgICAgICAgICAgIHJlYWRhYmxlUGVycE1hcmtldEluZGV4LnB1c2gocGFyYW0ubWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVhZGFibGVTcG90TWFya2V0SW5kZXhlcy5wdXNoKHBhcmFtLm1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXSxcbiAgICAgICAgICAgIHJlYWRhYmxlUGVycE1hcmtldEluZGV4LFxuICAgICAgICAgICAgcmVhZGFibGVTcG90TWFya2V0SW5kZXhlcyxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnBsYWNlT3JkZXJzKHBhcmFtcywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBmaWxsUGVycE9yZGVyKHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyLCBvcmRlciwgbWFrZXJJbmZvLCByZWZlcnJlckluZm8sIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldEZpbGxQZXJwT3JkZXJJeCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlciwgb3JkZXIsIG1ha2VySW5mbywgcmVmZXJyZXJJbmZvKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRGaWxsUGVycE9yZGVySXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBvcmRlciwgbWFrZXJJbmZvLCByZWZlcnJlckluZm8pIHtcbiAgICAgICAgY29uc3QgdXNlclN0YXRzUHVibGljS2V5ID0gKDAsIHBkYV8xLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHVzZXJBY2NvdW50LmF1dGhvcml0eSk7XG4gICAgICAgIGNvbnN0IGZpbGxlclB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgZmlsbGVyU3RhdHNQdWJsaWNLZXkgPSB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgbWFya2V0SW5kZXggPSBvcmRlclxuICAgICAgICAgICAgPyBvcmRlci5tYXJrZXRJbmRleFxuICAgICAgICAgICAgOiB1c2VyQWNjb3VudC5vcmRlcnMuZmluZCgob3JkZXIpID0+IG9yZGVyLm9yZGVySWQgPT09IHVzZXJBY2NvdW50Lm5leHRPcmRlcklkIC0gMSkubWFya2V0SW5kZXg7XG4gICAgICAgIG1ha2VySW5mbyA9IEFycmF5LmlzQXJyYXkobWFrZXJJbmZvKVxuICAgICAgICAgICAgPyBtYWtlckluZm9cbiAgICAgICAgICAgIDogbWFrZXJJbmZvXG4gICAgICAgICAgICAgICAgPyBbbWFrZXJJbmZvXVxuICAgICAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50cyA9IFt1c2VyQWNjb3VudF07XG4gICAgICAgIGZvciAoY29uc3QgbWFrZXIgb2YgbWFrZXJJbmZvKSB7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHMucHVzaChtYWtlci5tYWtlclVzZXJBY2NvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzLFxuICAgICAgICAgICAgd3JpdGFibGVQZXJwTWFya2V0SW5kZXhlczogW21hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAoY29uc3QgbWFrZXIgb2YgbWFrZXJJbmZvKSB7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IG1ha2VyLm1ha2VyLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IG1ha2VyLm1ha2VyU3RhdHMsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG4gICAgICAgICAgICBjb25zdCByZWZlcnJlcklzTWFrZXIgPSBtYWtlckluZm8uZmluZCgobWFrZXIpID0+IG1ha2VyLm1ha2VyLmVxdWFscyhyZWZlcnJlckluZm8ucmVmZXJyZXIpKSAhPT1cbiAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoIXJlZmVycmVySXNNYWtlcikge1xuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlcixcbiAgICAgICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlclN0YXRzLFxuICAgICAgICAgICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JkZXJJZCA9IG9yZGVyLm9yZGVySWQ7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uZmlsbFBlcnBPcmRlcihvcmRlcklkLCBudWxsLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgZmlsbGVyOiBmaWxsZXJQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgZmlsbGVyU3RhdHM6IGZpbGxlclN0YXRzUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdXNlclN0YXRzUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UmV2ZXJ0RmlsbEl4KCkge1xuICAgICAgICBjb25zdCBmaWxsZXJQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IGZpbGxlclN0YXRzUHVibGljS2V5ID0gdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ucmV2ZXJ0RmlsbCh7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgZmlsbGVyOiBmaWxsZXJQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgZmlsbGVyU3RhdHM6IGZpbGxlclN0YXRzUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBsYWNlU3BvdE9yZGVyKG9yZGVyUGFyYW1zLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnLCBzbG90IH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRQbGFjZVNwb3RPcmRlckl4KG9yZGVyUGFyYW1zKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQob3JkZXJQYXJhbXMubWFya2V0SW5kZXgsIHNsb3QpO1xuICAgICAgICB0aGlzLnNwb3RNYXJrZXRMYXN0U2xvdENhY2hlLnNldChudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgsIHNsb3QpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldFBsYWNlU3BvdE9yZGVySXgob3JkZXJQYXJhbXMpIHtcbiAgICAgICAgb3JkZXJQYXJhbXMgPSAoMCwgb3JkZXJQYXJhbXNfMS5nZXRPcmRlclBhcmFtcykob3JkZXJQYXJhbXMsIHsgbWFya2V0VHlwZTogdHlwZXNfMS5NYXJrZXRUeXBlLlNQT1QgfSk7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXSxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgICAgICByZWFkYWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbXG4gICAgICAgICAgICAgICAgb3JkZXJQYXJhbXMubWFya2V0SW5kZXgsXG4gICAgICAgICAgICAgICAgbnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ucGxhY2VTcG90T3JkZXIob3JkZXJQYXJhbXMsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHM6IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZmlsbFNwb3RPcmRlcih1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlciwgb3JkZXIsIGZ1bGZpbGxtZW50Q29uZmlnLCBtYWtlckluZm8sIHJlZmVycmVySW5mbywgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0RmlsbFNwb3RPcmRlckl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyLCBvcmRlciwgZnVsZmlsbG1lbnRDb25maWcsIG1ha2VySW5mbywgcmVmZXJyZXJJbmZvKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRGaWxsU3BvdE9yZGVySXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBvcmRlciwgZnVsZmlsbG1lbnRDb25maWcsIG1ha2VySW5mbywgcmVmZXJyZXJJbmZvKSB7XG4gICAgICAgIGNvbnN0IHVzZXJTdGF0c1B1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB1c2VyQWNjb3VudC5hdXRob3JpdHkpO1xuICAgICAgICBjb25zdCBmaWxsZXJQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IGZpbGxlclN0YXRzUHVibGljS2V5ID0gdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IG1hcmtldEluZGV4ID0gb3JkZXJcbiAgICAgICAgICAgID8gb3JkZXIubWFya2V0SW5kZXhcbiAgICAgICAgICAgIDogdXNlckFjY291bnQub3JkZXJzLmZpbmQoKG9yZGVyKSA9PiBvcmRlci5vcmRlcklkID09PSB1c2VyQWNjb3VudC5uZXh0T3JkZXJJZCAtIDEpLm1hcmtldEluZGV4O1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudHMgPSBbdXNlckFjY291bnRdO1xuICAgICAgICBpZiAobWFrZXJJbmZvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50cy5wdXNoKG1ha2VySW5mby5tYWtlclVzZXJBY2NvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW21hcmtldEluZGV4LCBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVhdLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1ha2VySW5mbykge1xuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgcHVia2V5OiBtYWtlckluZm8ubWFrZXIsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHB1YmtleTogbWFrZXJJbmZvLm1ha2VyU3RhdHMsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlcixcbiAgICAgICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgcHVia2V5OiByZWZlcnJlckluZm8ucmVmZXJyZXJTdGF0cyxcbiAgICAgICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yZGVySWQgPSBvcmRlci5vcmRlcklkO1xuICAgICAgICBjb25zdCBtYWtlck9yZGVySWQgPSBtYWtlckluZm8gPyBtYWtlckluZm8ub3JkZXIub3JkZXJJZCA6IG51bGw7XG4gICAgICAgIHRoaXMuYWRkU3BvdEZ1bGZpbGxtZW50QWNjb3VudHMobWFya2V0SW5kZXgsIHJlbWFpbmluZ0FjY291bnRzLCBmdWxmaWxsbWVudENvbmZpZyk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uZmlsbFNwb3RPcmRlcihvcmRlcklkLCBmdWxmaWxsbWVudENvbmZpZyA/IGZ1bGZpbGxtZW50Q29uZmlnLmZ1bGZpbGxtZW50VHlwZSA6IG51bGwsIG1ha2VyT3JkZXJJZCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGZpbGxlcjogZmlsbGVyUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGZpbGxlclN0YXRzOiBmaWxsZXJTdGF0c1B1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHM6IHVzZXJTdGF0c1B1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZFNwb3RGdWxmaWxsbWVudEFjY291bnRzKG1hcmtldEluZGV4LCByZW1haW5pbmdBY2NvdW50cywgZnVsZmlsbG1lbnRDb25maWcpIHtcbiAgICAgICAgaWYgKGZ1bGZpbGxtZW50Q29uZmlnKSB7XG4gICAgICAgICAgICBpZiAoJ3NlcnVtUHJvZ3JhbUlkJyBpbiBmdWxmaWxsbWVudENvbmZpZykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VydW1SZW1haW5pbmdBY2NvdW50cyhtYXJrZXRJbmRleCwgcmVtYWluaW5nQWNjb3VudHMsIGZ1bGZpbGxtZW50Q29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCdwaG9lbml4UHJvZ3JhbUlkJyBpbiBmdWxmaWxsbWVudENvbmZpZykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkUGhvZW5peFJlbWFpbmluZ0FjY291bnRzKG1hcmtldEluZGV4LCByZW1haW5pbmdBY2NvdW50cywgZnVsZmlsbG1lbnRDb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ0ludmFsaWQgZnVsZmlsbG1lbnQgY29uZmlnIHR5cGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHB1YmtleTogdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkudmF1bHQsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IHRoaXMuZ2V0UXVvdGVTcG90TWFya2V0QWNjb3VudCgpLnZhdWx0LFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFNlcnVtUmVtYWluaW5nQWNjb3VudHMobWFya2V0SW5kZXgsIHJlbWFpbmluZ0FjY291bnRzLCBmdWxmaWxsbWVudENvbmZpZykge1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogZnVsZmlsbG1lbnRDb25maWcucHVia2V5LFxuICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogZnVsZmlsbG1lbnRDb25maWcuc2VydW1Qcm9ncmFtSWQsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBmdWxmaWxsbWVudENvbmZpZy5zZXJ1bU1hcmtldCxcbiAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogZnVsZmlsbG1lbnRDb25maWcuc2VydW1SZXF1ZXN0UXVldWUsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IGZ1bGZpbGxtZW50Q29uZmlnLnNlcnVtRXZlbnRRdWV1ZSxcbiAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogZnVsZmlsbG1lbnRDb25maWcuc2VydW1CaWRzLFxuICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBmdWxmaWxsbWVudENvbmZpZy5zZXJ1bUFza3MsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IGZ1bGZpbGxtZW50Q29uZmlnLnNlcnVtQmFzZVZhdWx0LFxuICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBmdWxmaWxsbWVudENvbmZpZy5zZXJ1bVF1b3RlVmF1bHQsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IGZ1bGZpbGxtZW50Q29uZmlnLnNlcnVtT3Blbk9yZGVycyxcbiAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogKDAsIHBkYV8xLmdldFNlcnVtU2lnbmVyUHVibGljS2V5KShmdWxmaWxsbWVudENvbmZpZy5zZXJ1bVByb2dyYW1JZCwgZnVsZmlsbG1lbnRDb25maWcuc2VydW1NYXJrZXQsIGZ1bGZpbGxtZW50Q29uZmlnLnNlcnVtU2lnbmVyTm9uY2UpLFxuICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogdGhpcy5nZXRTaWduZXJQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgIGlzV3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KS52YXVsdCxcbiAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogdGhpcy5nZXRRdW90ZVNwb3RNYXJrZXRBY2NvdW50KCkudmF1bHQsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IHRoaXMuZ2V0U3RhdGVBY2NvdW50KCkuc3JtVmF1bHQsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZFBob2VuaXhSZW1haW5pbmdBY2NvdW50cyhtYXJrZXRJbmRleCwgcmVtYWluaW5nQWNjb3VudHMsIGZ1bGZpbGxtZW50Q29uZmlnKSB7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBmdWxmaWxsbWVudENvbmZpZy5wdWJrZXksXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBmdWxmaWxsbWVudENvbmZpZy5waG9lbml4UHJvZ3JhbUlkLFxuICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogZnVsZmlsbG1lbnRDb25maWcucGhvZW5peExvZ0F1dGhvcml0eSxcbiAgICAgICAgICAgIGlzV3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IGZ1bGZpbGxtZW50Q29uZmlnLnBob2VuaXhNYXJrZXQsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IHRoaXMuZ2V0U2lnbmVyUHVibGljS2V5KCksXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBmdWxmaWxsbWVudENvbmZpZy5waG9lbml4QmFzZVZhdWx0LFxuICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBmdWxmaWxsbWVudENvbmZpZy5waG9lbml4UXVvdGVWYXVsdCxcbiAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgIHB1YmtleTogdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkudmF1bHQsXG4gICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICBwdWJrZXk6IHRoaXMuZ2V0UXVvdGVTcG90TWFya2V0QWNjb3VudCgpLnZhdWx0LFxuICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgcHVia2V5OiBzcGxfdG9rZW5fMS5UT0tFTl9QUk9HUkFNX0lELFxuICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTd2FwIHRva2VucyBpbiBkcmlmdCBhY2NvdW50IHVzaW5nIGp1cGl0ZXJcbiAgICAgKiBAcGFyYW0ganVwaXRlckNsaWVudCBqdXBpdGVyIGNsaWVudCB0byBmaW5kIHJvdXRlcyBhbmQganVwaXRlciBpbnN0cnVjdGlvbnNcbiAgICAgKiBAcGFyYW0gb3V0TWFya2V0SW5kZXggdGhlIG1hcmtldCBpbmRleCBvZiB0aGUgdG9rZW4geW91J3JlIGJ1eWluZ1xuICAgICAqIEBwYXJhbSBpbk1hcmtldEluZGV4IHRoZSBtYXJrZXQgaW5kZXggb2YgdGhlIHRva2VuIHlvdSdyZSBzZWxsaW5nXG4gICAgICogQHBhcmFtIG91dEFzc29jaWF0ZWRUb2tlbkFjY291bnQgdGhlIHRva2VuIGFjY291bnQgdG8gcmVjZWl2ZSB0aGUgdG9rZW4gYmVpbmcgc29sZCBvbiBqdXBpdGVyXG4gICAgICogQHBhcmFtIGluQXNzb2NpYXRlZFRva2VuQWNjb3VudCB0aGUgdG9rZW4gYWNjb3VudCB0b1xuICAgICAqIEBwYXJhbSBhbW91bnQgdGhlIGFtb3VudCBvZiBUb2tlbkluLCByZWdhcmRsZXNzIG9mIHN3YXBNb2RlXG4gICAgICogQHBhcmFtIHNsaXBwYWdlQnBzIHRoZSBtYXggc2xpcHBhZ2UgcGFzc2VkIHRvIGp1cGl0ZXIgYXBpXG4gICAgICogQHBhcmFtIHN3YXBNb2RlIGp1cGl0ZXIgc3dhcE1vZGUgKEV4YWN0SW4gb3IgRXhhY3RPdXQpLCBkZWZhdWx0IGlzIEV4YWN0SW5cbiAgICAgKiBAcGFyYW0gcm91dGUgdGhlIGp1cGl0ZXIgcm91dGUgdG8gdXNlIGZvciB0aGUgc3dhcFxuICAgICAqIEBwYXJhbSByZWR1Y2VPbmx5IHNwZWNpZnkgaWYgSW4gb3IgT3V0IHRva2VuIG9uIHRoZSBkcmlmdCBhY2NvdW50IG11c3QgcmVkdWNlT25seSwgY2hlY2tlZCBhdCBlbmQgb2Ygc3dhcFxuICAgICAqIEBwYXJhbSB0eFBhcmFtc1xuICAgICAqL1xuICAgIGFzeW5jIHN3YXAoeyBqdXBpdGVyQ2xpZW50LCBvdXRNYXJrZXRJbmRleCwgaW5NYXJrZXRJbmRleCwgb3V0QXNzb2NpYXRlZFRva2VuQWNjb3VudCwgaW5Bc3NvY2lhdGVkVG9rZW5BY2NvdW50LCBhbW91bnQsIHNsaXBwYWdlQnBzLCBzd2FwTW9kZSwgcm91dGUsIHJlZHVjZU9ubHksIHR4UGFyYW1zLCB9KSB7XG4gICAgICAgIGNvbnN0IHsgaXhzLCBsb29rdXBUYWJsZXMgfSA9IGF3YWl0IHRoaXMuZ2V0SnVwaXRlclN3YXBJeCh7XG4gICAgICAgICAgICBqdXBpdGVyQ2xpZW50LFxuICAgICAgICAgICAgb3V0TWFya2V0SW5kZXgsXG4gICAgICAgICAgICBpbk1hcmtldEluZGV4LFxuICAgICAgICAgICAgb3V0QXNzb2NpYXRlZFRva2VuQWNjb3VudCxcbiAgICAgICAgICAgIGluQXNzb2NpYXRlZFRva2VuQWNjb3VudCxcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIHNsaXBwYWdlQnBzLFxuICAgICAgICAgICAgc3dhcE1vZGUsXG4gICAgICAgICAgICByb3V0ZSxcbiAgICAgICAgICAgIHJlZHVjZU9ubHksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0eCA9IChhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oaXhzLCB0eFBhcmFtcywgMCwgbG9va3VwVGFibGVzKSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcsIHNsb3QgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4KTtcbiAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQob3V0TWFya2V0SW5kZXgsIHNsb3QpO1xuICAgICAgICB0aGlzLnNwb3RNYXJrZXRMYXN0U2xvdENhY2hlLnNldChpbk1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRKdXBpdGVyU3dhcEl4KHsganVwaXRlckNsaWVudCwgb3V0TWFya2V0SW5kZXgsIGluTWFya2V0SW5kZXgsIG91dEFzc29jaWF0ZWRUb2tlbkFjY291bnQsIGluQXNzb2NpYXRlZFRva2VuQWNjb3VudCwgYW1vdW50LCBzbGlwcGFnZUJwcywgc3dhcE1vZGUsIG9ubHlEaXJlY3RSb3V0ZXMsIHJvdXRlLCByZWR1Y2VPbmx5LCB1c2VyQWNjb3VudFB1YmxpY0tleSwgfSkge1xuICAgICAgICBjb25zdCBvdXRNYXJrZXQgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG91dE1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgaW5NYXJrZXQgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KGluTWFya2V0SW5kZXgpO1xuICAgICAgICBpZiAoIXJvdXRlKSB7XG4gICAgICAgICAgICBjb25zdCByb3V0ZXMgPSBhd2FpdCBqdXBpdGVyQ2xpZW50LmdldFJvdXRlcyh7XG4gICAgICAgICAgICAgICAgaW5wdXRNaW50OiBpbk1hcmtldC5taW50LFxuICAgICAgICAgICAgICAgIG91dHB1dE1pbnQ6IG91dE1hcmtldC5taW50LFxuICAgICAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgICAgICBzbGlwcGFnZUJwcyxcbiAgICAgICAgICAgICAgICBzd2FwTW9kZSxcbiAgICAgICAgICAgICAgICBvbmx5RGlyZWN0Um91dGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJvdXRlcyB8fCByb3V0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBqdXBpdGVyIHJvdXRlcyBmb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm91dGUgPSByb3V0ZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBqdXBpdGVyQ2xpZW50LmdldFN3YXBUcmFuc2FjdGlvbih7XG4gICAgICAgICAgICByb3V0ZSxcbiAgICAgICAgICAgIHVzZXJQdWJsaWNLZXk6IHRoaXMucHJvdmlkZXIud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIHNsaXBwYWdlQnBzLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0cmFuc2FjdGlvbk1lc3NhZ2UsIGxvb2t1cFRhYmxlcyB9ID0gYXdhaXQganVwaXRlckNsaWVudC5nZXRUcmFuc2FjdGlvbk1lc3NhZ2VBbmRMb29rdXBUYWJsZXMoe1xuICAgICAgICAgICAgdHJhbnNhY3Rpb24sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBqdXBpdGVySW5zdHJ1Y3Rpb25zID0ganVwaXRlckNsaWVudC5nZXRKdXBpdGVySW5zdHJ1Y3Rpb25zKHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uTWVzc2FnZSxcbiAgICAgICAgICAgIGlucHV0TWludDogaW5NYXJrZXQubWludCxcbiAgICAgICAgICAgIG91dHB1dE1pbnQ6IG91dE1hcmtldC5taW50LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcHJlSW5zdHJ1Y3Rpb25zID0gW107XG4gICAgICAgIGlmICghb3V0QXNzb2NpYXRlZFRva2VuQWNjb3VudCkge1xuICAgICAgICAgICAgb3V0QXNzb2NpYXRlZFRva2VuQWNjb3VudCA9IGF3YWl0IHRoaXMuZ2V0QXNzb2NpYXRlZFRva2VuQWNjb3VudChvdXRNYXJrZXQubWFya2V0SW5kZXgsIGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gYXdhaXQgdGhpcy5jb25uZWN0aW9uLmdldEFjY291bnRJbmZvKG91dEFzc29jaWF0ZWRUb2tlbkFjY291bnQpO1xuICAgICAgICAgICAgaWYgKCFhY2NvdW50SW5mbykge1xuICAgICAgICAgICAgICAgIHByZUluc3RydWN0aW9ucy5wdXNoKHRoaXMuY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudElkZW1wb3RlbnRJbnN0cnVjdGlvbihvdXRBc3NvY2lhdGVkVG9rZW5BY2NvdW50LCB0aGlzLnByb3ZpZGVyLndhbGxldC5wdWJsaWNLZXksIHRoaXMucHJvdmlkZXIud2FsbGV0LnB1YmxpY0tleSwgb3V0TWFya2V0Lm1pbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWluQXNzb2NpYXRlZFRva2VuQWNjb3VudCkge1xuICAgICAgICAgICAgaW5Bc3NvY2lhdGVkVG9rZW5BY2NvdW50ID0gYXdhaXQgdGhpcy5nZXRBc3NvY2lhdGVkVG9rZW5BY2NvdW50KGluTWFya2V0Lm1hcmtldEluZGV4LCBmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50SW5mbyA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRBY2NvdW50SW5mbyhpbkFzc29jaWF0ZWRUb2tlbkFjY291bnQpO1xuICAgICAgICAgICAgaWYgKCFhY2NvdW50SW5mbykge1xuICAgICAgICAgICAgICAgIHByZUluc3RydWN0aW9ucy5wdXNoKHRoaXMuY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudElkZW1wb3RlbnRJbnN0cnVjdGlvbihpbkFzc29jaWF0ZWRUb2tlbkFjY291bnQsIHRoaXMucHJvdmlkZXIud2FsbGV0LnB1YmxpY0tleSwgdGhpcy5wcm92aWRlci53YWxsZXQucHVibGljS2V5LCBpbk1hcmtldC5taW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBiZWdpblN3YXBJeCwgZW5kU3dhcEl4IH0gPSBhd2FpdCB0aGlzLmdldFN3YXBJeCh7XG4gICAgICAgICAgICBvdXRNYXJrZXRJbmRleCxcbiAgICAgICAgICAgIGluTWFya2V0SW5kZXgsXG4gICAgICAgICAgICBhbW91bnRJbjogYW1vdW50LFxuICAgICAgICAgICAgaW5Ub2tlbkFjY291bnQ6IGluQXNzb2NpYXRlZFRva2VuQWNjb3VudCxcbiAgICAgICAgICAgIG91dFRva2VuQWNjb3VudDogb3V0QXNzb2NpYXRlZFRva2VuQWNjb3VudCxcbiAgICAgICAgICAgIHJlZHVjZU9ubHksXG4gICAgICAgICAgICB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGl4cyA9IFtcbiAgICAgICAgICAgIC4uLnByZUluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIGJlZ2luU3dhcEl4LFxuICAgICAgICAgICAgLi4uanVwaXRlckluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIGVuZFN3YXBJeCxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIHsgaXhzLCBsb29rdXBUYWJsZXMgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBkcmlmdCBiZWdpbl9zd2FwIGFuZCBlbmRfc3dhcCBpbnN0cnVjdGlvbnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdXRNYXJrZXRJbmRleCB0aGUgbWFya2V0IGluZGV4IG9mIHRoZSB0b2tlbiB5b3UncmUgYnV5aW5nXG4gICAgICogQHBhcmFtIGluTWFya2V0SW5kZXggdGhlIG1hcmtldCBpbmRleCBvZiB0aGUgdG9rZW4geW91J3JlIHNlbGxpbmdcbiAgICAgKiBAcGFyYW0gYW1vdW50SW4gdGhlIGFtb3VudCBvZiB0aGUgdG9rZW4gdG8gc2VsbFxuICAgICAqIEBwYXJhbSBpblRva2VuQWNjb3VudCB0aGUgdG9rZW4gYWNjb3VudCB0byBtb3ZlIHRoZSB0b2tlbnMgYmVpbmcgc29sZFxuICAgICAqIEBwYXJhbSBvdXRUb2tlbkFjY291bnQgdGhlIHRva2VuIGFjY291bnQgdG8gcmVjZWl2ZSB0aGUgdG9rZW5zIGJlaW5nIGJvdWdodFxuICAgICAqIEBwYXJhbSBsaW1pdFByaWNlIHRoZSBsaW1pdCBwcmljZSBvZiB0aGUgc3dhcFxuICAgICAqIEBwYXJhbSByZWR1Y2VPbmx5XG4gICAgICogQHBhcmFtIHVzZXJBY2NvdW50UHVibGljS2V5IG9wdGlvbmFsLCBzcGVjaWZ5IGEgY3VzdG9tIHVzZXJBY2NvdW50UHVibGljS2V5IHRvIHVzZSBpbnN0ZWFkIG9mIGdldHRpbmcgdGhlIGN1cnJlbnQgdXNlciBhY2NvdW50OyBjYW4gYmUgaGVscGZ1bCBpZiB0aGUgYWNjb3VudCBpcyBiZWluZyBjcmVhdGVkIHdpdGhpbiB0aGUgY3VycmVudCB0eFxuICAgICAqL1xuICAgIGFzeW5jIGdldFN3YXBJeCh7IG91dE1hcmtldEluZGV4LCBpbk1hcmtldEluZGV4LCBhbW91bnRJbiwgaW5Ub2tlbkFjY291bnQsIG91dFRva2VuQWNjb3VudCwgbGltaXRQcmljZSwgcmVkdWNlT25seSwgdXNlckFjY291bnRQdWJsaWNLZXksIH0pIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJsaWNLZXlUb1VzZSA9IHVzZXJBY2NvdW50UHVibGljS2V5IHx8IChhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCkpO1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudHMgPSBbXTtcbiAgICAgICAgaWYgKHRoaXMuaGFzVXNlcigpICYmIHRoaXMuZ2V0VXNlcigpLmdldFVzZXJBY2NvdW50QW5kU2xvdCgpKSB7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHMucHVzaCh0aGlzLmdldFVzZXIoKS5nZXRVc2VyQWNjb3VudEFuZFNsb3QoKS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW291dE1hcmtldEluZGV4LCBpbk1hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG91dFNwb3RNYXJrZXQgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG91dE1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgaW5TcG90TWFya2V0ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChpbk1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgYmVnaW5Td2FwSXggPSBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uYmVnaW5Td2FwKGluTWFya2V0SW5kZXgsIG91dE1hcmtldEluZGV4LCBhbW91bnRJbiwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5VG9Vc2UsXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBvdXRTcG90TWFya2V0VmF1bHQ6IG91dFNwb3RNYXJrZXQudmF1bHQsXG4gICAgICAgICAgICAgICAgaW5TcG90TWFya2V0VmF1bHQ6IGluU3BvdE1hcmtldC52YXVsdCxcbiAgICAgICAgICAgICAgICBpblRva2VuQWNjb3VudCxcbiAgICAgICAgICAgICAgICBvdXRUb2tlbkFjY291bnQsXG4gICAgICAgICAgICAgICAgdG9rZW5Qcm9ncmFtOiBzcGxfdG9rZW5fMS5UT0tFTl9QUk9HUkFNX0lELFxuICAgICAgICAgICAgICAgIGRyaWZ0U2lnbmVyOiB0aGlzLmdldFN0YXRlQWNjb3VudCgpLnNpZ25lcixcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGFuY2hvci53ZWIzLlNZU1ZBUl9JTlNUUlVDVElPTlNfUFVCS0VZLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZW5kU3dhcEl4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLmVuZFN3YXAoaW5NYXJrZXRJbmRleCwgb3V0TWFya2V0SW5kZXgsIGxpbWl0UHJpY2UgIT09IG51bGwgJiYgbGltaXRQcmljZSAhPT0gdm9pZCAwID8gbGltaXRQcmljZSA6IG51bGwsIHJlZHVjZU9ubHkgIT09IG51bGwgJiYgcmVkdWNlT25seSAhPT0gdm9pZCAwID8gcmVkdWNlT25seSA6IG51bGwsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleVRvVXNlLFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgb3V0U3BvdE1hcmtldFZhdWx0OiBvdXRTcG90TWFya2V0LnZhdWx0LFxuICAgICAgICAgICAgICAgIGluU3BvdE1hcmtldFZhdWx0OiBpblNwb3RNYXJrZXQudmF1bHQsXG4gICAgICAgICAgICAgICAgaW5Ub2tlbkFjY291bnQsXG4gICAgICAgICAgICAgICAgb3V0VG9rZW5BY2NvdW50LFxuICAgICAgICAgICAgICAgIHRva2VuUHJvZ3JhbTogc3BsX3Rva2VuXzEuVE9LRU5fUFJPR1JBTV9JRCxcbiAgICAgICAgICAgICAgICBkcmlmdFNpZ25lcjogdGhpcy5nZXRTdGF0ZUFjY291bnQoKS5zaWduZXIsXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBhbmNob3Iud2ViMy5TWVNWQVJfSU5TVFJVQ1RJT05TX1BVQktFWSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7IGJlZ2luU3dhcEl4LCBlbmRTd2FwSXggfTtcbiAgICB9XG4gICAgYXN5bmMgc3Rha2VGb3JNU09MKHsgYW1vdW50IH0pIHtcbiAgICAgICAgY29uc3QgaXhzID0gYXdhaXQgdGhpcy5nZXRTdGFrZUZvck1TT0xJeCh7IGFtb3VudCB9KTtcbiAgICAgICAgY29uc3QgdHggPSBhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oaXhzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0U3Rha2VGb3JNU09MSXgoeyBhbW91bnQsIHVzZXJBY2NvdW50UHVibGljS2V5LCB9KSB7XG4gICAgICAgIGNvbnN0IHdTT0xNaW50ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudCgxKS5taW50O1xuICAgICAgICBjb25zdCBtU09MQWNjb3VudCA9IGF3YWl0IHRoaXMuZ2V0QXNzb2NpYXRlZFRva2VuQWNjb3VudCgyKTtcbiAgICAgICAgY29uc3Qgd1NPTEFjY291bnQgPSBhd2FpdCB0aGlzLmdldEFzc29jaWF0ZWRUb2tlbkFjY291bnQoMSwgZmFsc2UpO1xuICAgICAgICBjb25zdCB3U09MQWNjb3VudEV4aXN0cyA9IGF3YWl0IHRoaXMuY2hlY2tJZkFjY291bnRFeGlzdHMod1NPTEFjY291bnQpO1xuICAgICAgICBjb25zdCBjbG9zZVdTT0xJeCA9ICgwLCBzcGxfdG9rZW5fMS5jcmVhdGVDbG9zZUFjY291bnRJbnN0cnVjdGlvbikod1NPTEFjY291bnQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgdGhpcy53YWxsZXQucHVibGljS2V5KTtcbiAgICAgICAgY29uc3QgY3JlYXRlV1NPTEl4ID0gYXdhaXQgdGhpcy5jcmVhdGVBc3NvY2lhdGVkVG9rZW5BY2NvdW50SWRlbXBvdGVudEluc3RydWN0aW9uKHdTT0xBY2NvdW50LCB0aGlzLndhbGxldC5wdWJsaWNLZXksIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgd1NPTE1pbnQpO1xuICAgICAgICBjb25zdCB7IGJlZ2luU3dhcEl4LCBlbmRTd2FwSXggfSA9IGF3YWl0IHRoaXMuZ2V0U3dhcEl4KHtcbiAgICAgICAgICAgIGluTWFya2V0SW5kZXg6IDEsXG4gICAgICAgICAgICBvdXRNYXJrZXRJbmRleDogMixcbiAgICAgICAgICAgIGFtb3VudEluOiBhbW91bnQsXG4gICAgICAgICAgICBpblRva2VuQWNjb3VudDogd1NPTEFjY291bnQsXG4gICAgICAgICAgICBvdXRUb2tlbkFjY291bnQ6IG1TT0xBY2NvdW50LFxuICAgICAgICAgICAgdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9ncmFtID0gKDAsIG1hcmluYWRlXzEuZ2V0TWFyaW5hZGVGaW5hbmNlUHJvZ3JhbSkodGhpcy5wcm92aWRlcik7XG4gICAgICAgIGNvbnN0IGRlcG9zaXRJeCA9IGF3YWl0ICgwLCBtYXJpbmFkZV8xLmdldE1hcmluYWRlRGVwb3NpdEl4KSh7XG4gICAgICAgICAgICBwcm9ncmFtLFxuICAgICAgICAgICAgbVNPTEFjY291bnQ6IG1TT0xBY2NvdW50LFxuICAgICAgICAgICAgdHJhbnNmZXJGcm9tOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBpeHMgPSBbXTtcbiAgICAgICAgaWYgKCF3U09MQWNjb3VudEV4aXN0cykge1xuICAgICAgICAgICAgaXhzLnB1c2goY3JlYXRlV1NPTEl4KTtcbiAgICAgICAgfVxuICAgICAgICBpeHMucHVzaChiZWdpblN3YXBJeCwgY2xvc2VXU09MSXgsIGRlcG9zaXRJeCwgY3JlYXRlV1NPTEl4LCBlbmRTd2FwSXgpO1xuICAgICAgICByZXR1cm4gaXhzO1xuICAgIH1cbiAgICBhc3luYyB0cmlnZ2VyT3JkZXIodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXIsIG9yZGVyLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRUcmlnZ2VyT3JkZXJJeCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlciwgb3JkZXIpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldFRyaWdnZXJPcmRlckl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyQWNjb3VudCwgb3JkZXIpIHtcbiAgICAgICAgY29uc3QgZmlsbGVyUHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBsZXQgcmVtYWluaW5nQWNjb3VudHNQYXJhbXM7XG4gICAgICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yZGVyLm1hcmtldFR5cGUsICdwZXJwJykpIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3VzZXJBY2NvdW50XSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzOiBbb3JkZXIubWFya2V0SW5kZXhdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3VzZXJBY2NvdW50XSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbb3JkZXIubWFya2V0SW5kZXgsIG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9TUE9UX01BUktFVF9JTkRFWF0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyhyZW1haW5pbmdBY2NvdW50c1BhcmFtcyk7XG4gICAgICAgIGNvbnN0IG9yZGVySWQgPSBvcmRlci5vcmRlcklkO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnRyaWdnZXJPcmRlcihvcmRlcklkLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgZmlsbGVyOiBmaWxsZXJQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBmb3JjZUNhbmNlbE9yZGVycyh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlciwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0Rm9yY2VDYW5jZWxPcmRlcnNJeCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlciksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0Rm9yY2VDYW5jZWxPcmRlcnNJeCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlckFjY291bnQpIHtcbiAgICAgICAgY29uc3QgZmlsbGVyUHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdXNlckFjY291bnRdLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW251bWVyaWNDb25zdGFudHNfMS5RVU9URV9TUE9UX01BUktFVF9JTkRFWF0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLmZvcmNlQ2FuY2VsT3JkZXJzKHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBmaWxsZXI6IGZpbGxlclB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVVzZXJJZGxlKHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRVcGRhdGVVc2VySWRsZUl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRVcGRhdGVVc2VySWRsZUl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyQWNjb3VudCkge1xuICAgICAgICBjb25zdCBmaWxsZXJQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt1c2VyQWNjb3VudF0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnVwZGF0ZVVzZXJJZGxlKHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBmaWxsZXI6IGZpbGxlclB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVVzZXJPcGVuT3JkZXJzQ291bnQodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXIsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFVwZGF0ZVVzZXJPcGVuT3JkZXJzQ291bnRJeCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlciksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0VXBkYXRlVXNlck9wZW5PcmRlcnNDb3VudEl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyQWNjb3VudCkge1xuICAgICAgICBjb25zdCBmaWxsZXJQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt1c2VyQWNjb3VudF0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnVwZGF0ZVVzZXJPcGVuT3JkZXJzQ291bnQoe1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGZpbGxlcjogZmlsbGVyUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcGxhY2VBbmRUYWtlUGVycE9yZGVyKG9yZGVyUGFyYW1zLCBtYWtlckluZm8sIHJlZmVycmVySW5mbywgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0UGxhY2VBbmRUYWtlUGVycE9yZGVySXgob3JkZXJQYXJhbXMsIG1ha2VySW5mbywgcmVmZXJyZXJJbmZvKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgdGhpcy5wZXJwTWFya2V0TGFzdFNsb3RDYWNoZS5zZXQob3JkZXJQYXJhbXMubWFya2V0SW5kZXgsIHNsb3QpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldFBsYWNlQW5kVGFrZVBlcnBPcmRlckl4KG9yZGVyUGFyYW1zLCBtYWtlckluZm8sIHJlZmVycmVySW5mbykge1xuICAgICAgICBvcmRlclBhcmFtcyA9ICgwLCBvcmRlclBhcmFtc18xLmdldE9yZGVyUGFyYW1zKShvcmRlclBhcmFtcywgeyBtYXJrZXRUeXBlOiB0eXBlc18xLk1hcmtldFR5cGUuUEVSUCB9KTtcbiAgICAgICAgY29uc3QgdXNlclN0YXRzUHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBtYWtlckluZm8gPSBBcnJheS5pc0FycmF5KG1ha2VySW5mbylcbiAgICAgICAgICAgID8gbWFrZXJJbmZvXG4gICAgICAgICAgICA6IG1ha2VySW5mb1xuICAgICAgICAgICAgICAgID8gW21ha2VySW5mb11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudHMgPSBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXTtcbiAgICAgICAgZm9yIChjb25zdCBtYWtlciBvZiBtYWtlckluZm8pIHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50cy5wdXNoKG1ha2VyLm1ha2VyVXNlckFjY291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHMsXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGVQZXJwTWFya2V0SW5kZXhlczogW29yZGVyUGFyYW1zLm1hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAoY29uc3QgbWFrZXIgb2YgbWFrZXJJbmZvKSB7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IG1ha2VyLm1ha2VyLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IG1ha2VyLm1ha2VyU3RhdHMsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG4gICAgICAgICAgICBjb25zdCByZWZlcnJlcklzTWFrZXIgPSBtYWtlckluZm8uZmluZCgobWFrZXIpID0+IG1ha2VyLm1ha2VyLmVxdWFscyhyZWZlcnJlckluZm8ucmVmZXJyZXIpKSAhPT1cbiAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoIXJlZmVycmVySXNNYWtlcikge1xuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlcixcbiAgICAgICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlclN0YXRzLFxuICAgICAgICAgICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5wbGFjZUFuZFRha2VQZXJwT3JkZXIob3JkZXJQYXJhbXMsIG51bGwsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyOiB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHM6IHVzZXJTdGF0c1B1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBsYWNlQW5kTWFrZVBlcnBPcmRlcihvcmRlclBhcmFtcywgdGFrZXJJbmZvLCByZWZlcnJlckluZm8sIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcsIHNsb3QgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFBsYWNlQW5kTWFrZVBlcnBPcmRlckl4KG9yZGVyUGFyYW1zLCB0YWtlckluZm8sIHJlZmVycmVySW5mbyksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHRoaXMucGVycE1hcmtldExhc3RTbG90Q2FjaGUuc2V0KG9yZGVyUGFyYW1zLm1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRQbGFjZUFuZE1ha2VQZXJwT3JkZXJJeChvcmRlclBhcmFtcywgdGFrZXJJbmZvLCByZWZlcnJlckluZm8pIHtcbiAgICAgICAgb3JkZXJQYXJhbXMgPSAoMCwgb3JkZXJQYXJhbXNfMS5nZXRPcmRlclBhcmFtcykob3JkZXJQYXJhbXMsIHsgbWFya2V0VHlwZTogdHlwZXNfMS5NYXJrZXRUeXBlLlBFUlAgfSk7XG4gICAgICAgIGNvbnN0IHVzZXJTdGF0c1B1YmxpY0tleSA9IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoKSwgdGFrZXJJbmZvLnRha2VyVXNlckFjY291bnRdLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlUGVycE1hcmtldEluZGV4ZXM6IFtvcmRlclBhcmFtcy5tYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlcixcbiAgICAgICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgcHVia2V5OiByZWZlcnJlckluZm8ucmVmZXJyZXJTdGF0cyxcbiAgICAgICAgICAgICAgICBpc1dyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRha2VyT3JkZXJJZCA9IHRha2VySW5mby5vcmRlci5vcmRlcklkO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnBsYWNlQW5kTWFrZVBlcnBPcmRlcihvcmRlclBhcmFtcywgdGFrZXJPcmRlcklkLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB1c2VyU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdGFrZXI6IHRha2VySW5mby50YWtlcixcbiAgICAgICAgICAgICAgICB0YWtlclN0YXRzOiB0YWtlckluZm8udGFrZXJTdGF0cyxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHBsYWNlQW5kVGFrZVNwb3RPcmRlcihvcmRlclBhcmFtcywgZnVsZmlsbG1lbnRDb25maWcsIG1ha2VySW5mbywgcmVmZXJyZXJJbmZvLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnLCBzbG90IH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRQbGFjZUFuZFRha2VTcG90T3JkZXJJeChvcmRlclBhcmFtcywgZnVsZmlsbG1lbnRDb25maWcsIG1ha2VySW5mbywgcmVmZXJyZXJJbmZvKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQob3JkZXJQYXJhbXMubWFya2V0SW5kZXgsIHNsb3QpO1xuICAgICAgICB0aGlzLnNwb3RNYXJrZXRMYXN0U2xvdENhY2hlLnNldChudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgsIHNsb3QpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldFBsYWNlQW5kVGFrZVNwb3RPcmRlckl4KG9yZGVyUGFyYW1zLCBmdWxmaWxsbWVudENvbmZpZywgbWFrZXJJbmZvLCByZWZlcnJlckluZm8pIHtcbiAgICAgICAgb3JkZXJQYXJhbXMgPSAoMCwgb3JkZXJQYXJhbXNfMS5nZXRPcmRlclBhcmFtcykob3JkZXJQYXJhbXMsIHsgbWFya2V0VHlwZTogdHlwZXNfMS5NYXJrZXRUeXBlLlNQT1QgfSk7XG4gICAgICAgIGNvbnN0IHVzZXJTdGF0c1B1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRzID0gW3RoaXMuZ2V0VXNlckFjY291bnQoKV07XG4gICAgICAgIGlmIChtYWtlckluZm8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXNlckFjY291bnRzLnB1c2gobWFrZXJJbmZvLm1ha2VyVXNlckFjY291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHMsXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW1xuICAgICAgICAgICAgICAgIG9yZGVyUGFyYW1zLm1hcmtldEluZGV4LFxuICAgICAgICAgICAgICAgIG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9TUE9UX01BUktFVF9JTkRFWCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgbWFrZXJPcmRlcklkID0gbnVsbDtcbiAgICAgICAgaWYgKG1ha2VySW5mbykge1xuICAgICAgICAgICAgbWFrZXJPcmRlcklkID0gbWFrZXJJbmZvLm9yZGVyLm9yZGVySWQ7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IG1ha2VySW5mby5tYWtlcixcbiAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgcHVia2V5OiBtYWtlckluZm8ubWFrZXJTdGF0cyxcbiAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWZlcnJlckluZm8pIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHB1YmtleTogcmVmZXJyZXJJbmZvLnJlZmVycmVyLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlclN0YXRzLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRTcG90RnVsZmlsbG1lbnRBY2NvdW50cyhvcmRlclBhcmFtcy5tYXJrZXRJbmRleCwgcmVtYWluaW5nQWNjb3VudHMsIGZ1bGZpbGxtZW50Q29uZmlnKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5wbGFjZUFuZFRha2VTcG90T3JkZXIob3JkZXJQYXJhbXMsIGZ1bGZpbGxtZW50Q29uZmlnID8gZnVsZmlsbG1lbnRDb25maWcuZnVsZmlsbG1lbnRUeXBlIDogbnVsbCwgbWFrZXJPcmRlcklkLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB1c2VyU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwbGFjZUFuZE1ha2VTcG90T3JkZXIob3JkZXJQYXJhbXMsIHRha2VySW5mbywgZnVsZmlsbG1lbnRDb25maWcsIHJlZmVycmVySW5mbywgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0UGxhY2VBbmRNYWtlU3BvdE9yZGVySXgob3JkZXJQYXJhbXMsIHRha2VySW5mbywgZnVsZmlsbG1lbnRDb25maWcsIHJlZmVycmVySW5mbyksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHRoaXMuc3BvdE1hcmtldExhc3RTbG90Q2FjaGUuc2V0KG9yZGVyUGFyYW1zLm1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYLCBzbG90KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRQbGFjZUFuZE1ha2VTcG90T3JkZXJJeChvcmRlclBhcmFtcywgdGFrZXJJbmZvLCBmdWxmaWxsbWVudENvbmZpZywgcmVmZXJyZXJJbmZvKSB7XG4gICAgICAgIG9yZGVyUGFyYW1zID0gKDAsIG9yZGVyUGFyYW1zXzEuZ2V0T3JkZXJQYXJhbXMpKG9yZGVyUGFyYW1zLCB7IG1hcmtldFR5cGU6IHR5cGVzXzEuTWFya2V0VHlwZS5TUE9UIH0pO1xuICAgICAgICBjb25zdCB1c2VyU3RhdHNQdWJsaWNLZXkgPSB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCksIHRha2VySW5mby50YWtlclVzZXJBY2NvdW50XSxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbXG4gICAgICAgICAgICAgICAgb3JkZXJQYXJhbXMubWFya2V0SW5kZXgsXG4gICAgICAgICAgICAgICAgbnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZWZlcnJlckluZm8pIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHB1YmtleTogcmVmZXJyZXJJbmZvLnJlZmVycmVyLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IHJlZmVycmVySW5mby5yZWZlcnJlclN0YXRzLFxuICAgICAgICAgICAgICAgIGlzV3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRTcG90RnVsZmlsbG1lbnRBY2NvdW50cyhvcmRlclBhcmFtcy5tYXJrZXRJbmRleCwgcmVtYWluaW5nQWNjb3VudHMsIGZ1bGZpbGxtZW50Q29uZmlnKTtcbiAgICAgICAgY29uc3QgdGFrZXJPcmRlcklkID0gdGFrZXJJbmZvLm9yZGVyLm9yZGVySWQ7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ucGxhY2VBbmRNYWtlU3BvdE9yZGVyKG9yZGVyUGFyYW1zLCB0YWtlck9yZGVySWQsIGZ1bGZpbGxtZW50Q29uZmlnID8gZnVsZmlsbG1lbnRDb25maWcuZnVsZmlsbG1lbnRUeXBlIDogbnVsbCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdXNlclN0YXRzUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHRha2VyOiB0YWtlckluZm8udGFrZXIsXG4gICAgICAgICAgICAgICAgdGFrZXJTdGF0czogdGFrZXJJbmZvLnRha2VyU3RhdHMsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCB1c2Uge0BsaW5rIHBsYWNlUGVycE9yZGVyfSBvciB7QGxpbmsgcGxhY2VBbmRUYWtlUGVycE9yZGVyfSBpbnN0ZWFkXG4gICAgICovXG4gICAgYXN5bmMgY2xvc2VQb3NpdGlvbihtYXJrZXRJbmRleCwgbGltaXRQcmljZSkge1xuICAgICAgICBjb25zdCB1c2VyUG9zaXRpb24gPSB0aGlzLmdldFVzZXIoKS5nZXRQZXJwUG9zaXRpb24obWFya2V0SW5kZXgpO1xuICAgICAgICBpZiAoIXVzZXJQb3NpdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE5vIHBvc2l0aW9uIGluIG1hcmtldCAke21hcmtldEluZGV4LnRvU3RyaW5nKCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGxhY2VBbmRUYWtlUGVycE9yZGVyKHtcbiAgICAgICAgICAgIG9yZGVyVHlwZTogdHlwZXNfMS5PcmRlclR5cGUuTUFSS0VULFxuICAgICAgICAgICAgbWFya2V0SW5kZXgsXG4gICAgICAgICAgICBkaXJlY3Rpb246ICgwLCBwb3NpdGlvbl8xLmZpbmREaXJlY3Rpb25Ub0Nsb3NlKSh1c2VyUG9zaXRpb24pLFxuICAgICAgICAgICAgYmFzZUFzc2V0QW1vdW50OiB1c2VyUG9zaXRpb24uYmFzZUFzc2V0QW1vdW50LmFicygpLFxuICAgICAgICAgICAgcmVkdWNlT25seTogdHJ1ZSxcbiAgICAgICAgICAgIHByaWNlOiBsaW1pdFByaWNlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYW4gb3BlbiBvcmRlciBieSBjbG9zaW5nIGl0IGFuZCByZXBsYWNpbmcgaXQgd2l0aCBhIG5ldyBvcmRlci5cbiAgICAgKiBAZGVwcmVjYXRlZCB1c2UgbW9kaWZ5T3JkZXIgaW5zdGVhZFxuICAgICAqIEBwYXJhbSBvcmRlcklkOiBUaGUgb3BlbiBvcmRlciB0byBtb2RpZnlcbiAgICAgKiBAcGFyYW0gbmV3QmFzZUFtb3VudDogVGhlIG5ldyBiYXNlIGFtb3VudCBmb3IgdGhlIG9yZGVyLiBPbmUgb2YgW25ld0Jhc2VBbW91bnR8bmV3TGltaXRQcmljZXxuZXdPcmFjbGVQcmljZU9mZnNldF0gbXVzdCBiZSBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0gbmV3TGltaXRQaWNlOiBUaGUgbmV3IGxpbWl0IHByaWNlIGZvciB0aGUgb3JkZXIuIE9uZSBvZiBbbmV3QmFzZUFtb3VudHxuZXdMaW1pdFByaWNlfG5ld09yYWNsZVByaWNlT2Zmc2V0XSBtdXN0IGJlIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBuZXdPcmFjbGVQcmljZU9mZnNldDogVGhlIG5ldyBvcmFjbGUgcHJpY2Ugb2Zmc2V0IGZvciB0aGUgb3JkZXIuIE9uZSBvZiBbbmV3QmFzZUFtb3VudHxuZXdMaW1pdFByaWNlfG5ld09yYWNsZVByaWNlT2Zmc2V0XSBtdXN0IGJlIHByb3ZpZGVkLlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgbW9kaWZ5UGVycE9yZGVyKG9yZGVySWQsIG5ld0Jhc2VBbW91bnQsIG5ld0xpbWl0UHJpY2UsIG5ld09yYWNsZVByaWNlT2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1vZGlmeU9yZGVyKHtcbiAgICAgICAgICAgIG9yZGVySWQsXG4gICAgICAgICAgICBuZXdCYXNlQW1vdW50LFxuICAgICAgICAgICAgbmV3TGltaXRQcmljZSxcbiAgICAgICAgICAgIG5ld09yYWNsZVByaWNlT2Zmc2V0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYW4gb3BlbiBvcmRlciBieSBjbG9zaW5nIGl0IGFuZCByZXBsYWNpbmcgaXQgd2l0aCBhIG5ldyBvcmRlci5cbiAgICAgKiBAZGVwcmVjYXRlZCB1c2UgbW9kaWZ5T3JkZXJCeVVzZXJPcmRlcklkIGluc3RlYWRcbiAgICAgKiBAcGFyYW0gdXNlck9yZGVySWQ6IFRoZSBvcGVuIG9yZGVyIHRvIG1vZGlmeVxuICAgICAqIEBwYXJhbSBuZXdCYXNlQW1vdW50OiBUaGUgbmV3IGJhc2UgYW1vdW50IGZvciB0aGUgb3JkZXIuIE9uZSBvZiBbbmV3QmFzZUFtb3VudHxuZXdMaW1pdFByaWNlfG5ld09yYWNsZVByaWNlT2Zmc2V0XSBtdXN0IGJlIHByb3ZpZGVkLlxuICAgICAqIEBwYXJhbSBuZXdMaW1pdFBpY2U6IFRoZSBuZXcgbGltaXQgcHJpY2UgZm9yIHRoZSBvcmRlci4gT25lIG9mIFtuZXdCYXNlQW1vdW50fG5ld0xpbWl0UHJpY2V8bmV3T3JhY2xlUHJpY2VPZmZzZXRdIG11c3QgYmUgcHJvdmlkZWQuXG4gICAgICogQHBhcmFtIG5ld09yYWNsZVByaWNlT2Zmc2V0OiBUaGUgbmV3IG9yYWNsZSBwcmljZSBvZmZzZXQgZm9yIHRoZSBvcmRlci4gT25lIG9mIFtuZXdCYXNlQW1vdW50fG5ld0xpbWl0UHJpY2V8bmV3T3JhY2xlUHJpY2VPZmZzZXRdIG11c3QgYmUgcHJvdmlkZWQuXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBhc3luYyBtb2RpZnlQZXJwT3JkZXJCeVVzZXJPcmRlcklkKHVzZXJPcmRlcklkLCBuZXdCYXNlQW1vdW50LCBuZXdMaW1pdFByaWNlLCBuZXdPcmFjbGVQcmljZU9mZnNldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2RpZnlPcmRlckJ5VXNlck9yZGVySWQoe1xuICAgICAgICAgICAgdXNlck9yZGVySWQsXG4gICAgICAgICAgICBuZXdCYXNlQW1vdW50LFxuICAgICAgICAgICAgbmV3TGltaXRQcmljZSxcbiAgICAgICAgICAgIG5ld09yYWNsZVByaWNlT2Zmc2V0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYW4gb3BlbiBvcmRlciAoc3BvdCBvciBwZXJwKSBieSBjbG9zaW5nIGl0IGFuZCByZXBsYWNpbmcgaXQgd2l0aCBhIG5ldyBvcmRlci5cbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMub3JkZXJJZDogVGhlIG9wZW4gb3JkZXIgdG8gbW9kaWZ5XG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLm5ld0RpcmVjdGlvbjogVGhlIG5ldyBkaXJlY3Rpb24gZm9yIHRoZSBvcmRlclxuICAgICAqIEBwYXJhbSBvcmRlclBhcmFtcy5uZXdCYXNlQW1vdW50OiBUaGUgbmV3IGJhc2UgYW1vdW50IGZvciB0aGUgb3JkZXJcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMubmV3TGltaXRQaWNlOiBUaGUgbmV3IGxpbWl0IHByaWNlIGZvciB0aGUgb3JkZXJcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMubmV3T3JhY2xlUHJpY2VPZmZzZXQ6IFRoZSBuZXcgb3JhY2xlIHByaWNlIG9mZnNldCBmb3IgdGhlIG9yZGVyXG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLm5ld1RyaWdnZXJQcmljZTogT3B0aW9uYWwgLSBUaGV3IG5ldyB0cmlnZ2VyIHByaWNlIGZvciB0aGUgb3JkZXIuXG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLmF1Y3Rpb25EdXJhdGlvbjpcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMuYXVjdGlvblN0YXJ0UHJpY2U6XG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLmF1Y3Rpb25FbmRQcmljZTpcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMucmVkdWNlT25seTpcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMucG9zdE9ubHk6XG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLmltbWVkaWF0ZU9yQ2FuY2VsOlxuICAgICAqIEBwYXJhbSBvcmRlclBhcmFtcy5wb2xpY3k6XG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLm1heFRzOlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgbW9kaWZ5T3JkZXIob3JkZXJQYXJhbXMsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldE1vZGlmeU9yZGVySXgob3JkZXJQYXJhbXMpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldE1vZGlmeU9yZGVySXgoeyBvcmRlcklkLCBuZXdEaXJlY3Rpb24sIG5ld0Jhc2VBbW91bnQsIG5ld0xpbWl0UHJpY2UsIG5ld09yYWNsZVByaWNlT2Zmc2V0LCBuZXdUcmlnZ2VyUHJpY2UsIG5ld1RyaWdnZXJDb25kaXRpb24sIGF1Y3Rpb25EdXJhdGlvbiwgYXVjdGlvblN0YXJ0UHJpY2UsIGF1Y3Rpb25FbmRQcmljZSwgcmVkdWNlT25seSwgcG9zdE9ubHksIGltbWVkaWF0ZU9yQ2FuY2VsLCBtYXhUcywgcG9saWN5LCB9KSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXSxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvcmRlclBhcmFtcyA9IHtcbiAgICAgICAgICAgIGJhc2VBc3NldEFtb3VudDogbmV3QmFzZUFtb3VudCB8fCBudWxsLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiBuZXdEaXJlY3Rpb24gfHwgbnVsbCxcbiAgICAgICAgICAgIHByaWNlOiBuZXdMaW1pdFByaWNlIHx8IG51bGwsXG4gICAgICAgICAgICBvcmFjbGVQcmljZU9mZnNldDogbmV3T3JhY2xlUHJpY2VPZmZzZXQgfHwgbnVsbCxcbiAgICAgICAgICAgIHRyaWdnZXJQcmljZTogbmV3VHJpZ2dlclByaWNlIHx8IG51bGwsXG4gICAgICAgICAgICB0cmlnZ2VyQ29uZGl0aW9uOiBuZXdUcmlnZ2VyQ29uZGl0aW9uIHx8IG51bGwsXG4gICAgICAgICAgICBhdWN0aW9uRHVyYXRpb246IGF1Y3Rpb25EdXJhdGlvbiB8fCBudWxsLFxuICAgICAgICAgICAgYXVjdGlvblN0YXJ0UHJpY2U6IGF1Y3Rpb25TdGFydFByaWNlIHx8IG51bGwsXG4gICAgICAgICAgICBhdWN0aW9uRW5kUHJpY2U6IGF1Y3Rpb25FbmRQcmljZSB8fCBudWxsLFxuICAgICAgICAgICAgcmVkdWNlT25seTogcmVkdWNlT25seSB8fCBudWxsLFxuICAgICAgICAgICAgcG9zdE9ubHk6IHBvc3RPbmx5IHx8IG51bGwsXG4gICAgICAgICAgICBpbW1lZGlhdGVPckNhbmNlbDogaW1tZWRpYXRlT3JDYW5jZWwgfHwgbnVsbCxcbiAgICAgICAgICAgIHBvbGljeTogcG9saWN5IHx8IG51bGwsXG4gICAgICAgICAgICBtYXhUczogbWF4VHMgfHwgbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5tb2RpZnlPcmRlcihvcmRlcklkLCBvcmRlclBhcmFtcywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBhbiBvcGVuIG9yZGVyIGJ5IGNsb3NpbmcgaXQgYW5kIHJlcGxhY2luZyBpdCB3aXRoIGEgbmV3IG9yZGVyLlxuICAgICAqIEBwYXJhbSBvcmRlclBhcmFtcy51c2VyT3JkZXJJZDogVGhlIG9wZW4gb3JkZXIgdG8gbW9kaWZ5XG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLm5ld0RpcmVjdGlvbjogVGhlIG5ldyBkaXJlY3Rpb24gZm9yIHRoZSBvcmRlclxuICAgICAqIEBwYXJhbSBvcmRlclBhcmFtcy5uZXdCYXNlQW1vdW50OiBUaGUgbmV3IGJhc2UgYW1vdW50IGZvciB0aGUgb3JkZXJcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMubmV3TGltaXRQaWNlOiBUaGUgbmV3IGxpbWl0IHByaWNlIGZvciB0aGUgb3JkZXJcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMubmV3T3JhY2xlUHJpY2VPZmZzZXQ6IFRoZSBuZXcgb3JhY2xlIHByaWNlIG9mZnNldCBmb3IgdGhlIG9yZGVyXG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLm5ld1RyaWdnZXJQcmljZTogT3B0aW9uYWwgLSBUaGV3IG5ldyB0cmlnZ2VyIHByaWNlIGZvciB0aGUgb3JkZXIuXG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLmF1Y3Rpb25EdXJhdGlvbjogT25seSByZXF1aXJlZCBpZiBvcmRlciB0eXBlIGNoYW5nZWQgdG8gbWFya2V0IGZyb20gc29tZXRoaW5nIGVsc2VcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMuYXVjdGlvblN0YXJ0UHJpY2U6IE9ubHkgcmVxdWlyZWQgaWYgb3JkZXIgdHlwZSBjaGFuZ2VkIHRvIG1hcmtldCBmcm9tIHNvbWV0aGluZyBlbHNlXG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLmF1Y3Rpb25FbmRQcmljZTogT25seSByZXF1aXJlZCBpZiBvcmRlciB0eXBlIGNoYW5nZWQgdG8gbWFya2V0IGZyb20gc29tZXRoaW5nIGVsc2VcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMucmVkdWNlT25seTpcbiAgICAgKiBAcGFyYW0gb3JkZXJQYXJhbXMucG9zdE9ubHk6XG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLmltbWVkaWF0ZU9yQ2FuY2VsOlxuICAgICAqIEBwYXJhbSBvcmRlclBhcmFtcy5wb2xpY3k6XG4gICAgICogQHBhcmFtIG9yZGVyUGFyYW1zLm1heFRzOlxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgYXN5bmMgbW9kaWZ5T3JkZXJCeVVzZXJPcmRlcklkKG9yZGVyUGFyYW1zLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRNb2RpZnlPcmRlckJ5VXNlcklkSXgob3JkZXJQYXJhbXMpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldE1vZGlmeU9yZGVyQnlVc2VySWRJeCh7IHVzZXJPcmRlcklkLCBuZXdEaXJlY3Rpb24sIG5ld0Jhc2VBbW91bnQsIG5ld0xpbWl0UHJpY2UsIG5ld09yYWNsZVByaWNlT2Zmc2V0LCBuZXdUcmlnZ2VyUHJpY2UsIG5ld1RyaWdnZXJDb25kaXRpb24sIGF1Y3Rpb25EdXJhdGlvbiwgYXVjdGlvblN0YXJ0UHJpY2UsIGF1Y3Rpb25FbmRQcmljZSwgcmVkdWNlT25seSwgcG9zdE9ubHksIGltbWVkaWF0ZU9yQ2FuY2VsLCBtYXhUcywgcG9saWN5LCB9KSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50UHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXSxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvcmRlclBhcmFtcyA9IHtcbiAgICAgICAgICAgIGJhc2VBc3NldEFtb3VudDogbmV3QmFzZUFtb3VudCB8fCBudWxsLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiBuZXdEaXJlY3Rpb24gfHwgbnVsbCxcbiAgICAgICAgICAgIHByaWNlOiBuZXdMaW1pdFByaWNlIHx8IG51bGwsXG4gICAgICAgICAgICBvcmFjbGVQcmljZU9mZnNldDogbmV3T3JhY2xlUHJpY2VPZmZzZXQgfHwgbnVsbCxcbiAgICAgICAgICAgIHRyaWdnZXJQcmljZTogbmV3VHJpZ2dlclByaWNlIHx8IG51bGwsXG4gICAgICAgICAgICB0cmlnZ2VyQ29uZGl0aW9uOiBuZXdUcmlnZ2VyQ29uZGl0aW9uIHx8IG51bGwsXG4gICAgICAgICAgICBhdWN0aW9uRHVyYXRpb246IGF1Y3Rpb25EdXJhdGlvbiB8fCBudWxsLFxuICAgICAgICAgICAgYXVjdGlvblN0YXJ0UHJpY2U6IGF1Y3Rpb25TdGFydFByaWNlIHx8IG51bGwsXG4gICAgICAgICAgICBhdWN0aW9uRW5kUHJpY2U6IGF1Y3Rpb25FbmRQcmljZSB8fCBudWxsLFxuICAgICAgICAgICAgcmVkdWNlT25seTogcmVkdWNlT25seSB8fCBudWxsLFxuICAgICAgICAgICAgcG9zdE9ubHk6IHBvc3RPbmx5IHx8IG51bGwsXG4gICAgICAgICAgICBpbW1lZGlhdGVPckNhbmNlbDogaW1tZWRpYXRlT3JDYW5jZWwgfHwgbnVsbCxcbiAgICAgICAgICAgIHBvbGljeTogcG9saWN5IHx8IG51bGwsXG4gICAgICAgICAgICBtYXhUczogbWF4VHMgfHwgbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5tb2RpZnlPcmRlckJ5VXNlcklkKHVzZXJPcmRlcklkLCBvcmRlclBhcmFtcywge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzZXR0bGVQTkxzKHVzZXJzLCBtYXJrZXRJbmRleGVzKSB7XG4gICAgICAgIGNvbnN0IGl4cyA9IGF3YWl0IHRoaXMuZ2V0U2V0dGxlUE5Mc0l4cyh1c2VycywgbWFya2V0SW5kZXhlcyk7XG4gICAgICAgIGNvbnN0IHR4ID0gbmV3IHdlYjNfanNfMS5UcmFuc2FjdGlvbigpXG4gICAgICAgICAgICAuYWRkKHdlYjNfanNfMS5Db21wdXRlQnVkZ2V0UHJvZ3JhbS5zZXRDb21wdXRlVW5pdExpbWl0KHtcbiAgICAgICAgICAgIHVuaXRzOiAxMDAwMDAwLFxuICAgICAgICB9KSlcbiAgICAgICAgICAgIC5hZGQoLi4uaXhzKTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldFNldHRsZVBOTHNJeHModXNlcnMsIG1hcmtldEluZGV4ZXMpIHtcbiAgICAgICAgY29uc3QgaXhzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgeyBzZXR0bGVlVXNlckFjY291bnRQdWJsaWNLZXksIHNldHRsZWVVc2VyQWNjb3VudCB9IG9mIHVzZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1hcmtldEluZGV4IG9mIG1hcmtldEluZGV4ZXMpIHtcbiAgICAgICAgICAgICAgICBpeHMucHVzaChhd2FpdCB0aGlzLnNldHRsZVBOTEl4KHNldHRsZWVVc2VyQWNjb3VudFB1YmxpY0tleSwgc2V0dGxlZVVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpeHM7XG4gICAgfVxuICAgIGFzeW5jIHNldHRsZVBOTChzZXR0bGVlVXNlckFjY291bnRQdWJsaWNLZXksIHNldHRsZWVVc2VyQWNjb3VudCwgbWFya2V0SW5kZXgsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLnNldHRsZVBOTEl4KHNldHRsZWVVc2VyQWNjb3VudFB1YmxpY0tleSwgc2V0dGxlZVVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgc2V0dGxlUE5MSXgoc2V0dGxlZVVzZXJBY2NvdW50UHVibGljS2V5LCBzZXR0bGVlVXNlckFjY291bnQsIG1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFtzZXR0bGVlVXNlckFjY291bnRdLFxuICAgICAgICAgICAgd3JpdGFibGVQZXJwTWFya2V0SW5kZXhlczogW21hcmtldEluZGV4XSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFtudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVhdLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5zZXR0bGVQbmwobWFya2V0SW5kZXgsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyOiBzZXR0bGVlVXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldFZhdWx0OiB0aGlzLmdldFF1b3RlU3BvdE1hcmtldEFjY291bnQoKS52YXVsdCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50czogcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBsaXF1aWRhdGVQZXJwKHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyQWNjb3VudCwgbWFya2V0SW5kZXgsIG1heEJhc2VBc3NldEFtb3VudCwgbGltaXRQcmljZSwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0TGlxdWlkYXRlUGVycEl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyQWNjb3VudCwgbWFya2V0SW5kZXgsIG1heEJhc2VBc3NldEFtb3VudCwgbGltaXRQcmljZSksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHRoaXMucGVycE1hcmtldExhc3RTbG90Q2FjaGUuc2V0KG1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRMaXF1aWRhdGVQZXJwSXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCwgbWF4QmFzZUFzc2V0QW1vdW50LCBsaW1pdFByaWNlKSB7XG4gICAgICAgIGNvbnN0IHVzZXJTdGF0c1B1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB1c2VyQWNjb3VudC5hdXRob3JpdHkpO1xuICAgICAgICBjb25zdCBsaXF1aWRhdG9yUHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCBsaXF1aWRhdG9yU3RhdHNQdWJsaWNLZXkgPSB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoKSwgdXNlckFjY291bnRdLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlUGVycE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLmxpcXVpZGF0ZVBlcnAobWFya2V0SW5kZXgsIG1heEJhc2VBc3NldEFtb3VudCwgbGltaXRQcmljZSAhPT0gbnVsbCAmJiBsaW1pdFByaWNlICE9PSB2b2lkIDAgPyBsaW1pdFByaWNlIDogbnVsbCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdXNlclN0YXRzUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGxpcXVpZGF0b3I6IGxpcXVpZGF0b3JQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgbGlxdWlkYXRvclN0YXRzOiBsaXF1aWRhdG9yU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHM6IHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgbGlxdWlkYXRlU3BvdCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlckFjY291bnQsIGFzc2V0TWFya2V0SW5kZXgsIGxpYWJpbGl0eU1hcmtldEluZGV4LCBtYXhMaWFiaWxpdHlUcmFuc2ZlciwgbGltaXRQcmljZSwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0TGlxdWlkYXRlU3BvdEl4KHVzZXJBY2NvdW50UHVibGljS2V5LCB1c2VyQWNjb3VudCwgYXNzZXRNYXJrZXRJbmRleCwgbGlhYmlsaXR5TWFya2V0SW5kZXgsIG1heExpYWJpbGl0eVRyYW5zZmVyLCBsaW1pdFByaWNlKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQoYXNzZXRNYXJrZXRJbmRleCwgc2xvdCk7XG4gICAgICAgIHRoaXMuc3BvdE1hcmtldExhc3RTbG90Q2FjaGUuc2V0KGxpYWJpbGl0eU1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRMaXF1aWRhdGVTcG90SXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBhc3NldE1hcmtldEluZGV4LCBsaWFiaWxpdHlNYXJrZXRJbmRleCwgbWF4TGlhYmlsaXR5VHJhbnNmZXIsIGxpbWl0UHJpY2UpIHtcbiAgICAgICAgY29uc3QgdXNlclN0YXRzUHVibGljS2V5ID0gKDAsIHBkYV8xLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHVzZXJBY2NvdW50LmF1dGhvcml0eSk7XG4gICAgICAgIGNvbnN0IGxpcXVpZGF0b3JQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IGxpcXVpZGF0b3JTdGF0c1B1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpLCB1c2VyQWNjb3VudF0sXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW2xpYWJpbGl0eU1hcmtldEluZGV4LCBhc3NldE1hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ubGlxdWlkYXRlU3BvdChhc3NldE1hcmtldEluZGV4LCBsaWFiaWxpdHlNYXJrZXRJbmRleCwgbWF4TGlhYmlsaXR5VHJhbnNmZXIsIGxpbWl0UHJpY2UgfHwgbnVsbCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdXNlclN0YXRzUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGxpcXVpZGF0b3I6IGxpcXVpZGF0b3JQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgbGlxdWlkYXRvclN0YXRzOiBsaXF1aWRhdG9yU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHM6IHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgbGlxdWlkYXRlQm9ycm93Rm9yUGVycFBubCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlckFjY291bnQsIHBlcnBNYXJrZXRJbmRleCwgbGlhYmlsaXR5TWFya2V0SW5kZXgsIG1heExpYWJpbGl0eVRyYW5zZmVyLCBsaW1pdFByaWNlLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnLCBzbG90IH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRMaXF1aWRhdGVCb3Jyb3dGb3JQZXJwUG5sSXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBwZXJwTWFya2V0SW5kZXgsIGxpYWJpbGl0eU1hcmtldEluZGV4LCBtYXhMaWFiaWxpdHlUcmFuc2ZlciwgbGltaXRQcmljZSksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHRoaXMucGVycE1hcmtldExhc3RTbG90Q2FjaGUuc2V0KHBlcnBNYXJrZXRJbmRleCwgc2xvdCk7XG4gICAgICAgIHRoaXMuc3BvdE1hcmtldExhc3RTbG90Q2FjaGUuc2V0KGxpYWJpbGl0eU1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRMaXF1aWRhdGVCb3Jyb3dGb3JQZXJwUG5sSXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBwZXJwTWFya2V0SW5kZXgsIGxpYWJpbGl0eU1hcmtldEluZGV4LCBtYXhMaWFiaWxpdHlUcmFuc2ZlciwgbGltaXRQcmljZSkge1xuICAgICAgICBjb25zdCB1c2VyU3RhdHNQdWJsaWNLZXkgPSAoMCwgcGRhXzEuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdXNlckFjY291bnQuYXV0aG9yaXR5KTtcbiAgICAgICAgY29uc3QgbGlxdWlkYXRvclB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgbGlxdWlkYXRvclN0YXRzUHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCksIHVzZXJBY2NvdW50XSxcbiAgICAgICAgICAgIHdyaXRhYmxlUGVycE1hcmtldEluZGV4ZXM6IFtwZXJwTWFya2V0SW5kZXhdLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW2xpYWJpbGl0eU1hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ubGlxdWlkYXRlQm9ycm93Rm9yUGVycFBubChwZXJwTWFya2V0SW5kZXgsIGxpYWJpbGl0eU1hcmtldEluZGV4LCBtYXhMaWFiaWxpdHlUcmFuc2ZlciwgbGltaXRQcmljZSB8fCBudWxsLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB1c2VyU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgbGlxdWlkYXRvcjogbGlxdWlkYXRvclB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBsaXF1aWRhdG9yU3RhdHM6IGxpcXVpZGF0b3JTdGF0c1B1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50czogcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBsaXF1aWRhdGVQZXJwUG5sRm9yRGVwb3NpdCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlckFjY291bnQsIHBlcnBNYXJrZXRJbmRleCwgYXNzZXRNYXJrZXRJbmRleCwgbWF4UG5sVHJhbnNmZXIsIGxpbWl0UHJpY2UsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcsIHNsb3QgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldExpcXVpZGF0ZVBlcnBQbmxGb3JEZXBvc2l0SXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBwZXJwTWFya2V0SW5kZXgsIGFzc2V0TWFya2V0SW5kZXgsIG1heFBubFRyYW5zZmVyLCBsaW1pdFByaWNlKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgdGhpcy5wZXJwTWFya2V0TGFzdFNsb3RDYWNoZS5zZXQocGVycE1hcmtldEluZGV4LCBzbG90KTtcbiAgICAgICAgdGhpcy5zcG90TWFya2V0TGFzdFNsb3RDYWNoZS5zZXQoYXNzZXRNYXJrZXRJbmRleCwgc2xvdCk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0TGlxdWlkYXRlUGVycFBubEZvckRlcG9zaXRJeCh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlckFjY291bnQsIHBlcnBNYXJrZXRJbmRleCwgYXNzZXRNYXJrZXRJbmRleCwgbWF4UG5sVHJhbnNmZXIsIGxpbWl0UHJpY2UpIHtcbiAgICAgICAgY29uc3QgdXNlclN0YXRzUHVibGljS2V5ID0gKDAsIHBkYV8xLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkpKHRoaXMucHJvZ3JhbS5wcm9ncmFtSWQsIHVzZXJBY2NvdW50LmF1dGhvcml0eSk7XG4gICAgICAgIGNvbnN0IGxpcXVpZGF0b3JQdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldFVzZXJBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IGxpcXVpZGF0b3JTdGF0c1B1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpO1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpLCB1c2VyQWNjb3VudF0sXG4gICAgICAgICAgICB3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzOiBbcGVycE1hcmtldEluZGV4XSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFthc3NldE1hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ubGlxdWlkYXRlUGVycFBubEZvckRlcG9zaXQocGVycE1hcmtldEluZGV4LCBhc3NldE1hcmtldEluZGV4LCBtYXhQbmxUcmFuc2ZlciwgbGltaXRQcmljZSB8fCBudWxsLCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB1c2VyU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgbGlxdWlkYXRvcjogbGlxdWlkYXRvclB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBsaXF1aWRhdG9yU3RhdHM6IGxpcXVpZGF0b3JTdGF0c1B1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50czogcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyByZXNvbHZlUGVycEJhbmtydXB0Y3kodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0UmVzb2x2ZVBlcnBCYW5rcnVwdGN5SXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0UmVzb2x2ZVBlcnBCYW5rcnVwdGN5SXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCB1c2VyU3RhdHNQdWJsaWNLZXkgPSAoMCwgcGRhXzEuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdXNlckFjY291bnQuYXV0aG9yaXR5KTtcbiAgICAgICAgY29uc3QgbGlxdWlkYXRvclB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgbGlxdWlkYXRvclN0YXRzUHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCksIHVzZXJBY2NvdW50XSxcbiAgICAgICAgICAgIHdyaXRhYmxlUGVycE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgICAgICB3cml0YWJsZVNwb3RNYXJrZXRJbmRleGVzOiBbbnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXQgPSB0aGlzLmdldFF1b3RlU3BvdE1hcmtldEFjY291bnQoKTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5yZXNvbHZlUGVycEJhbmtydXB0Y3kobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYLCBtYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdXNlclN0YXRzUHVibGljS2V5LFxuICAgICAgICAgICAgICAgIGxpcXVpZGF0b3I6IGxpcXVpZGF0b3JQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgbGlxdWlkYXRvclN0YXRzOiBsaXF1aWRhdG9yU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldFZhdWx0OiBzcG90TWFya2V0LnZhdWx0LFxuICAgICAgICAgICAgICAgIGluc3VyYW5jZUZ1bmRWYXVsdDogc3BvdE1hcmtldC5pbnN1cmFuY2VGdW5kLnZhdWx0LFxuICAgICAgICAgICAgICAgIGRyaWZ0U2lnbmVyOiB0aGlzLmdldFNpZ25lclB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHRva2VuUHJvZ3JhbTogc3BsX3Rva2VuXzEuVE9LRU5fUFJPR1JBTV9JRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50czogcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyByZXNvbHZlU3BvdEJhbmtydXB0Y3kodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0UmVzb2x2ZVNwb3RCYW5rcnVwdGN5SXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCksIHR4UGFyYW1zKSwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgZ2V0UmVzb2x2ZVNwb3RCYW5rcnVwdGN5SXgodXNlckFjY291bnRQdWJsaWNLZXksIHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCB1c2VyU3RhdHNQdWJsaWNLZXkgPSAoMCwgcGRhXzEuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdXNlckFjY291bnQuYXV0aG9yaXR5KTtcbiAgICAgICAgY29uc3QgbGlxdWlkYXRvclB1YmxpY0tleSA9IGF3YWl0IHRoaXMuZ2V0VXNlckFjY291bnRQdWJsaWNLZXkoKTtcbiAgICAgICAgY29uc3QgbGlxdWlkYXRvclN0YXRzUHVibGljS2V5ID0gYXdhaXQgdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCksIHVzZXJBY2NvdW50XSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzcG90TWFya2V0ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24ucmVzb2x2ZVNwb3RCYW5rcnVwdGN5KG1hcmtldEluZGV4LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB1c2VyU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgbGlxdWlkYXRvclN0YXRzOiBsaXF1aWRhdG9yU3RhdHNQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgbGlxdWlkYXRvcjogbGlxdWlkYXRvclB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0VmF1bHQ6IHNwb3RNYXJrZXQudmF1bHQsXG4gICAgICAgICAgICAgICAgaW5zdXJhbmNlRnVuZFZhdWx0OiBzcG90TWFya2V0Lmluc3VyYW5jZUZ1bmQudmF1bHQsXG4gICAgICAgICAgICAgICAgZHJpZnRTaWduZXI6IHRoaXMuZ2V0U2lnbmVyUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgdG9rZW5Qcm9ncmFtOiBzcGxfdG9rZW5fMS5UT0tFTl9QUk9HUkFNX0lELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzOiByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUZ1bmRpbmdSYXRlKHBlcnBNYXJrZXRJbmRleCwgb3JhY2xlLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRVcGRhdGVGdW5kaW5nUmF0ZUl4KHBlcnBNYXJrZXRJbmRleCwgb3JhY2xlKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRVcGRhdGVGdW5kaW5nUmF0ZUl4KHBlcnBNYXJrZXRJbmRleCwgb3JhY2xlKSB7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXRQdWJsaWNLZXkgPSBhd2FpdCAoMCwgcGRhXzEuZ2V0UGVycE1hcmtldFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgcGVycE1hcmtldEluZGV4KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi51cGRhdGVGdW5kaW5nUmF0ZShwZXJwTWFya2V0SW5kZXgsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBwZXJwTWFya2V0OiBwZXJwTWFya2V0UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIG9yYWNsZTogb3JhY2xlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVBlcnBCaWRBc2tUd2FwKHBlcnBNYXJrZXRJbmRleCwgbWFrZXJzLCB0eFBhcmFtcykge1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmJ1aWxkVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5nZXRVcGRhdGVQZXJwQmlkQXNrVHdhcEl4KHBlcnBNYXJrZXRJbmRleCwgbWFrZXJzKSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRVcGRhdGVQZXJwQmlkQXNrVHdhcEl4KHBlcnBNYXJrZXRJbmRleCwgbWFrZXJzKSB7XG4gICAgICAgIGNvbnN0IHBlcnBNYXJrZXQgPSB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50KHBlcnBNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgW21ha2VyLCBtYWtlclN0YXRzXSBvZiBtYWtlcnMpIHtcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHB1YmtleTogbWFrZXIsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwdWJrZXk6IG1ha2VyU3RhdHMsXG4gICAgICAgICAgICAgICAgaXNXcml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi51cGRhdGVQZXJwQmlkQXNrVHdhcCh7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgcGVycE1hcmtldDogcGVycE1hcmtldC5wdWJrZXksXG4gICAgICAgICAgICAgICAgb3JhY2xlOiBwZXJwTWFya2V0LmFtbS5vcmFjbGUsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAga2VlcGVyU3RhdHM6IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgc2V0dGxlRnVuZGluZ1BheW1lbnQodXNlckFjY291bnRQdWJsaWNLZXksIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFNldHRsZUZ1bmRpbmdQYXltZW50SXgodXNlckFjY291bnRQdWJsaWNLZXkpLCB0eFBhcmFtcyksIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGdldFNldHRsZUZ1bmRpbmdQYXltZW50SXgodXNlckFjY291bnRQdWJsaWNLZXkpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSAoYXdhaXQgdGhpcy5wcm9ncmFtLmFjY291bnQudXNlci5mZXRjaCh1c2VyQWNjb3VudFB1YmxpY0tleSkpO1xuICAgICAgICBjb25zdCB3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgdXNlckFjY291bnQucGVycFBvc2l0aW9ucykge1xuICAgICAgICAgICAgaWYgKCEoMCwgcG9zaXRpb25fMS5wb3NpdGlvbklzQXZhaWxhYmxlKShwb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICB3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzLnB1c2gocG9zaXRpb24ubWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt1c2VyQWNjb3VudF0sXG4gICAgICAgICAgICB3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5zZXR0bGVGdW5kaW5nUGF5bWVudCh7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlckFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0cmlnZ2VyRXZlbnQoZXZlbnROYW1lLCBkYXRhKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoZXZlbnROYW1lLCBkYXRhKTtcbiAgICB9XG4gICAgZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3Qgb3JhY2xlS2V5ID0gdGhpcy5nZXRQZXJwTWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkuYW1tLm9yYWNsZTtcbiAgICAgICAgY29uc3Qgb3JhY2xlRGF0YSA9IHRoaXMuZ2V0T3JhY2xlUHJpY2VEYXRhQW5kU2xvdChvcmFjbGVLZXkpLmRhdGE7XG4gICAgICAgIHJldHVybiBvcmFjbGVEYXRhO1xuICAgIH1cbiAgICBnZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCBvcmFjbGVLZXkgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KS5vcmFjbGU7XG4gICAgICAgIGNvbnN0IG9yYWNsZURhdGEgPSB0aGlzLmdldE9yYWNsZVByaWNlRGF0YUFuZFNsb3Qob3JhY2xlS2V5KS5kYXRhO1xuICAgICAgICByZXR1cm4gb3JhY2xlRGF0YTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZUluc3VyYW5jZUZ1bmRTdGFrZShtYXJrZXRJbmRleCwgdHhQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24oYXdhaXQgdGhpcy5idWlsZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuZ2V0SW5pdGlhbGl6ZUluc3VyYW5jZUZ1bmRTdGFrZUl4KG1hcmtldEluZGV4KSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRJbml0aWFsaXplSW5zdXJhbmNlRnVuZFN0YWtlSXgobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgaWZTdGFrZUFjY291bnRQdWJsaWNLZXkgPSAoMCwgcGRhXzEuZ2V0SW5zdXJhbmNlRnVuZFN0YWtlQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy53YWxsZXQucHVibGljS2V5LCBtYXJrZXRJbmRleCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0uaW5zdHJ1Y3Rpb24uaW5pdGlhbGl6ZUluc3VyYW5jZUZ1bmRTdGFrZShtYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBpbnN1cmFuY2VGdW5kU3Rha2U6IGlmU3Rha2VBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpLnB1YmtleSxcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHM6IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHBheWVyOiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgcmVudDogYW5jaG9yLndlYjMuU1lTVkFSX1JFTlRfUFVCS0VZLFxuICAgICAgICAgICAgICAgIHN5c3RlbVByb2dyYW06IGFuY2hvci53ZWIzLlN5c3RlbVByb2dyYW0ucHJvZ3JhbUlkLFxuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0QWRkSW5zdXJhbmNlRnVuZFN0YWtlSXgobWFya2V0SW5kZXgsIGFtb3VudCwgY29sbGF0ZXJhbEFjY291bnRQdWJsaWNLZXkpIHtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBpZlN0YWtlQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRJbnN1cmFuY2VGdW5kU3Rha2VBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB0aGlzLndhbGxldC5wdWJsaWNLZXksIG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoKV0sXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW21hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGl4ID0gdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLmFkZEluc3VyYW5jZUZ1bmRTdGFrZShtYXJrZXRJbmRleCwgYW1vdW50LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogc3BvdE1hcmtldC5wdWJrZXksXG4gICAgICAgICAgICAgICAgaW5zdXJhbmNlRnVuZFN0YWtlOiBpZlN0YWtlQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB1c2VyU3RhdHM6IHRoaXMuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIGF1dGhvcml0eTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXRWYXVsdDogc3BvdE1hcmtldC52YXVsdCxcbiAgICAgICAgICAgICAgICBpbnN1cmFuY2VGdW5kVmF1bHQ6IHNwb3RNYXJrZXQuaW5zdXJhbmNlRnVuZC52YXVsdCxcbiAgICAgICAgICAgICAgICBkcmlmdFNpZ25lcjogdGhpcy5nZXRTaWduZXJQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICB1c2VyVG9rZW5BY2NvdW50OiBjb2xsYXRlcmFsQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCB0byBhbiBpbnN1cmFuY2UgZnVuZCBzdGFrZSBhbmQgb3B0aW9uYWxseSBpbml0aWFsaXplIHRoZSBhY2NvdW50XG4gICAgICovXG4gICAgYXN5bmMgYWRkSW5zdXJhbmNlRnVuZFN0YWtlKHsgbWFya2V0SW5kZXgsIGFtb3VudCwgY29sbGF0ZXJhbEFjY291bnRQdWJsaWNLZXksIGluaXRpYWxpemVTdGFrZUFjY291bnQsIGZyb21TdWJhY2NvdW50LCB9KSB7XG4gICAgICAgIGNvbnN0IHR4ID0gbmV3IHdlYjNfanNfMS5UcmFuc2FjdGlvbigpO1xuICAgICAgICBjb25zdCBhZGRpdGlvbmFsU2lnbmVycyA9IFtdO1xuICAgICAgICBjb25zdCBzcG90TWFya2V0QWNjb3VudCA9IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBpc1NvbE1hcmtldCA9IHNwb3RNYXJrZXRBY2NvdW50Lm1pbnQuZXF1YWxzKHNwb3RNYXJrZXRzXzEuV1JBUFBFRF9TT0xfTUlOVCk7XG4gICAgICAgIGNvbnN0IGNyZWF0ZVdTT0xUb2tlbkFjY291bnQgPSBpc1NvbE1hcmtldCAmJiBjb2xsYXRlcmFsQWNjb3VudFB1YmxpY0tleS5lcXVhbHModGhpcy53YWxsZXQucHVibGljS2V5KTtcbiAgICAgICAgbGV0IHRva2VuQWNjb3VudDtcbiAgICAgICAgaWYgKGNyZWF0ZVdTT0xUb2tlbkFjY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaXhzLCBwdWJrZXkgfSA9IGF3YWl0IHRoaXMuZ2V0V3JhcHBlZFNvbEFjY291bnRDcmVhdGlvbkl4cyhhbW91bnQsIHRydWUpO1xuICAgICAgICAgICAgdG9rZW5BY2NvdW50ID0gcHVia2V5O1xuICAgICAgICAgICAgaXhzLmZvckVhY2goKGl4KSA9PiB7XG4gICAgICAgICAgICAgICAgdHguYWRkKGl4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9rZW5BY2NvdW50ID0gY29sbGF0ZXJhbEFjY291bnRQdWJsaWNLZXk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyb21TdWJhY2NvdW50KSB7XG4gICAgICAgICAgICBjb25zdCB3aXRoZHJhd0l4ID0gYXdhaXQgdGhpcy5nZXRXaXRoZHJhd0l4KGFtb3VudCwgbWFya2V0SW5kZXgsIHRva2VuQWNjb3VudCk7XG4gICAgICAgICAgICB0eC5hZGQod2l0aGRyYXdJeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluaXRpYWxpemVTdGFrZUFjY291bnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxpemVJeCA9IGF3YWl0IHRoaXMuZ2V0SW5pdGlhbGl6ZUluc3VyYW5jZUZ1bmRTdGFrZUl4KG1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIHR4LmFkZChpbml0aWFsaXplSXgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZEZ1bmRzSXggPSBhd2FpdCB0aGlzLmdldEFkZEluc3VyYW5jZUZ1bmRTdGFrZUl4KG1hcmtldEluZGV4LCBhbW91bnQsIHRva2VuQWNjb3VudCk7XG4gICAgICAgIHR4LmFkZChhZGRGdW5kc0l4KTtcbiAgICAgICAgaWYgKGNyZWF0ZVdTT0xUb2tlbkFjY291bnQpIHtcbiAgICAgICAgICAgIHR4LmFkZCgoMCwgc3BsX3Rva2VuXzEuY3JlYXRlQ2xvc2VBY2NvdW50SW5zdHJ1Y3Rpb24pKHRva2VuQWNjb3VudCwgdGhpcy53YWxsZXQucHVibGljS2V5LCB0aGlzLndhbGxldC5wdWJsaWNLZXksIFtdKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIGFkZGl0aW9uYWxTaWduZXJzLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIHJlcXVlc3RSZW1vdmVJbnN1cmFuY2VGdW5kU3Rha2UobWFya2V0SW5kZXgsIGFtb3VudCkge1xuICAgICAgICBjb25zdCBzcG90TWFya2V0QWNjb3VudCA9IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBpZlN0YWtlQWNjb3VudFB1YmxpY0tleSA9ICgwLCBwZGFfMS5nZXRJbnN1cmFuY2VGdW5kU3Rha2VBY2NvdW50UHVibGljS2V5KSh0aGlzLnByb2dyYW0ucHJvZ3JhbUlkLCB0aGlzLndhbGxldC5wdWJsaWNLZXksIG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nQWNjb3VudHMgPSB0aGlzLmdldFJlbWFpbmluZ0FjY291bnRzKHtcbiAgICAgICAgICAgIHVzZXJBY2NvdW50czogW3RoaXMuZ2V0VXNlckFjY291bnQoKV0sXG4gICAgICAgICAgICB1c2VNYXJrZXRMYXN0U2xvdENhY2hlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGVTcG90TWFya2V0SW5kZXhlczogW21hcmtldEluZGV4XSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHR4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLnRyYW5zYWN0aW9uLnJlcXVlc3RSZW1vdmVJbnN1cmFuY2VGdW5kU3Rha2UobWFya2V0SW5kZXgsIGFtb3VudCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IHNwb3RNYXJrZXRBY2NvdW50LnB1YmtleSxcbiAgICAgICAgICAgICAgICBpbnN1cmFuY2VGdW5kU3Rha2U6IGlmU3Rha2VBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgaW5zdXJhbmNlRnVuZFZhdWx0OiBzcG90TWFya2V0QWNjb3VudC5pbnN1cmFuY2VGdW5kLnZhdWx0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGFzeW5jIGNhbmNlbFJlcXVlc3RSZW1vdmVJbnN1cmFuY2VGdW5kU3Rha2UobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldEFjY291bnQgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgaWZTdGFrZUFjY291bnRQdWJsaWNLZXkgPSAoMCwgcGRhXzEuZ2V0SW5zdXJhbmNlRnVuZFN0YWtlQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy53YWxsZXQucHVibGljS2V5LCBtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCldLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi5jYW5jZWxSZXF1ZXN0UmVtb3ZlSW5zdXJhbmNlRnVuZFN0YWtlKG1hcmtldEluZGV4LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogc3BvdE1hcmtldEFjY291bnQucHVia2V5LFxuICAgICAgICAgICAgICAgIGluc3VyYW5jZUZ1bmRTdGFrZTogaWZTdGFrZUFjY291bnRQdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgdXNlclN0YXRzOiB0aGlzLmdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBpbnN1cmFuY2VGdW5kVmF1bHQ6IHNwb3RNYXJrZXRBY2NvdW50Lmluc3VyYW5jZUZ1bmQudmF1bHQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7IHR4U2lnIH0gPSBhd2FpdCB0aGlzLnNlbmRUcmFuc2FjdGlvbih0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgcmVtb3ZlSW5zdXJhbmNlRnVuZFN0YWtlKG1hcmtldEluZGV4LCBjb2xsYXRlcmFsQWNjb3VudFB1YmxpY0tleSkge1xuICAgICAgICBjb25zdCB0eCA9IG5ldyB3ZWIzX2pzXzEuVHJhbnNhY3Rpb24oKTtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldEFjY291bnQgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgaWZTdGFrZUFjY291bnRQdWJsaWNLZXkgPSAoMCwgcGRhXzEuZ2V0SW5zdXJhbmNlRnVuZFN0YWtlQWNjb3VudFB1YmxpY0tleSkodGhpcy5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy53YWxsZXQucHVibGljS2V5LCBtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxTaWduZXJzID0gW107XG4gICAgICAgIGNvbnN0IGlzU29sTWFya2V0ID0gc3BvdE1hcmtldEFjY291bnQubWludC5lcXVhbHMoc3BvdE1hcmtldHNfMS5XUkFQUEVEX1NPTF9NSU5UKTtcbiAgICAgICAgY29uc3QgY3JlYXRlV1NPTFRva2VuQWNjb3VudCA9IGlzU29sTWFya2V0ICYmIGNvbGxhdGVyYWxBY2NvdW50UHVibGljS2V5LmVxdWFscyh0aGlzLndhbGxldC5wdWJsaWNLZXkpO1xuICAgICAgICBsZXQgdG9rZW5BY2NvdW50O1xuICAgICAgICBpZiAoY3JlYXRlV1NPTFRva2VuQWNjb3VudCkge1xuICAgICAgICAgICAgY29uc3QgeyBpeHMsIHB1YmtleSB9ID0gYXdhaXQgdGhpcy5nZXRXcmFwcGVkU29sQWNjb3VudENyZWF0aW9uSXhzKG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCB0cnVlKTtcbiAgICAgICAgICAgIHRva2VuQWNjb3VudCA9IHB1YmtleTtcbiAgICAgICAgICAgIGl4cy5mb3JFYWNoKChpeCkgPT4ge1xuICAgICAgICAgICAgICAgIHR4LmFkZChpeCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRva2VuQWNjb3VudCA9IGNvbGxhdGVyYWxBY2NvdW50UHVibGljS2V5O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCldLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZW1vdmVTdGFrZUl4ID0gYXdhaXQgdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLnJlbW92ZUluc3VyYW5jZUZ1bmRTdGFrZShtYXJrZXRJbmRleCwge1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBzdGF0ZTogYXdhaXQgdGhpcy5nZXRTdGF0ZVB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXQ6IHNwb3RNYXJrZXRBY2NvdW50LnB1YmtleSxcbiAgICAgICAgICAgICAgICBpbnN1cmFuY2VGdW5kU3Rha2U6IGlmU3Rha2VBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHVzZXJTdGF0czogdGhpcy5nZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgYXV0aG9yaXR5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICAgICAgaW5zdXJhbmNlRnVuZFZhdWx0OiBzcG90TWFya2V0QWNjb3VudC5pbnN1cmFuY2VGdW5kLnZhdWx0LFxuICAgICAgICAgICAgICAgIGRyaWZ0U2lnbmVyOiB0aGlzLmdldFNpZ25lclB1YmxpY0tleSgpLFxuICAgICAgICAgICAgICAgIHVzZXJUb2tlbkFjY291bnQ6IHRva2VuQWNjb3VudCxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtYWluaW5nQWNjb3VudHMsXG4gICAgICAgIH0pO1xuICAgICAgICB0eC5hZGQocmVtb3ZlU3Rha2VJeCk7XG4gICAgICAgIC8vIENsb3NlIHRoZSB3cmFwcGVkIHNvbCBhY2NvdW50IGF0IHRoZSBlbmQgb2YgdGhlIHRyYW5zYWN0aW9uXG4gICAgICAgIGlmIChjcmVhdGVXU09MVG9rZW5BY2NvdW50KSB7XG4gICAgICAgICAgICB0eC5hZGQoKDAsIHNwbF90b2tlbl8xLmNyZWF0ZUNsb3NlQWNjb3VudEluc3RydWN0aW9uKSh0b2tlbkFjY291bnQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgdGhpcy53YWxsZXQucHVibGljS2V5LCBbXSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBhZGRpdGlvbmFsU2lnbmVycywgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBzZXR0bGVSZXZlbnVlVG9JbnN1cmFuY2VGdW5kKG1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRBY2NvdW50ID0gdGhpcy5nZXRTcG90TWFya2V0QWNjb3VudChtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ0FjY291bnRzID0gdGhpcy5nZXRSZW1haW5pbmdBY2NvdW50cyh7XG4gICAgICAgICAgICB1c2VyQWNjb3VudHM6IFt0aGlzLmdldFVzZXJBY2NvdW50KCldLFxuICAgICAgICAgICAgdXNlTWFya2V0TGFzdFNsb3RDYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFttYXJrZXRJbmRleF0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi5zZXR0bGVSZXZlbnVlVG9JbnN1cmFuY2VGdW5kKG1hcmtldEluZGV4LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIHN0YXRlOiBhd2FpdCB0aGlzLmdldFN0YXRlUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgc3BvdE1hcmtldDogc3BvdE1hcmtldEFjY291bnQucHVia2V5LFxuICAgICAgICAgICAgICAgIHNwb3RNYXJrZXRWYXVsdDogc3BvdE1hcmtldEFjY291bnQudmF1bHQsXG4gICAgICAgICAgICAgICAgZHJpZnRTaWduZXI6IHRoaXMuZ2V0U2lnbmVyUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgaW5zdXJhbmNlRnVuZFZhdWx0OiBzcG90TWFya2V0QWNjb3VudC5pbnN1cmFuY2VGdW5kLnZhdWx0LFxuICAgICAgICAgICAgICAgIHRva2VuUHJvZ3JhbTogc3BsX3Rva2VuXzEuVE9LRU5fUFJPR1JBTV9JRCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyByZXNvbHZlUGVycFBubERlZmljaXQoc3BvdE1hcmtldEluZGV4LCBwZXJwTWFya2V0SW5kZXgsIHR4UGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgdHhTaWcgfSA9IGF3YWl0IHRoaXMuc2VuZFRyYW5zYWN0aW9uKGF3YWl0IHRoaXMuYnVpbGRUcmFuc2FjdGlvbihhd2FpdCB0aGlzLmdldFJlc29sdmVQZXJwUG5sRGVmaWNpdEl4KHNwb3RNYXJrZXRJbmRleCwgcGVycE1hcmtldEluZGV4KSwgdHhQYXJhbXMpLCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIHR4U2lnO1xuICAgIH1cbiAgICBhc3luYyBnZXRSZXNvbHZlUGVycFBubERlZmljaXRJeChzcG90TWFya2V0SW5kZXgsIHBlcnBNYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCByZW1haW5pbmdBY2NvdW50cyA9IHRoaXMuZ2V0UmVtYWluaW5nQWNjb3VudHMoe1xuICAgICAgICAgICAgdXNlckFjY291bnRzOiBbdGhpcy5nZXRVc2VyQWNjb3VudCgpXSxcbiAgICAgICAgICAgIHVzZU1hcmtldExhc3RTbG90Q2FjaGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzOiBbcGVycE1hcmtldEluZGV4XSxcbiAgICAgICAgICAgIHdyaXRhYmxlU3BvdE1hcmtldEluZGV4ZXM6IFtzcG90TWFya2V0SW5kZXhdLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQoc3BvdE1hcmtldEluZGV4KTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5pbnN0cnVjdGlvbi5yZXNvbHZlUGVycFBubERlZmljaXQoc3BvdE1hcmtldEluZGV4LCBwZXJwTWFya2V0SW5kZXgsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0VmF1bHQ6IHNwb3RNYXJrZXQudmF1bHQsXG4gICAgICAgICAgICAgICAgaW5zdXJhbmNlRnVuZFZhdWx0OiBzcG90TWFya2V0Lmluc3VyYW5jZUZ1bmQudmF1bHQsXG4gICAgICAgICAgICAgICAgZHJpZnRTaWduZXI6IHRoaXMuZ2V0U2lnbmVyUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgdG9rZW5Qcm9ncmFtOiBzcGxfdG9rZW5fMS5UT0tFTl9QUk9HUkFNX0lELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbWFpbmluZ0FjY291bnRzOiByZW1haW5pbmdBY2NvdW50cyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGRlcG9zaXRJbnRvU3BvdE1hcmtldFJldmVudWVQb29sKG1hcmtldEluZGV4LCBhbW91bnQsIHVzZXJUb2tlbkFjY291bnRQdWJsaWNLZXkpIHtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IGF3YWl0IHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCB0eCA9IGF3YWl0IHRoaXMucHJvZ3JhbS50cmFuc2FjdGlvbi5kZXBvc2l0SW50b1Nwb3RNYXJrZXRSZXZlbnVlUG9vbChhbW91bnQsIHtcbiAgICAgICAgICAgIGFjY291bnRzOiB7XG4gICAgICAgICAgICAgICAgc3RhdGU6IGF3YWl0IHRoaXMuZ2V0U3RhdGVQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0OiBzcG90TWFya2V0LnB1YmtleSxcbiAgICAgICAgICAgICAgICBhdXRob3JpdHk6IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzcG90TWFya2V0VmF1bHQ6IHNwb3RNYXJrZXQudmF1bHQsXG4gICAgICAgICAgICAgICAgdXNlclRva2VuQWNjb3VudDogdXNlclRva2VuQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyB0eFNpZyB9ID0gYXdhaXQgdGhpcy5zZW5kVHJhbnNhY3Rpb24odHgsIFtdLCB0aGlzLm9wdHMpO1xuICAgICAgICByZXR1cm4gdHhTaWc7XG4gICAgfVxuICAgIGdldFBlcnBNYXJrZXRFeHRlbmRlZEluZm8obWFya2V0SW5kZXgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgbWFya2V0QWNjb3VudCA9IHRoaXMuZ2V0UGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBxdW90ZUFjY291bnQgPSB0aGlzLmdldFNwb3RNYXJrZXRBY2NvdW50KG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9TUE9UX01BUktFVF9JTkRFWCk7XG4gICAgICAgIGNvbnN0IGV4dGVuZGVkSW5mbyA9IHtcbiAgICAgICAgICAgIG1hcmtldEluZGV4LFxuICAgICAgICAgICAgbWluT3JkZXJTaXplOiAoX2EgPSBtYXJrZXRBY2NvdW50LmFtbSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1pbk9yZGVyU2l6ZSxcbiAgICAgICAgICAgIG1hcmdpbk1haW50ZW5hbmNlOiBtYXJrZXRBY2NvdW50Lm1hcmdpblJhdGlvTWFpbnRlbmFuY2UsXG4gICAgICAgICAgICBwbmxQb29sVmFsdWU6ICgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KSgoX2IgPSBtYXJrZXRBY2NvdW50LnBubFBvb2wpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5zY2FsZWRCYWxhbmNlLCBxdW90ZUFjY291bnQsIHR5cGVzXzEuU3BvdEJhbGFuY2VUeXBlLkRFUE9TSVQpLFxuICAgICAgICAgICAgY29udHJhY3RUaWVyOiBtYXJrZXRBY2NvdW50LmNvbnRyYWN0VGllcixcbiAgICAgICAgICAgIGF2YWlsYWJsZUluc3VyYW5jZTogKDAsIG1hcmtldF8xLmNhbGN1bGF0ZU1hcmtldE1heEF2YWlsYWJsZUluc3VyYW5jZSkobWFya2V0QWNjb3VudCwgcXVvdGVBY2NvdW50KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZGVkSW5mbztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFya2V0IGluZGV4IGFuZCB0eXBlIGZvciBhIGdpdmVuIG1hcmtldCBuYW1lXG4gICAgICogRS5nLiBcIlNPTC1QRVJQXCIgLT4geyBtYXJrZXRJbmRleDogMCwgbWFya2V0VHlwZTogTWFya2V0VHlwZS5QRVJQIH1cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICovXG4gICAgZ2V0TWFya2V0SW5kZXhBbmRUeXBlKG5hbWUpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgZm9yIChjb25zdCBwZXJwTWFya2V0QWNjb3VudCBvZiB0aGlzLmdldFBlcnBNYXJrZXRBY2NvdW50cygpKSB7XG4gICAgICAgICAgICBpZiAoKDAsIHVzZXJOYW1lXzEuZGVjb2RlTmFtZSkocGVycE1hcmtldEFjY291bnQubmFtZSkudG9VcHBlckNhc2UoKSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtldEluZGV4OiBwZXJwTWFya2V0QWNjb3VudC5tYXJrZXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0VHlwZTogdHlwZXNfMS5NYXJrZXRUeXBlLlBFUlAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHNwb3RNYXJrZXRBY2NvdW50IG9mIHRoaXMuZ2V0U3BvdE1hcmtldEFjY291bnRzKCkpIHtcbiAgICAgICAgICAgIGlmICgoMCwgdXNlck5hbWVfMS5kZWNvZGVOYW1lKShzcG90TWFya2V0QWNjb3VudC5uYW1lKS50b1VwcGVyQ2FzZSgpID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0SW5kZXg6IHNwb3RNYXJrZXRBY2NvdW50Lm1hcmtldEluZGV4LFxuICAgICAgICAgICAgICAgICAgICBtYXJrZXRUeXBlOiB0eXBlc18xLk1hcmtldFR5cGUuU1BPVCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHNlbmRUcmFuc2FjdGlvbih0eCwgYWRkaXRpb25hbFNpZ25lcnMsIG9wdHMsIHByZVNpZ25lZCkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmICghdHgubWVzc2FnZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHhTZW5kZXIuc2VuZCh0eCwgYWRkaXRpb25hbFNpZ25lcnMsIG9wdHMsIHByZVNpZ25lZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eFNlbmRlci5zZW5kVmVyc2lvbmVkVHJhbnNhY3Rpb24odHgsIGFkZGl0aW9uYWxTaWduZXJzLCBvcHRzLCBwcmVTaWduZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGJ1aWxkVHJhbnNhY3Rpb24oaW5zdHJ1Y3Rpb25zLCB0eFBhcmFtcywgdHhWZXJzaW9uLCBsb29rdXBUYWJsZXMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgY29uc3QgYWxsSXggPSBbXTtcbiAgICAgICAgY29uc3QgY29tcHV0ZVVuaXRzID0gKF9hID0gdHhQYXJhbXMgPT09IG51bGwgfHwgdHhQYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHR4UGFyYW1zLmNvbXB1dGVVbml0cykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy50eFBhcmFtcy5jb21wdXRlVW5pdHM7XG4gICAgICAgIGlmIChjb21wdXRlVW5pdHMgIT09IDIwMDAwMCkge1xuICAgICAgICAgICAgYWxsSXgucHVzaCh3ZWIzX2pzXzEuQ29tcHV0ZUJ1ZGdldFByb2dyYW0uc2V0Q29tcHV0ZVVuaXRMaW1pdCh7XG4gICAgICAgICAgICAgICAgdW5pdHM6IGNvbXB1dGVVbml0cyxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wdXRlVW5pdHNQcmljZSA9IChfYiA9IHR4UGFyYW1zID09PSBudWxsIHx8IHR4UGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0eFBhcmFtcy5jb21wdXRlVW5pdHNQcmljZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdGhpcy50eFBhcmFtcy5jb21wdXRlVW5pdHNQcmljZTtcbiAgICAgICAgaWYgKGNvbXB1dGVVbml0c1ByaWNlICE9PSAwKSB7XG4gICAgICAgICAgICBhbGxJeC5wdXNoKHdlYjNfanNfMS5Db21wdXRlQnVkZ2V0UHJvZ3JhbS5zZXRDb21wdXRlVW5pdFByaWNlKHtcbiAgICAgICAgICAgICAgICBtaWNyb0xhbXBvcnRzOiBjb21wdXRlVW5pdHNQcmljZSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnN0cnVjdGlvbnMpKSB7XG4gICAgICAgICAgICBhbGxJeC5wdXNoKC4uLmluc3RydWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhbGxJeC5wdXNoKGluc3RydWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdHhWZXJzaW9uID0gdHhWZXJzaW9uICE9PSBudWxsICYmIHR4VmVyc2lvbiAhPT0gdm9pZCAwID8gdHhWZXJzaW9uIDogdGhpcy50eFZlcnNpb247XG4gICAgICAgIGlmICh0eFZlcnNpb24gPT09ICdsZWdhY3knKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHdlYjNfanNfMS5UcmFuc2FjdGlvbigpLmFkZCguLi5hbGxJeCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBtYXJrZXRMb29rdXBUYWJsZSA9IGF3YWl0IHRoaXMuZmV0Y2hNYXJrZXRMb29rdXBUYWJsZUFjY291bnQoKTtcbiAgICAgICAgICAgIGxvb2t1cFRhYmxlcyA9IGxvb2t1cFRhYmxlc1xuICAgICAgICAgICAgICAgID8gWy4uLmxvb2t1cFRhYmxlcywgbWFya2V0TG9va3VwVGFibGVdXG4gICAgICAgICAgICAgICAgOiBbbWFya2V0TG9va3VwVGFibGVdO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyB3ZWIzX2pzXzEuVHJhbnNhY3Rpb25NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBwYXllcktleTogdGhpcy5wcm92aWRlci53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHJlY2VudEJsb2NraGFzaDogKGF3YWl0IHRoaXMucHJvdmlkZXIuY29ubmVjdGlvbi5nZXRSZWNlbnRCbG9ja2hhc2godGhpcy5vcHRzLnByZWZsaWdodENvbW1pdG1lbnQpKS5ibG9ja2hhc2gsXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBhbGxJeCxcbiAgICAgICAgICAgIH0pLmNvbXBpbGVUb1YwTWVzc2FnZShsb29rdXBUYWJsZXMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB3ZWIzX2pzXzEuVmVyc2lvbmVkVHJhbnNhY3Rpb24obWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkRyaWZ0Q2xpZW50ID0gRHJpZnRDbGllbnQ7XG4iXSwibmFtZXMiOlsiX19jcmVhdGVCaW5kaW5nIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJ1bmRlZmluZWQiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX19lc01vZHVsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsImRlZmluZVByb3BlcnR5IiwiX19zZXRNb2R1bGVEZWZhdWx0IiwidiIsInZhbHVlIiwiX19pbXBvcnRTdGFyIiwibW9kIiwicmVzdWx0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX19pbXBvcnREZWZhdWx0IiwiZXhwb3J0cyIsIkRyaWZ0Q2xpZW50IiwiYW5jaG9yXzEiLCJyZXF1aXJlIiwiYnM1OF8xIiwic3BsX3Rva2VuXzEiLCJ0eXBlc18xIiwiYW5jaG9yIiwiZHJpZnRfanNvbl8xIiwid2ViM19qc18xIiwicGRhXzEiLCJ1dGlsc18xIiwibnVtZXJpY0NvbnN0YW50c18xIiwicG9zaXRpb25fMSIsInNwb3RCYWxhbmNlXzEiLCJ1c2VyTmFtZV8xIiwicG9sbGluZ0RyaWZ0Q2xpZW50QWNjb3VudFN1YnNjcmliZXJfMSIsIndlYlNvY2tldERyaWZ0Q2xpZW50QWNjb3VudFN1YnNjcmliZXJfMSIsInJldHJ5VHhTZW5kZXJfMSIsInVzZXJfMSIsImNvbmZpZ18xIiwic3BvdE1hcmtldHNfMSIsInVzZXJTdGF0c18xIiwic3BvdFBvc2l0aW9uXzEiLCJtYXJrZXRfMSIsImZldGNoXzEiLCJzcG90TWFya2V0XzEiLCJtZW1jbXBfMSIsIm1hcmluYWRlXzEiLCJvcmRlclBhcmFtc18xIiwiaXNTdWJzY3JpYmVkIiwiX2lzU3Vic2NyaWJlZCIsImFjY291bnRTdWJzY3JpYmVyIiwidmFsIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJfYSIsIl9iIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJfZyIsIl9oIiwiX2oiLCJfayIsIl9sIiwiX20iLCJfbyIsIl9wIiwiX3EiLCJfciIsIl9zIiwiX3QiLCJfdSIsInVzZXJzIiwiTWFwIiwicGVycE1hcmtldExhc3RTbG90Q2FjaGUiLCJzcG90TWFya2V0TGFzdFNsb3RDYWNoZSIsIm11c3RJbmNsdWRlUGVycE1hcmtldEluZGV4ZXMiLCJTZXQiLCJtdXN0SW5jbHVkZVNwb3RNYXJrZXRJbmRleGVzIiwiY29ubmVjdGlvbiIsIndhbGxldCIsIm9wdHMiLCJBbmNob3JQcm92aWRlciIsImRlZmF1bHRPcHRpb25zIiwicHJvdmlkZXIiLCJwcm9ncmFtIiwiUHJvZ3JhbSIsImRlZmF1bHQiLCJwcm9ncmFtSUQiLCJQdWJsaWNLZXkiLCJEUklGVF9QUk9HUkFNX0lEIiwiYXV0aG9yaXR5IiwicHVibGljS2V5IiwiYWN0aXZlU3ViQWNjb3VudElkIiwic2tpcExvYWRVc2VycyIsInR4VmVyc2lvbiIsInR4UGFyYW1zIiwiY29tcHV0ZVVuaXRzIiwiY29tcHV0ZVVuaXRzUHJpY2UiLCJpbmNsdWRlRGVsZWdhdGVzIiwic3ViQWNjb3VudElkcyIsIkVycm9yIiwiYXV0aG9yaXR5U3ViQWNjb3VudE1hcCIsInRvU3RyaW5nIiwiYWNjb3VudFN1YnNjcmlwdGlvbiIsInR5cGUiLCJ1c2VyQWNjb3VudFN1YnNjcmlwdGlvbkNvbmZpZyIsImFjY291bnRMb2FkZXIiLCJ1c2VyU3RhdHNBY2NvdW50U3Vic2NyaXB0aW9uQ29uZmlnIiwidXNlclN0YXRzIiwiVXNlclN0YXRzIiwiZHJpZnRDbGllbnQiLCJ1c2VyU3RhdHNBY2NvdW50UHVibGljS2V5IiwiZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSIsInByb2dyYW1JZCIsIm1hcmtldExvb2t1cFRhYmxlIiwiZW52IiwiY29uZmlncyIsIk1BUktFVF9MT09LVVBfVEFCTEUiLCJub01hcmtldHNBbmRPcmFjbGVzU3BlY2lmaWVkIiwicGVycE1hcmtldEluZGV4ZXMiLCJzcG90TWFya2V0SW5kZXhlcyIsIm9yYWNsZUluZm9zIiwiUG9sbGluZ0RyaWZ0Q2xpZW50QWNjb3VudFN1YnNjcmliZXIiLCJXZWJTb2NrZXREcmlmdENsaWVudEFjY291bnRTdWJzY3JpYmVyIiwiZXZlbnRFbWl0dGVyIiwidHhTZW5kZXIiLCJSZXRyeVR4U2VuZGVyIiwiZ2V0VXNlck1hcEtleSIsInN1YkFjY291bnRJZCIsImNyZWF0ZVVzZXIiLCJhY2NvdW50U3Vic2NyaXB0aW9uQ29uZmlnIiwidXNlckFjY291bnRQdWJsaWNLZXkiLCJnZXRVc2VyQWNjb3VudFB1YmxpY0tleVN5bmMiLCJVc2VyIiwic3Vic2NyaWJlIiwic3Vic2NyaWJlUHJvbWlzZXMiLCJhZGRBbmRTdWJzY3JpYmVUb1VzZXJzIiwiY29uY2F0IiwiUHJvbWlzZSIsImFsbCIsInJlZHVjZSIsInN1Y2Nlc3MiLCJwcmV2U3VjY2VzcyIsInN1YnNjcmliZVVzZXJzIiwidmFsdWVzIiwibWFwIiwidXNlciIsImZldGNoQWNjb3VudHMiLCJwcm9taXNlcyIsImZldGNoIiwidW5zdWJzY3JpYmUiLCJ1bnN1YnNjcmliZVByb21pc2VzIiwidW5zdWJzY3JpYmVVc2VycyIsImdldFN0YXRlUHVibGljS2V5Iiwic3RhdGVQdWJsaWNLZXkiLCJnZXREcmlmdFN0YXRlQWNjb3VudFB1YmxpY0tleSIsImdldFNpZ25lclB1YmxpY0tleSIsInNpZ25lclB1YmxpY0tleSIsImdldERyaWZ0U2lnbmVyUHVibGljS2V5IiwiZ2V0U3RhdGVBY2NvdW50IiwiZ2V0U3RhdGVBY2NvdW50QW5kU2xvdCIsImRhdGEiLCJmb3JjZUdldFN0YXRlQWNjb3VudCIsImdldFBlcnBNYXJrZXRBY2NvdW50IiwibWFya2V0SW5kZXgiLCJnZXRNYXJrZXRBY2NvdW50QW5kU2xvdCIsImZvcmNlR2V0UGVycE1hcmtldEFjY291bnQiLCJpIiwiZ2V0UGVycE1hcmtldEFjY291bnRzIiwiZ2V0TWFya2V0QWNjb3VudHNBbmRTbG90cyIsImZpbHRlciIsImdldFNwb3RNYXJrZXRBY2NvdW50IiwiZ2V0U3BvdE1hcmtldEFjY291bnRBbmRTbG90IiwiZm9yY2VHZXRTcG90TWFya2V0QWNjb3VudCIsImdldFNwb3RNYXJrZXRBY2NvdW50cyIsImdldFNwb3RNYXJrZXRBY2NvdW50c0FuZFNsb3RzIiwiZ2V0UXVvdGVTcG90TWFya2V0QWNjb3VudCIsIlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYIiwiZ2V0T3JhY2xlUHJpY2VEYXRhQW5kU2xvdCIsIm9yYWNsZVB1YmxpY0tleSIsImdldFNlcnVtVjNGdWxmaWxsbWVudENvbmZpZyIsInNlcnVtTWFya2V0IiwiYWRkcmVzcyIsImdldFNlcnVtRnVsZmlsbG1lbnRDb25maWdQdWJsaWNLZXkiLCJhY2NvdW50Iiwic2VydW1WM0Z1bGZpbGxtZW50Q29uZmlnIiwiZ2V0UGhvZW5peFYxRnVsZmlsbG1lbnRDb25maWciLCJwaG9lbml4TWFya2V0IiwiZ2V0UGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnUHVibGljS2V5IiwicGhvZW5peFYxRnVsZmlsbG1lbnRDb25maWciLCJmZXRjaE1hcmtldExvb2t1cFRhYmxlQWNjb3VudCIsImxvb2t1cFRhYmxlQWNjb3VudCIsImNvbnNvbGUiLCJsb2ciLCJnZXRBZGRyZXNzTG9va3VwVGFibGUiLCJ1cGRhdGVXYWxsZXQiLCJuZXdXYWxsZXQiLCJhdXRob3JpdHlTdWJhY2NvdW50TWFwIiwibmV3UHJvdmlkZXIiLCJuZXdQcm9ncmFtIiwiY2xlYXIiLCJzd2l0Y2hBY3RpdmVVc2VyIiwiYWRkVXNlciIsInVzZXJBY2NvdW50IiwidXNlcktleSIsImhhcyIsInNldCIsInNpemUiLCJmb3JFYWNoIiwia2V5Iiwia2V5cyIsInVzZXJBY2NvdW50cyIsImdldFVzZXJBY2NvdW50c0ZvckF1dGhvcml0eSIsImRlbGVnYXRlZEFjY291bnRzIiwiZ2V0VXNlckFjY291bnRzRm9yRGVsZWdhdGUiLCJpbml0aWFsaXplVXNlckFjY291bnQiLCJuYW1lIiwiREVGQVVMVF9VU0VSX05BTUUiLCJyZWZlcnJlckluZm8iLCJpbml0aWFsaXplVXNlckFjY291bnRJeCIsImdldEluaXRpYWxpemVVc2VySW5zdHJ1Y3Rpb25zIiwidHgiLCJUcmFuc2FjdGlvbiIsImNoZWNrSWZBY2NvdW50RXhpc3RzIiwiYWRkIiwiZ2V0SW5pdGlhbGl6ZVVzZXJTdGF0c0l4IiwidHhTaWciLCJzZW5kVHJhbnNhY3Rpb24iLCJnZXRVc2VyQWNjb3VudFB1YmxpY0tleSIsInJlbWFpbmluZ0FjY291bnRzIiwiQXJyYXkiLCJwdXNoIiwicHVia2V5IiwicmVmZXJyZXIiLCJpc1dyaXRhYmxlIiwiaXNTaWduZXIiLCJyZWZlcnJlclN0YXRzIiwic3RhdGUiLCJ3aGl0ZWxpc3RNaW50IiwiZXF1YWxzIiwiYXNzb2NpYXRlZFRva2VuUHVibGljS2V5IiwiZ2V0QXNzb2NpYXRlZFRva2VuQWRkcmVzcyIsIm5hbWVCdWZmZXIiLCJlbmNvZGVOYW1lIiwiaW5zdHJ1Y3Rpb24iLCJpbml0aWFsaXplVXNlciIsImFjY291bnRzIiwicGF5ZXIiLCJyZW50Iiwid2ViMyIsIlNZU1ZBUl9SRU5UX1BVQktFWSIsInN5c3RlbVByb2dyYW0iLCJTeXN0ZW1Qcm9ncmFtIiwiaW5pdGlhbGl6ZVVzZXJTdGF0cyIsImdldE5leHRTdWJBY2NvdW50SWQiLCJnZXRVc2VyU3RhdHMiLCJ1c2VyU3RhdHNBY2NvdW50IiwiZmV0Y2hVc2VyU3RhdHNBY2NvdW50IiwiZ2V0QWNjb3VudCIsIm51bWJlck9mU3ViQWNjb3VudHNDcmVhdGVkIiwiaW5pdGlhbGl6ZVJlZmVycmVyTmFtZSIsInJlZmVycmVyTmFtZUFjY291bnRQdWJsaWNLZXkiLCJnZXRSZWZlcnJlck5hbWVQdWJsaWNLZXlTeW5jIiwidHJhbnNhY3Rpb24iLCJyZWZlcnJlck5hbWUiLCJ1cGRhdGVVc2VyTmFtZSIsInVwZGF0ZVVzZXJDdXN0b21NYXJnaW5SYXRpbyIsIm1hcmdpblJhdGlvIiwiZ2V0VXBkYXRlVXNlck1hcmdpblRyYWRpbmdFbmFibGVkSXgiLCJtYXJnaW5UcmFkaW5nRW5hYmxlZCIsInVzZXJBY2NvdW50UHVibGljS2V5VG9Vc2UiLCJnZXRSZW1haW5pbmdBY2NvdW50cyIsImdldFVzZXJBY2NvdW50IiwiZXJyIiwidXBkYXRlVXNlck1hcmdpblRyYWRpbmdFbmFibGVkIiwidXBkYXRlVXNlckRlbGVnYXRlIiwiZGVsZWdhdGUiLCJmZXRjaEFsbFVzZXJBY2NvdW50cyIsImluY2x1ZGVJZGxlIiwiZmlsdGVycyIsImdldE5vbklkbGVVc2VyRmlsdGVyIiwicHJvZ3JhbUFjY291bnRzIiwibWVtY21wIiwib2Zmc2V0IiwiYnl0ZXMiLCJlbmNvZGUiLCJ0b0J1ZmZlciIsInByb2dyYW1BY2NvdW50Iiwic29ydCIsImEiLCJiIiwiZ2V0VXNlckFjY291bnRzQW5kQWRkcmVzc2VzRm9yQXV0aG9yaXR5IiwiZ2V0UmVmZXJyZWRVc2VyU3RhdHNBY2NvdW50c0J5UmVmZXJyZXIiLCJnZXRSZWZlcnJlck5hbWVBY2NvdW50c0ZvckF1dGhvcml0eSIsImRlbGV0ZVVzZXIiLCJpeCIsImJ1aWxkVHJhbnNhY3Rpb24iLCJ1c2VyTWFwS2V5IiwiZGVsZXRlIiwiZ2V0VXNlciIsImhhc1VzZXIiLCJnZXRVc2VycyIsImFjY3QiLCJmZXRjaFJlZmVycmVyTmFtZUFjY291bnQiLCJmb3JjZUdldFVzZXJBY2NvdW50IiwiZ2V0VXNlckFjY291bnRBbmRTbG90IiwiZ2V0U3BvdFBvc2l0aW9uIiwic3BvdFBvc2l0aW9ucyIsImZpbmQiLCJzcG90UG9zaXRpb24iLCJnZXRRdW90ZUFzc2V0VG9rZW5BbW91bnQiLCJnZXRUb2tlbkFtb3VudCIsIlpFUk8iLCJzcG90TWFya2V0IiwiZ2V0U2lnbmVkVG9rZW5BbW91bnQiLCJzY2FsZWRCYWxhbmNlIiwiYmFsYW5jZVR5cGUiLCJjb252ZXJ0VG9TcG90UHJlY2lzaW9uIiwiYW1vdW50IiwiY2FzdE51bWJlclRvU3BvdFByZWNpc2lvbiIsImNvbnZlcnRUb1BlcnBQcmVjaXNpb24iLCJCTiIsIm11bCIsIkJBU0VfUFJFQ0lTSU9OIiwiY29udmVydFRvUHJpY2VQcmVjaXNpb24iLCJQUklDRV9QUkVDSVNJT04iLCJtdXN0SW5jbHVkZU1hcmtldHNJbkl4IiwicGVycE1hcmtldEluZGV4Iiwic3BvdE1hcmtldEluZGV4IiwicGFyYW1zIiwib3JhY2xlQWNjb3VudE1hcCIsInNwb3RNYXJrZXRBY2NvdW50TWFwIiwicGVycE1hcmtldEFjY291bnRNYXAiLCJnZXRSZW1haW5pbmdBY2NvdW50TWFwc0ZvclVzZXJzIiwidXNlTWFya2V0TGFzdFNsb3RDYWNoZSIsImxhc3RVc2VyU2xvdCIsInNsb3QiLCJlbnRyaWVzIiwiYWRkUGVycE1hcmtldFRvUmVtYWluaW5nQWNjb3VudE1hcHMiLCJhZGRTcG90TWFya2V0VG9SZW1haW5pbmdBY2NvdW50TWFwcyIsInJlYWRhYmxlUGVycE1hcmtldEluZGV4IiwicmVhZGFibGVQZXJwTWFya2V0SW5kZXhlcyIsImlzQXJyYXkiLCJyZWFkYWJsZVNwb3RNYXJrZXRJbmRleGVzIiwicmVhZGFibGVTcG90TWFya2V0SW5kZXgiLCJ3cml0YWJsZVBlcnBNYXJrZXRJbmRleGVzIiwid3JpdGFibGVQZXJwTWFya2V0SW5kZXgiLCJ3cml0YWJsZVNwb3RNYXJrZXRJbmRleGVzIiwid3JpdGFibGVTcG90TWFya2V0SW5kZXgiLCJwZXJwTWFya2V0QWNjb3VudCIsImFtbSIsIm9yYWNsZSIsInF1b3RlU3BvdE1hcmtldEluZGV4Iiwic3BvdE1hcmtldEFjY291bnQiLCJpc1Nwb3RQb3NpdGlvbkF2YWlsYWJsZSIsIm9wZW5Bc2tzIiwiZXEiLCJvcGVuQmlkcyIsInBvc2l0aW9uIiwicGVycFBvc2l0aW9ucyIsInBvc2l0aW9uSXNBdmFpbGFibGUiLCJnZXRPcmRlciIsIm9yZGVySWQiLCJvcmRlcnMiLCJvcmRlciIsImdldE9yZGVyQnlVc2VySWQiLCJ1c2VyT3JkZXJJZCIsImdldEFzc29jaWF0ZWRUb2tlbkFjY291bnQiLCJ1c2VOYXRpdmUiLCJtaW50IiwiV1JBUFBFRF9TT0xfTUlOVCIsImNyZWF0ZUFzc29jaWF0ZWRUb2tlbkFjY291bnRJZGVtcG90ZW50SW5zdHJ1Y3Rpb24iLCJvd25lciIsIlRyYW5zYWN0aW9uSW5zdHJ1Y3Rpb24iLCJUT0tFTl9QUk9HUkFNX0lEIiwiQVNTT0NJQVRFRF9UT0tFTl9QUk9HUkFNX0lEIiwiQnVmZmVyIiwiZnJvbSIsImRlcG9zaXQiLCJhc3NvY2lhdGVkVG9rZW5BY2NvdW50IiwicmVkdWNlT25seSIsIkNvbXB1dGVCdWRnZXRQcm9ncmFtIiwic2V0Q29tcHV0ZVVuaXRMaW1pdCIsInVuaXRzIiwiYWRkaXRpb25hbFNpZ25lcnMiLCJpc1NvbE1hcmtldCIsInNpZ25lckF1dGhvcml0eSIsImNyZWF0ZVdTT0xUb2tlbkFjY291bnQiLCJpeHMiLCJnZXRXcmFwcGVkU29sQWNjb3VudENyZWF0aW9uSXhzIiwiZGVwb3NpdENvbGxhdGVyYWxJeCIsImdldERlcG9zaXRJbnN0cnVjdGlvbiIsImNyZWF0ZUNsb3NlQWNjb3VudEluc3RydWN0aW9uIiwidXNlclRva2VuQWNjb3VudCIsInVzZXJJbml0aWFsaXplZCIsInNwb3RNYXJrZXRWYXVsdCIsInZhdWx0IiwidG9rZW5Qcm9ncmFtIiwiYWNjb3VudEluZm8iLCJnZXRBY2NvdW50SW5mbyIsImUiLCJpbmNsdWRlUmVudCIsInNlZWQiLCJLZXlwYWlyIiwiZ2VuZXJhdGUiLCJ0b0Jhc2U1OCIsInNsaWNlIiwid3JhcHBlZFNvbEFjY291bnQiLCJjcmVhdGVXaXRoU2VlZCIsInNpZ25lcnMiLCJyZW50U3BhY2VMYW1wb3J0cyIsIkxBTVBPUlRTX1BFUl9TT0wiLCJsYW1wb3J0cyIsImNyZWF0ZUFjY291bnRXaXRoU2VlZCIsImZyb21QdWJrZXkiLCJiYXNlUHVia2V5IiwibmV3QWNjb3VudFB1YmtleSIsInRvTnVtYmVyIiwic3BhY2UiLCJjcmVhdGVJbml0aWFsaXplQWNjb3VudEluc3RydWN0aW9uIiwiZ2V0QXNzb2NpYXRlZFRva2VuQWNjb3VudENyZWF0aW9uSXgiLCJ0b2tlbk1pbnRBZGRyZXNzIiwiYXNzb2NpYXRlZFRva2VuQWRkcmVzcyIsImNyZWF0ZUFzc29jaWF0ZWRUb2tlbkFjY291bnRJbnN0cnVjdGlvbiIsImluaXRpYWxpemVVc2VyQWNjb3VudEFuZERlcG9zaXRDb2xsYXRlcmFsIiwiZnJvbVN1YkFjY291bnRJZCIsInNldENvbXB1dGVVbml0UHJpY2UiLCJtaWNyb0xhbXBvcnRzIiwiaXNGcm9tU3ViYWNjb3VudCIsImlzTmFOIiwic3RhcnRJeHMiLCJnZXRUcmFuc2ZlckRlcG9zaXRJeCIsImluaXRpYWxpemVVc2VyQWNjb3VudEZvckRldm5ldCIsInRva2VuRmF1Y2V0IiwiYXNzb2NpYXRlVG9rZW5QdWJsaWNLZXkiLCJjcmVhdGVBc3NvY2lhdGVkQWNjb3VudEl4IiwibWludFRvSXgiLCJjcmVhdGVBc3NvY2lhdGVkVG9rZW5BY2NvdW50QW5kTWludFRvSW5zdHJ1Y3Rpb25zIiwic2VuZEFuZENvbmZpcm0iLCJ3aXRoZHJhdyIsImFjY291bnRFeGlzdHMiLCJjcmVhdGVBc3NvY2lhdGVkVG9rZW5BY2NvdW50SXgiLCJ3aXRoZHJhd0NvbGxhdGVyYWwiLCJnZXRXaXRoZHJhd0l4IiwiZHJpZnRTaWduZXIiLCJ0cmFuc2ZlckRlcG9zaXQiLCJ0b1N1YkFjY291bnRJZCIsImZyb21Vc2VyIiwidG9Vc2VyIiwiZnJvbVVzZXJBY2NvdW50IiwidXBkYXRlU3BvdE1hcmtldEN1bXVsYXRpdmVJbnRlcmVzdCIsInVwZGF0ZVNwb3RNYXJrZXRDdW11bGF0aXZlSW50ZXJlc3RJeCIsInNldHRsZUxQIiwic2V0dGxlZVVzZXJBY2NvdW50UHVibGljS2V5Iiwic2V0dGxlTFBJeCIsInNldHRsZWVVc2VyQWNjb3VudCIsInNldHRsZUxwIiwicmVtb3ZlUGVycExwU2hhcmVzIiwic2hhcmVzVG9CdXJuIiwiZ2V0UmVtb3ZlUGVycExwU2hhcmVzSXgiLCJyZW1vdmVQZXJwTHBTaGFyZXNJbkV4cGlyaW5nTWFya2V0IiwiZ2V0UmVtb3ZlUGVycExwU2hhcmVzSW5FeHBpcmluZ01hcmtldCIsInBlcnBQb3NpdGlvbiIsImxwU2hhcmVzIiwiYWRkUGVycExwU2hhcmVzIiwiZ2V0QWRkUGVycExwU2hhcmVzSXgiLCJnZXRRdW90ZVZhbHVlUGVyTHBTaGFyZSIsIm1heCIsImJhc2VBc3NldFJlc2VydmUiLCJzdWIiLCJtaW5CYXNlQXNzZXRSZXNlcnZlIiwibWF4QmFzZUFzc2V0UmVzZXJ2ZSIsIm9yYWNsZVByaWNlRGF0YSIsImdldE9yYWNsZURhdGFGb3JQZXJwTWFya2V0IiwibWF4T3BlbkJpZHNBc2tzIiwicXVvdGVWYWx1ZVBlckxwU2hhcmUiLCJwcmljZSIsIlFVT1RFX1BSRUNJU0lPTiIsImRpdiIsInNxcnRLIiwib3BlblBvc2l0aW9uIiwiZGlyZWN0aW9uIiwibGltaXRQcmljZSIsInBsYWNlQW5kVGFrZVBlcnBPcmRlciIsIm9yZGVyVHlwZSIsIk9yZGVyVHlwZSIsIk1BUktFVCIsImJhc2VBc3NldEFtb3VudCIsInNlbmRTaWduZWRUeCIsInNlbmRNYXJrZXRPcmRlckFuZEdldFNpZ25lZEZpbGxUeCIsIm9yZGVyUGFyYW1zIiwibWFrZXJJbmZvIiwiYnJhY2tldE9yZGVyc1BhcmFtcyIsInVzZVZlcnNpb25lZFR4IiwibmV4dE9yZGVySWQiLCJicmFja2V0T3JkZXJJeHMiLCJwbGFjZVBlcnBPcmRlckl4IiwiZ2V0UGxhY2VQZXJwT3JkZXJJeCIsImJyYWNrZXRPcmRlclBhcmFtcyIsInBsYWNlQnJhY2tldE9yZGVySXgiLCJmaWxsUGVycE9yZGVySXgiLCJnZXRGaWxsUGVycE9yZGVySXgiLCJ3YWxsZXRTdXBwb3J0c1ZlcnNpb25lZFR4bnMiLCJzdXBwb3J0ZWRUcmFuc2FjdGlvblZlcnNpb25zIiwidmVyc2lvbmVkTWFya2V0T3JkZXJUeCIsInZlcnNpb25lZEZpbGxUeCIsInNpZ25lZFZlcnNpb25lZE1hcmtldE9yZGVyVHgiLCJzaWduZWRWZXJzaW9uZWRGaWxsVHgiLCJzaWduQWxsVHJhbnNhY3Rpb25zIiwic2VuZFJhd1RyYW5zYWN0aW9uIiwic2VyaWFsaXplIiwic2lnbmVkRmlsbFR4IiwibWFya2V0T3JkZXJUeCIsIndyYXBJblR4IiwibGVuZ3RoIiwiZmlsbFR4IiwiY3VycmVudEJsb2NrSGFzaCIsImdldExhdGVzdEJsb2NraGFzaCIsImJsb2NraGFzaCIsInJlY2VudEJsb2NraGFzaCIsImZlZVBheWVyIiwic2lnbmVkTWFya2V0T3JkZXJUeCIsInBsYWNlUGVycE9yZGVyIiwiZ2V0T3JkZXJQYXJhbXMiLCJtYXJrZXRUeXBlIiwiTWFya2V0VHlwZSIsIlBFUlAiLCJ1cGRhdGVBTU1zIiwibWFya2V0SW5kZXhlcyIsImdldFVwZGF0ZUFNTXNJeCIsIm1hcmtldEFjY291bnRJbmZvcyIsIm9yYWNsZUFjY291bnRJbmZvcyIsIm1hcmtldCIsInVwZGF0ZUFtbXMiLCJzZXR0bGVFeHBpcmVkTWFya2V0IiwiZ2V0U2V0dGxlRXhwaXJlZE1hcmtldEl4Iiwic3BvdE1hcmtldEFjY291bnRJbmZvcyIsInNldHRsZUV4cGlyZWRNYXJrZXRQb29sc1RvUmV2ZW51ZVBvb2wiLCJwZXJwTWFya2V0UHVibGljS2V5IiwiZ2V0UGVycE1hcmtldFB1YmxpY0tleSIsInNwb3RNYXJrZXRQdWJsaWNLZXkiLCJnZXRTcG90TWFya2V0UHVibGljS2V5IiwiYWRtaW4iLCJwZXJwTWFya2V0IiwiY2FuY2VsT3JkZXIiLCJnZXRDYW5jZWxPcmRlckl4IiwiY2FuY2VsT3JkZXJCeVVzZXJJZCIsImdldENhbmNlbE9yZGVyQnlVc2VySWRJeCIsImNhbmNlbE9yZGVyc0J5SWRzIiwib3JkZXJJZHMiLCJnZXRDYW5jZWxPcmRlcnNCeUlkc0l4IiwiY2FuY2VsT3JkZXJzIiwiZ2V0Q2FuY2VsT3JkZXJzSXgiLCJpc1ZhcmlhbnQiLCJjYW5jZWxBbmRQbGFjZU9yZGVycyIsImNhbmNlbE9yZGVyUGFyYW1zIiwicGxhY2VPcmRlclBhcmFtcyIsImdldFBsYWNlT3JkZXJzSXgiLCJwbGFjZU9yZGVycyIsInBhcmFtIiwiZmlsbFBlcnBPcmRlciIsInVzZXJTdGF0c1B1YmxpY0tleSIsImZpbGxlclB1YmxpY0tleSIsImZpbGxlclN0YXRzUHVibGljS2V5IiwibWFrZXIiLCJtYWtlclVzZXJBY2NvdW50IiwibWFrZXJTdGF0cyIsInJlZmVycmVySXNNYWtlciIsImZpbGxlciIsImZpbGxlclN0YXRzIiwiZ2V0UmV2ZXJ0RmlsbEl4IiwicmV2ZXJ0RmlsbCIsInBsYWNlU3BvdE9yZGVyIiwiZ2V0UGxhY2VTcG90T3JkZXJJeCIsIlNQT1QiLCJmaWxsU3BvdE9yZGVyIiwiZnVsZmlsbG1lbnRDb25maWciLCJnZXRGaWxsU3BvdE9yZGVySXgiLCJtYWtlck9yZGVySWQiLCJhZGRTcG90RnVsZmlsbG1lbnRBY2NvdW50cyIsImZ1bGZpbGxtZW50VHlwZSIsImFkZFNlcnVtUmVtYWluaW5nQWNjb3VudHMiLCJhZGRQaG9lbml4UmVtYWluaW5nQWNjb3VudHMiLCJzZXJ1bVByb2dyYW1JZCIsInNlcnVtUmVxdWVzdFF1ZXVlIiwic2VydW1FdmVudFF1ZXVlIiwic2VydW1CaWRzIiwic2VydW1Bc2tzIiwic2VydW1CYXNlVmF1bHQiLCJzZXJ1bVF1b3RlVmF1bHQiLCJzZXJ1bU9wZW5PcmRlcnMiLCJnZXRTZXJ1bVNpZ25lclB1YmxpY0tleSIsInNlcnVtU2lnbmVyTm9uY2UiLCJzcm1WYXVsdCIsInBob2VuaXhQcm9ncmFtSWQiLCJwaG9lbml4TG9nQXV0aG9yaXR5IiwicGhvZW5peEJhc2VWYXVsdCIsInBob2VuaXhRdW90ZVZhdWx0Iiwic3dhcCIsImp1cGl0ZXJDbGllbnQiLCJvdXRNYXJrZXRJbmRleCIsImluTWFya2V0SW5kZXgiLCJvdXRBc3NvY2lhdGVkVG9rZW5BY2NvdW50IiwiaW5Bc3NvY2lhdGVkVG9rZW5BY2NvdW50Iiwic2xpcHBhZ2VCcHMiLCJzd2FwTW9kZSIsInJvdXRlIiwibG9va3VwVGFibGVzIiwiZ2V0SnVwaXRlclN3YXBJeCIsIm9ubHlEaXJlY3RSb3V0ZXMiLCJvdXRNYXJrZXQiLCJpbk1hcmtldCIsInJvdXRlcyIsImdldFJvdXRlcyIsImlucHV0TWludCIsIm91dHB1dE1pbnQiLCJnZXRTd2FwVHJhbnNhY3Rpb24iLCJ1c2VyUHVibGljS2V5IiwidHJhbnNhY3Rpb25NZXNzYWdlIiwiZ2V0VHJhbnNhY3Rpb25NZXNzYWdlQW5kTG9va3VwVGFibGVzIiwianVwaXRlckluc3RydWN0aW9ucyIsImdldEp1cGl0ZXJJbnN0cnVjdGlvbnMiLCJwcmVJbnN0cnVjdGlvbnMiLCJiZWdpblN3YXBJeCIsImVuZFN3YXBJeCIsImdldFN3YXBJeCIsImFtb3VudEluIiwiaW5Ub2tlbkFjY291bnQiLCJvdXRUb2tlbkFjY291bnQiLCJvdXRTcG90TWFya2V0IiwiaW5TcG90TWFya2V0IiwiYmVnaW5Td2FwIiwib3V0U3BvdE1hcmtldFZhdWx0IiwiaW5TcG90TWFya2V0VmF1bHQiLCJzaWduZXIiLCJpbnN0cnVjdGlvbnMiLCJTWVNWQVJfSU5TVFJVQ1RJT05TX1BVQktFWSIsImVuZFN3YXAiLCJzdGFrZUZvck1TT0wiLCJnZXRTdGFrZUZvck1TT0xJeCIsIndTT0xNaW50IiwibVNPTEFjY291bnQiLCJ3U09MQWNjb3VudCIsIndTT0xBY2NvdW50RXhpc3RzIiwiY2xvc2VXU09MSXgiLCJjcmVhdGVXU09MSXgiLCJnZXRNYXJpbmFkZUZpbmFuY2VQcm9ncmFtIiwiZGVwb3NpdEl4IiwiZ2V0TWFyaW5hZGVEZXBvc2l0SXgiLCJ0cmFuc2ZlckZyb20iLCJ0cmlnZ2VyT3JkZXIiLCJnZXRUcmlnZ2VyT3JkZXJJeCIsInJlbWFpbmluZ0FjY291bnRzUGFyYW1zIiwiZm9yY2VDYW5jZWxPcmRlcnMiLCJnZXRGb3JjZUNhbmNlbE9yZGVyc0l4IiwidXBkYXRlVXNlcklkbGUiLCJnZXRVcGRhdGVVc2VySWRsZUl4IiwidXBkYXRlVXNlck9wZW5PcmRlcnNDb3VudCIsImdldFVwZGF0ZVVzZXJPcGVuT3JkZXJzQ291bnRJeCIsImdldFBsYWNlQW5kVGFrZVBlcnBPcmRlckl4IiwicGxhY2VBbmRNYWtlUGVycE9yZGVyIiwidGFrZXJJbmZvIiwiZ2V0UGxhY2VBbmRNYWtlUGVycE9yZGVySXgiLCJ0YWtlclVzZXJBY2NvdW50IiwidGFrZXJPcmRlcklkIiwidGFrZXIiLCJ0YWtlclN0YXRzIiwicGxhY2VBbmRUYWtlU3BvdE9yZGVyIiwiZ2V0UGxhY2VBbmRUYWtlU3BvdE9yZGVySXgiLCJwbGFjZUFuZE1ha2VTcG90T3JkZXIiLCJnZXRQbGFjZUFuZE1ha2VTcG90T3JkZXJJeCIsImNsb3NlUG9zaXRpb24iLCJ1c2VyUG9zaXRpb24iLCJnZXRQZXJwUG9zaXRpb24iLCJmaW5kRGlyZWN0aW9uVG9DbG9zZSIsImFicyIsIm1vZGlmeVBlcnBPcmRlciIsIm5ld0Jhc2VBbW91bnQiLCJuZXdMaW1pdFByaWNlIiwibmV3T3JhY2xlUHJpY2VPZmZzZXQiLCJtb2RpZnlPcmRlciIsIm1vZGlmeVBlcnBPcmRlckJ5VXNlck9yZGVySWQiLCJtb2RpZnlPcmRlckJ5VXNlck9yZGVySWQiLCJnZXRNb2RpZnlPcmRlckl4IiwibmV3RGlyZWN0aW9uIiwibmV3VHJpZ2dlclByaWNlIiwibmV3VHJpZ2dlckNvbmRpdGlvbiIsImF1Y3Rpb25EdXJhdGlvbiIsImF1Y3Rpb25TdGFydFByaWNlIiwiYXVjdGlvbkVuZFByaWNlIiwicG9zdE9ubHkiLCJpbW1lZGlhdGVPckNhbmNlbCIsIm1heFRzIiwicG9saWN5Iiwib3JhY2xlUHJpY2VPZmZzZXQiLCJ0cmlnZ2VyUHJpY2UiLCJ0cmlnZ2VyQ29uZGl0aW9uIiwiZ2V0TW9kaWZ5T3JkZXJCeVVzZXJJZEl4IiwibW9kaWZ5T3JkZXJCeVVzZXJJZCIsInNldHRsZVBOTHMiLCJnZXRTZXR0bGVQTkxzSXhzIiwic2V0dGxlUE5MSXgiLCJzZXR0bGVQTkwiLCJzZXR0bGVQbmwiLCJsaXF1aWRhdGVQZXJwIiwibWF4QmFzZUFzc2V0QW1vdW50IiwiZ2V0TGlxdWlkYXRlUGVycEl4IiwibGlxdWlkYXRvclB1YmxpY0tleSIsImxpcXVpZGF0b3JTdGF0c1B1YmxpY0tleSIsImxpcXVpZGF0b3IiLCJsaXF1aWRhdG9yU3RhdHMiLCJsaXF1aWRhdGVTcG90IiwiYXNzZXRNYXJrZXRJbmRleCIsImxpYWJpbGl0eU1hcmtldEluZGV4IiwibWF4TGlhYmlsaXR5VHJhbnNmZXIiLCJnZXRMaXF1aWRhdGVTcG90SXgiLCJsaXF1aWRhdGVCb3Jyb3dGb3JQZXJwUG5sIiwiZ2V0TGlxdWlkYXRlQm9ycm93Rm9yUGVycFBubEl4IiwibGlxdWlkYXRlUGVycFBubEZvckRlcG9zaXQiLCJtYXhQbmxUcmFuc2ZlciIsImdldExpcXVpZGF0ZVBlcnBQbmxGb3JEZXBvc2l0SXgiLCJyZXNvbHZlUGVycEJhbmtydXB0Y3kiLCJnZXRSZXNvbHZlUGVycEJhbmtydXB0Y3lJeCIsImluc3VyYW5jZUZ1bmRWYXVsdCIsImluc3VyYW5jZUZ1bmQiLCJyZXNvbHZlU3BvdEJhbmtydXB0Y3kiLCJnZXRSZXNvbHZlU3BvdEJhbmtydXB0Y3lJeCIsInVwZGF0ZUZ1bmRpbmdSYXRlIiwiZ2V0VXBkYXRlRnVuZGluZ1JhdGVJeCIsInVwZGF0ZVBlcnBCaWRBc2tUd2FwIiwibWFrZXJzIiwiZ2V0VXBkYXRlUGVycEJpZEFza1R3YXBJeCIsImtlZXBlclN0YXRzIiwic2V0dGxlRnVuZGluZ1BheW1lbnQiLCJnZXRTZXR0bGVGdW5kaW5nUGF5bWVudEl4IiwidHJpZ2dlckV2ZW50IiwiZXZlbnROYW1lIiwiZW1pdCIsIm9yYWNsZUtleSIsIm9yYWNsZURhdGEiLCJnZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldCIsImluaXRpYWxpemVJbnN1cmFuY2VGdW5kU3Rha2UiLCJnZXRJbml0aWFsaXplSW5zdXJhbmNlRnVuZFN0YWtlSXgiLCJpZlN0YWtlQWNjb3VudFB1YmxpY0tleSIsImdldEluc3VyYW5jZUZ1bmRTdGFrZUFjY291bnRQdWJsaWNLZXkiLCJpbnN1cmFuY2VGdW5kU3Rha2UiLCJnZXRBZGRJbnN1cmFuY2VGdW5kU3Rha2VJeCIsImNvbGxhdGVyYWxBY2NvdW50UHVibGljS2V5IiwiYWRkSW5zdXJhbmNlRnVuZFN0YWtlIiwiaW5pdGlhbGl6ZVN0YWtlQWNjb3VudCIsImZyb21TdWJhY2NvdW50IiwidG9rZW5BY2NvdW50Iiwid2l0aGRyYXdJeCIsImluaXRpYWxpemVJeCIsImFkZEZ1bmRzSXgiLCJyZXF1ZXN0UmVtb3ZlSW5zdXJhbmNlRnVuZFN0YWtlIiwiY2FuY2VsUmVxdWVzdFJlbW92ZUluc3VyYW5jZUZ1bmRTdGFrZSIsInJlbW92ZUluc3VyYW5jZUZ1bmRTdGFrZSIsInJlbW92ZVN0YWtlSXgiLCJzZXR0bGVSZXZlbnVlVG9JbnN1cmFuY2VGdW5kIiwicmVzb2x2ZVBlcnBQbmxEZWZpY2l0IiwiZ2V0UmVzb2x2ZVBlcnBQbmxEZWZpY2l0SXgiLCJkZXBvc2l0SW50b1Nwb3RNYXJrZXRSZXZlbnVlUG9vbCIsInVzZXJUb2tlbkFjY291bnRQdWJsaWNLZXkiLCJnZXRQZXJwTWFya2V0RXh0ZW5kZWRJbmZvIiwibWFya2V0QWNjb3VudCIsInF1b3RlQWNjb3VudCIsImV4dGVuZGVkSW5mbyIsIm1pbk9yZGVyU2l6ZSIsIm1hcmdpbk1haW50ZW5hbmNlIiwibWFyZ2luUmF0aW9NYWludGVuYW5jZSIsInBubFBvb2xWYWx1ZSIsInBubFBvb2wiLCJTcG90QmFsYW5jZVR5cGUiLCJERVBPU0lUIiwiY29udHJhY3RUaWVyIiwiYXZhaWxhYmxlSW5zdXJhbmNlIiwiY2FsY3VsYXRlTWFya2V0TWF4QXZhaWxhYmxlSW5zdXJhbmNlIiwiZ2V0TWFya2V0SW5kZXhBbmRUeXBlIiwidG9VcHBlckNhc2UiLCJkZWNvZGVOYW1lIiwicHJlU2lnbmVkIiwibWVzc2FnZSIsInNlbmQiLCJzZW5kVmVyc2lvbmVkVHJhbnNhY3Rpb24iLCJhbGxJeCIsIlRyYW5zYWN0aW9uTWVzc2FnZSIsInBheWVyS2V5IiwiZ2V0UmVjZW50QmxvY2toYXNoIiwicHJlZmxpZ2h0Q29tbWl0bWVudCIsImNvbXBpbGVUb1YwTWVzc2FnZSIsIlZlcnNpb25lZFRyYW5zYWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/driftClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/driftClientConfig.js":
/*!***************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/driftClientConfig.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kcmlmdENsaWVudENvbmZpZy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9kcmlmdENsaWVudENvbmZpZy5qcz83MjUxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/driftClientConfig.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/eventList.js":
/*!**************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/eventList.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.EventList = void 0;\nclass Node {\n    constructor(event, next, prev){\n        this.event = event;\n        this.next = next;\n        this.prev = prev;\n    }\n}\nclass EventList {\n    constructor(eventType, maxSize, sortFn, orderDirection){\n        this.eventType = eventType;\n        this.maxSize = maxSize;\n        this.sortFn = sortFn;\n        this.orderDirection = orderDirection;\n        this.size = 0;\n    }\n    insert(event) {\n        this.size++;\n        const newNode = new Node(event);\n        if (this.head === undefined) {\n            this.head = this.tail = newNode;\n            return;\n        }\n        if (this.sortFn(this.head.event, newNode.event) === (this.orderDirection === \"asc\" ? \"less than\" : \"greater than\")) {\n            this.head.prev = newNode;\n            newNode.next = this.head;\n            this.head = newNode;\n        } else {\n            let currentNode = this.head;\n            while(currentNode.next !== undefined && this.sortFn(currentNode.next.event, newNode.event) !== (this.orderDirection === \"asc\" ? \"less than\" : \"greater than\")){\n                currentNode = currentNode.next;\n            }\n            newNode.next = currentNode.next;\n            if (currentNode.next !== undefined) {\n                newNode.next.prev = newNode;\n            } else {\n                this.tail = newNode;\n            }\n            currentNode.next = newNode;\n            newNode.prev = currentNode;\n        }\n        if (this.size > this.maxSize) {\n            this.detach();\n        }\n    }\n    detach() {\n        const node = this.tail;\n        if (node.prev !== undefined) {\n            node.prev.next = node.next;\n        } else {\n            this.head = node.next;\n        }\n        if (node.next !== undefined) {\n            node.next.prev = node.prev;\n        } else {\n            this.tail = node.prev;\n        }\n        this.size--;\n    }\n    toArray() {\n        return Array.from(this);\n    }\n    *[Symbol.iterator]() {\n        let node = this.head;\n        while(node){\n            yield node.event;\n            node = node.next;\n        }\n    }\n}\nexports.EventList = EventList;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvZXZlbnRMaXN0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQkFBaUIsR0FBRyxLQUFLO0FBQ3pCLE1BQU1HO0lBQ0ZDLFlBQVlDLEtBQUssRUFBRUMsSUFBSSxFQUFFQyxJQUFJLENBQUU7UUFDM0IsSUFBSSxDQUFDRixLQUFLLEdBQUdBO1FBQ2IsSUFBSSxDQUFDQyxJQUFJLEdBQUdBO1FBQ1osSUFBSSxDQUFDQyxJQUFJLEdBQUdBO0lBQ2hCO0FBQ0o7QUFDQSxNQUFNTDtJQUNGRSxZQUFZSSxTQUFTLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxFQUFFQyxjQUFjLENBQUU7UUFDcEQsSUFBSSxDQUFDSCxTQUFTLEdBQUdBO1FBQ2pCLElBQUksQ0FBQ0MsT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0MsY0FBYyxHQUFHQTtRQUN0QixJQUFJLENBQUNDLElBQUksR0FBRztJQUNoQjtJQUNBQyxPQUFPUixLQUFLLEVBQUU7UUFDVixJQUFJLENBQUNPLElBQUk7UUFDVCxNQUFNRSxVQUFVLElBQUlYLEtBQUtFO1FBQ3pCLElBQUksSUFBSSxDQUFDVSxJQUFJLEtBQUtDLFdBQVc7WUFDekIsSUFBSSxDQUFDRCxJQUFJLEdBQUcsSUFBSSxDQUFDRSxJQUFJLEdBQUdIO1lBQ3hCO1FBQ0o7UUFDQSxJQUFJLElBQUksQ0FBQ0osTUFBTSxDQUFDLElBQUksQ0FBQ0ssSUFBSSxDQUFDVixLQUFLLEVBQUVTLFFBQVFULEtBQUssTUFDekMsS0FBSSxDQUFDTSxjQUFjLEtBQUssUUFBUSxjQUFjLGNBQWEsR0FBSTtZQUNoRSxJQUFJLENBQUNJLElBQUksQ0FBQ1IsSUFBSSxHQUFHTztZQUNqQkEsUUFBUVIsSUFBSSxHQUFHLElBQUksQ0FBQ1MsSUFBSTtZQUN4QixJQUFJLENBQUNBLElBQUksR0FBR0Q7UUFDaEIsT0FDSztZQUNELElBQUlJLGNBQWMsSUFBSSxDQUFDSCxJQUFJO1lBQzNCLE1BQU9HLFlBQVlaLElBQUksS0FBS1UsYUFDeEIsSUFBSSxDQUFDTixNQUFNLENBQUNRLFlBQVlaLElBQUksQ0FBQ0QsS0FBSyxFQUFFUyxRQUFRVCxLQUFLLE1BQzVDLEtBQUksQ0FBQ00sY0FBYyxLQUFLLFFBQVEsY0FBYyxjQUFhLEVBQUk7Z0JBQ3BFTyxjQUFjQSxZQUFZWixJQUFJO1lBQ2xDO1lBQ0FRLFFBQVFSLElBQUksR0FBR1ksWUFBWVosSUFBSTtZQUMvQixJQUFJWSxZQUFZWixJQUFJLEtBQUtVLFdBQVc7Z0JBQ2hDRixRQUFRUixJQUFJLENBQUNDLElBQUksR0FBR087WUFDeEIsT0FDSztnQkFDRCxJQUFJLENBQUNHLElBQUksR0FBR0g7WUFDaEI7WUFDQUksWUFBWVosSUFBSSxHQUFHUTtZQUNuQkEsUUFBUVAsSUFBSSxHQUFHVztRQUNuQjtRQUNBLElBQUksSUFBSSxDQUFDTixJQUFJLEdBQUcsSUFBSSxDQUFDSCxPQUFPLEVBQUU7WUFDMUIsSUFBSSxDQUFDVSxNQUFNO1FBQ2Y7SUFDSjtJQUNBQSxTQUFTO1FBQ0wsTUFBTUMsT0FBTyxJQUFJLENBQUNILElBQUk7UUFDdEIsSUFBSUcsS0FBS2IsSUFBSSxLQUFLUyxXQUFXO1lBQ3pCSSxLQUFLYixJQUFJLENBQUNELElBQUksR0FBR2MsS0FBS2QsSUFBSTtRQUM5QixPQUNLO1lBQ0QsSUFBSSxDQUFDUyxJQUFJLEdBQUdLLEtBQUtkLElBQUk7UUFDekI7UUFDQSxJQUFJYyxLQUFLZCxJQUFJLEtBQUtVLFdBQVc7WUFDekJJLEtBQUtkLElBQUksQ0FBQ0MsSUFBSSxHQUFHYSxLQUFLYixJQUFJO1FBQzlCLE9BQ0s7WUFDRCxJQUFJLENBQUNVLElBQUksR0FBR0csS0FBS2IsSUFBSTtRQUN6QjtRQUNBLElBQUksQ0FBQ0ssSUFBSTtJQUNiO0lBQ0FTLFVBQVU7UUFDTixPQUFPQyxNQUFNQyxJQUFJLENBQUMsSUFBSTtJQUMxQjtJQUNBLENBQUMsQ0FBQ0MsT0FBT0MsUUFBUSxDQUFDLEdBQUc7UUFDakIsSUFBSUwsT0FBTyxJQUFJLENBQUNMLElBQUk7UUFDcEIsTUFBT0ssS0FBTTtZQUNULE1BQU1BLEtBQUtmLEtBQUs7WUFDaEJlLE9BQU9BLEtBQUtkLElBQUk7UUFDcEI7SUFDSjtBQUNKO0FBQ0FOLGlCQUFpQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvZXZlbnRMaXN0LmpzPzY2YmYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV2ZW50TGlzdCA9IHZvaWQgMDtcbmNsYXNzIE5vZGUge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50LCBuZXh0LCBwcmV2KSB7XG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV4dDtcbiAgICAgICAgdGhpcy5wcmV2ID0gcHJldjtcbiAgICB9XG59XG5jbGFzcyBFdmVudExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50VHlwZSwgbWF4U2l6ZSwgc29ydEZuLCBvcmRlckRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLmV2ZW50VHlwZSA9IGV2ZW50VHlwZTtcbiAgICAgICAgdGhpcy5tYXhTaXplID0gbWF4U2l6ZTtcbiAgICAgICAgdGhpcy5zb3J0Rm4gPSBzb3J0Rm47XG4gICAgICAgIHRoaXMub3JkZXJEaXJlY3Rpb24gPSBvcmRlckRpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgaW5zZXJ0KGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgICAgICBjb25zdCBuZXdOb2RlID0gbmV3IE5vZGUoZXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5oZWFkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG5ld05vZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc29ydEZuKHRoaXMuaGVhZC5ldmVudCwgbmV3Tm9kZS5ldmVudCkgPT09XG4gICAgICAgICAgICAodGhpcy5vcmRlckRpcmVjdGlvbiA9PT0gJ2FzYycgPyAnbGVzcyB0aGFuJyA6ICdncmVhdGVyIHRoYW4nKSkge1xuICAgICAgICAgICAgdGhpcy5oZWFkLnByZXYgPSBuZXdOb2RlO1xuICAgICAgICAgICAgbmV3Tm9kZS5uZXh0ID0gdGhpcy5oZWFkO1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gbmV3Tm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50Tm9kZSA9IHRoaXMuaGVhZDtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50Tm9kZS5uZXh0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnNvcnRGbihjdXJyZW50Tm9kZS5uZXh0LmV2ZW50LCBuZXdOb2RlLmV2ZW50KSAhPT1cbiAgICAgICAgICAgICAgICAgICAgKHRoaXMub3JkZXJEaXJlY3Rpb24gPT09ICdhc2MnID8gJ2xlc3MgdGhhbicgOiAnZ3JlYXRlciB0aGFuJykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLm5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdOb2RlLm5leHQgPSBjdXJyZW50Tm9kZS5uZXh0O1xuICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlLm5leHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5ld05vZGUubmV4dC5wcmV2ID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudGFpbCA9IG5ld05vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50Tm9kZS5uZXh0ID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIG5ld05vZGUucHJldiA9IGN1cnJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNpemUgPiB0aGlzLm1heFNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGV0YWNoKCkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy50YWlsO1xuICAgICAgICBpZiAobm9kZS5wcmV2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vZGUucHJldi5uZXh0ID0gbm9kZS5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gbm9kZS5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5leHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbm9kZS5uZXh0LnByZXYgPSBub2RlLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhaWwgPSBub2RlLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaXplLS07XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMpO1xuICAgIH1cbiAgICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIGxldCBub2RlID0gdGhpcy5oZWFkO1xuICAgICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICAgICAgeWllbGQgbm9kZS5ldmVudDtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLm5leHQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLkV2ZW50TGlzdCA9IEV2ZW50TGlzdDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkV2ZW50TGlzdCIsIk5vZGUiLCJjb25zdHJ1Y3RvciIsImV2ZW50IiwibmV4dCIsInByZXYiLCJldmVudFR5cGUiLCJtYXhTaXplIiwic29ydEZuIiwib3JkZXJEaXJlY3Rpb24iLCJzaXplIiwiaW5zZXJ0IiwibmV3Tm9kZSIsImhlYWQiLCJ1bmRlZmluZWQiLCJ0YWlsIiwiY3VycmVudE5vZGUiLCJkZXRhY2giLCJub2RlIiwidG9BcnJheSIsIkFycmF5IiwiZnJvbSIsIlN5bWJvbCIsIml0ZXJhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/eventList.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/eventSubscriber.js":
/*!********************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/eventSubscriber.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.EventSubscriber = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/types.js\");\nconst txEventCache_1 = __webpack_require__(/*! ./txEventCache */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/txEventCache.js\");\nconst eventList_1 = __webpack_require__(/*! ./eventList */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/eventList.js\");\nconst pollingLogProvider_1 = __webpack_require__(/*! ./pollingLogProvider */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/pollingLogProvider.js\");\nconst fetchLogs_1 = __webpack_require__(/*! ./fetchLogs */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/fetchLogs.js\");\nconst webSocketLogProvider_1 = __webpack_require__(/*! ./webSocketLogProvider */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/webSocketLogProvider.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nconst sort_1 = __webpack_require__(/*! ./sort */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/sort.js\");\nconst parse_1 = __webpack_require__(/*! ./parse */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/parse.js\");\nclass EventSubscriber {\n    constructor(connection, program, options = types_1.DefaultEventSubscriptionOptions){\n        var _a;\n        this.connection = connection;\n        this.program = program;\n        this.options = options;\n        this.awaitTxPromises = new Map();\n        this.awaitTxResolver = new Map();\n        this.options = Object.assign({}, types_1.DefaultEventSubscriptionOptions, options);\n        this.address = (_a = this.options.address) !== null && _a !== void 0 ? _a : program.programId;\n        this.txEventCache = new txEventCache_1.TxEventCache(this.options.maxTx);\n        this.eventListMap = new Map();\n        for (const eventType of this.options.eventTypes){\n            this.eventListMap.set(eventType, new eventList_1.EventList(eventType, this.options.maxEventsPerType, (0, sort_1.getSortFn)(this.options.orderBy, this.options.orderDir, eventType), this.options.orderDir));\n        }\n        this.eventEmitter = new events_1.EventEmitter();\n        if (this.options.logProviderConfig.type === \"websocket\") {\n            this.logProvider = new webSocketLogProvider_1.WebSocketLogProvider(this.connection, this.address, this.options.commitment);\n        } else {\n            this.logProvider = new pollingLogProvider_1.PollingLogProvider(this.connection, this.address, options.commitment, this.options.logProviderConfig.frequency, this.options.logProviderConfig.batchSize);\n        }\n    }\n    async subscribe() {\n        try {\n            if (this.logProvider.isSubscribed()) {\n                return true;\n            }\n            this.logProvider.subscribe((txSig, slot, logs, mostRecentBlockTime)=>{\n                this.handleTxLogs(txSig, slot, logs, mostRecentBlockTime);\n            }, true);\n            return true;\n        } catch (e) {\n            console.error(\"Error fetching previous txs in event subscriber\");\n            console.error(e);\n            return false;\n        }\n    }\n    handleTxLogs(txSig, slot, logs, mostRecentBlockTime) {\n        if (this.txEventCache.has(txSig)) {\n            return;\n        }\n        const wrappedEvents = this.parseEventsFromLogs(txSig, slot, logs);\n        for (const wrappedEvent of wrappedEvents){\n            this.eventListMap.get(wrappedEvent.eventType).insert(wrappedEvent);\n        }\n        // dont emit event till we've added all the events to the eventListMap\n        for (const wrappedEvent of wrappedEvents){\n            this.eventEmitter.emit(\"newEvent\", wrappedEvent);\n        }\n        if (this.awaitTxPromises.has(txSig)) {\n            this.awaitTxPromises.delete(txSig);\n            this.awaitTxResolver.get(txSig)();\n            this.awaitTxResolver.delete(txSig);\n        }\n        if (!this.lastSeenSlot || slot > this.lastSeenSlot) {\n            this.lastSeenTxSig = txSig;\n        }\n        if (this.lastSeenBlockTime === undefined || mostRecentBlockTime > this.lastSeenBlockTime) {\n            this.lastSeenBlockTime = mostRecentBlockTime;\n        }\n        this.txEventCache.add(txSig, wrappedEvents);\n    }\n    async fetchPreviousTx(fetchMax) {\n        if (!this.options.untilTx && !fetchMax) {\n            return;\n        }\n        let txFetched = 0;\n        let beforeTx = undefined;\n        const untilTx = this.options.untilTx;\n        while(txFetched < this.options.maxTx){\n            const response = await (0, fetchLogs_1.fetchLogs)(this.connection, this.address, this.options.commitment === \"finalized\" ? \"finalized\" : \"confirmed\", beforeTx, untilTx);\n            if (response === undefined) {\n                break;\n            }\n            txFetched += response.transactionLogs.length;\n            beforeTx = response.earliestTx;\n            for (const { txSig, slot, logs } of response.transactionLogs){\n                this.handleTxLogs(txSig, slot, logs, response.mostRecentBlockTime);\n            }\n        }\n    }\n    async unsubscribe() {\n        return await this.logProvider.unsubscribe();\n    }\n    parseEventsFromLogs(txSig, slot, logs) {\n        const records = [];\n        // @ts-ignore\n        const events = (0, parse_1.parseLogs)(this.program, slot, logs);\n        let runningEventIndex = 0;\n        for (const event of events){\n            // @ts-ignore\n            const expectRecordType = this.eventListMap.has(event.name);\n            if (expectRecordType) {\n                event.data.txSig = txSig;\n                event.data.slot = slot;\n                event.data.eventType = event.name;\n                event.data.txSigIndex = runningEventIndex;\n                records.push(event.data);\n            }\n            runningEventIndex++;\n        }\n        return records;\n    }\n    awaitTx(txSig) {\n        if (this.awaitTxPromises.has(txSig)) {\n            return this.awaitTxPromises.get(txSig);\n        }\n        if (this.txEventCache.has(txSig)) {\n            return Promise.resolve();\n        }\n        const promise = new Promise((resolve)=>{\n            this.awaitTxResolver.set(txSig, resolve);\n        });\n        this.awaitTxPromises.set(txSig, promise);\n        return promise;\n    }\n    getEventList(eventType) {\n        return this.eventListMap.get(eventType);\n    }\n    /**\n     * This requires the EventList be cast to an array, which requires reallocation of memory.\n     * Would bias to using getEventList over getEvents\n     *\n     * @param eventType\n     */ getEventsArray(eventType) {\n        return this.eventListMap.get(eventType).toArray();\n    }\n    getEventsByTx(txSig) {\n        return this.txEventCache.get(txSig);\n    }\n}\nexports.EventSubscriber = EventSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvZXZlbnRTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBRyxLQUFLO0FBQy9CLE1BQU1HLFVBQVVDLG1CQUFPQSxDQUFDLHlFQUFTO0FBQ2pDLE1BQU1DLGlCQUFpQkQsbUJBQU9BLENBQUMsdUZBQWdCO0FBQy9DLE1BQU1FLGNBQWNGLG1CQUFPQSxDQUFDLGlGQUFhO0FBQ3pDLE1BQU1HLHVCQUF1QkgsbUJBQU9BLENBQUMsbUdBQXNCO0FBQzNELE1BQU1JLGNBQWNKLG1CQUFPQSxDQUFDLGlGQUFhO0FBQ3pDLE1BQU1LLHlCQUF5QkwsbUJBQU9BLENBQUMsdUdBQXdCO0FBQy9ELE1BQU1NLFdBQVdOLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1PLFNBQVNQLG1CQUFPQSxDQUFDLHVFQUFRO0FBQy9CLE1BQU1RLFVBQVVSLG1CQUFPQSxDQUFDLHlFQUFTO0FBQ2pDLE1BQU1GO0lBQ0ZXLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxVQUFVYixRQUFRYywrQkFBK0IsQ0FBRTtRQUNoRixJQUFJQztRQUNKLElBQUksQ0FBQ0osVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNHLGVBQWUsR0FBRyxJQUFJQztRQUMzQixJQUFJLENBQUNDLGVBQWUsR0FBRyxJQUFJRDtRQUMzQixJQUFJLENBQUNKLE9BQU8sR0FBR2xCLE9BQU93QixNQUFNLENBQUMsQ0FBQyxHQUFHbkIsUUFBUWMsK0JBQStCLEVBQUVEO1FBQzFFLElBQUksQ0FBQ08sT0FBTyxHQUFHLENBQUNMLEtBQUssSUFBSSxDQUFDRixPQUFPLENBQUNPLE9BQU8sTUFBTSxRQUFRTCxPQUFPLEtBQUssSUFBSUEs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QUFTLEVBQUU7UUFDcEIsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQ2lDLEdBQUcsQ0FBQ2hDO0lBQ2pDO0lBQ0E7Ozs7O0tBS0MsR0FDRG1FLGVBQWVuRSxTQUFTLEVBQUU7UUFDdEIsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQ2lDLEdBQUcsQ0FBQ2hDLFdBQVdvRSxPQUFPO0lBQ25EO0lBQ0FDLGNBQWNqRCxLQUFLLEVBQUU7UUFDakIsT0FBTyxJQUFJLENBQUN4QixZQUFZLENBQUNvQyxHQUFHLENBQUNaO0lBQ2pDO0FBQ0o7QUFDQWpELHVCQUF1QixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvZXZlbnRTdWJzY3JpYmVyLmpzPzM5YjAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkV2ZW50U3Vic2NyaWJlciA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi90eXBlc1wiKTtcbmNvbnN0IHR4RXZlbnRDYWNoZV8xID0gcmVxdWlyZShcIi4vdHhFdmVudENhY2hlXCIpO1xuY29uc3QgZXZlbnRMaXN0XzEgPSByZXF1aXJlKFwiLi9ldmVudExpc3RcIik7XG5jb25zdCBwb2xsaW5nTG9nUHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL3BvbGxpbmdMb2dQcm92aWRlclwiKTtcbmNvbnN0IGZldGNoTG9nc18xID0gcmVxdWlyZShcIi4vZmV0Y2hMb2dzXCIpO1xuY29uc3Qgd2ViU29ja2V0TG9nUHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL3dlYlNvY2tldExvZ1Byb3ZpZGVyXCIpO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xuY29uc3Qgc29ydF8xID0gcmVxdWlyZShcIi4vc29ydFwiKTtcbmNvbnN0IHBhcnNlXzEgPSByZXF1aXJlKFwiLi9wYXJzZVwiKTtcbmNsYXNzIEV2ZW50U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbiwgcHJvZ3JhbSwgb3B0aW9ucyA9IHR5cGVzXzEuRGVmYXVsdEV2ZW50U3Vic2NyaXB0aW9uT3B0aW9ucykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuYXdhaXRUeFByb21pc2VzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmF3YWl0VHhSZXNvbHZlciA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdHlwZXNfMS5EZWZhdWx0RXZlbnRTdWJzY3JpcHRpb25PcHRpb25zLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5hZGRyZXNzID0gKF9hID0gdGhpcy5vcHRpb25zLmFkZHJlc3MpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHByb2dyYW0ucHJvZ3JhbUlkO1xuICAgICAgICB0aGlzLnR4RXZlbnRDYWNoZSA9IG5ldyB0eEV2ZW50Q2FjaGVfMS5UeEV2ZW50Q2FjaGUodGhpcy5vcHRpb25zLm1heFR4KTtcbiAgICAgICAgdGhpcy5ldmVudExpc3RNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnRUeXBlIG9mIHRoaXMub3B0aW9ucy5ldmVudFR5cGVzKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50TGlzdE1hcC5zZXQoZXZlbnRUeXBlLCBuZXcgZXZlbnRMaXN0XzEuRXZlbnRMaXN0KGV2ZW50VHlwZSwgdGhpcy5vcHRpb25zLm1heEV2ZW50c1BlclR5cGUsICgwLCBzb3J0XzEuZ2V0U29ydEZuKSh0aGlzLm9wdGlvbnMub3JkZXJCeSwgdGhpcy5vcHRpb25zLm9yZGVyRGlyLCBldmVudFR5cGUpLCB0aGlzLm9wdGlvbnMub3JkZXJEaXIpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlciA9IG5ldyBldmVudHNfMS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2dQcm92aWRlckNvbmZpZy50eXBlID09PSAnd2Vic29ja2V0Jykge1xuICAgICAgICAgICAgdGhpcy5sb2dQcm92aWRlciA9IG5ldyB3ZWJTb2NrZXRMb2dQcm92aWRlcl8xLldlYlNvY2tldExvZ1Byb3ZpZGVyKHRoaXMuY29ubmVjdGlvbiwgdGhpcy5hZGRyZXNzLCB0aGlzLm9wdGlvbnMuY29tbWl0bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvZ1Byb3ZpZGVyID0gbmV3IHBvbGxpbmdMb2dQcm92aWRlcl8xLlBvbGxpbmdMb2dQcm92aWRlcih0aGlzLmNvbm5lY3Rpb24sIHRoaXMuYWRkcmVzcywgb3B0aW9ucy5jb21taXRtZW50LCB0aGlzLm9wdGlvbnMubG9nUHJvdmlkZXJDb25maWcuZnJlcXVlbmN5LCB0aGlzLm9wdGlvbnMubG9nUHJvdmlkZXJDb25maWcuYmF0Y2hTaXplKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzdWJzY3JpYmUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sb2dQcm92aWRlci5pc1N1YnNjcmliZWQoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2dQcm92aWRlci5zdWJzY3JpYmUoKHR4U2lnLCBzbG90LCBsb2dzLCBtb3N0UmVjZW50QmxvY2tUaW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUeExvZ3ModHhTaWcsIHNsb3QsIGxvZ3MsIG1vc3RSZWNlbnRCbG9ja1RpbWUpO1xuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcHJldmlvdXMgdHhzIGluIGV2ZW50IHN1YnNjcmliZXInKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlVHhMb2dzKHR4U2lnLCBzbG90LCBsb2dzLCBtb3N0UmVjZW50QmxvY2tUaW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnR4RXZlbnRDYWNoZS5oYXModHhTaWcpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEV2ZW50cyA9IHRoaXMucGFyc2VFdmVudHNGcm9tTG9ncyh0eFNpZywgc2xvdCwgbG9ncyk7XG4gICAgICAgIGZvciAoY29uc3Qgd3JhcHBlZEV2ZW50IG9mIHdyYXBwZWRFdmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0TWFwLmdldCh3cmFwcGVkRXZlbnQuZXZlbnRUeXBlKS5pbnNlcnQod3JhcHBlZEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkb250IGVtaXQgZXZlbnQgdGlsbCB3ZSd2ZSBhZGRlZCBhbGwgdGhlIGV2ZW50cyB0byB0aGUgZXZlbnRMaXN0TWFwXG4gICAgICAgIGZvciAoY29uc3Qgd3JhcHBlZEV2ZW50IG9mIHdyYXBwZWRFdmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQoJ25ld0V2ZW50Jywgd3JhcHBlZEV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hd2FpdFR4UHJvbWlzZXMuaGFzKHR4U2lnKSkge1xuICAgICAgICAgICAgdGhpcy5hd2FpdFR4UHJvbWlzZXMuZGVsZXRlKHR4U2lnKTtcbiAgICAgICAgICAgIHRoaXMuYXdhaXRUeFJlc29sdmVyLmdldCh0eFNpZykoKTtcbiAgICAgICAgICAgIHRoaXMuYXdhaXRUeFJlc29sdmVyLmRlbGV0ZSh0eFNpZyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmxhc3RTZWVuU2xvdCB8fCBzbG90ID4gdGhpcy5sYXN0U2VlblNsb3QpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFNlZW5UeFNpZyA9IHR4U2lnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxhc3RTZWVuQmxvY2tUaW1lID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIG1vc3RSZWNlbnRCbG9ja1RpbWUgPiB0aGlzLmxhc3RTZWVuQmxvY2tUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTZWVuQmxvY2tUaW1lID0gbW9zdFJlY2VudEJsb2NrVGltZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnR4RXZlbnRDYWNoZS5hZGQodHhTaWcsIHdyYXBwZWRFdmVudHMpO1xuICAgIH1cbiAgICBhc3luYyBmZXRjaFByZXZpb3VzVHgoZmV0Y2hNYXgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMudW50aWxUeCAmJiAhZmV0Y2hNYXgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdHhGZXRjaGVkID0gMDtcbiAgICAgICAgbGV0IGJlZm9yZVR4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCB1bnRpbFR4ID0gdGhpcy5vcHRpb25zLnVudGlsVHg7XG4gICAgICAgIHdoaWxlICh0eEZldGNoZWQgPCB0aGlzLm9wdGlvbnMubWF4VHgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIGZldGNoTG9nc18xLmZldGNoTG9ncykodGhpcy5jb25uZWN0aW9uLCB0aGlzLmFkZHJlc3MsIHRoaXMub3B0aW9ucy5jb21taXRtZW50ID09PSAnZmluYWxpemVkJyA/ICdmaW5hbGl6ZWQnIDogJ2NvbmZpcm1lZCcsIGJlZm9yZVR4LCB1bnRpbFR4KTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eEZldGNoZWQgKz0gcmVzcG9uc2UudHJhbnNhY3Rpb25Mb2dzLmxlbmd0aDtcbiAgICAgICAgICAgIGJlZm9yZVR4ID0gcmVzcG9uc2UuZWFybGllc3RUeDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgeyB0eFNpZywgc2xvdCwgbG9ncyB9IG9mIHJlc3BvbnNlLnRyYW5zYWN0aW9uTG9ncykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVHhMb2dzKHR4U2lnLCBzbG90LCBsb2dzLCByZXNwb25zZS5tb3N0UmVjZW50QmxvY2tUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubG9nUHJvdmlkZXIudW5zdWJzY3JpYmUoKTtcbiAgICB9XG4gICAgcGFyc2VFdmVudHNGcm9tTG9ncyh0eFNpZywgc2xvdCwgbG9ncykge1xuICAgICAgICBjb25zdCByZWNvcmRzID0gW107XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgZXZlbnRzID0gKDAsIHBhcnNlXzEucGFyc2VMb2dzKSh0aGlzLnByb2dyYW0sIHNsb3QsIGxvZ3MpO1xuICAgICAgICBsZXQgcnVubmluZ0V2ZW50SW5kZXggPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGV2ZW50cykge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgZXhwZWN0UmVjb3JkVHlwZSA9IHRoaXMuZXZlbnRMaXN0TWFwLmhhcyhldmVudC5uYW1lKTtcbiAgICAgICAgICAgIGlmIChleHBlY3RSZWNvcmRUeXBlKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS50eFNpZyA9IHR4U2lnO1xuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuc2xvdCA9IHNsb3Q7XG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5ldmVudFR5cGUgPSBldmVudC5uYW1lO1xuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudHhTaWdJbmRleCA9IHJ1bm5pbmdFdmVudEluZGV4O1xuICAgICAgICAgICAgICAgIHJlY29yZHMucHVzaChldmVudC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1bm5pbmdFdmVudEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlY29yZHM7XG4gICAgfVxuICAgIGF3YWl0VHgodHhTaWcpIHtcbiAgICAgICAgaWYgKHRoaXMuYXdhaXRUeFByb21pc2VzLmhhcyh0eFNpZykpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF3YWl0VHhQcm9taXNlcy5nZXQodHhTaWcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnR4RXZlbnRDYWNoZS5oYXModHhTaWcpKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmF3YWl0VHhSZXNvbHZlci5zZXQodHhTaWcsIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hd2FpdFR4UHJvbWlzZXMuc2V0KHR4U2lnLCBwcm9taXNlKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIGdldEV2ZW50TGlzdChldmVudFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRMaXN0TWFwLmdldChldmVudFR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIHJlcXVpcmVzIHRoZSBFdmVudExpc3QgYmUgY2FzdCB0byBhbiBhcnJheSwgd2hpY2ggcmVxdWlyZXMgcmVhbGxvY2F0aW9uIG9mIG1lbW9yeS5cbiAgICAgKiBXb3VsZCBiaWFzIHRvIHVzaW5nIGdldEV2ZW50TGlzdCBvdmVyIGdldEV2ZW50c1xuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZVxuICAgICAqL1xuICAgIGdldEV2ZW50c0FycmF5KGV2ZW50VHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudExpc3RNYXAuZ2V0KGV2ZW50VHlwZSkudG9BcnJheSgpO1xuICAgIH1cbiAgICBnZXRFdmVudHNCeVR4KHR4U2lnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR4RXZlbnRDYWNoZS5nZXQodHhTaWcpO1xuICAgIH1cbn1cbmV4cG9ydHMuRXZlbnRTdWJzY3JpYmVyID0gRXZlbnRTdWJzY3JpYmVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRXZlbnRTdWJzY3JpYmVyIiwidHlwZXNfMSIsInJlcXVpcmUiLCJ0eEV2ZW50Q2FjaGVfMSIsImV2ZW50TGlzdF8xIiwicG9sbGluZ0xvZ1Byb3ZpZGVyXzEiLCJmZXRjaExvZ3NfMSIsIndlYlNvY2tldExvZ1Byb3ZpZGVyXzEiLCJldmVudHNfMSIsInNvcnRfMSIsInBhcnNlXzEiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJwcm9ncmFtIiwib3B0aW9ucyIsIkRlZmF1bHRFdmVudFN1YnNjcmlwdGlvbk9wdGlvbnMiLCJfYSIsImF3YWl0VHhQcm9taXNlcyIsIk1hcCIsImF3YWl0VHhSZXNvbHZlciIsImFzc2lnbiIsImFkZHJlc3MiLCJwcm9ncmFtSWQiLCJ0eEV2ZW50Q2FjaGUiLCJUeEV2ZW50Q2FjaGUiLCJtYXhUeCIsImV2ZW50TGlzdE1hcCIsImV2ZW50VHlwZSIsImV2ZW50VHlwZXMiLCJzZXQiLCJFdmVudExpc3QiLCJtYXhFdmVudHNQZXJUeXBlIiwiZ2V0U29ydEZuIiwib3JkZXJCeSIsIm9yZGVyRGlyIiwiZXZlbnRFbWl0dGVyIiwiRXZlbnRFbWl0dGVyIiwibG9nUHJvdmlkZXJDb25maWciLCJ0eXBlIiwibG9nUHJvdmlkZXIiLCJXZWJTb2NrZXRMb2dQcm92aWRlciIsImNvbW1pdG1lbnQiLCJQb2xsaW5nTG9nUHJvdmlkZXIiLCJmcmVxdWVuY3kiLCJiYXRjaFNpemUiLCJzdWJzY3JpYmUiLCJpc1N1YnNjcmliZWQiLCJ0eFNpZyIsInNsb3QiLCJsb2dzIiwibW9zdFJlY2VudEJsb2NrVGltZSIsImhhbmRsZVR4TG9ncyIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJoYXMiLCJ3cmFwcGVkRXZlbnRzIiwicGFyc2VFdmVudHNGcm9tTG9ncyIsIndyYXBwZWRFdmVudCIsImdldCIsImluc2VydCIsImVtaXQiLCJkZWxldGUiLCJsYXN0U2VlblNsb3QiLCJsYXN0U2VlblR4U2lnIiwibGFzdFNlZW5CbG9ja1RpbWUiLCJ1bmRlZmluZWQiLCJhZGQiLCJmZXRjaFByZXZpb3VzVHgiLCJmZXRjaE1heCIsInVudGlsVHgiLCJ0eEZldGNoZWQiLCJiZWZvcmVUeCIsInJlc3BvbnNlIiwiZmV0Y2hMb2dzIiwidHJhbnNhY3Rpb25Mb2dzIiwibGVuZ3RoIiwiZWFybGllc3RUeCIsInVuc3Vic2NyaWJlIiwicmVjb3JkcyIsImV2ZW50cyIsInBhcnNlTG9ncyIsInJ1bm5pbmdFdmVudEluZGV4IiwiZXZlbnQiLCJleHBlY3RSZWNvcmRUeXBlIiwibmFtZSIsImRhdGEiLCJ0eFNpZ0luZGV4IiwicHVzaCIsImF3YWl0VHgiLCJQcm9taXNlIiwicmVzb2x2ZSIsInByb21pc2UiLCJnZXRFdmVudExpc3QiLCJnZXRFdmVudHNBcnJheSIsInRvQXJyYXkiLCJnZXRFdmVudHNCeVR4Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/eventSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/fetchLogs.js":
/*!**************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/fetchLogs.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.LogParser = exports.fetchTransactionLogs = exports.fetchLogs = void 0;\nconst promiseTimeout_1 = __webpack_require__(/*! ../util/promiseTimeout */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/util/promiseTimeout.js\");\nfunction mapTransactionResponseToLog(transaction) {\n    return {\n        txSig: transaction.transaction.signatures[0],\n        slot: transaction.slot,\n        logs: transaction.meta.logMessages\n    };\n}\nasync function fetchLogs(connection, address, finality, beforeTx, untilTx, limit, batchSize = 25) {\n    const signatures = await connection.getSignaturesForAddress(address, {\n        before: beforeTx,\n        until: untilTx,\n        limit\n    }, finality);\n    const sortedSignatures = signatures.sort((a, b)=>a.slot === b.slot ? 0 : a.slot < b.slot ? -1 : 1);\n    const filteredSignatures = sortedSignatures.filter((signature)=>!signature.err);\n    if (filteredSignatures.length === 0) {\n        return undefined;\n    }\n    const chunkedSignatures = chunk(filteredSignatures, batchSize);\n    const transactionLogs = (await Promise.all(chunkedSignatures.map(async (chunk)=>{\n        return await fetchTransactionLogs(connection, chunk.map((confirmedSignature)=>confirmedSignature.signature), finality);\n    }))).flat();\n    const earliest = filteredSignatures[0];\n    const mostRecent = filteredSignatures[filteredSignatures.length - 1];\n    return {\n        transactionLogs: transactionLogs,\n        earliestTx: earliest.signature,\n        mostRecentTx: mostRecent.signature,\n        earliestSlot: earliest.slot,\n        mostRecentSlot: mostRecent.slot,\n        mostRecentBlockTime: mostRecent.blockTime\n    };\n}\nexports.fetchLogs = fetchLogs;\nasync function fetchTransactionLogs(connection, signatures, finality) {\n    const requests = new Array();\n    for (const signature of signatures){\n        const args = [\n            signature,\n            {\n                commitment: finality,\n                maxSupportedTransactionVersion: 0\n            }\n        ];\n        requests.push({\n            methodName: \"getTransaction\",\n            args\n        });\n    }\n    const rpcResponses = await (0, promiseTimeout_1.promiseTimeout)(// @ts-ignore\n    connection._rpcBatchRequest(requests), 10 * 1000 // 10 second timeout\n    );\n    if (rpcResponses === null) {\n        return Promise.reject(\"RPC request timed out fetching transactions\");\n    }\n    const logs = new Array();\n    for(const i in rpcResponses){\n        const rpcResponse = rpcResponses[i];\n        if (rpcResponse.result) {\n            logs.push(mapTransactionResponseToLog(rpcResponse.result));\n        }\n    }\n    return logs;\n}\nexports.fetchTransactionLogs = fetchTransactionLogs;\nfunction chunk(array, size) {\n    return new Array(Math.ceil(array.length / size)).fill(null).map((_, index)=>index * size).map((begin)=>array.slice(begin, begin + size));\n}\nclass LogParser {\n    constructor(program){\n        this.program = program;\n    }\n    parseEventsFromTransaction(transaction) {\n        const transactionLogObject = mapTransactionResponseToLog(transaction);\n        return this.parseEventsFromLogs(transactionLogObject);\n    }\n    parseEventsFromLogs(event) {\n        const records = [];\n        // @ts-ignore\n        const eventGenerator = this.program._events._eventParser.parseLogs(event.logs, false);\n        let runningEventIndex = 0;\n        for (const eventLog of eventGenerator){\n            eventLog.data.txSig = event.txSig;\n            eventLog.data.slot = event.slot;\n            eventLog.data.eventType = eventLog.name;\n            eventLog.data.txSigIndex = runningEventIndex;\n            records.push(eventLog.data);\n            runningEventIndex++;\n        }\n        return records;\n    }\n}\nexports.LogParser = LogParser;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvZmV0Y2hMb2dzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQkFBaUIsR0FBR0EsNEJBQTRCLEdBQUdBLGlCQUFpQixHQUFHLEtBQUs7QUFDNUUsTUFBTUssbUJBQW1CQyxtQkFBT0EsQ0FBQywrRkFBd0I7QUFDekQsU0FBU0MsNEJBQTRCQyxXQUFXO0lBQzVDLE9BQU87UUFDSEMsT0FBT0QsWUFBWUEsV0FBVyxDQUFDRSxVQUFVLENBQUMsRUFBRTtRQUM1Q0MsTUFBTUgsWUFBWUcsSUFBSTtRQUN0QkMsTUFBTUosWUFBWUssSUFBSSxDQUFDQyxXQUFXO0lBQ3RDO0FBQ0o7QUFDQSxlQUFlVixVQUFVVyxVQUFVLEVBQUVDLE9BQU8sRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sRUFBRUMsS0FBSyxFQUFFQyxZQUFZLEVBQUU7SUFDNUYsTUFBTVgsYUFBYSxNQUFNSyxXQUFXTyx1QkFBdUIsQ0FBQ04sU0FBUztRQUNqRU8sUUFBUUw7UUFDUk0sT0FBT0w7UUFDUEM7SUFDSixHQUFHSDtJQUNILE1BQU1RLG1CQUFtQmYsV0FBV2dCLElBQUksQ0FBQyxDQUFDQyxHQUFHQyxJQUFNRCxFQUFFaEIsSUFBSSxLQUFLaUIsRUFBRWpCLElBQUksR0FBRyxJQUFJZ0IsRUFBRWhCLElBQUksR0FBR2lCLEVBQUVqQixJQUFJLEdBQUcsQ0FBQyxJQUFJO0lBQ2xHLE1BQU1rQixxQkFBcUJKLGlCQUFpQkssTUFBTSxDQUFDLENBQUNDLFlBQWMsQ0FBQ0EsVUFBVUMsR0FBRztJQUNoRixJQUFJSCxtQkFBbUJJLE1BQU0sS0FBSyxHQUFHO1FBQ2pDLE9BQU9DO0lBQ1g7SUFDQSxNQUFNQyxvQkFBb0JDLE1BQU1QLG9CQUFvQlI7SUFDcEQsTUFBTWdCLGtCQUFrQixDQUFDLE1BQU1DLFFBQVFDLEdBQUcsQ0FB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STtZQUMxQkY7UUFDSjtRQUNBLE9BQU9MO0lBQ1g7QUFDSjtBQUNBaEYsaUJBQWlCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2V2ZW50cy9mZXRjaExvZ3MuanM/YjI1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuTG9nUGFyc2VyID0gZXhwb3J0cy5mZXRjaFRyYW5zYWN0aW9uTG9ncyA9IGV4cG9ydHMuZmV0Y2hMb2dzID0gdm9pZCAwO1xuY29uc3QgcHJvbWlzZVRpbWVvdXRfMSA9IHJlcXVpcmUoXCIuLi91dGlsL3Byb21pc2VUaW1lb3V0XCIpO1xuZnVuY3Rpb24gbWFwVHJhbnNhY3Rpb25SZXNwb25zZVRvTG9nKHRyYW5zYWN0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHhTaWc6IHRyYW5zYWN0aW9uLnRyYW5zYWN0aW9uLnNpZ25hdHVyZXNbMF0sXG4gICAgICAgIHNsb3Q6IHRyYW5zYWN0aW9uLnNsb3QsXG4gICAgICAgIGxvZ3M6IHRyYW5zYWN0aW9uLm1ldGEubG9nTWVzc2FnZXMsXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZldGNoTG9ncyhjb25uZWN0aW9uLCBhZGRyZXNzLCBmaW5hbGl0eSwgYmVmb3JlVHgsIHVudGlsVHgsIGxpbWl0LCBiYXRjaFNpemUgPSAyNSkge1xuICAgIGNvbnN0IHNpZ25hdHVyZXMgPSBhd2FpdCBjb25uZWN0aW9uLmdldFNpZ25hdHVyZXNGb3JBZGRyZXNzKGFkZHJlc3MsIHtcbiAgICAgICAgYmVmb3JlOiBiZWZvcmVUeCxcbiAgICAgICAgdW50aWw6IHVudGlsVHgsXG4gICAgICAgIGxpbWl0LFxuICAgIH0sIGZpbmFsaXR5KTtcbiAgICBjb25zdCBzb3J0ZWRTaWduYXR1cmVzID0gc2lnbmF0dXJlcy5zb3J0KChhLCBiKSA9PiBhLnNsb3QgPT09IGIuc2xvdCA/IDAgOiBhLnNsb3QgPCBiLnNsb3QgPyAtMSA6IDEpO1xuICAgIGNvbnN0IGZpbHRlcmVkU2lnbmF0dXJlcyA9IHNvcnRlZFNpZ25hdHVyZXMuZmlsdGVyKChzaWduYXR1cmUpID0+ICFzaWduYXR1cmUuZXJyKTtcbiAgICBpZiAoZmlsdGVyZWRTaWduYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjaHVua2VkU2lnbmF0dXJlcyA9IGNodW5rKGZpbHRlcmVkU2lnbmF0dXJlcywgYmF0Y2hTaXplKTtcbiAgICBjb25zdCB0cmFuc2FjdGlvbkxvZ3MgPSAoYXdhaXQgUHJvbWlzZS5hbGwoY2h1bmtlZFNpZ25hdHVyZXMubWFwKGFzeW5jIChjaHVuaykgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgZmV0Y2hUcmFuc2FjdGlvbkxvZ3MoY29ubmVjdGlvbiwgY2h1bmsubWFwKChjb25maXJtZWRTaWduYXR1cmUpID0+IGNvbmZpcm1lZFNpZ25hdHVyZS5zaWduYXR1cmUpLCBmaW5hbGl0eSk7XG4gICAgfSkpKS5mbGF0KCk7XG4gICAgY29uc3QgZWFybGllc3QgPSBmaWx0ZXJlZFNpZ25hdHVyZXNbMF07XG4gICAgY29uc3QgbW9zdFJlY2VudCA9IGZpbHRlcmVkU2lnbmF0dXJlc1tmaWx0ZXJlZFNpZ25hdHVyZXMubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhbnNhY3Rpb25Mb2dzOiB0cmFuc2FjdGlvbkxvZ3MsXG4gICAgICAgIGVhcmxpZXN0VHg6IGVhcmxpZXN0LnNpZ25hdHVyZSxcbiAgICAgICAgbW9zdFJlY2VudFR4OiBtb3N0UmVjZW50LnNpZ25hdHVyZSxcbiAgICAgICAgZWFybGllc3RTbG90OiBlYXJsaWVzdC5zbG90LFxuICAgICAgICBtb3N0UmVjZW50U2xvdDogbW9zdFJlY2VudC5zbG90LFxuICAgICAgICBtb3N0UmVjZW50QmxvY2tUaW1lOiBtb3N0UmVjZW50LmJsb2NrVGltZSxcbiAgICB9O1xufVxuZXhwb3J0cy5mZXRjaExvZ3MgPSBmZXRjaExvZ3M7XG5hc3luYyBmdW5jdGlvbiBmZXRjaFRyYW5zYWN0aW9uTG9ncyhjb25uZWN0aW9uLCBzaWduYXR1cmVzLCBmaW5hbGl0eSkge1xuICAgIGNvbnN0IHJlcXVlc3RzID0gbmV3IEFycmF5KCk7XG4gICAgZm9yIChjb25zdCBzaWduYXR1cmUgb2Ygc2lnbmF0dXJlcykge1xuICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgICAgc2lnbmF0dXJlLFxuICAgICAgICAgICAgeyBjb21taXRtZW50OiBmaW5hbGl0eSwgbWF4U3VwcG9ydGVkVHJhbnNhY3Rpb25WZXJzaW9uOiAwIH0sXG4gICAgICAgIF07XG4gICAgICAgIHJlcXVlc3RzLnB1c2goe1xuICAgICAgICAgICAgbWV0aG9kTmFtZTogJ2dldFRyYW5zYWN0aW9uJyxcbiAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBycGNSZXNwb25zZXMgPSBhd2FpdCAoMCwgcHJvbWlzZVRpbWVvdXRfMS5wcm9taXNlVGltZW91dCkoXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGNvbm5lY3Rpb24uX3JwY0JhdGNoUmVxdWVzdChyZXF1ZXN0cyksIDEwICogMTAwMCAvLyAxMCBzZWNvbmQgdGltZW91dFxuICAgICk7XG4gICAgaWYgKHJwY1Jlc3BvbnNlcyA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ1JQQyByZXF1ZXN0IHRpbWVkIG91dCBmZXRjaGluZyB0cmFuc2FjdGlvbnMnKTtcbiAgICB9XG4gICAgY29uc3QgbG9ncyA9IG5ldyBBcnJheSgpO1xuICAgIGZvciAoY29uc3QgaSBpbiBycGNSZXNwb25zZXMpIHtcbiAgICAgICAgY29uc3QgcnBjUmVzcG9uc2UgPSBycGNSZXNwb25zZXNbaV07XG4gICAgICAgIGlmIChycGNSZXNwb25zZS5yZXN1bHQpIHtcbiAgICAgICAgICAgIGxvZ3MucHVzaChtYXBUcmFuc2FjdGlvblJlc3BvbnNlVG9Mb2cocnBjUmVzcG9uc2UucmVzdWx0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvZ3M7XG59XG5leHBvcnRzLmZldGNoVHJhbnNhY3Rpb25Mb2dzID0gZmV0Y2hUcmFuc2FjdGlvbkxvZ3M7XG5mdW5jdGlvbiBjaHVuayhhcnJheSwgc2l6ZSkge1xuICAgIHJldHVybiBuZXcgQXJyYXkoTWF0aC5jZWlsKGFycmF5Lmxlbmd0aCAvIHNpemUpKVxuICAgICAgICAuZmlsbChudWxsKVxuICAgICAgICAubWFwKChfLCBpbmRleCkgPT4gaW5kZXggKiBzaXplKVxuICAgICAgICAubWFwKChiZWdpbikgPT4gYXJyYXkuc2xpY2UoYmVnaW4sIGJlZ2luICsgc2l6ZSkpO1xufVxuY2xhc3MgTG9nUGFyc2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9ncmFtKSB7XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgfVxuICAgIHBhcnNlRXZlbnRzRnJvbVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uTG9nT2JqZWN0ID0gbWFwVHJhbnNhY3Rpb25SZXNwb25zZVRvTG9nKHRyYW5zYWN0aW9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFdmVudHNGcm9tTG9ncyh0cmFuc2FjdGlvbkxvZ09iamVjdCk7XG4gICAgfVxuICAgIHBhcnNlRXZlbnRzRnJvbUxvZ3MoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgcmVjb3JkcyA9IFtdO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGV2ZW50R2VuZXJhdG9yID0gdGhpcy5wcm9ncmFtLl9ldmVudHMuX2V2ZW50UGFyc2VyLnBhcnNlTG9ncyhldmVudC5sb2dzLCBmYWxzZSk7XG4gICAgICAgIGxldCBydW5uaW5nRXZlbnRJbmRleCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZXZlbnRMb2cgb2YgZXZlbnRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGV2ZW50TG9nLmRhdGEudHhTaWcgPSBldmVudC50eFNpZztcbiAgICAgICAgICAgIGV2ZW50TG9nLmRhdGEuc2xvdCA9IGV2ZW50LnNsb3Q7XG4gICAgICAgICAgICBldmVudExvZy5kYXRhLmV2ZW50VHlwZSA9IGV2ZW50TG9nLm5hbWU7XG4gICAgICAgICAgICBldmVudExvZy5kYXRhLnR4U2lnSW5kZXggPSBydW5uaW5nRXZlbnRJbmRleDtcbiAgICAgICAgICAgIHJlY29yZHMucHVzaChldmVudExvZy5kYXRhKTtcbiAgICAgICAgICAgIHJ1bm5pbmdFdmVudEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlY29yZHM7XG4gICAgfVxufVxuZXhwb3J0cy5Mb2dQYXJzZXIgPSBMb2dQYXJzZXI7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJMb2dQYXJzZXIiLCJmZXRjaFRyYW5zYWN0aW9uTG9ncyIsImZldGNoTG9ncyIsInByb21pc2VUaW1lb3V0XzEiLCJyZXF1aXJlIiwibWFwVHJhbnNhY3Rpb25SZXNwb25zZVRvTG9nIiwidHJhbnNhY3Rpb24iLCJ0eFNpZyIsInNpZ25hdHVyZXMiLCJzbG90IiwibG9ncyIsIm1ldGEiLCJsb2dNZXNzYWdlcyIsImNvbm5lY3Rpb24iLCJhZGRyZXNzIiwiZmluYWxpdHkiLCJiZWZvcmVUeCIsInVudGlsVHgiLCJsaW1pdCIsImJhdGNoU2l6ZSIsImdldFNpZ25hdHVyZXNGb3JBZGRyZXNzIiwiYmVmb3JlIiwidW50aWwiLCJzb3J0ZWRTaWduYXR1cmVzIiwic29ydCIsImEiLCJiIiwiZmlsdGVyZWRTaWduYXR1cmVzIiwiZmlsdGVyIiwic2lnbmF0dXJlIiwiZXJyIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY2h1bmtlZFNpZ25hdHVyZXMiLCJjaHVuayIsInRyYW5zYWN0aW9uTG9ncyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJjb25maXJtZWRTaWduYXR1cmUiLCJmbGF0IiwiZWFybGllc3QiLCJtb3N0UmVjZW50IiwiZWFybGllc3RUeCIsIm1vc3RSZWNlbnRUeCIsImVhcmxpZXN0U2xvdCIsIm1vc3RSZWNlbnRTbG90IiwibW9zdFJlY2VudEJsb2NrVGltZSIsImJsb2NrVGltZSIsInJlcXVlc3RzIiwiQXJyYXkiLCJhcmdzIiwiY29tbWl0bWVudCIsIm1heFN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbiIsInB1c2giLCJtZXRob2ROYW1lIiwicnBjUmVzcG9uc2VzIiwicHJvbWlzZVRpbWVvdXQiLCJfcnBjQmF0Y2hSZXF1ZXN0IiwicmVqZWN0IiwiaSIsInJwY1Jlc3BvbnNlIiwicmVzdWx0IiwiYXJyYXkiLCJzaXplIiwiTWF0aCIsImNlaWwiLCJmaWxsIiwiXyIsImluZGV4IiwiYmVnaW4iLCJzbGljZSIsImNvbnN0cnVjdG9yIiwicHJvZ3JhbSIsInBhcnNlRXZlbnRzRnJvbVRyYW5zYWN0aW9uIiwidHJhbnNhY3Rpb25Mb2dPYmplY3QiLCJwYXJzZUV2ZW50c0Zyb21Mb2dzIiwiZXZlbnQiLCJyZWNvcmRzIiwiZXZlbnRHZW5lcmF0b3IiLCJfZXZlbnRzIiwiX2V2ZW50UGFyc2VyIiwicGFyc2VMb2dzIiwicnVubmluZ0V2ZW50SW5kZXgiLCJldmVudExvZyIsImRhdGEiLCJldmVudFR5cGUiLCJuYW1lIiwidHhTaWdJbmRleCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/fetchLogs.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/parse.js":
/*!**********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/parse.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.parseLogs = void 0;\nconst driftProgramId = \"dRiftyHA39MWEi3m9aunc5MzRF1JYuBsbn6VPcn33UH\";\nconst driftProgramStart = `Program ${driftProgramId} invoke`;\nconst PROGRAM_LOG = \"Program log: \";\nconst PROGRAM_DATA = \"Program data: \";\nconst PROGRAM_LOG_START_INDEX = PROGRAM_LOG.length;\nconst PROGRAM_DATA_START_INDEX = PROGRAM_DATA.length;\nfunction parseLogs(program, slot, logs) {\n    const events = [];\n    const execution = new ExecutionContext();\n    for (const log of logs){\n        const [event, newProgram, didPop] = handleLog(execution, log, program);\n        if (event) {\n            events.push(event);\n        }\n        if (newProgram) {\n            execution.push(newProgram);\n        }\n        if (didPop) {\n            execution.pop();\n        }\n    }\n    return events;\n}\nexports.parseLogs = parseLogs;\nfunction handleLog(execution, log, program) {\n    // Executing program is drift program.\n    if (execution.stack.length > 0 && execution.program() === driftProgramId) {\n        return handleProgramLog(log, program);\n    } else {\n        return [\n            null,\n            ...handleSystemLog(log)\n        ];\n    }\n}\n// Handles logs from *drift* program.\nfunction handleProgramLog(log, program) {\n    // This is a `msg!` log or a `sol_log_data` log.\n    if (log.startsWith(PROGRAM_LOG)) {\n        const logStr = log.slice(PROGRAM_LOG_START_INDEX);\n        const event = program.coder.events.decode(logStr);\n        return [\n            event,\n            null,\n            false\n        ];\n    } else if (log.startsWith(PROGRAM_DATA)) {\n        const logStr = log.slice(PROGRAM_DATA_START_INDEX);\n        const event = program.coder.events.decode(logStr);\n        return [\n            event,\n            null,\n            false\n        ];\n    } else {\n        return [\n            null,\n            ...handleSystemLog(log)\n        ];\n    }\n}\n// Handles logs when the current program being executing is *not* drift.\nfunction handleSystemLog(log) {\n    // System component.\n    const logStart = log.split(\":\")[0];\n    // Did the program finish executing?\n    if (logStart.match(/^Program (.*) success/g) !== null) {\n        return [\n            null,\n            true\n        ];\n    // Recursive call.\n    } else if (logStart.startsWith(driftProgramStart)) {\n        return [\n            driftProgramId,\n            false\n        ];\n    } else if (logStart.includes(\"invoke\")) {\n        return [\n            \"cpi\",\n            false\n        ]; // Any string will do.\n    } else {\n        return [\n            null,\n            false\n        ];\n    }\n}\n// Stack frame execution context, allowing one to track what program is\n// executing for a given log.\nclass ExecutionContext {\n    constructor(){\n        this.stack = [];\n    }\n    program() {\n        if (!this.stack.length) {\n            throw new Error(\"Expected the stack to have elements\");\n        }\n        return this.stack[this.stack.length - 1];\n    }\n    push(newProgram) {\n        this.stack.push(newProgram);\n    }\n    pop() {\n        if (!this.stack.length) {\n            throw new Error(\"Expected the stack to have elements\");\n        }\n        this.stack.pop();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvcGFyc2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlCQUFpQixHQUFHLEtBQUs7QUFDekIsTUFBTUcsaUJBQWlCO0FBQ3ZCLE1BQU1DLG9CQUFvQixDQUFDLFFBQVEsRUFBRUQsZUFBZSxPQUFPLENBQUM7QUFDNUQsTUFBTUUsY0FBYztBQUNwQixNQUFNQyxlQUFlO0FBQ3JCLE1BQU1DLDBCQUEwQkYsWUFBWUcsTUFBTTtBQUNsRCxNQUFNQywyQkFBMkJILGFBQWFFLE1BQU07QUFDcEQsU0FBU04sVUFBVVEsT0FBTyxFQUFFQyxJQUFJLEVBQUVDLElBQUk7SUFDbEMsTUFBTUMsU0FBUyxFQUFFO0lBQ2pCLE1BQU1DLFlBQVksSUFBSUM7SUFDdEIsS0FBSyxNQUFNQyxPQUFPSixLQUFNO1FBQ3BCLE1BQU0sQ0FBQ0ssT0FBT0MsWUFBWUMsT0FBTyxHQUFHQyxVQUFVTixXQUFXRSxLQUFLTjtRQUM5RCxJQUFJTyxPQUFPO1lBQ1BKLE9BQU9RLElBQUksQ0FBQ0o7UUFDaEI7UUFDQSxJQUFJQyxZQUFZO1lBQ1pKLFVBQVVPLElBQUksQ0FBQ0g7UUFDbkI7UUFDQSxJQUFJQyxRQUFRO1lBQ1JMLFVBQVVRLEdBQUc7UUFDakI7SUFDSjtJQUNBLE9BQU9UO0FBQ1g7QUFDQWIsaUJBQWlCLEdBQUdFO0FBQ3BCLFNBQVNrQixVQUFVTixTQUFTLEVBQUVFLEdBQUcsRUFBRU4sT0FBTztJQUN0QyxzQ0FBc0M7SUFDdEMsSUFBSUksVUFBVVMsS0FBSyxDQUFDZixNQUFNLEdBQUcsS0FBS00sVUFBVUosT0FBTyxPQUFPUCxnQkFBZ0I7UUFDdEUsT0FBT3FCLGlCQUFpQlIsS0FBS047SUFDakMsT0FFSztRQUNELE9BQU87WUFBQztlQUFTZSxnQkFBZ0JUO1NBQUs7SUFDMUM7QUFDSjtBQUNBLHFDQUFxQztBQUNyQyxTQUFTUSxpQkFBaUJSLEdBQUcsRUFBRU4sT0FBTztJQUNsQyxnREFBZ0Q7SUFDaEQsSUFBSU0sSUFBSVUsVUFBVSxDQUFDckIsY0FBYztRQUM3QixNQUFNc0IsU0FBU1gsSUFBSVksS0FBSyxDQUFDckI7UUFDekIsTUFBTVUsUUFBUVAsUUFBUW1CLEtBQUssQ0FBQ2hCLE1BQU0sQ0FBQ2lCLE1BQU0sQ0FBQ0g7UUFDMUMsT0FBTztZQUFDVjtZQUFPO1lBQU07U0FBTTtJQUMvQixPQUNLLElBQUlELElBQUlVLFVBQVUsQ0FBQ3BCLGVBQWU7UUFDbkMsTUFBTXFCLFNBQVNYLElBQUlZLEtBQUssQ0FBQ25CO1FBQ3pCLE1BQU1RLFFBQVFQLFFBQVFtQixLQUFLLENBQUNoQixNQUFNLENBQUNpQixNQUFNLENBQUNIO1FBQzFDLE9BQU87WUFBQ1Y7WUFBTztZQUFNO1NBQU07SUFDL0IsT0FDSztRQUNELE9BQU87WUFBQztlQUFTUSxnQkFBZ0JUO1NBQUs7SUFDMUM7QUFDSjtBQUNBLHdFQUF3RTtBQUN4RSxTQUFTUyxnQkFBZ0JULEdBQUc7SUFDeEIsb0JBQW9CO0lBQ3BCLE1BQU1lLFdBQVdmLElBQUlnQixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDbEMsb0NBQW9DO0lBQ3BDLElBQUlELFNBQVNFLEtBQUssQ0FBQyw4QkFBOEIsTUFBTTtRQUNuRCxPQUFPO1lBQUM7WUFBTTtTQUFLO0lBQ25CLGtCQUFrQjtJQUN0QixPQUNLLElBQUlGLFNBQVNMLFVBQVUsQ0FBQ3RCLG9CQUFvQjtRQUM3QyxPQUFPO1lBQUNEO1lBQWdCO1NBQU07SUFDbEMsT0FFSyxJQUFJNEIsU0FBU0csUUFBUSxDQUFDLFdBQVc7UUFDbEMsT0FBTztZQUFDO1lBQU87U0FBTSxFQUFFLHNCQUFzQjtJQUNqRCxPQUNLO1FBQ0QsT0FBTztZQUFDO1lBQU07U0FBTTtJQUN4QjtBQUNKO0FBQ0EsdUVBQXVFO0FBQ3ZFLDZCQUE2QjtBQUM3QixNQUFNbkI7SUFDRm9CLGFBQWM7UUFDVixJQUFJLENBQUNaLEtBQUssR0FBRyxFQUFFO0lBQ25CO0lBQ0FiLFVBQVU7UUFDTixJQUFJLENBQUMsSUFBSSxDQUFDYSxLQUFLLENBQUNmLE1BQU0sRUFBRTtZQUNwQixNQUFNLElBQUk0QixNQUFNO1FBQ3BCO1FBQ0EsT0FBTyxJQUFJLENBQUNiLEtBQUssQ0FBQyxJQUFJLENBQUNBLEtBQUssQ0FBQ2YsTUFBTSxHQUFHLEVBQUU7SUFDNUM7SUFDQWEsS0FBS0gsVUFBVSxFQUFFO1FBQ2IsSUFBSSxDQUFDSyxLQUFLLENBQUNGLElBQUksQ0FBQ0g7SUFDcEI7SUFDQUksTUFBTTtRQUNGLElBQUksQ0FBQyxJQUFJLENBQUNDLEtBQUssQ0FBQ2YsTUFBTSxFQUFFO1lBQ3BCLE1BQU0sSUFBSTRCLE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUNiLEtBQUssQ0FBQ0QsR0FBRztJQUNsQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2V2ZW50cy9wYXJzZS5qcz8yMTRhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5wYXJzZUxvZ3MgPSB2b2lkIDA7XG5jb25zdCBkcmlmdFByb2dyYW1JZCA9ICdkUmlmdHlIQTM5TVdFaTNtOWF1bmM1TXpSRjFKWXVCc2JuNlZQY24zM1VIJztcbmNvbnN0IGRyaWZ0UHJvZ3JhbVN0YXJ0ID0gYFByb2dyYW0gJHtkcmlmdFByb2dyYW1JZH0gaW52b2tlYDtcbmNvbnN0IFBST0dSQU1fTE9HID0gJ1Byb2dyYW0gbG9nOiAnO1xuY29uc3QgUFJPR1JBTV9EQVRBID0gJ1Byb2dyYW0gZGF0YTogJztcbmNvbnN0IFBST0dSQU1fTE9HX1NUQVJUX0lOREVYID0gUFJPR1JBTV9MT0cubGVuZ3RoO1xuY29uc3QgUFJPR1JBTV9EQVRBX1NUQVJUX0lOREVYID0gUFJPR1JBTV9EQVRBLmxlbmd0aDtcbmZ1bmN0aW9uIHBhcnNlTG9ncyhwcm9ncmFtLCBzbG90LCBsb2dzKSB7XG4gICAgY29uc3QgZXZlbnRzID0gW107XG4gICAgY29uc3QgZXhlY3V0aW9uID0gbmV3IEV4ZWN1dGlvbkNvbnRleHQoKTtcbiAgICBmb3IgKGNvbnN0IGxvZyBvZiBsb2dzKSB7XG4gICAgICAgIGNvbnN0IFtldmVudCwgbmV3UHJvZ3JhbSwgZGlkUG9wXSA9IGhhbmRsZUxvZyhleGVjdXRpb24sIGxvZywgcHJvZ3JhbSk7XG4gICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnRzLnB1c2goZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdQcm9ncmFtKSB7XG4gICAgICAgICAgICBleGVjdXRpb24ucHVzaChuZXdQcm9ncmFtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGlkUG9wKSB7XG4gICAgICAgICAgICBleGVjdXRpb24ucG9wKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbn1cbmV4cG9ydHMucGFyc2VMb2dzID0gcGFyc2VMb2dzO1xuZnVuY3Rpb24gaGFuZGxlTG9nKGV4ZWN1dGlvbiwgbG9nLCBwcm9ncmFtKSB7XG4gICAgLy8gRXhlY3V0aW5nIHByb2dyYW0gaXMgZHJpZnQgcHJvZ3JhbS5cbiAgICBpZiAoZXhlY3V0aW9uLnN0YWNrLmxlbmd0aCA+IDAgJiYgZXhlY3V0aW9uLnByb2dyYW0oKSA9PT0gZHJpZnRQcm9ncmFtSWQpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVByb2dyYW1Mb2cobG9nLCBwcm9ncmFtKTtcbiAgICB9XG4gICAgLy8gRXhlY3V0aW5nIHByb2dyYW0gaXMgbm90IGRyaWZ0IHByb2dyYW0uXG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uaGFuZGxlU3lzdGVtTG9nKGxvZyldO1xuICAgIH1cbn1cbi8vIEhhbmRsZXMgbG9ncyBmcm9tICpkcmlmdCogcHJvZ3JhbS5cbmZ1bmN0aW9uIGhhbmRsZVByb2dyYW1Mb2cobG9nLCBwcm9ncmFtKSB7XG4gICAgLy8gVGhpcyBpcyBhIGBtc2chYCBsb2cgb3IgYSBgc29sX2xvZ19kYXRhYCBsb2cuXG4gICAgaWYgKGxvZy5zdGFydHNXaXRoKFBST0dSQU1fTE9HKSkge1xuICAgICAgICBjb25zdCBsb2dTdHIgPSBsb2cuc2xpY2UoUFJPR1JBTV9MT0dfU1RBUlRfSU5ERVgpO1xuICAgICAgICBjb25zdCBldmVudCA9IHByb2dyYW0uY29kZXIuZXZlbnRzLmRlY29kZShsb2dTdHIpO1xuICAgICAgICByZXR1cm4gW2V2ZW50LCBudWxsLCBmYWxzZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKGxvZy5zdGFydHNXaXRoKFBST0dSQU1fREFUQSkpIHtcbiAgICAgICAgY29uc3QgbG9nU3RyID0gbG9nLnNsaWNlKFBST0dSQU1fREFUQV9TVEFSVF9JTkRFWCk7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gcHJvZ3JhbS5jb2Rlci5ldmVudHMuZGVjb2RlKGxvZ1N0cik7XG4gICAgICAgIHJldHVybiBbZXZlbnQsIG51bGwsIGZhbHNlXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uaGFuZGxlU3lzdGVtTG9nKGxvZyldO1xuICAgIH1cbn1cbi8vIEhhbmRsZXMgbG9ncyB3aGVuIHRoZSBjdXJyZW50IHByb2dyYW0gYmVpbmcgZXhlY3V0aW5nIGlzICpub3QqIGRyaWZ0LlxuZnVuY3Rpb24gaGFuZGxlU3lzdGVtTG9nKGxvZykge1xuICAgIC8vIFN5c3RlbSBjb21wb25lbnQuXG4gICAgY29uc3QgbG9nU3RhcnQgPSBsb2cuc3BsaXQoJzonKVswXTtcbiAgICAvLyBEaWQgdGhlIHByb2dyYW0gZmluaXNoIGV4ZWN1dGluZz9cbiAgICBpZiAobG9nU3RhcnQubWF0Y2goL15Qcm9ncmFtICguKikgc3VjY2Vzcy9nKSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW251bGwsIHRydWVdO1xuICAgICAgICAvLyBSZWN1cnNpdmUgY2FsbC5cbiAgICB9XG4gICAgZWxzZSBpZiAobG9nU3RhcnQuc3RhcnRzV2l0aChkcmlmdFByb2dyYW1TdGFydCkpIHtcbiAgICAgICAgcmV0dXJuIFtkcmlmdFByb2dyYW1JZCwgZmFsc2VdO1xuICAgIH1cbiAgICAvLyBDUEkgY2FsbC5cbiAgICBlbHNlIGlmIChsb2dTdGFydC5pbmNsdWRlcygnaW52b2tlJykpIHtcbiAgICAgICAgcmV0dXJuIFsnY3BpJywgZmFsc2VdOyAvLyBBbnkgc3RyaW5nIHdpbGwgZG8uXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW251bGwsIGZhbHNlXTtcbiAgICB9XG59XG4vLyBTdGFjayBmcmFtZSBleGVjdXRpb24gY29udGV4dCwgYWxsb3dpbmcgb25lIHRvIHRyYWNrIHdoYXQgcHJvZ3JhbSBpc1xuLy8gZXhlY3V0aW5nIGZvciBhIGdpdmVuIGxvZy5cbmNsYXNzIEV4ZWN1dGlvbkNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YWNrID0gW107XG4gICAgfVxuICAgIHByb2dyYW0oKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIHN0YWNrIHRvIGhhdmUgZWxlbWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdGFja1t0aGlzLnN0YWNrLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBwdXNoKG5ld1Byb2dyYW0pIHtcbiAgICAgICAgdGhpcy5zdGFjay5wdXNoKG5ld1Byb2dyYW0pO1xuICAgIH1cbiAgICBwb3AoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIHN0YWNrIHRvIGhhdmUgZWxlbWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YWNrLnBvcCgpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInBhcnNlTG9ncyIsImRyaWZ0UHJvZ3JhbUlkIiwiZHJpZnRQcm9ncmFtU3RhcnQiLCJQUk9HUkFNX0xPRyIsIlBST0dSQU1fREFUQSIsIlBST0dSQU1fTE9HX1NUQVJUX0lOREVYIiwibGVuZ3RoIiwiUFJPR1JBTV9EQVRBX1NUQVJUX0lOREVYIiwicHJvZ3JhbSIsInNsb3QiLCJsb2dzIiwiZXZlbnRzIiwiZXhlY3V0aW9uIiwiRXhlY3V0aW9uQ29udGV4dCIsImxvZyIsImV2ZW50IiwibmV3UHJvZ3JhbSIsImRpZFBvcCIsImhhbmRsZUxvZyIsInB1c2giLCJwb3AiLCJzdGFjayIsImhhbmRsZVByb2dyYW1Mb2ciLCJoYW5kbGVTeXN0ZW1Mb2ciLCJzdGFydHNXaXRoIiwibG9nU3RyIiwic2xpY2UiLCJjb2RlciIsImRlY29kZSIsImxvZ1N0YXJ0Iiwic3BsaXQiLCJtYXRjaCIsImluY2x1ZGVzIiwiY29uc3RydWN0b3IiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/parse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/pollingLogProvider.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/pollingLogProvider.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PollingLogProvider = void 0;\nconst fetchLogs_1 = __webpack_require__(/*! ./fetchLogs */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/fetchLogs.js\");\nclass PollingLogProvider {\n    constructor(connection, address, commitment, frequency = 15 * 1000, batchSize){\n        this.connection = connection;\n        this.address = address;\n        this.frequency = frequency;\n        this.batchSize = batchSize;\n        this.firstFetch = true;\n        this.finality = commitment === \"finalized\" ? \"finalized\" : \"confirmed\";\n    }\n    subscribe(callback, skipHistory) {\n        if (this.intervalId) {\n            return true;\n        }\n        this.intervalId = setInterval(async ()=>{\n            if (this.mutex === 1) {\n                return;\n            }\n            this.mutex = 1;\n            try {\n                const response = await (0, fetchLogs_1.fetchLogs)(this.connection, this.address, this.finality, undefined, this.mostRecentSeenTx, // If skipping history, only fetch one log back, not the maximum amount available\n                skipHistory && this.firstFetch ? 1 : undefined, this.batchSize);\n                if (response === undefined) {\n                    return;\n                }\n                this.firstFetch = false;\n                const { mostRecentTx, transactionLogs } = response;\n                for (const { txSig, slot, logs } of transactionLogs){\n                    callback(txSig, slot, logs, response.mostRecentBlockTime);\n                }\n                this.mostRecentSeenTx = mostRecentTx;\n            } catch (e) {\n                console.error(\"PollingLogProvider threw an Error\");\n                console.error(e);\n            } finally{\n                this.mutex = 0;\n            }\n        }, this.frequency);\n        return true;\n    }\n    isSubscribed() {\n        return this.intervalId !== undefined;\n    }\n    async unsubscribe() {\n        if (this.intervalId !== undefined) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n        return true;\n    }\n}\nexports.PollingLogProvider = PollingLogProvider;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvcG9sbGluZ0xvZ1Byb3ZpZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBRyxLQUFLO0FBQ2xDLE1BQU1HLGNBQWNDLG1CQUFPQSxDQUFDLGlGQUFhO0FBQ3pDLE1BQU1GO0lBQ0ZHLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxFQUFFQyxVQUFVLEVBQUVDLFlBQVksS0FBSyxJQUFJLEVBQUVDLFNBQVMsQ0FBRTtRQUMzRSxJQUFJLENBQUNKLFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDRSxTQUFTLEdBQUdBO1FBQ2pCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNDLFVBQVUsR0FBRztRQUNsQixJQUFJLENBQUNDLFFBQVEsR0FBR0osZUFBZSxjQUFjLGNBQWM7SUFDL0Q7SUFDQUssVUFBVUMsUUFBUSxFQUFFQyxXQUFXLEVBQUU7UUFDN0IsSUFBSSxJQUFJLENBQUNDLFVBQVUsRUFBRTtZQUNqQixPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUNBLFVBQVUsR0FBR0MsWUFBWTtZQUMxQixJQUFJLElBQUksQ0FBQ0MsS0FBSyxLQUFLLEdBQUc7Z0JBQ2xCO1lBQ0o7WUFDQSxJQUFJLENBQUNBLEtBQUssR0FBRztZQUNiLElBQUk7Z0JBQ0EsTUFBTUMsV0FBVyxNQUFNLENBQUMsR0FBR2hCLFlBQVlpQixTQUFTLEVBQUUsSUFBSSxDQUFDZCxVQUFVLEVBQUUsSUFBSSxDQUFDQyxPQUFPLEVBQUUsSUFBSSxDQUFDSyxRQUFRLEVBQUVTLFdBQVcsSUFBSSxDQUFDQyxnQkFBZ0IsRUFDaEksaUZBQWlGO2dCQUNqRlAsZUFBZSxJQUFJLENBQUNKLFVBQVUsR0FBRyxJQUFJVSxXQUFXLElBQUksQ0FBQ1gsU0FBUztnQkFDOUQsSUFBSVMsYUFBYUUsV0FBVztvQkFDeEI7Z0JBQ0o7Z0JBQ0EsSUFBSSxDQUFDVixVQUFVLEdBQUc7Z0JBQ2xCLE1BQU0sRUFBRVksWUFBWSxFQUFFQyxlQUFlLEVBQUUsR0FBR0w7Z0JBQzFDLEtBQUssTUFBTSxFQUFFTSxLQUFLLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFLElBQUlILGdCQUFpQjtvQkFDakRWLFNBQVNXLE9BQU9DLE1BQU1DLE1BQU1SLFNBQVNTLG1CQUFtQjtnQkFDNUQ7Z0JBQ0EsSUFBSSxDQUFDTixnQkFBZ0IsR0FBR0M7WUFDNUIsRUFDQSxPQUFPTSxHQUFHO2dCQUNOQyxRQUFRQyxLQUFLLENBQUM7Z0JBQ2RELFFBQVFDLEtBQUssQ0FBQ0Y7WUFDbEIsU0FDUTtnQkFDSixJQUFJLENBQUNYLEtBQUssR0FBRztZQUNqQjtRQUNKLEdBQUcsSUFBSSxDQUFDVCxTQUFTO1FBQ2pCLE9BQU87SUFDWDtJQUNBdUIsZUFBZTtRQUNYLE9BQU8sSUFBSSxDQUFDaEIsVUFBVSxLQUFLSztJQUMvQjtJQUNBLE1BQU1ZLGNBQWM7UUFDaEIsSUFBSSxJQUFJLENBQUNqQixVQUFVLEtBQUtLLFdBQVc7WUFDL0JhLGNBQWMsSUFBSSxDQUFDbEIsVUFBVTtZQUM3QixJQUFJLENBQUNBLFVBQVUsR0FBR0s7UUFDdEI7UUFDQSxPQUFPO0lBQ1g7QUFDSjtBQUNBckIsMEJBQTBCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2V2ZW50cy9wb2xsaW5nTG9nUHJvdmlkZXIuanM/MjU5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUG9sbGluZ0xvZ1Byb3ZpZGVyID0gdm9pZCAwO1xuY29uc3QgZmV0Y2hMb2dzXzEgPSByZXF1aXJlKFwiLi9mZXRjaExvZ3NcIik7XG5jbGFzcyBQb2xsaW5nTG9nUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24sIGFkZHJlc3MsIGNvbW1pdG1lbnQsIGZyZXF1ZW5jeSA9IDE1ICogMTAwMCwgYmF0Y2hTaXplKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgICAgIHRoaXMuYWRkcmVzcyA9IGFkZHJlc3M7XG4gICAgICAgIHRoaXMuZnJlcXVlbmN5ID0gZnJlcXVlbmN5O1xuICAgICAgICB0aGlzLmJhdGNoU2l6ZSA9IGJhdGNoU2l6ZTtcbiAgICAgICAgdGhpcy5maXJzdEZldGNoID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5maW5hbGl0eSA9IGNvbW1pdG1lbnQgPT09ICdmaW5hbGl6ZWQnID8gJ2ZpbmFsaXplZCcgOiAnY29uZmlybWVkJztcbiAgICB9XG4gICAgc3Vic2NyaWJlKGNhbGxiYWNrLCBza2lwSGlzdG9yeSkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcnZhbElkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5tdXRleCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubXV0ZXggPSAxO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0ICgwLCBmZXRjaExvZ3NfMS5mZXRjaExvZ3MpKHRoaXMuY29ubmVjdGlvbiwgdGhpcy5hZGRyZXNzLCB0aGlzLmZpbmFsaXR5LCB1bmRlZmluZWQsIHRoaXMubW9zdFJlY2VudFNlZW5UeCwgXG4gICAgICAgICAgICAgICAgLy8gSWYgc2tpcHBpbmcgaGlzdG9yeSwgb25seSBmZXRjaCBvbmUgbG9nIGJhY2ssIG5vdCB0aGUgbWF4aW11bSBhbW91bnQgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgc2tpcEhpc3RvcnkgJiYgdGhpcy5maXJzdEZldGNoID8gMSA6IHVuZGVmaW5lZCwgdGhpcy5iYXRjaFNpemUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdEZldGNoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBtb3N0UmVjZW50VHgsIHRyYW5zYWN0aW9uTG9ncyB9ID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB7IHR4U2lnLCBzbG90LCBsb2dzIH0gb2YgdHJhbnNhY3Rpb25Mb2dzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHR4U2lnLCBzbG90LCBsb2dzLCByZXNwb25zZS5tb3N0UmVjZW50QmxvY2tUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tb3N0UmVjZW50U2VlblR4ID0gbW9zdFJlY2VudFR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdQb2xsaW5nTG9nUHJvdmlkZXIgdGhyZXcgYW4gRXJyb3InKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tdXRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMuZnJlcXVlbmN5KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlzU3Vic2NyaWJlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWxJZCAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICB0aGlzLmludGVydmFsSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZXhwb3J0cy5Qb2xsaW5nTG9nUHJvdmlkZXIgPSBQb2xsaW5nTG9nUHJvdmlkZXI7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJQb2xsaW5nTG9nUHJvdmlkZXIiLCJmZXRjaExvZ3NfMSIsInJlcXVpcmUiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJhZGRyZXNzIiwiY29tbWl0bWVudCIsImZyZXF1ZW5jeSIsImJhdGNoU2l6ZSIsImZpcnN0RmV0Y2giLCJmaW5hbGl0eSIsInN1YnNjcmliZSIsImNhbGxiYWNrIiwic2tpcEhpc3RvcnkiLCJpbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJtdXRleCIsInJlc3BvbnNlIiwiZmV0Y2hMb2dzIiwidW5kZWZpbmVkIiwibW9zdFJlY2VudFNlZW5UeCIsIm1vc3RSZWNlbnRUeCIsInRyYW5zYWN0aW9uTG9ncyIsInR4U2lnIiwic2xvdCIsImxvZ3MiLCJtb3N0UmVjZW50QmxvY2tUaW1lIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImlzU3Vic2NyaWJlZCIsInVuc3Vic2NyaWJlIiwiY2xlYXJJbnRlcnZhbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/pollingLogProvider.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/sort.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/sort.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getSortFn = void 0;\nconst index_1 = __webpack_require__(/*! ../index */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nfunction clientSortAscFn() {\n    return \"less than\";\n}\nfunction clientSortDescFn() {\n    return \"greater than\";\n}\nfunction defaultBlockchainSortFn(currentEvent, newEvent) {\n    return currentEvent.slot <= newEvent.slot ? \"less than\" : \"greater than\";\n}\nfunction orderActionRecordSortFn(currentEvent, newEvent) {\n    var _a, _b;\n    const currentEventMarketIndex = currentEvent.marketIndex;\n    const newEventMarketIndex = newEvent.marketIndex;\n    if (currentEventMarketIndex !== newEventMarketIndex) {\n        return currentEvent.ts.lte(newEvent.ts) ? \"less than\" : \"greater than\";\n    }\n    if (((_a = currentEvent.fillRecordId) === null || _a === void 0 ? void 0 : _a.gt(index_1.ZERO)) && ((_b = newEvent.fillRecordId) === null || _b === void 0 ? void 0 : _b.gt(index_1.ZERO))) {\n        return currentEvent.fillRecordId.lte(newEvent.fillRecordId) ? \"less than\" : \"greater than\";\n    } else {\n        return currentEvent.ts.lte(newEvent.ts) ? \"less than\" : \"greater than\";\n    }\n}\nfunction getSortFn(orderBy, orderDir, eventType) {\n    if (orderBy === \"client\") {\n        return orderDir === \"asc\" ? clientSortAscFn : clientSortDescFn;\n    }\n    switch(eventType){\n        case \"OrderActionRecord\":\n            return orderActionRecordSortFn;\n        default:\n            return defaultBlockchainSortFn;\n    }\n}\nexports.getSortFn = getSortFn;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvc29ydC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsaUJBQWlCLEdBQUcsS0FBSztBQUN6QixNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQyxtRUFBVTtBQUNsQyxTQUFTQztJQUNMLE9BQU87QUFDWDtBQUNBLFNBQVNDO0lBQ0wsT0FBTztBQUNYO0FBQ0EsU0FBU0Msd0JBQXdCQyxZQUFZLEVBQUVDLFFBQVE7SUFDbkQsT0FBT0QsYUFBYUUsSUFBSSxJQUFJRCxTQUFTQyxJQUFJLEdBQUcsY0FBYztBQUM5RDtBQUNBLFNBQVNDLHdCQUF3QkgsWUFBWSxFQUFFQyxRQUFRO0lBQ25ELElBQUlHLElBQUlDO0lBQ1IsTUFBTUMsMEJBQTBCTixhQUFhTyxXQUFXO0lBQ3hELE1BQU1DLHNCQUFzQlAsU0FBU00sV0FBVztJQUNoRCxJQUFJRCw0QkFBNEJFLHFCQUFxQjtRQUNqRCxPQUFPUixhQUFhUyxFQUFFLENBQUNDLEdBQUcsQ0FBQ1QsU0FBU1EsRUFBRSxJQUFJLGNBQWM7SUFDNUQ7SUFDQSxJQUFJLENBQUMsQ0FBQ0wsS0FBS0osYUFBYVcsWUFBWSxNQUFNLFFBQVFQLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR1EsRUFBRSxDQUFDakIsUUFBUWtCLElBQUksTUFBTyxFQUFDUixLQUFLSixTQUFTVSxZQUFZLE1BQU0sUUFBUU4sT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJQSxHQUFHTyxFQUFFLENBQUNqQixRQUFRa0IsSUFBSSxJQUFJO1FBQ3hMLE9BQU9iLGFBQWFXLFlBQVksQ0FBQ0QsR0FBRyxDQUFDVCxTQUFTVSxZQUFZLElBQ3BELGNBQ0E7SUFDVixPQUNLO1FBQ0QsT0FBT1gsYUFBYVMsRUFBRSxDQUFDQyxHQUFHLENBQUNULFNBQVNRLEVBQUUsSUFBSSxjQUFjO0lBQzVEO0FBQ0o7QUFDQSxTQUFTZixVQUFVb0IsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLFNBQVM7SUFDM0MsSUFBSUYsWUFBWSxVQUFVO1FBQ3RCLE9BQU9DLGFBQWEsUUFBUWxCLGtCQUFrQkM7SUFDbEQ7SUFDQSxPQUFRa0I7UUFDSixLQUFLO1lBQ0QsT0FBT2I7UUFDWDtZQUNJLE9BQU9KO0lBQ2Y7QUFDSjtBQUNBUCxpQkFBaUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvZXZlbnRzL3NvcnQuanM/MGU4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0U29ydEZuID0gdm9pZCAwO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9pbmRleFwiKTtcbmZ1bmN0aW9uIGNsaWVudFNvcnRBc2NGbigpIHtcbiAgICByZXR1cm4gJ2xlc3MgdGhhbic7XG59XG5mdW5jdGlvbiBjbGllbnRTb3J0RGVzY0ZuKCkge1xuICAgIHJldHVybiAnZ3JlYXRlciB0aGFuJztcbn1cbmZ1bmN0aW9uIGRlZmF1bHRCbG9ja2NoYWluU29ydEZuKGN1cnJlbnRFdmVudCwgbmV3RXZlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudEV2ZW50LnNsb3QgPD0gbmV3RXZlbnQuc2xvdCA/ICdsZXNzIHRoYW4nIDogJ2dyZWF0ZXIgdGhhbic7XG59XG5mdW5jdGlvbiBvcmRlckFjdGlvblJlY29yZFNvcnRGbihjdXJyZW50RXZlbnQsIG5ld0V2ZW50KSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCBjdXJyZW50RXZlbnRNYXJrZXRJbmRleCA9IGN1cnJlbnRFdmVudC5tYXJrZXRJbmRleDtcbiAgICBjb25zdCBuZXdFdmVudE1hcmtldEluZGV4ID0gbmV3RXZlbnQubWFya2V0SW5kZXg7XG4gICAgaWYgKGN1cnJlbnRFdmVudE1hcmtldEluZGV4ICE9PSBuZXdFdmVudE1hcmtldEluZGV4KSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50RXZlbnQudHMubHRlKG5ld0V2ZW50LnRzKSA/ICdsZXNzIHRoYW4nIDogJ2dyZWF0ZXIgdGhhbic7XG4gICAgfVxuICAgIGlmICgoKF9hID0gY3VycmVudEV2ZW50LmZpbGxSZWNvcmRJZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmd0KGluZGV4XzEuWkVSTykpICYmICgoX2IgPSBuZXdFdmVudC5maWxsUmVjb3JkSWQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5ndChpbmRleF8xLlpFUk8pKSkge1xuICAgICAgICByZXR1cm4gY3VycmVudEV2ZW50LmZpbGxSZWNvcmRJZC5sdGUobmV3RXZlbnQuZmlsbFJlY29yZElkKVxuICAgICAgICAgICAgPyAnbGVzcyB0aGFuJ1xuICAgICAgICAgICAgOiAnZ3JlYXRlciB0aGFuJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50RXZlbnQudHMubHRlKG5ld0V2ZW50LnRzKSA/ICdsZXNzIHRoYW4nIDogJ2dyZWF0ZXIgdGhhbic7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0U29ydEZuKG9yZGVyQnksIG9yZGVyRGlyLCBldmVudFR5cGUpIHtcbiAgICBpZiAob3JkZXJCeSA9PT0gJ2NsaWVudCcpIHtcbiAgICAgICAgcmV0dXJuIG9yZGVyRGlyID09PSAnYXNjJyA/IGNsaWVudFNvcnRBc2NGbiA6IGNsaWVudFNvcnREZXNjRm47XG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnRUeXBlKSB7XG4gICAgICAgIGNhc2UgJ09yZGVyQWN0aW9uUmVjb3JkJzpcbiAgICAgICAgICAgIHJldHVybiBvcmRlckFjdGlvblJlY29yZFNvcnRGbjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0QmxvY2tjaGFpblNvcnRGbjtcbiAgICB9XG59XG5leHBvcnRzLmdldFNvcnRGbiA9IGdldFNvcnRGbjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldFNvcnRGbiIsImluZGV4XzEiLCJyZXF1aXJlIiwiY2xpZW50U29ydEFzY0ZuIiwiY2xpZW50U29ydERlc2NGbiIsImRlZmF1bHRCbG9ja2NoYWluU29ydEZuIiwiY3VycmVudEV2ZW50IiwibmV3RXZlbnQiLCJzbG90Iiwib3JkZXJBY3Rpb25SZWNvcmRTb3J0Rm4iLCJfYSIsIl9iIiwiY3VycmVudEV2ZW50TWFya2V0SW5kZXgiLCJtYXJrZXRJbmRleCIsIm5ld0V2ZW50TWFya2V0SW5kZXgiLCJ0cyIsImx0ZSIsImZpbGxSZWNvcmRJZCIsImd0IiwiWkVSTyIsIm9yZGVyQnkiLCJvcmRlckRpciIsImV2ZW50VHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/sort.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/txEventCache.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/txEventCache.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TxEventCache = void 0;\nclass Node {\n    constructor(key, value, next, prev){\n        this.key = key;\n        this.value = value;\n        this.next = next;\n        this.prev = prev;\n    }\n}\n// lru cache\nclass TxEventCache {\n    constructor(maxTx = 1024){\n        this.maxTx = maxTx;\n        this.size = 0;\n        this.cacheMap = {};\n    }\n    add(key, events) {\n        const existingNode = this.cacheMap[key];\n        if (existingNode) {\n            this.detach(existingNode);\n            this.size--;\n        } else if (this.size === this.maxTx) {\n            delete this.cacheMap[this.tail.key];\n            this.detach(this.tail);\n            this.size--;\n        }\n        // Write to head of LinkedList\n        if (!this.head) {\n            this.head = this.tail = new Node(key, events);\n        } else {\n            const node = new Node(key, events, this.head);\n            this.head.prev = node;\n            this.head = node;\n        }\n        // update cacheMap with LinkedList key and Node reference\n        this.cacheMap[key] = this.head;\n        this.size++;\n    }\n    has(key) {\n        return this.cacheMap.hasOwnProperty(key);\n    }\n    get(key) {\n        var _a;\n        return (_a = this.cacheMap[key]) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    detach(node) {\n        if (node.prev !== undefined) {\n            node.prev.next = node.next;\n        } else {\n            this.head = node.next;\n        }\n        if (node.next !== undefined) {\n            node.next.prev = node.prev;\n        } else {\n            this.tail = node.prev;\n        }\n    }\n    clear() {\n        this.head = undefined;\n        this.tail = undefined;\n        this.size = 0;\n        this.cacheMap = {};\n    }\n}\nexports.TxEventCache = TxEventCache;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvdHhFdmVudENhY2hlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxvQkFBb0IsR0FBRyxLQUFLO0FBQzVCLE1BQU1HO0lBQ0ZDLFlBQVlDLEdBQUcsRUFBRUosS0FBSyxFQUFFSyxJQUFJLEVBQUVDLElBQUksQ0FBRTtRQUNoQyxJQUFJLENBQUNGLEdBQUcsR0FBR0E7UUFDWCxJQUFJLENBQUNKLEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNLLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNDLElBQUksR0FBR0E7SUFDaEI7QUFDSjtBQUNBLFlBQVk7QUFDWixNQUFNTDtJQUNGRSxZQUFZSSxRQUFRLElBQUksQ0FBRTtRQUN0QixJQUFJLENBQUNBLEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNDLElBQUksR0FBRztRQUNaLElBQUksQ0FBQ0MsUUFBUSxHQUFHLENBQUM7SUFDckI7SUFDQUMsSUFBSU4sR0FBRyxFQUFFTyxNQUFNLEVBQUU7UUFDYixNQUFNQyxlQUFlLElBQUksQ0FBQ0gsUUFBUSxDQUFDTCxJQUFJO1FBQ3ZDLElBQUlRLGNBQWM7WUFDZCxJQUFJLENBQUNDLE1BQU0sQ0FBQ0Q7WUFDWixJQUFJLENBQUNKLElBQUk7UUFDYixPQUNLLElBQUksSUFBSSxDQUFDQSxJQUFJLEtBQUssSUFBSSxDQUFDRCxLQUFLLEVBQUU7WUFDL0IsT0FBTyxJQUFJLENBQUNFLFFBQVEsQ0FBQyxJQUFJLENBQUNLLElBQUksQ0FBQ1YsR0FBRyxDQUFDO1lBQ25DLElBQUksQ0FBQ1MsTUFBTSxDQUFDLElBQUksQ0FBQ0MsSUFBSTtZQUNyQixJQUFJLENBQUNOLElBQUk7UUFDYjtRQUNBLDhCQUE4QjtRQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDTyxJQUFJLEVBQUU7WUFDWixJQUFJLENBQUNBLElBQUksR0FBRyxJQUFJLENBQUNELElBQUksR0FBRyxJQUFJWixLQUFLRSxLQUFLTztRQUMxQyxPQUNLO1lBQ0QsTUFBTUssT0FBTyxJQUFJZCxLQUFLRSxLQUFLTyxRQUFRLElBQUksQ0FBQ0ksSUFBSTtZQUM1QyxJQUFJLENBQUNBLElBQUksQ0FBQ1QsSUFBSSxHQUFHVTtZQUNqQixJQUFJLENBQUNELElBQUksR0FBR0M7UUFDaEI7UUFDQSx5REFBeUQ7UUFDekQsSUFBSSxDQUFDUCxRQUFRLENBQUNMLElBQUksR0FBRyxJQUFJLENBQUNXLElBQUk7UUFDOUIsSUFBSSxDQUFDUCxJQUFJO0lBQ2I7SUFDQVMsSUFBSWIsR0FBRyxFQUFFO1FBQ0wsT0FBTyxJQUFJLENBQUNLLFFBQVEsQ0FBQ1MsY0FBYyxDQUFDZDtJQUN4QztJQUNBZSxJQUFJZixHQUFHLEVBQUU7UUFDTCxJQUFJZ0I7UUFDSixPQUFPLENBQUNBLEtBQUssSUFBSSxDQUFDWCxRQUFRLENBQUNMLElBQUksTUFBTSxRQUFRZ0IsT0FBTyxLQUFLLElBQUksS0FBSyxJQUFJQSxHQUFHcEIsS0FBSztJQUNsRjtJQUNBYSxPQUFPRyxJQUFJLEVBQUU7UUFDVCxJQUFJQSxLQUFLVixJQUFJLEtBQUtlLFdBQVc7WUFDekJMLEtBQUtWLElBQUksQ0FBQ0QsSUFBSSxHQUFHVyxLQUFLWCxJQUFJO1FBQzlCLE9BQ0s7WUFDRCxJQUFJLENBQUNVLElBQUksR0FBR0MsS0FBS1gsSUFBSTtRQUN6QjtRQUNBLElBQUlXLEtBQUtYLElBQUksS0FBS2dCLFdBQVc7WUFDekJMLEtBQUtYLElBQUksQ0FBQ0MsSUFBSSxHQUFHVSxLQUFLVixJQUFJO1FBQzlCLE9BQ0s7WUFDRCxJQUFJLENBQUNRLElBQUksR0FBR0UsS0FBS1YsSUFBSTtRQUN6QjtJQUNKO0lBQ0FnQixRQUFRO1FBQ0osSUFBSSxDQUFDUCxJQUFJLEdBQUdNO1FBQ1osSUFBSSxDQUFDUCxJQUFJLEdBQUdPO1FBQ1osSUFBSSxDQUFDYixJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNDLFFBQVEsR0FBRyxDQUFDO0lBQ3JCO0FBQ0o7QUFDQVYsb0JBQW9CLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2V2ZW50cy90eEV2ZW50Q2FjaGUuanM/MjM3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVHhFdmVudENhY2hlID0gdm9pZCAwO1xuY2xhc3MgTm9kZSB7XG4gICAgY29uc3RydWN0b3Ioa2V5LCB2YWx1ZSwgbmV4dCwgcHJldikge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLm5leHQgPSBuZXh0O1xuICAgICAgICB0aGlzLnByZXYgPSBwcmV2O1xuICAgIH1cbn1cbi8vIGxydSBjYWNoZVxuY2xhc3MgVHhFdmVudENhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihtYXhUeCA9IDEwMjQpIHtcbiAgICAgICAgdGhpcy5tYXhUeCA9IG1heFR4O1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLmNhY2hlTWFwID0ge307XG4gICAgfVxuICAgIGFkZChrZXksIGV2ZW50cykge1xuICAgICAgICBjb25zdCBleGlzdGluZ05vZGUgPSB0aGlzLmNhY2hlTWFwW2tleV07XG4gICAgICAgIGlmIChleGlzdGluZ05vZGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoKGV4aXN0aW5nTm9kZSk7XG4gICAgICAgICAgICB0aGlzLnNpemUtLTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnNpemUgPT09IHRoaXMubWF4VHgpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlTWFwW3RoaXMudGFpbC5rZXldO1xuICAgICAgICAgICAgdGhpcy5kZXRhY2godGhpcy50YWlsKTtcbiAgICAgICAgICAgIHRoaXMuc2l6ZS0tO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdyaXRlIHRvIGhlYWQgb2YgTGlua2VkTGlzdFxuICAgICAgICBpZiAoIXRoaXMuaGVhZCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbmV3IE5vZGUoa2V5LCBldmVudHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgbm9kZSA9IG5ldyBOb2RlKGtleSwgZXZlbnRzLCB0aGlzLmhlYWQpO1xuICAgICAgICAgICAgdGhpcy5oZWFkLnByZXYgPSBub2RlO1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgY2FjaGVNYXAgd2l0aCBMaW5rZWRMaXN0IGtleSBhbmQgTm9kZSByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5jYWNoZU1hcFtrZXldID0gdGhpcy5oZWFkO1xuICAgICAgICB0aGlzLnNpemUrKztcbiAgICB9XG4gICAgaGFzKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZU1hcC5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgIH1cbiAgICBnZXQoa2V5KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuY2FjaGVNYXBba2V5XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnZhbHVlO1xuICAgIH1cbiAgICBkZXRhY2gobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5wcmV2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vZGUucHJldi5uZXh0ID0gbm9kZS5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gbm9kZS5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5leHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbm9kZS5uZXh0LnByZXYgPSBub2RlLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhaWwgPSBub2RlLnByZXY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICB0aGlzLmNhY2hlTWFwID0ge307XG4gICAgfVxufVxuZXhwb3J0cy5UeEV2ZW50Q2FjaGUgPSBUeEV2ZW50Q2FjaGU7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJUeEV2ZW50Q2FjaGUiLCJOb2RlIiwiY29uc3RydWN0b3IiLCJrZXkiLCJuZXh0IiwicHJldiIsIm1heFR4Iiwic2l6ZSIsImNhY2hlTWFwIiwiYWRkIiwiZXZlbnRzIiwiZXhpc3RpbmdOb2RlIiwiZGV0YWNoIiwidGFpbCIsImhlYWQiLCJub2RlIiwiaGFzIiwiaGFzT3duUHJvcGVydHkiLCJnZXQiLCJfYSIsInVuZGVmaW5lZCIsImNsZWFyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/txEventCache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/types.js":
/*!**********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/types.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.DefaultEventSubscriptionOptions = void 0;\nexports.DefaultEventSubscriptionOptions = {\n    eventTypes: [\n        \"DepositRecord\",\n        \"FundingPaymentRecord\",\n        \"LiquidationRecord\",\n        \"OrderRecord\",\n        \"OrderActionRecord\",\n        \"FundingRateRecord\",\n        \"NewUserRecord\",\n        \"SettlePnlRecord\",\n        \"LPRecord\",\n        \"InsuranceFundRecord\",\n        \"SpotInterestRecord\",\n        \"InsuranceFundStakeRecord\",\n        \"CurveRecord\",\n        \"SwapRecord\"\n    ],\n    maxEventsPerType: 4096,\n    orderBy: \"blockchain\",\n    orderDir: \"asc\",\n    commitment: \"confirmed\",\n    maxTx: 4096,\n    logProviderConfig: {\n        type: \"websocket\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVDQUF1QyxHQUFHLEtBQUs7QUFDL0NBLHVDQUF1QyxHQUFHO0lBQ3RDRyxZQUFZO1FBQ1I7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNIO0lBQ0RDLGtCQUFrQjtJQUNsQkMsU0FBUztJQUNUQyxVQUFVO0lBQ1ZDLFlBQVk7SUFDWkMsT0FBTztJQUNQQyxtQkFBbUI7UUFDZkMsTUFBTTtJQUNWO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvZXZlbnRzL3R5cGVzLmpzPzU1YzIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkRlZmF1bHRFdmVudFN1YnNjcmlwdGlvbk9wdGlvbnMgPSB2b2lkIDA7XG5leHBvcnRzLkRlZmF1bHRFdmVudFN1YnNjcmlwdGlvbk9wdGlvbnMgPSB7XG4gICAgZXZlbnRUeXBlczogW1xuICAgICAgICAnRGVwb3NpdFJlY29yZCcsXG4gICAgICAgICdGdW5kaW5nUGF5bWVudFJlY29yZCcsXG4gICAgICAgICdMaXF1aWRhdGlvblJlY29yZCcsXG4gICAgICAgICdPcmRlclJlY29yZCcsXG4gICAgICAgICdPcmRlckFjdGlvblJlY29yZCcsXG4gICAgICAgICdGdW5kaW5nUmF0ZVJlY29yZCcsXG4gICAgICAgICdOZXdVc2VyUmVjb3JkJyxcbiAgICAgICAgJ1NldHRsZVBubFJlY29yZCcsXG4gICAgICAgICdMUFJlY29yZCcsXG4gICAgICAgICdJbnN1cmFuY2VGdW5kUmVjb3JkJyxcbiAgICAgICAgJ1Nwb3RJbnRlcmVzdFJlY29yZCcsXG4gICAgICAgICdJbnN1cmFuY2VGdW5kU3Rha2VSZWNvcmQnLFxuICAgICAgICAnQ3VydmVSZWNvcmQnLFxuICAgICAgICAnU3dhcFJlY29yZCcsXG4gICAgXSxcbiAgICBtYXhFdmVudHNQZXJUeXBlOiA0MDk2LFxuICAgIG9yZGVyQnk6ICdibG9ja2NoYWluJyxcbiAgICBvcmRlckRpcjogJ2FzYycsXG4gICAgY29tbWl0bWVudDogJ2NvbmZpcm1lZCcsXG4gICAgbWF4VHg6IDQwOTYsXG4gICAgbG9nUHJvdmlkZXJDb25maWc6IHtcbiAgICAgICAgdHlwZTogJ3dlYnNvY2tldCcsXG4gICAgfSxcbn07XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJEZWZhdWx0RXZlbnRTdWJzY3JpcHRpb25PcHRpb25zIiwiZXZlbnRUeXBlcyIsIm1heEV2ZW50c1BlclR5cGUiLCJvcmRlckJ5Iiwib3JkZXJEaXIiLCJjb21taXRtZW50IiwibWF4VHgiLCJsb2dQcm92aWRlckNvbmZpZyIsInR5cGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/events/webSocketLogProvider.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/events/webSocketLogProvider.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WebSocketLogProvider = void 0;\nclass WebSocketLogProvider {\n    constructor(connection, address, commitment){\n        this.connection = connection;\n        this.address = address;\n        this.commitment = commitment;\n    }\n    subscribe(callback) {\n        if (this.subscriptionId) {\n            return true;\n        }\n        this.subscriptionId = this.connection.onLogs(this.address, (logs, ctx)=>{\n            callback(logs.signature, ctx.slot, logs.logs, undefined);\n        }, this.commitment);\n        return true;\n    }\n    isSubscribed() {\n        return this.subscriptionId !== undefined;\n    }\n    async unsubscribe() {\n        if (this.subscriptionId !== undefined) {\n            await this.connection.removeOnLogsListener(this.subscriptionId);\n            this.subscriptionId = undefined;\n        }\n        return true;\n    }\n}\nexports.WebSocketLogProvider = WebSocketLogProvider;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvd2ViU29ja2V0TG9nUHJvdmlkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDRCQUE0QixHQUFHLEtBQUs7QUFDcEMsTUFBTUU7SUFDRkMsWUFBWUMsVUFBVSxFQUFFQyxPQUFPLEVBQUVDLFVBQVUsQ0FBRTtRQUN6QyxJQUFJLENBQUNGLFVBQVUsR0FBR0E7UUFDbEIsSUFBSSxDQUFDQyxPQUFPLEdBQUdBO1FBQ2YsSUFBSSxDQUFDQyxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0FDLFVBQVVDLFFBQVEsRUFBRTtRQUNoQixJQUFJLElBQUksQ0FBQ0MsY0FBYyxFQUFFO1lBQ3JCLE9BQU87UUFDWDtRQUNBLElBQUksQ0FBQ0EsY0FBYyxHQUFHLElBQUksQ0FBQ0wsVUFBVSxDQUFDTSxNQUFNLENBQUMsSUFBSSxDQUFDTCxPQUFPLEVBQUUsQ0FBQ00sTUFBTUM7WUFDOURKLFNBQVNHLEtBQUtFLFNBQVMsRUFBRUQsSUFBSUUsSUFBSSxFQUFFSCxLQUFLQSxJQUFJLEVBQUVJO1FBQ2xELEdBQUcsSUFBSSxDQUFDVCxVQUFVO1FBQ2xCLE9BQU87SUFDWDtJQUNBVSxlQUFlO1FBQ1gsT0FBTyxJQUFJLENBQUNQLGNBQWMsS0FBS007SUFDbkM7SUFDQSxNQUFNRSxjQUFjO1FBQ2hCLElBQUksSUFBSSxDQUFDUixjQUFjLEtBQUtNLFdBQVc7WUFDbkMsTUFBTSxJQUFJLENBQUNYLFVBQVUsQ0FBQ2Msb0JBQW9CLENBQUMsSUFBSSxDQUFDVCxjQUFjO1lBQzlELElBQUksQ0FBQ0EsY0FBYyxHQUFHTTtRQUMxQjtRQUNBLE9BQU87SUFDWDtBQUNKO0FBQ0FmLDRCQUE0QixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9ldmVudHMvd2ViU29ja2V0TG9nUHJvdmlkZXIuanM/NjMxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV2ViU29ja2V0TG9nUHJvdmlkZXIgPSB2b2lkIDA7XG5jbGFzcyBXZWJTb2NrZXRMb2dQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoY29ubmVjdGlvbiwgYWRkcmVzcywgY29tbWl0bWVudCkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgICAgICB0aGlzLmNvbW1pdG1lbnQgPSBjb21taXRtZW50O1xuICAgIH1cbiAgICBzdWJzY3JpYmUoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uSWQgPSB0aGlzLmNvbm5lY3Rpb24ub25Mb2dzKHRoaXMuYWRkcmVzcywgKGxvZ3MsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY2FsbGJhY2sobG9ncy5zaWduYXR1cmUsIGN0eC5zbG90LCBsb2dzLmxvZ3MsIHVuZGVmaW5lZCk7XG4gICAgICAgIH0sIHRoaXMuY29tbWl0bWVudCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpc1N1YnNjcmliZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbklkICE9PSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25JZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb24ucmVtb3ZlT25Mb2dzTGlzdGVuZXIodGhpcy5zdWJzY3JpcHRpb25JZCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbklkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydHMuV2ViU29ja2V0TG9nUHJvdmlkZXIgPSBXZWJTb2NrZXRMb2dQcm92aWRlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIldlYlNvY2tldExvZ1Byb3ZpZGVyIiwiY29uc3RydWN0b3IiLCJjb25uZWN0aW9uIiwiYWRkcmVzcyIsImNvbW1pdG1lbnQiLCJzdWJzY3JpYmUiLCJjYWxsYmFjayIsInN1YnNjcmlwdGlvbklkIiwib25Mb2dzIiwibG9ncyIsImN0eCIsInNpZ25hdHVyZSIsInNsb3QiLCJ1bmRlZmluZWQiLCJpc1N1YnNjcmliZWQiLCJ1bnN1YnNjcmliZSIsInJlbW92ZU9uTG9nc0xpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/events/webSocketLogProvider.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/factory/bigNum.js":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/factory/bigNum.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BigNum = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst assert_1 = __webpack_require__(/*! ../assert/assert */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\");\nconst numericConstants_1 = __webpack_require__(/*! ./../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nclass BigNum {\n    static setLocale(locale) {\n        BigNum.delim = 1.1.toLocaleString(locale).slice(1, 2) || \".\";\n        BigNum.spacer = 1000..toLocaleString(locale).slice(1, 2) || \",\";\n    }\n    constructor(val, precisionVal = new anchor_1.BN(0)){\n        this.toString = (base, length)=>this.val.toString(base, length);\n        this.val = new anchor_1.BN(val);\n        this.precision = new anchor_1.BN(precisionVal);\n    }\n    bigNumFromParam(bn) {\n        return anchor_1.BN.isBN(bn) ? BigNum.from(bn) : bn;\n    }\n    add(bn) {\n        (0, assert_1.assert)(bn.precision.eq(this.precision), \"Adding unequal precisions\");\n        return BigNum.from(this.val.add(bn.val), this.precision);\n    }\n    sub(bn) {\n        (0, assert_1.assert)(bn.precision.eq(this.precision), \"Subtracting unequal precisions\");\n        return BigNum.from(this.val.sub(bn.val), this.precision);\n    }\n    mul(bn) {\n        const mulVal = this.bigNumFromParam(bn);\n        return BigNum.from(this.val.mul(mulVal.val), this.precision.add(mulVal.precision));\n    }\n    /**\n     * Multiplies by another big number then scales the result down by the big number's precision so that we're in the same precision space\n     * @param bn\n     * @returns\n     */ scalarMul(bn) {\n        if (anchor_1.BN.isBN(bn)) return BigNum.from(this.val.mul(bn), this.precision);\n        return BigNum.from(this.val.mul(bn.val), this.precision.add(bn.precision)).shift(bn.precision.neg());\n    }\n    div(bn) {\n        if (anchor_1.BN.isBN(bn)) return BigNum.from(this.val.div(bn), this.precision);\n        return BigNum.from(this.val.div(bn.val), this.precision.sub(bn.precision));\n    }\n    /**\n     * Shift precision up or down\n     * @param exponent\n     * @param skipAdjustingPrecision\n     * @returns\n     */ shift(exponent, skipAdjustingPrecision = false) {\n        const shiftVal = typeof exponent === \"number\" ? new anchor_1.BN(exponent) : exponent;\n        return BigNum.from(shiftVal.isNeg() ? this.val.div(new anchor_1.BN(10).pow(shiftVal)) : this.val.mul(new anchor_1.BN(10).pow(shiftVal)), skipAdjustingPrecision ? this.precision : this.precision.add(shiftVal));\n    }\n    /**\n     * Shift to a target precision\n     * @param targetPrecision\n     * @returns\n     */ shiftTo(targetPrecision) {\n        return this.shift(targetPrecision.sub(this.precision));\n    }\n    /**\n     * Scale the number by a fraction\n     * @param numerator\n     * @param denominator\n     * @returns\n     */ scale(numerator, denominator) {\n        return this.mul(BigNum.from(new anchor_1.BN(numerator))).div(new anchor_1.BN(denominator));\n    }\n    toPercentage(denominator, precision) {\n        return this.shift(precision).shift(2, true).div(denominator).toPrecision(precision);\n    }\n    gt(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), \"Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter\");\n        }\n        return this.val.gt(comparisonVal.val);\n    }\n    lt(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), \"Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter\");\n        }\n        return this.val.lt(comparisonVal.val);\n    }\n    gte(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), \"Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter\");\n        }\n        return this.val.gte(comparisonVal.val);\n    }\n    lte(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), \"Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter\");\n        }\n        return this.val.lte(comparisonVal.val);\n    }\n    eq(bn, ignorePrecision) {\n        const comparisonVal = this.bigNumFromParam(bn);\n        if (!ignorePrecision && !comparisonVal.val.eq(numericConstants_1.ZERO)) {\n            (0, assert_1.assert)(comparisonVal.precision.eq(this.precision), \"Trying to compare numbers with different precision. Yo can opt to ignore precision using the ignorePrecision parameter\");\n        }\n        return this.val.eq(comparisonVal.val);\n    }\n    eqZero() {\n        return this.val.eq(numericConstants_1.ZERO);\n    }\n    gtZero() {\n        return this.val.gt(numericConstants_1.ZERO);\n    }\n    ltZero() {\n        return this.val.lt(numericConstants_1.ZERO);\n    }\n    gteZero() {\n        return this.val.gte(numericConstants_1.ZERO);\n    }\n    lteZero() {\n        return this.val.lte(numericConstants_1.ZERO);\n    }\n    abs() {\n        return new BigNum(this.val.abs(), this.precision);\n    }\n    neg() {\n        return new BigNum(this.val.neg(), this.precision);\n    }\n    /**\n     * Pretty print the underlying value in human-readable form. Depends on precision being correct for the output string to be correct\n     * @returns\n     */ print() {\n        (0, assert_1.assert)(this.precision.gte(numericConstants_1.ZERO), \"Tried to print a BN with precision lower than zero\");\n        const isNeg = this.isNeg();\n        const plainString = this.abs().toString();\n        const precisionNum = this.precision.toNumber();\n        // make a string with at least the precisionNum number of zeroes\n        let printString = [\n            ...Array(this.precision.toNumber()).fill(0),\n            ...plainString.split(\"\")\n        ].join(\"\");\n        // inject decimal\n        printString = printString.substring(0, printString.length - precisionNum) + BigNum.delim + printString.substring(printString.length - precisionNum);\n        // remove leading zeroes\n        printString = printString.replace(/^0+/, \"\");\n        // add zero if leading delim\n        if (printString[0] === BigNum.delim) printString = `0${printString}`;\n        // Add minus if negative\n        if (isNeg) printString = `-${printString}`;\n        // remove trailing delim\n        if (printString[printString.length - 1] === BigNum.delim) printString = printString.slice(0, printString.length - 1);\n        return printString;\n    }\n    prettyPrint(useTradePrecision, precisionOverride) {\n        const [leftSide, rightSide] = this.printShort(useTradePrecision, precisionOverride).split(BigNum.delim);\n        let formattedLeftSide = leftSide;\n        const isNeg = formattedLeftSide.includes(\"-\");\n        if (isNeg) {\n            formattedLeftSide = formattedLeftSide.replace(\"-\", \"\");\n        }\n        let index = formattedLeftSide.length - 3;\n        while(index >= 1){\n            const formattedLeftSideArray = formattedLeftSide.split(\"\");\n            formattedLeftSideArray.splice(index, 0, BigNum.spacer);\n            formattedLeftSide = formattedLeftSideArray.join(\"\");\n            index -= 3;\n        }\n        return `${isNeg ? \"-\" : \"\"}${formattedLeftSide}${rightSide ? `${BigNum.delim}${rightSide}` : \"\"}`;\n    }\n    /**\n     * Print and remove unnecessary trailing zeroes\n     * @returns\n     */ printShort(useTradePrecision, precisionOverride) {\n        const printVal = precisionOverride ? this.toPrecision(precisionOverride) : useTradePrecision ? this.toTradePrecision() : this.print();\n        if (!printVal.includes(BigNum.delim)) return printVal;\n        return printVal.replace(/0+$/g, \"\").replace(/\\.$/, \"\").replace(/,$/, \"\");\n    }\n    debug() {\n        console.log(`${this.toString()} | ${this.print()} | ${this.precision.toString()}`);\n    }\n    /**\n     * Pretty print with the specified number of decimal places\n     * @param fixedPrecision\n     * @returns\n     */ toFixed(fixedPrecision, rounded = false) {\n        if (rounded) {\n            return this.toRounded(fixedPrecision).toFixed(fixedPrecision);\n        }\n        const printString = this.print();\n        const [leftSide, rightSide] = printString.split(BigNum.delim);\n        const filledRightSide = [\n            ...(rightSide !== null && rightSide !== void 0 ? rightSide : \"\").slice(0, fixedPrecision),\n            ...Array(fixedPrecision).fill(\"0\")\n        ].slice(0, fixedPrecision).join(\"\");\n        return `${leftSide}${BigNum.delim}${filledRightSide}`;\n    }\n    getZeroes(count) {\n        return new Array(Math.max(count, 0)).fill(\"0\").join(\"\");\n    }\n    toRounded(roundingPrecision) {\n        const printString = this.toString();\n        let shouldRoundUp = false;\n        const roundingDigitChar = printString[roundingPrecision];\n        if (roundingDigitChar) {\n            const roundingDigitVal = Number(roundingDigitChar);\n            if (roundingDigitVal >= 5) shouldRoundUp = true;\n        }\n        if (shouldRoundUp) {\n            const valueWithRoundedPrecisionAdded = this.add(BigNum.from(new anchor_1.BN(10).pow(new anchor_1.BN(printString.length - roundingPrecision)), this.precision));\n            const roundedUpPrintString = valueWithRoundedPrecisionAdded.toString().slice(0, roundingPrecision) + this.getZeroes(printString.length - roundingPrecision);\n            return BigNum.from(roundedUpPrintString, this.precision);\n        } else {\n            const roundedDownPrintString = printString.slice(0, roundingPrecision) + this.getZeroes(printString.length - roundingPrecision);\n            return BigNum.from(roundedDownPrintString, this.precision);\n        }\n    }\n    /**\n     * Pretty print to the specified number of significant figures\n     * @param fixedPrecision\n     * @returns\n     */ toPrecision(fixedPrecision, trailingZeroes = false, rounded = false) {\n        if (rounded) {\n            return this.toRounded(fixedPrecision).toPrecision(fixedPrecision, trailingZeroes);\n        }\n        const isNeg = this.isNeg();\n        const printString = this.abs().print();\n        const thisString = this.abs().toString();\n        let precisionPrintString = printString.slice(0, fixedPrecision + 1);\n        if (!printString.includes(BigNum.delim) && thisString.length < fixedPrecision) {\n            const precisionMismatch = fixedPrecision - thisString.length;\n            return BigNum.from((isNeg ? \"-\" : \"\") + thisString + this.getZeroes(precisionMismatch), precisionMismatch).toPrecision(fixedPrecision, trailingZeroes);\n        }\n        if (!precisionPrintString.includes(BigNum.delim) || precisionPrintString[precisionPrintString.length - 1] === BigNum.delim) {\n            precisionPrintString = printString.slice(0, fixedPrecision);\n        }\n        const pointsOfPrecision = precisionPrintString.replace(BigNum.delim, \"\").length;\n        if (pointsOfPrecision < fixedPrecision) {\n            precisionPrintString = [\n                ...precisionPrintString.split(\"\"),\n                ...Array(fixedPrecision - pointsOfPrecision).fill(\"0\")\n            ].join(\"\");\n        }\n        if (!precisionPrintString.includes(BigNum.delim)) {\n            const delimFullStringLocation = printString.indexOf(BigNum.delim);\n            let skipExponent = false;\n            if (delimFullStringLocation === -1) {\n                // no decimal, not missing any precision\n                skipExponent = true;\n            }\n            if (precisionPrintString[precisionPrintString.length - 1] === BigNum.delim) {\n                // decimal is at end of string, not missing any precision, do nothing\n                skipExponent = true;\n            }\n            if (printString.indexOf(BigNum.delim) === fixedPrecision) {\n                // decimal is at end of string, not missing any precision, do nothing\n                skipExponent = true;\n            }\n            if (!skipExponent) {\n                const exponent = delimFullStringLocation - fixedPrecision;\n                if (trailingZeroes) {\n                    precisionPrintString = `${precisionPrintString}${Array(exponent).fill(\"0\").join(\"\")}`;\n                } else {\n                    precisionPrintString = `${precisionPrintString}e${exponent}`;\n                }\n            }\n        }\n        return `${isNeg ? \"-\" : \"\"}${precisionPrintString}`;\n    }\n    toTradePrecision(rounded = false) {\n        return this.toPrecision(6, true, rounded);\n    }\n    /**\n     * Print dollar formatted value. Defaults to fixed decimals two unless a given precision is given.\n     * @param useTradePrecision\n     * @param precisionOverride\n     * @returns\n     */ toNotional(useTradePrecision, precisionOverride) {\n        var _a;\n        const prefix = `${this.lt(BigNum.zero()) ? `-` : ``}$`;\n        const usingCustomPrecision =  true && (useTradePrecision || precisionOverride);\n        let val = usingCustomPrecision ? this.prettyPrint(useTradePrecision, precisionOverride) : BigNum.fromPrint(this.toFixed(2), new anchor_1.BN(2)).prettyPrint();\n        // Append trailing zeroes out to 2 decimal places if not using custom precision\n        if (!usingCustomPrecision) {\n            const [_, rightSide] = val.split(BigNum.delim);\n            const trailingLength = (_a = rightSide === null || rightSide === void 0 ? void 0 : rightSide.length) !== null && _a !== void 0 ? _a : 0;\n            if (trailingLength === 0) {\n                val = `${val}${BigNum.delim}00`;\n            } else if (trailingLength === 1) {\n                val = `${val}0`;\n            }\n        }\n        return `${prefix}${val.replace(\"-\", \"\")}`;\n    }\n    toMillified(precision = 3, rounded = false) {\n        if (rounded) {\n            return this.toRounded(precision).toMillified(precision);\n        }\n        const isNeg = this.isNeg();\n        const stringVal = this.abs().print();\n        const [leftSide] = stringVal.split(BigNum.delim);\n        if (!leftSide) {\n            return this.shift(new anchor_1.BN(precision)).toPrecision(precision, true);\n        }\n        if (leftSide.length <= precision) {\n            return this.toPrecision(precision);\n        }\n        if (leftSide.length <= 3) {\n            return this.shift(new anchor_1.BN(precision)).toPrecision(precision, true);\n        }\n        const unitTicks = [\n            \"\",\n            \"K\",\n            \"M\",\n            \"G\",\n            \"T\",\n            \"P\",\n            \"E\",\n            \"Z\",\n            \"Y\"\n        ];\n        const unitNumber = Math.floor((leftSide.length - 1) / 3);\n        const unit = unitTicks[unitNumber];\n        let leadDigits = leftSide.slice(0, precision);\n        if (leadDigits.length < precision) {\n            leadDigits = [\n                ...leadDigits.split(\"\"),\n                ...Array(precision - leadDigits.length).fill(\"0\")\n            ].join(\"\");\n        }\n        const decimalLocation = leftSide.length - 3 * unitNumber;\n        let leadString = \"\";\n        if (decimalLocation >= precision) {\n            leadString = `${leadDigits}`;\n        } else {\n            leadString = `${leadDigits.slice(0, decimalLocation)}${BigNum.delim}${leadDigits.slice(decimalLocation)}`;\n        }\n        return `${isNeg ? \"-\" : \"\"}${leadString}${unit}`;\n    }\n    toJSON() {\n        return {\n            val: this.val.toString(),\n            precision: this.precision.toString()\n        };\n    }\n    isNeg() {\n        return this.lt(numericConstants_1.ZERO, true);\n    }\n    isPos() {\n        return !this.isNeg();\n    }\n    /**\n     * Get the numerical value of the BigNum. This can break if the BigNum is too large.\n     * @returns\n     */ toNum() {\n        let printedValue = this.print();\n        // Must convert any non-US delimiters and spacers to US format before using parseFloat\n        if (BigNum.delim !== \".\" || BigNum.spacer !== \",\") {\n            printedValue = printedValue.split(\"\").map((char)=>{\n                if (char === BigNum.delim) return \".\";\n                if (char === BigNum.spacer) return \",\";\n                return char;\n            }).join(\"\");\n        }\n        return parseFloat(printedValue);\n    }\n    static fromJSON(json) {\n        return BigNum.from(new anchor_1.BN(json.val), new anchor_1.BN(json.precision));\n    }\n    /**\n     * Create a BigNum instance\n     * @param val\n     * @param precision\n     * @returns\n     */ static from(val = numericConstants_1.ZERO, precision) {\n        (0, assert_1.assert)(new anchor_1.BN(precision).lt(new anchor_1.BN(100)), \"Tried to create a bignum with precision higher than 10^100\");\n        return new BigNum(val, precision);\n    }\n    /**\n     * Create a BigNum instance from a printed BigNum\n     * @param val\n     * @param precisionOverride\n     * @returns\n     */ static fromPrint(val, precisionShift) {\n        var _a;\n        // Handle empty number edge cases\n        if (!val) return BigNum.from(numericConstants_1.ZERO, precisionShift);\n        if (!val.replace(BigNum.delim, \"\")) {\n            return BigNum.from(numericConstants_1.ZERO, precisionShift);\n        }\n        const sides = val.split(BigNum.delim);\n        const rightSide = sides[1];\n        const leftSide = sides[0].replace(/\\s/g, \"\");\n        const bnInput = `${leftSide !== null && leftSide !== void 0 ? leftSide : \"\"}${rightSide !== null && rightSide !== void 0 ? rightSide : \"\"}`;\n        const rawBn = new anchor_1.BN(bnInput);\n        const rightSideLength = (_a = rightSide === null || rightSide === void 0 ? void 0 : rightSide.length) !== null && _a !== void 0 ? _a : 0;\n        const totalShift = precisionShift ? precisionShift.sub(new anchor_1.BN(rightSideLength)) : numericConstants_1.ZERO;\n        return BigNum.from(rawBn, precisionShift).shift(totalShift, true);\n    }\n    static max(a, b) {\n        return a.gt(b) ? a : b;\n    }\n    static min(a, b) {\n        return a.lt(b) ? a : b;\n    }\n    static zero(precision) {\n        return BigNum.from(0, precision);\n    }\n}\nexports.BigNum = BigNum;\nBigNum.delim = \".\";\nBigNum.spacer = \",\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9mYWN0b3J5L2JpZ051bS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsY0FBYyxHQUFHLEtBQUs7QUFDdEIsTUFBTUcsV0FBV0MsbUJBQU9BLENBQUMsbUZBQW1CO0FBQzVDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLG1GQUFrQjtBQUMzQyxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLCtHQUFpQztBQUNwRSxNQUFNRjtJQUNGLE9BQU9LLFVBQVVDLE1BQU0sRUFBRTtRQUNyQk4sT0FBT08sS0FBSyxHQUFHLElBQU1DLGNBQWMsQ0FBQ0YsUUFBUUcsS0FBSyxDQUFDLEdBQUcsTUFBTTtRQUMzRFQsT0FBT1UsTUFBTSxHQUFHLE1BQU9GLGNBQWMsQ0FBQ0YsUUFBUUcsS0FBSyxDQUFDLEdBQUcsTUFBTTtJQUNqRTtJQUNBRSxZQUFZQyxHQUFHLEVBQUVDLGVBQWUsSUFBSVosU0FBU2EsRUFBRSxDQUFDLEVBQUUsQ0FBRTtRQUNoRCxJQUFJLENBQUNDLFFBQVEsR0FBRyxDQUFDQyxNQUFNQyxTQUFXLElBQUksQ0FBQ0wsR0FBRyxDQUFDRyxRQUFRLENBQUNDLE1BQU1DO1FBQzFELElBQUksQ0FBQ0wsR0FBRyxHQUFHLElBQUlYLFNBQVNhLEVBQUUsQ0FBQ0Y7UUFDM0IsSUFBSSxDQUFDTSxTQUFTLEdBQUcsSUFBSWpCLFNBQVNhLEVBQUUsQ0FBQ0Q7SUFDckM7SUFDQU0sZ0JBQWdCQyxFQUFFLEVBQUU7UUFDaEIsT0FBT25CLFNBQVNhLEVBQUUsQ0FBQ08sSUFBSSxDQUFDRCxNQUFNcEIsT0FBT3NCLElBQUksQ0FBQ0YsTUFBTUE7SUFDcEQ7SUFDQUcsSUFBSUgsRUFBRSxFQUFFO1FBQ0gsSUFBR2pCLFNBQVNxQixNQUFNLEVBQUVKLEdBQUdGLFNBQVMsQ0FBQ08sRUFBRSxDQUFDLElBQUksQ0FBQ1AsU0FBUyxHQUFH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RSxDQUFDOEgsb0JBQ25DeEksbUJBQW1CNEMsSUFBSTtRQUM3QixPQUFPaEQsT0FBT3NCLElBQUksQ0FBQ3FILE9BQU9ILGdCQUFnQjFHLEtBQUssQ0FBQytHLFlBQVk7SUFDaEU7SUFDQSxPQUFPaEQsSUFBSWlELENBQUMsRUFBRUMsQ0FBQyxFQUFFO1FBQ2IsT0FBT0QsRUFBRWpHLEVBQUUsQ0FBQ2tHLEtBQUtELElBQUlDO0lBQ3pCO0lBQ0EsT0FBT0MsSUFBSUYsQ0FBQyxFQUFFQyxDQUFDLEVBQUU7UUFDYixPQUFPRCxFQUFFN0YsRUFBRSxDQUFDOEYsS0FBS0QsSUFBSUM7SUFDekI7SUFDQSxPQUFPOUIsS0FBSy9GLFNBQVMsRUFBRTtRQUNuQixPQUFPbEIsT0FBT3NCLElBQUksQ0FBQyxHQUFHSjtJQUMxQjtBQUNKO0FBQ0FwQixjQUFjLEdBQUdFO0FBQ2pCQSxPQUFPTyxLQUFLLEdBQUc7QUFDZlAsT0FBT1UsTUFBTSxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2ZhY3RvcnkvYmlnTnVtLmpzP2IwMjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJpZ051bSA9IHZvaWQgMDtcbmNvbnN0IGFuY2hvcl8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yXCIpO1xuY29uc3QgYXNzZXJ0XzEgPSByZXF1aXJlKFwiLi4vYXNzZXJ0L2Fzc2VydFwiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLy4uL2NvbnN0YW50cy9udW1lcmljQ29uc3RhbnRzXCIpO1xuY2xhc3MgQmlnTnVtIHtcbiAgICBzdGF0aWMgc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgICAgICBCaWdOdW0uZGVsaW0gPSAoMS4xKS50b0xvY2FsZVN0cmluZyhsb2NhbGUpLnNsaWNlKDEsIDIpIHx8ICcuJztcbiAgICAgICAgQmlnTnVtLnNwYWNlciA9ICgxMDAwKS50b0xvY2FsZVN0cmluZyhsb2NhbGUpLnNsaWNlKDEsIDIpIHx8ICcsJztcbiAgICB9XG4gICAgY29uc3RydWN0b3IodmFsLCBwcmVjaXNpb25WYWwgPSBuZXcgYW5jaG9yXzEuQk4oMCkpIHtcbiAgICAgICAgdGhpcy50b1N0cmluZyA9IChiYXNlLCBsZW5ndGgpID0+IHRoaXMudmFsLnRvU3RyaW5nKGJhc2UsIGxlbmd0aCk7XG4gICAgICAgIHRoaXMudmFsID0gbmV3IGFuY2hvcl8xLkJOKHZhbCk7XG4gICAgICAgIHRoaXMucHJlY2lzaW9uID0gbmV3IGFuY2hvcl8xLkJOKHByZWNpc2lvblZhbCk7XG4gICAgfVxuICAgIGJpZ051bUZyb21QYXJhbShibikge1xuICAgICAgICByZXR1cm4gYW5jaG9yXzEuQk4uaXNCTihibikgPyBCaWdOdW0uZnJvbShibikgOiBibjtcbiAgICB9XG4gICAgYWRkKGJuKSB7XG4gICAgICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKGJuLnByZWNpc2lvbi5lcSh0aGlzLnByZWNpc2lvbiksICdBZGRpbmcgdW5lcXVhbCBwcmVjaXNpb25zJyk7XG4gICAgICAgIHJldHVybiBCaWdOdW0uZnJvbSh0aGlzLnZhbC5hZGQoYm4udmFsKSwgdGhpcy5wcmVjaXNpb24pO1xuICAgIH1cbiAgICBzdWIoYm4pIHtcbiAgICAgICAgKDAsIGFzc2VydF8xLmFzc2VydCkoYm4ucHJlY2lzaW9uLmVxKHRoaXMucHJlY2lzaW9uKSwgJ1N1YnRyYWN0aW5nIHVuZXF1YWwgcHJlY2lzaW9ucycpO1xuICAgICAgICByZXR1cm4gQmlnTnVtLmZyb20odGhpcy52YWwuc3ViKGJuLnZhbCksIHRoaXMucHJlY2lzaW9uKTtcbiAgICB9XG4gICAgbXVsKGJuKSB7XG4gICAgICAgIGNvbnN0IG11bFZhbCA9IHRoaXMuYmlnTnVtRnJvbVBhcmFtKGJuKTtcbiAgICAgICAgcmV0dXJuIEJpZ051bS5mcm9tKHRoaXMudmFsLm11bChtdWxWYWwudmFsKSwgdGhpcy5wcmVjaXNpb24uYWRkKG11bFZhbC5wcmVjaXNpb24pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTXVsdGlwbGllcyBieSBhbm90aGVyIGJpZyBudW1iZXIgdGhlbiBzY2FsZXMgdGhlIHJlc3VsdCBkb3duIGJ5IHRoZSBiaWcgbnVtYmVyJ3MgcHJlY2lzaW9uIHNvIHRoYXQgd2UncmUgaW4gdGhlIHNhbWUgcHJlY2lzaW9uIHNwYWNlXG4gICAgICogQHBhcmFtIGJuXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBzY2FsYXJNdWwoYm4pIHtcbiAgICAgICAgaWYgKGFuY2hvcl8xLkJOLmlzQk4oYm4pKVxuICAgICAgICAgICAgcmV0dXJuIEJpZ051bS5mcm9tKHRoaXMudmFsLm11bChibiksIHRoaXMucHJlY2lzaW9uKTtcbiAgICAgICAgcmV0dXJuIEJpZ051bS5mcm9tKHRoaXMudmFsLm11bChibi52YWwpLCB0aGlzLnByZWNpc2lvbi5hZGQoYm4ucHJlY2lzaW9uKSkuc2hpZnQoYm4ucHJlY2lzaW9uLm5lZygpKTtcbiAgICB9XG4gICAgZGl2KGJuKSB7XG4gICAgICAgIGlmIChhbmNob3JfMS5CTi5pc0JOKGJuKSlcbiAgICAgICAgICAgIHJldHVybiBCaWdOdW0uZnJvbSh0aGlzLnZhbC5kaXYoYm4pLCB0aGlzLnByZWNpc2lvbik7XG4gICAgICAgIHJldHVybiBCaWdOdW0uZnJvbSh0aGlzLnZhbC5kaXYoYm4udmFsKSwgdGhpcy5wcmVjaXNpb24uc3ViKGJuLnByZWNpc2lvbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaGlmdCBwcmVjaXNpb24gdXAgb3IgZG93blxuICAgICAqIEBwYXJhbSBleHBvbmVudFxuICAgICAqIEBwYXJhbSBza2lwQWRqdXN0aW5nUHJlY2lzaW9uXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBzaGlmdChleHBvbmVudCwgc2tpcEFkanVzdGluZ1ByZWNpc2lvbiA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHNoaWZ0VmFsID0gdHlwZW9mIGV4cG9uZW50ID09PSAnbnVtYmVyJyA/IG5ldyBhbmNob3JfMS5CTihleHBvbmVudCkgOiBleHBvbmVudDtcbiAgICAgICAgcmV0dXJuIEJpZ051bS5mcm9tKHNoaWZ0VmFsLmlzTmVnKClcbiAgICAgICAgICAgID8gdGhpcy52YWwuZGl2KG5ldyBhbmNob3JfMS5CTigxMCkucG93KHNoaWZ0VmFsKSlcbiAgICAgICAgICAgIDogdGhpcy52YWwubXVsKG5ldyBhbmNob3JfMS5CTigxMCkucG93KHNoaWZ0VmFsKSksIHNraXBBZGp1c3RpbmdQcmVjaXNpb24gPyB0aGlzLnByZWNpc2lvbiA6IHRoaXMucHJlY2lzaW9uLmFkZChzaGlmdFZhbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaGlmdCB0byBhIHRhcmdldCBwcmVjaXNpb25cbiAgICAgKiBAcGFyYW0gdGFyZ2V0UHJlY2lzaW9uXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBzaGlmdFRvKHRhcmdldFByZWNpc2lvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGlmdCh0YXJnZXRQcmVjaXNpb24uc3ViKHRoaXMucHJlY2lzaW9uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjYWxlIHRoZSBudW1iZXIgYnkgYSBmcmFjdGlvblxuICAgICAqIEBwYXJhbSBudW1lcmF0b3JcbiAgICAgKiBAcGFyYW0gZGVub21pbmF0b3JcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHNjYWxlKG51bWVyYXRvciwgZGVub21pbmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsKEJpZ051bS5mcm9tKG5ldyBhbmNob3JfMS5CTihudW1lcmF0b3IpKSkuZGl2KG5ldyBhbmNob3JfMS5CTihkZW5vbWluYXRvcikpO1xuICAgIH1cbiAgICB0b1BlcmNlbnRhZ2UoZGVub21pbmF0b3IsIHByZWNpc2lvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGlmdChwcmVjaXNpb24pXG4gICAgICAgICAgICAuc2hpZnQoMiwgdHJ1ZSlcbiAgICAgICAgICAgIC5kaXYoZGVub21pbmF0b3IpXG4gICAgICAgICAgICAudG9QcmVjaXNpb24ocHJlY2lzaW9uKTtcbiAgICB9XG4gICAgZ3QoYm4sIGlnbm9yZVByZWNpc2lvbikge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uVmFsID0gdGhpcy5iaWdOdW1Gcm9tUGFyYW0oYm4pO1xuICAgICAgICBpZiAoIWlnbm9yZVByZWNpc2lvbiAmJiAhY29tcGFyaXNvblZhbC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKGNvbXBhcmlzb25WYWwucHJlY2lzaW9uLmVxKHRoaXMucHJlY2lzaW9uKSwgJ1RyeWluZyB0byBjb21wYXJlIG51bWJlcnMgd2l0aCBkaWZmZXJlbnQgcHJlY2lzaW9uLiBZbyBjYW4gb3B0IHRvIGlnbm9yZSBwcmVjaXNpb24gdXNpbmcgdGhlIGlnbm9yZVByZWNpc2lvbiBwYXJhbWV0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52YWwuZ3QoY29tcGFyaXNvblZhbC52YWwpO1xuICAgIH1cbiAgICBsdChibiwgaWdub3JlUHJlY2lzaW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbXBhcmlzb25WYWwgPSB0aGlzLmJpZ051bUZyb21QYXJhbShibik7XG4gICAgICAgIGlmICghaWdub3JlUHJlY2lzaW9uICYmICFjb21wYXJpc29uVmFsLnZhbC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKGNvbXBhcmlzb25WYWwucHJlY2lzaW9uLmVxKHRoaXMucHJlY2lzaW9uKSwgJ1RyeWluZyB0byBjb21wYXJlIG51bWJlcnMgd2l0aCBkaWZmZXJlbnQgcHJlY2lzaW9uLiBZbyBjYW4gb3B0IHRvIGlnbm9yZSBwcmVjaXNpb24gdXNpbmcgdGhlIGlnbm9yZVByZWNpc2lvbiBwYXJhbWV0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52YWwubHQoY29tcGFyaXNvblZhbC52YWwpO1xuICAgIH1cbiAgICBndGUoYm4sIGlnbm9yZVByZWNpc2lvbikge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uVmFsID0gdGhpcy5iaWdOdW1Gcm9tUGFyYW0oYm4pO1xuICAgICAgICBpZiAoIWlnbm9yZVByZWNpc2lvbiAmJiAhY29tcGFyaXNvblZhbC52YWwuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICAoMCwgYXNzZXJ0XzEuYXNzZXJ0KShjb21wYXJpc29uVmFsLnByZWNpc2lvbi5lcSh0aGlzLnByZWNpc2lvbiksICdUcnlpbmcgdG8gY29tcGFyZSBudW1iZXJzIHdpdGggZGlmZmVyZW50IHByZWNpc2lvbi4gWW8gY2FuIG9wdCB0byBpZ25vcmUgcHJlY2lzaW9uIHVzaW5nIHRoZSBpZ25vcmVQcmVjaXNpb24gcGFyYW1ldGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsLmd0ZShjb21wYXJpc29uVmFsLnZhbCk7XG4gICAgfVxuICAgIGx0ZShibiwgaWdub3JlUHJlY2lzaW9uKSB7XG4gICAgICAgIGNvbnN0IGNvbXBhcmlzb25WYWwgPSB0aGlzLmJpZ051bUZyb21QYXJhbShibik7XG4gICAgICAgIGlmICghaWdub3JlUHJlY2lzaW9uICYmICFjb21wYXJpc29uVmFsLnZhbC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKGNvbXBhcmlzb25WYWwucHJlY2lzaW9uLmVxKHRoaXMucHJlY2lzaW9uKSwgJ1RyeWluZyB0byBjb21wYXJlIG51bWJlcnMgd2l0aCBkaWZmZXJlbnQgcHJlY2lzaW9uLiBZbyBjYW4gb3B0IHRvIGlnbm9yZSBwcmVjaXNpb24gdXNpbmcgdGhlIGlnbm9yZVByZWNpc2lvbiBwYXJhbWV0ZXInKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52YWwubHRlKGNvbXBhcmlzb25WYWwudmFsKTtcbiAgICB9XG4gICAgZXEoYm4sIGlnbm9yZVByZWNpc2lvbikge1xuICAgICAgICBjb25zdCBjb21wYXJpc29uVmFsID0gdGhpcy5iaWdOdW1Gcm9tUGFyYW0oYm4pO1xuICAgICAgICBpZiAoIWlnbm9yZVByZWNpc2lvbiAmJiAhY29tcGFyaXNvblZhbC52YWwuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICAoMCwgYXNzZXJ0XzEuYXNzZXJ0KShjb21wYXJpc29uVmFsLnByZWNpc2lvbi5lcSh0aGlzLnByZWNpc2lvbiksICdUcnlpbmcgdG8gY29tcGFyZSBudW1iZXJzIHdpdGggZGlmZmVyZW50IHByZWNpc2lvbi4gWW8gY2FuIG9wdCB0byBpZ25vcmUgcHJlY2lzaW9uIHVzaW5nIHRoZSBpZ25vcmVQcmVjaXNpb24gcGFyYW1ldGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsLmVxKGNvbXBhcmlzb25WYWwudmFsKTtcbiAgICB9XG4gICAgZXFaZXJvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWwuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgIH1cbiAgICBndFplcm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgfVxuICAgIGx0WmVybygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKTtcbiAgICB9XG4gICAgZ3RlWmVybygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsLmd0ZShudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgfVxuICAgIGx0ZVplcm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbC5sdGUobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgIH1cbiAgICBhYnMoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmlnTnVtKHRoaXMudmFsLmFicygpLCB0aGlzLnByZWNpc2lvbik7XG4gICAgfVxuICAgIG5lZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaWdOdW0odGhpcy52YWwubmVnKCksIHRoaXMucHJlY2lzaW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJldHR5IHByaW50IHRoZSB1bmRlcmx5aW5nIHZhbHVlIGluIGh1bWFuLXJlYWRhYmxlIGZvcm0uIERlcGVuZHMgb24gcHJlY2lzaW9uIGJlaW5nIGNvcnJlY3QgZm9yIHRoZSBvdXRwdXQgc3RyaW5nIHRvIGJlIGNvcnJlY3RcbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHByaW50KCkge1xuICAgICAgICAoMCwgYXNzZXJ0XzEuYXNzZXJ0KSh0aGlzLnByZWNpc2lvbi5ndGUobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pLCAnVHJpZWQgdG8gcHJpbnQgYSBCTiB3aXRoIHByZWNpc2lvbiBsb3dlciB0aGFuIHplcm8nKTtcbiAgICAgICAgY29uc3QgaXNOZWcgPSB0aGlzLmlzTmVnKCk7XG4gICAgICAgIGNvbnN0IHBsYWluU3RyaW5nID0gdGhpcy5hYnMoKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBwcmVjaXNpb25OdW0gPSB0aGlzLnByZWNpc2lvbi50b051bWJlcigpO1xuICAgICAgICAvLyBtYWtlIGEgc3RyaW5nIHdpdGggYXQgbGVhc3QgdGhlIHByZWNpc2lvbk51bSBudW1iZXIgb2YgemVyb2VzXG4gICAgICAgIGxldCBwcmludFN0cmluZyA9IFtcbiAgICAgICAgICAgIC4uLkFycmF5KHRoaXMucHJlY2lzaW9uLnRvTnVtYmVyKCkpLmZpbGwoMCksXG4gICAgICAgICAgICAuLi5wbGFpblN0cmluZy5zcGxpdCgnJyksXG4gICAgICAgIF0uam9pbignJyk7XG4gICAgICAgIC8vIGluamVjdCBkZWNpbWFsXG4gICAgICAgIHByaW50U3RyaW5nID1cbiAgICAgICAgICAgIHByaW50U3RyaW5nLnN1YnN0cmluZygwLCBwcmludFN0cmluZy5sZW5ndGggLSBwcmVjaXNpb25OdW0pICtcbiAgICAgICAgICAgICAgICBCaWdOdW0uZGVsaW0gK1xuICAgICAgICAgICAgICAgIHByaW50U3RyaW5nLnN1YnN0cmluZyhwcmludFN0cmluZy5sZW5ndGggLSBwcmVjaXNpb25OdW0pO1xuICAgICAgICAvLyByZW1vdmUgbGVhZGluZyB6ZXJvZXNcbiAgICAgICAgcHJpbnRTdHJpbmcgPSBwcmludFN0cmluZy5yZXBsYWNlKC9eMCsvLCAnJyk7XG4gICAgICAgIC8vIGFkZCB6ZXJvIGlmIGxlYWRpbmcgZGVsaW1cbiAgICAgICAgaWYgKHByaW50U3RyaW5nWzBdID09PSBCaWdOdW0uZGVsaW0pXG4gICAgICAgICAgICBwcmludFN0cmluZyA9IGAwJHtwcmludFN0cmluZ31gO1xuICAgICAgICAvLyBBZGQgbWludXMgaWYgbmVnYXRpdmVcbiAgICAgICAgaWYgKGlzTmVnKVxuICAgICAgICAgICAgcHJpbnRTdHJpbmcgPSBgLSR7cHJpbnRTdHJpbmd9YDtcbiAgICAgICAgLy8gcmVtb3ZlIHRyYWlsaW5nIGRlbGltXG4gICAgICAgIGlmIChwcmludFN0cmluZ1twcmludFN0cmluZy5sZW5ndGggLSAxXSA9PT0gQmlnTnVtLmRlbGltKVxuICAgICAgICAgICAgcHJpbnRTdHJpbmcgPSBwcmludFN0cmluZy5zbGljZSgwLCBwcmludFN0cmluZy5sZW5ndGggLSAxKTtcbiAgICAgICAgcmV0dXJuIHByaW50U3RyaW5nO1xuICAgIH1cbiAgICBwcmV0dHlQcmludCh1c2VUcmFkZVByZWNpc2lvbiwgcHJlY2lzaW9uT3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3QgW2xlZnRTaWRlLCByaWdodFNpZGVdID0gdGhpcy5wcmludFNob3J0KHVzZVRyYWRlUHJlY2lzaW9uLCBwcmVjaXNpb25PdmVycmlkZSkuc3BsaXQoQmlnTnVtLmRlbGltKTtcbiAgICAgICAgbGV0IGZvcm1hdHRlZExlZnRTaWRlID0gbGVmdFNpZGU7XG4gICAgICAgIGNvbnN0IGlzTmVnID0gZm9ybWF0dGVkTGVmdFNpZGUuaW5jbHVkZXMoJy0nKTtcbiAgICAgICAgaWYgKGlzTmVnKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRMZWZ0U2lkZSA9IGZvcm1hdHRlZExlZnRTaWRlLnJlcGxhY2UoJy0nLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluZGV4ID0gZm9ybWF0dGVkTGVmdFNpZGUubGVuZ3RoIC0gMztcbiAgICAgICAgd2hpbGUgKGluZGV4ID49IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZExlZnRTaWRlQXJyYXkgPSBmb3JtYXR0ZWRMZWZ0U2lkZS5zcGxpdCgnJyk7XG4gICAgICAgICAgICBmb3JtYXR0ZWRMZWZ0U2lkZUFycmF5LnNwbGljZShpbmRleCwgMCwgQmlnTnVtLnNwYWNlcik7XG4gICAgICAgICAgICBmb3JtYXR0ZWRMZWZ0U2lkZSA9IGZvcm1hdHRlZExlZnRTaWRlQXJyYXkuam9pbignJyk7XG4gICAgICAgICAgICBpbmRleCAtPSAzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtpc05lZyA/ICctJyA6ICcnfSR7Zm9ybWF0dGVkTGVmdFNpZGV9JHtyaWdodFNpZGUgPyBgJHtCaWdOdW0uZGVsaW19JHtyaWdodFNpZGV9YCA6ICcnfWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW50IGFuZCByZW1vdmUgdW5uZWNlc3NhcnkgdHJhaWxpbmcgemVyb2VzXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBwcmludFNob3J0KHVzZVRyYWRlUHJlY2lzaW9uLCBwcmVjaXNpb25PdmVycmlkZSkge1xuICAgICAgICBjb25zdCBwcmludFZhbCA9IHByZWNpc2lvbk92ZXJyaWRlXG4gICAgICAgICAgICA/IHRoaXMudG9QcmVjaXNpb24ocHJlY2lzaW9uT3ZlcnJpZGUpXG4gICAgICAgICAgICA6IHVzZVRyYWRlUHJlY2lzaW9uXG4gICAgICAgICAgICAgICAgPyB0aGlzLnRvVHJhZGVQcmVjaXNpb24oKVxuICAgICAgICAgICAgICAgIDogdGhpcy5wcmludCgpO1xuICAgICAgICBpZiAoIXByaW50VmFsLmluY2x1ZGVzKEJpZ051bS5kZWxpbSkpXG4gICAgICAgICAgICByZXR1cm4gcHJpbnRWYWw7XG4gICAgICAgIHJldHVybiBwcmludFZhbC5yZXBsYWNlKC8wKyQvZywgJycpLnJlcGxhY2UoL1xcLiQvLCAnJykucmVwbGFjZSgvLCQvLCAnJyk7XG4gICAgfVxuICAgIGRlYnVnKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt0aGlzLnRvU3RyaW5nKCl9IHwgJHt0aGlzLnByaW50KCl9IHwgJHt0aGlzLnByZWNpc2lvbi50b1N0cmluZygpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmV0dHkgcHJpbnQgd2l0aCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlc1xuICAgICAqIEBwYXJhbSBmaXhlZFByZWNpc2lvblxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgdG9GaXhlZChmaXhlZFByZWNpc2lvbiwgcm91bmRlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChyb3VuZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b1JvdW5kZWQoZml4ZWRQcmVjaXNpb24pLnRvRml4ZWQoZml4ZWRQcmVjaXNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByaW50U3RyaW5nID0gdGhpcy5wcmludCgpO1xuICAgICAgICBjb25zdCBbbGVmdFNpZGUsIHJpZ2h0U2lkZV0gPSBwcmludFN0cmluZy5zcGxpdChCaWdOdW0uZGVsaW0pO1xuICAgICAgICBjb25zdCBmaWxsZWRSaWdodFNpZGUgPSBbXG4gICAgICAgICAgICAuLi4ocmlnaHRTaWRlICE9PSBudWxsICYmIHJpZ2h0U2lkZSAhPT0gdm9pZCAwID8gcmlnaHRTaWRlIDogJycpLnNsaWNlKDAsIGZpeGVkUHJlY2lzaW9uKSxcbiAgICAgICAgICAgIC4uLkFycmF5KGZpeGVkUHJlY2lzaW9uKS5maWxsKCcwJyksXG4gICAgICAgIF1cbiAgICAgICAgICAgIC5zbGljZSgwLCBmaXhlZFByZWNpc2lvbilcbiAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgICAgcmV0dXJuIGAke2xlZnRTaWRlfSR7QmlnTnVtLmRlbGltfSR7ZmlsbGVkUmlnaHRTaWRlfWA7XG4gICAgfVxuICAgIGdldFplcm9lcyhjb3VudCkge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5KE1hdGgubWF4KGNvdW50LCAwKSkuZmlsbCgnMCcpLmpvaW4oJycpO1xuICAgIH1cbiAgICB0b1JvdW5kZWQocm91bmRpbmdQcmVjaXNpb24pIHtcbiAgICAgICAgY29uc3QgcHJpbnRTdHJpbmcgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBzaG91bGRSb3VuZFVwID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHJvdW5kaW5nRGlnaXRDaGFyID0gcHJpbnRTdHJpbmdbcm91bmRpbmdQcmVjaXNpb25dO1xuICAgICAgICBpZiAocm91bmRpbmdEaWdpdENoYXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvdW5kaW5nRGlnaXRWYWwgPSBOdW1iZXIocm91bmRpbmdEaWdpdENoYXIpO1xuICAgICAgICAgICAgaWYgKHJvdW5kaW5nRGlnaXRWYWwgPj0gNSlcbiAgICAgICAgICAgICAgICBzaG91bGRSb3VuZFVwID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkUm91bmRVcCkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVXaXRoUm91bmRlZFByZWNpc2lvbkFkZGVkID0gdGhpcy5hZGQoQmlnTnVtLmZyb20obmV3IGFuY2hvcl8xLkJOKDEwKS5wb3cobmV3IGFuY2hvcl8xLkJOKHByaW50U3RyaW5nLmxlbmd0aCAtIHJvdW5kaW5nUHJlY2lzaW9uKSksIHRoaXMucHJlY2lzaW9uKSk7XG4gICAgICAgICAgICBjb25zdCByb3VuZGVkVXBQcmludFN0cmluZyA9IHZhbHVlV2l0aFJvdW5kZWRQcmVjaXNpb25BZGRlZC50b1N0cmluZygpLnNsaWNlKDAsIHJvdW5kaW5nUHJlY2lzaW9uKSArXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRaZXJvZXMocHJpbnRTdHJpbmcubGVuZ3RoIC0gcm91bmRpbmdQcmVjaXNpb24pO1xuICAgICAgICAgICAgcmV0dXJuIEJpZ051bS5mcm9tKHJvdW5kZWRVcFByaW50U3RyaW5nLCB0aGlzLnByZWNpc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByb3VuZGVkRG93blByaW50U3RyaW5nID0gcHJpbnRTdHJpbmcuc2xpY2UoMCwgcm91bmRpbmdQcmVjaXNpb24pICtcbiAgICAgICAgICAgICAgICB0aGlzLmdldFplcm9lcyhwcmludFN0cmluZy5sZW5ndGggLSByb3VuZGluZ1ByZWNpc2lvbik7XG4gICAgICAgICAgICByZXR1cm4gQmlnTnVtLmZyb20ocm91bmRlZERvd25QcmludFN0cmluZywgdGhpcy5wcmVjaXNpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXR0eSBwcmludCB0byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBzaWduaWZpY2FudCBmaWd1cmVzXG4gICAgICogQHBhcmFtIGZpeGVkUHJlY2lzaW9uXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICB0b1ByZWNpc2lvbihmaXhlZFByZWNpc2lvbiwgdHJhaWxpbmdaZXJvZXMgPSBmYWxzZSwgcm91bmRlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChyb3VuZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b1JvdW5kZWQoZml4ZWRQcmVjaXNpb24pLnRvUHJlY2lzaW9uKGZpeGVkUHJlY2lzaW9uLCB0cmFpbGluZ1plcm9lcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNOZWcgPSB0aGlzLmlzTmVnKCk7XG4gICAgICAgIGNvbnN0IHByaW50U3RyaW5nID0gdGhpcy5hYnMoKS5wcmludCgpO1xuICAgICAgICBjb25zdCB0aGlzU3RyaW5nID0gdGhpcy5hYnMoKS50b1N0cmluZygpO1xuICAgICAgICBsZXQgcHJlY2lzaW9uUHJpbnRTdHJpbmcgPSBwcmludFN0cmluZy5zbGljZSgwLCBmaXhlZFByZWNpc2lvbiArIDEpO1xuICAgICAgICBpZiAoIXByaW50U3RyaW5nLmluY2x1ZGVzKEJpZ051bS5kZWxpbSkgJiZcbiAgICAgICAgICAgIHRoaXNTdHJpbmcubGVuZ3RoIDwgZml4ZWRQcmVjaXNpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHByZWNpc2lvbk1pc21hdGNoID0gZml4ZWRQcmVjaXNpb24gLSB0aGlzU3RyaW5nLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiBCaWdOdW0uZnJvbSgoaXNOZWcgPyAnLScgOiAnJykgKyB0aGlzU3RyaW5nICsgdGhpcy5nZXRaZXJvZXMocHJlY2lzaW9uTWlzbWF0Y2gpLCBwcmVjaXNpb25NaXNtYXRjaCkudG9QcmVjaXNpb24oZml4ZWRQcmVjaXNpb24sIHRyYWlsaW5nWmVyb2VzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZWNpc2lvblByaW50U3RyaW5nLmluY2x1ZGVzKEJpZ051bS5kZWxpbSkgfHxcbiAgICAgICAgICAgIHByZWNpc2lvblByaW50U3RyaW5nW3ByZWNpc2lvblByaW50U3RyaW5nLmxlbmd0aCAtIDFdID09PSBCaWdOdW0uZGVsaW0pIHtcbiAgICAgICAgICAgIHByZWNpc2lvblByaW50U3RyaW5nID0gcHJpbnRTdHJpbmcuc2xpY2UoMCwgZml4ZWRQcmVjaXNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvaW50c09mUHJlY2lzaW9uID0gcHJlY2lzaW9uUHJpbnRTdHJpbmcucmVwbGFjZShCaWdOdW0uZGVsaW0sICcnKS5sZW5ndGg7XG4gICAgICAgIGlmIChwb2ludHNPZlByZWNpc2lvbiA8IGZpeGVkUHJlY2lzaW9uKSB7XG4gICAgICAgICAgICBwcmVjaXNpb25QcmludFN0cmluZyA9IFtcbiAgICAgICAgICAgICAgICAuLi5wcmVjaXNpb25QcmludFN0cmluZy5zcGxpdCgnJyksXG4gICAgICAgICAgICAgICAgLi4uQXJyYXkoZml4ZWRQcmVjaXNpb24gLSBwb2ludHNPZlByZWNpc2lvbikuZmlsbCgnMCcpLFxuICAgICAgICAgICAgXS5qb2luKCcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZWNpc2lvblByaW50U3RyaW5nLmluY2x1ZGVzKEJpZ051bS5kZWxpbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlbGltRnVsbFN0cmluZ0xvY2F0aW9uID0gcHJpbnRTdHJpbmcuaW5kZXhPZihCaWdOdW0uZGVsaW0pO1xuICAgICAgICAgICAgbGV0IHNraXBFeHBvbmVudCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGRlbGltRnVsbFN0cmluZ0xvY2F0aW9uID09PSAtMSkge1xuICAgICAgICAgICAgICAgIC8vIG5vIGRlY2ltYWwsIG5vdCBtaXNzaW5nIGFueSBwcmVjaXNpb25cbiAgICAgICAgICAgICAgICBza2lwRXhwb25lbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByZWNpc2lvblByaW50U3RyaW5nW3ByZWNpc2lvblByaW50U3RyaW5nLmxlbmd0aCAtIDFdID09PSBCaWdOdW0uZGVsaW0pIHtcbiAgICAgICAgICAgICAgICAvLyBkZWNpbWFsIGlzIGF0IGVuZCBvZiBzdHJpbmcsIG5vdCBtaXNzaW5nIGFueSBwcmVjaXNpb24sIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICBza2lwRXhwb25lbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByaW50U3RyaW5nLmluZGV4T2YoQmlnTnVtLmRlbGltKSA9PT0gZml4ZWRQcmVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBkZWNpbWFsIGlzIGF0IGVuZCBvZiBzdHJpbmcsIG5vdCBtaXNzaW5nIGFueSBwcmVjaXNpb24sIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICBza2lwRXhwb25lbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFza2lwRXhwb25lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHBvbmVudCA9IGRlbGltRnVsbFN0cmluZ0xvY2F0aW9uIC0gZml4ZWRQcmVjaXNpb247XG4gICAgICAgICAgICAgICAgaWYgKHRyYWlsaW5nWmVyb2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWNpc2lvblByaW50U3RyaW5nID0gYCR7cHJlY2lzaW9uUHJpbnRTdHJpbmd9JHtBcnJheShleHBvbmVudClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWxsKCcwJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcnKX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uUHJpbnRTdHJpbmcgPSBgJHtwcmVjaXNpb25QcmludFN0cmluZ31lJHtleHBvbmVudH1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7aXNOZWcgPyAnLScgOiAnJ30ke3ByZWNpc2lvblByaW50U3RyaW5nfWA7XG4gICAgfVxuICAgIHRvVHJhZGVQcmVjaXNpb24ocm91bmRlZCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvUHJlY2lzaW9uKDYsIHRydWUsIHJvdW5kZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcmludCBkb2xsYXIgZm9ybWF0dGVkIHZhbHVlLiBEZWZhdWx0cyB0byBmaXhlZCBkZWNpbWFscyB0d28gdW5sZXNzIGEgZ2l2ZW4gcHJlY2lzaW9uIGlzIGdpdmVuLlxuICAgICAqIEBwYXJhbSB1c2VUcmFkZVByZWNpc2lvblxuICAgICAqIEBwYXJhbSBwcmVjaXNpb25PdmVycmlkZVxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgdG9Ob3Rpb25hbCh1c2VUcmFkZVByZWNpc2lvbiwgcHJlY2lzaW9uT3ZlcnJpZGUpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBwcmVmaXggPSBgJHt0aGlzLmx0KEJpZ051bS56ZXJvKCkpID8gYC1gIDogYGB9JGA7XG4gICAgICAgIGNvbnN0IHVzaW5nQ3VzdG9tUHJlY2lzaW9uID0gdHJ1ZSAmJiAodXNlVHJhZGVQcmVjaXNpb24gfHwgcHJlY2lzaW9uT3ZlcnJpZGUpO1xuICAgICAgICBsZXQgdmFsID0gdXNpbmdDdXN0b21QcmVjaXNpb25cbiAgICAgICAgICAgID8gdGhpcy5wcmV0dHlQcmludCh1c2VUcmFkZVByZWNpc2lvbiwgcHJlY2lzaW9uT3ZlcnJpZGUpXG4gICAgICAgICAgICA6IEJpZ051bS5mcm9tUHJpbnQodGhpcy50b0ZpeGVkKDIpLCBuZXcgYW5jaG9yXzEuQk4oMikpLnByZXR0eVByaW50KCk7XG4gICAgICAgIC8vIEFwcGVuZCB0cmFpbGluZyB6ZXJvZXMgb3V0IHRvIDIgZGVjaW1hbCBwbGFjZXMgaWYgbm90IHVzaW5nIGN1c3RvbSBwcmVjaXNpb25cbiAgICAgICAgaWYgKCF1c2luZ0N1c3RvbVByZWNpc2lvbikge1xuICAgICAgICAgICAgY29uc3QgW18sIHJpZ2h0U2lkZV0gPSB2YWwuc3BsaXQoQmlnTnVtLmRlbGltKTtcbiAgICAgICAgICAgIGNvbnN0IHRyYWlsaW5nTGVuZ3RoID0gKF9hID0gcmlnaHRTaWRlID09PSBudWxsIHx8IHJpZ2h0U2lkZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmlnaHRTaWRlLmxlbmd0aCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICAgICAgICAgIGlmICh0cmFpbGluZ0xlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhbCA9IGAke3ZhbH0ke0JpZ051bS5kZWxpbX0wMGA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0cmFpbGluZ0xlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHZhbCA9IGAke3ZhbH0wYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7cHJlZml4fSR7dmFsLnJlcGxhY2UoJy0nLCAnJyl9YDtcbiAgICB9XG4gICAgdG9NaWxsaWZpZWQocHJlY2lzaW9uID0gMywgcm91bmRlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChyb3VuZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b1JvdW5kZWQocHJlY2lzaW9uKS50b01pbGxpZmllZChwcmVjaXNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzTmVnID0gdGhpcy5pc05lZygpO1xuICAgICAgICBjb25zdCBzdHJpbmdWYWwgPSB0aGlzLmFicygpLnByaW50KCk7XG4gICAgICAgIGNvbnN0IFtsZWZ0U2lkZV0gPSBzdHJpbmdWYWwuc3BsaXQoQmlnTnVtLmRlbGltKTtcbiAgICAgICAgaWYgKCFsZWZ0U2lkZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hpZnQobmV3IGFuY2hvcl8xLkJOKHByZWNpc2lvbikpLnRvUHJlY2lzaW9uKHByZWNpc2lvbiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlZnRTaWRlLmxlbmd0aCA8PSBwcmVjaXNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvUHJlY2lzaW9uKHByZWNpc2lvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlZnRTaWRlLmxlbmd0aCA8PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGlmdChuZXcgYW5jaG9yXzEuQk4ocHJlY2lzaW9uKSkudG9QcmVjaXNpb24ocHJlY2lzaW9uLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1bml0VGlja3MgPSBbJycsICdLJywgJ00nLCAnRycsICdUJywgJ1AnLCAnRScsICdaJywgJ1knXTtcbiAgICAgICAgY29uc3QgdW5pdE51bWJlciA9IE1hdGguZmxvb3IoKGxlZnRTaWRlLmxlbmd0aCAtIDEpIC8gMyk7XG4gICAgICAgIGNvbnN0IHVuaXQgPSB1bml0VGlja3NbdW5pdE51bWJlcl07XG4gICAgICAgIGxldCBsZWFkRGlnaXRzID0gbGVmdFNpZGUuc2xpY2UoMCwgcHJlY2lzaW9uKTtcbiAgICAgICAgaWYgKGxlYWREaWdpdHMubGVuZ3RoIDwgcHJlY2lzaW9uKSB7XG4gICAgICAgICAgICBsZWFkRGlnaXRzID0gW1xuICAgICAgICAgICAgICAgIC4uLmxlYWREaWdpdHMuc3BsaXQoJycpLFxuICAgICAgICAgICAgICAgIC4uLkFycmF5KHByZWNpc2lvbiAtIGxlYWREaWdpdHMubGVuZ3RoKS5maWxsKCcwJyksXG4gICAgICAgICAgICBdLmpvaW4oJycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlY2ltYWxMb2NhdGlvbiA9IGxlZnRTaWRlLmxlbmd0aCAtIDMgKiB1bml0TnVtYmVyO1xuICAgICAgICBsZXQgbGVhZFN0cmluZyA9ICcnO1xuICAgICAgICBpZiAoZGVjaW1hbExvY2F0aW9uID49IHByZWNpc2lvbikge1xuICAgICAgICAgICAgbGVhZFN0cmluZyA9IGAke2xlYWREaWdpdHN9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxlYWRTdHJpbmcgPSBgJHtsZWFkRGlnaXRzLnNsaWNlKDAsIGRlY2ltYWxMb2NhdGlvbil9JHtCaWdOdW0uZGVsaW19JHtsZWFkRGlnaXRzLnNsaWNlKGRlY2ltYWxMb2NhdGlvbil9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7aXNOZWcgPyAnLScgOiAnJ30ke2xlYWRTdHJpbmd9JHt1bml0fWA7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbDogdGhpcy52YWwudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHByZWNpc2lvbjogdGhpcy5wcmVjaXNpb24udG9TdHJpbmcoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNOZWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCB0cnVlKTtcbiAgICB9XG4gICAgaXNQb3MoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc05lZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG51bWVyaWNhbCB2YWx1ZSBvZiB0aGUgQmlnTnVtLiBUaGlzIGNhbiBicmVhayBpZiB0aGUgQmlnTnVtIGlzIHRvbyBsYXJnZS5cbiAgICAgKiBAcmV0dXJuc1xuICAgICAqL1xuICAgIHRvTnVtKCkge1xuICAgICAgICBsZXQgcHJpbnRlZFZhbHVlID0gdGhpcy5wcmludCgpO1xuICAgICAgICAvLyBNdXN0IGNvbnZlcnQgYW55IG5vbi1VUyBkZWxpbWl0ZXJzIGFuZCBzcGFjZXJzIHRvIFVTIGZvcm1hdCBiZWZvcmUgdXNpbmcgcGFyc2VGbG9hdFxuICAgICAgICBpZiAoQmlnTnVtLmRlbGltICE9PSAnLicgfHwgQmlnTnVtLnNwYWNlciAhPT0gJywnKSB7XG4gICAgICAgICAgICBwcmludGVkVmFsdWUgPSBwcmludGVkVmFsdWVcbiAgICAgICAgICAgICAgICAuc3BsaXQoJycpXG4gICAgICAgICAgICAgICAgLm1hcCgoY2hhcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSBCaWdOdW0uZGVsaW0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnLic7XG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09IEJpZ051bS5zcGFjZXIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnLCc7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChwcmludGVkVmFsdWUpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gQmlnTnVtLmZyb20obmV3IGFuY2hvcl8xLkJOKGpzb24udmFsKSwgbmV3IGFuY2hvcl8xLkJOKGpzb24ucHJlY2lzaW9uKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIEJpZ051bSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB2YWxcbiAgICAgKiBAcGFyYW0gcHJlY2lzaW9uXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbSh2YWwgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgcHJlY2lzaW9uKSB7XG4gICAgICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKG5ldyBhbmNob3JfMS5CTihwcmVjaXNpb24pLmx0KG5ldyBhbmNob3JfMS5CTigxMDApKSwgJ1RyaWVkIHRvIGNyZWF0ZSBhIGJpZ251bSB3aXRoIHByZWNpc2lvbiBoaWdoZXIgdGhhbiAxMF4xMDAnKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCaWdOdW0odmFsLCBwcmVjaXNpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBCaWdOdW0gaW5zdGFuY2UgZnJvbSBhIHByaW50ZWQgQmlnTnVtXG4gICAgICogQHBhcmFtIHZhbFxuICAgICAqIEBwYXJhbSBwcmVjaXNpb25PdmVycmlkZVxuICAgICAqIEByZXR1cm5zXG4gICAgICovXG4gICAgc3RhdGljIGZyb21QcmludCh2YWwsIHByZWNpc2lvblNoaWZ0KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgLy8gSGFuZGxlIGVtcHR5IG51bWJlciBlZGdlIGNhc2VzXG4gICAgICAgIGlmICghdmFsKVxuICAgICAgICAgICAgcmV0dXJuIEJpZ051bS5mcm9tKG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBwcmVjaXNpb25TaGlmdCk7XG4gICAgICAgIGlmICghdmFsLnJlcGxhY2UoQmlnTnVtLmRlbGltLCAnJykpIHtcbiAgICAgICAgICAgIHJldHVybiBCaWdOdW0uZnJvbShudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgcHJlY2lzaW9uU2hpZnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZGVzID0gdmFsLnNwbGl0KEJpZ051bS5kZWxpbSk7XG4gICAgICAgIGNvbnN0IHJpZ2h0U2lkZSA9IHNpZGVzWzFdO1xuICAgICAgICBjb25zdCBsZWZ0U2lkZSA9IHNpZGVzWzBdLnJlcGxhY2UoL1xccy9nLCAnJyk7XG4gICAgICAgIGNvbnN0IGJuSW5wdXQgPSBgJHtsZWZ0U2lkZSAhPT0gbnVsbCAmJiBsZWZ0U2lkZSAhPT0gdm9pZCAwID8gbGVmdFNpZGUgOiAnJ30ke3JpZ2h0U2lkZSAhPT0gbnVsbCAmJiByaWdodFNpZGUgIT09IHZvaWQgMCA/IHJpZ2h0U2lkZSA6ICcnfWA7XG4gICAgICAgIGNvbnN0IHJhd0JuID0gbmV3IGFuY2hvcl8xLkJOKGJuSW5wdXQpO1xuICAgICAgICBjb25zdCByaWdodFNpZGVMZW5ndGggPSAoX2EgPSByaWdodFNpZGUgPT09IG51bGwgfHwgcmlnaHRTaWRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByaWdodFNpZGUubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xuICAgICAgICBjb25zdCB0b3RhbFNoaWZ0ID0gcHJlY2lzaW9uU2hpZnRcbiAgICAgICAgICAgID8gcHJlY2lzaW9uU2hpZnQuc3ViKG5ldyBhbmNob3JfMS5CTihyaWdodFNpZGVMZW5ndGgpKVxuICAgICAgICAgICAgOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgcmV0dXJuIEJpZ051bS5mcm9tKHJhd0JuLCBwcmVjaXNpb25TaGlmdCkuc2hpZnQodG90YWxTaGlmdCwgdHJ1ZSk7XG4gICAgfVxuICAgIHN0YXRpYyBtYXgoYSwgYikge1xuICAgICAgICByZXR1cm4gYS5ndChiKSA/IGEgOiBiO1xuICAgIH1cbiAgICBzdGF0aWMgbWluKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEubHQoYikgPyBhIDogYjtcbiAgICB9XG4gICAgc3RhdGljIHplcm8ocHJlY2lzaW9uKSB7XG4gICAgICAgIHJldHVybiBCaWdOdW0uZnJvbSgwLCBwcmVjaXNpb24pO1xuICAgIH1cbn1cbmV4cG9ydHMuQmlnTnVtID0gQmlnTnVtO1xuQmlnTnVtLmRlbGltID0gJy4nO1xuQmlnTnVtLnNwYWNlciA9ICcsJztcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkJpZ051bSIsImFuY2hvcl8xIiwicmVxdWlyZSIsImFzc2VydF8xIiwibnVtZXJpY0NvbnN0YW50c18xIiwic2V0TG9jYWxlIiwibG9jYWxlIiwiZGVsaW0iLCJ0b0xvY2FsZVN0cmluZyIsInNsaWNlIiwic3BhY2VyIiwiY29uc3RydWN0b3IiLCJ2YWwiLCJwcmVjaXNpb25WYWwiLCJCTiIsInRvU3RyaW5nIiwiYmFzZSIsImxlbmd0aCIsInByZWNpc2lvbiIsImJpZ051bUZyb21QYXJhbSIsImJuIiwiaXNCTiIsImZyb20iLCJhZGQiLCJhc3NlcnQiLCJlcSIsInN1YiIsIm11bCIsIm11bFZhbCIsInNjYWxhck11bCIsInNoaWZ0IiwibmVnIiwiZGl2IiwiZXhwb25lbnQiLCJza2lwQWRqdXN0aW5nUHJlY2lzaW9uIiwic2hpZnRWYWwiLCJpc05lZyIsInBvdyIsInNoaWZ0VG8iLCJ0YXJnZXRQcmVjaXNpb24iLCJzY2FsZSIsIm51bWVyYXRvciIsImRlbm9taW5hdG9yIiwidG9QZXJjZW50YWdlIiwidG9QcmVjaXNpb24iLCJndCIsImlnbm9yZVByZWNpc2lvbiIsImNvbXBhcmlzb25WYWwiLCJaRVJPIiwibHQiLCJndGUiLCJsdGUiLCJlcVplcm8iLCJndFplcm8iLCJsdFplcm8iLCJndGVaZXJvIiwibHRlWmVybyIsImFicyIsInByaW50IiwicGxhaW5TdHJpbmciLCJwcmVjaXNpb25OdW0iLCJ0b051bWJlciIsInByaW50U3RyaW5nIiwiQXJyYXkiLCJmaWxsIiwic3BsaXQiLCJqb2luIiwic3Vic3RyaW5nIiwicmVwbGFjZSIsInByZXR0eVByaW50IiwidXNlVHJhZGVQcmVjaXNpb24iLCJwcmVjaXNpb25PdmVycmlkZSIsImxlZnRTaWRlIiwicmlnaHRTaWRlIiwicHJpbnRTaG9ydCIsImZvcm1hdHRlZExlZnRTaWRlIiwiaW5jbHVkZXMiLCJpbmRleCIsImZvcm1hdHRlZExlZnRTaWRlQXJyYXkiLCJzcGxpY2UiLCJwcmludFZhbCIsInRvVHJhZGVQcmVjaXNpb24iLCJkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJ0b0ZpeGVkIiwiZml4ZWRQcmVjaXNpb24iLCJyb3VuZGVkIiwidG9Sb3VuZGVkIiwiZmlsbGVkUmlnaHRTaWRlIiwiZ2V0WmVyb2VzIiwiY291bnQiLCJNYXRoIiwibWF4Iiwicm91bmRpbmdQcmVjaXNpb24iLCJzaG91bGRSb3VuZFVwIiwicm91bmRpbmdEaWdpdENoYXIiLCJyb3VuZGluZ0RpZ2l0VmFsIiwiTnVtYmVyIiwidmFsdWVXaXRoUm91bmRlZFByZWNpc2lvbkFkZGVkIiwicm91bmRlZFVwUHJpbnRTdHJpbmciLCJyb3VuZGVkRG93blByaW50U3RyaW5nIiwidHJhaWxpbmdaZXJvZXMiLCJ0aGlzU3RyaW5nIiwicHJlY2lzaW9uUHJpbnRTdHJpbmciLCJwcmVjaXNpb25NaXNtYXRjaCIsInBvaW50c09mUHJlY2lzaW9uIiwiZGVsaW1GdWxsU3RyaW5nTG9jYXRpb24iLCJpbmRleE9mIiwic2tpcEV4cG9uZW50IiwidG9Ob3Rpb25hbCIsIl9hIiwicHJlZml4IiwiemVybyIsInVzaW5nQ3VzdG9tUHJlY2lzaW9uIiwiZnJvbVByaW50IiwiXyIsInRyYWlsaW5nTGVuZ3RoIiwidG9NaWxsaWZpZWQiLCJzdHJpbmdWYWwiLCJ1bml0VGlja3MiLCJ1bml0TnVtYmVyIiwiZmxvb3IiLCJ1bml0IiwibGVhZERpZ2l0cyIsImRlY2ltYWxMb2NhdGlvbiIsImxlYWRTdHJpbmciLCJ0b0pTT04iLCJpc1BvcyIsInRvTnVtIiwicHJpbnRlZFZhbHVlIiwibWFwIiwiY2hhciIsInBhcnNlRmxvYXQiLCJmcm9tSlNPTiIsImpzb24iLCJwcmVjaXNpb25TaGlmdCIsInNpZGVzIiwiYm5JbnB1dCIsInJhd0JuIiwicmlnaHRTaWRlTGVuZ3RoIiwidG90YWxTaGlmdCIsImEiLCJiIiwibWluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/factory/bigNum.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/factory/oracleClient.js":
/*!******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/factory/oracleClient.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getOracleClient = void 0;\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst pythClient_1 = __webpack_require__(/*! ../oracles/pythClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/pythClient.js\");\n// import { SwitchboardClient } from '../oracles/switchboardClient';\nconst quoteAssetOracleClient_1 = __webpack_require__(/*! ../oracles/quoteAssetOracleClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/quoteAssetOracleClient.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nfunction getOracleClient(oracleSource, connection) {\n    if ((0, types_1.isVariant)(oracleSource, \"pyth\")) {\n        return new pythClient_1.PythClient(connection);\n    }\n    if ((0, types_1.isVariant)(oracleSource, \"pyth1K\")) {\n        return new pythClient_1.PythClient(connection, new anchor_1.BN(1000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, \"pyth1M\")) {\n        return new pythClient_1.PythClient(connection, new anchor_1.BN(1000000));\n    }\n    if ((0, types_1.isVariant)(oracleSource, \"pythStableCoin\")) {\n        return new pythClient_1.PythClient(connection, undefined, true);\n    }\n    // if (isVariant(oracleSource, 'switchboard')) {\n    // \treturn new SwitchboardClient(connection);\n    // }\n    if ((0, types_1.isVariant)(oracleSource, \"quoteAsset\")) {\n        return new quoteAssetOracleClient_1.QuoteAssetOracleClient();\n    }\n    throw new Error(`Unknown oracle source ${oracleSource}`);\n}\nexports.getOracleClient = getOracleClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9mYWN0b3J5L29yYWNsZUNsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsdUJBQXVCLEdBQUcsS0FBSztBQUMvQixNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQyxtRUFBVTtBQUNsQyxNQUFNQyxlQUFlRCxtQkFBT0EsQ0FBQyw2RkFBdUI7QUFDcEQsb0VBQW9FO0FBQ3BFLE1BQU1FLDJCQUEyQkYsbUJBQU9BLENBQUMscUhBQW1DO0FBQzVFLE1BQU1HLFdBQVdILG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxTQUFTRixnQkFBZ0JNLFlBQVksRUFBRUMsVUFBVTtJQUM3QyxJQUFJLENBQUMsR0FBR04sUUFBUU8sU0FBUyxFQUFFRixjQUFjLFNBQVM7UUFDOUMsT0FBTyxJQUFJSCxhQUFhTSxVQUFVLENBQUNGO0lBQ3ZDO0lBQ0EsSUFBSSxDQUFDLEdBQUdOLFFBQVFPLFNBQVMsRUFBRUYsY0FBYyxXQUFXO1FBQ2hELE9BQU8sSUFBSUgsYUFBYU0sVUFBVSxDQUFDRixZQUFZLElBQUlGLFNBQVNLLEVBQUUsQ0FBQztJQUNuRTtJQUNBLElBQUksQ0FBQyxHQUFHVCxRQUFRTyxTQUFTLEVBQUVGLGNBQWMsV0FBVztRQUNoRCxPQUFPLElBQUlILGFBQWFNLFVBQVUsQ0FBQ0YsWUFBWSxJQUFJRixTQUFTSyxFQUFFLENBQUM7SUFDbkU7SUFDQSxJQUFJLENBQUMsR0FBR1QsUUFBUU8sU0FBUyxFQUFFRixjQUFjLG1CQUFtQjtRQUN4RCxPQUFPLElBQUlILGFBQWFNLFVBQVUsQ0FBQ0YsWUFBWUksV0FBVztJQUM5RDtJQUNBLGdEQUFnRDtJQUNoRCw2Q0FBNkM7SUFDN0MsSUFBSTtJQUNKLElBQUksQ0FBQyxHQUFHVixRQUFRTyxTQUFTLEVBQUVGLGNBQWMsZUFBZTtRQUNwRCxPQUFPLElBQUlGLHlCQUF5QlEsc0JBQXNCO0lBQzlEO0lBQ0EsTUFBTSxJQUFJQyxNQUFNLENBQUMsc0JBQXNCLEVBQUVQLGFBQWEsQ0FBQztBQUMzRDtBQUNBUix1QkFBdUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvZmFjdG9yeS9vcmFjbGVDbGllbnQuanM/ZTQ1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0T3JhY2xlQ2xpZW50ID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IHB5dGhDbGllbnRfMSA9IHJlcXVpcmUoXCIuLi9vcmFjbGVzL3B5dGhDbGllbnRcIik7XG4vLyBpbXBvcnQgeyBTd2l0Y2hib2FyZENsaWVudCB9IGZyb20gJy4uL29yYWNsZXMvc3dpdGNoYm9hcmRDbGllbnQnO1xuY29uc3QgcXVvdGVBc3NldE9yYWNsZUNsaWVudF8xID0gcmVxdWlyZShcIi4uL29yYWNsZXMvcXVvdGVBc3NldE9yYWNsZUNsaWVudFwiKTtcbmNvbnN0IGFuY2hvcl8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yXCIpO1xuZnVuY3Rpb24gZ2V0T3JhY2xlQ2xpZW50KG9yYWNsZVNvdXJjZSwgY29ubmVjdGlvbikge1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yYWNsZVNvdXJjZSwgJ3B5dGgnKSkge1xuICAgICAgICByZXR1cm4gbmV3IHB5dGhDbGllbnRfMS5QeXRoQ2xpZW50KGNvbm5lY3Rpb24pO1xuICAgIH1cbiAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmFjbGVTb3VyY2UsICdweXRoMUsnKSkge1xuICAgICAgICByZXR1cm4gbmV3IHB5dGhDbGllbnRfMS5QeXRoQ2xpZW50KGNvbm5lY3Rpb24sIG5ldyBhbmNob3JfMS5CTigxMDAwKSk7XG4gICAgfVxuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yYWNsZVNvdXJjZSwgJ3B5dGgxTScpKSB7XG4gICAgICAgIHJldHVybiBuZXcgcHl0aENsaWVudF8xLlB5dGhDbGllbnQoY29ubmVjdGlvbiwgbmV3IGFuY2hvcl8xLkJOKDEwMDAwMDApKTtcbiAgICB9XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkob3JhY2xlU291cmNlLCAncHl0aFN0YWJsZUNvaW4nKSkge1xuICAgICAgICByZXR1cm4gbmV3IHB5dGhDbGllbnRfMS5QeXRoQ2xpZW50KGNvbm5lY3Rpb24sIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgfVxuICAgIC8vIGlmIChpc1ZhcmlhbnQob3JhY2xlU291cmNlLCAnc3dpdGNoYm9hcmQnKSkge1xuICAgIC8vIFx0cmV0dXJuIG5ldyBTd2l0Y2hib2FyZENsaWVudChjb25uZWN0aW9uKTtcbiAgICAvLyB9XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkob3JhY2xlU291cmNlLCAncXVvdGVBc3NldCcpKSB7XG4gICAgICAgIHJldHVybiBuZXcgcXVvdGVBc3NldE9yYWNsZUNsaWVudF8xLlF1b3RlQXNzZXRPcmFjbGVDbGllbnQoKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG9yYWNsZSBzb3VyY2UgJHtvcmFjbGVTb3VyY2V9YCk7XG59XG5leHBvcnRzLmdldE9yYWNsZUNsaWVudCA9IGdldE9yYWNsZUNsaWVudDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldE9yYWNsZUNsaWVudCIsInR5cGVzXzEiLCJyZXF1aXJlIiwicHl0aENsaWVudF8xIiwicXVvdGVBc3NldE9yYWNsZUNsaWVudF8xIiwiYW5jaG9yXzEiLCJvcmFjbGVTb3VyY2UiLCJjb25uZWN0aW9uIiwiaXNWYXJpYW50IiwiUHl0aENsaWVudCIsIkJOIiwidW5kZWZpbmVkIiwiUXVvdGVBc3NldE9yYWNsZUNsaWVudCIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/factory/oracleClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/index.js":
/*!***************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/index.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __exportStar = (void 0) && (void 0).__exportStar || function(m, exports1) {\n    for(var p in m)if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports1, p)) __createBinding(exports1, m, p);\n};\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.pyth = exports.PublicKey = exports.BN = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nObject.defineProperty(exports, \"BN\", ({\n    enumerable: true,\n    get: function() {\n        return anchor_1.BN;\n    }\n}));\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nObject.defineProperty(exports, \"PublicKey\", ({\n    enumerable: true,\n    get: function() {\n        return web3_js_1.PublicKey;\n    }\n}));\nconst client_1 = __importDefault(__webpack_require__(/*! @pythnetwork/client */ \"(ssr)/./node_modules/@pythnetwork/client/lib/index.js\"));\nexports.pyth = client_1.default;\n__exportStar(__webpack_require__(/*! ./tokenFaucet */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tokenFaucet.js\"), exports);\n__exportStar(__webpack_require__(/*! ./oracles/types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./oracles/pythClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/pythClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./constants/perpMarkets */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/perpMarkets.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/fetch */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/fetch.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/webSocketDriftClientAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketDriftClientAccountSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/bulkAccountLoader */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkAccountLoader.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/bulkUserSubscription */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkUserSubscription.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/bulkUserStatsSubscription */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/bulkUserStatsSubscription.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/pollingDriftClientAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingDriftClientAccountSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/pollingOracleAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingOracleAccountSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/pollingTokenAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingTokenAccountSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/pollingUserAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserAccountSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/pollingUserStatsAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserStatsAccountSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/mockUserAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/mockUserAccountSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./accounts/types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./addresses/pda */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\"), exports);\n__exportStar(__webpack_require__(/*! ./adminClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/adminClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./testClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/testClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./user */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/user.js\"), exports);\n__exportStar(__webpack_require__(/*! ./userConfig */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userConfig.js\"), exports);\n__exportStar(__webpack_require__(/*! ./userStats */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userStats.js\"), exports);\n__exportStar(__webpack_require__(/*! ./userName */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userName.js\"), exports);\n__exportStar(__webpack_require__(/*! ./userStatsConfig */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userStatsConfig.js\"), exports);\n__exportStar(__webpack_require__(/*! ./driftClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/driftClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./factory/oracleClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/factory/oracleClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./factory/bigNum */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/factory/bigNum.js\"), exports);\n__exportStar(__webpack_require__(/*! ./events/types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./events/eventSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/eventSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./events/fetchLogs */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/events/fetchLogs.js\"), exports);\n__exportStar(__webpack_require__(/*! ./jupiter/jupiterClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/jupiter/jupiterClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/auction */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/auction.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/spotMarket */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotMarket.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/conversion */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/conversion.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/exchangeStatus */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/exchangeStatus.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/funding */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/funding.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/market */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/market.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/position */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/position.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/oracles */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/oracles.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/trade */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/trade.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/orders */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/orders.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/repeg */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/repeg.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/margin */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/margin.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/insurance */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/insurance.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/superStake */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/superStake.js\"), exports);\n__exportStar(__webpack_require__(/*! ./marinade */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/index.js\"), exports);\n__exportStar(__webpack_require__(/*! ./orderParams */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderParams.js\"), exports);\n__exportStar(__webpack_require__(/*! ./slot/SlotSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/slot/SlotSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./wallet */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/wallet.js\"), exports);\n__exportStar(__webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/utils.js\"), exports);\n__exportStar(__webpack_require__(/*! ./config */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/config.js\"), exports);\n__exportStar(__webpack_require__(/*! ./constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\"), exports);\n__exportStar(__webpack_require__(/*! ./serum/serumSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/serum/serumSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./serum/serumFulfillmentConfigMap */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/serum/serumFulfillmentConfigMap.js\"), exports);\n__exportStar(__webpack_require__(/*! ./phoenix/phoenixSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/phoenix/phoenixSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./phoenix/phoenixFulfillmentConfigMap */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/phoenix/phoenixFulfillmentConfigMap.js\"), exports);\n__exportStar(__webpack_require__(/*! ./tx/fastSingleTxSender */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tx/fastSingleTxSender.js\"), exports);\n__exportStar(__webpack_require__(/*! ./tx/retryTxSender */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tx/retryTxSender.js\"), exports);\n__exportStar(__webpack_require__(/*! ./tx/types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tx/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./util/computeUnits */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/util/computeUnits.js\"), exports);\n__exportStar(__webpack_require__(/*! ./util/tps */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/util/tps.js\"), exports);\n__exportStar(__webpack_require__(/*! ./util/promiseTimeout */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/util/promiseTimeout.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/spotBalance */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js\"), exports);\n__exportStar(__webpack_require__(/*! ./constants/spotMarkets */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/spotMarkets.js\"), exports);\n__exportStar(__webpack_require__(/*! ./driftClientConfig */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/driftClientConfig.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/DLOB */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOB.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/DLOBNode */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBNode.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/DLOBOrders */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBOrders.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/NodeList */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/NodeList.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/DLOBSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/DLOBApiClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOBApiClient.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./dlob/orderBookLevels */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/orderBookLevels.js\"), exports);\n__exportStar(__webpack_require__(/*! ./userMap/userMap */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userMap/userMap.js\"), exports);\n__exportStar(__webpack_require__(/*! ./userMap/userStatsMap */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userMap/userStatsMap.js\"), exports);\n__exportStar(__webpack_require__(/*! ./math/bankruptcy */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/bankruptcy.js\"), exports);\n__exportStar(__webpack_require__(/*! ./orderSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/index.js\"), exports);\n__exportStar(__webpack_require__(/*! ./orderSubscriber/types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./auctionSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/index.js\"), exports);\n__exportStar(__webpack_require__(/*! ./auctionSubscriber/types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/auctionSubscriber/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./memcmp */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js\"), exports);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBTUMsQ0FBQUEsT0FBT0MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0IsSUFBSUcsT0FBT1AsT0FBT1Esd0JBQXdCLENBQUNMLEdBQUdDO0lBQzlDLElBQUksQ0FBQ0csUUFBUyxVQUFTQSxPQUFPLENBQUNKLEVBQUVNLFVBQVUsR0FBR0YsS0FBS0csUUFBUSxJQUFJSCxLQUFLSSxZQUFZLEdBQUc7UUFDakZKLE9BQU87WUFBRUssWUFBWTtZQUFNQyxLQUFLO2dCQUFhLE9BQU9WLENBQUMsQ0FBQ0MsRUFBRTtZQUFFO1FBQUU7SUFDOUQ7SUFDQUosT0FBT2MsY0FBYyxDQUFDWixHQUFHRyxJQUFJRTtBQUNqQyxJQUFNLFNBQVNMLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDdEIsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JGLENBQUMsQ0FBQ0csR0FBRyxHQUFHRixDQUFDLENBQUNDLEVBQUU7QUFDaEIsQ0FBQztBQUNELElBQUlXLGVBQWUsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxZQUFZLElBQUssU0FBU1osQ0FBQyxFQUFFYSxRQUFPO0lBQ2pFLElBQUssSUFBSUMsS0FBS2QsRUFBRyxJQUFJYyxNQUFNLGFBQWEsQ0FBQ2pCLE9BQU9rQixTQUFTLENBQUNDLGNBQWMsQ0FBQ0MsSUFBSSxDQUFDSixVQUFTQyxJQUFJbEIsZ0JBQWdCaUIsVUFBU2IsR0FBR2M7QUFDM0g7QUFDQSxJQUFJSSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNq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LENBQUMsb0VBQVUsR0FBR1oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvaW5kZXguanM/ZWU3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGV4cG9ydHMsIHApKSBfX2NyZWF0ZUJpbmRpbmcoZXhwb3J0cywgbSwgcCk7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5weXRoID0gZXhwb3J0cy5QdWJsaWNLZXkgPSBleHBvcnRzLkJOID0gdm9pZCAwO1xuY29uc3QgYW5jaG9yXzEgPSByZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJCTlwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gYW5jaG9yXzEuQk47IH0gfSk7XG5jb25zdCB3ZWIzX2pzXzEgPSByZXF1aXJlKFwiQHNvbGFuYS93ZWIzLmpzXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiUHVibGljS2V5XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB3ZWIzX2pzXzEuUHVibGljS2V5OyB9IH0pO1xuY29uc3QgY2xpZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIkBweXRobmV0d29yay9jbGllbnRcIikpO1xuZXhwb3J0cy5weXRoID0gY2xpZW50XzEuZGVmYXVsdDtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi90b2tlbkZhdWNldFwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vb3JhY2xlcy90eXBlc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vb3JhY2xlcy9weXRoQ2xpZW50XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi90eXBlc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29uc3RhbnRzL3BlcnBNYXJrZXRzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hY2NvdW50cy9mZXRjaFwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWNjb3VudHMvd2ViU29ja2V0RHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWNjb3VudHMvYnVsa0FjY291bnRMb2FkZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2FjY291bnRzL2J1bGtVc2VyU3Vic2NyaXB0aW9uXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hY2NvdW50cy9idWxrVXNlclN0YXRzU3Vic2NyaXB0aW9uXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hY2NvdW50cy9wb2xsaW5nRHJpZnRDbGllbnRBY2NvdW50U3Vic2NyaWJlclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWNjb3VudHMvcG9sbGluZ09yYWNsZUFjY291bnRTdWJzY3JpYmVyXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hY2NvdW50cy9wb2xsaW5nVG9rZW5BY2NvdW50U3Vic2NyaWJlclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWNjb3VudHMvcG9sbGluZ1VzZXJBY2NvdW50U3Vic2NyaWJlclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWNjb3VudHMvcG9sbGluZ1VzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hY2NvdW50cy9tb2NrVXNlckFjY291bnRTdWJzY3JpYmVyXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hY2NvdW50cy90eXBlc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWRkcmVzc2VzL3BkYVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYWRtaW5DbGllbnRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3Rlc3RDbGllbnRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VzZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VzZXJDb25maWdcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VzZXJTdGF0c1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXNlck5hbWVcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VzZXJTdGF0c0NvbmZpZ1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZHJpZnRDbGllbnRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2ZhY3Rvcnkvb3JhY2xlQ2xpZW50XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9mYWN0b3J5L2JpZ051bVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZXZlbnRzL3R5cGVzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9ldmVudHMvZXZlbnRTdWJzY3JpYmVyXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9ldmVudHMvZmV0Y2hMb2dzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9qdXBpdGVyL2p1cGl0ZXJDbGllbnRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvYXVjdGlvblwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbWF0aC9zcG90TWFya2V0XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tYXRoL2NvbnZlcnNpb25cIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvZXhjaGFuZ2VTdGF0dXNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvZnVuZGluZ1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbWF0aC9tYXJrZXRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvcG9zaXRpb25cIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvb3JhY2xlc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbWF0aC9hbW1cIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvdHJhZGVcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvb3JkZXJzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tYXRoL3JlcGVnXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tYXRoL21hcmdpblwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbWF0aC9pbnN1cmFuY2VcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvc3VwZXJTdGFrZVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbWFyaW5hZGVcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL29yZGVyUGFyYW1zXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9zbG90L1Nsb3RTdWJzY3JpYmVyXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi93YWxsZXRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tYXRoL3V0aWxzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9jb25maWdcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbnN0YW50cy9udW1lcmljQ29uc3RhbnRzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9zZXJ1bS9zZXJ1bVN1YnNjcmliZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3NlcnVtL3NlcnVtRnVsZmlsbG1lbnRDb25maWdNYXBcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3Bob2VuaXgvcGhvZW5peFN1YnNjcmliZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3Bob2VuaXgvcGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnTWFwXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi90eC9mYXN0U2luZ2xlVHhTZW5kZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R4L3JldHJ5VHhTZW5kZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R4L3R5cGVzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91dGlsL2NvbXB1dGVVbml0c1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbC90cHNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3V0aWwvcHJvbWlzZVRpbWVvdXRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21hdGgvc3BvdEJhbGFuY2VcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2NvbnN0YW50cy9zcG90TWFya2V0c1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZHJpZnRDbGllbnRDb25maWdcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Rsb2IvRExPQlwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZGxvYi9ETE9CTm9kZVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZGxvYi9ETE9CT3JkZXJzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9kbG9iL05vZGVMaXN0XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9kbG9iL0RMT0JTdWJzY3JpYmVyXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9kbG9iL0RMT0JBcGlDbGllbnRcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Rsb2IvdHlwZXNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Rsb2Ivb3JkZXJCb29rTGV2ZWxzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91c2VyTWFwL3VzZXJNYXBcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3VzZXJNYXAvdXNlclN0YXRzTWFwXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9tYXRoL2JhbmtydXB0Y3lcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL29yZGVyU3Vic2NyaWJlclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vb3JkZXJTdWJzY3JpYmVyL3R5cGVzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9hdWN0aW9uU3Vic2NyaWJlclwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYXVjdGlvblN1YnNjcmliZXIvdHlwZXNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21lbWNtcFwiKSwgZXhwb3J0cyk7XG4iXSwibmFtZXMiOlsiX19jcmVhdGVCaW5kaW5nIiwiT2JqZWN0IiwiY3JlYXRlIiwibyIsIm0iLCJrIiwiazIiLCJ1bmRlZmluZWQiLCJkZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX19lc01vZHVsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsImRlZmluZVByb3BlcnR5IiwiX19leHBvcnRTdGFyIiwiZXhwb3J0cyIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJ2YWx1ZSIsInB5dGgiLCJQdWJsaWNLZXkiLCJCTiIsImFuY2hvcl8xIiwicmVxdWlyZSIsIndlYjNfanNfMSIsImNsaWVudF8xIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/jupiter/jupiterClient.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/jupiter/jupiterClient.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.JupiterClient = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst node_fetch_1 = __importDefault(__webpack_require__(/*! node-fetch */ \"(ssr)/./node_modules/node-fetch/lib/index.mjs\"));\nclass JupiterClient {\n    constructor({ connection }){\n        this.url = \"https://quote-api.jup.ag/v4\";\n        this.lookupTableCahce = new Map();\n        this.connection = connection;\n    }\n    /**\n     * Get routes for a swap\n     * @param inputMint the mint of the input token\n     * @param outputMint the mint of the output token\n     * @param amount the amount of the input token\n     * @param slippageBps the slippage tolerance in basis points\n     * @param swapMode the swap mode (ExactIn or ExactOut)\n     * @param onlyDirectRoutes whether to only return direct routes\n     */ async getRoutes({ inputMint, outputMint, amount, slippageBps = 50, swapMode = \"ExactIn\", onlyDirectRoutes = false }) {\n        const params = new URLSearchParams({\n            inputMint: inputMint.toString(),\n            outputMint: outputMint.toString(),\n            amount: amount.toString(),\n            slippageBps: slippageBps.toString(),\n            swapMode,\n            onlyDirectRoutes: onlyDirectRoutes.toString()\n        }).toString();\n        const { data: routes } = await (await (0, node_fetch_1.default)(`https://quote-api.jup.ag/v4/quote?${params}`)).json();\n        return routes;\n    }\n    /**\n     * Get a swap transaction for a route\n     * @param route the route to perform swap\n     * @param userPublicKey the signer's wallet public key\n     * @param slippageBps the slippage tolerance in basis points\n     */ async getSwapTransaction({ route, userPublicKey, slippageBps = 50 }) {\n        const resp = await (await (0, node_fetch_1.default)(`${this.url}/swap`, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                route,\n                userPublicKey,\n                slippageBps\n            })\n        })).json();\n        const { swapTransaction } = resp;\n        const swapTransactionBuf = Buffer.from(swapTransaction, \"base64\");\n        return web3_js_1.VersionedTransaction.deserialize(swapTransactionBuf);\n    }\n    /**\n     * Get the transaction message and lookup tables for a transaction\n     * @param transaction\n     */ async getTransactionMessageAndLookupTables({ transaction }) {\n        const message = transaction.message;\n        const lookupTables = (await Promise.all(message.addressTableLookups.map(async (lookup)=>{\n            return await this.getLookupTable(lookup.accountKey);\n        }))).filter((lookup)=>lookup);\n        const transactionMessage = web3_js_1.TransactionMessage.decompile(message, {\n            addressLookupTableAccounts: lookupTables\n        });\n        return {\n            transactionMessage,\n            lookupTables\n        };\n    }\n    async getLookupTable(accountKey) {\n        if (this.lookupTableCahce.has(accountKey.toString())) {\n            return this.lookupTableCahce.get(accountKey.toString());\n        }\n        return (await this.connection.getAddressLookupTable(accountKey)).value;\n    }\n    /**\n     * Get the jupiter instructions from transaction by filtering out instructions to compute budget and associated token programs\n     * @param transactionMessage the transaction message\n     * @param inputMint the input mint\n     * @param outputMint the output mint\n     */ getJupiterInstructions({ transactionMessage, inputMint, outputMint }) {\n        return transactionMessage.instructions.filter((instruction)=>{\n            if (instruction.programId.toString() === \"ComputeBudget111111111111111111111111111111\") {\n                return false;\n            }\n            if (instruction.programId.toString() === \"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA\") {\n                return false;\n            }\n            if (instruction.programId.toString() === \"11111111111111111111111111111111\") {\n                return false;\n            }\n            if (instruction.programId.toString() === \"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL\") {\n                const mint = instruction.keys[3].pubkey;\n                if (mint.equals(inputMint) || mint.equals(outputMint)) {\n                    return false;\n                }\n            }\n            return true;\n        });\n    }\n}\nexports.JupiterClient = JupiterClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9qdXBpdGVyL2p1cGl0ZXJDbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQUUsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHFCQUFxQixHQUFHLEtBQUs7QUFDN0IsTUFBTUcsWUFBWUMsbUJBQU9BLENBQUMsOEVBQWlCO0FBQzNDLE1BQU1DLGVBQWVWLGdCQUFnQlMsbUJBQU9BLENBQUMsaUVBQVk7QUFDekQsTUFBTUY7SUFDRkksWUFBWSxFQUFFQyxVQUFVLEVBQUUsQ0FBRTtRQUN4QixJQUFJLENBQUNDLEdBQUcsR0FBRztRQUNYLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsSUFBSUM7UUFDNUIsSUFBSSxDQUFDSCxVQUFVLEdBQUdBO0lBQ3RCO0lBQ0E7Ozs7Ozs7O0tBUUMsR0FDRCxNQUFNSSxVQUFVLEVBQUVDLFNBQVMsRUFBRUMsVUFBVSxFQUFFQyxNQUFNLEVBQUVDLGNBQWMsRUFBRSxFQUFFQyxXQUFXLFNBQVMsRUFBRUMsbUJBQW1CLEtBQUssRUFBRyxFQUFFO1FBQ2xILE1BQU1DLFNBQVMsSUFBSUMsZ0JBQWdCO1lBQy9CUCxXQUFXQSxVQUFVUSxRQUFRO1lBQzdCUCxZQUFZQSxXQUFXTyxRQUFRO1lBQy9CTixRQUFRQSxPQUFPTSxRQUFRO1lBQ3ZCTCxhQUFhQSxZQUFZSyxRQUFRO1lBQ2pDSjtZQUNBQyxrQkFBa0JBLGlCQUFpQkcsUUFBUTtRQUMvQyxHQUFHQSxRQUFRO1FBQ1gsTUFBTSxFQUFFQyxNQUFNQyxNQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUdqQixhQUFha0IsT0FBTyxFQUFFLENBQUMsa0NBQWtDLEVBQUVMLE9BQU8sQ0FBQyxHQUFHTSxJQUFJO1FBQ3BILE9BQU9GO0lBQ1g7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1HLG1CQUFtQixFQUFFQyxLQUFLLEVBQUVDLGFBQWEsRUFBRVosY0FBYyxFQUFFLEVBQUcsRUFBRTtRQUNsRSxNQUFNYSxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBR3ZCLGFBQWFrQixPQUFPLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQ2YsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3BFcUIsUUFBUTtZQUNSQyxTQUFTO2dCQUNMLGdCQUFnQjtZQUNwQjtZQUNBQyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ2pCUDtnQkFDQUM7Z0JBQ0FaO1lBQ0o7UUFDSixFQUFDLEVBQUdTLElBQUk7UUFDUixNQUFNLEVBQUVVLGVBQWUsRUFBRSxHQUFHTjtRQUM1QixNQUFNTyxxQkFBcUJDLE9BQU9DLElBQUksQ0FBQ0gsaUJBQWlCO1FBQ3hELE9BQU8vQixVQUFVbUMsb0JBQW9CLENBQUNDLFdBQVcsQ0FBQ0o7SUFDdEQ7SUFDQTs7O0tBR0MsR0FDRCxNQUFNSyxxQ0FBcUMsRUFBRUMsV0FBVyxFQUFHLEVBQUU7UUFDekQsTUFBTUMsVUFBVUQsWUFBWUMsT0FBTztRQUNuQyxNQUFNQyxlQUFlLENBQUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDSCxRQUFRSSxtQkFBbUIsQ0FBQ0MsR0FBRyxDQUFDLE9BQU9DO1lBQzNFLE9BQU8sTUFBTSxJQUFJLENBQUNDLGNBQWMsQ0FBQ0QsT0FBT0UsVUFBVTtRQUN0RCxHQUFFLEVBQUdDLE1BQU0sQ0FBQyxDQUFDSCxTQUFXQTtRQUN4QixNQUFNSSxxQkFBcUJqRCxVQUFVa0Qsa0JBQWtCLENBQUNDLFNBQVMsQ0FBQ1osU0FBUztZQUN2RWEsNEJBQTRCWjtRQUNoQztRQUNBLE9BQU87WUFDSFM7WUFDQVQ7UUFDSjtJQUNKO0lBQ0EsTUFBTU0sZUFBZUMsVUFBVSxFQUFFO1FBQzdCLElBQUksSUFBSSxDQUFDekMsZ0JBQWdCLENBQUMrQyxHQUFHLENBQUNOLFdBQVc5QixRQUFRLEtBQUs7WUFDbEQsT0FBTyxJQUFJLENBQUNYLGdCQUFnQixDQUFDZ0QsR0FBRyxDQUFDUCxXQUFXOUIsUUFBUTtRQUN4RDtRQUNBLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQ2IsVUFBVSxDQUFDbUQscUJBQXFCLENBQUNSLFdBQVUsRUFBR2pELEtBQUs7SUFDMUU7SUFDQTs7Ozs7S0FLQyxHQUNEMEQsdUJBQXVCLEVBQUVQLGtCQUFrQixFQUFFeEMsU0FBUyxFQUFFQyxVQUFVLEVBQUcsRUFBRTtRQUNuRSxPQUFPdUMsbUJBQW1CUSxZQUFZLENBQUNULE1BQU0sQ0FBQyxDQUFDVTtZQUMzQyxJQUFJQSxZQUFZQyxTQUFTLENBQUMxQyxRQUFRLE9BQzlCLCtDQUErQztnQkFDL0MsT0FBTztZQUNYO1lBQ0EsSUFBSXlDLFlBQVlDLFNBQVMsQ0FBQzFDLFFBQVEsT0FDOUIsK0NBQStDO2dCQUMvQyxPQUFPO1lBQ1g7WUFDQSxJQUFJeUMsWUFBWUMsU0FBUyxDQUFDMUMsUUFBUSxPQUFPLG9DQUFvQztnQkFDekUsT0FBTztZQUNYO1lBQ0EsSUFBSXlDLFlBQVlDLFNBQVMsQ0FBQzFDLFFBQVEsT0FDOUIsZ0RBQWdEO2dCQUNoRCxNQUFNMkMsT0FBT0YsWUFBWUcsSUFBSSxDQUFDLEVBQUUsQ0FBQ0MsTUFBTTtnQkFDdkMsSUFBSUYsS0FBS0csTUFBTSxDQUFDdEQsY0FBY21ELEtBQUtHLE1BQU0sQ0FBQ3JELGFBQWE7b0JBQ25ELE9BQU87Z0JBQ1g7WUFDSjtZQUNBLE9BQU87UUFDWDtJQUNKO0FBQ0o7QUFDQWIscUJBQXFCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL2p1cGl0ZXIvanVwaXRlckNsaWVudC5qcz84MDNkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5KdXBpdGVyQ2xpZW50ID0gdm9pZCAwO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IG5vZGVfZmV0Y2hfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwibm9kZS1mZXRjaFwiKSk7XG5jbGFzcyBKdXBpdGVyQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNvbm5lY3Rpb24gfSkge1xuICAgICAgICB0aGlzLnVybCA9ICdodHRwczovL3F1b3RlLWFwaS5qdXAuYWcvdjQnO1xuICAgICAgICB0aGlzLmxvb2t1cFRhYmxlQ2FoY2UgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCByb3V0ZXMgZm9yIGEgc3dhcFxuICAgICAqIEBwYXJhbSBpbnB1dE1pbnQgdGhlIG1pbnQgb2YgdGhlIGlucHV0IHRva2VuXG4gICAgICogQHBhcmFtIG91dHB1dE1pbnQgdGhlIG1pbnQgb2YgdGhlIG91dHB1dCB0b2tlblxuICAgICAqIEBwYXJhbSBhbW91bnQgdGhlIGFtb3VudCBvZiB0aGUgaW5wdXQgdG9rZW5cbiAgICAgKiBAcGFyYW0gc2xpcHBhZ2VCcHMgdGhlIHNsaXBwYWdlIHRvbGVyYW5jZSBpbiBiYXNpcyBwb2ludHNcbiAgICAgKiBAcGFyYW0gc3dhcE1vZGUgdGhlIHN3YXAgbW9kZSAoRXhhY3RJbiBvciBFeGFjdE91dClcbiAgICAgKiBAcGFyYW0gb25seURpcmVjdFJvdXRlcyB3aGV0aGVyIHRvIG9ubHkgcmV0dXJuIGRpcmVjdCByb3V0ZXNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRSb3V0ZXMoeyBpbnB1dE1pbnQsIG91dHB1dE1pbnQsIGFtb3VudCwgc2xpcHBhZ2VCcHMgPSA1MCwgc3dhcE1vZGUgPSAnRXhhY3RJbicsIG9ubHlEaXJlY3RSb3V0ZXMgPSBmYWxzZSwgfSkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIGlucHV0TWludDogaW5wdXRNaW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICBvdXRwdXRNaW50OiBvdXRwdXRNaW50LnRvU3RyaW5nKCksXG4gICAgICAgICAgICBhbW91bnQ6IGFtb3VudC50b1N0cmluZygpLFxuICAgICAgICAgICAgc2xpcHBhZ2VCcHM6IHNsaXBwYWdlQnBzLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBzd2FwTW9kZSxcbiAgICAgICAgICAgIG9ubHlEaXJlY3RSb3V0ZXM6IG9ubHlEaXJlY3RSb3V0ZXMudG9TdHJpbmcoKSxcbiAgICAgICAgfSkudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgeyBkYXRhOiByb3V0ZXMgfSA9IGF3YWl0IChhd2FpdCAoMCwgbm9kZV9mZXRjaF8xLmRlZmF1bHQpKGBodHRwczovL3F1b3RlLWFwaS5qdXAuYWcvdjQvcXVvdGU/JHtwYXJhbXN9YCkpLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIHJvdXRlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgc3dhcCB0cmFuc2FjdGlvbiBmb3IgYSByb3V0ZVxuICAgICAqIEBwYXJhbSByb3V0ZSB0aGUgcm91dGUgdG8gcGVyZm9ybSBzd2FwXG4gICAgICogQHBhcmFtIHVzZXJQdWJsaWNLZXkgdGhlIHNpZ25lcidzIHdhbGxldCBwdWJsaWMga2V5XG4gICAgICogQHBhcmFtIHNsaXBwYWdlQnBzIHRoZSBzbGlwcGFnZSB0b2xlcmFuY2UgaW4gYmFzaXMgcG9pbnRzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0U3dhcFRyYW5zYWN0aW9uKHsgcm91dGUsIHVzZXJQdWJsaWNLZXksIHNsaXBwYWdlQnBzID0gNTAsIH0pIHtcbiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IChhd2FpdCAoMCwgbm9kZV9mZXRjaF8xLmRlZmF1bHQpKGAke3RoaXMudXJsfS9zd2FwYCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgcm91dGUsXG4gICAgICAgICAgICAgICAgdXNlclB1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBzbGlwcGFnZUJwcyxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSkuanNvbigpO1xuICAgICAgICBjb25zdCB7IHN3YXBUcmFuc2FjdGlvbiB9ID0gcmVzcDtcbiAgICAgICAgY29uc3Qgc3dhcFRyYW5zYWN0aW9uQnVmID0gQnVmZmVyLmZyb20oc3dhcFRyYW5zYWN0aW9uLCAnYmFzZTY0Jyk7XG4gICAgICAgIHJldHVybiB3ZWIzX2pzXzEuVmVyc2lvbmVkVHJhbnNhY3Rpb24uZGVzZXJpYWxpemUoc3dhcFRyYW5zYWN0aW9uQnVmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0cmFuc2FjdGlvbiBtZXNzYWdlIGFuZCBsb29rdXAgdGFibGVzIGZvciBhIHRyYW5zYWN0aW9uXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VHJhbnNhY3Rpb25NZXNzYWdlQW5kTG9va3VwVGFibGVzKHsgdHJhbnNhY3Rpb24sIH0pIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRyYW5zYWN0aW9uLm1lc3NhZ2U7XG4gICAgICAgIGNvbnN0IGxvb2t1cFRhYmxlcyA9IChhd2FpdCBQcm9taXNlLmFsbChtZXNzYWdlLmFkZHJlc3NUYWJsZUxvb2t1cHMubWFwKGFzeW5jIChsb29rdXApID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldExvb2t1cFRhYmxlKGxvb2t1cC5hY2NvdW50S2V5KTtcbiAgICAgICAgfSkpKS5maWx0ZXIoKGxvb2t1cCkgPT4gbG9va3VwKTtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25NZXNzYWdlID0gd2ViM19qc18xLlRyYW5zYWN0aW9uTWVzc2FnZS5kZWNvbXBpbGUobWVzc2FnZSwge1xuICAgICAgICAgICAgYWRkcmVzc0xvb2t1cFRhYmxlQWNjb3VudHM6IGxvb2t1cFRhYmxlcyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbk1lc3NhZ2UsXG4gICAgICAgICAgICBsb29rdXBUYWJsZXMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGdldExvb2t1cFRhYmxlKGFjY291bnRLZXkpIHtcbiAgICAgICAgaWYgKHRoaXMubG9va3VwVGFibGVDYWhjZS5oYXMoYWNjb3VudEtleS50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9va3VwVGFibGVDYWhjZS5nZXQoYWNjb3VudEtleS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRBZGRyZXNzTG9va3VwVGFibGUoYWNjb3VudEtleSkpLnZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGp1cGl0ZXIgaW5zdHJ1Y3Rpb25zIGZyb20gdHJhbnNhY3Rpb24gYnkgZmlsdGVyaW5nIG91dCBpbnN0cnVjdGlvbnMgdG8gY29tcHV0ZSBidWRnZXQgYW5kIGFzc29jaWF0ZWQgdG9rZW4gcHJvZ3JhbXNcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25NZXNzYWdlIHRoZSB0cmFuc2FjdGlvbiBtZXNzYWdlXG4gICAgICogQHBhcmFtIGlucHV0TWludCB0aGUgaW5wdXQgbWludFxuICAgICAqIEBwYXJhbSBvdXRwdXRNaW50IHRoZSBvdXRwdXQgbWludFxuICAgICAqL1xuICAgIGdldEp1cGl0ZXJJbnN0cnVjdGlvbnMoeyB0cmFuc2FjdGlvbk1lc3NhZ2UsIGlucHV0TWludCwgb3V0cHV0TWludCwgfSkge1xuICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb25NZXNzYWdlLmluc3RydWN0aW9ucy5maWx0ZXIoKGluc3RydWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24ucHJvZ3JhbUlkLnRvU3RyaW5nKCkgPT09XG4gICAgICAgICAgICAgICAgJ0NvbXB1dGVCdWRnZXQxMTExMTExMTExMTExMTExMTExMTExMTExMTExMTEnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluc3RydWN0aW9uLnByb2dyYW1JZC50b1N0cmluZygpID09PVxuICAgICAgICAgICAgICAgICdUb2tlbmtlZ1FmZVp5aU53QUpiTmJHS1BGWENXdUJ2ZjlTczYyM1ZRNURBJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5wcm9ncmFtSWQudG9TdHJpbmcoKSA9PT0gJzExMTExMTExMTExMTExMTExMTExMTExMTExMTExMTExJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5wcm9ncmFtSWQudG9TdHJpbmcoKSA9PT1cbiAgICAgICAgICAgICAgICAnQVRva2VuR1B2YmRHVnhyMWIyaHZaYnNpcVc1eFdIMjVlZlROc0xKQThrbkwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWludCA9IGluc3RydWN0aW9uLmtleXNbM10ucHVia2V5O1xuICAgICAgICAgICAgICAgIGlmIChtaW50LmVxdWFscyhpbnB1dE1pbnQpIHx8IG1pbnQuZXF1YWxzKG91dHB1dE1pbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5KdXBpdGVyQ2xpZW50ID0gSnVwaXRlckNsaWVudDtcbiJdLCJuYW1lcyI6WyJfX2ltcG9ydERlZmF1bHQiLCJtb2QiLCJfX2VzTW9kdWxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJKdXBpdGVyQ2xpZW50Iiwid2ViM19qc18xIiwicmVxdWlyZSIsIm5vZGVfZmV0Y2hfMSIsImNvbnN0cnVjdG9yIiwiY29ubmVjdGlvbiIsInVybCIsImxvb2t1cFRhYmxlQ2FoY2UiLCJNYXAiLCJnZXRSb3V0ZXMiLCJpbnB1dE1pbnQiLCJvdXRwdXRNaW50IiwiYW1vdW50Iiwic2xpcHBhZ2VCcHMiLCJzd2FwTW9kZSIsIm9ubHlEaXJlY3RSb3V0ZXMiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b1N0cmluZyIsImRhdGEiLCJyb3V0ZXMiLCJkZWZhdWx0IiwianNvbiIsImdldFN3YXBUcmFuc2FjdGlvbiIsInJvdXRlIiwidXNlclB1YmxpY0tleSIsInJlc3AiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzd2FwVHJhbnNhY3Rpb24iLCJzd2FwVHJhbnNhY3Rpb25CdWYiLCJCdWZmZXIiLCJmcm9tIiwiVmVyc2lvbmVkVHJhbnNhY3Rpb24iLCJkZXNlcmlhbGl6ZSIsImdldFRyYW5zYWN0aW9uTWVzc2FnZUFuZExvb2t1cFRhYmxlcyIsInRyYW5zYWN0aW9uIiwibWVzc2FnZSIsImxvb2t1cFRhYmxlcyIsIlByb21pc2UiLCJhbGwiLCJhZGRyZXNzVGFibGVMb29rdXBzIiwibWFwIiwibG9va3VwIiwiZ2V0TG9va3VwVGFibGUiLCJhY2NvdW50S2V5IiwiZmlsdGVyIiwidHJhbnNhY3Rpb25NZXNzYWdlIiwiVHJhbnNhY3Rpb25NZXNzYWdlIiwiZGVjb21waWxlIiwiYWRkcmVzc0xvb2t1cFRhYmxlQWNjb3VudHMiLCJoYXMiLCJnZXQiLCJnZXRBZGRyZXNzTG9va3VwVGFibGUiLCJnZXRKdXBpdGVySW5zdHJ1Y3Rpb25zIiwiaW5zdHJ1Y3Rpb25zIiwiaW5zdHJ1Y3Rpb24iLCJwcm9ncmFtSWQiLCJtaW50Iiwia2V5cyIsInB1YmtleSIsImVxdWFscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/jupiter/jupiterClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/marinade/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getMarinadeMSolPrice = exports.getMarinadeDepositIx = exports.getMarinadeFinanceProgram = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/types.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst spl_token_1 = __webpack_require__(/*! @solana/spl-token */ \"(ssr)/./node_modules/@solana/spl-token/lib/cjs/index.js\");\nconst marinadeFinanceProgramId = new web3_js_1.PublicKey(\"MarBmsSgKXdrN1egZf5sqe1TMai9K1rChYNDJgjq7aD\");\nfunction getMarinadeFinanceProgram(provider) {\n    return new anchor_1.Program(types_1.IDL, marinadeFinanceProgramId, provider);\n}\nexports.getMarinadeFinanceProgram = getMarinadeFinanceProgram;\nfunction getMarinadeDepositIx({ program, amount, mSOLAccount, transferFrom }) {\n    return program.methods.deposit(amount).accountsStrict({\n        reservePda: new web3_js_1.PublicKey(\"Du3Ysj1wKbxPKkuPPnvzQLQh8oMSVifs3jGZjJWXFmHN\"),\n        state: new web3_js_1.PublicKey(\"8szGkuLTAux9XMgZ2vtY39jVSowEcpBfFfD8hXSEqdGC\"),\n        msolMint: new web3_js_1.PublicKey(\"mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So\"),\n        msolMintAuthority: new web3_js_1.PublicKey(\"3JLPCS1qM2zRw3Dp6V4hZnYHd4toMNPkNesXdX9tg6KM\"),\n        liqPoolMsolLegAuthority: new web3_js_1.PublicKey(\"EyaSjUtSgo9aRD1f8LWXwdvkpDTmXAW54yoSHZRF14WL\"),\n        liqPoolMsolLeg: new web3_js_1.PublicKey(\"7GgPYjS5Dza89wV6FpZ23kUJRG5vbQ1GM25ezspYFSoE\"),\n        liqPoolSolLegPda: new web3_js_1.PublicKey(\"UefNb6z6yvArqe4cJHTXCqStRsKmWhGxnZzuHbikP5Q\"),\n        mintTo: mSOLAccount,\n        transferFrom,\n        systemProgram: web3_js_1.SystemProgram.programId,\n        tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n    }).instruction();\n}\nexports.getMarinadeDepositIx = getMarinadeDepositIx;\nasync function getMarinadeMSolPrice(program) {\n    const state = await program.account.state.fetch(new web3_js_1.PublicKey(\"8szGkuLTAux9XMgZ2vtY39jVSowEcpBfFfD8hXSEqdGC\"));\n    return state.msolPrice.toNumber() / 4294967296;\n}\nexports.getMarinadeMSolPrice = getMarinadeMSolPrice;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXJpbmFkZS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsNEJBQTRCLEdBQUdBLDRCQUE0QixHQUFHQSxpQ0FBaUMsR0FBRyxLQUFLO0FBQ3ZHLE1BQU1LLFdBQVdDLG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQywyRUFBUztBQUNqQyxNQUFNRSxZQUFZRixtQkFBT0EsQ0FBQyw4RUFBaUI7QUFDM0MsTUFBTUcsY0FBY0gsbUJBQU9BLENBQUMsa0ZBQW1CO0FBQy9DLE1BQU1JLDJCQUEyQixJQUFJRixVQUFVRyxTQUFTLENBQUM7QUFDekQsU0FBU1AsMEJBQTBCUSxRQUFRO0lBQ3ZDLE9BQU8sSUFBSVAsU0FBU1EsT0FBTyxDQUFDTixRQUFRTyxHQUFHLEVBQUVKLDBCQUEwQkU7QUFDdkU7QUFDQVosaUNBQWlDLEdBQUdJO0FBQ3BDLFNBQVNELHFCQUFxQixFQUFFWSxPQUFPLEVBQUVDLE1BQU0sRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEVBQUc7SUFDekUsT0FBT0gsUUFBUUksT0FBTyxDQUNqQkMsT0FBTyxDQUFDSixRQUNSSyxjQUFjLENBQUM7UUFDaEJDLFlBQVksSUFBSWQsVUFBVUcsU0FBUyxDQUFDO1FBQ3BDWSxPQUFPLElBQUlmLFVBQVVHLFNBQVMsQ0FBQztRQUMvQmEsVUFBVSxJQUFJaEIsVUFBVUcsU0FBUyxDQUFDO1FBQ2xDYyxtQkFBbUIsSUFBSWpCLFVBQVVHLFNBQVMsQ0FBQztRQUMzQ2UseUJBQXlCLElBQUlsQixVQUFVRyxTQUFTLENBQUM7UUFDakRnQixnQkFBZ0IsSUFBSW5CLFVBQVVHLFNBQVMsQ0FBQztRQUN4Q2lCLGtCQUFrQixJQUFJcEIsVUFBVUcsU0FBUyxDQUFDO1FBQzFDa0IsUUFBUVo7UUFDUkM7UUFDQVksZUFBZXRCLFVBQVV1QixhQUFhLENBQUNDLFNBQVM7UUFDaERDLGNBQWN4QixZQUFZeUIsZ0JBQWdCO0lBQzlDLEdBQ0tDLFdBQVc7QUFDcEI7QUFDQW5DLDRCQUE0QixHQUFHRztBQUMvQixlQUFlRCxxQkFBcUJhLE9BQU87SUFDdkMsTUFBTVEsUUFBUSxNQUFNUixRQUFRcUIsT0FBTyxDQUFDYixLQUFLLENBQUNjLEtBQUssQ0FBQyxJQUFJN0IsVUFBVUcsU0FBUyxDQUFDO0lBQ3hFLE9BQU9ZLE1BQU1lLFNBQVMsQ0FBQ0MsUUFBUSxLQUFLO0FBQ3hDO0FBQ0F2Qyw0QkFBNEIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvbWFyaW5hZGUvaW5kZXguanM/ZDk4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0TWFyaW5hZGVNU29sUHJpY2UgPSBleHBvcnRzLmdldE1hcmluYWRlRGVwb3NpdEl4ID0gZXhwb3J0cy5nZXRNYXJpbmFkZUZpbmFuY2VQcm9ncmFtID0gdm9pZCAwO1xuY29uc3QgYW5jaG9yXzEgPSByZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIik7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5jb25zdCB3ZWIzX2pzXzEgPSByZXF1aXJlKFwiQHNvbGFuYS93ZWIzLmpzXCIpO1xuY29uc3Qgc3BsX3Rva2VuXzEgPSByZXF1aXJlKFwiQHNvbGFuYS9zcGwtdG9rZW5cIik7XG5jb25zdCBtYXJpbmFkZUZpbmFuY2VQcm9ncmFtSWQgPSBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnTWFyQm1zU2dLWGRyTjFlZ1pmNXNxZTFUTWFpOUsxckNoWU5ESmdqcTdhRCcpO1xuZnVuY3Rpb24gZ2V0TWFyaW5hZGVGaW5hbmNlUHJvZ3JhbShwcm92aWRlcikge1xuICAgIHJldHVybiBuZXcgYW5jaG9yXzEuUHJvZ3JhbSh0eXBlc18xLklETCwgbWFyaW5hZGVGaW5hbmNlUHJvZ3JhbUlkLCBwcm92aWRlcik7XG59XG5leHBvcnRzLmdldE1hcmluYWRlRmluYW5jZVByb2dyYW0gPSBnZXRNYXJpbmFkZUZpbmFuY2VQcm9ncmFtO1xuZnVuY3Rpb24gZ2V0TWFyaW5hZGVEZXBvc2l0SXgoeyBwcm9ncmFtLCBhbW91bnQsIG1TT0xBY2NvdW50LCB0cmFuc2ZlckZyb20sIH0pIHtcbiAgICByZXR1cm4gcHJvZ3JhbS5tZXRob2RzXG4gICAgICAgIC5kZXBvc2l0KGFtb3VudClcbiAgICAgICAgLmFjY291bnRzU3RyaWN0KHtcbiAgICAgICAgcmVzZXJ2ZVBkYTogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJ0R1M1lzajF3S2J4UEtrdVBQbnZ6UUxRaDhvTVNWaWZzM2pHWmpKV1hGbUhOJyksXG4gICAgICAgIHN0YXRlOiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnOHN6R2t1TFRBdXg5WE1nWjJ2dFkzOWpWU293RWNwQmZGZkQ4aFhTRXFkR0MnKSxcbiAgICAgICAgbXNvbE1pbnQ6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdtU29MellDeEhkWWdkelUxNmc1UVNoM2k1SzN6M0taSzd5dGZxY0ptN1NvJyksXG4gICAgICAgIG1zb2xNaW50QXV0aG9yaXR5OiBuZXcgd2ViM19qc18xLlB1YmxpY0tleSgnM0pMUENTMXFNMnpSdzNEcDZWNGhabllIZDR0b01OUGtOZXNYZFg5dGc2S00nKSxcbiAgICAgICAgbGlxUG9vbE1zb2xMZWdBdXRob3JpdHk6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdFeWFTalV0U2dvOWFSRDFmOExXWHdkdmtwRFRtWEFXNTR5b1NIWlJGMTRXTCcpLFxuICAgICAgICBsaXFQb29sTXNvbExlZzogbmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzdHZ1BZalM1RHphODl3VjZGcFoyM2tVSlJHNXZiUTFHTTI1ZXpzcFlGU29FJyksXG4gICAgICAgIGxpcVBvb2xTb2xMZWdQZGE6IG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KCdVZWZOYjZ6Nnl2QXJxZTRjSkhUWENxU3RSc0ttV2hHeG5aenVIYmlrUDVRJyksXG4gICAgICAgIG1pbnRUbzogbVNPTEFjY291bnQsXG4gICAgICAgIHRyYW5zZmVyRnJvbSxcbiAgICAgICAgc3lzdGVtUHJvZ3JhbTogd2ViM19qc18xLlN5c3RlbVByb2dyYW0ucHJvZ3JhbUlkLFxuICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgfSlcbiAgICAgICAgLmluc3RydWN0aW9uKCk7XG59XG5leHBvcnRzLmdldE1hcmluYWRlRGVwb3NpdEl4ID0gZ2V0TWFyaW5hZGVEZXBvc2l0SXg7XG5hc3luYyBmdW5jdGlvbiBnZXRNYXJpbmFkZU1Tb2xQcmljZShwcm9ncmFtKSB7XG4gICAgY29uc3Qgc3RhdGUgPSBhd2FpdCBwcm9ncmFtLmFjY291bnQuc3RhdGUuZmV0Y2gobmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoJzhzekdrdUxUQXV4OVhNZ1oydnRZMzlqVlNvd0VjcEJmRmZEOGhYU0VxZEdDJykpO1xuICAgIHJldHVybiBzdGF0ZS5tc29sUHJpY2UudG9OdW1iZXIoKSAvIDQyOTQ5NjcyOTY7XG59XG5leHBvcnRzLmdldE1hcmluYWRlTVNvbFByaWNlID0gZ2V0TWFyaW5hZGVNU29sUHJpY2U7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJnZXRNYXJpbmFkZU1Tb2xQcmljZSIsImdldE1hcmluYWRlRGVwb3NpdEl4IiwiZ2V0TWFyaW5hZGVGaW5hbmNlUHJvZ3JhbSIsImFuY2hvcl8xIiwicmVxdWlyZSIsInR5cGVzXzEiLCJ3ZWIzX2pzXzEiLCJzcGxfdG9rZW5fMSIsIm1hcmluYWRlRmluYW5jZVByb2dyYW1JZCIsIlB1YmxpY0tleSIsInByb3ZpZGVyIiwiUHJvZ3JhbSIsIklETCIsInByb2dyYW0iLCJhbW91bnQiLCJtU09MQWNjb3VudCIsInRyYW5zZmVyRnJvbSIsIm1ldGhvZHMiLCJkZXBvc2l0IiwiYWNjb3VudHNTdHJpY3QiLCJyZXNlcnZlUGRhIiwic3RhdGUiLCJtc29sTWludCIsIm1zb2xNaW50QXV0aG9yaXR5IiwibGlxUG9vbE1zb2xMZWdBdXRob3JpdHkiLCJsaXFQb29sTXNvbExlZyIsImxpcVBvb2xTb2xMZWdQZGEiLCJtaW50VG8iLCJzeXN0ZW1Qcm9ncmFtIiwiU3lzdGVtUHJvZ3JhbSIsInByb2dyYW1JZCIsInRva2VuUHJvZ3JhbSIsIlRPS0VOX1BST0dSQU1fSUQiLCJpbnN0cnVjdGlvbiIsImFjY291bnQiLCJmZXRjaCIsIm1zb2xQcmljZSIsInRvTnVtYmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/types.js":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/marinade/types.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.IDL = void 0;\nexports.IDL = {\n    version: \"0.1.0\",\n    name: \"marinade_finance\",\n    instructions: [\n        {\n            name: \"initialize\",\n            accounts: [\n                {\n                    name: \"creatorAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"reservePda\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"msolMint\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"operationalSolAccount\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPool\",\n                    accounts: [\n                        {\n                            name: \"lpMint\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"solLegPda\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"msolLeg\",\n                            isMut: false,\n                            isSigner: false\n                        }\n                    ]\n                },\n                {\n                    name: \"treasuryMsolAccount\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"rent\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"data\",\n                    type: {\n                        defined: \"InitializeData\"\n                    }\n                }\n            ]\n        },\n        {\n            name: \"changeAuthority\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"adminAuthority\",\n                    isMut: false,\n                    isSigner: true\n                }\n            ],\n            args: [\n                {\n                    name: \"data\",\n                    type: {\n                        defined: \"ChangeAuthorityData\"\n                    }\n                }\n            ]\n        },\n        {\n            name: \"addValidator\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"managerAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorVote\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"duplicationFlag\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"rentPayer\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"rent\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"score\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"removeValidator\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"managerAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"duplicationFlag\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"operationalSolAccount\",\n                    isMut: true,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"index\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"validatorVote\",\n                    type: \"publicKey\"\n                }\n            ]\n        },\n        {\n            name: \"setValidatorScore\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"managerAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"index\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"validatorVote\",\n                    type: \"publicKey\"\n                },\n                {\n                    name: \"score\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"configValidatorSystem\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"managerAuthority\",\n                    isMut: false,\n                    isSigner: true\n                }\n            ],\n            args: [\n                {\n                    name: \"extraRuns\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"deposit\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"msolMint\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolSolLegPda\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolMsolLeg\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolMsolLegAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"reservePda\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"transferFrom\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"mintTo\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"msolMintAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"tokenProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"lamports\",\n                    type: \"u64\"\n                }\n            ]\n        },\n        {\n            name: \"depositStakeAccount\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"duplicationFlag\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"rentPayer\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"msolMint\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"mintTo\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"msolMintAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"rent\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"tokenProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"validatorIndex\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"liquidUnstake\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"msolMint\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolSolLegPda\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolMsolLeg\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"treasuryMsolAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"getMsolFrom\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"getMsolFromAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"transferSolTo\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"tokenProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"msolAmount\",\n                    type: \"u64\"\n                }\n            ]\n        },\n        {\n            name: \"addLiquidity\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"lpMint\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"lpMintAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolMsolLeg\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolSolLegPda\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"transferFrom\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"mintTo\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"tokenProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"lamports\",\n                    type: \"u64\"\n                }\n            ]\n        },\n        {\n            name: \"removeLiquidity\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"lpMint\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"burnFrom\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"burnFromAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"transferSolTo\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"transferMsolTo\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolSolLegPda\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolMsolLeg\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"liqPoolMsolLegAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"tokenProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"tokens\",\n                    type: \"u64\"\n                }\n            ]\n        },\n        {\n            name: \"configLp\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"adminAuthority\",\n                    isMut: false,\n                    isSigner: true\n                }\n            ],\n            args: [\n                {\n                    name: \"params\",\n                    type: {\n                        defined: \"ConfigLpParams\"\n                    }\n                }\n            ]\n        },\n        {\n            name: \"configMarinade\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"adminAuthority\",\n                    isMut: false,\n                    isSigner: true\n                }\n            ],\n            args: [\n                {\n                    name: \"params\",\n                    type: {\n                        defined: \"ConfigMarinadeParams\"\n                    }\n                }\n            ]\n        },\n        {\n            name: \"orderUnstake\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"msolMint\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"burnMsolFrom\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"burnMsolAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"newTicketAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"rent\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"tokenProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"msolAmount\",\n                    type: \"u64\"\n                }\n            ]\n        },\n        {\n            name: \"claim\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"reservePda\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"ticketAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"transferSolTo\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: []\n        },\n        {\n            name: \"stakeReserve\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorVote\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"reservePda\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeDepositAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"epochSchedule\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"rent\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeHistory\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeConfig\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"validatorIndex\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"updateActive\",\n            accounts: [\n                {\n                    name: \"common\",\n                    accounts: [\n                        {\n                            name: \"state\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeList\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeAccount\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeWithdrawAuthority\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"reservePda\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"msolMint\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"msolMintAuthority\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"treasuryMsolAccount\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"clock\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeHistory\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeProgram\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"tokenProgram\",\n                            isMut: false,\n                            isSigner: false\n                        }\n                    ]\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"stakeIndex\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"validatorIndex\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"updateDeactivated\",\n            accounts: [\n                {\n                    name: \"common\",\n                    accounts: [\n                        {\n                            name: \"state\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeList\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeAccount\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeWithdrawAuthority\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"reservePda\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"msolMint\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"msolMintAuthority\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"treasuryMsolAccount\",\n                            isMut: true,\n                            isSigner: false\n                        },\n                        {\n                            name: \"clock\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeHistory\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"stakeProgram\",\n                            isMut: false,\n                            isSigner: false\n                        },\n                        {\n                            name: \"tokenProgram\",\n                            isMut: false,\n                            isSigner: false\n                        }\n                    ]\n                },\n                {\n                    name: \"operationalSolAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"stakeIndex\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"deactivateStake\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"reservePda\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeDepositAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"splitStakeAccount\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"splitStakeRentPayer\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"rent\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"epochSchedule\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeHistory\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"stakeIndex\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"validatorIndex\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"emergencyUnstake\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorManagerAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeDepositAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"stakeIndex\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"validatorIndex\",\n                    type: \"u32\"\n                }\n            ]\n        },\n        {\n            name: \"partialUnstake\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorManagerAuthority\",\n                    isMut: false,\n                    isSigner: true\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeDepositAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"reservePda\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"splitStakeAccount\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"splitStakeRentPayer\",\n                    isMut: true,\n                    isSigner: true\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"rent\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeHistory\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"systemProgram\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"stakeIndex\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"validatorIndex\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"desiredUnstakeAmount\",\n                    type: \"u64\"\n                }\n            ]\n        },\n        {\n            name: \"mergeStakes\",\n            accounts: [\n                {\n                    name: \"state\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"validatorList\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"destinationStake\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"sourceStake\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeDepositAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeWithdrawAuthority\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"operationalSolAccount\",\n                    isMut: true,\n                    isSigner: false\n                },\n                {\n                    name: \"clock\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeHistory\",\n                    isMut: false,\n                    isSigner: false\n                },\n                {\n                    name: \"stakeProgram\",\n                    isMut: false,\n                    isSigner: false\n                }\n            ],\n            args: [\n                {\n                    name: \"destinationStakeIndex\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"sourceStakeIndex\",\n                    type: \"u32\"\n                },\n                {\n                    name: \"validatorIndex\",\n                    type: \"u32\"\n                }\n            ]\n        }\n    ],\n    accounts: [\n        {\n            name: \"state\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"msolMint\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"adminAuthority\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"operationalSolAccount\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"treasuryMsolAccount\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"reserveBumpSeed\",\n                        type: \"u8\"\n                    },\n                    {\n                        name: \"msolMintAuthorityBumpSeed\",\n                        type: \"u8\"\n                    },\n                    {\n                        name: \"rentExemptForTokenAcc\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"rewardFee\",\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    },\n                    {\n                        name: \"stakeSystem\",\n                        type: {\n                            defined: \"StakeSystem\"\n                        }\n                    },\n                    {\n                        name: \"validatorSystem\",\n                        type: {\n                            defined: \"ValidatorSystem\"\n                        }\n                    },\n                    {\n                        name: \"liqPool\",\n                        type: {\n                            defined: \"LiqPool\"\n                        }\n                    },\n                    {\n                        name: \"availableReserveBalance\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"msolSupply\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"msolPrice\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"circulatingTicketCount\",\n                        docs: [\n                            \"count tickets for delayed-unstake\"\n                        ],\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"circulatingTicketBalance\",\n                        docs: [\n                            \"total lamports amount of generated and not claimed yet tickets\"\n                        ],\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"lentFromReserve\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"minDeposit\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"minWithdraw\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"stakingSolCap\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"emergencyCoolingDown\",\n                        type: \"u64\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"ticketAccountData\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"stateAddress\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"beneficiary\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"lamportsAmount\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"createdEpoch\",\n                        type: \"u64\"\n                    }\n                ]\n            }\n        }\n    ],\n    types: [\n        {\n            name: \"LiqPool\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"lpMint\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"lpMintAuthorityBumpSeed\",\n                        type: \"u8\"\n                    },\n                    {\n                        name: \"solLegBumpSeed\",\n                        type: \"u8\"\n                    },\n                    {\n                        name: \"msolLegAuthorityBumpSeed\",\n                        type: \"u8\"\n                    },\n                    {\n                        name: \"msolLeg\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"lpLiquidityTarget\",\n                        docs: [\n                            \"Liquidity target. If the Liquidity reach this amount, the fee reaches lp_min_discount_fee\"\n                        ],\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"lpMaxFee\",\n                        docs: [\n                            \"Liquidity pool max fee\"\n                        ],\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    },\n                    {\n                        name: \"lpMinFee\",\n                        docs: [\n                            \"SOL/mSOL Liquidity pool min fee\"\n                        ],\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    },\n                    {\n                        name: \"treasuryCut\",\n                        docs: [\n                            \"Treasury cut\"\n                        ],\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    },\n                    {\n                        name: \"lpSupply\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"lentFromSolLeg\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"liquiditySolCap\",\n                        type: \"u64\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"List\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"account\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"itemSize\",\n                        type: \"u32\"\n                    },\n                    {\n                        name: \"count\",\n                        type: \"u32\"\n                    },\n                    {\n                        name: \"newAccount\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"copiedCount\",\n                        type: \"u32\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"StakeRecord\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"stakeAccount\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"lastUpdateDelegatedLamports\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"lastUpdateEpoch\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"isEmergencyUnstaking\",\n                        type: \"u8\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"StakeSystem\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"stakeList\",\n                        type: {\n                            defined: \"List\"\n                        }\n                    },\n                    {\n                        name: \"delayedUnstakeCoolingDown\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"stakeDepositBumpSeed\",\n                        type: \"u8\"\n                    },\n                    {\n                        name: \"stakeWithdrawBumpSeed\",\n                        type: \"u8\"\n                    },\n                    {\n                        name: \"slotsForStakeDelta\",\n                        docs: [\n                            \"set by admin, how much slots before the end of the epoch, stake-delta can start\"\n                        ],\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"lastStakeDeltaEpoch\",\n                        docs: [\n                            \"Marks the start of stake-delta operations, meaning that if somebody starts a delayed-unstake ticket\",\n                            \"after this var is set with epoch_num the ticket will have epoch_created = current_epoch+1\",\n                            \"(the user must wait one more epoch, because their unstake-delta will be execute in this epoch)\"\n                        ],\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"minStake\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"extraStakeDeltaRuns\",\n                        docs: [\n                            \"can be set by validator-manager-auth to allow a second run of stake-delta to stake late stakers in the last minute of the epoch\",\n                            \"so we maximize user's rewards\"\n                        ],\n                        type: \"u32\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"ValidatorRecord\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"validatorAccount\",\n                        docs: [\n                            \"Validator vote pubkey\"\n                        ],\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"activeBalance\",\n                        docs: [\n                            \"Validator total balance in lamports\"\n                        ],\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"score\",\n                        type: \"u32\"\n                    },\n                    {\n                        name: \"lastStakeDeltaEpoch\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"duplicationFlagBumpSeed\",\n                        type: \"u8\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"ValidatorSystem\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"validatorList\",\n                        type: {\n                            defined: \"List\"\n                        }\n                    },\n                    {\n                        name: \"managerAuthority\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"totalValidatorScore\",\n                        type: \"u32\"\n                    },\n                    {\n                        name: \"totalActiveBalance\",\n                        docs: [\n                            \"sum of all active lamports staked\"\n                        ],\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"autoAddValidatorEnabled\",\n                        docs: [\n                            \"allow & auto-add validator when a user deposits a stake-account of a non-listed validator\"\n                        ],\n                        type: \"u8\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"Fee\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"basisPoints\",\n                        type: \"u32\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"InitializeData\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"adminAuthority\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"validatorManagerAuthority\",\n                        type: \"publicKey\"\n                    },\n                    {\n                        name: \"minStake\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"rewardFee\",\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    },\n                    {\n                        name: \"liqPool\",\n                        type: {\n                            defined: \"LiqPoolInitializeData\"\n                        }\n                    },\n                    {\n                        name: \"additionalStakeRecordSpace\",\n                        type: \"u32\"\n                    },\n                    {\n                        name: \"additionalValidatorRecordSpace\",\n                        type: \"u32\"\n                    },\n                    {\n                        name: \"slotsForStakeDelta\",\n                        type: \"u64\"\n                    }\n                ]\n            }\n        },\n        {\n            name: \"LiqPoolInitializeData\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"lpLiquidityTarget\",\n                        type: \"u64\"\n                    },\n                    {\n                        name: \"lpMaxFee\",\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    },\n                    {\n                        name: \"lpMinFee\",\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    },\n                    {\n                        name: \"lpTreasuryCut\",\n                        type: {\n                            defined: \"Fee\"\n                        }\n                    }\n                ]\n            }\n        },\n        {\n            name: \"ChangeAuthorityData\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"admin\",\n                        type: {\n                            option: \"publicKey\"\n                        }\n                    },\n                    {\n                        name: \"validatorManager\",\n                        type: {\n                            option: \"publicKey\"\n                        }\n                    },\n                    {\n                        name: \"operationalSolAccount\",\n                        type: {\n                            option: \"publicKey\"\n                        }\n                    },\n                    {\n                        name: \"treasuryMsolAccount\",\n                        type: {\n                            option: \"publicKey\"\n                        }\n                    }\n                ]\n            }\n        },\n        {\n            name: \"ConfigLpParams\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"minFee\",\n                        type: {\n                            option: {\n                                defined: \"Fee\"\n                            }\n                        }\n                    },\n                    {\n                        name: \"maxFee\",\n                        type: {\n                            option: {\n                                defined: \"Fee\"\n                            }\n                        }\n                    },\n                    {\n                        name: \"liquidityTarget\",\n                        type: {\n                            option: \"u64\"\n                        }\n                    },\n                    {\n                        name: \"treasuryCut\",\n                        type: {\n                            option: {\n                                defined: \"Fee\"\n                            }\n                        }\n                    }\n                ]\n            }\n        },\n        {\n            name: \"ConfigMarinadeParams\",\n            type: {\n                kind: \"struct\",\n                fields: [\n                    {\n                        name: \"rewardsFee\",\n                        type: {\n                            option: {\n                                defined: \"Fee\"\n                            }\n                        }\n                    },\n                    {\n                        name: \"slotsForStakeDelta\",\n                        type: {\n                            option: \"u64\"\n                        }\n                    },\n                    {\n                        name: \"minStake\",\n                        type: {\n                            option: \"u64\"\n                        }\n                    },\n                    {\n                        name: \"minDeposit\",\n                        type: {\n                            option: \"u64\"\n                        }\n                    },\n                    {\n                        name: \"minWithdraw\",\n                        type: {\n                            option: \"u64\"\n                        }\n                    },\n                    {\n                        name: \"stakingSolCap\",\n                        type: {\n                            option: \"u64\"\n                        }\n                    },\n                    {\n                        name: \"liquiditySolCap\",\n                        type: {\n                            option: \"u64\"\n                        }\n                    },\n                    {\n                        name: \"autoAddValidatorEnabled\",\n                        type: {\n                            option: \"bool\"\n                        }\n                    }\n                ]\n            }\n        },\n        {\n            name: \"CommonError\",\n            type: {\n                kind: \"enum\",\n                variants: [\n                    {\n                        name: \"WrongReserveOwner\"\n                    },\n                    {\n                        name: \"NonEmptyReserveData\"\n                    },\n                    {\n                        name: \"InvalidInitialReserveLamports\"\n                    },\n                    {\n                        name: \"ZeroValidatorChunkSize\"\n                    },\n                    {\n                        name: \"TooBigValidatorChunkSize\"\n                    },\n                    {\n                        name: \"ZeroCreditChunkSize\"\n                    },\n                    {\n                        name: \"TooBigCreditChunkSize\"\n                    },\n                    {\n                        name: \"TooLowCreditFee\"\n                    },\n                    {\n                        name: \"InvalidMintAuthority\"\n                    },\n                    {\n                        name: \"MintHasInitialSupply\"\n                    },\n                    {\n                        name: \"InvalidOwnerFeeState\"\n                    },\n                    {\n                        name: \"InvalidProgramId\"\n                    },\n                    {\n                        name: \"UnexpectedAccount\"\n                    },\n                    {\n                        name: \"CalculationFailure\"\n                    },\n                    {\n                        name: \"AccountWithLockup\"\n                    },\n                    {\n                        name: \"NumberTooLow\"\n                    },\n                    {\n                        name: \"NumberTooHigh\"\n                    },\n                    {\n                        name: \"FeeTooHigh\"\n                    },\n                    {\n                        name: \"FeesWrongWayRound\"\n                    },\n                    {\n                        name: \"LiquidityTargetTooLow\"\n                    },\n                    {\n                        name: \"TicketNotDue\"\n                    },\n                    {\n                        name: \"TicketNotReady\"\n                    },\n                    {\n                        name: \"WrongBeneficiary\"\n                    },\n                    {\n                        name: \"StakeAccountNotUpdatedYet\"\n                    },\n                    {\n                        name: \"StakeNotDelegated\"\n                    },\n                    {\n                        name: \"StakeAccountIsEmergencyUnstaking\"\n                    },\n                    {\n                        name: \"InsufficientLiquidity\"\n                    },\n                    {\n                        name: \"InvalidValidator\"\n                    }\n                ]\n            }\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXJpbmFkZS90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsV0FBVyxHQUFHLEtBQUs7QUFDbkJBLFdBQVcsR0FBRztJQUNWRyxTQUFTO0lBQ1RDLE1BQU07SUFDTkMsY0FBYztRQUNWO1lBQ0lELE1BQU07WUFDTkUsVUFBVTtnQkFDTjtvQkFDSUYsTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkUsVUFBVTt3QkFDTjs0QkFDSUYsTUFBTTs0QkFDTkcsT0FBTzs0QkFDUEMsVUFBVTt3QkFDZDt3QkFDQTs0QkFDSUosTUFBTTs0QkFDTkcsT0FBTzs0QkFDUEMsVUFBVTt3QkFDZDt3QkFDQTs0QkFDSUosTUFBTTs0QkFDTkcsT0FBTzs0QkFDUEMsVUFBVTt3QkFDZDtxQkFDSDtnQkFDTDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFDZDtnQkFDQTtvQkFDSUosTUFBTTtvQkFDTkcsT0FBTztvQkFDUEMsVUFBVTtnQkFD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TTt3QkFDTk0sTUFBTTs0QkFDRk0sUUFBUTt3QkFDWjtvQkFDSjtvQkFDQTt3QkFDSVosTUFBTTt3QkFDTk0sTUFBTTs0QkFDRk0sUUFBUTt3QkFDWjtvQkFDSjtvQkFDQTt3QkFDSVosTUFBTTt3QkFDTk0sTUFBTTs0QkFDRk0sUUFBUTt3QkFDWjtvQkFDSjtvQkFDQTt3QkFDSVosTUFBTTt3QkFDTk0sTUFBTTs0QkFDRk0sUUFBUTt3QkFDWjtvQkFDSjtvQkFDQTt3QkFDSVosTUFBTTt3QkFDTk0sTUFBTTs0QkFDRk0sUUFBUTt3QkFDWjtvQkFDSjtpQkFDSDtZQUNMO1FBQ0o7UUFDQTtZQUNJWixNQUFNO1lBQ05NLE1BQU07Z0JBQ0ZFLE1BQU07Z0JBQ05LLFVBQVU7b0JBQ047d0JBQ0liLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7b0JBQ0E7d0JBQ0lBLE1BQU07b0JBQ1Y7aUJBQ0g7WUFDTDtRQUNKO0tBQ0g7QUFDTCIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXJpbmFkZS90eXBlcy5qcz84ZDQ3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5JREwgPSB2b2lkIDA7XG5leHBvcnRzLklETCA9IHtcbiAgICB2ZXJzaW9uOiAnMC4xLjAnLFxuICAgIG5hbWU6ICdtYXJpbmFkZV9maW5hbmNlJyxcbiAgICBpbnN0cnVjdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2luaXRpYWxpemUnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjcmVhdG9yQXV0aG9yaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Jlc2VydmVQZGEnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21zb2xNaW50JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdvcGVyYXRpb25hbFNvbEFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xpcVBvb2wnLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50czogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdscE1pbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzb2xMZWdQZGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTGVnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RyZWFzdXJ5TXNvbEFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2Nsb2NrJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZGF0YScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6ICdJbml0aWFsaXplRGF0YScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdjaGFuZ2VBdXRob3JpdHknLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhZG1pbkF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZGF0YScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6ICdDaGFuZ2VBdXRob3JpdHlEYXRhJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2FkZFZhbGlkYXRvcicsXG4gICAgICAgICAgICBhY2NvdW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21hbmFnZXJBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9yTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JWb3RlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdkdXBsaWNhdGlvbkZsYWcnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVudFBheWVyJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2xvY2snLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlbnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N5c3RlbVByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzY29yZScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1MzInLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAncmVtb3ZlVmFsaWRhdG9yJyxcbiAgICAgICAgICAgIGFjY291bnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3RhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbWFuYWdlckF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2R1cGxpY2F0aW9uRmxhZycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdvcGVyYXRpb25hbFNvbEFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2luZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JWb3RlJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpY0tleScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZXRWYWxpZGF0b3JTY29yZScsXG4gICAgICAgICAgICBhY2NvdW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21hbmFnZXJBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9yTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnaW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbGlkYXRvclZvdGUnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Njb3JlJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdjb25maWdWYWxpZGF0b3JTeXN0ZW0nLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtYW5hZ2VyQXV0aG9yaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdleHRyYVJ1bnMnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2RlcG9zaXQnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTWludCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsaXFQb29sU29sTGVnUGRhJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xpcVBvb2xNc29sTGVnJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xpcVBvb2xNc29sTGVnQXV0aG9yaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZXNlcnZlUGRhJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RyYW5zZmVyRnJvbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21pbnRUbycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTWludEF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3lzdGVtUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndG9rZW5Qcm9ncmFtJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGFtcG9ydHMnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2RlcG9zaXRTdGFrZUFjY291bnQnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZHVwbGljYXRpb25GbGFnJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlbnRQYXllcicsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21zb2xNaW50JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21pbnRUbycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTWludEF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2xvY2snLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlbnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N5c3RlbVByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Rva2VuUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VQcm9ncmFtJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9ySW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2xpcXVpZFVuc3Rha2UnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTWludCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsaXFQb29sU29sTGVnUGRhJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xpcVBvb2xNc29sTGVnJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RyZWFzdXJ5TXNvbEFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZ2V0TXNvbEZyb20nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZ2V0TXNvbEZyb21BdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndHJhbnNmZXJTb2xUbycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzeXN0ZW1Qcm9ncmFtJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0b2tlblByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sQW1vdW50JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdhZGRMaXF1aWRpdHknLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdscE1pbnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbHBNaW50QXV0aG9yaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsaXFQb29sTXNvbExlZycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGlxUG9vbFNvbExlZ1BkYScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0cmFuc2ZlckZyb20nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtaW50VG8nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3lzdGVtUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndG9rZW5Qcm9ncmFtJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGFtcG9ydHMnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3JlbW92ZUxpcXVpZGl0eScsXG4gICAgICAgICAgICBhY2NvdW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xwTWludCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdidXJuRnJvbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdidXJuRnJvbUF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0cmFuc2ZlclNvbFRvJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RyYW5zZmVyTXNvbFRvJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xpcVBvb2xTb2xMZWdQZGEnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGlxUG9vbE1zb2xMZWcnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGlxUG9vbE1zb2xMZWdBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N5c3RlbVByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Rva2VuUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Rva2VucycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnY29uZmlnTHAnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhZG1pbkF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncGFyYW1zJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0NvbmZpZ0xwUGFyYW1zJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2NvbmZpZ01hcmluYWRlJyxcbiAgICAgICAgICAgIGFjY291bnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3RhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYWRtaW5BdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3BhcmFtcycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6ICdDb25maWdNYXJpbmFkZVBhcmFtcycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdvcmRlclVuc3Rha2UnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTWludCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdidXJuTXNvbEZyb20nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYnVybk1zb2xBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbmV3VGlja2V0QWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVudCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndG9rZW5Qcm9ncmFtJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXNvbEFtb3VudCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnY2xhaW0nLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZXNlcnZlUGRhJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RpY2tldEFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndHJhbnNmZXJTb2xUbycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3lzdGVtUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXJnczogW10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdzdGFrZVJlc2VydmUnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JWb3RlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Jlc2VydmVQZGEnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VBY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlRGVwb3NpdEF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2xvY2snLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2Vwb2NoU2NoZWR1bGUnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlbnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlSGlzdG9yeScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VDb25maWcnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N5c3RlbVByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbGlkYXRvckluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd1cGRhdGVBY3RpdmUnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjb21tb24nLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50czogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlV2l0aGRyYXdBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZXNlcnZlUGRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTWludCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXNvbE1pbnRBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0cmVhc3VyeU1zb2xBY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbG9jaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlSGlzdG9yeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Rva2VuUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JJbmRleCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1MzInLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAndXBkYXRlRGVhY3RpdmF0ZWQnLFxuICAgICAgICAgICAgYWNjb3VudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjb21tb24nLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50czogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlV2l0aGRyYXdBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZXNlcnZlUGRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTWludCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXNvbE1pbnRBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0cmVhc3VyeU1zb2xBY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbG9jaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlSGlzdG9yeScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Rva2VuUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdvcGVyYXRpb25hbFNvbEFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3lzdGVtUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlSW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2RlYWN0aXZhdGVTdGFrZScsXG4gICAgICAgICAgICBhY2NvdW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Jlc2VydmVQZGEnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbGlkYXRvckxpc3QnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlQWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZURlcG9zaXRBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NwbGl0U3Rha2VBY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3BsaXRTdGFrZVJlbnRQYXllcicsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2Nsb2NrJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdlcG9jaFNjaGVkdWxlJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUhpc3RvcnknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N5c3RlbVByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlUHJvZ3JhbScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgYXJnczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlSW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbGlkYXRvckluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdlbWVyZ2VuY3lVbnN0YWtlJyxcbiAgICAgICAgICAgIGFjY291bnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3RhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9yTWFuYWdlckF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VEZXBvc2l0QXV0aG9yaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VQcm9ncmFtJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBhcmdzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VJbmRleCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1MzInLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9ySW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3BhcnRpYWxVbnN0YWtlJyxcbiAgICAgICAgICAgIGFjY291bnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3RhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9yTWFuYWdlckF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VEZXBvc2l0QXV0aG9yaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZXNlcnZlUGRhJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzcGxpdFN0YWtlQWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NwbGl0U3Rha2VSZW50UGF5ZXInLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmVudCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VIaXN0b3J5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzeXN0ZW1Qcm9ncmFtJyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZVByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JJbmRleCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1MzInLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZGVzaXJlZFVuc3Rha2VBbW91bnQnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ21lcmdlU3Rha2VzJyxcbiAgICAgICAgICAgIGFjY291bnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3RhdGUnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbGlkYXRvckxpc3QnLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZGVzdGluYXRpb25TdGFrZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzb3VyY2VTdGFrZScsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZURlcG9zaXRBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlV2l0aGRyYXdBdXRob3JpdHknLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ29wZXJhdGlvbmFsU29sQWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIGlzTXV0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaWduZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VIaXN0b3J5JyxcbiAgICAgICAgICAgICAgICAgICAgaXNNdXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc1NpZ25lcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZVByb2dyYW0nLFxuICAgICAgICAgICAgICAgICAgICBpc011dDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2lnbmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGFyZ3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdkZXN0aW5hdGlvblN0YWtlSW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NvdXJjZVN0YWtlSW5kZXgnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3ZhbGlkYXRvckluZGV4JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgXSxcbiAgICBhY2NvdW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnc3RhdGUnLFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgIGtpbmQ6ICdzdHJ1Y3QnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXNvbE1pbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpY0tleScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhZG1pbkF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ29wZXJhdGlvbmFsU29sQWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RyZWFzdXJ5TXNvbEFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpY0tleScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdyZXNlcnZlQnVtcFNlZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U4JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21zb2xNaW50QXV0aG9yaXR5QnVtcFNlZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U4JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3JlbnRFeGVtcHRGb3JUb2tlbkFjYycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Jld2FyZEZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0ZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VTeXN0ZW0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6ICdTdGFrZVN5c3RlbScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9yU3lzdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnVmFsaWRhdG9yU3lzdGVtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsaXFQb29sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnTGlxUG9vbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYXZhaWxhYmxlUmVzZXJ2ZUJhbGFuY2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sU3VwcGx5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbXNvbFByaWNlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY2lyY3VsYXRpbmdUaWNrZXRDb3VudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzOiBbJ2NvdW50IHRpY2tldHMgZm9yIGRlbGF5ZWQtdW5zdGFrZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdjaXJjdWxhdGluZ1RpY2tldEJhbGFuY2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0b3RhbCBsYW1wb3J0cyBhbW91bnQgb2YgZ2VuZXJhdGVkIGFuZCBub3QgY2xhaW1lZCB5ZXQgdGlja2V0cycsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsZW50RnJvbVJlc2VydmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtaW5EZXBvc2l0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbWluV2l0aGRyYXcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFraW5nU29sQ2FwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZW1lcmdlbmN5Q29vbGluZ0Rvd24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICd0aWNrZXRBY2NvdW50RGF0YScsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ3N0cnVjdCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGF0ZUFkZHJlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpY0tleScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdiZW5lZmljaWFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xhbXBvcnRzQW1vdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY3JlYXRlZEVwb2NoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIF0sXG4gICAgdHlwZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0xpcVBvb2wnLFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgIGtpbmQ6ICdzdHJ1Y3QnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbHBNaW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdWJsaWNLZXknLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbHBNaW50QXV0aG9yaXR5QnVtcFNlZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U4JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3NvbExlZ0J1bXBTZWVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1OCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtc29sTGVnQXV0aG9yaXR5QnVtcFNlZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U4JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21zb2xMZWcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpY0tleScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdscExpcXVpZGl0eVRhcmdldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xpcXVpZGl0eSB0YXJnZXQuIElmIHRoZSBMaXF1aWRpdHkgcmVhY2ggdGhpcyBhbW91bnQsIHRoZSBmZWUgcmVhY2hlcyBscF9taW5fZGlzY291bnRfZmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xwTWF4RmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3M6IFsnTGlxdWlkaXR5IHBvb2wgbWF4IGZlZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6ICdGZWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xwTWluRmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3M6IFsnU09ML21TT0wgTGlxdWlkaXR5IHBvb2wgbWluIGZlZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6ICdGZWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RyZWFzdXJ5Q3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3M6IFsnVHJlYXN1cnkgY3V0J10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0ZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbHBTdXBwbHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsZW50RnJvbVNvbExlZycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xpcXVpZGl0eVNvbENhcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0xpc3QnLFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgIGtpbmQ6ICdzdHJ1Y3QnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2l0ZW1TaXplJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1MzInLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICduZXdBY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdWJsaWNLZXknLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnY29waWVkQ291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdTdGFrZVJlY29yZCcsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ3N0cnVjdCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZUFjY291bnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpY0tleScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsYXN0VXBkYXRlRGVsZWdhdGVkTGFtcG9ydHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsYXN0VXBkYXRlRXBvY2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdpc0VtZXJnZW5jeVVuc3Rha2luZycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTgnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnU3Rha2VTeXN0ZW0nLFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgIGtpbmQ6ICdzdHJ1Y3QnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc3Rha2VMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZGVsYXllZFVuc3Rha2VDb29saW5nRG93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtlRGVwb3NpdEJ1bXBTZWVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1OCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdzdGFrZVdpdGhkcmF3QnVtcFNlZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U4JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Nsb3RzRm9yU3Rha2VEZWx0YScsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NldCBieSBhZG1pbiwgaG93IG11Y2ggc2xvdHMgYmVmb3JlIHRoZSBlbmQgb2YgdGhlIGVwb2NoLCBzdGFrZS1kZWx0YSBjYW4gc3RhcnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGFzdFN0YWtlRGVsdGFFcG9jaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ01hcmtzIHRoZSBzdGFydCBvZiBzdGFrZS1kZWx0YSBvcGVyYXRpb25zLCBtZWFuaW5nIHRoYXQgaWYgc29tZWJvZHkgc3RhcnRzIGEgZGVsYXllZC11bnN0YWtlIHRpY2tldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FmdGVyIHRoaXMgdmFyIGlzIHNldCB3aXRoIGVwb2NoX251bSB0aGUgdGlja2V0IHdpbGwgaGF2ZSBlcG9jaF9jcmVhdGVkID0gY3VycmVudF9lcG9jaCsxJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKHRoZSB1c2VyIG11c3Qgd2FpdCBvbmUgbW9yZSBlcG9jaCwgYmVjYXVzZSB0aGVpciB1bnN0YWtlLWRlbHRhIHdpbGwgYmUgZXhlY3V0ZSBpbiB0aGlzIGVwb2NoKScsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtaW5TdGFrZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2V4dHJhU3Rha2VEZWx0YVJ1bnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjYW4gYmUgc2V0IGJ5IHZhbGlkYXRvci1tYW5hZ2VyLWF1dGggdG8gYWxsb3cgYSBzZWNvbmQgcnVuIG9mIHN0YWtlLWRlbHRhIHRvIHN0YWtlIGxhdGUgc3Rha2VycyBpbiB0aGUgbGFzdCBtaW51dGUgb2YgdGhlIGVwb2NoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNvIHdlIG1heGltaXplIHVzZXIncyByZXdhcmRzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdWYWxpZGF0b3JSZWNvcmQnLFxuICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgIGtpbmQ6ICdzdHJ1Y3QnLFxuICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9yQWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NzOiBbJ1ZhbGlkYXRvciB2b3RlIHB1YmtleSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3B1YmxpY0tleScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhY3RpdmVCYWxhbmNlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3M6IFsnVmFsaWRhdG9yIHRvdGFsIGJhbGFuY2UgaW4gbGFtcG9ydHMnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnc2NvcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsYXN0U3Rha2VEZWx0YUVwb2NoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnZHVwbGljYXRpb25GbGFnQnVtcFNlZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U4JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ1ZhbGlkYXRvclN5c3RlbScsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ3N0cnVjdCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JMaXN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnTGlzdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbWFuYWdlckF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3RvdGFsVmFsaWRhdG9yU2NvcmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3UzMicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0b3RhbEFjdGl2ZUJhbGFuY2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jczogWydzdW0gb2YgYWxsIGFjdGl2ZSBsYW1wb3J0cyBzdGFrZWQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYXV0b0FkZFZhbGlkYXRvckVuYWJsZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhbGxvdyAmIGF1dG8tYWRkIHZhbGlkYXRvciB3aGVuIGEgdXNlciBkZXBvc2l0cyBhIHN0YWtlLWFjY291bnQgb2YgYSBub24tbGlzdGVkIHZhbGlkYXRvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3U4JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0ZlZScsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ3N0cnVjdCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdiYXNpc1BvaW50cycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0luaXRpYWxpemVEYXRhJyxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICBraW5kOiAnc3RydWN0JyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FkbWluQXV0aG9yaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdWJsaWNLZXknLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndmFsaWRhdG9yTWFuYWdlckF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21pblN0YWtlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAncmV3YXJkRmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnRmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsaXFQb29sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnTGlxUG9vbEluaXRpYWxpemVEYXRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhZGRpdGlvbmFsU3Rha2VSZWNvcmRTcGFjZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2FkZGl0aW9uYWxWYWxpZGF0b3JSZWNvcmRTcGFjZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTMyJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Nsb3RzRm9yU3Rha2VEZWx0YScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0xpcVBvb2xJbml0aWFsaXplRGF0YScsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ3N0cnVjdCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdscExpcXVpZGl0eVRhcmdldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2xwTWF4RmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnRmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdscE1pbkZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0ZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbHBUcmVhc3VyeUN1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0ZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnQ2hhbmdlQXV0aG9yaXR5RGF0YScsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ3N0cnVjdCcsXG4gICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdhZG1pbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd2YWxpZGF0b3JNYW5hZ2VyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246ICdwdWJsaWNLZXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ29wZXJhdGlvbmFsU29sQWNjb3VudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiAncHVibGljS2V5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICd0cmVhc3VyeU1zb2xBY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246ICdwdWJsaWNLZXknLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0NvbmZpZ0xwUGFyYW1zJyxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICBraW5kOiAnc3RydWN0JyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21pbkZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6ICdGZWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbWF4RmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogJ0ZlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdsaXF1aWRpdHlUYXJnZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAndHJlYXN1cnlDdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnRmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ0NvbmZpZ01hcmluYWRlUGFyYW1zJyxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICBraW5kOiAnc3RydWN0JyxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Jld2FyZHNGZWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiAnRmVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3Nsb3RzRm9yU3Rha2VEZWx0YScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtaW5TdGFrZScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uOiAndTY0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtaW5EZXBvc2l0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21pbldpdGhkcmF3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ3N0YWtpbmdTb2xDYXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbjogJ3U2NCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnbGlxdWlkaXR5U29sQ2FwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246ICd1NjQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2F1dG9BZGRWYWxpZGF0b3JFbmFibGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb246ICdib29sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdDb21tb25FcnJvcicsXG4gICAgICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ2VudW0nLFxuICAgICAgICAgICAgICAgIHZhcmlhbnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdXcm9uZ1Jlc2VydmVPd25lcicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdOb25FbXB0eVJlc2VydmVEYXRhJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0ludmFsaWRJbml0aWFsUmVzZXJ2ZUxhbXBvcnRzJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1plcm9WYWxpZGF0b3JDaHVua1NpemUnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVG9vQmlnVmFsaWRhdG9yQ2h1bmtTaXplJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1plcm9DcmVkaXRDaHVua1NpemUnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVG9vQmlnQ3JlZGl0Q2h1bmtTaXplJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1Rvb0xvd0NyZWRpdEZlZScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdJbnZhbGlkTWludEF1dGhvcml0eScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdNaW50SGFzSW5pdGlhbFN1cHBseScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdJbnZhbGlkT3duZXJGZWVTdGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdJbnZhbGlkUHJvZ3JhbUlkJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1VuZXhwZWN0ZWRBY2NvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0NhbGN1bGF0aW9uRmFpbHVyZScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdBY2NvdW50V2l0aExvY2t1cCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdOdW1iZXJUb29Mb3cnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTnVtYmVyVG9vSGlnaCcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdGZWVUb29IaWdoJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0ZlZXNXcm9uZ1dheVJvdW5kJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0xpcXVpZGl0eVRhcmdldFRvb0xvdycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdUaWNrZXROb3REdWUnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVGlja2V0Tm90UmVhZHknLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnV3JvbmdCZW5lZmljaWFyeScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTdGFrZUFjY291bnROb3RVcGRhdGVkWWV0JyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1N0YWtlTm90RGVsZWdhdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1N0YWtlQWNjb3VudElzRW1lcmdlbmN5VW5zdGFraW5nJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ0luc3VmZmljaWVudExpcXVpZGl0eScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdJbnZhbGlkVmFsaWRhdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICBdLFxufTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIklETCIsInZlcnNpb24iLCJuYW1lIiwiaW5zdHJ1Y3Rpb25zIiwiYWNjb3VudHMiLCJpc011dCIsImlzU2lnbmVyIiwiYXJncyIsInR5cGUiLCJkZWZpbmVkIiwia2luZCIsImZpZWxkcyIsImRvY3MiLCJ0eXBlcyIsIm9wdGlvbiIsInZhcmlhbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js":
/*!******************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/amm.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateMaxBaseAssetAmountFillable = exports.calculateQuoteAssetAmountSwapped = exports.calculateMaxBaseAssetAmountToTrade = exports.calculateTerminalPrice = exports.getSwapDirection = exports.calculateSwapOutput = exports.calculateSpreadReserves = exports.calculateSpread = exports.calculateSpreadBN = exports.calculateVolSpreadBN = exports.calculateMaxSpread = exports.calculateEffectiveLeverage = exports.calculateInventoryScale = exports.calculateMarketOpenBidAsk = exports.calculateAmmReservesAfterSwap = exports.calculatePrice = exports.calculateBidAskPrice = exports.calculateUpdatedAMMSpreadReserves = exports.calculateUpdatedAMM = exports.calculateNewAmm = exports.calculateOptimalPegAndBudget = exports.calculatePegFromTargetPrice = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst assert_1 = __webpack_require__(/*! ../assert/assert */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\");\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst repeg_1 = __webpack_require__(/*! ./repeg */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/repeg.js\");\nconst oracles_1 = __webpack_require__(/*! ./oracles */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/oracles.js\");\nfunction calculatePegFromTargetPrice(targetPrice, baseAssetReserve, quoteAssetReserve) {\n    return anchor_1.BN.max(targetPrice.mul(baseAssetReserve).div(quoteAssetReserve).add(numericConstants_1.PRICE_DIV_PEG.div(new anchor_1.BN(2))).div(numericConstants_1.PRICE_DIV_PEG), numericConstants_1.ONE);\n}\nexports.calculatePegFromTargetPrice = calculatePegFromTargetPrice;\nfunction calculateOptimalPegAndBudget(amm, oraclePriceData) {\n    const reservePriceBefore = calculatePrice(amm.baseAssetReserve, amm.quoteAssetReserve, amm.pegMultiplier);\n    const targetPrice = oraclePriceData.price;\n    const newPeg = calculatePegFromTargetPrice(targetPrice, amm.baseAssetReserve, amm.quoteAssetReserve);\n    const prePegCost = (0, repeg_1.calculateRepegCost)(amm, newPeg);\n    const totalFeeLB = amm.totalExchangeFee.div(new anchor_1.BN(2));\n    const budget = anchor_1.BN.max(numericConstants_1.ZERO, amm.totalFeeMinusDistributions.sub(totalFeeLB));\n    let checkLowerBound = true;\n    if (budget.lt(prePegCost)) {\n        const halfMaxPriceSpread = new anchor_1.BN(amm.maxSpread).div(new anchor_1.BN(2)).mul(targetPrice).div(numericConstants_1.BID_ASK_SPREAD_PRECISION);\n        let newTargetPrice;\n        let newOptimalPeg;\n        let newBudget;\n        const targetPriceGap = reservePriceBefore.sub(targetPrice);\n        if (targetPriceGap.abs().gt(halfMaxPriceSpread)) {\n            const markAdj = targetPriceGap.abs().sub(halfMaxPriceSpread);\n            if (targetPriceGap.lt(new anchor_1.BN(0))) {\n                newTargetPrice = reservePriceBefore.add(markAdj);\n            } else {\n                newTargetPrice = reservePriceBefore.sub(markAdj);\n            }\n            newOptimalPeg = calculatePegFromTargetPrice(newTargetPrice, amm.baseAssetReserve, amm.quoteAssetReserve);\n            newBudget = (0, repeg_1.calculateRepegCost)(amm, newOptimalPeg);\n            checkLowerBound = false;\n            return [\n                newTargetPrice,\n                newOptimalPeg,\n                newBudget,\n                false\n            ];\n        } else if (amm.totalFeeMinusDistributions.lt(amm.totalExchangeFee.div(new anchor_1.BN(2)))) {\n            checkLowerBound = false;\n        }\n    }\n    return [\n        targetPrice,\n        newPeg,\n        budget,\n        checkLowerBound\n    ];\n}\nexports.calculateOptimalPegAndBudget = calculateOptimalPegAndBudget;\nfunction calculateNewAmm(amm, oraclePriceData) {\n    let pKNumer = new anchor_1.BN(1);\n    let pKDenom = new anchor_1.BN(1);\n    const [targetPrice, _newPeg, budget, _checkLowerBound] = calculateOptimalPegAndBudget(amm, oraclePriceData);\n    let prePegCost = (0, repeg_1.calculateRepegCost)(amm, _newPeg);\n    let newPeg = _newPeg;\n    if (prePegCost.gte(budget) && prePegCost.gt(numericConstants_1.ZERO)) {\n        [pKNumer, pKDenom] = [\n            new anchor_1.BN(999),\n            new anchor_1.BN(1000)\n        ];\n        const deficitMadeup = (0, repeg_1.calculateAdjustKCost)(amm, pKNumer, pKDenom);\n        (0, assert_1.assert)(deficitMadeup.lte(new anchor_1.BN(0)));\n        prePegCost = budget.add(deficitMadeup.abs());\n        const newAmm = Object.assign({}, amm);\n        newAmm.baseAssetReserve = newAmm.baseAssetReserve.mul(pKNumer).div(pKDenom);\n        newAmm.sqrtK = newAmm.sqrtK.mul(pKNumer).div(pKDenom);\n        const invariant = newAmm.sqrtK.mul(newAmm.sqrtK);\n        newAmm.quoteAssetReserve = invariant.div(newAmm.baseAssetReserve);\n        const directionToClose = amm.baseAssetAmountWithAmm.gt(numericConstants_1.ZERO) ? types_1.PositionDirection.SHORT : types_1.PositionDirection.LONG;\n        const [newQuoteAssetReserve, _newBaseAssetReserve] = calculateAmmReservesAfterSwap(newAmm, \"base\", amm.baseAssetAmountWithAmm.abs(), getSwapDirection(\"base\", directionToClose));\n        newAmm.terminalQuoteAssetReserve = newQuoteAssetReserve;\n        newPeg = (0, repeg_1.calculateBudgetedPeg)(newAmm, prePegCost, targetPrice);\n        prePegCost = (0, repeg_1.calculateRepegCost)(newAmm, newPeg);\n    }\n    return [\n        prePegCost,\n        pKNumer,\n        pKDenom,\n        newPeg\n    ];\n}\nexports.calculateNewAmm = calculateNewAmm;\nfunction calculateUpdatedAMM(amm, oraclePriceData) {\n    if (amm.curveUpdateIntensity == 0 || oraclePriceData === undefined) {\n        return amm;\n    }\n    const newAmm = Object.assign({}, amm);\n    const [prepegCost, pKNumer, pKDenom, newPeg] = calculateNewAmm(amm, oraclePriceData);\n    newAmm.baseAssetReserve = newAmm.baseAssetReserve.mul(pKNumer).div(pKDenom);\n    newAmm.sqrtK = newAmm.sqrtK.mul(pKNumer).div(pKDenom);\n    const invariant = newAmm.sqrtK.mul(newAmm.sqrtK);\n    newAmm.quoteAssetReserve = invariant.div(newAmm.baseAssetReserve);\n    newAmm.pegMultiplier = newPeg;\n    const directionToClose = amm.baseAssetAmountWithAmm.gt(numericConstants_1.ZERO) ? types_1.PositionDirection.SHORT : types_1.PositionDirection.LONG;\n    const [newQuoteAssetReserve, _newBaseAssetReserve] = calculateAmmReservesAfterSwap(newAmm, \"base\", amm.baseAssetAmountWithAmm.abs(), getSwapDirection(\"base\", directionToClose));\n    newAmm.terminalQuoteAssetReserve = newQuoteAssetReserve;\n    newAmm.totalFeeMinusDistributions = newAmm.totalFeeMinusDistributions.sub(prepegCost);\n    newAmm.netRevenueSinceLastFunding = newAmm.netRevenueSinceLastFunding.sub(prepegCost);\n    return newAmm;\n}\nexports.calculateUpdatedAMM = calculateUpdatedAMM;\nfunction calculateUpdatedAMMSpreadReserves(amm, direction, oraclePriceData) {\n    const newAmm = calculateUpdatedAMM(amm, oraclePriceData);\n    const [shortReserves, longReserves] = calculateSpreadReserves(newAmm, oraclePriceData);\n    const dirReserves = (0, types_1.isVariant)(direction, \"long\") ? longReserves : shortReserves;\n    const result = {\n        baseAssetReserve: dirReserves.baseAssetReserve,\n        quoteAssetReserve: dirReserves.quoteAssetReserve,\n        sqrtK: newAmm.sqrtK,\n        newPeg: newAmm.pegMultiplier\n    };\n    return result;\n}\nexports.calculateUpdatedAMMSpreadReserves = calculateUpdatedAMMSpreadReserves;\nfunction calculateBidAskPrice(amm, oraclePriceData, withUpdate = true) {\n    let newAmm;\n    if (withUpdate) {\n        newAmm = calculateUpdatedAMM(amm, oraclePriceData);\n    } else {\n        newAmm = amm;\n    }\n    const [bidReserves, askReserves] = calculateSpreadReserves(newAmm, oraclePriceData);\n    const askPrice = calculatePrice(askReserves.baseAssetReserve, askReserves.quoteAssetReserve, newAmm.pegMultiplier);\n    const bidPrice = calculatePrice(bidReserves.baseAssetReserve, bidReserves.quoteAssetReserve, newAmm.pegMultiplier);\n    return [\n        bidPrice,\n        askPrice\n    ];\n}\nexports.calculateBidAskPrice = calculateBidAskPrice;\n/**\n * Calculates a price given an arbitrary base and quote amount (they must have the same precision)\n *\n * @param baseAssetReserves\n * @param quoteAssetReserves\n * @param pegMultiplier\n * @returns price : Precision PRICE_PRECISION\n */ function calculatePrice(baseAssetReserves, quoteAssetReserves, pegMultiplier) {\n    if (baseAssetReserves.abs().lte(numericConstants_1.ZERO)) {\n        return new anchor_1.BN(0);\n    }\n    return quoteAssetReserves.mul(numericConstants_1.PRICE_PRECISION).mul(pegMultiplier).div(numericConstants_1.PEG_PRECISION).div(baseAssetReserves);\n}\nexports.calculatePrice = calculatePrice;\n/**\n * Calculates what the amm reserves would be after swapping a quote or base asset amount.\n *\n * @param amm\n * @param inputAssetType\n * @param swapAmount\n * @param swapDirection\n * @returns quoteAssetReserve and baseAssetReserve after swap. : Precision AMM_RESERVE_PRECISION\n */ function calculateAmmReservesAfterSwap(amm, inputAssetType, swapAmount, swapDirection) {\n    (0, assert_1.assert)(swapAmount.gte(numericConstants_1.ZERO), \"swapAmount must be greater than 0\");\n    let newQuoteAssetReserve;\n    let newBaseAssetReserve;\n    if (inputAssetType === \"quote\") {\n        swapAmount = swapAmount.mul(numericConstants_1.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO).div(amm.pegMultiplier);\n        [newQuoteAssetReserve, newBaseAssetReserve] = calculateSwapOutput(amm.quoteAssetReserve, swapAmount, swapDirection, amm.sqrtK.mul(amm.sqrtK));\n    } else {\n        [newBaseAssetReserve, newQuoteAssetReserve] = calculateSwapOutput(amm.baseAssetReserve, swapAmount, swapDirection, amm.sqrtK.mul(amm.sqrtK));\n    }\n    return [\n        newQuoteAssetReserve,\n        newBaseAssetReserve\n    ];\n}\nexports.calculateAmmReservesAfterSwap = calculateAmmReservesAfterSwap;\nfunction calculateMarketOpenBidAsk(baseAssetReserve, minBaseAssetReserve, maxBaseAssetReserve, stepSize) {\n    // open orders\n    let openAsks;\n    if (minBaseAssetReserve.lt(baseAssetReserve)) {\n        openAsks = baseAssetReserve.sub(minBaseAssetReserve).mul(new anchor_1.BN(-1));\n        if (stepSize && openAsks.abs().div(numericConstants_1.TWO).lt(stepSize)) {\n            openAsks = numericConstants_1.ZERO;\n        }\n    } else {\n        openAsks = numericConstants_1.ZERO;\n    }\n    let openBids;\n    if (maxBaseAssetReserve.gt(baseAssetReserve)) {\n        openBids = maxBaseAssetReserve.sub(baseAssetReserve);\n        if (stepSize && openBids.div(numericConstants_1.TWO).lt(stepSize)) {\n            openBids = numericConstants_1.ZERO;\n        }\n    } else {\n        openBids = numericConstants_1.ZERO;\n    }\n    return [\n        openBids,\n        openAsks\n    ];\n}\nexports.calculateMarketOpenBidAsk = calculateMarketOpenBidAsk;\nfunction calculateInventoryScale(baseAssetAmountWithAmm, baseAssetReserve, minBaseAssetReserve, maxBaseAssetReserve, directionalSpread, maxSpread) {\n    if (baseAssetAmountWithAmm.eq(numericConstants_1.ZERO)) {\n        return 1;\n    }\n    const MAX_BID_ASK_INVENTORY_SKEW_FACTOR = numericConstants_1.BID_ASK_SPREAD_PRECISION.mul(new anchor_1.BN(10));\n    // inventory skew\n    const [openBids, openAsks] = calculateMarketOpenBidAsk(baseAssetReserve, minBaseAssetReserve, maxBaseAssetReserve);\n    const minSideLiquidity = anchor_1.BN.min(openBids.abs(), openAsks.abs());\n    const inventoryScaleBN = anchor_1.BN.min(baseAssetAmountWithAmm.mul(numericConstants_1.PERCENTAGE_PRECISION).div(anchor_1.BN.max(minSideLiquidity, numericConstants_1.ONE)).abs(), numericConstants_1.PERCENTAGE_PRECISION);\n    const inventoryScaleMaxBN = anchor_1.BN.max(MAX_BID_ASK_INVENTORY_SKEW_FACTOR, new anchor_1.BN(maxSpread).mul(numericConstants_1.BID_ASK_SPREAD_PRECISION).div(new anchor_1.BN(Math.max(directionalSpread, 1))));\n    const inventoryScaleCapped = anchor_1.BN.min(inventoryScaleMaxBN, numericConstants_1.BID_ASK_SPREAD_PRECISION.add(inventoryScaleMaxBN.mul(inventoryScaleBN).div(numericConstants_1.PERCENTAGE_PRECISION))).toNumber() / numericConstants_1.BID_ASK_SPREAD_PRECISION.toNumber();\n    return inventoryScaleCapped;\n}\nexports.calculateInventoryScale = calculateInventoryScale;\nfunction calculateEffectiveLeverage(baseSpread, quoteAssetReserve, terminalQuoteAssetReserve, pegMultiplier, netBaseAssetAmount, reservePrice, totalFeeMinusDistributions) {\n    // vAMM skew\n    const netBaseAssetValue = quoteAssetReserve.sub(terminalQuoteAssetReserve).mul(pegMultiplier).div(numericConstants_1.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO);\n    const localBaseAssetValue = netBaseAssetAmount.mul(reservePrice).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO.mul(numericConstants_1.PRICE_PRECISION));\n    const effectiveGap = Math.max(0, localBaseAssetValue.sub(netBaseAssetValue).toNumber());\n    const effectiveLeverage = effectiveGap / (Math.max(0, totalFeeMinusDistributions.toNumber()) + 1) + 1 / numericConstants_1.QUOTE_PRECISION.toNumber();\n    return effectiveLeverage;\n}\nexports.calculateEffectiveLeverage = calculateEffectiveLeverage;\nfunction calculateMaxSpread(marginRatioInitial) {\n    const maxTargetSpread = new anchor_1.BN(marginRatioInitial).mul(numericConstants_1.BID_ASK_SPREAD_PRECISION.div(numericConstants_1.MARGIN_PRECISION)).toNumber();\n    return maxTargetSpread;\n}\nexports.calculateMaxSpread = calculateMaxSpread;\nfunction calculateVolSpreadBN(lastOracleConfPct, reservePrice, markStd, oracleStd, longIntensity, shortIntensity, volume24H) {\n    const marketAvgStdPct = markStd.add(oracleStd).mul(numericConstants_1.PERCENTAGE_PRECISION).div(reservePrice).div(new anchor_1.BN(2));\n    const volSpread = anchor_1.BN.max(lastOracleConfPct, marketAvgStdPct.div(new anchor_1.BN(2)));\n    const clampMin = numericConstants_1.PERCENTAGE_PRECISION.div(new anchor_1.BN(100));\n    const clampMax = numericConstants_1.PERCENTAGE_PRECISION.mul(new anchor_1.BN(16)).div(new anchor_1.BN(10));\n    const longVolSpreadFactor = (0, __1.clampBN)(longIntensity.mul(numericConstants_1.PERCENTAGE_PRECISION).div(anchor_1.BN.max(numericConstants_1.ONE, volume24H)), clampMin, clampMax);\n    const shortVolSpreadFactor = (0, __1.clampBN)(shortIntensity.mul(numericConstants_1.PERCENTAGE_PRECISION).div(anchor_1.BN.max(numericConstants_1.ONE, volume24H)), clampMin, clampMax);\n    const longVolSpread = anchor_1.BN.max(lastOracleConfPct, volSpread.mul(longVolSpreadFactor).div(numericConstants_1.PERCENTAGE_PRECISION));\n    const shortVolSpread = anchor_1.BN.max(lastOracleConfPct, volSpread.mul(shortVolSpreadFactor).div(numericConstants_1.PERCENTAGE_PRECISION));\n    return [\n        longVolSpread,\n        shortVolSpread\n    ];\n}\nexports.calculateVolSpreadBN = calculateVolSpreadBN;\nfunction calculateSpreadBN(baseSpread, lastOracleReservePriceSpreadPct, lastOracleConfPct, maxSpread, quoteAssetReserve, terminalQuoteAssetReserve, pegMultiplier, baseAssetAmountWithAmm, reservePrice, totalFeeMinusDistributions, netRevenueSinceLastFunding, baseAssetReserve, minBaseAssetReserve, maxBaseAssetReserve, markStd, oracleStd, longIntensity, shortIntensity, volume24H, returnTerms = false) {\n    (0, assert_1.assert)(Number.isInteger(baseSpread));\n    (0, assert_1.assert)(Number.isInteger(maxSpread));\n    const spreadTerms = {\n        longVolSpread: 0,\n        shortVolSpread: 0,\n        longSpreadwPS: 0,\n        shortSpreadwPS: 0,\n        maxTargetSpread: 0,\n        inventorySpreadScale: 0,\n        longSpreadwInvScale: 0,\n        shortSpreadwInvScale: 0,\n        effectiveLeverage: 0,\n        effectiveLeverageCapped: 0,\n        longSpreadwEL: 0,\n        shortSpreadwEL: 0,\n        revenueRetreatAmount: 0,\n        halfRevenueRetreatAmount: 0,\n        longSpreadwRevRetreat: 0,\n        shortSpreadwRevRetreat: 0,\n        totalSpread: 0,\n        longSpread: 0,\n        shortSpread: 0\n    };\n    const [longVolSpread, shortVolSpread] = calculateVolSpreadBN(lastOracleConfPct, reservePrice, markStd, oracleStd, longIntensity, shortIntensity, volume24H);\n    spreadTerms.longVolSpread = longVolSpread.toNumber();\n    spreadTerms.shortVolSpread = shortVolSpread.toNumber();\n    let longSpread = Math.max(baseSpread / 2, longVolSpread.toNumber());\n    let shortSpread = Math.max(baseSpread / 2, shortVolSpread.toNumber());\n    if (lastOracleReservePriceSpreadPct.gt(numericConstants_1.ZERO)) {\n        shortSpread = Math.max(shortSpread, lastOracleReservePriceSpreadPct.abs().toNumber() + shortVolSpread.toNumber());\n    } else if (lastOracleReservePriceSpreadPct.lt(numericConstants_1.ZERO)) {\n        longSpread = Math.max(longSpread, lastOracleReservePriceSpreadPct.abs().toNumber() + longVolSpread.toNumber());\n    }\n    spreadTerms.longSpreadwPS = longSpread;\n    spreadTerms.shortSpreadwPS = shortSpread;\n    const maxTargetSpread = Math.floor(Math.max(maxSpread, lastOracleReservePriceSpreadPct.abs().toNumber()));\n    const inventorySpreadScale = calculateInventoryScale(baseAssetAmountWithAmm, baseAssetReserve, minBaseAssetReserve, maxBaseAssetReserve, baseAssetAmountWithAmm.gt(numericConstants_1.ZERO) ? longSpread : shortSpread, maxTargetSpread);\n    if (baseAssetAmountWithAmm.gt(numericConstants_1.ZERO)) {\n        longSpread *= inventorySpreadScale;\n    } else if (baseAssetAmountWithAmm.lt(numericConstants_1.ZERO)) {\n        shortSpread *= inventorySpreadScale;\n    }\n    spreadTerms.maxTargetSpread = maxTargetSpread;\n    spreadTerms.inventorySpreadScale = inventorySpreadScale;\n    spreadTerms.longSpreadwInvScale = longSpread;\n    spreadTerms.shortSpreadwInvScale = shortSpread;\n    const MAX_SPREAD_SCALE = 10;\n    if (totalFeeMinusDistributions.gt(numericConstants_1.ZERO)) {\n        const effectiveLeverage = calculateEffectiveLeverage(baseSpread, quoteAssetReserve, terminalQuoteAssetReserve, pegMultiplier, baseAssetAmountWithAmm, reservePrice, totalFeeMinusDistributions);\n        spreadTerms.effectiveLeverage = effectiveLeverage;\n        const spreadScale = Math.min(MAX_SPREAD_SCALE, 1 + effectiveLeverage);\n        spreadTerms.effectiveLeverageCapped = spreadScale;\n        if (baseAssetAmountWithAmm.gt(numericConstants_1.ZERO)) {\n            longSpread *= spreadScale;\n            longSpread = Math.floor(longSpread);\n        } else {\n            shortSpread *= spreadScale;\n            shortSpread = Math.floor(shortSpread);\n        }\n    } else {\n        longSpread *= MAX_SPREAD_SCALE;\n        shortSpread *= MAX_SPREAD_SCALE;\n    }\n    spreadTerms.longSpreadwEL = longSpread;\n    spreadTerms.shortSpreadwEL = shortSpread;\n    if (netRevenueSinceLastFunding.lt(numericConstants_1.DEFAULT_REVENUE_SINCE_LAST_FUNDING_SPREAD_RETREAT)) {\n        const maxRetreat = maxTargetSpread / 10;\n        let revenueRetreatAmount = maxRetreat;\n        if (netRevenueSinceLastFunding.gte(numericConstants_1.DEFAULT_REVENUE_SINCE_LAST_FUNDING_SPREAD_RETREAT.mul(new anchor_1.BN(1000)))) {\n            revenueRetreatAmount = Math.min(maxRetreat, Math.floor(baseSpread * netRevenueSinceLastFunding.abs().toNumber() / numericConstants_1.DEFAULT_REVENUE_SINCE_LAST_FUNDING_SPREAD_RETREAT.abs().toNumber()));\n        }\n        const halfRevenueRetreatAmount = Math.floor(revenueRetreatAmount / 2);\n        spreadTerms.revenueRetreatAmount = revenueRetreatAmount;\n        spreadTerms.halfRevenueRetreatAmount = halfRevenueRetreatAmount;\n        if (baseAssetAmountWithAmm.gt(numericConstants_1.ZERO)) {\n            longSpread += revenueRetreatAmount;\n            shortSpread += halfRevenueRetreatAmount;\n        } else if (baseAssetAmountWithAmm.lt(numericConstants_1.ZERO)) {\n            longSpread += halfRevenueRetreatAmount;\n            shortSpread += revenueRetreatAmount;\n        } else {\n            longSpread += halfRevenueRetreatAmount;\n            shortSpread += halfRevenueRetreatAmount;\n        }\n    }\n    spreadTerms.longSpreadwRevRetreat = longSpread;\n    spreadTerms.shortSpreadwRevRetreat = shortSpread;\n    const totalSpread = longSpread + shortSpread;\n    if (totalSpread > maxTargetSpread) {\n        if (longSpread > shortSpread) {\n            longSpread = Math.ceil(longSpread * maxTargetSpread / totalSpread);\n            shortSpread = Math.floor(maxTargetSpread - longSpread);\n        } else {\n            shortSpread = Math.ceil(shortSpread * maxTargetSpread / totalSpread);\n            longSpread = Math.floor(maxTargetSpread - shortSpread);\n        }\n    }\n    spreadTerms.totalSpread = totalSpread;\n    spreadTerms.longSpread = longSpread;\n    spreadTerms.shortSpread = shortSpread;\n    if (returnTerms) {\n        return spreadTerms;\n    }\n    return [\n        longSpread,\n        shortSpread\n    ];\n}\nexports.calculateSpreadBN = calculateSpreadBN;\nfunction calculateSpread(amm, oraclePriceData, now) {\n    if (amm.baseSpread == 0 || amm.curveUpdateIntensity == 0) {\n        return [\n            amm.baseSpread / 2,\n            amm.baseSpread / 2\n        ];\n    }\n    const reservePrice = calculatePrice(amm.baseAssetReserve, amm.quoteAssetReserve, amm.pegMultiplier);\n    const targetPrice = (oraclePriceData === null || oraclePriceData === void 0 ? void 0 : oraclePriceData.price) || reservePrice;\n    const confInterval = oraclePriceData.confidence || numericConstants_1.ZERO;\n    const targetMarkSpreadPct = reservePrice.sub(targetPrice).mul(numericConstants_1.BID_ASK_SPREAD_PRECISION).div(reservePrice);\n    const confIntervalPct = confInterval.mul(numericConstants_1.BID_ASK_SPREAD_PRECISION).div(reservePrice);\n    now = now || new anchor_1.BN(new Date().getTime() / 1000); //todo\n    const liveOracleStd = (0, oracles_1.calculateLiveOracleStd)(amm, oraclePriceData, now);\n    const spreads = calculateSpreadBN(amm.baseSpread, targetMarkSpreadPct, confIntervalPct, amm.maxSpread, amm.quoteAssetReserve, amm.terminalQuoteAssetReserve, amm.pegMultiplier, amm.baseAssetAmountWithAmm, reservePrice, amm.totalFeeMinusDistributions, amm.netRevenueSinceLastFunding, amm.baseAssetReserve, amm.minBaseAssetReserve, amm.maxBaseAssetReserve, amm.markStd, liveOracleStd, amm.longIntensityVolume, amm.shortIntensityVolume, amm.volume24H);\n    const longSpread = spreads[0];\n    const shortSpread = spreads[1];\n    return [\n        longSpread,\n        shortSpread\n    ];\n}\nexports.calculateSpread = calculateSpread;\nfunction calculateSpreadReserves(amm, oraclePriceData, now) {\n    function calculateSpreadReserve(spread, direction, amm) {\n        if (spread === 0) {\n            return {\n                baseAssetReserve: amm.baseAssetReserve,\n                quoteAssetReserve: amm.quoteAssetReserve\n            };\n        }\n        const quoteAssetReserveDelta = amm.quoteAssetReserve.div(numericConstants_1.BID_ASK_SPREAD_PRECISION.div(new anchor_1.BN(spread / 2)));\n        let quoteAssetReserve;\n        if ((0, types_1.isVariant)(direction, \"long\")) {\n            quoteAssetReserve = amm.quoteAssetReserve.add(quoteAssetReserveDelta);\n        } else {\n            quoteAssetReserve = amm.quoteAssetReserve.sub(quoteAssetReserveDelta);\n        }\n        const baseAssetReserve = amm.sqrtK.mul(amm.sqrtK).div(quoteAssetReserve);\n        return {\n            baseAssetReserve,\n            quoteAssetReserve\n        };\n    }\n    const [longSpread, shortSpread] = calculateSpread(amm, oraclePriceData, now);\n    const askReserves = calculateSpreadReserve(longSpread, types_1.PositionDirection.LONG, amm);\n    const bidReserves = calculateSpreadReserve(shortSpread, types_1.PositionDirection.SHORT, amm);\n    return [\n        bidReserves,\n        askReserves\n    ];\n}\nexports.calculateSpreadReserves = calculateSpreadReserves;\n/**\n * Helper function calculating constant product curve output. Agnostic to whether input asset is quote or base\n *\n * @param inputAssetReserve\n * @param swapAmount\n * @param swapDirection\n * @param invariant\n * @returns newInputAssetReserve and newOutputAssetReserve after swap. : Precision AMM_RESERVE_PRECISION\n */ function calculateSwapOutput(inputAssetReserve, swapAmount, swapDirection, invariant) {\n    let newInputAssetReserve;\n    if (swapDirection === types_1.SwapDirection.ADD) {\n        newInputAssetReserve = inputAssetReserve.add(swapAmount);\n    } else {\n        newInputAssetReserve = inputAssetReserve.sub(swapAmount);\n    }\n    const newOutputAssetReserve = invariant.div(newInputAssetReserve);\n    return [\n        newInputAssetReserve,\n        newOutputAssetReserve\n    ];\n}\nexports.calculateSwapOutput = calculateSwapOutput;\n/**\n * Translate long/shorting quote/base asset into amm operation\n *\n * @param inputAssetType\n * @param positionDirection\n */ function getSwapDirection(inputAssetType, positionDirection) {\n    if ((0, types_1.isVariant)(positionDirection, \"long\") && inputAssetType === \"base\") {\n        return types_1.SwapDirection.REMOVE;\n    }\n    if ((0, types_1.isVariant)(positionDirection, \"short\") && inputAssetType === \"quote\") {\n        return types_1.SwapDirection.REMOVE;\n    }\n    return types_1.SwapDirection.ADD;\n}\nexports.getSwapDirection = getSwapDirection;\n/**\n * Helper function calculating terminal price of amm\n *\n * @param market\n * @returns cost : Precision PRICE_PRECISION\n */ function calculateTerminalPrice(market) {\n    const directionToClose = market.amm.baseAssetAmountWithAmm.gt(numericConstants_1.ZERO) ? types_1.PositionDirection.SHORT : types_1.PositionDirection.LONG;\n    const [newQuoteAssetReserve, newBaseAssetReserve] = calculateAmmReservesAfterSwap(market.amm, \"base\", market.amm.baseAssetAmountWithAmm.abs(), getSwapDirection(\"base\", directionToClose));\n    const terminalPrice = newQuoteAssetReserve.mul(numericConstants_1.PRICE_PRECISION).mul(market.amm.pegMultiplier).div(numericConstants_1.PEG_PRECISION).div(newBaseAssetReserve);\n    return terminalPrice;\n}\nexports.calculateTerminalPrice = calculateTerminalPrice;\nfunction calculateMaxBaseAssetAmountToTrade(amm, limit_price, direction, oraclePriceData, now) {\n    const invariant = amm.sqrtK.mul(amm.sqrtK);\n    const newBaseAssetReserveSquared = invariant.mul(numericConstants_1.PRICE_PRECISION).mul(amm.pegMultiplier).div(limit_price).div(numericConstants_1.PEG_PRECISION);\n    const newBaseAssetReserve = (0, __1.squareRootBN)(newBaseAssetReserveSquared);\n    const [shortSpreadReserves, longSpreadReserves] = calculateSpreadReserves(amm, oraclePriceData, now);\n    const baseAssetReserveBefore = (0, types_1.isVariant)(direction, \"long\") ? longSpreadReserves.baseAssetReserve : shortSpreadReserves.baseAssetReserve;\n    if (newBaseAssetReserve.gt(baseAssetReserveBefore)) {\n        return [\n            newBaseAssetReserve.sub(baseAssetReserveBefore),\n            types_1.PositionDirection.SHORT\n        ];\n    } else if (newBaseAssetReserve.lt(baseAssetReserveBefore)) {\n        return [\n            baseAssetReserveBefore.sub(newBaseAssetReserve),\n            types_1.PositionDirection.LONG\n        ];\n    } else {\n        console.log(\"tradeSize Too Small\");\n        return [\n            new anchor_1.BN(0),\n            types_1.PositionDirection.LONG\n        ];\n    }\n}\nexports.calculateMaxBaseAssetAmountToTrade = calculateMaxBaseAssetAmountToTrade;\nfunction calculateQuoteAssetAmountSwapped(quoteAssetReserves, pegMultiplier, swapDirection) {\n    if ((0, types_1.isVariant)(swapDirection, \"remove\")) {\n        quoteAssetReserves = quoteAssetReserves.add(numericConstants_1.ONE);\n    }\n    let quoteAssetAmount = quoteAssetReserves.mul(pegMultiplier).div(numericConstants_1.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO);\n    if ((0, types_1.isVariant)(swapDirection, \"remove\")) {\n        quoteAssetAmount = quoteAssetAmount.add(numericConstants_1.ONE);\n    }\n    return quoteAssetAmount;\n}\nexports.calculateQuoteAssetAmountSwapped = calculateQuoteAssetAmountSwapped;\nfunction calculateMaxBaseAssetAmountFillable(amm, orderDirection) {\n    const maxFillSize = amm.baseAssetReserve.div(new anchor_1.BN(amm.maxFillReserveFraction));\n    let maxBaseAssetAmountOnSide;\n    if ((0, types_1.isVariant)(orderDirection, \"long\")) {\n        maxBaseAssetAmountOnSide = anchor_1.BN.max(numericConstants_1.ZERO, amm.baseAssetReserve.sub(amm.minBaseAssetReserve));\n    } else {\n        maxBaseAssetAmountOnSide = anchor_1.BN.max(numericConstants_1.ZERO, amm.maxBaseAssetReserve.sub(amm.baseAssetReserve));\n    }\n    return (0, __1.standardizeBaseAssetAmount)(anchor_1.BN.min(maxFillSize, maxBaseAssetAmountOnSide), amm.orderStepSize);\n}\nexports.calculateMaxBaseAssetAmountFillable = calculateMaxBaseAssetAmountFillable;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2FtbS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkNBQTJDLEdBQUdBLHdDQUF3QyxHQUFHQSwwQ0FBMEMsR0FBR0EsOEJBQThCLEdBQUdBLHdCQUF3QixHQUFHQSwyQkFBMkIsR0FBR0EsK0JBQStCLEdBQUdBLHVCQUF1QixHQUFHQSx5QkFBeUIsR0FBR0EsNEJBQTRCLEdBQUdBLDBCQUEwQixHQUFHQSxrQ0FBa0MsR0FBR0EsK0JBQStCLEdBQUdBLGlDQUFpQyxHQUFHQSxxQ0FBcUMsR0FBR0Esc0JBQXNCLEdBQUdBLDRCQUE0QixHQUFHQSx5Q0FBeUMsR0FBR0EsMkJBQTJCLEdBQUdBLHVCQUF1QixHQUFHQSxvQ0FBb0MsR0FBR0EsbUNBQW1DLEdBQUcsS0FBSztBQUNydkIsTUFBTXdCLFdBQVdDLG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNQyxxQkFBcUJELG1CQUFPQSxDQUFDLDZHQUErQjtBQUNsRSxNQUFNRSxVQUFVRixtQkFBT0EsQ0FBQyxtRUFBVTtBQUNsQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxtRkFBa0I7QUFDM0MsTUFBTUksTUFBTUosbUJBQU9BLENBQUMsNkRBQUk7QUFDeEIsTUFBTUssVUFBVUwsbUJBQU9BLENBQUMsdUVBQVM7QUFDakMsTUFBTU0sWUFBWU4sbUJBQU9BLENBQUMsMkVBQVc7QUFDckMsU0FBU0YsNEJBQTRCUyxXQUFXLEVBQUVDLGdCQUFnQixFQUFFQyxpQkFBaUI7SUFDakYsT0FBT1YsU0FBU1csRUFBRSxDQUFDQyxHQUFHLENBQUNKLFlBQ2xCSyxHQUFHLENBQUNKLGtCQUNKSyxHQUFHLENBQUNKLG1CQUNKSyxHQUFHLENBQUNiLG1CQUFtQmMsYUFBYSxDQUFDRixHQUFHLENBQUMsSUFBSWQsU0FBU1csRUFBRSxDQUFDLEtBQ3pERyxHQUFHLENBQUNa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QW1CLENBQUM1RCxHQUFHLENBQUNiLElBQUlULGdCQUFnQjtJQUN4SDtJQUNBLE9BQU8sQ0FBQyxHQUFHSixJQUFJZ00sMEJBQTBCLEVBQUVyTSxTQUFTVyxFQUFFLENBQUN5RixHQUFHLENBQUM4RixhQUFhRSwyQkFBMkJsTCxJQUFJb0wsYUFBYTtBQUN4SDtBQUNBOU4sMkNBQTJDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvYW1tLmpzPzAzOWEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNhbGN1bGF0ZU1heEJhc2VBc3NldEFtb3VudEZpbGxhYmxlID0gZXhwb3J0cy5jYWxjdWxhdGVRdW90ZUFzc2V0QW1vdW50U3dhcHBlZCA9IGV4cG9ydHMuY2FsY3VsYXRlTWF4QmFzZUFzc2V0QW1vdW50VG9UcmFkZSA9IGV4cG9ydHMuY2FsY3VsYXRlVGVybWluYWxQcmljZSA9IGV4cG9ydHMuZ2V0U3dhcERpcmVjdGlvbiA9IGV4cG9ydHMuY2FsY3VsYXRlU3dhcE91dHB1dCA9IGV4cG9ydHMuY2FsY3VsYXRlU3ByZWFkUmVzZXJ2ZXMgPSBleHBvcnRzLmNhbGN1bGF0ZVNwcmVhZCA9IGV4cG9ydHMuY2FsY3VsYXRlU3ByZWFkQk4gPSBleHBvcnRzLmNhbGN1bGF0ZVZvbFNwcmVhZEJOID0gZXhwb3J0cy5jYWxjdWxhdGVNYXhTcHJlYWQgPSBleHBvcnRzLmNhbGN1bGF0ZUVmZmVjdGl2ZUxldmVyYWdlID0gZXhwb3J0cy5jYWxjdWxhdGVJbnZlbnRvcnlTY2FsZSA9IGV4cG9ydHMuY2FsY3VsYXRlTWFya2V0T3BlbkJpZEFzayA9IGV4cG9ydHMuY2FsY3VsYXRlQW1tUmVzZXJ2ZXNBZnRlclN3YXAgPSBleHBvcnRzLmNhbGN1bGF0ZVByaWNlID0gZXhwb3J0cy5jYWxjdWxhdGVCaWRBc2tQcmljZSA9IGV4cG9ydHMuY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzID0gZXhwb3J0cy5jYWxjdWxhdGVVcGRhdGVkQU1NID0gZXhwb3J0cy5jYWxjdWxhdGVOZXdBbW0gPSBleHBvcnRzLmNhbGN1bGF0ZU9wdGltYWxQZWdBbmRCdWRnZXQgPSBleHBvcnRzLmNhbGN1bGF0ZVBlZ0Zyb21UYXJnZXRQcmljZSA9IHZvaWQgMDtcbmNvbnN0IGFuY2hvcl8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yXCIpO1xuY29uc3QgbnVtZXJpY0NvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50cy9udW1lcmljQ29uc3RhbnRzXCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IGFzc2VydF8xID0gcmVxdWlyZShcIi4uL2Fzc2VydC9hc3NlcnRcIik7XG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi5cIik7XG5jb25zdCByZXBlZ18xID0gcmVxdWlyZShcIi4vcmVwZWdcIik7XG5jb25zdCBvcmFjbGVzXzEgPSByZXF1aXJlKFwiLi9vcmFjbGVzXCIpO1xuZnVuY3Rpb24gY2FsY3VsYXRlUGVnRnJvbVRhcmdldFByaWNlKHRhcmdldFByaWNlLCBiYXNlQXNzZXRSZXNlcnZlLCBxdW90ZUFzc2V0UmVzZXJ2ZSkge1xuICAgIHJldHVybiBhbmNob3JfMS5CTi5tYXgodGFyZ2V0UHJpY2VcbiAgICAgICAgLm11bChiYXNlQXNzZXRSZXNlcnZlKVxuICAgICAgICAuZGl2KHF1b3RlQXNzZXRSZXNlcnZlKVxuICAgICAgICAuYWRkKG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9ESVZfUEVHLmRpdihuZXcgYW5jaG9yXzEuQk4oMikpKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9ESVZfUEVHKSwgbnVtZXJpY0NvbnN0YW50c18xLk9ORSk7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVBlZ0Zyb21UYXJnZXRQcmljZSA9IGNhbGN1bGF0ZVBlZ0Zyb21UYXJnZXRQcmljZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZU9wdGltYWxQZWdBbmRCdWRnZXQoYW1tLCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBjb25zdCByZXNlcnZlUHJpY2VCZWZvcmUgPSBjYWxjdWxhdGVQcmljZShhbW0uYmFzZUFzc2V0UmVzZXJ2ZSwgYW1tLnF1b3RlQXNzZXRSZXNlcnZlLCBhbW0ucGVnTXVsdGlwbGllcik7XG4gICAgY29uc3QgdGFyZ2V0UHJpY2UgPSBvcmFjbGVQcmljZURhdGEucHJpY2U7XG4gICAgY29uc3QgbmV3UGVnID0gY2FsY3VsYXRlUGVnRnJvbVRhcmdldFByaWNlKHRhcmdldFByaWNlLCBhbW0uYmFzZUFzc2V0UmVzZXJ2ZSwgYW1tLnF1b3RlQXNzZXRSZXNlcnZlKTtcbiAgICBjb25zdCBwcmVQZWdDb3N0ID0gKDAsIHJlcGVnXzEuY2FsY3VsYXRlUmVwZWdDb3N0KShhbW0sIG5ld1BlZyk7XG4gICAgY29uc3QgdG90YWxGZWVMQiA9IGFtbS50b3RhbEV4Y2hhbmdlRmVlLmRpdihuZXcgYW5jaG9yXzEuQk4oMikpO1xuICAgIGNvbnN0IGJ1ZGdldCA9IGFuY2hvcl8xLkJOLm1heChudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgYW1tLnRvdGFsRmVlTWludXNEaXN0cmlidXRpb25zLnN1Yih0b3RhbEZlZUxCKSk7XG4gICAgbGV0IGNoZWNrTG93ZXJCb3VuZCA9IHRydWU7XG4gICAgaWYgKGJ1ZGdldC5sdChwcmVQZWdDb3N0KSkge1xuICAgICAgICBjb25zdCBoYWxmTWF4UHJpY2VTcHJlYWQgPSBuZXcgYW5jaG9yXzEuQk4oYW1tLm1heFNwcmVhZClcbiAgICAgICAgICAgIC5kaXYobmV3IGFuY2hvcl8xLkJOKDIpKVxuICAgICAgICAgICAgLm11bCh0YXJnZXRQcmljZSlcbiAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTik7XG4gICAgICAgIGxldCBuZXdUYXJnZXRQcmljZTtcbiAgICAgICAgbGV0IG5ld09wdGltYWxQZWc7XG4gICAgICAgIGxldCBuZXdCdWRnZXQ7XG4gICAgICAgIGNvbnN0IHRhcmdldFByaWNlR2FwID0gcmVzZXJ2ZVByaWNlQmVmb3JlLnN1Yih0YXJnZXRQcmljZSk7XG4gICAgICAgIGlmICh0YXJnZXRQcmljZUdhcC5hYnMoKS5ndChoYWxmTWF4UHJpY2VTcHJlYWQpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXJrQWRqID0gdGFyZ2V0UHJpY2VHYXAuYWJzKCkuc3ViKGhhbGZNYXhQcmljZVNwcmVhZCk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0UHJpY2VHYXAubHQobmV3IGFuY2hvcl8xLkJOKDApKSkge1xuICAgICAgICAgICAgICAgIG5ld1RhcmdldFByaWNlID0gcmVzZXJ2ZVByaWNlQmVmb3JlLmFkZChtYXJrQWRqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1RhcmdldFByaWNlID0gcmVzZXJ2ZVByaWNlQmVmb3JlLnN1YihtYXJrQWRqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld09wdGltYWxQZWcgPSBjYWxjdWxhdGVQZWdGcm9tVGFyZ2V0UHJpY2UobmV3VGFyZ2V0UHJpY2UsIGFtbS5iYXNlQXNzZXRSZXNlcnZlLCBhbW0ucXVvdGVBc3NldFJlc2VydmUpO1xuICAgICAgICAgICAgbmV3QnVkZ2V0ID0gKDAsIHJlcGVnXzEuY2FsY3VsYXRlUmVwZWdDb3N0KShhbW0sIG5ld09wdGltYWxQZWcpO1xuICAgICAgICAgICAgY2hlY2tMb3dlckJvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gW25ld1RhcmdldFByaWNlLCBuZXdPcHRpbWFsUGVnLCBuZXdCdWRnZXQsIGZhbHNlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhbW0udG90YWxGZWVNaW51c0Rpc3RyaWJ1dGlvbnMubHQoYW1tLnRvdGFsRXhjaGFuZ2VGZWUuZGl2KG5ldyBhbmNob3JfMS5CTigyKSkpKSB7XG4gICAgICAgICAgICBjaGVja0xvd2VyQm91bmQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW3RhcmdldFByaWNlLCBuZXdQZWcsIGJ1ZGdldCwgY2hlY2tMb3dlckJvdW5kXTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlT3B0aW1hbFBlZ0FuZEJ1ZGdldCA9IGNhbGN1bGF0ZU9wdGltYWxQZWdBbmRCdWRnZXQ7XG5mdW5jdGlvbiBjYWxjdWxhdGVOZXdBbW0oYW1tLCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBsZXQgcEtOdW1lciA9IG5ldyBhbmNob3JfMS5CTigxKTtcbiAgICBsZXQgcEtEZW5vbSA9IG5ldyBhbmNob3JfMS5CTigxKTtcbiAgICBjb25zdCBbdGFyZ2V0UHJpY2UsIF9uZXdQZWcsIGJ1ZGdldCwgX2NoZWNrTG93ZXJCb3VuZF0gPSBjYWxjdWxhdGVPcHRpbWFsUGVnQW5kQnVkZ2V0KGFtbSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBsZXQgcHJlUGVnQ29zdCA9ICgwLCByZXBlZ18xLmNhbGN1bGF0ZVJlcGVnQ29zdCkoYW1tLCBfbmV3UGVnKTtcbiAgICBsZXQgbmV3UGVnID0gX25ld1BlZztcbiAgICBpZiAocHJlUGVnQ29zdC5ndGUoYnVkZ2V0KSAmJiBwcmVQZWdDb3N0Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBbcEtOdW1lciwgcEtEZW5vbV0gPSBbbmV3IGFuY2hvcl8xLkJOKDk5OSksIG5ldyBhbmNob3JfMS5CTigxMDAwKV07XG4gICAgICAgIGNvbnN0IGRlZmljaXRNYWRldXAgPSAoMCwgcmVwZWdfMS5jYWxjdWxhdGVBZGp1c3RLQ29zdCkoYW1tLCBwS051bWVyLCBwS0Rlbm9tKTtcbiAgICAgICAgKDAsIGFzc2VydF8xLmFzc2VydCkoZGVmaWNpdE1hZGV1cC5sdGUobmV3IGFuY2hvcl8xLkJOKDApKSk7XG4gICAgICAgIHByZVBlZ0Nvc3QgPSBidWRnZXQuYWRkKGRlZmljaXRNYWRldXAuYWJzKCkpO1xuICAgICAgICBjb25zdCBuZXdBbW0gPSBPYmplY3QuYXNzaWduKHt9LCBhbW0pO1xuICAgICAgICBuZXdBbW0uYmFzZUFzc2V0UmVzZXJ2ZSA9IG5ld0FtbS5iYXNlQXNzZXRSZXNlcnZlLm11bChwS051bWVyKS5kaXYocEtEZW5vbSk7XG4gICAgICAgIG5ld0FtbS5zcXJ0SyA9IG5ld0FtbS5zcXJ0Sy5tdWwocEtOdW1lcikuZGl2KHBLRGVub20pO1xuICAgICAgICBjb25zdCBpbnZhcmlhbnQgPSBuZXdBbW0uc3FydEsubXVsKG5ld0FtbS5zcXJ0Syk7XG4gICAgICAgIG5ld0FtbS5xdW90ZUFzc2V0UmVzZXJ2ZSA9IGludmFyaWFudC5kaXYobmV3QW1tLmJhc2VBc3NldFJlc2VydmUpO1xuICAgICAgICBjb25zdCBkaXJlY3Rpb25Ub0Nsb3NlID0gYW1tLmJhc2VBc3NldEFtb3VudFdpdGhBbW0uZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pXG4gICAgICAgICAgICA/IHR5cGVzXzEuUG9zaXRpb25EaXJlY3Rpb24uU0hPUlRcbiAgICAgICAgICAgIDogdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HO1xuICAgICAgICBjb25zdCBbbmV3UXVvdGVBc3NldFJlc2VydmUsIF9uZXdCYXNlQXNzZXRSZXNlcnZlXSA9IGNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwKG5ld0FtbSwgJ2Jhc2UnLCBhbW0uYmFzZUFzc2V0QW1vdW50V2l0aEFtbS5hYnMoKSwgZ2V0U3dhcERpcmVjdGlvbignYmFzZScsIGRpcmVjdGlvblRvQ2xvc2UpKTtcbiAgICAgICAgbmV3QW1tLnRlcm1pbmFsUXVvdGVBc3NldFJlc2VydmUgPSBuZXdRdW90ZUFzc2V0UmVzZXJ2ZTtcbiAgICAgICAgbmV3UGVnID0gKDAsIHJlcGVnXzEuY2FsY3VsYXRlQnVkZ2V0ZWRQZWcpKG5ld0FtbSwgcHJlUGVnQ29zdCwgdGFyZ2V0UHJpY2UpO1xuICAgICAgICBwcmVQZWdDb3N0ID0gKDAsIHJlcGVnXzEuY2FsY3VsYXRlUmVwZWdDb3N0KShuZXdBbW0sIG5ld1BlZyk7XG4gICAgfVxuICAgIHJldHVybiBbcHJlUGVnQ29zdCwgcEtOdW1lciwgcEtEZW5vbSwgbmV3UGVnXTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlTmV3QW1tID0gY2FsY3VsYXRlTmV3QW1tO1xuZnVuY3Rpb24gY2FsY3VsYXRlVXBkYXRlZEFNTShhbW0sIG9yYWNsZVByaWNlRGF0YSkge1xuICAgIGlmIChhbW0uY3VydmVVcGRhdGVJbnRlbnNpdHkgPT0gMCB8fCBvcmFjbGVQcmljZURhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gYW1tO1xuICAgIH1cbiAgICBjb25zdCBuZXdBbW0gPSBPYmplY3QuYXNzaWduKHt9LCBhbW0pO1xuICAgIGNvbnN0IFtwcmVwZWdDb3N0LCBwS051bWVyLCBwS0Rlbm9tLCBuZXdQZWddID0gY2FsY3VsYXRlTmV3QW1tKGFtbSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBuZXdBbW0uYmFzZUFzc2V0UmVzZXJ2ZSA9IG5ld0FtbS5iYXNlQXNzZXRSZXNlcnZlLm11bChwS051bWVyKS5kaXYocEtEZW5vbSk7XG4gICAgbmV3QW1tLnNxcnRLID0gbmV3QW1tLnNxcnRLLm11bChwS051bWVyKS5kaXYocEtEZW5vbSk7XG4gICAgY29uc3QgaW52YXJpYW50ID0gbmV3QW1tLnNxcnRLLm11bChuZXdBbW0uc3FydEspO1xuICAgIG5ld0FtbS5xdW90ZUFzc2V0UmVzZXJ2ZSA9IGludmFyaWFudC5kaXYobmV3QW1tLmJhc2VBc3NldFJlc2VydmUpO1xuICAgIG5ld0FtbS5wZWdNdWx0aXBsaWVyID0gbmV3UGVnO1xuICAgIGNvbnN0IGRpcmVjdGlvblRvQ2xvc2UgPSBhbW0uYmFzZUFzc2V0QW1vdW50V2l0aEFtbS5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTylcbiAgICAgICAgPyB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JUXG4gICAgICAgIDogdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HO1xuICAgIGNvbnN0IFtuZXdRdW90ZUFzc2V0UmVzZXJ2ZSwgX25ld0Jhc2VBc3NldFJlc2VydmVdID0gY2FsY3VsYXRlQW1tUmVzZXJ2ZXNBZnRlclN3YXAobmV3QW1tLCAnYmFzZScsIGFtbS5iYXNlQXNzZXRBbW91bnRXaXRoQW1tLmFicygpLCBnZXRTd2FwRGlyZWN0aW9uKCdiYXNlJywgZGlyZWN0aW9uVG9DbG9zZSkpO1xuICAgIG5ld0FtbS50ZXJtaW5hbFF1b3RlQXNzZXRSZXNlcnZlID0gbmV3UXVvdGVBc3NldFJlc2VydmU7XG4gICAgbmV3QW1tLnRvdGFsRmVlTWludXNEaXN0cmlidXRpb25zID1cbiAgICAgICAgbmV3QW1tLnRvdGFsRmVlTWludXNEaXN0cmlidXRpb25zLnN1YihwcmVwZWdDb3N0KTtcbiAgICBuZXdBbW0ubmV0UmV2ZW51ZVNpbmNlTGFzdEZ1bmRpbmcgPVxuICAgICAgICBuZXdBbW0ubmV0UmV2ZW51ZVNpbmNlTGFzdEZ1bmRpbmcuc3ViKHByZXBlZ0Nvc3QpO1xuICAgIHJldHVybiBuZXdBbW07XG59XG5leHBvcnRzLmNhbGN1bGF0ZVVwZGF0ZWRBTU0gPSBjYWxjdWxhdGVVcGRhdGVkQU1NO1xuZnVuY3Rpb24gY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzKGFtbSwgZGlyZWN0aW9uLCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBjb25zdCBuZXdBbW0gPSBjYWxjdWxhdGVVcGRhdGVkQU1NKGFtbSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBbc2hvcnRSZXNlcnZlcywgbG9uZ1Jlc2VydmVzXSA9IGNhbGN1bGF0ZVNwcmVhZFJlc2VydmVzKG5ld0FtbSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBkaXJSZXNlcnZlcyA9ICgwLCB0eXBlc18xLmlzVmFyaWFudCkoZGlyZWN0aW9uLCAnbG9uZycpXG4gICAgICAgID8gbG9uZ1Jlc2VydmVzXG4gICAgICAgIDogc2hvcnRSZXNlcnZlcztcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIGJhc2VBc3NldFJlc2VydmU6IGRpclJlc2VydmVzLmJhc2VBc3NldFJlc2VydmUsXG4gICAgICAgIHF1b3RlQXNzZXRSZXNlcnZlOiBkaXJSZXNlcnZlcy5xdW90ZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgc3FydEs6IG5ld0FtbS5zcXJ0SyxcbiAgICAgICAgbmV3UGVnOiBuZXdBbW0ucGVnTXVsdGlwbGllcixcbiAgICB9O1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVVwZGF0ZWRBTU1TcHJlYWRSZXNlcnZlcyA9IGNhbGN1bGF0ZVVwZGF0ZWRBTU1TcHJlYWRSZXNlcnZlcztcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJpZEFza1ByaWNlKGFtbSwgb3JhY2xlUHJpY2VEYXRhLCB3aXRoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBuZXdBbW07XG4gICAgaWYgKHdpdGhVcGRhdGUpIHtcbiAgICAgICAgbmV3QW1tID0gY2FsY3VsYXRlVXBkYXRlZEFNTShhbW0sIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuZXdBbW0gPSBhbW07XG4gICAgfVxuICAgIGNvbnN0IFtiaWRSZXNlcnZlcywgYXNrUmVzZXJ2ZXNdID0gY2FsY3VsYXRlU3ByZWFkUmVzZXJ2ZXMobmV3QW1tLCBvcmFjbGVQcmljZURhdGEpO1xuICAgIGNvbnN0IGFza1ByaWNlID0gY2FsY3VsYXRlUHJpY2UoYXNrUmVzZXJ2ZXMuYmFzZUFzc2V0UmVzZXJ2ZSwgYXNrUmVzZXJ2ZXMucXVvdGVBc3NldFJlc2VydmUsIG5ld0FtbS5wZWdNdWx0aXBsaWVyKTtcbiAgICBjb25zdCBiaWRQcmljZSA9IGNhbGN1bGF0ZVByaWNlKGJpZFJlc2VydmVzLmJhc2VBc3NldFJlc2VydmUsIGJpZFJlc2VydmVzLnF1b3RlQXNzZXRSZXNlcnZlLCBuZXdBbW0ucGVnTXVsdGlwbGllcik7XG4gICAgcmV0dXJuIFtiaWRQcmljZSwgYXNrUHJpY2VdO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVCaWRBc2tQcmljZSA9IGNhbGN1bGF0ZUJpZEFza1ByaWNlO1xuLyoqXG4gKiBDYWxjdWxhdGVzIGEgcHJpY2UgZ2l2ZW4gYW4gYXJiaXRyYXJ5IGJhc2UgYW5kIHF1b3RlIGFtb3VudCAodGhleSBtdXN0IGhhdmUgdGhlIHNhbWUgcHJlY2lzaW9uKVxuICpcbiAqIEBwYXJhbSBiYXNlQXNzZXRSZXNlcnZlc1xuICogQHBhcmFtIHF1b3RlQXNzZXRSZXNlcnZlc1xuICogQHBhcmFtIHBlZ011bHRpcGxpZXJcbiAqIEByZXR1cm5zIHByaWNlIDogUHJlY2lzaW9uIFBSSUNFX1BSRUNJU0lPTlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVQcmljZShiYXNlQXNzZXRSZXNlcnZlcywgcXVvdGVBc3NldFJlc2VydmVzLCBwZWdNdWx0aXBsaWVyKSB7XG4gICAgaWYgKGJhc2VBc3NldFJlc2VydmVzLmFicygpLmx0ZShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbmNob3JfMS5CTigwKTtcbiAgICB9XG4gICAgcmV0dXJuIHF1b3RlQXNzZXRSZXNlcnZlc1xuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pXG4gICAgICAgIC5tdWwocGVnTXVsdGlwbGllcilcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUEVHX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihiYXNlQXNzZXRSZXNlcnZlcyk7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVByaWNlID0gY2FsY3VsYXRlUHJpY2U7XG4vKipcbiAqIENhbGN1bGF0ZXMgd2hhdCB0aGUgYW1tIHJlc2VydmVzIHdvdWxkIGJlIGFmdGVyIHN3YXBwaW5nIGEgcXVvdGUgb3IgYmFzZSBhc3NldCBhbW91bnQuXG4gKlxuICogQHBhcmFtIGFtbVxuICogQHBhcmFtIGlucHV0QXNzZXRUeXBlXG4gKiBAcGFyYW0gc3dhcEFtb3VudFxuICogQHBhcmFtIHN3YXBEaXJlY3Rpb25cbiAqIEByZXR1cm5zIHF1b3RlQXNzZXRSZXNlcnZlIGFuZCBiYXNlQXNzZXRSZXNlcnZlIGFmdGVyIHN3YXAuIDogUHJlY2lzaW9uIEFNTV9SRVNFUlZFX1BSRUNJU0lPTlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVBbW1SZXNlcnZlc0FmdGVyU3dhcChhbW0sIGlucHV0QXNzZXRUeXBlLCBzd2FwQW1vdW50LCBzd2FwRGlyZWN0aW9uKSB7XG4gICAgKDAsIGFzc2VydF8xLmFzc2VydCkoc3dhcEFtb3VudC5ndGUobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pLCAnc3dhcEFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7XG4gICAgbGV0IG5ld1F1b3RlQXNzZXRSZXNlcnZlO1xuICAgIGxldCBuZXdCYXNlQXNzZXRSZXNlcnZlO1xuICAgIGlmIChpbnB1dEFzc2V0VHlwZSA9PT0gJ3F1b3RlJykge1xuICAgICAgICBzd2FwQW1vdW50ID0gc3dhcEFtb3VudFxuICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RJTUVTX1BFR19UT19RVU9URV9QUkVDSVNJT05fUkFUSU8pXG4gICAgICAgICAgICAuZGl2KGFtbS5wZWdNdWx0aXBsaWVyKTtcbiAgICAgICAgW25ld1F1b3RlQXNzZXRSZXNlcnZlLCBuZXdCYXNlQXNzZXRSZXNlcnZlXSA9IGNhbGN1bGF0ZVN3YXBPdXRwdXQoYW1tLnF1b3RlQXNzZXRSZXNlcnZlLCBzd2FwQW1vdW50LCBzd2FwRGlyZWN0aW9uLCBhbW0uc3FydEsubXVsKGFtbS5zcXJ0SykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgW25ld0Jhc2VBc3NldFJlc2VydmUsIG5ld1F1b3RlQXNzZXRSZXNlcnZlXSA9IGNhbGN1bGF0ZVN3YXBPdXRwdXQoYW1tLmJhc2VBc3NldFJlc2VydmUsIHN3YXBBbW91bnQsIHN3YXBEaXJlY3Rpb24sIGFtbS5zcXJ0Sy5tdWwoYW1tLnNxcnRLKSk7XG4gICAgfVxuICAgIHJldHVybiBbbmV3UXVvdGVBc3NldFJlc2VydmUsIG5ld0Jhc2VBc3NldFJlc2VydmVdO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVBbW1SZXNlcnZlc0FmdGVyU3dhcCA9IGNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwO1xuZnVuY3Rpb24gY2FsY3VsYXRlTWFya2V0T3BlbkJpZEFzayhiYXNlQXNzZXRSZXNlcnZlLCBtaW5CYXNlQXNzZXRSZXNlcnZlLCBtYXhCYXNlQXNzZXRSZXNlcnZlLCBzdGVwU2l6ZSkge1xuICAgIC8vIG9wZW4gb3JkZXJzXG4gICAgbGV0IG9wZW5Bc2tzO1xuICAgIGlmIChtaW5CYXNlQXNzZXRSZXNlcnZlLmx0KGJhc2VBc3NldFJlc2VydmUpKSB7XG4gICAgICAgIG9wZW5Bc2tzID0gYmFzZUFzc2V0UmVzZXJ2ZS5zdWIobWluQmFzZUFzc2V0UmVzZXJ2ZSkubXVsKG5ldyBhbmNob3JfMS5CTigtMSkpO1xuICAgICAgICBpZiAoc3RlcFNpemUgJiYgb3BlbkFza3MuYWJzKCkuZGl2KG51bWVyaWNDb25zdGFudHNfMS5UV08pLmx0KHN0ZXBTaXplKSkge1xuICAgICAgICAgICAgb3BlbkFza3MgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb3BlbkFza3MgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICB9XG4gICAgbGV0IG9wZW5CaWRzO1xuICAgIGlmIChtYXhCYXNlQXNzZXRSZXNlcnZlLmd0KGJhc2VBc3NldFJlc2VydmUpKSB7XG4gICAgICAgIG9wZW5CaWRzID0gbWF4QmFzZUFzc2V0UmVzZXJ2ZS5zdWIoYmFzZUFzc2V0UmVzZXJ2ZSk7XG4gICAgICAgIGlmIChzdGVwU2l6ZSAmJiBvcGVuQmlkcy5kaXYobnVtZXJpY0NvbnN0YW50c18xLlRXTykubHQoc3RlcFNpemUpKSB7XG4gICAgICAgICAgICBvcGVuQmlkcyA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvcGVuQmlkcyA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIH1cbiAgICByZXR1cm4gW29wZW5CaWRzLCBvcGVuQXNrc107XG59XG5leHBvcnRzLmNhbGN1bGF0ZU1hcmtldE9wZW5CaWRBc2sgPSBjYWxjdWxhdGVNYXJrZXRPcGVuQmlkQXNrO1xuZnVuY3Rpb24gY2FsY3VsYXRlSW52ZW50b3J5U2NhbGUoYmFzZUFzc2V0QW1vdW50V2l0aEFtbSwgYmFzZUFzc2V0UmVzZXJ2ZSwgbWluQmFzZUFzc2V0UmVzZXJ2ZSwgbWF4QmFzZUFzc2V0UmVzZXJ2ZSwgZGlyZWN0aW9uYWxTcHJlYWQsIG1heFNwcmVhZCkge1xuICAgIGlmIChiYXNlQXNzZXRBbW91bnRXaXRoQW1tLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgY29uc3QgTUFYX0JJRF9BU0tfSU5WRU5UT1JZX1NLRVdfRkFDVE9SID0gbnVtZXJpY0NvbnN0YW50c18xLkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTi5tdWwobmV3IGFuY2hvcl8xLkJOKDEwKSk7XG4gICAgLy8gaW52ZW50b3J5IHNrZXdcbiAgICBjb25zdCBbb3BlbkJpZHMsIG9wZW5Bc2tzXSA9IGNhbGN1bGF0ZU1hcmtldE9wZW5CaWRBc2soYmFzZUFzc2V0UmVzZXJ2ZSwgbWluQmFzZUFzc2V0UmVzZXJ2ZSwgbWF4QmFzZUFzc2V0UmVzZXJ2ZSk7XG4gICAgY29uc3QgbWluU2lkZUxpcXVpZGl0eSA9IGFuY2hvcl8xLkJOLm1pbihvcGVuQmlkcy5hYnMoKSwgb3BlbkFza3MuYWJzKCkpO1xuICAgIGNvbnN0IGludmVudG9yeVNjYWxlQk4gPSBhbmNob3JfMS5CTi5taW4oYmFzZUFzc2V0QW1vdW50V2l0aEFtbVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5QRVJDRU5UQUdFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihhbmNob3JfMS5CTi5tYXgobWluU2lkZUxpcXVpZGl0eSwgbnVtZXJpY0NvbnN0YW50c18xLk9ORSkpXG4gICAgICAgIC5hYnMoKSwgbnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKTtcbiAgICBjb25zdCBpbnZlbnRvcnlTY2FsZU1heEJOID0gYW5jaG9yXzEuQk4ubWF4KE1BWF9CSURfQVNLX0lOVkVOVE9SWV9TS0VXX0ZBQ1RPUiwgbmV3IGFuY2hvcl8xLkJOKG1heFNwcmVhZClcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuQklEX0FTS19TUFJFQURfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KG5ldyBhbmNob3JfMS5CTihNYXRoLm1heChkaXJlY3Rpb25hbFNwcmVhZCwgMSkpKSk7XG4gICAgY29uc3QgaW52ZW50b3J5U2NhbGVDYXBwZWQgPSBhbmNob3JfMS5CTi5taW4oaW52ZW50b3J5U2NhbGVNYXhCTiwgbnVtZXJpY0NvbnN0YW50c18xLkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTi5hZGQoaW52ZW50b3J5U2NhbGVNYXhCTi5tdWwoaW52ZW50b3J5U2NhbGVCTikuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QRVJDRU5UQUdFX1BSRUNJU0lPTikpKS50b051bWJlcigpIC8gbnVtZXJpY0NvbnN0YW50c18xLkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTi50b051bWJlcigpO1xuICAgIHJldHVybiBpbnZlbnRvcnlTY2FsZUNhcHBlZDtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlSW52ZW50b3J5U2NhbGUgPSBjYWxjdWxhdGVJbnZlbnRvcnlTY2FsZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUVmZmVjdGl2ZUxldmVyYWdlKGJhc2VTcHJlYWQsIHF1b3RlQXNzZXRSZXNlcnZlLCB0ZXJtaW5hbFF1b3RlQXNzZXRSZXNlcnZlLCBwZWdNdWx0aXBsaWVyLCBuZXRCYXNlQXNzZXRBbW91bnQsIHJlc2VydmVQcmljZSwgdG90YWxGZWVNaW51c0Rpc3RyaWJ1dGlvbnMpIHtcbiAgICAvLyB2QU1NIHNrZXdcbiAgICBjb25zdCBuZXRCYXNlQXNzZXRWYWx1ZSA9IHF1b3RlQXNzZXRSZXNlcnZlXG4gICAgICAgIC5zdWIodGVybWluYWxRdW90ZUFzc2V0UmVzZXJ2ZSlcbiAgICAgICAgLm11bChwZWdNdWx0aXBsaWVyKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fVElNRVNfUEVHX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyk7XG4gICAgY29uc3QgbG9jYWxCYXNlQXNzZXRWYWx1ZSA9IG5ldEJhc2VBc3NldEFtb3VudFxuICAgICAgICAubXVsKHJlc2VydmVQcmljZSlcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTy5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTikpO1xuICAgIGNvbnN0IGVmZmVjdGl2ZUdhcCA9IE1hdGgubWF4KDAsIGxvY2FsQmFzZUFzc2V0VmFsdWUuc3ViKG5ldEJhc2VBc3NldFZhbHVlKS50b051bWJlcigpKTtcbiAgICBjb25zdCBlZmZlY3RpdmVMZXZlcmFnZSA9IGVmZmVjdGl2ZUdhcCAvIChNYXRoLm1heCgwLCB0b3RhbEZlZU1pbnVzRGlzdHJpYnV0aW9ucy50b051bWJlcigpKSArIDEpICtcbiAgICAgICAgMSAvIG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT04udG9OdW1iZXIoKTtcbiAgICByZXR1cm4gZWZmZWN0aXZlTGV2ZXJhZ2U7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUVmZmVjdGl2ZUxldmVyYWdlID0gY2FsY3VsYXRlRWZmZWN0aXZlTGV2ZXJhZ2U7XG5mdW5jdGlvbiBjYWxjdWxhdGVNYXhTcHJlYWQobWFyZ2luUmF0aW9Jbml0aWFsKSB7XG4gICAgY29uc3QgbWF4VGFyZ2V0U3ByZWFkID0gbmV3IGFuY2hvcl8xLkJOKG1hcmdpblJhdGlvSW5pdGlhbClcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuQklEX0FTS19TUFJFQURfUFJFQ0lTSU9OLmRpdihudW1lcmljQ29uc3RhbnRzXzEuTUFSR0lOX1BSRUNJU0lPTikpXG4gICAgICAgIC50b051bWJlcigpO1xuICAgIHJldHVybiBtYXhUYXJnZXRTcHJlYWQ7XG59XG5leHBvcnRzLmNhbGN1bGF0ZU1heFNwcmVhZCA9IGNhbGN1bGF0ZU1heFNwcmVhZDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZVZvbFNwcmVhZEJOKGxhc3RPcmFjbGVDb25mUGN0LCByZXNlcnZlUHJpY2UsIG1hcmtTdGQsIG9yYWNsZVN0ZCwgbG9uZ0ludGVuc2l0eSwgc2hvcnRJbnRlbnNpdHksIHZvbHVtZTI0SCkge1xuICAgIGNvbnN0IG1hcmtldEF2Z1N0ZFBjdCA9IG1hcmtTdGRcbiAgICAgICAgLmFkZChvcmFjbGVTdGQpXG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KHJlc2VydmVQcmljZSlcbiAgICAgICAgLmRpdihuZXcgYW5jaG9yXzEuQk4oMikpO1xuICAgIGNvbnN0IHZvbFNwcmVhZCA9IGFuY2hvcl8xLkJOLm1heChsYXN0T3JhY2xlQ29uZlBjdCwgbWFya2V0QXZnU3RkUGN0LmRpdihuZXcgYW5jaG9yXzEuQk4oMikpKTtcbiAgICBjb25zdCBjbGFtcE1pbiA9IG51bWVyaWNDb25zdGFudHNfMS5QRVJDRU5UQUdFX1BSRUNJU0lPTi5kaXYobmV3IGFuY2hvcl8xLkJOKDEwMCkpO1xuICAgIGNvbnN0IGNsYW1wTWF4ID0gbnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OLm11bChuZXcgYW5jaG9yXzEuQk4oMTYpKS5kaXYobmV3IGFuY2hvcl8xLkJOKDEwKSk7XG4gICAgY29uc3QgbG9uZ1ZvbFNwcmVhZEZhY3RvciA9ICgwLCBfXzEuY2xhbXBCTikobG9uZ0ludGVuc2l0eS5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKS5kaXYoYW5jaG9yXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5PTkUsIHZvbHVtZTI0SCkpLCBjbGFtcE1pbiwgY2xhbXBNYXgpO1xuICAgIGNvbnN0IHNob3J0Vm9sU3ByZWFkRmFjdG9yID0gKDAsIF9fMS5jbGFtcEJOKShzaG9ydEludGVuc2l0eS5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKS5kaXYoYW5jaG9yXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5PTkUsIHZvbHVtZTI0SCkpLCBjbGFtcE1pbiwgY2xhbXBNYXgpO1xuICAgIGNvbnN0IGxvbmdWb2xTcHJlYWQgPSBhbmNob3JfMS5CTi5tYXgobGFzdE9yYWNsZUNvbmZQY3QsIHZvbFNwcmVhZC5tdWwobG9uZ1ZvbFNwcmVhZEZhY3RvcikuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QRVJDRU5UQUdFX1BSRUNJU0lPTikpO1xuICAgIGNvbnN0IHNob3J0Vm9sU3ByZWFkID0gYW5jaG9yXzEuQk4ubWF4KGxhc3RPcmFjbGVDb25mUGN0LCB2b2xTcHJlYWQubXVsKHNob3J0Vm9sU3ByZWFkRmFjdG9yKS5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKSk7XG4gICAgcmV0dXJuIFtsb25nVm9sU3ByZWFkLCBzaG9ydFZvbFNwcmVhZF07XG59XG5leHBvcnRzLmNhbGN1bGF0ZVZvbFNwcmVhZEJOID0gY2FsY3VsYXRlVm9sU3ByZWFkQk47XG5mdW5jdGlvbiBjYWxjdWxhdGVTcHJlYWRCTihiYXNlU3ByZWFkLCBsYXN0T3JhY2xlUmVzZXJ2ZVByaWNlU3ByZWFkUGN0LCBsYXN0T3JhY2xlQ29uZlBjdCwgbWF4U3ByZWFkLCBxdW90ZUFzc2V0UmVzZXJ2ZSwgdGVybWluYWxRdW90ZUFzc2V0UmVzZXJ2ZSwgcGVnTXVsdGlwbGllciwgYmFzZUFzc2V0QW1vdW50V2l0aEFtbSwgcmVzZXJ2ZVByaWNlLCB0b3RhbEZlZU1pbnVzRGlzdHJpYnV0aW9ucywgbmV0UmV2ZW51ZVNpbmNlTGFzdEZ1bmRpbmcsIGJhc2VBc3NldFJlc2VydmUsIG1pbkJhc2VBc3NldFJlc2VydmUsIG1heEJhc2VBc3NldFJlc2VydmUsIG1hcmtTdGQsIG9yYWNsZVN0ZCwgbG9uZ0ludGVuc2l0eSwgc2hvcnRJbnRlbnNpdHksIHZvbHVtZTI0SCwgcmV0dXJuVGVybXMgPSBmYWxzZSkge1xuICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKE51bWJlci5pc0ludGVnZXIoYmFzZVNwcmVhZCkpO1xuICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKE51bWJlci5pc0ludGVnZXIobWF4U3ByZWFkKSk7XG4gICAgY29uc3Qgc3ByZWFkVGVybXMgPSB7XG4gICAgICAgIGxvbmdWb2xTcHJlYWQ6IDAsXG4gICAgICAgIHNob3J0Vm9sU3ByZWFkOiAwLFxuICAgICAgICBsb25nU3ByZWFkd1BTOiAwLFxuICAgICAgICBzaG9ydFNwcmVhZHdQUzogMCxcbiAgICAgICAgbWF4VGFyZ2V0U3ByZWFkOiAwLFxuICAgICAgICBpbnZlbnRvcnlTcHJlYWRTY2FsZTogMCxcbiAgICAgICAgbG9uZ1NwcmVhZHdJbnZTY2FsZTogMCxcbiAgICAgICAgc2hvcnRTcHJlYWR3SW52U2NhbGU6IDAsXG4gICAgICAgIGVmZmVjdGl2ZUxldmVyYWdlOiAwLFxuICAgICAgICBlZmZlY3RpdmVMZXZlcmFnZUNhcHBlZDogMCxcbiAgICAgICAgbG9uZ1NwcmVhZHdFTDogMCxcbiAgICAgICAgc2hvcnRTcHJlYWR3RUw6IDAsXG4gICAgICAgIHJldmVudWVSZXRyZWF0QW1vdW50OiAwLFxuICAgICAgICBoYWxmUmV2ZW51ZVJldHJlYXRBbW91bnQ6IDAsXG4gICAgICAgIGxvbmdTcHJlYWR3UmV2UmV0cmVhdDogMCxcbiAgICAgICAgc2hvcnRTcHJlYWR3UmV2UmV0cmVhdDogMCxcbiAgICAgICAgdG90YWxTcHJlYWQ6IDAsXG4gICAgICAgIGxvbmdTcHJlYWQ6IDAsXG4gICAgICAgIHNob3J0U3ByZWFkOiAwLFxuICAgIH07XG4gICAgY29uc3QgW2xvbmdWb2xTcHJlYWQsIHNob3J0Vm9sU3ByZWFkXSA9IGNhbGN1bGF0ZVZvbFNwcmVhZEJOKGxhc3RPcmFjbGVDb25mUGN0LCByZXNlcnZlUHJpY2UsIG1hcmtTdGQsIG9yYWNsZVN0ZCwgbG9uZ0ludGVuc2l0eSwgc2hvcnRJbnRlbnNpdHksIHZvbHVtZTI0SCk7XG4gICAgc3ByZWFkVGVybXMubG9uZ1ZvbFNwcmVhZCA9IGxvbmdWb2xTcHJlYWQudG9OdW1iZXIoKTtcbiAgICBzcHJlYWRUZXJtcy5zaG9ydFZvbFNwcmVhZCA9IHNob3J0Vm9sU3ByZWFkLnRvTnVtYmVyKCk7XG4gICAgbGV0IGxvbmdTcHJlYWQgPSBNYXRoLm1heChiYXNlU3ByZWFkIC8gMiwgbG9uZ1ZvbFNwcmVhZC50b051bWJlcigpKTtcbiAgICBsZXQgc2hvcnRTcHJlYWQgPSBNYXRoLm1heChiYXNlU3ByZWFkIC8gMiwgc2hvcnRWb2xTcHJlYWQudG9OdW1iZXIoKSk7XG4gICAgaWYgKGxhc3RPcmFjbGVSZXNlcnZlUHJpY2VTcHJlYWRQY3QuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIHNob3J0U3ByZWFkID0gTWF0aC5tYXgoc2hvcnRTcHJlYWQsIGxhc3RPcmFjbGVSZXNlcnZlUHJpY2VTcHJlYWRQY3QuYWJzKCkudG9OdW1iZXIoKSArXG4gICAgICAgICAgICBzaG9ydFZvbFNwcmVhZC50b051bWJlcigpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobGFzdE9yYWNsZVJlc2VydmVQcmljZVNwcmVhZFBjdC5sdChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgbG9uZ1NwcmVhZCA9IE1hdGgubWF4KGxvbmdTcHJlYWQsIGxhc3RPcmFjbGVSZXNlcnZlUHJpY2VTcHJlYWRQY3QuYWJzKCkudG9OdW1iZXIoKSArXG4gICAgICAgICAgICBsb25nVm9sU3ByZWFkLnRvTnVtYmVyKCkpO1xuICAgIH1cbiAgICBzcHJlYWRUZXJtcy5sb25nU3ByZWFkd1BTID0gbG9uZ1NwcmVhZDtcbiAgICBzcHJlYWRUZXJtcy5zaG9ydFNwcmVhZHdQUyA9IHNob3J0U3ByZWFkO1xuICAgIGNvbnN0IG1heFRhcmdldFNwcmVhZCA9IE1hdGguZmxvb3IoTWF0aC5tYXgobWF4U3ByZWFkLCBsYXN0T3JhY2xlUmVzZXJ2ZVByaWNlU3ByZWFkUGN0LmFicygpLnRvTnVtYmVyKCkpKTtcbiAgICBjb25zdCBpbnZlbnRvcnlTcHJlYWRTY2FsZSA9IGNhbGN1bGF0ZUludmVudG9yeVNjYWxlKGJhc2VBc3NldEFtb3VudFdpdGhBbW0sIGJhc2VBc3NldFJlc2VydmUsIG1pbkJhc2VBc3NldFJlc2VydmUsIG1heEJhc2VBc3NldFJlc2VydmUsIGJhc2VBc3NldEFtb3VudFdpdGhBbW0uZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pID8gbG9uZ1NwcmVhZCA6IHNob3J0U3ByZWFkLCBtYXhUYXJnZXRTcHJlYWQpO1xuICAgIGlmIChiYXNlQXNzZXRBbW91bnRXaXRoQW1tLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBsb25nU3ByZWFkICo9IGludmVudG9yeVNwcmVhZFNjYWxlO1xuICAgIH1cbiAgICBlbHNlIGlmIChiYXNlQXNzZXRBbW91bnRXaXRoQW1tLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBzaG9ydFNwcmVhZCAqPSBpbnZlbnRvcnlTcHJlYWRTY2FsZTtcbiAgICB9XG4gICAgc3ByZWFkVGVybXMubWF4VGFyZ2V0U3ByZWFkID0gbWF4VGFyZ2V0U3ByZWFkO1xuICAgIHNwcmVhZFRlcm1zLmludmVudG9yeVNwcmVhZFNjYWxlID0gaW52ZW50b3J5U3ByZWFkU2NhbGU7XG4gICAgc3ByZWFkVGVybXMubG9uZ1NwcmVhZHdJbnZTY2FsZSA9IGxvbmdTcHJlYWQ7XG4gICAgc3ByZWFkVGVybXMuc2hvcnRTcHJlYWR3SW52U2NhbGUgPSBzaG9ydFNwcmVhZDtcbiAgICBjb25zdCBNQVhfU1BSRUFEX1NDQUxFID0gMTA7XG4gICAgaWYgKHRvdGFsRmVlTWludXNEaXN0cmlidXRpb25zLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBjb25zdCBlZmZlY3RpdmVMZXZlcmFnZSA9IGNhbGN1bGF0ZUVmZmVjdGl2ZUxldmVyYWdlKGJhc2VTcHJlYWQsIHF1b3RlQXNzZXRSZXNlcnZlLCB0ZXJtaW5hbFF1b3RlQXNzZXRSZXNlcnZlLCBwZWdNdWx0aXBsaWVyLCBiYXNlQXNzZXRBbW91bnRXaXRoQW1tLCByZXNlcnZlUHJpY2UsIHRvdGFsRmVlTWludXNEaXN0cmlidXRpb25zKTtcbiAgICAgICAgc3ByZWFkVGVybXMuZWZmZWN0aXZlTGV2ZXJhZ2UgPSBlZmZlY3RpdmVMZXZlcmFnZTtcbiAgICAgICAgY29uc3Qgc3ByZWFkU2NhbGUgPSBNYXRoLm1pbihNQVhfU1BSRUFEX1NDQUxFLCAxICsgZWZmZWN0aXZlTGV2ZXJhZ2UpO1xuICAgICAgICBzcHJlYWRUZXJtcy5lZmZlY3RpdmVMZXZlcmFnZUNhcHBlZCA9IHNwcmVhZFNjYWxlO1xuICAgICAgICBpZiAoYmFzZUFzc2V0QW1vdW50V2l0aEFtbS5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIGxvbmdTcHJlYWQgKj0gc3ByZWFkU2NhbGU7XG4gICAgICAgICAgICBsb25nU3ByZWFkID0gTWF0aC5mbG9vcihsb25nU3ByZWFkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNob3J0U3ByZWFkICo9IHNwcmVhZFNjYWxlO1xuICAgICAgICAgICAgc2hvcnRTcHJlYWQgPSBNYXRoLmZsb29yKHNob3J0U3ByZWFkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbG9uZ1NwcmVhZCAqPSBNQVhfU1BSRUFEX1NDQUxFO1xuICAgICAgICBzaG9ydFNwcmVhZCAqPSBNQVhfU1BSRUFEX1NDQUxFO1xuICAgIH1cbiAgICBzcHJlYWRUZXJtcy5sb25nU3ByZWFkd0VMID0gbG9uZ1NwcmVhZDtcbiAgICBzcHJlYWRUZXJtcy5zaG9ydFNwcmVhZHdFTCA9IHNob3J0U3ByZWFkO1xuICAgIGlmIChuZXRSZXZlbnVlU2luY2VMYXN0RnVuZGluZy5sdChudW1lcmljQ29uc3RhbnRzXzEuREVGQVVMVF9SRVZFTlVFX1NJTkNFX0xBU1RfRlVORElOR19TUFJFQURfUkVUUkVBVCkpIHtcbiAgICAgICAgY29uc3QgbWF4UmV0cmVhdCA9IG1heFRhcmdldFNwcmVhZCAvIDEwO1xuICAgICAgICBsZXQgcmV2ZW51ZVJldHJlYXRBbW91bnQgPSBtYXhSZXRyZWF0O1xuICAgICAgICBpZiAobmV0UmV2ZW51ZVNpbmNlTGFzdEZ1bmRpbmcuZ3RlKG51bWVyaWNDb25zdGFudHNfMS5ERUZBVUxUX1JFVkVOVUVfU0lOQ0VfTEFTVF9GVU5ESU5HX1NQUkVBRF9SRVRSRUFULm11bChuZXcgYW5jaG9yXzEuQk4oMTAwMCkpKSkge1xuICAgICAgICAgICAgcmV2ZW51ZVJldHJlYXRBbW91bnQgPSBNYXRoLm1pbihtYXhSZXRyZWF0LCBNYXRoLmZsb29yKChiYXNlU3ByZWFkICogbmV0UmV2ZW51ZVNpbmNlTGFzdEZ1bmRpbmcuYWJzKCkudG9OdW1iZXIoKSkgL1xuICAgICAgICAgICAgICAgIG51bWVyaWNDb25zdGFudHNfMS5ERUZBVUxUX1JFVkVOVUVfU0lOQ0VfTEFTVF9GVU5ESU5HX1NQUkVBRF9SRVRSRUFULmFicygpLnRvTnVtYmVyKCkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYWxmUmV2ZW51ZVJldHJlYXRBbW91bnQgPSBNYXRoLmZsb29yKHJldmVudWVSZXRyZWF0QW1vdW50IC8gMik7XG4gICAgICAgIHNwcmVhZFRlcm1zLnJldmVudWVSZXRyZWF0QW1vdW50ID0gcmV2ZW51ZVJldHJlYXRBbW91bnQ7XG4gICAgICAgIHNwcmVhZFRlcm1zLmhhbGZSZXZlbnVlUmV0cmVhdEFtb3VudCA9IGhhbGZSZXZlbnVlUmV0cmVhdEFtb3VudDtcbiAgICAgICAgaWYgKGJhc2VBc3NldEFtb3VudFdpdGhBbW0uZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICBsb25nU3ByZWFkICs9IHJldmVudWVSZXRyZWF0QW1vdW50O1xuICAgICAgICAgICAgc2hvcnRTcHJlYWQgKz0gaGFsZlJldmVudWVSZXRyZWF0QW1vdW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGJhc2VBc3NldEFtb3VudFdpdGhBbW0ubHQobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICBsb25nU3ByZWFkICs9IGhhbGZSZXZlbnVlUmV0cmVhdEFtb3VudDtcbiAgICAgICAgICAgIHNob3J0U3ByZWFkICs9IHJldmVudWVSZXRyZWF0QW1vdW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9uZ1NwcmVhZCArPSBoYWxmUmV2ZW51ZVJldHJlYXRBbW91bnQ7XG4gICAgICAgICAgICBzaG9ydFNwcmVhZCArPSBoYWxmUmV2ZW51ZVJldHJlYXRBbW91bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3ByZWFkVGVybXMubG9uZ1NwcmVhZHdSZXZSZXRyZWF0ID0gbG9uZ1NwcmVhZDtcbiAgICBzcHJlYWRUZXJtcy5zaG9ydFNwcmVhZHdSZXZSZXRyZWF0ID0gc2hvcnRTcHJlYWQ7XG4gICAgY29uc3QgdG90YWxTcHJlYWQgPSBsb25nU3ByZWFkICsgc2hvcnRTcHJlYWQ7XG4gICAgaWYgKHRvdGFsU3ByZWFkID4gbWF4VGFyZ2V0U3ByZWFkKSB7XG4gICAgICAgIGlmIChsb25nU3ByZWFkID4gc2hvcnRTcHJlYWQpIHtcbiAgICAgICAgICAgIGxvbmdTcHJlYWQgPSBNYXRoLmNlaWwoKGxvbmdTcHJlYWQgKiBtYXhUYXJnZXRTcHJlYWQpIC8gdG90YWxTcHJlYWQpO1xuICAgICAgICAgICAgc2hvcnRTcHJlYWQgPSBNYXRoLmZsb29yKG1heFRhcmdldFNwcmVhZCAtIGxvbmdTcHJlYWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2hvcnRTcHJlYWQgPSBNYXRoLmNlaWwoKHNob3J0U3ByZWFkICogbWF4VGFyZ2V0U3ByZWFkKSAvIHRvdGFsU3ByZWFkKTtcbiAgICAgICAgICAgIGxvbmdTcHJlYWQgPSBNYXRoLmZsb29yKG1heFRhcmdldFNwcmVhZCAtIHNob3J0U3ByZWFkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzcHJlYWRUZXJtcy50b3RhbFNwcmVhZCA9IHRvdGFsU3ByZWFkO1xuICAgIHNwcmVhZFRlcm1zLmxvbmdTcHJlYWQgPSBsb25nU3ByZWFkO1xuICAgIHNwcmVhZFRlcm1zLnNob3J0U3ByZWFkID0gc2hvcnRTcHJlYWQ7XG4gICAgaWYgKHJldHVyblRlcm1zKSB7XG4gICAgICAgIHJldHVybiBzcHJlYWRUZXJtcztcbiAgICB9XG4gICAgcmV0dXJuIFtsb25nU3ByZWFkLCBzaG9ydFNwcmVhZF07XG59XG5leHBvcnRzLmNhbGN1bGF0ZVNwcmVhZEJOID0gY2FsY3VsYXRlU3ByZWFkQk47XG5mdW5jdGlvbiBjYWxjdWxhdGVTcHJlYWQoYW1tLCBvcmFjbGVQcmljZURhdGEsIG5vdykge1xuICAgIGlmIChhbW0uYmFzZVNwcmVhZCA9PSAwIHx8IGFtbS5jdXJ2ZVVwZGF0ZUludGVuc2l0eSA9PSAwKSB7XG4gICAgICAgIHJldHVybiBbYW1tLmJhc2VTcHJlYWQgLyAyLCBhbW0uYmFzZVNwcmVhZCAvIDJdO1xuICAgIH1cbiAgICBjb25zdCByZXNlcnZlUHJpY2UgPSBjYWxjdWxhdGVQcmljZShhbW0uYmFzZUFzc2V0UmVzZXJ2ZSwgYW1tLnF1b3RlQXNzZXRSZXNlcnZlLCBhbW0ucGVnTXVsdGlwbGllcik7XG4gICAgY29uc3QgdGFyZ2V0UHJpY2UgPSAob3JhY2xlUHJpY2VEYXRhID09PSBudWxsIHx8IG9yYWNsZVByaWNlRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3JhY2xlUHJpY2VEYXRhLnByaWNlKSB8fCByZXNlcnZlUHJpY2U7XG4gICAgY29uc3QgY29uZkludGVydmFsID0gb3JhY2xlUHJpY2VEYXRhLmNvbmZpZGVuY2UgfHwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgY29uc3QgdGFyZ2V0TWFya1NwcmVhZFBjdCA9IHJlc2VydmVQcmljZVxuICAgICAgICAuc3ViKHRhcmdldFByaWNlKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5CSURfQVNLX1NQUkVBRF9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYocmVzZXJ2ZVByaWNlKTtcbiAgICBjb25zdCBjb25mSW50ZXJ2YWxQY3QgPSBjb25mSW50ZXJ2YWxcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuQklEX0FTS19TUFJFQURfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KHJlc2VydmVQcmljZSk7XG4gICAgbm93ID0gbm93IHx8IG5ldyBhbmNob3JfMS5CTihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApOyAvL3RvZG9cbiAgICBjb25zdCBsaXZlT3JhY2xlU3RkID0gKDAsIG9yYWNsZXNfMS5jYWxjdWxhdGVMaXZlT3JhY2xlU3RkKShhbW0sIG9yYWNsZVByaWNlRGF0YSwgbm93KTtcbiAgICBjb25zdCBzcHJlYWRzID0gY2FsY3VsYXRlU3ByZWFkQk4oYW1tLmJhc2VTcHJlYWQsIHRhcmdldE1hcmtTcHJlYWRQY3QsIGNvbmZJbnRlcnZhbFBjdCwgYW1tLm1heFNwcmVhZCwgYW1tLnF1b3RlQXNzZXRSZXNlcnZlLCBhbW0udGVybWluYWxRdW90ZUFzc2V0UmVzZXJ2ZSwgYW1tLnBlZ011bHRpcGxpZXIsIGFtbS5iYXNlQXNzZXRBbW91bnRXaXRoQW1tLCByZXNlcnZlUHJpY2UsIGFtbS50b3RhbEZlZU1pbnVzRGlzdHJpYnV0aW9ucywgYW1tLm5ldFJldmVudWVTaW5jZUxhc3RGdW5kaW5nLCBhbW0uYmFzZUFzc2V0UmVzZXJ2ZSwgYW1tLm1pbkJhc2VBc3NldFJlc2VydmUsIGFtbS5tYXhCYXNlQXNzZXRSZXNlcnZlLCBhbW0ubWFya1N0ZCwgbGl2ZU9yYWNsZVN0ZCwgYW1tLmxvbmdJbnRlbnNpdHlWb2x1bWUsIGFtbS5zaG9ydEludGVuc2l0eVZvbHVtZSwgYW1tLnZvbHVtZTI0SCk7XG4gICAgY29uc3QgbG9uZ1NwcmVhZCA9IHNwcmVhZHNbMF07XG4gICAgY29uc3Qgc2hvcnRTcHJlYWQgPSBzcHJlYWRzWzFdO1xuICAgIHJldHVybiBbbG9uZ1NwcmVhZCwgc2hvcnRTcHJlYWRdO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVTcHJlYWQgPSBjYWxjdWxhdGVTcHJlYWQ7XG5mdW5jdGlvbiBjYWxjdWxhdGVTcHJlYWRSZXNlcnZlcyhhbW0sIG9yYWNsZVByaWNlRGF0YSwgbm93KSB7XG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlU3ByZWFkUmVzZXJ2ZShzcHJlYWQsIGRpcmVjdGlvbiwgYW1tKSB7XG4gICAgICAgIGlmIChzcHJlYWQgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYmFzZUFzc2V0UmVzZXJ2ZTogYW1tLmJhc2VBc3NldFJlc2VydmUsXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldFJlc2VydmU6IGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVvdGVBc3NldFJlc2VydmVEZWx0YSA9IGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZS5kaXYobnVtZXJpY0NvbnN0YW50c18xLkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTi5kaXYobmV3IGFuY2hvcl8xLkJOKHNwcmVhZCAvIDIpKSk7XG4gICAgICAgIGxldCBxdW90ZUFzc2V0UmVzZXJ2ZTtcbiAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoZGlyZWN0aW9uLCAnbG9uZycpKSB7XG4gICAgICAgICAgICBxdW90ZUFzc2V0UmVzZXJ2ZSA9IGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZS5hZGQocXVvdGVBc3NldFJlc2VydmVEZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdW90ZUFzc2V0UmVzZXJ2ZSA9IGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZS5zdWIocXVvdGVBc3NldFJlc2VydmVEZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmFzZUFzc2V0UmVzZXJ2ZSA9IGFtbS5zcXJ0Sy5tdWwoYW1tLnNxcnRLKS5kaXYocXVvdGVBc3NldFJlc2VydmUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmFzZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgICAgIHF1b3RlQXNzZXRSZXNlcnZlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBbbG9uZ1NwcmVhZCwgc2hvcnRTcHJlYWRdID0gY2FsY3VsYXRlU3ByZWFkKGFtbSwgb3JhY2xlUHJpY2VEYXRhLCBub3cpO1xuICAgIGNvbnN0IGFza1Jlc2VydmVzID0gY2FsY3VsYXRlU3ByZWFkUmVzZXJ2ZShsb25nU3ByZWFkLCB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLkxPTkcsIGFtbSk7XG4gICAgY29uc3QgYmlkUmVzZXJ2ZXMgPSBjYWxjdWxhdGVTcHJlYWRSZXNlcnZlKHNob3J0U3ByZWFkLCB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JULCBhbW0pO1xuICAgIHJldHVybiBbYmlkUmVzZXJ2ZXMsIGFza1Jlc2VydmVzXTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlU3ByZWFkUmVzZXJ2ZXMgPSBjYWxjdWxhdGVTcHJlYWRSZXNlcnZlcztcbi8qKlxuICogSGVscGVyIGZ1bmN0aW9uIGNhbGN1bGF0aW5nIGNvbnN0YW50IHByb2R1Y3QgY3VydmUgb3V0cHV0LiBBZ25vc3RpYyB0byB3aGV0aGVyIGlucHV0IGFzc2V0IGlzIHF1b3RlIG9yIGJhc2VcbiAqXG4gKiBAcGFyYW0gaW5wdXRBc3NldFJlc2VydmVcbiAqIEBwYXJhbSBzd2FwQW1vdW50XG4gKiBAcGFyYW0gc3dhcERpcmVjdGlvblxuICogQHBhcmFtIGludmFyaWFudFxuICogQHJldHVybnMgbmV3SW5wdXRBc3NldFJlc2VydmUgYW5kIG5ld091dHB1dEFzc2V0UmVzZXJ2ZSBhZnRlciBzd2FwLiA6IFByZWNpc2lvbiBBTU1fUkVTRVJWRV9QUkVDSVNJT05cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlU3dhcE91dHB1dChpbnB1dEFzc2V0UmVzZXJ2ZSwgc3dhcEFtb3VudCwgc3dhcERpcmVjdGlvbiwgaW52YXJpYW50KSB7XG4gICAgbGV0IG5ld0lucHV0QXNzZXRSZXNlcnZlO1xuICAgIGlmIChzd2FwRGlyZWN0aW9uID09PSB0eXBlc18xLlN3YXBEaXJlY3Rpb24uQUREKSB7XG4gICAgICAgIG5ld0lucHV0QXNzZXRSZXNlcnZlID0gaW5wdXRBc3NldFJlc2VydmUuYWRkKHN3YXBBbW91bnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmV3SW5wdXRBc3NldFJlc2VydmUgPSBpbnB1dEFzc2V0UmVzZXJ2ZS5zdWIoc3dhcEFtb3VudCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld091dHB1dEFzc2V0UmVzZXJ2ZSA9IGludmFyaWFudC5kaXYobmV3SW5wdXRBc3NldFJlc2VydmUpO1xuICAgIHJldHVybiBbbmV3SW5wdXRBc3NldFJlc2VydmUsIG5ld091dHB1dEFzc2V0UmVzZXJ2ZV07XG59XG5leHBvcnRzLmNhbGN1bGF0ZVN3YXBPdXRwdXQgPSBjYWxjdWxhdGVTd2FwT3V0cHV0O1xuLyoqXG4gKiBUcmFuc2xhdGUgbG9uZy9zaG9ydGluZyBxdW90ZS9iYXNlIGFzc2V0IGludG8gYW1tIG9wZXJhdGlvblxuICpcbiAqIEBwYXJhbSBpbnB1dEFzc2V0VHlwZVxuICogQHBhcmFtIHBvc2l0aW9uRGlyZWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGdldFN3YXBEaXJlY3Rpb24oaW5wdXRBc3NldFR5cGUsIHBvc2l0aW9uRGlyZWN0aW9uKSB7XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkocG9zaXRpb25EaXJlY3Rpb24sICdsb25nJykgJiYgaW5wdXRBc3NldFR5cGUgPT09ICdiYXNlJykge1xuICAgICAgICByZXR1cm4gdHlwZXNfMS5Td2FwRGlyZWN0aW9uLlJFTU9WRTtcbiAgICB9XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkocG9zaXRpb25EaXJlY3Rpb24sICdzaG9ydCcpICYmIGlucHV0QXNzZXRUeXBlID09PSAncXVvdGUnKSB7XG4gICAgICAgIHJldHVybiB0eXBlc18xLlN3YXBEaXJlY3Rpb24uUkVNT1ZFO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZXNfMS5Td2FwRGlyZWN0aW9uLkFERDtcbn1cbmV4cG9ydHMuZ2V0U3dhcERpcmVjdGlvbiA9IGdldFN3YXBEaXJlY3Rpb247XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiBjYWxjdWxhdGluZyB0ZXJtaW5hbCBwcmljZSBvZiBhbW1cbiAqXG4gKiBAcGFyYW0gbWFya2V0XG4gKiBAcmV0dXJucyBjb3N0IDogUHJlY2lzaW9uIFBSSUNFX1BSRUNJU0lPTlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVUZXJtaW5hbFByaWNlKG1hcmtldCkge1xuICAgIGNvbnN0IGRpcmVjdGlvblRvQ2xvc2UgPSBtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudFdpdGhBbW0uZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pXG4gICAgICAgID8gdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5TSE9SVFxuICAgICAgICA6IHR5cGVzXzEuUG9zaXRpb25EaXJlY3Rpb24uTE9ORztcbiAgICBjb25zdCBbbmV3UXVvdGVBc3NldFJlc2VydmUsIG5ld0Jhc2VBc3NldFJlc2VydmVdID0gY2FsY3VsYXRlQW1tUmVzZXJ2ZXNBZnRlclN3YXAobWFya2V0LmFtbSwgJ2Jhc2UnLCBtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudFdpdGhBbW0uYWJzKCksIGdldFN3YXBEaXJlY3Rpb24oJ2Jhc2UnLCBkaXJlY3Rpb25Ub0Nsb3NlKSk7XG4gICAgY29uc3QgdGVybWluYWxQcmljZSA9IG5ld1F1b3RlQXNzZXRSZXNlcnZlXG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgLm11bChtYXJrZXQuYW1tLnBlZ011bHRpcGxpZXIpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBFR19QUkVDSVNJT04pXG4gICAgICAgIC5kaXYobmV3QmFzZUFzc2V0UmVzZXJ2ZSk7XG4gICAgcmV0dXJuIHRlcm1pbmFsUHJpY2U7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVRlcm1pbmFsUHJpY2UgPSBjYWxjdWxhdGVUZXJtaW5hbFByaWNlO1xuZnVuY3Rpb24gY2FsY3VsYXRlTWF4QmFzZUFzc2V0QW1vdW50VG9UcmFkZShhbW0sIGxpbWl0X3ByaWNlLCBkaXJlY3Rpb24sIG9yYWNsZVByaWNlRGF0YSwgbm93KSB7XG4gICAgY29uc3QgaW52YXJpYW50ID0gYW1tLnNxcnRLLm11bChhbW0uc3FydEspO1xuICAgIGNvbnN0IG5ld0Jhc2VBc3NldFJlc2VydmVTcXVhcmVkID0gaW52YXJpYW50XG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgLm11bChhbW0ucGVnTXVsdGlwbGllcilcbiAgICAgICAgLmRpdihsaW1pdF9wcmljZSlcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUEVHX1BSRUNJU0lPTik7XG4gICAgY29uc3QgbmV3QmFzZUFzc2V0UmVzZXJ2ZSA9ICgwLCBfXzEuc3F1YXJlUm9vdEJOKShuZXdCYXNlQXNzZXRSZXNlcnZlU3F1YXJlZCk7XG4gICAgY29uc3QgW3Nob3J0U3ByZWFkUmVzZXJ2ZXMsIGxvbmdTcHJlYWRSZXNlcnZlc10gPSBjYWxjdWxhdGVTcHJlYWRSZXNlcnZlcyhhbW0sIG9yYWNsZVByaWNlRGF0YSwgbm93KTtcbiAgICBjb25zdCBiYXNlQXNzZXRSZXNlcnZlQmVmb3JlID0gKDAsIHR5cGVzXzEuaXNWYXJpYW50KShkaXJlY3Rpb24sICdsb25nJylcbiAgICAgICAgPyBsb25nU3ByZWFkUmVzZXJ2ZXMuYmFzZUFzc2V0UmVzZXJ2ZVxuICAgICAgICA6IHNob3J0U3ByZWFkUmVzZXJ2ZXMuYmFzZUFzc2V0UmVzZXJ2ZTtcbiAgICBpZiAobmV3QmFzZUFzc2V0UmVzZXJ2ZS5ndChiYXNlQXNzZXRSZXNlcnZlQmVmb3JlKSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbmV3QmFzZUFzc2V0UmVzZXJ2ZS5zdWIoYmFzZUFzc2V0UmVzZXJ2ZUJlZm9yZSksXG4gICAgICAgICAgICB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JULFxuICAgICAgICBdO1xuICAgIH1cbiAgICBlbHNlIGlmIChuZXdCYXNlQXNzZXRSZXNlcnZlLmx0KGJhc2VBc3NldFJlc2VydmVCZWZvcmUpKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBiYXNlQXNzZXRSZXNlcnZlQmVmb3JlLnN1YihuZXdCYXNlQXNzZXRSZXNlcnZlKSxcbiAgICAgICAgICAgIHR5cGVzXzEuUG9zaXRpb25EaXJlY3Rpb24uTE9ORyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0cmFkZVNpemUgVG9vIFNtYWxsJyk7XG4gICAgICAgIHJldHVybiBbbmV3IGFuY2hvcl8xLkJOKDApLCB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLkxPTkddO1xuICAgIH1cbn1cbmV4cG9ydHMuY2FsY3VsYXRlTWF4QmFzZUFzc2V0QW1vdW50VG9UcmFkZSA9IGNhbGN1bGF0ZU1heEJhc2VBc3NldEFtb3VudFRvVHJhZGU7XG5mdW5jdGlvbiBjYWxjdWxhdGVRdW90ZUFzc2V0QW1vdW50U3dhcHBlZChxdW90ZUFzc2V0UmVzZXJ2ZXMsIHBlZ011bHRpcGxpZXIsIHN3YXBEaXJlY3Rpb24pIHtcbiAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShzd2FwRGlyZWN0aW9uLCAncmVtb3ZlJykpIHtcbiAgICAgICAgcXVvdGVBc3NldFJlc2VydmVzID0gcXVvdGVBc3NldFJlc2VydmVzLmFkZChudW1lcmljQ29uc3RhbnRzXzEuT05FKTtcbiAgICB9XG4gICAgbGV0IHF1b3RlQXNzZXRBbW91bnQgPSBxdW90ZUFzc2V0UmVzZXJ2ZXNcbiAgICAgICAgLm11bChwZWdNdWx0aXBsaWVyKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fVElNRVNfUEVHX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyk7XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3dhcERpcmVjdGlvbiwgJ3JlbW92ZScpKSB7XG4gICAgICAgIHF1b3RlQXNzZXRBbW91bnQgPSBxdW90ZUFzc2V0QW1vdW50LmFkZChudW1lcmljQ29uc3RhbnRzXzEuT05FKTtcbiAgICB9XG4gICAgcmV0dXJuIHF1b3RlQXNzZXRBbW91bnQ7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVF1b3RlQXNzZXRBbW91bnRTd2FwcGVkID0gY2FsY3VsYXRlUXVvdGVBc3NldEFtb3VudFN3YXBwZWQ7XG5mdW5jdGlvbiBjYWxjdWxhdGVNYXhCYXNlQXNzZXRBbW91bnRGaWxsYWJsZShhbW0sIG9yZGVyRGlyZWN0aW9uKSB7XG4gICAgY29uc3QgbWF4RmlsbFNpemUgPSBhbW0uYmFzZUFzc2V0UmVzZXJ2ZS5kaXYobmV3IGFuY2hvcl8xLkJOKGFtbS5tYXhGaWxsUmVzZXJ2ZUZyYWN0aW9uKSk7XG4gICAgbGV0IG1heEJhc2VBc3NldEFtb3VudE9uU2lkZTtcbiAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlckRpcmVjdGlvbiwgJ2xvbmcnKSkge1xuICAgICAgICBtYXhCYXNlQXNzZXRBbW91bnRPblNpZGUgPSBhbmNob3JfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIGFtbS5iYXNlQXNzZXRSZXNlcnZlLnN1YihhbW0ubWluQmFzZUFzc2V0UmVzZXJ2ZSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWF4QmFzZUFzc2V0QW1vdW50T25TaWRlID0gYW5jaG9yXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBhbW0ubWF4QmFzZUFzc2V0UmVzZXJ2ZS5zdWIoYW1tLmJhc2VBc3NldFJlc2VydmUpKTtcbiAgICB9XG4gICAgcmV0dXJuICgwLCBfXzEuc3RhbmRhcmRpemVCYXNlQXNzZXRBbW91bnQpKGFuY2hvcl8xLkJOLm1pbihtYXhGaWxsU2l6ZSwgbWF4QmFzZUFzc2V0QW1vdW50T25TaWRlKSwgYW1tLm9yZGVyU3RlcFNpemUpO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVNYXhCYXNlQXNzZXRBbW91bnRGaWxsYWJsZSA9IGNhbGN1bGF0ZU1heEJhc2VBc3NldEFtb3VudEZpbGxhYmxlO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY2FsY3VsYXRlTWF4QmFzZUFzc2V0QW1vdW50RmlsbGFibGUiLCJjYWxjdWxhdGVRdW90ZUFzc2V0QW1vdW50U3dhcHBlZCIsImNhbGN1bGF0ZU1heEJhc2VBc3NldEFtb3VudFRvVHJhZGUiLCJjYWxjdWxhdGVUZXJtaW5hbFByaWNlIiwiZ2V0U3dhcERpcmVjdGlvbiIsImNhbGN1bGF0ZVN3YXBPdXRwdXQiLCJjYWxjdWxhdGVTcHJlYWRSZXNlcnZlcyIsImNhbGN1bGF0ZVNwcmVhZCIsImNhbGN1bGF0ZVNwcmVhZEJOIiwiY2FsY3VsYXRlVm9sU3ByZWFkQk4iLCJjYWxjdWxhdGVNYXhTcHJlYWQiLCJjYWxjdWxhdGVFZmZlY3RpdmVMZXZlcmFnZSIsImNhbGN1bGF0ZUludmVudG9yeVNjYWxlIiwiY2FsY3VsYXRlTWFya2V0T3BlbkJpZEFzayIsImNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwIiwiY2FsY3VsYXRlUHJpY2UiLCJjYWxjdWxhdGVCaWRBc2tQcmljZSIsImNhbGN1bGF0ZVVwZGF0ZWRBTU1TcHJlYWRSZXNlcnZlcyIsImNhbGN1bGF0ZVVwZGF0ZWRBTU0iLCJjYWxjdWxhdGVOZXdBbW0iLCJjYWxjdWxhdGVPcHRpbWFsUGVnQW5kQnVkZ2V0IiwiY2FsY3VsYXRlUGVnRnJvbVRhcmdldFByaWNlIiwiYW5jaG9yXzEiLCJyZXF1aXJlIiwibnVtZXJpY0NvbnN0YW50c18xIiwidHlwZXNfMSIsImFzc2VydF8xIiwiX18xIiwicmVwZWdfMSIsIm9yYWNsZXNfMSIsInRhcmdldFByaWNlIiwiYmFzZUFzc2V0UmVzZXJ2ZSIsInF1b3RlQXNzZXRSZXNlcnZlIiwiQk4iLCJtYXgiLCJtdWwiLCJkaXYiLCJhZGQiLCJQUklDRV9ESVZfUEVHIiwiT05FIiwiYW1tIiwib3JhY2xlUHJpY2VEYXRhIiwicmVzZXJ2ZVByaWNlQmVmb3JlIiwicGVnTXVsdGlwbGllciIsInByaWNlIiwibmV3UGVnIiwicHJlUGVnQ29zdCIsImNhbGN1bGF0ZVJlcGVnQ29zdCIsInRvdGFsRmVlTEIiLCJ0b3RhbEV4Y2hhbmdlRmVlIiwiYnVkZ2V0IiwiWkVSTyIsInRvdGFsRmVlTWludXNEaXN0cmlidXRpb25zIiwic3ViIiwiY2hlY2tMb3dlckJvdW5kIiwibHQiLCJoYWxmTWF4UHJpY2VTcHJlYWQiLCJtYXhTcHJlYWQiLCJCSURfQVNLX1NQUkVBRF9QUkVDSVNJT04iLCJuZXdUYXJnZXRQcmljZSIsIm5ld09wdGltYWxQZWciLCJuZXdCdWRnZXQiLCJ0YXJnZXRQcmljZUdhcCIsImFicyIsImd0IiwibWFya0FkaiIsInBLTnVtZXIiLCJwS0Rlbm9tIiwiX25ld1BlZyIsIl9jaGVja0xvd2VyQm91bmQiLCJndGUiLCJkZWZpY2l0TWFkZXVwIiwiY2FsY3VsYXRlQWRqdXN0S0Nvc3QiLCJhc3NlcnQiLCJsdGUiLCJuZXdBbW0iLCJhc3NpZ24iLCJzcXJ0SyIsImludmFyaWFudCIsImRpcmVjdGlvblRvQ2xvc2UiLCJiYXNlQXNzZXRBbW91bnRXaXRoQW1tIiwiUG9zaXRpb25EaXJlY3Rpb24iLCJTSE9SVCIsIkxPTkciLCJuZXdRdW90ZUFzc2V0UmVzZXJ2ZSIsIl9uZXdCYXNlQXNzZXRSZXNlcnZlIiwidGVybWluYWxRdW90ZUFzc2V0UmVzZXJ2ZSIsImNhbGN1bGF0ZUJ1ZGdldGVkUGVnIiwiY3VydmVVcGRhdGVJbnRlbnNpdHkiLCJ1bmRlZmluZWQiLCJwcmVwZWdDb3N0IiwibmV0UmV2ZW51ZVNpbmNlTGFzdEZ1bmRpbmciLCJkaXJlY3Rpb24iLCJzaG9ydFJlc2VydmVzIiwibG9uZ1Jlc2VydmVzIiwiZGlyUmVzZXJ2ZXMiLCJpc1ZhcmlhbnQiLCJyZXN1bHQiLCJ3aXRoVXBkYXRlIiwiYmlkUmVzZXJ2ZXMiLCJhc2tSZXNlcnZlcyIsImFza1ByaWNlIiwiYmlkUHJpY2UiLCJiYXNlQXNzZXRSZXNlcnZlcyIsInF1b3RlQXNzZXRSZXNlcnZlcyIsIlBSSUNFX1BSRUNJU0lPTiIsIlBFR19QUkVDSVNJT04iLCJpbnB1dEFzc2V0VHlwZSIsInN3YXBBbW91bnQiLCJzd2FwRGlyZWN0aW9uIiwibmV3QmFzZUFzc2V0UmVzZXJ2ZSIsIkFNTV9USU1FU19QRUdfVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPIiwibWluQmFzZUFzc2V0UmVzZXJ2ZSIsIm1heEJhc2VBc3NldFJlc2VydmUiLCJzdGVwU2l6ZSIsIm9wZW5Bc2tzIiwiVFdPIiwib3BlbkJpZHMiLCJkaXJlY3Rpb25hbFNwcmVhZCIsImVxIiwiTUFYX0JJRF9BU0tfSU5WRU5UT1JZX1NLRVdfRkFDVE9SIiwibWluU2lkZUxpcXVpZGl0eSIsIm1pbiIsImludmVudG9yeVNjYWxlQk4iLCJQRVJDRU5UQUdFX1BSRUNJU0lPTiIsImludmVudG9yeVNjYWxlTWF4Qk4iLCJNYXRoIiwiaW52ZW50b3J5U2NhbGVDYXBwZWQiLCJ0b051bWJlciIsImJhc2VTcHJlYWQiLCJuZXRCYXNlQXNzZXRBbW91bnQiLCJyZXNlcnZlUHJpY2UiLCJuZXRCYXNlQXNzZXRWYWx1ZSIsImxvY2FsQmFzZUFzc2V0VmFsdWUiLCJBTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPIiwiZWZmZWN0aXZlR2FwIiwiZWZmZWN0aXZlTGV2ZXJhZ2UiLCJRVU9URV9QUkVDSVNJT04iLCJtYXJnaW5SYXRpb0luaXRpYWwiLCJtYXhUYXJnZXRTcHJlYWQiLCJNQVJHSU5fUFJFQ0lTSU9OIiwibGFzdE9yYWNsZUNvbmZQY3QiLCJtYXJrU3RkIiwib3JhY2xlU3RkIiwibG9uZ0ludGVuc2l0eSIsInNob3J0SW50ZW5zaXR5Iiwidm9sdW1lMjRIIiwibWFya2V0QXZnU3RkUGN0Iiwidm9sU3ByZWFkIiwiY2xhbXBNaW4iLCJjbGFtcE1heCIsImxvbmdWb2xTcHJlYWRGYWN0b3IiLCJjbGFtcEJOIiwic2hvcnRWb2xTcHJlYWRGYWN0b3IiLCJsb25nVm9sU3ByZWFkIiwic2hvcnRWb2xTcHJlYWQiLCJsYXN0T3JhY2xlUmVzZXJ2ZVByaWNlU3ByZWFkUGN0IiwicmV0dXJuVGVybXMiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJzcHJlYWRUZXJtcyIsImxvbmdTcHJlYWR3UFMiLCJzaG9ydFNwcmVhZHdQUyIsImludmVudG9yeVNwcmVhZFNjYWxlIiwibG9uZ1NwcmVhZHdJbnZTY2FsZSIsInNob3J0U3ByZWFkd0ludlNjYWxlIiwiZWZmZWN0aXZlTGV2ZXJhZ2VDYXBwZWQiLCJsb25nU3ByZWFkd0VMIiwic2hvcnRTcHJlYWR3RUwiLCJyZXZlbnVlUmV0cmVhdEFtb3VudCIsImhhbGZSZXZlbnVlUmV0cmVhdEFtb3VudCIsImxvbmdTcHJlYWR3UmV2UmV0cmVhdCIsInNob3J0U3ByZWFkd1JldlJldHJlYXQiLCJ0b3RhbFNwcmVhZCIsImxvbmdTcHJlYWQiLCJzaG9ydFNwcmVhZCIsImZsb29yIiwiTUFYX1NQUkVBRF9TQ0FMRSIsInNwcmVhZFNjYWxlIiwiREVGQVVMVF9SRVZFTlVFX1NJTkNFX0xBU1RfRlVORElOR19TUFJFQURfUkVUUkVBVCIsIm1heFJldHJlYXQiLCJjZWlsIiwibm93IiwiY29uZkludGVydmFsIiwiY29uZmlkZW5jZSIsInRhcmdldE1hcmtTcHJlYWRQY3QiLCJjb25mSW50ZXJ2YWxQY3QiLCJEYXRlIiwiZ2V0VGltZSIsImxpdmVPcmFjbGVTdGQiLCJjYWxjdWxhdGVMaXZlT3JhY2xlU3RkIiwic3ByZWFkcyIsImxvbmdJbnRlbnNpdHlWb2x1bWUiLCJzaG9ydEludGVuc2l0eVZvbHVtZSIsImNhbGN1bGF0ZVNwcmVhZFJlc2VydmUiLCJzcHJlYWQiLCJxdW90ZUFzc2V0UmVzZXJ2ZURlbHRhIiwiaW5wdXRBc3NldFJlc2VydmUiLCJuZXdJbnB1dEFzc2V0UmVzZXJ2ZSIsIlN3YXBEaXJlY3Rpb24iLCJBREQiLCJuZXdPdXRwdXRBc3NldFJlc2VydmUiLCJwb3NpdGlvbkRpcmVjdGlvbiIsIlJFTU9WRSIsIm1hcmtldCIsInRlcm1pbmFsUHJpY2UiLCJsaW1pdF9wcmljZSIsIm5ld0Jhc2VBc3NldFJlc2VydmVTcXVhcmVkIiwic3F1YXJlUm9vdEJOIiwic2hvcnRTcHJlYWRSZXNlcnZlcyIsImxvbmdTcHJlYWRSZXNlcnZlcyIsImJhc2VBc3NldFJlc2VydmVCZWZvcmUiLCJjb25zb2xlIiwibG9nIiwicXVvdGVBc3NldEFtb3VudCIsIm9yZGVyRGlyZWN0aW9uIiwibWF4RmlsbFNpemUiLCJtYXhGaWxsUmVzZXJ2ZUZyYWN0aW9uIiwibWF4QmFzZUFzc2V0QW1vdW50T25TaWRlIiwic3RhbmRhcmRpemVCYXNlQXNzZXRBbW91bnQiLCJvcmRlclN0ZXBTaXplIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/auction.js":
/*!**********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/auction.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getAuctionPriceForOracleOffsetAuction = exports.getAuctionPriceForFixedAuction = exports.getAuctionPrice = exports.isFallbackAvailableLiquiditySource = exports.isAuctionComplete = void 0;\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst _1 = __webpack_require__(/*! ../. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nfunction isAuctionComplete(order, slot) {\n    if (order.auctionDuration === 0) {\n        return true;\n    }\n    return new _1.BN(slot).sub(order.slot).gt(new _1.BN(order.auctionDuration));\n}\nexports.isAuctionComplete = isAuctionComplete;\nfunction isFallbackAvailableLiquiditySource(order, minAuctionDuration, slot) {\n    if (minAuctionDuration === 0) {\n        return true;\n    }\n    return new _1.BN(slot).sub(order.slot).gt(new _1.BN(minAuctionDuration));\n}\nexports.isFallbackAvailableLiquiditySource = isFallbackAvailableLiquiditySource;\nfunction getAuctionPrice(order, slot, oraclePrice) {\n    if ((0, types_1.isOneOfVariant)(order.orderType, [\n        \"market\",\n        \"triggerMarket\",\n        \"limit\"\n    ])) {\n        return getAuctionPriceForFixedAuction(order, slot);\n    } else if ((0, types_1.isVariant)(order.orderType, \"oracle\")) {\n        return getAuctionPriceForOracleOffsetAuction(order, slot, oraclePrice);\n    } else {\n        throw Error(`Cant get auction price for order type ${order.orderType}`);\n    }\n}\nexports.getAuctionPrice = getAuctionPrice;\nfunction getAuctionPriceForFixedAuction(order, slot) {\n    const slotsElapsed = new _1.BN(slot).sub(order.slot);\n    const deltaDenominator = new _1.BN(order.auctionDuration);\n    const deltaNumerator = _1.BN.min(slotsElapsed, deltaDenominator);\n    if (deltaDenominator.eq(_1.ZERO)) {\n        return order.auctionEndPrice;\n    }\n    let priceDelta;\n    if ((0, types_1.isVariant)(order.direction, \"long\")) {\n        priceDelta = order.auctionEndPrice.sub(order.auctionStartPrice).mul(deltaNumerator).div(deltaDenominator);\n    } else {\n        priceDelta = order.auctionStartPrice.sub(order.auctionEndPrice).mul(deltaNumerator).div(deltaDenominator);\n    }\n    let price;\n    if ((0, types_1.isVariant)(order.direction, \"long\")) {\n        price = order.auctionStartPrice.add(priceDelta);\n    } else {\n        price = order.auctionStartPrice.sub(priceDelta);\n    }\n    return price;\n}\nexports.getAuctionPriceForFixedAuction = getAuctionPriceForFixedAuction;\nfunction getAuctionPriceForOracleOffsetAuction(order, slot, oraclePrice) {\n    const slotsElapsed = new _1.BN(slot).sub(order.slot);\n    const deltaDenominator = new _1.BN(order.auctionDuration);\n    const deltaNumerator = _1.BN.min(slotsElapsed, deltaDenominator);\n    if (deltaDenominator.eq(_1.ZERO)) {\n        return oraclePrice.add(order.auctionEndPrice);\n    }\n    let priceOffsetDelta;\n    if ((0, types_1.isVariant)(order.direction, \"long\")) {\n        priceOffsetDelta = order.auctionEndPrice.sub(order.auctionStartPrice).mul(deltaNumerator).div(deltaDenominator);\n    } else {\n        priceOffsetDelta = order.auctionStartPrice.sub(order.auctionEndPrice).mul(deltaNumerator).div(deltaDenominator);\n    }\n    let priceOffset;\n    if ((0, types_1.isVariant)(order.direction, \"long\")) {\n        priceOffset = order.auctionStartPrice.add(priceOffsetDelta);\n    } else {\n        priceOffset = order.auctionStartPrice.sub(priceOffsetDelta);\n    }\n    return oraclePrice.add(priceOffset);\n}\nexports.getAuctionPriceForOracleOffsetAuction = getAuctionPriceForOracleOffsetAuction;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2F1Y3Rpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDZDQUE2QyxHQUFHQSxzQ0FBc0MsR0FBR0EsdUJBQXVCLEdBQUdBLDBDQUEwQyxHQUFHQSx5QkFBeUIsR0FBRyxLQUFLO0FBQ2pNLE1BQU1PLFVBQVVDLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLE1BQU1DLEtBQUtELG1CQUFPQSxDQUFDLCtEQUFNO0FBQ3pCLFNBQVNGLGtCQUFrQkksS0FBSyxFQUFFQyxJQUFJO0lBQ2xDLElBQUlELE1BQU1FLGVBQWUsS0FBSyxHQUFHO1FBQzdCLE9BQU87SUFDWDtJQUNBLE9BQU8sSUFBSUgsR0FBR0ksRUFBRSxDQUFDRixNQUFNRyxHQUFHLENBQUNKLE1BQU1DLElBQUksRUFBRUksRUFBRSxDQUFDLElBQUlOLEdBQUdJLEVBQUUsQ0FBQ0gsTUFBTUUsZUFBZTtBQUM3RTtBQUNBWix5QkFBeUIsR0FBR007QUFDNUIsU0FBU0QsbUNBQW1DSyxLQUFLLEVBQUVNLGtCQUFrQixFQUFFTCxJQUFJO0lBQ3ZFLElBQUlLLHVCQUF1QixHQUFHO1FBQzFCLE9BQU87SUFDWDtJQUNBLE9BQU8sSUFBSVAsR0FBR0ksRUFBRSxDQUFDRixNQUFNRyxHQUFHLENBQUNKLE1BQU1DLElBQUksRUFBRUksRUFBRSxDQUFDLElBQUlOLEdBQUdJLEVBQUUsQ0FBQ0c7QUFDeEQ7QUFDQWhCLDBDQUEwQyxHQUFHSztBQUM3QyxTQUFTRCxnQkFBZ0JNLEtBQUssRUFBRUMsSUFBSSxFQUFFTSxXQUFXO0lBQzdDLElBQUksQ0FBQyxHQUFHVixRQUFRVyxjQUFjLEVBQUVSLE1BQU1TLFNBQVMsRUFBRTtRQUFDO1FBQVU7UUFBaUI7S0FBUSxHQUFHO1FBQ3BGLE9BQU9oQiwrQkFBK0JPLE9BQU9DO0lBQ2pELE9BQ0ssSUFBSSxDQUFDLEdBQUdK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YnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvbWF0aC9hdWN0aW9uLmpzP2YxNzYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldEF1Y3Rpb25QcmljZUZvck9yYWNsZU9mZnNldEF1Y3Rpb24gPSBleHBvcnRzLmdldEF1Y3Rpb25QcmljZUZvckZpeGVkQXVjdGlvbiA9IGV4cG9ydHMuZ2V0QXVjdGlvblByaWNlID0gZXhwb3J0cy5pc0ZhbGxiYWNrQXZhaWxhYmxlTGlxdWlkaXR5U291cmNlID0gZXhwb3J0cy5pc0F1Y3Rpb25Db21wbGV0ZSA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5jb25zdCBfMSA9IHJlcXVpcmUoXCIuLi8uXCIpO1xuZnVuY3Rpb24gaXNBdWN0aW9uQ29tcGxldGUob3JkZXIsIHNsb3QpIHtcbiAgICBpZiAob3JkZXIuYXVjdGlvbkR1cmF0aW9uID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IF8xLkJOKHNsb3QpLnN1YihvcmRlci5zbG90KS5ndChuZXcgXzEuQk4ob3JkZXIuYXVjdGlvbkR1cmF0aW9uKSk7XG59XG5leHBvcnRzLmlzQXVjdGlvbkNvbXBsZXRlID0gaXNBdWN0aW9uQ29tcGxldGU7XG5mdW5jdGlvbiBpc0ZhbGxiYWNrQXZhaWxhYmxlTGlxdWlkaXR5U291cmNlKG9yZGVyLCBtaW5BdWN0aW9uRHVyYXRpb24sIHNsb3QpIHtcbiAgICBpZiAobWluQXVjdGlvbkR1cmF0aW9uID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IF8xLkJOKHNsb3QpLnN1YihvcmRlci5zbG90KS5ndChuZXcgXzEuQk4obWluQXVjdGlvbkR1cmF0aW9uKSk7XG59XG5leHBvcnRzLmlzRmFsbGJhY2tBdmFpbGFibGVMaXF1aWRpdHlTb3VyY2UgPSBpc0ZhbGxiYWNrQXZhaWxhYmxlTGlxdWlkaXR5U291cmNlO1xuZnVuY3Rpb24gZ2V0QXVjdGlvblByaWNlKG9yZGVyLCBzbG90LCBvcmFjbGVQcmljZSkge1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc09uZU9mVmFyaWFudCkob3JkZXIub3JkZXJUeXBlLCBbJ21hcmtldCcsICd0cmlnZ2VyTWFya2V0JywgJ2xpbWl0J10pKSB7XG4gICAgICAgIHJldHVybiBnZXRBdWN0aW9uUHJpY2VGb3JGaXhlZEF1Y3Rpb24ob3JkZXIsIHNsb3QpO1xuICAgIH1cbiAgICBlbHNlIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yZGVyLm9yZGVyVHlwZSwgJ29yYWNsZScpKSB7XG4gICAgICAgIHJldHVybiBnZXRBdWN0aW9uUHJpY2VGb3JPcmFjbGVPZmZzZXRBdWN0aW9uKG9yZGVyLCBzbG90LCBvcmFjbGVQcmljZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBFcnJvcihgQ2FudCBnZXQgYXVjdGlvbiBwcmljZSBmb3Igb3JkZXIgdHlwZSAke29yZGVyLm9yZGVyVHlwZX1gKTtcbiAgICB9XG59XG5leHBvcnRzLmdldEF1Y3Rpb25QcmljZSA9IGdldEF1Y3Rpb25QcmljZTtcbmZ1bmN0aW9uIGdldEF1Y3Rpb25QcmljZUZvckZpeGVkQXVjdGlvbihvcmRlciwgc2xvdCkge1xuICAgIGNvbnN0IHNsb3RzRWxhcHNlZCA9IG5ldyBfMS5CTihzbG90KS5zdWIob3JkZXIuc2xvdCk7XG4gICAgY29uc3QgZGVsdGFEZW5vbWluYXRvciA9IG5ldyBfMS5CTihvcmRlci5hdWN0aW9uRHVyYXRpb24pO1xuICAgIGNvbnN0IGRlbHRhTnVtZXJhdG9yID0gXzEuQk4ubWluKHNsb3RzRWxhcHNlZCwgZGVsdGFEZW5vbWluYXRvcik7XG4gICAgaWYgKGRlbHRhRGVub21pbmF0b3IuZXEoXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIG9yZGVyLmF1Y3Rpb25FbmRQcmljZTtcbiAgICB9XG4gICAgbGV0IHByaWNlRGVsdGE7XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkob3JkZXIuZGlyZWN0aW9uLCAnbG9uZycpKSB7XG4gICAgICAgIHByaWNlRGVsdGEgPSBvcmRlci5hdWN0aW9uRW5kUHJpY2VcbiAgICAgICAgICAgIC5zdWIob3JkZXIuYXVjdGlvblN0YXJ0UHJpY2UpXG4gICAgICAgICAgICAubXVsKGRlbHRhTnVtZXJhdG9yKVxuICAgICAgICAgICAgLmRpdihkZWx0YURlbm9taW5hdG9yKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByaWNlRGVsdGEgPSBvcmRlci5hdWN0aW9uU3RhcnRQcmljZVxuICAgICAgICAgICAgLnN1YihvcmRlci5hdWN0aW9uRW5kUHJpY2UpXG4gICAgICAgICAgICAubXVsKGRlbHRhTnVtZXJhdG9yKVxuICAgICAgICAgICAgLmRpdihkZWx0YURlbm9taW5hdG9yKTtcbiAgICB9XG4gICAgbGV0IHByaWNlO1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yZGVyLmRpcmVjdGlvbiwgJ2xvbmcnKSkge1xuICAgICAgICBwcmljZSA9IG9yZGVyLmF1Y3Rpb25TdGFydFByaWNlLmFkZChwcmljZURlbHRhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByaWNlID0gb3JkZXIuYXVjdGlvblN0YXJ0UHJpY2Uuc3ViKHByaWNlRGVsdGEpO1xuICAgIH1cbiAgICByZXR1cm4gcHJpY2U7XG59XG5leHBvcnRzLmdldEF1Y3Rpb25QcmljZUZvckZpeGVkQXVjdGlvbiA9IGdldEF1Y3Rpb25QcmljZUZvckZpeGVkQXVjdGlvbjtcbmZ1bmN0aW9uIGdldEF1Y3Rpb25QcmljZUZvck9yYWNsZU9mZnNldEF1Y3Rpb24ob3JkZXIsIHNsb3QsIG9yYWNsZVByaWNlKSB7XG4gICAgY29uc3Qgc2xvdHNFbGFwc2VkID0gbmV3IF8xLkJOKHNsb3QpLnN1YihvcmRlci5zbG90KTtcbiAgICBjb25zdCBkZWx0YURlbm9taW5hdG9yID0gbmV3IF8xLkJOKG9yZGVyLmF1Y3Rpb25EdXJhdGlvbik7XG4gICAgY29uc3QgZGVsdGFOdW1lcmF0b3IgPSBfMS5CTi5taW4oc2xvdHNFbGFwc2VkLCBkZWx0YURlbm9taW5hdG9yKTtcbiAgICBpZiAoZGVsdGFEZW5vbWluYXRvci5lcShfMS5aRVJPKSkge1xuICAgICAgICByZXR1cm4gb3JhY2xlUHJpY2UuYWRkKG9yZGVyLmF1Y3Rpb25FbmRQcmljZSk7XG4gICAgfVxuICAgIGxldCBwcmljZU9mZnNldERlbHRhO1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yZGVyLmRpcmVjdGlvbiwgJ2xvbmcnKSkge1xuICAgICAgICBwcmljZU9mZnNldERlbHRhID0gb3JkZXIuYXVjdGlvbkVuZFByaWNlXG4gICAgICAgICAgICAuc3ViKG9yZGVyLmF1Y3Rpb25TdGFydFByaWNlKVxuICAgICAgICAgICAgLm11bChkZWx0YU51bWVyYXRvcilcbiAgICAgICAgICAgIC5kaXYoZGVsdGFEZW5vbWluYXRvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcmljZU9mZnNldERlbHRhID0gb3JkZXIuYXVjdGlvblN0YXJ0UHJpY2VcbiAgICAgICAgICAgIC5zdWIob3JkZXIuYXVjdGlvbkVuZFByaWNlKVxuICAgICAgICAgICAgLm11bChkZWx0YU51bWVyYXRvcilcbiAgICAgICAgICAgIC5kaXYoZGVsdGFEZW5vbWluYXRvcik7XG4gICAgfVxuICAgIGxldCBwcmljZU9mZnNldDtcbiAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5kaXJlY3Rpb24sICdsb25nJykpIHtcbiAgICAgICAgcHJpY2VPZmZzZXQgPSBvcmRlci5hdWN0aW9uU3RhcnRQcmljZS5hZGQocHJpY2VPZmZzZXREZWx0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcmljZU9mZnNldCA9IG9yZGVyLmF1Y3Rpb25TdGFydFByaWNlLnN1YihwcmljZU9mZnNldERlbHRhKTtcbiAgICB9XG4gICAgcmV0dXJuIG9yYWNsZVByaWNlLmFkZChwcmljZU9mZnNldCk7XG59XG5leHBvcnRzLmdldEF1Y3Rpb25QcmljZUZvck9yYWNsZU9mZnNldEF1Y3Rpb24gPSBnZXRBdWN0aW9uUHJpY2VGb3JPcmFjbGVPZmZzZXRBdWN0aW9uO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2V0QXVjdGlvblByaWNlRm9yT3JhY2xlT2Zmc2V0QXVjdGlvbiIsImdldEF1Y3Rpb25QcmljZUZvckZpeGVkQXVjdGlvbiIsImdldEF1Y3Rpb25QcmljZSIsImlzRmFsbGJhY2tBdmFpbGFibGVMaXF1aWRpdHlTb3VyY2UiLCJpc0F1Y3Rpb25Db21wbGV0ZSIsInR5cGVzXzEiLCJyZXF1aXJlIiwiXzEiLCJvcmRlciIsInNsb3QiLCJhdWN0aW9uRHVyYXRpb24iLCJCTiIsInN1YiIsImd0IiwibWluQXVjdGlvbkR1cmF0aW9uIiwib3JhY2xlUHJpY2UiLCJpc09uZU9mVmFyaWFudCIsIm9yZGVyVHlwZSIsImlzVmFyaWFudCIsIkVycm9yIiwic2xvdHNFbGFwc2VkIiwiZGVsdGFEZW5vbWluYXRvciIsImRlbHRhTnVtZXJhdG9yIiwibWluIiwiZXEiLCJaRVJPIiwiYXVjdGlvbkVuZFByaWNlIiwicHJpY2VEZWx0YSIsImRpcmVjdGlvbiIsImF1Y3Rpb25TdGFydFByaWNlIiwibXVsIiwiZGl2IiwicHJpY2UiLCJhZGQiLCJwcmljZU9mZnNldERlbHRhIiwicHJpY2VPZmZzZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/auction.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/bankruptcy.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/bankruptcy.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isUserBankrupt = void 0;\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nfunction isUserBankrupt(user) {\n    const userAccount = user.getUserAccount();\n    let hasLiability = false;\n    for (const position of userAccount.spotPositions){\n        if (position.scaledBalance.gt(__1.ZERO)) {\n            if ((0, __1.isVariant)(position.balanceType, \"deposit\")) {\n                return false;\n            }\n            if ((0, __1.isVariant)(position.balanceType, \"borrow\")) {\n                hasLiability = true;\n            }\n        }\n    }\n    for (const position of userAccount.perpPositions){\n        if (!position.baseAssetAmount.eq(__1.ZERO) || position.quoteAssetAmount.gt(__1.ZERO) || (0, __1.hasOpenOrders)(position) || position.lpShares.gt(__1.ZERO)) {\n            return false;\n        }\n        if (position.quoteAssetAmount.lt(__1.ZERO)) {\n            hasLiability = true;\n        }\n    }\n    return hasLiability;\n}\nexports.isUserBankrupt = isUserBankrupt;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2JhbmtydXB0Y3kuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNCQUFzQixHQUFHLEtBQUs7QUFDOUIsTUFBTUcsTUFBTUMsbUJBQU9BLENBQUMsNkRBQUk7QUFDeEIsU0FBU0YsZUFBZUcsSUFBSTtJQUN4QixNQUFNQyxjQUFjRCxLQUFLRSxjQUFjO0lBQ3ZDLElBQUlDLGVBQWU7SUFDbkIsS0FBSyxNQUFNQyxZQUFZSCxZQUFZSSxhQUFhLENBQUU7UUFDOUMsSUFBSUQsU0FBU0UsYUFBYSxDQUFDQyxFQUFFLENBQUNULElBQUlVLElBQUksR0FBRztZQUNyQyxJQUFJLENBQUMsR0FBR1YsSUFBSVcsU0FBUyxFQUFFTCxTQUFTTSxXQUFXLEVBQUUsWUFBWTtnQkFDckQsT0FBTztZQUNYO1lBQ0EsSUFBSSxDQUFDLEdBQUdaLElBQUlXLFNBQVMsRUFBRUwsU0FBU00sV0FBVyxFQUFFLFdBQVc7Z0JBQ3BEUCxlQUFlO1lBQ25CO1FBQ0o7SUFDSjtJQUNBLEtBQUssTUFBTUMsWUFBWUgsWUFBWVUsYUFBYSxDQUFFO1FBQzlDLElBQUksQ0FBQ1AsU0FBU1EsZUFBZSxDQUFDQyxFQUFFLENBQUNmLElBQUlVLElBQUksS0FDckNKLFNBQVNVLGdCQUFnQixDQUFDUCxFQUFFLENBQUNULElBQUlVLElBQUksS0FDckMsQ0FBQyxHQUFHVixJQUFJaUIsYUFBYSxFQUFFWCxhQUN2QkEsU0FBU1ksUUFBUSxDQUFDVCxFQUFFLENBQUNULElBQUlVLElBQUksR0FBRztZQUNoQyxPQUFPO1FBQ1g7UUFDQSxJQUFJSixTQUFTVSxnQkFBZ0IsQ0FBQ0csRUFBRSxDQUFDbkIsSUFBSVUsSUFBSSxHQUFHO1lBQ3hDTCxlQUFlO1FBQ25CO0lBQ0o7SUFDQSxPQUFPQTtBQUNYO0FBQ0FSLHNCQUFzQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2JhbmtydXB0Y3kuanM/MDUzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaXNVc2VyQmFua3J1cHQgPSB2b2lkIDA7XG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi5cIik7XG5mdW5jdGlvbiBpc1VzZXJCYW5rcnVwdCh1c2VyKSB7XG4gICAgY29uc3QgdXNlckFjY291bnQgPSB1c2VyLmdldFVzZXJBY2NvdW50KCk7XG4gICAgbGV0IGhhc0xpYWJpbGl0eSA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgdXNlckFjY291bnQuc3BvdFBvc2l0aW9ucykge1xuICAgICAgICBpZiAocG9zaXRpb24uc2NhbGVkQmFsYW5jZS5ndChfXzEuWkVSTykpIHtcbiAgICAgICAgICAgIGlmICgoMCwgX18xLmlzVmFyaWFudCkocG9zaXRpb24uYmFsYW5jZVR5cGUsICdkZXBvc2l0JykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKDAsIF9fMS5pc1ZhcmlhbnQpKHBvc2l0aW9uLmJhbGFuY2VUeXBlLCAnYm9ycm93JykpIHtcbiAgICAgICAgICAgICAgICBoYXNMaWFiaWxpdHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgcG9zaXRpb24gb2YgdXNlckFjY291bnQucGVycFBvc2l0aW9ucykge1xuICAgICAgICBpZiAoIXBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShfXzEuWkVSTykgfHxcbiAgICAgICAgICAgIHBvc2l0aW9uLnF1b3RlQXNzZXRBbW91bnQuZ3QoX18xLlpFUk8pIHx8XG4gICAgICAgICAgICAoMCwgX18xLmhhc09wZW5PcmRlcnMpKHBvc2l0aW9uKSB8fFxuICAgICAgICAgICAgcG9zaXRpb24ubHBTaGFyZXMuZ3QoX18xLlpFUk8pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uLnF1b3RlQXNzZXRBbW91bnQubHQoX18xLlpFUk8pKSB7XG4gICAgICAgICAgICBoYXNMaWFiaWxpdHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoYXNMaWFiaWxpdHk7XG59XG5leHBvcnRzLmlzVXNlckJhbmtydXB0ID0gaXNVc2VyQmFua3J1cHQ7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJpc1VzZXJCYW5rcnVwdCIsIl9fMSIsInJlcXVpcmUiLCJ1c2VyIiwidXNlckFjY291bnQiLCJnZXRVc2VyQWNjb3VudCIsImhhc0xpYWJpbGl0eSIsInBvc2l0aW9uIiwic3BvdFBvc2l0aW9ucyIsInNjYWxlZEJhbGFuY2UiLCJndCIsIlpFUk8iLCJpc1ZhcmlhbnQiLCJiYWxhbmNlVHlwZSIsInBlcnBQb3NpdGlvbnMiLCJiYXNlQXNzZXRBbW91bnQiLCJlcSIsInF1b3RlQXNzZXRBbW91bnQiLCJoYXNPcGVuT3JkZXJzIiwibHBTaGFyZXMiLCJsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/bankruptcy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/conversion.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/conversion.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.convertToNumber = void 0;\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst convertToNumber = (bigNumber, precision = numericConstants_1.PRICE_PRECISION)=>{\n    if (!bigNumber) return 0;\n    return bigNumber.div(precision).toNumber() + bigNumber.mod(precision).toNumber() / precision.toNumber();\n};\nexports.convertToNumber = convertToNumber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2NvbnZlcnNpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHLEtBQUs7QUFDL0IsTUFBTUcscUJBQXFCQyxtQkFBT0EsQ0FBQyw2R0FBK0I7QUFDbEUsTUFBTUYsa0JBQWtCLENBQUNHLFdBQVdDLFlBQVlILG1CQUFtQkksZUFBZTtJQUM5RSxJQUFJLENBQUNGLFdBQ0QsT0FBTztJQUNYLE9BQVFBLFVBQVVHLEdBQUcsQ0FBQ0YsV0FBV0csUUFBUSxLQUNyQ0osVUFBVUssR0FBRyxDQUFDSixXQUFXRyxRQUFRLEtBQUtILFVBQVVHLFFBQVE7QUFDaEU7QUFDQVQsdUJBQXVCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvY29udmVyc2lvbi5qcz8yY2Q1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jb252ZXJ0VG9OdW1iZXIgPSB2b2lkIDA7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5jb25zdCBjb252ZXJ0VG9OdW1iZXIgPSAoYmlnTnVtYmVyLCBwcmVjaXNpb24gPSBudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKSA9PiB7XG4gICAgaWYgKCFiaWdOdW1iZXIpXG4gICAgICAgIHJldHVybiAwO1xuICAgIHJldHVybiAoYmlnTnVtYmVyLmRpdihwcmVjaXNpb24pLnRvTnVtYmVyKCkgK1xuICAgICAgICBiaWdOdW1iZXIubW9kKHByZWNpc2lvbikudG9OdW1iZXIoKSAvIHByZWNpc2lvbi50b051bWJlcigpKTtcbn07XG5leHBvcnRzLmNvbnZlcnRUb051bWJlciA9IGNvbnZlcnRUb051bWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNvbnZlcnRUb051bWJlciIsIm51bWVyaWNDb25zdGFudHNfMSIsInJlcXVpcmUiLCJiaWdOdW1iZXIiLCJwcmVjaXNpb24iLCJQUklDRV9QUkVDSVNJT04iLCJkaXYiLCJ0b051bWJlciIsIm1vZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/conversion.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/exchangeStatus.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/exchangeStatus.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.ammPaused = exports.fillPaused = exports.exchangePaused = void 0;\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nfunction exchangePaused(state) {\n    return state.exchangeStatus !== types_1.ExchangeStatus.ACTIVE;\n}\nexports.exchangePaused = exchangePaused;\nfunction fillPaused(state, market) {\n    return (state.exchangeStatus & types_1.ExchangeStatus.FILL_PAUSED) === types_1.ExchangeStatus.FILL_PAUSED || (0, types_1.isOneOfVariant)(market.status, [\n        \"paused\",\n        \"fillPaused\"\n    ]);\n}\nexports.fillPaused = fillPaused;\nfunction ammPaused(state, market) {\n    return (state.exchangeStatus & types_1.ExchangeStatus.AMM_PAUSED) === types_1.ExchangeStatus.AMM_PAUSED || (0, types_1.isOneOfVariant)(market.status, [\n        \"paused\",\n        \"ammPaused\"\n    ]);\n}\nexports.ammPaused = ammPaused;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2V4Y2hhbmdlU3RhdHVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQkFBaUIsR0FBR0Esa0JBQWtCLEdBQUdBLHNCQUFzQixHQUFHLEtBQUs7QUFDdkUsTUFBTUssVUFBVUMsbUJBQU9BLENBQUMsbUVBQVU7QUFDbEMsU0FBU0YsZUFBZUcsS0FBSztJQUN6QixPQUFPQSxNQUFNQyxjQUFjLEtBQUtILFFBQVFJLGNBQWMsQ0FBQ0MsTUFBTTtBQUNqRTtBQUNBVixzQkFBc0IsR0FBR0k7QUFDekIsU0FBU0QsV0FBV0ksS0FBSyxFQUFFSSxNQUFNO0lBQzdCLE9BQVEsQ0FBQ0osTUFBTUMsY0FBYyxHQUFHSCxRQUFRSSxjQUFjLENBQUNHLFdBQVcsTUFDOURQLFFBQVFJLGNBQWMsQ0FBQ0csV0FBVyxJQUNsQyxDQUFDLEdBQUdQLFFBQVFRLGNBQWMsRUFBRUYsT0FBT0csTUFBTSxFQUFFO1FBQUM7UUFBVTtLQUFhO0FBQzNFO0FBQ0FkLGtCQUFrQixHQUFHRztBQUNyQixTQUFTRCxVQUFVSyxLQUFLLEVBQUVJLE1BQU07SUFDNUIsT0FBUSxDQUFDSixNQUFNQyxjQUFjLEdBQUdILFFBQVFJLGNBQWMsQ0FBQ00sVUFBVSxNQUM3RFYsUUFBUUksY0FBYyxDQUFDTSxVQUFVLElBQ2pDLENBQUMsR0FBR1YsUUFBUVEsY0FBYyxFQUFFRixPQUFPRyxNQUFNLEVBQUU7UUFBQztRQUFVO0tBQVk7QUFDMUU7QUFDQWQsaUJBQWlCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvZXhjaGFuZ2VTdGF0dXMuanM/YjM4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuYW1tUGF1c2VkID0gZXhwb3J0cy5maWxsUGF1c2VkID0gZXhwb3J0cy5leGNoYW5nZVBhdXNlZCA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5mdW5jdGlvbiBleGNoYW5nZVBhdXNlZChzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5leGNoYW5nZVN0YXR1cyAhPT0gdHlwZXNfMS5FeGNoYW5nZVN0YXR1cy5BQ1RJVkU7XG59XG5leHBvcnRzLmV4Y2hhbmdlUGF1c2VkID0gZXhjaGFuZ2VQYXVzZWQ7XG5mdW5jdGlvbiBmaWxsUGF1c2VkKHN0YXRlLCBtYXJrZXQpIHtcbiAgICByZXR1cm4gKChzdGF0ZS5leGNoYW5nZVN0YXR1cyAmIHR5cGVzXzEuRXhjaGFuZ2VTdGF0dXMuRklMTF9QQVVTRUQpID09PVxuICAgICAgICB0eXBlc18xLkV4Y2hhbmdlU3RhdHVzLkZJTExfUEFVU0VEIHx8XG4gICAgICAgICgwLCB0eXBlc18xLmlzT25lT2ZWYXJpYW50KShtYXJrZXQuc3RhdHVzLCBbJ3BhdXNlZCcsICdmaWxsUGF1c2VkJ10pKTtcbn1cbmV4cG9ydHMuZmlsbFBhdXNlZCA9IGZpbGxQYXVzZWQ7XG5mdW5jdGlvbiBhbW1QYXVzZWQoc3RhdGUsIG1hcmtldCkge1xuICAgIHJldHVybiAoKHN0YXRlLmV4Y2hhbmdlU3RhdHVzICYgdHlwZXNfMS5FeGNoYW5nZVN0YXR1cy5BTU1fUEFVU0VEKSA9PT1cbiAgICAgICAgdHlwZXNfMS5FeGNoYW5nZVN0YXR1cy5BTU1fUEFVU0VEIHx8XG4gICAgICAgICgwLCB0eXBlc18xLmlzT25lT2ZWYXJpYW50KShtYXJrZXQuc3RhdHVzLCBbJ3BhdXNlZCcsICdhbW1QYXVzZWQnXSkpO1xufVxuZXhwb3J0cy5hbW1QYXVzZWQgPSBhbW1QYXVzZWQ7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJhbW1QYXVzZWQiLCJmaWxsUGF1c2VkIiwiZXhjaGFuZ2VQYXVzZWQiLCJ0eXBlc18xIiwicmVxdWlyZSIsInN0YXRlIiwiZXhjaGFuZ2VTdGF0dXMiLCJFeGNoYW5nZVN0YXR1cyIsIkFDVElWRSIsIm1hcmtldCIsIkZJTExfUEFVU0VEIiwiaXNPbmVPZlZhcmlhbnQiLCJzdGF0dXMiLCJBTU1fUEFVU0VEIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/exchangeStatus.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/funding.js":
/*!**********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/funding.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateFundingPool = exports.calculateLongShortFundingRateAndLiveTwaps = exports.calculateLongShortFundingRate = exports.calculateAllEstimatedFundingRate = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst amm_1 = __webpack_require__(/*! ./amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\");\nconst oracles_1 = __webpack_require__(/*! ./oracles */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/oracles.js\");\nfunction calculateLiveMarkTwap(market, oraclePriceData, markPrice, now, period = new anchor_1.BN(3600)) {\n    now = now || new anchor_1.BN((Date.now() / 1000).toFixed(0));\n    const lastMarkTwapWithMantissa = market.amm.lastMarkPriceTwap;\n    const lastMarkPriceTwapTs = market.amm.lastMarkPriceTwapTs;\n    const timeSinceLastMarkChange = now.sub(lastMarkPriceTwapTs);\n    const markTwapTimeSinceLastUpdate = anchor_1.BN.max(period, anchor_1.BN.max(numericConstants_1.ZERO, period.sub(timeSinceLastMarkChange)));\n    if (!markPrice) {\n        const [bid, ask] = (0, amm_1.calculateBidAskPrice)(market.amm, oraclePriceData);\n        markPrice = bid.add(ask).div(new anchor_1.BN(2));\n    }\n    const markTwapWithMantissa = markTwapTimeSinceLastUpdate.mul(lastMarkTwapWithMantissa).add(timeSinceLastMarkChange.mul(markPrice)).div(timeSinceLastMarkChange.add(markTwapTimeSinceLastUpdate));\n    return markTwapWithMantissa;\n}\nfunction shrinkStaleTwaps(market, markTwapWithMantissa, oracleTwapWithMantissa, now) {\n    now = now || new anchor_1.BN((Date.now() / 1000).toFixed(0));\n    let newMarkTwap = markTwapWithMantissa;\n    let newOracleTwap = oracleTwapWithMantissa;\n    if (market.amm.lastMarkPriceTwapTs.gt(market.amm.historicalOracleData.lastOraclePriceTwapTs)) {\n        // shrink oracle based on invalid intervals\n        const oracleInvalidDuration = anchor_1.BN.max(numericConstants_1.ZERO, market.amm.lastMarkPriceTwapTs.sub(market.amm.historicalOracleData.lastOraclePriceTwapTs));\n        const timeSinceLastOracleTwapUpdate = now.sub(market.amm.historicalOracleData.lastOraclePriceTwapTs);\n        const oracleTwapTimeSinceLastUpdate = anchor_1.BN.max(numericConstants_1.ONE, anchor_1.BN.min(market.amm.fundingPeriod, anchor_1.BN.max(numericConstants_1.ONE, market.amm.fundingPeriod.sub(timeSinceLastOracleTwapUpdate))));\n        newOracleTwap = oracleTwapTimeSinceLastUpdate.mul(oracleTwapWithMantissa).add(oracleInvalidDuration.mul(markTwapWithMantissa)).div(oracleTwapTimeSinceLastUpdate.add(oracleInvalidDuration));\n    } else if (market.amm.lastMarkPriceTwapTs.lt(market.amm.historicalOracleData.lastOraclePriceTwapTs)) {\n        // shrink mark to oracle twap over tradless intervals\n        const tradelessDuration = anchor_1.BN.max(numericConstants_1.ZERO, market.amm.historicalOracleData.lastOraclePriceTwapTs.sub(market.amm.lastMarkPriceTwapTs));\n        const timeSinceLastMarkTwapUpdate = now.sub(market.amm.lastMarkPriceTwapTs);\n        const markTwapTimeSinceLastUpdate = anchor_1.BN.max(numericConstants_1.ONE, anchor_1.BN.min(market.amm.fundingPeriod, anchor_1.BN.max(numericConstants_1.ONE, market.amm.fundingPeriod.sub(timeSinceLastMarkTwapUpdate))));\n        newMarkTwap = markTwapTimeSinceLastUpdate.mul(markTwapWithMantissa).add(tradelessDuration.mul(oracleTwapWithMantissa)).div(markTwapTimeSinceLastUpdate.add(tradelessDuration));\n    }\n    return [\n        newMarkTwap,\n        newOracleTwap\n    ];\n}\n/**\n *\n * @param market\n * @param oraclePriceData\n * @param periodAdjustment\n * @returns Estimated funding rate. : Precision //TODO-PRECISION\n */ async function calculateAllEstimatedFundingRate(market, oraclePriceData, markPrice, now) {\n    if ((0, types_1.isVariant)(market.status, \"uninitialized\")) {\n        return [\n            numericConstants_1.ZERO,\n            numericConstants_1.ZERO,\n            numericConstants_1.ZERO,\n            numericConstants_1.ZERO,\n            numericConstants_1.ZERO\n        ];\n    }\n    // todo: sufficiently differs from blockchain timestamp?\n    now = now || new anchor_1.BN((Date.now() / 1000).toFixed(0));\n    // calculate real-time mark and oracle twap\n    const liveMarkTwap = calculateLiveMarkTwap(market, oraclePriceData, markPrice, now, market.amm.fundingPeriod);\n    const liveOracleTwap = (0, oracles_1.calculateLiveOracleTwap)(market.amm.historicalOracleData, oraclePriceData, now, market.amm.fundingPeriod);\n    const [markTwap, oracleTwap] = shrinkStaleTwaps(market, liveMarkTwap, liveOracleTwap, now);\n    // if(!markTwap.eq(liveMarkTwap)){\n    // \tconsole.log('shrink mark:', liveMarkTwap.toString(), '->', markTwap.toString());\n    // }\n    // if(!oracleTwap.eq(liveOracleTwap)){\n    // \tconsole.log('shrink orac:', liveOracleTwap.toString(), '->', oracleTwap.toString());\n    // }\n    const twapSpread = markTwap.sub(oracleTwap);\n    const twapSpreadPct = twapSpread.mul(numericConstants_1.PRICE_PRECISION).mul(new anchor_1.BN(100)).div(oracleTwap);\n    const secondsInHour = new anchor_1.BN(3600);\n    const hoursInDay = new anchor_1.BN(24);\n    const timeSinceLastUpdate = now.sub(market.amm.lastFundingRateTs);\n    const lowerboundEst = twapSpreadPct.mul(market.amm.fundingPeriod).mul(anchor_1.BN.min(secondsInHour, timeSinceLastUpdate)).div(secondsInHour).div(secondsInHour).div(hoursInDay);\n    const interpEst = twapSpreadPct.div(hoursInDay);\n    const interpRateQuote = twapSpreadPct.div(hoursInDay).div(numericConstants_1.PRICE_PRECISION.div(numericConstants_1.QUOTE_PRECISION));\n    let feePoolSize = calculateFundingPool(market);\n    if (interpRateQuote.lt(new anchor_1.BN(0))) {\n        feePoolSize = feePoolSize.mul(new anchor_1.BN(-1));\n    }\n    let cappedAltEst;\n    let largerSide;\n    let smallerSide;\n    if (market.amm.baseAssetAmountLong.gt(market.amm.baseAssetAmountShort.abs())) {\n        largerSide = market.amm.baseAssetAmountLong.abs();\n        smallerSide = market.amm.baseAssetAmountShort.abs();\n        if (twapSpread.gt(new anchor_1.BN(0))) {\n            return [\n                markTwap,\n                oracleTwap,\n                lowerboundEst,\n                interpEst,\n                interpEst\n            ];\n        }\n    } else if (market.amm.baseAssetAmountLong.lt(market.amm.baseAssetAmountShort.abs())) {\n        largerSide = market.amm.baseAssetAmountShort.abs();\n        smallerSide = market.amm.baseAssetAmountLong.abs();\n        if (twapSpread.lt(new anchor_1.BN(0))) {\n            return [\n                markTwap,\n                oracleTwap,\n                lowerboundEst,\n                interpEst,\n                interpEst\n            ];\n        }\n    } else {\n        return [\n            markTwap,\n            oracleTwap,\n            lowerboundEst,\n            interpEst,\n            interpEst\n        ];\n    }\n    if (largerSide.gt(numericConstants_1.ZERO)) {\n        // funding smaller flow\n        cappedAltEst = smallerSide.mul(twapSpread).div(hoursInDay);\n        const feePoolTopOff = feePoolSize.mul(numericConstants_1.PRICE_PRECISION.div(numericConstants_1.QUOTE_PRECISION)).mul(numericConstants_1.AMM_RESERVE_PRECISION);\n        cappedAltEst = cappedAltEst.add(feePoolTopOff).div(largerSide);\n        cappedAltEst = cappedAltEst.mul(numericConstants_1.PRICE_PRECISION).mul(new anchor_1.BN(100)).div(oracleTwap);\n        if (cappedAltEst.abs().gte(interpEst.abs())) {\n            cappedAltEst = interpEst;\n        }\n    } else {\n        cappedAltEst = interpEst;\n    }\n    return [\n        markTwap,\n        oracleTwap,\n        lowerboundEst,\n        cappedAltEst,\n        interpEst\n    ];\n}\nexports.calculateAllEstimatedFundingRate = calculateAllEstimatedFundingRate;\n/**\n *\n * @param market\n * @param oraclePriceData\n * @param periodAdjustment\n * @returns Estimated funding rate. : Precision //TODO-PRECISION\n */ async function calculateLongShortFundingRate(market, oraclePriceData, markPrice, now) {\n    const [_1, _2, _, cappedAltEst, interpEst] = await calculateAllEstimatedFundingRate(market, oraclePriceData, markPrice, now);\n    if (market.amm.baseAssetAmountLong.gt(market.amm.baseAssetAmountShort)) {\n        return [\n            cappedAltEst,\n            interpEst\n        ];\n    } else if (market.amm.baseAssetAmountLong.lt(market.amm.baseAssetAmountShort)) {\n        return [\n            interpEst,\n            cappedAltEst\n        ];\n    } else {\n        return [\n            interpEst,\n            interpEst\n        ];\n    }\n}\nexports.calculateLongShortFundingRate = calculateLongShortFundingRate;\n/**\n *\n * @param market\n * @param oraclePriceData\n * @param periodAdjustment\n * @returns Estimated funding rate. : Precision //TODO-PRECISION\n */ async function calculateLongShortFundingRateAndLiveTwaps(market, oraclePriceData, markPrice, now) {\n    const [markTwapLive, oracleTwapLive, _2, cappedAltEst, interpEst] = await calculateAllEstimatedFundingRate(market, oraclePriceData, markPrice, now);\n    if (market.amm.baseAssetAmountLong.gt(market.amm.baseAssetAmountShort.abs())) {\n        return [\n            markTwapLive,\n            oracleTwapLive,\n            cappedAltEst,\n            interpEst\n        ];\n    } else if (market.amm.baseAssetAmountLong.lt(market.amm.baseAssetAmountShort.abs())) {\n        return [\n            markTwapLive,\n            oracleTwapLive,\n            interpEst,\n            cappedAltEst\n        ];\n    } else {\n        return [\n            markTwapLive,\n            oracleTwapLive,\n            interpEst,\n            interpEst\n        ];\n    }\n}\nexports.calculateLongShortFundingRateAndLiveTwaps = calculateLongShortFundingRateAndLiveTwaps;\n/**\n *\n * @param market\n * @returns Estimated fee pool size\n */ function calculateFundingPool(market) {\n    // todo\n    const totalFeeLB = market.amm.totalExchangeFee.div(new anchor_1.BN(2));\n    const feePool = anchor_1.BN.max(numericConstants_1.ZERO, market.amm.totalFeeMinusDistributions.sub(totalFeeLB).mul(new anchor_1.BN(1)).div(new anchor_1.BN(3)));\n    return feePool;\n}\nexports.calculateFundingPool = calculateFundingPool;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2Z1bmRpbmcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDRCQUE0QixHQUFHQSxpREFBaUQsR0FBR0EscUNBQXFDLEdBQUdBLHdDQUF3QyxHQUFHLEtBQUs7QUFDM0ssTUFBTU0sV0FBV0MsbUJBQU9BLENBQUMsbUZBQW1CO0FBQzVDLE1BQU1DLHFCQUFxQkQsbUJBQU9BLENBQUMsNkdBQStCO0FBQ2xFLE1BQU1FLFVBQVVGLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLE1BQU1HLFFBQVFILG1CQUFPQSxDQUFDLG1FQUFPO0FBQzdCLE1BQU1JLFlBQVlKLG1CQUFPQSxDQUFDLDJFQUFXO0FBQ3JDLFNBQVNLLHNCQUFzQkMsTUFBTSxFQUFFQyxlQUFlLEVBQUVDLFNBQVMsRUFBRUMsR0FBRyxFQUFFQyxTQUFTLElBQUlYLFNBQVNZLEVBQUUsQ0FBQyxLQUFLO0lBQ2xHRixNQUFNQSxPQUFPLElBQUlWLFNBQVNZLEVBQUUsQ0FBQyxDQUFDQyxLQUFLSCxHQUFHLEtBQUssSUFBRyxFQUFHSSxPQUFPLENBQUM7SUFDekQsTUFBTUMsMkJBQTJCUixPQUFPUyxHQUFHLENBQUNDLGlCQUFpQjtJQUM3RCxNQUFNQyxzQkFBc0JYLE9BQU9TLEdBQUcsQ0FBQ0UsbUJBQW1CO0lBQzFELE1BQU1DLDBCQUEwQlQsSUFBSVUsR0FBRyxDQUFDRjtJQUN4QyxNQUFNRyw4QkFBOEJyQixTQUFTWSxFQUFFLENBQUNVLEdBQUcsQ0FBQ1gsUUFBUVgsU0FBU1ksRUFBRSxDQUFDVSxHQUFHLENBQUNwQixtQkFBbUJxQixJQUFJLEVBQUVaLE9BQU9TLEdBQUcsQ0FBQ0Q7SUFDaEgsSUFBSSxDQUFDVixXQUFXO1FBQ1osTUFBTSxDQUFDZSxLQUFLQyxJQUFJLEdBQUcsQ0FBQyxHQUFHckIsTUFBTXNCLG9CQUFvQixFQUFFbkIsT0FBT1Ms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LEdBQUcsS0FBSztRQUMvRSxPQUFPO1lBQUNPO1lBQWNDO1lBQWdCakI7WUFBV0k7U0FBYTtJQUNsRSxPQUNLO1FBQ0QsT0FBTztZQUFDWTtZQUFjQztZQUFnQmpCO1lBQVdBO1NBQVU7SUFDL0Q7QUFDSjtBQUNBcEUsaURBQWlELEdBQUdHO0FBQ3BEOzs7O0NBSUMsR0FDRCxTQUFTRCxxQkFBcUJXLE1BQU07SUFDaEMsT0FBTztJQUNQLE1BQU15RSxhQUFhekUsT0FBT1MsR0FBRyxDQUFDaUUsZ0JBQWdCLENBQUNyRCxHQUFHLENBQUMsSUFBSTVCLFNBQVNZLEVBQUUsQ0FBQztJQUNuRSxNQUFNc0UsVUFBVWxGLFNBQVNZLEVBQUUsQ0FBQ1UsR0FBRyxDQUFDcEIsbUJBQW1CcUIsSUFBSSxFQUFFaEIsT0FBT1MsR0FBRyxDQUFDbUUsMEJBQTBCLENBQ3pGL0QsR0FBRyxDQUFDNEQsWUFDSmxELEdBQUcsQ0FBQyxJQUFJOUIsU0FBU1ksRUFBRSxDQUFDLElBQ3BCZ0IsR0FBRyxDQUFDLElBQUk1QixTQUFTWSxFQUFFLENBQUM7SUFDekIsT0FBT3NFO0FBQ1g7QUFDQXhGLDRCQUE0QixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2Z1bmRpbmcuanM/NWYzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2FsY3VsYXRlRnVuZGluZ1Bvb2wgPSBleHBvcnRzLmNhbGN1bGF0ZUxvbmdTaG9ydEZ1bmRpbmdSYXRlQW5kTGl2ZVR3YXBzID0gZXhwb3J0cy5jYWxjdWxhdGVMb25nU2hvcnRGdW5kaW5nUmF0ZSA9IGV4cG9ydHMuY2FsY3VsYXRlQWxsRXN0aW1hdGVkRnVuZGluZ1JhdGUgPSB2b2lkIDA7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5jb25zdCBhbW1fMSA9IHJlcXVpcmUoXCIuL2FtbVwiKTtcbmNvbnN0IG9yYWNsZXNfMSA9IHJlcXVpcmUoXCIuL29yYWNsZXNcIik7XG5mdW5jdGlvbiBjYWxjdWxhdGVMaXZlTWFya1R3YXAobWFya2V0LCBvcmFjbGVQcmljZURhdGEsIG1hcmtQcmljZSwgbm93LCBwZXJpb2QgPSBuZXcgYW5jaG9yXzEuQk4oMzYwMCkpIHtcbiAgICBub3cgPSBub3cgfHwgbmV3IGFuY2hvcl8xLkJOKChEYXRlLm5vdygpIC8gMTAwMCkudG9GaXhlZCgwKSk7XG4gICAgY29uc3QgbGFzdE1hcmtUd2FwV2l0aE1hbnRpc3NhID0gbWFya2V0LmFtbS5sYXN0TWFya1ByaWNlVHdhcDtcbiAgICBjb25zdCBsYXN0TWFya1ByaWNlVHdhcFRzID0gbWFya2V0LmFtbS5sYXN0TWFya1ByaWNlVHdhcFRzO1xuICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RNYXJrQ2hhbmdlID0gbm93LnN1YihsYXN0TWFya1ByaWNlVHdhcFRzKTtcbiAgICBjb25zdCBtYXJrVHdhcFRpbWVTaW5jZUxhc3RVcGRhdGUgPSBhbmNob3JfMS5CTi5tYXgocGVyaW9kLCBhbmNob3JfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIHBlcmlvZC5zdWIodGltZVNpbmNlTGFzdE1hcmtDaGFuZ2UpKSk7XG4gICAgaWYgKCFtYXJrUHJpY2UpIHtcbiAgICAgICAgY29uc3QgW2JpZCwgYXNrXSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVCaWRBc2tQcmljZSkobWFya2V0LmFtbSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgbWFya1ByaWNlID0gYmlkLmFkZChhc2spLmRpdihuZXcgYW5jaG9yXzEuQk4oMikpO1xuICAgIH1cbiAgICBjb25zdCBtYXJrVHdhcFdpdGhNYW50aXNzYSA9IG1hcmtUd2FwVGltZVNpbmNlTGFzdFVwZGF0ZVxuICAgICAgICAubXVsKGxhc3RNYXJrVHdhcFdpdGhNYW50aXNzYSlcbiAgICAgICAgLmFkZCh0aW1lU2luY2VMYXN0TWFya0NoYW5nZS5tdWwobWFya1ByaWNlKSlcbiAgICAgICAgLmRpdih0aW1lU2luY2VMYXN0TWFya0NoYW5nZS5hZGQobWFya1R3YXBUaW1lU2luY2VMYXN0VXBkYXRlKSk7XG4gICAgcmV0dXJuIG1hcmtUd2FwV2l0aE1hbnRpc3NhO1xufVxuZnVuY3Rpb24gc2hyaW5rU3RhbGVUd2FwcyhtYXJrZXQsIG1hcmtUd2FwV2l0aE1hbnRpc3NhLCBvcmFjbGVUd2FwV2l0aE1hbnRpc3NhLCBub3cpIHtcbiAgICBub3cgPSBub3cgfHwgbmV3IGFuY2hvcl8xLkJOKChEYXRlLm5vdygpIC8gMTAwMCkudG9GaXhlZCgwKSk7XG4gICAgbGV0IG5ld01hcmtUd2FwID0gbWFya1R3YXBXaXRoTWFudGlzc2E7XG4gICAgbGV0IG5ld09yYWNsZVR3YXAgPSBvcmFjbGVUd2FwV2l0aE1hbnRpc3NhO1xuICAgIGlmIChtYXJrZXQuYW1tLmxhc3RNYXJrUHJpY2VUd2FwVHMuZ3QobWFya2V0LmFtbS5oaXN0b3JpY2FsT3JhY2xlRGF0YS5sYXN0T3JhY2xlUHJpY2VUd2FwVHMpKSB7XG4gICAgICAgIC8vIHNocmluayBvcmFjbGUgYmFzZWQgb24gaW52YWxpZCBpbnRlcnZhbHNcbiAgICAgICAgY29uc3Qgb3JhY2xlSW52YWxpZER1cmF0aW9uID0gYW5jaG9yXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBtYXJrZXQuYW1tLmxhc3RNYXJrUHJpY2VUd2FwVHMuc3ViKG1hcmtldC5hbW0uaGlzdG9yaWNhbE9yYWNsZURhdGEubGFzdE9yYWNsZVByaWNlVHdhcFRzKSk7XG4gICAgICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RPcmFjbGVUd2FwVXBkYXRlID0gbm93LnN1YihtYXJrZXQuYW1tLmhpc3RvcmljYWxPcmFjbGVEYXRhLmxhc3RPcmFjbGVQcmljZVR3YXBUcyk7XG4gICAgICAgIGNvbnN0IG9yYWNsZVR3YXBUaW1lU2luY2VMYXN0VXBkYXRlID0gYW5jaG9yXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5PTkUsIGFuY2hvcl8xLkJOLm1pbihtYXJrZXQuYW1tLmZ1bmRpbmdQZXJpb2QsIGFuY2hvcl8xLkJOLm1heChudW1lcmljQ29uc3RhbnRzXzEuT05FLCBtYXJrZXQuYW1tLmZ1bmRpbmdQZXJpb2Quc3ViKHRpbWVTaW5jZUxhc3RPcmFjbGVUd2FwVXBkYXRlKSkpKTtcbiAgICAgICAgbmV3T3JhY2xlVHdhcCA9IG9yYWNsZVR3YXBUaW1lU2luY2VMYXN0VXBkYXRlXG4gICAgICAgICAgICAubXVsKG9yYWNsZVR3YXBXaXRoTWFudGlzc2EpXG4gICAgICAgICAgICAuYWRkKG9yYWNsZUludmFsaWREdXJhdGlvbi5tdWwobWFya1R3YXBXaXRoTWFudGlzc2EpKVxuICAgICAgICAgICAgLmRpdihvcmFjbGVUd2FwVGltZVNpbmNlTGFzdFVwZGF0ZS5hZGQob3JhY2xlSW52YWxpZER1cmF0aW9uKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1hcmtldC5hbW0ubGFzdE1hcmtQcmljZVR3YXBUcy5sdChtYXJrZXQuYW1tLmhpc3RvcmljYWxPcmFjbGVEYXRhLmxhc3RPcmFjbGVQcmljZVR3YXBUcykpIHtcbiAgICAgICAgLy8gc2hyaW5rIG1hcmsgdG8gb3JhY2xlIHR3YXAgb3ZlciB0cmFkbGVzcyBpbnRlcnZhbHNcbiAgICAgICAgY29uc3QgdHJhZGVsZXNzRHVyYXRpb24gPSBhbmNob3JfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG1hcmtldC5hbW0uaGlzdG9yaWNhbE9yYWNsZURhdGEubGFzdE9yYWNsZVByaWNlVHdhcFRzLnN1YihtYXJrZXQuYW1tLmxhc3RNYXJrUHJpY2VUd2FwVHMpKTtcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdE1hcmtUd2FwVXBkYXRlID0gbm93LnN1YihtYXJrZXQuYW1tLmxhc3RNYXJrUHJpY2VUd2FwVHMpO1xuICAgICAgICBjb25zdCBtYXJrVHdhcFRpbWVTaW5jZUxhc3RVcGRhdGUgPSBhbmNob3JfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLk9ORSwgYW5jaG9yXzEuQk4ubWluKG1hcmtldC5hbW0uZnVuZGluZ1BlcmlvZCwgYW5jaG9yXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5PTkUsIG1hcmtldC5hbW0uZnVuZGluZ1BlcmlvZC5zdWIodGltZVNpbmNlTGFzdE1hcmtUd2FwVXBkYXRlKSkpKTtcbiAgICAgICAgbmV3TWFya1R3YXAgPSBtYXJrVHdhcFRpbWVTaW5jZUxhc3RVcGRhdGVcbiAgICAgICAgICAgIC5tdWwobWFya1R3YXBXaXRoTWFudGlzc2EpXG4gICAgICAgICAgICAuYWRkKHRyYWRlbGVzc0R1cmF0aW9uLm11bChvcmFjbGVUd2FwV2l0aE1hbnRpc3NhKSlcbiAgICAgICAgICAgIC5kaXYobWFya1R3YXBUaW1lU2luY2VMYXN0VXBkYXRlLmFkZCh0cmFkZWxlc3NEdXJhdGlvbikpO1xuICAgIH1cbiAgICByZXR1cm4gW25ld01hcmtUd2FwLCBuZXdPcmFjbGVUd2FwXTtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSBtYXJrZXRcbiAqIEBwYXJhbSBvcmFjbGVQcmljZURhdGFcbiAqIEBwYXJhbSBwZXJpb2RBZGp1c3RtZW50XG4gKiBAcmV0dXJucyBFc3RpbWF0ZWQgZnVuZGluZyByYXRlLiA6IFByZWNpc2lvbiAvL1RPRE8tUFJFQ0lTSU9OXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZUFsbEVzdGltYXRlZEZ1bmRpbmdSYXRlKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhLCBtYXJrUHJpY2UsIG5vdykge1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG1hcmtldC5zdGF0dXMsICd1bmluaXRpYWxpemVkJykpIHtcbiAgICAgICAgcmV0dXJuIFtudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgbnVtZXJpY0NvbnN0YW50c18xLlpFUk9dO1xuICAgIH1cbiAgICAvLyB0b2RvOiBzdWZmaWNpZW50bHkgZGlmZmVycyBmcm9tIGJsb2NrY2hhaW4gdGltZXN0YW1wP1xuICAgIG5vdyA9IG5vdyB8fCBuZXcgYW5jaG9yXzEuQk4oKERhdGUubm93KCkgLyAxMDAwKS50b0ZpeGVkKDApKTtcbiAgICAvLyBjYWxjdWxhdGUgcmVhbC10aW1lIG1hcmsgYW5kIG9yYWNsZSB0d2FwXG4gICAgY29uc3QgbGl2ZU1hcmtUd2FwID0gY2FsY3VsYXRlTGl2ZU1hcmtUd2FwKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhLCBtYXJrUHJpY2UsIG5vdywgbWFya2V0LmFtbS5mdW5kaW5nUGVyaW9kKTtcbiAgICBjb25zdCBsaXZlT3JhY2xlVHdhcCA9ICgwLCBvcmFjbGVzXzEuY2FsY3VsYXRlTGl2ZU9yYWNsZVR3YXApKG1hcmtldC5hbW0uaGlzdG9yaWNhbE9yYWNsZURhdGEsIG9yYWNsZVByaWNlRGF0YSwgbm93LCBtYXJrZXQuYW1tLmZ1bmRpbmdQZXJpb2QpO1xuICAgIGNvbnN0IFttYXJrVHdhcCwgb3JhY2xlVHdhcF0gPSBzaHJpbmtTdGFsZVR3YXBzKG1hcmtldCwgbGl2ZU1hcmtUd2FwLCBsaXZlT3JhY2xlVHdhcCwgbm93KTtcbiAgICAvLyBpZighbWFya1R3YXAuZXEobGl2ZU1hcmtUd2FwKSl7XG4gICAgLy8gXHRjb25zb2xlLmxvZygnc2hyaW5rIG1hcms6JywgbGl2ZU1hcmtUd2FwLnRvU3RyaW5nKCksICctPicsIG1hcmtUd2FwLnRvU3RyaW5nKCkpO1xuICAgIC8vIH1cbiAgICAvLyBpZighb3JhY2xlVHdhcC5lcShsaXZlT3JhY2xlVHdhcCkpe1xuICAgIC8vIFx0Y29uc29sZS5sb2coJ3NocmluayBvcmFjOicsIGxpdmVPcmFjbGVUd2FwLnRvU3RyaW5nKCksICctPicsIG9yYWNsZVR3YXAudG9TdHJpbmcoKSk7XG4gICAgLy8gfVxuICAgIGNvbnN0IHR3YXBTcHJlYWQgPSBtYXJrVHdhcC5zdWIob3JhY2xlVHdhcCk7XG4gICAgY29uc3QgdHdhcFNwcmVhZFBjdCA9IHR3YXBTcHJlYWRcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAubXVsKG5ldyBhbmNob3JfMS5CTigxMDApKVxuICAgICAgICAuZGl2KG9yYWNsZVR3YXApO1xuICAgIGNvbnN0IHNlY29uZHNJbkhvdXIgPSBuZXcgYW5jaG9yXzEuQk4oMzYwMCk7XG4gICAgY29uc3QgaG91cnNJbkRheSA9IG5ldyBhbmNob3JfMS5CTigyNCk7XG4gICAgY29uc3QgdGltZVNpbmNlTGFzdFVwZGF0ZSA9IG5vdy5zdWIobWFya2V0LmFtbS5sYXN0RnVuZGluZ1JhdGVUcyk7XG4gICAgY29uc3QgbG93ZXJib3VuZEVzdCA9IHR3YXBTcHJlYWRQY3RcbiAgICAgICAgLm11bChtYXJrZXQuYW1tLmZ1bmRpbmdQZXJpb2QpXG4gICAgICAgIC5tdWwoYW5jaG9yXzEuQk4ubWluKHNlY29uZHNJbkhvdXIsIHRpbWVTaW5jZUxhc3RVcGRhdGUpKVxuICAgICAgICAuZGl2KHNlY29uZHNJbkhvdXIpXG4gICAgICAgIC5kaXYoc2Vjb25kc0luSG91cilcbiAgICAgICAgLmRpdihob3Vyc0luRGF5KTtcbiAgICBjb25zdCBpbnRlcnBFc3QgPSB0d2FwU3ByZWFkUGN0LmRpdihob3Vyc0luRGF5KTtcbiAgICBjb25zdCBpbnRlcnBSYXRlUXVvdGUgPSB0d2FwU3ByZWFkUGN0XG4gICAgICAgIC5kaXYoaG91cnNJbkRheSlcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OKSk7XG4gICAgbGV0IGZlZVBvb2xTaXplID0gY2FsY3VsYXRlRnVuZGluZ1Bvb2wobWFya2V0KTtcbiAgICBpZiAoaW50ZXJwUmF0ZVF1b3RlLmx0KG5ldyBhbmNob3JfMS5CTigwKSkpIHtcbiAgICAgICAgZmVlUG9vbFNpemUgPSBmZWVQb29sU2l6ZS5tdWwobmV3IGFuY2hvcl8xLkJOKC0xKSk7XG4gICAgfVxuICAgIGxldCBjYXBwZWRBbHRFc3Q7XG4gICAgbGV0IGxhcmdlclNpZGU7XG4gICAgbGV0IHNtYWxsZXJTaWRlO1xuICAgIGlmIChtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudExvbmcuZ3QobWFya2V0LmFtbS5iYXNlQXNzZXRBbW91bnRTaG9ydC5hYnMoKSkpIHtcbiAgICAgICAgbGFyZ2VyU2lkZSA9IG1hcmtldC5hbW0uYmFzZUFzc2V0QW1vdW50TG9uZy5hYnMoKTtcbiAgICAgICAgc21hbGxlclNpZGUgPSBtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudFNob3J0LmFicygpO1xuICAgICAgICBpZiAodHdhcFNwcmVhZC5ndChuZXcgYW5jaG9yXzEuQk4oMCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gW21hcmtUd2FwLCBvcmFjbGVUd2FwLCBsb3dlcmJvdW5kRXN0LCBpbnRlcnBFc3QsIGludGVycEVzdF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobWFya2V0LmFtbS5iYXNlQXNzZXRBbW91bnRMb25nLmx0KG1hcmtldC5hbW0uYmFzZUFzc2V0QW1vdW50U2hvcnQuYWJzKCkpKSB7XG4gICAgICAgIGxhcmdlclNpZGUgPSBtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudFNob3J0LmFicygpO1xuICAgICAgICBzbWFsbGVyU2lkZSA9IG1hcmtldC5hbW0uYmFzZUFzc2V0QW1vdW50TG9uZy5hYnMoKTtcbiAgICAgICAgaWYgKHR3YXBTcHJlYWQubHQobmV3IGFuY2hvcl8xLkJOKDApKSkge1xuICAgICAgICAgICAgcmV0dXJuIFttYXJrVHdhcCwgb3JhY2xlVHdhcCwgbG93ZXJib3VuZEVzdCwgaW50ZXJwRXN0LCBpbnRlcnBFc3RdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW21hcmtUd2FwLCBvcmFjbGVUd2FwLCBsb3dlcmJvdW5kRXN0LCBpbnRlcnBFc3QsIGludGVycEVzdF07XG4gICAgfVxuICAgIGlmIChsYXJnZXJTaWRlLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAvLyBmdW5kaW5nIHNtYWxsZXIgZmxvd1xuICAgICAgICBjYXBwZWRBbHRFc3QgPSBzbWFsbGVyU2lkZS5tdWwodHdhcFNwcmVhZCkuZGl2KGhvdXJzSW5EYXkpO1xuICAgICAgICBjb25zdCBmZWVQb29sVG9wT2ZmID0gZmVlUG9vbFNpemVcbiAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTi5kaXYobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1BSRUNJU0lPTikpXG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pO1xuICAgICAgICBjYXBwZWRBbHRFc3QgPSBjYXBwZWRBbHRFc3QuYWRkKGZlZVBvb2xUb3BPZmYpLmRpdihsYXJnZXJTaWRlKTtcbiAgICAgICAgY2FwcGVkQWx0RXN0ID0gY2FwcGVkQWx0RXN0XG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pXG4gICAgICAgICAgICAubXVsKG5ldyBhbmNob3JfMS5CTigxMDApKVxuICAgICAgICAgICAgLmRpdihvcmFjbGVUd2FwKTtcbiAgICAgICAgaWYgKGNhcHBlZEFsdEVzdC5hYnMoKS5ndGUoaW50ZXJwRXN0LmFicygpKSkge1xuICAgICAgICAgICAgY2FwcGVkQWx0RXN0ID0gaW50ZXJwRXN0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYXBwZWRBbHRFc3QgPSBpbnRlcnBFc3Q7XG4gICAgfVxuICAgIHJldHVybiBbbWFya1R3YXAsIG9yYWNsZVR3YXAsIGxvd2VyYm91bmRFc3QsIGNhcHBlZEFsdEVzdCwgaW50ZXJwRXN0XTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlQWxsRXN0aW1hdGVkRnVuZGluZ1JhdGUgPSBjYWxjdWxhdGVBbGxFc3RpbWF0ZWRGdW5kaW5nUmF0ZTtcbi8qKlxuICpcbiAqIEBwYXJhbSBtYXJrZXRcbiAqIEBwYXJhbSBvcmFjbGVQcmljZURhdGFcbiAqIEBwYXJhbSBwZXJpb2RBZGp1c3RtZW50XG4gKiBAcmV0dXJucyBFc3RpbWF0ZWQgZnVuZGluZyByYXRlLiA6IFByZWNpc2lvbiAvL1RPRE8tUFJFQ0lTSU9OXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZUxvbmdTaG9ydEZ1bmRpbmdSYXRlKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhLCBtYXJrUHJpY2UsIG5vdykge1xuICAgIGNvbnN0IFtfMSwgXzIsIF8sIGNhcHBlZEFsdEVzdCwgaW50ZXJwRXN0XSA9IGF3YWl0IGNhbGN1bGF0ZUFsbEVzdGltYXRlZEZ1bmRpbmdSYXRlKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhLCBtYXJrUHJpY2UsIG5vdyk7XG4gICAgaWYgKG1hcmtldC5hbW0uYmFzZUFzc2V0QW1vdW50TG9uZy5ndChtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudFNob3J0KSkge1xuICAgICAgICByZXR1cm4gW2NhcHBlZEFsdEVzdCwgaW50ZXJwRXN0XTtcbiAgICB9XG4gICAgZWxzZSBpZiAobWFya2V0LmFtbS5iYXNlQXNzZXRBbW91bnRMb25nLmx0KG1hcmtldC5hbW0uYmFzZUFzc2V0QW1vdW50U2hvcnQpKSB7XG4gICAgICAgIHJldHVybiBbaW50ZXJwRXN0LCBjYXBwZWRBbHRFc3RdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtpbnRlcnBFc3QsIGludGVycEVzdF07XG4gICAgfVxufVxuZXhwb3J0cy5jYWxjdWxhdGVMb25nU2hvcnRGdW5kaW5nUmF0ZSA9IGNhbGN1bGF0ZUxvbmdTaG9ydEZ1bmRpbmdSYXRlO1xuLyoqXG4gKlxuICogQHBhcmFtIG1hcmtldFxuICogQHBhcmFtIG9yYWNsZVByaWNlRGF0YVxuICogQHBhcmFtIHBlcmlvZEFkanVzdG1lbnRcbiAqIEByZXR1cm5zIEVzdGltYXRlZCBmdW5kaW5nIHJhdGUuIDogUHJlY2lzaW9uIC8vVE9ETy1QUkVDSVNJT05cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2FsY3VsYXRlTG9uZ1Nob3J0RnVuZGluZ1JhdGVBbmRMaXZlVHdhcHMobWFya2V0LCBvcmFjbGVQcmljZURhdGEsIG1hcmtQcmljZSwgbm93KSB7XG4gICAgY29uc3QgW21hcmtUd2FwTGl2ZSwgb3JhY2xlVHdhcExpdmUsIF8yLCBjYXBwZWRBbHRFc3QsIGludGVycEVzdF0gPSBhd2FpdCBjYWxjdWxhdGVBbGxFc3RpbWF0ZWRGdW5kaW5nUmF0ZShtYXJrZXQsIG9yYWNsZVByaWNlRGF0YSwgbWFya1ByaWNlLCBub3cpO1xuICAgIGlmIChtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudExvbmcuZ3QobWFya2V0LmFtbS5iYXNlQXNzZXRBbW91bnRTaG9ydC5hYnMoKSkpIHtcbiAgICAgICAgcmV0dXJuIFttYXJrVHdhcExpdmUsIG9yYWNsZVR3YXBMaXZlLCBjYXBwZWRBbHRFc3QsIGludGVycEVzdF07XG4gICAgfVxuICAgIGVsc2UgaWYgKG1hcmtldC5hbW0uYmFzZUFzc2V0QW1vdW50TG9uZy5sdChtYXJrZXQuYW1tLmJhc2VBc3NldEFtb3VudFNob3J0LmFicygpKSkge1xuICAgICAgICByZXR1cm4gW21hcmtUd2FwTGl2ZSwgb3JhY2xlVHdhcExpdmUsIGludGVycEVzdCwgY2FwcGVkQWx0RXN0XTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbbWFya1R3YXBMaXZlLCBvcmFjbGVUd2FwTGl2ZSwgaW50ZXJwRXN0LCBpbnRlcnBFc3RdO1xuICAgIH1cbn1cbmV4cG9ydHMuY2FsY3VsYXRlTG9uZ1Nob3J0RnVuZGluZ1JhdGVBbmRMaXZlVHdhcHMgPSBjYWxjdWxhdGVMb25nU2hvcnRGdW5kaW5nUmF0ZUFuZExpdmVUd2Fwcztcbi8qKlxuICpcbiAqIEBwYXJhbSBtYXJrZXRcbiAqIEByZXR1cm5zIEVzdGltYXRlZCBmZWUgcG9vbCBzaXplXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUZ1bmRpbmdQb29sKG1hcmtldCkge1xuICAgIC8vIHRvZG9cbiAgICBjb25zdCB0b3RhbEZlZUxCID0gbWFya2V0LmFtbS50b3RhbEV4Y2hhbmdlRmVlLmRpdihuZXcgYW5jaG9yXzEuQk4oMikpO1xuICAgIGNvbnN0IGZlZVBvb2wgPSBhbmNob3JfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG1hcmtldC5hbW0udG90YWxGZWVNaW51c0Rpc3RyaWJ1dGlvbnNcbiAgICAgICAgLnN1Yih0b3RhbEZlZUxCKVxuICAgICAgICAubXVsKG5ldyBhbmNob3JfMS5CTigxKSlcbiAgICAgICAgLmRpdihuZXcgYW5jaG9yXzEuQk4oMykpKTtcbiAgICByZXR1cm4gZmVlUG9vbDtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlRnVuZGluZ1Bvb2wgPSBjYWxjdWxhdGVGdW5kaW5nUG9vbDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbGN1bGF0ZUZ1bmRpbmdQb29sIiwiY2FsY3VsYXRlTG9uZ1Nob3J0RnVuZGluZ1JhdGVBbmRMaXZlVHdhcHMiLCJjYWxjdWxhdGVMb25nU2hvcnRGdW5kaW5nUmF0ZSIsImNhbGN1bGF0ZUFsbEVzdGltYXRlZEZ1bmRpbmdSYXRlIiwiYW5jaG9yXzEiLCJyZXF1aXJlIiwibnVtZXJpY0NvbnN0YW50c18xIiwidHlwZXNfMSIsImFtbV8xIiwib3JhY2xlc18xIiwiY2FsY3VsYXRlTGl2ZU1hcmtUd2FwIiwibWFya2V0Iiwib3JhY2xlUHJpY2VEYXRhIiwibWFya1ByaWNlIiwibm93IiwicGVyaW9kIiwiQk4iLCJEYXRlIiwidG9GaXhlZCIsImxhc3RNYXJrVHdhcFdpdGhNYW50aXNzYSIsImFtbSIsImxhc3RNYXJrUHJpY2VUd2FwIiwibGFzdE1hcmtQcmljZVR3YXBUcyIsInRpbWVTaW5jZUxhc3RNYXJrQ2hhbmdlIiwic3ViIiwibWFya1R3YXBUaW1lU2luY2VMYXN0VXBkYXRlIiwibWF4IiwiWkVSTyIsImJpZCIsImFzayIsImNhbGN1bGF0ZUJpZEFza1ByaWNlIiwiYWRkIiwiZGl2IiwibWFya1R3YXBXaXRoTWFudGlzc2EiLCJtdWwiLCJzaHJpbmtTdGFsZVR3YXBzIiwib3JhY2xlVHdhcFdpdGhNYW50aXNzYSIsIm5ld01hcmtUd2FwIiwibmV3T3JhY2xlVHdhcCIsImd0IiwiaGlzdG9yaWNhbE9yYWNsZURhdGEiLCJsYXN0T3JhY2xlUHJpY2VUd2FwVHMiLCJvcmFjbGVJbnZhbGlkRHVyYXRpb24iLCJ0aW1lU2luY2VMYXN0T3JhY2xlVHdhcFVwZGF0ZSIsIm9yYWNsZVR3YXBUaW1lU2luY2VMYXN0VXBkYXRlIiwiT05FIiwibWluIiwiZnVuZGluZ1BlcmlvZCIsImx0IiwidHJhZGVsZXNzRHVyYXRpb24iLCJ0aW1lU2luY2VMYXN0TWFya1R3YXBVcGRhdGUiLCJpc1ZhcmlhbnQiLCJzdGF0dXMiLCJsaXZlTWFya1R3YXAiLCJsaXZlT3JhY2xlVHdhcCIsImNhbGN1bGF0ZUxpdmVPcmFjbGVUd2FwIiwibWFya1R3YXAiLCJvcmFjbGVUd2FwIiwidHdhcFNwcmVhZCIsInR3YXBTcHJlYWRQY3QiLCJQUklDRV9QUkVDSVNJT04iLCJzZWNvbmRzSW5Ib3VyIiwiaG91cnNJbkRheSIsInRpbWVTaW5jZUxhc3RVcGRhdGUiLCJsYXN0RnVuZGluZ1JhdGVUcyIsImxvd2VyYm91bmRFc3QiLCJpbnRlcnBFc3QiLCJpbnRlcnBSYXRlUXVvdGUiLCJRVU9URV9QUkVDSVNJT04iLCJmZWVQb29sU2l6ZSIsImNhcHBlZEFsdEVzdCIsImxhcmdlclNpZGUiLCJzbWFsbGVyU2lkZSIsImJhc2VBc3NldEFtb3VudExvbmciLCJiYXNlQXNzZXRBbW91bnRTaG9ydCIsImFicyIsImZlZVBvb2xUb3BPZmYiLCJBTU1fUkVTRVJWRV9QUkVDSVNJT04iLCJndGUiLCJfMSIsIl8yIiwiXyIsIm1hcmtUd2FwTGl2ZSIsIm9yYWNsZVR3YXBMaXZlIiwidG90YWxGZWVMQiIsInRvdGFsRXhjaGFuZ2VGZWUiLCJmZWVQb29sIiwidG90YWxGZWVNaW51c0Rpc3RyaWJ1dGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/funding.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/insurance.js":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/insurance.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.unstakeSharesToAmountWithOpenRequest = exports.unstakeSharesToAmount = exports.stakeAmountToShares = void 0;\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst index_1 = __webpack_require__(/*! ../index */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nfunction stakeAmountToShares(amount, totalIfShares, insuranceFundVaultBalance) {\n    let nShares;\n    if (insuranceFundVaultBalance.gt(numericConstants_1.ZERO)) {\n        nShares = amount.mul(totalIfShares).div(insuranceFundVaultBalance);\n    } else {\n        nShares = amount;\n    }\n    return nShares;\n}\nexports.stakeAmountToShares = stakeAmountToShares;\nfunction unstakeSharesToAmount(nShares, totalIfShares, insuranceFundVaultBalance) {\n    let amount;\n    if (totalIfShares.gt(numericConstants_1.ZERO)) {\n        amount = index_1.BN.max(numericConstants_1.ZERO, nShares.mul(insuranceFundVaultBalance).div(totalIfShares));\n    } else {\n        amount = numericConstants_1.ZERO;\n    }\n    return amount;\n}\nexports.unstakeSharesToAmount = unstakeSharesToAmount;\nfunction unstakeSharesToAmountWithOpenRequest(nShares, withdrawRequestShares, withdrawRequestAmount, totalIfShares, insuranceFundVaultBalance) {\n    let stakedAmount;\n    if (totalIfShares.gt(numericConstants_1.ZERO)) {\n        stakedAmount = index_1.BN.max(numericConstants_1.ZERO, nShares.sub(withdrawRequestShares).mul(insuranceFundVaultBalance).div(totalIfShares));\n    } else {\n        stakedAmount = numericConstants_1.ZERO;\n    }\n    const withdrawAmount = index_1.BN.min(withdrawRequestAmount, withdrawRequestShares.mul(insuranceFundVaultBalance).div(totalIfShares));\n    const amount = withdrawAmount.add(stakedAmount);\n    return amount;\n}\nexports.unstakeSharesToAmountWithOpenRequest = unstakeSharesToAmountWithOpenRequest;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL2luc3VyYW5jZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsNENBQTRDLEdBQUdBLDZCQUE2QixHQUFHQSwyQkFBMkIsR0FBRyxLQUFLO0FBQ2xILE1BQU1LLHFCQUFxQkMsbUJBQU9BLENBQUMsNkdBQStCO0FBQ2xFLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLFNBQVNGLG9CQUFvQkksTUFBTSxFQUFFQyxhQUFhLEVBQUVDLHlCQUF5QjtJQUN6RSxJQUFJQztJQUNKLElBQUlELDBCQUEwQkUsRUFBRSxDQUFDUCxtQkFBbUJRLElBQUksR0FBRztRQUN2REYsVUFBVUgsT0FBT00sR0FBRyxDQUFDTCxlQUFlTSxHQUFHLENBQUNMO0lBQzVDLE9BQ0s7UUFDREMsVUFBVUg7SUFDZDtJQUNBLE9BQU9HO0FBQ1g7QUFDQVgsMkJBQTJCLEdBQUdJO0FBQzlCLFNBQVNELHNCQUFzQlEsT0FBTyxFQUFFRixhQUFhLEVBQUVDLHlCQUF5QjtJQUM1RSxJQUFJRjtJQUNKLElBQUlDLGNBQWNHLEVBQUUsQ0FBQ1AsbUJBQW1CUSxJQUFJLEdBQUc7UUFDM0NMLFNBQVNELFFBQVFTLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDWixtQkFBbUJRLElBQUksRUFBRUYsUUFBUUcsR0FBRyxDQUFDSiwyQkFBMkJLLEdBQUcsQ0FBQ047SUFDaEcsT0FDSztRQUNERCxTQUFTSCxtQkFBbUJRLElBQUk7SUFDcEM7SUFDQSxPQUFPTDtBQUNYO0FBQ0FSLDZCQUE2QixHQUFHRztBQUNoQyxTQUFTRCxxQ0FBcUNTLE9BQU8sRUFBRU8scUJBQXFCLEVBQUVDLHFCQUFxQixFQUFFVixhQUFhLEVBQUVDLHlCQUF5QjtJQUN6SSxJQUFJVTtJQUNKLElBQUlYLGNBQWNHLEVBQUUsQ0FBQ1AsbUJBQW1CUSxJQUFJLEdBQUc7UUFDM0NPLGVBQWViLFFBQVFTLEVBQUUsQ0FBQ0MsR0FBRyxDQUFDWixtQkFBbUJRLElBQUksRUFBRUYsUUFDbERVLEdBQUcsQ0FBQ0gsdUJBQ0pKLEdBQUcsQ0FBQ0osMkJBQ0pLLEdBQUcsQ0FBQ047SUFDYixPQUNLO1FBQ0RXLGVBQWVmLG1CQUFtQlEsSUFBSTtJQUMxQztJQUNBLE1BQU1TLGlCQUFpQmYsUUFBUVMsRUFBRSxDQUFDTyxHQUFHLENBQUNKLHVCQUF1QkQsc0JBQXNCSixHQUFHLENBQUNKLDJCQUEyQkssR0FBRyxDQUFDTjtJQUN0SCxNQUFNRCxTQUFTYyxlQUFlRSxHQUFHLENBQUNKO0lBQ2xDLE9BQU9aO0FBQ1g7QUFDQVIsNENBQTRDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvaW5zdXJhbmNlLmpzPzRlMzYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnVuc3Rha2VTaGFyZXNUb0Ftb3VudFdpdGhPcGVuUmVxdWVzdCA9IGV4cG9ydHMudW5zdGFrZVNoYXJlc1RvQW1vdW50ID0gZXhwb3J0cy5zdGFrZUFtb3VudFRvU2hhcmVzID0gdm9pZCAwO1xuY29uc3QgbnVtZXJpY0NvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50cy9udW1lcmljQ29uc3RhbnRzXCIpO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9pbmRleFwiKTtcbmZ1bmN0aW9uIHN0YWtlQW1vdW50VG9TaGFyZXMoYW1vdW50LCB0b3RhbElmU2hhcmVzLCBpbnN1cmFuY2VGdW5kVmF1bHRCYWxhbmNlKSB7XG4gICAgbGV0IG5TaGFyZXM7XG4gICAgaWYgKGluc3VyYW5jZUZ1bmRWYXVsdEJhbGFuY2UuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIG5TaGFyZXMgPSBhbW91bnQubXVsKHRvdGFsSWZTaGFyZXMpLmRpdihpbnN1cmFuY2VGdW5kVmF1bHRCYWxhbmNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5TaGFyZXMgPSBhbW91bnQ7XG4gICAgfVxuICAgIHJldHVybiBuU2hhcmVzO1xufVxuZXhwb3J0cy5zdGFrZUFtb3VudFRvU2hhcmVzID0gc3Rha2VBbW91bnRUb1NoYXJlcztcbmZ1bmN0aW9uIHVuc3Rha2VTaGFyZXNUb0Ftb3VudChuU2hhcmVzLCB0b3RhbElmU2hhcmVzLCBpbnN1cmFuY2VGdW5kVmF1bHRCYWxhbmNlKSB7XG4gICAgbGV0IGFtb3VudDtcbiAgICBpZiAodG90YWxJZlNoYXJlcy5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgYW1vdW50ID0gaW5kZXhfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG5TaGFyZXMubXVsKGluc3VyYW5jZUZ1bmRWYXVsdEJhbGFuY2UpLmRpdih0b3RhbElmU2hhcmVzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhbW91bnQgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICB9XG4gICAgcmV0dXJuIGFtb3VudDtcbn1cbmV4cG9ydHMudW5zdGFrZVNoYXJlc1RvQW1vdW50ID0gdW5zdGFrZVNoYXJlc1RvQW1vdW50O1xuZnVuY3Rpb24gdW5zdGFrZVNoYXJlc1RvQW1vdW50V2l0aE9wZW5SZXF1ZXN0KG5TaGFyZXMsIHdpdGhkcmF3UmVxdWVzdFNoYXJlcywgd2l0aGRyYXdSZXF1ZXN0QW1vdW50LCB0b3RhbElmU2hhcmVzLCBpbnN1cmFuY2VGdW5kVmF1bHRCYWxhbmNlKSB7XG4gICAgbGV0IHN0YWtlZEFtb3VudDtcbiAgICBpZiAodG90YWxJZlNoYXJlcy5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgc3Rha2VkQW1vdW50ID0gaW5kZXhfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG5TaGFyZXNcbiAgICAgICAgICAgIC5zdWIod2l0aGRyYXdSZXF1ZXN0U2hhcmVzKVxuICAgICAgICAgICAgLm11bChpbnN1cmFuY2VGdW5kVmF1bHRCYWxhbmNlKVxuICAgICAgICAgICAgLmRpdih0b3RhbElmU2hhcmVzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzdGFrZWRBbW91bnQgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICB9XG4gICAgY29uc3Qgd2l0aGRyYXdBbW91bnQgPSBpbmRleF8xLkJOLm1pbih3aXRoZHJhd1JlcXVlc3RBbW91bnQsIHdpdGhkcmF3UmVxdWVzdFNoYXJlcy5tdWwoaW5zdXJhbmNlRnVuZFZhdWx0QmFsYW5jZSkuZGl2KHRvdGFsSWZTaGFyZXMpKTtcbiAgICBjb25zdCBhbW91bnQgPSB3aXRoZHJhd0Ftb3VudC5hZGQoc3Rha2VkQW1vdW50KTtcbiAgICByZXR1cm4gYW1vdW50O1xufVxuZXhwb3J0cy51bnN0YWtlU2hhcmVzVG9BbW91bnRXaXRoT3BlblJlcXVlc3QgPSB1bnN0YWtlU2hhcmVzVG9BbW91bnRXaXRoT3BlblJlcXVlc3Q7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJ1bnN0YWtlU2hhcmVzVG9BbW91bnRXaXRoT3BlblJlcXVlc3QiLCJ1bnN0YWtlU2hhcmVzVG9BbW91bnQiLCJzdGFrZUFtb3VudFRvU2hhcmVzIiwibnVtZXJpY0NvbnN0YW50c18xIiwicmVxdWlyZSIsImluZGV4XzEiLCJhbW91bnQiLCJ0b3RhbElmU2hhcmVzIiwiaW5zdXJhbmNlRnVuZFZhdWx0QmFsYW5jZSIsIm5TaGFyZXMiLCJndCIsIlpFUk8iLCJtdWwiLCJkaXYiLCJCTiIsIm1heCIsIndpdGhkcmF3UmVxdWVzdFNoYXJlcyIsIndpdGhkcmF3UmVxdWVzdEFtb3VudCIsInN0YWtlZEFtb3VudCIsInN1YiIsIndpdGhkcmF3QW1vdW50IiwibWluIiwiYWRkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/insurance.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/margin.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/margin.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateWorstCaseBaseAssetAmount = exports.calculateBaseAssetValueWithOracle = exports.calculateOraclePriceForPerpMargin = exports.calculateSizeDiscountAssetWeight = exports.calculateSizePremiumLiabilityWeight = void 0;\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/utils.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst assert_1 = __webpack_require__(/*! ../assert/assert */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\");\nfunction calculateSizePremiumLiabilityWeight(size, imfFactor, liabilityWeight, precision) {\n    if (imfFactor.eq(numericConstants_1.ZERO)) {\n        return liabilityWeight;\n    }\n    const sizeSqrt = (0, utils_1.squareRootBN)(size.abs().mul(new anchor_1.BN(10)).add(new anchor_1.BN(1))); //1e9 -> 1e10 -> 1e5\n    const liabilityWeightNumerator = liabilityWeight.sub(liabilityWeight.div(new anchor_1.BN(5)));\n    const denom = new anchor_1.BN(100000).mul(numericConstants_1.SPOT_MARKET_IMF_PRECISION).div(precision);\n    (0, assert_1.assert)(denom.gt(numericConstants_1.ZERO));\n    const sizePremiumLiabilityWeight = liabilityWeightNumerator.add(sizeSqrt // 1e5\n    .mul(imfFactor).div(denom) // 1e5\n    );\n    const maxLiabilityWeight = anchor_1.BN.max(liabilityWeight, sizePremiumLiabilityWeight);\n    return maxLiabilityWeight;\n}\nexports.calculateSizePremiumLiabilityWeight = calculateSizePremiumLiabilityWeight;\nfunction calculateSizeDiscountAssetWeight(size, imfFactor, assetWeight) {\n    if (imfFactor.eq(numericConstants_1.ZERO)) {\n        return assetWeight;\n    }\n    const sizeSqrt = (0, utils_1.squareRootBN)(size.abs().mul(new anchor_1.BN(10)).add(new anchor_1.BN(1))); //1e9 -> 1e10 -> 1e5\n    const imfNumerator = numericConstants_1.SPOT_MARKET_IMF_PRECISION.add(numericConstants_1.SPOT_MARKET_IMF_PRECISION.div(new anchor_1.BN(10)));\n    const sizeDiscountAssetWeight = imfNumerator.mul(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION).div(numericConstants_1.SPOT_MARKET_IMF_PRECISION.add(sizeSqrt // 1e5\n    .mul(imfFactor).div(new anchor_1.BN(100000)) // 1e5\n    ));\n    const minAssetWeight = anchor_1.BN.min(assetWeight, sizeDiscountAssetWeight);\n    return minAssetWeight;\n}\nexports.calculateSizeDiscountAssetWeight = calculateSizeDiscountAssetWeight;\nfunction calculateOraclePriceForPerpMargin(perpPosition, market, oraclePriceData) {\n    const oraclePriceOffset = anchor_1.BN.min(new anchor_1.BN(market.amm.maxSpread).mul(oraclePriceData.price).div(numericConstants_1.BID_ASK_SPREAD_PRECISION), oraclePriceData.confidence.add(new anchor_1.BN(market.amm.baseSpread).mul(oraclePriceData.price).div(numericConstants_1.BID_ASK_SPREAD_PRECISION)));\n    let marginPrice;\n    if (perpPosition.baseAssetAmount.gt(numericConstants_1.ZERO)) {\n        marginPrice = oraclePriceData.price.sub(oraclePriceOffset);\n    } else {\n        marginPrice = oraclePriceData.price.add(oraclePriceOffset);\n    }\n    return marginPrice;\n}\nexports.calculateOraclePriceForPerpMargin = calculateOraclePriceForPerpMargin;\nfunction calculateBaseAssetValueWithOracle(market, perpPosition, oraclePriceData, includeOpenOrders = false) {\n    let price = oraclePriceData.price;\n    if ((0, types_1.isVariant)(market.status, \"settlement\")) {\n        price = market.expiryPrice;\n    }\n    const baseAssetAmount = includeOpenOrders ? calculateWorstCaseBaseAssetAmount(perpPosition) : perpPosition.baseAssetAmount;\n    return baseAssetAmount.abs().mul(price).div(numericConstants_1.AMM_RESERVE_PRECISION);\n}\nexports.calculateBaseAssetValueWithOracle = calculateBaseAssetValueWithOracle;\nfunction calculateWorstCaseBaseAssetAmount(perpPosition) {\n    const allBids = perpPosition.baseAssetAmount.add(perpPosition.openBids);\n    const allAsks = perpPosition.baseAssetAmount.add(perpPosition.openAsks);\n    if (allBids.abs().gt(allAsks.abs())) {\n        return allBids;\n    } else {\n        return allAsks;\n    }\n}\nexports.calculateWorstCaseBaseAssetAmount = calculateWorstCaseBaseAssetAmount;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL21hcmdpbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUNBQXlDLEdBQUdBLHlDQUF5QyxHQUFHQSx5Q0FBeUMsR0FBR0Esd0NBQXdDLEdBQUdBLDJDQUEyQyxHQUFHLEtBQUs7QUFDbE8sTUFBTU8sVUFBVUMsbUJBQU9BLENBQUMsdUVBQVM7QUFDakMsTUFBTUMscUJBQXFCRCxtQkFBT0EsQ0FBQyw2R0FBK0I7QUFDbEUsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsbUZBQW1CO0FBQzVDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLE1BQU1JLFdBQVdKLG1CQUFPQSxDQUFDLG1GQUFrQjtBQUMzQyxTQUFTRixvQ0FBb0NPLElBQUksRUFDakRDLFNBQVMsRUFBRUMsZUFBZSxFQUFFQyxTQUFTO0lBQ2pDLElBQUlGLFVBQVVHLEVBQUUsQ0FBQ1IsbUJBQW1CUyxJQUFJLEdBQUc7UUFDdkMsT0FBT0g7SUFDWDtJQUNBLE1BQU1JLFdBQVcsQ0FBQyxHQUFHWixRQUFRYSxZQUFZLEVBQUVQLEtBQUtRLEdBQUcsR0FBR0MsR0FBRyxDQUFDLElBQUlaLFNBQVNhLEVBQUUsQ0FBQyxLQUFLQyxHQUFHLENBQUMsSUFBSWQsU0FBU2EsRUFBRSxDQUFDLE1BQU0sb0JBQW9CO0lBQzdILE1BQU1FLDJCQUEyQlYsZ0JBQWdCVyxHQUFHLENBQUNYLGdCQUFnQlksR0FBRyxDQUFDLElBQUlqQixTQUFTYSxFQUFFLENBQUM7SUFDekYsTUFBTUssUUFBUSxJQUFJbEIsU0FBU2EsRUFBRSxDQUFDLFFBQVFELEdBQUcsQ0FBQ2IsbUJBQW1Cb0IseUJBQXlCLEVBQUVGLEdBQUcsQ0FBQ1g7SUFDM0YsSUFBR0osU0FBU2tCLE1BQU0sRUFBRUYsTUFBTUcsRUFBRSxDQUFDdEIsbUJBQW1CUyxJQUFJO0lBQ3JELE1B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LGFBQWFXLGVBQWUsQ0FBQzVCLEdBQUcsQ0FBQ2lCLGFBQWFrQixRQUFRO0lBQ3RFLE1BQU1DLFVBQVVuQixhQUFhVyxlQUFlLENBQUM1QixHQUFHLENBQUNpQixhQUFhb0IsUUFBUTtJQUN0RSxJQUFJSCxRQUFRckMsR0FBRyxHQUFHVSxFQUFFLENBQUM2QixRQUFRdkMsR0FBRyxLQUFLO1FBQ2pDLE9BQU9xQztJQUNYLE9BQ0s7UUFDRCxPQUFPRTtJQUNYO0FBQ0o7QUFDQTVELHlDQUF5QyxHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL21hcmdpbi5qcz9iMWVhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jYWxjdWxhdGVXb3JzdENhc2VCYXNlQXNzZXRBbW91bnQgPSBleHBvcnRzLmNhbGN1bGF0ZUJhc2VBc3NldFZhbHVlV2l0aE9yYWNsZSA9IGV4cG9ydHMuY2FsY3VsYXRlT3JhY2xlUHJpY2VGb3JQZXJwTWFyZ2luID0gZXhwb3J0cy5jYWxjdWxhdGVTaXplRGlzY291bnRBc3NldFdlaWdodCA9IGV4cG9ydHMuY2FsY3VsYXRlU2l6ZVByZW1pdW1MaWFiaWxpdHlXZWlnaHQgPSB2b2lkIDA7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5jb25zdCBhc3NlcnRfMSA9IHJlcXVpcmUoXCIuLi9hc3NlcnQvYXNzZXJ0XCIpO1xuZnVuY3Rpb24gY2FsY3VsYXRlU2l6ZVByZW1pdW1MaWFiaWxpdHlXZWlnaHQoc2l6ZSwgLy8gQU1NX1JFU0VSVkVfUFJFQ0lTSU9OXG5pbWZGYWN0b3IsIGxpYWJpbGl0eVdlaWdodCwgcHJlY2lzaW9uKSB7XG4gICAgaWYgKGltZkZhY3Rvci5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIGxpYWJpbGl0eVdlaWdodDtcbiAgICB9XG4gICAgY29uc3Qgc2l6ZVNxcnQgPSAoMCwgdXRpbHNfMS5zcXVhcmVSb290Qk4pKHNpemUuYWJzKCkubXVsKG5ldyBhbmNob3JfMS5CTigxMCkpLmFkZChuZXcgYW5jaG9yXzEuQk4oMSkpKTsgLy8xZTkgLT4gMWUxMCAtPiAxZTVcbiAgICBjb25zdCBsaWFiaWxpdHlXZWlnaHROdW1lcmF0b3IgPSBsaWFiaWxpdHlXZWlnaHQuc3ViKGxpYWJpbGl0eVdlaWdodC5kaXYobmV3IGFuY2hvcl8xLkJOKDUpKSk7XG4gICAgY29uc3QgZGVub20gPSBuZXcgYW5jaG9yXzEuQk4oMTAwMDAwKS5tdWwobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX0lNRl9QUkVDSVNJT04pLmRpdihwcmVjaXNpb24pO1xuICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKGRlbm9tLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSk7XG4gICAgY29uc3Qgc2l6ZVByZW1pdW1MaWFiaWxpdHlXZWlnaHQgPSBsaWFiaWxpdHlXZWlnaHROdW1lcmF0b3IuYWRkKHNpemVTcXJ0IC8vIDFlNVxuICAgICAgICAubXVsKGltZkZhY3RvcilcbiAgICAgICAgLmRpdihkZW5vbSkgLy8gMWU1XG4gICAgKTtcbiAgICBjb25zdCBtYXhMaWFiaWxpdHlXZWlnaHQgPSBhbmNob3JfMS5CTi5tYXgobGlhYmlsaXR5V2VpZ2h0LCBzaXplUHJlbWl1bUxpYWJpbGl0eVdlaWdodCk7XG4gICAgcmV0dXJuIG1heExpYWJpbGl0eVdlaWdodDtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlU2l6ZVByZW1pdW1MaWFiaWxpdHlXZWlnaHQgPSBjYWxjdWxhdGVTaXplUHJlbWl1bUxpYWJpbGl0eVdlaWdodDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZVNpemVEaXNjb3VudEFzc2V0V2VpZ2h0KHNpemUsIC8vIEFNTV9SRVNFUlZFX1BSRUNJU0lPTlxuaW1mRmFjdG9yLCBhc3NldFdlaWdodCkge1xuICAgIGlmIChpbWZGYWN0b3IuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIHJldHVybiBhc3NldFdlaWdodDtcbiAgICB9XG4gICAgY29uc3Qgc2l6ZVNxcnQgPSAoMCwgdXRpbHNfMS5zcXVhcmVSb290Qk4pKHNpemUuYWJzKCkubXVsKG5ldyBhbmNob3JfMS5CTigxMCkpLmFkZChuZXcgYW5jaG9yXzEuQk4oMSkpKTsgLy8xZTkgLT4gMWUxMCAtPiAxZTVcbiAgICBjb25zdCBpbWZOdW1lcmF0b3IgPSBudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfSU1GX1BSRUNJU0lPTi5hZGQobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX0lNRl9QUkVDSVNJT04uZGl2KG5ldyBhbmNob3JfMS5CTigxMCkpKTtcbiAgICBjb25zdCBzaXplRGlzY291bnRBc3NldFdlaWdodCA9IGltZk51bWVyYXRvclxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9JTUZfUFJFQ0lTSU9OLmFkZChzaXplU3FydCAvLyAxZTVcbiAgICAgICAgLm11bChpbWZGYWN0b3IpXG4gICAgICAgIC5kaXYobmV3IGFuY2hvcl8xLkJOKDEwMDAwMCkpIC8vIDFlNVxuICAgICkpO1xuICAgIGNvbnN0IG1pbkFzc2V0V2VpZ2h0ID0gYW5jaG9yXzEuQk4ubWluKGFzc2V0V2VpZ2h0LCBzaXplRGlzY291bnRBc3NldFdlaWdodCk7XG4gICAgcmV0dXJuIG1pbkFzc2V0V2VpZ2h0O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVTaXplRGlzY291bnRBc3NldFdlaWdodCA9IGNhbGN1bGF0ZVNpemVEaXNjb3VudEFzc2V0V2VpZ2h0O1xuZnVuY3Rpb24gY2FsY3VsYXRlT3JhY2xlUHJpY2VGb3JQZXJwTWFyZ2luKHBlcnBQb3NpdGlvbiwgbWFya2V0LCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBjb25zdCBvcmFjbGVQcmljZU9mZnNldCA9IGFuY2hvcl8xLkJOLm1pbihuZXcgYW5jaG9yXzEuQk4obWFya2V0LmFtbS5tYXhTcHJlYWQpXG4gICAgICAgIC5tdWwob3JhY2xlUHJpY2VEYXRhLnByaWNlKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5CSURfQVNLX1NQUkVBRF9QUkVDSVNJT04pLCBvcmFjbGVQcmljZURhdGEuY29uZmlkZW5jZS5hZGQobmV3IGFuY2hvcl8xLkJOKG1hcmtldC5hbW0uYmFzZVNwcmVhZClcbiAgICAgICAgLm11bChvcmFjbGVQcmljZURhdGEucHJpY2UpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTikpKTtcbiAgICBsZXQgbWFyZ2luUHJpY2U7XG4gICAgaWYgKHBlcnBQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIG1hcmdpblByaWNlID0gb3JhY2xlUHJpY2VEYXRhLnByaWNlLnN1YihvcmFjbGVQcmljZU9mZnNldCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXJnaW5QcmljZSA9IG9yYWNsZVByaWNlRGF0YS5wcmljZS5hZGQob3JhY2xlUHJpY2VPZmZzZXQpO1xuICAgIH1cbiAgICByZXR1cm4gbWFyZ2luUHJpY2U7XG59XG5leHBvcnRzLmNhbGN1bGF0ZU9yYWNsZVByaWNlRm9yUGVycE1hcmdpbiA9IGNhbGN1bGF0ZU9yYWNsZVByaWNlRm9yUGVycE1hcmdpbjtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhc2VBc3NldFZhbHVlV2l0aE9yYWNsZShtYXJrZXQsIHBlcnBQb3NpdGlvbiwgb3JhY2xlUHJpY2VEYXRhLCBpbmNsdWRlT3Blbk9yZGVycyA9IGZhbHNlKSB7XG4gICAgbGV0IHByaWNlID0gb3JhY2xlUHJpY2VEYXRhLnByaWNlO1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG1hcmtldC5zdGF0dXMsICdzZXR0bGVtZW50JykpIHtcbiAgICAgICAgcHJpY2UgPSBtYXJrZXQuZXhwaXJ5UHJpY2U7XG4gICAgfVxuICAgIGNvbnN0IGJhc2VBc3NldEFtb3VudCA9IGluY2x1ZGVPcGVuT3JkZXJzXG4gICAgICAgID8gY2FsY3VsYXRlV29yc3RDYXNlQmFzZUFzc2V0QW1vdW50KHBlcnBQb3NpdGlvbilcbiAgICAgICAgOiBwZXJwUG9zaXRpb24uYmFzZUFzc2V0QW1vdW50O1xuICAgIHJldHVybiBiYXNlQXNzZXRBbW91bnQuYWJzKCkubXVsKHByaWNlKS5kaXYobnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTik7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUJhc2VBc3NldFZhbHVlV2l0aE9yYWNsZSA9IGNhbGN1bGF0ZUJhc2VBc3NldFZhbHVlV2l0aE9yYWNsZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZVdvcnN0Q2FzZUJhc2VBc3NldEFtb3VudChwZXJwUG9zaXRpb24pIHtcbiAgICBjb25zdCBhbGxCaWRzID0gcGVycFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5hZGQocGVycFBvc2l0aW9uLm9wZW5CaWRzKTtcbiAgICBjb25zdCBhbGxBc2tzID0gcGVycFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5hZGQocGVycFBvc2l0aW9uLm9wZW5Bc2tzKTtcbiAgICBpZiAoYWxsQmlkcy5hYnMoKS5ndChhbGxBc2tzLmFicygpKSkge1xuICAgICAgICByZXR1cm4gYWxsQmlkcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhbGxBc2tzO1xuICAgIH1cbn1cbmV4cG9ydHMuY2FsY3VsYXRlV29yc3RDYXNlQmFzZUFzc2V0QW1vdW50ID0gY2FsY3VsYXRlV29yc3RDYXNlQmFzZUFzc2V0QW1vdW50O1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY2FsY3VsYXRlV29yc3RDYXNlQmFzZUFzc2V0QW1vdW50IiwiY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWVXaXRoT3JhY2xlIiwiY2FsY3VsYXRlT3JhY2xlUHJpY2VGb3JQZXJwTWFyZ2luIiwiY2FsY3VsYXRlU2l6ZURpc2NvdW50QXNzZXRXZWlnaHQiLCJjYWxjdWxhdGVTaXplUHJlbWl1bUxpYWJpbGl0eVdlaWdodCIsInV0aWxzXzEiLCJyZXF1aXJlIiwibnVtZXJpY0NvbnN0YW50c18xIiwiYW5jaG9yXzEiLCJ0eXBlc18xIiwiYXNzZXJ0XzEiLCJzaXplIiwiaW1mRmFjdG9yIiwibGlhYmlsaXR5V2VpZ2h0IiwicHJlY2lzaW9uIiwiZXEiLCJaRVJPIiwic2l6ZVNxcnQiLCJzcXVhcmVSb290Qk4iLCJhYnMiLCJtdWwiLCJCTiIsImFkZCIsImxpYWJpbGl0eVdlaWdodE51bWVyYXRvciIsInN1YiIsImRpdiIsImRlbm9tIiwiU1BPVF9NQVJLRVRfSU1GX1BSRUNJU0lPTiIsImFzc2VydCIsImd0Iiwic2l6ZVByZW1pdW1MaWFiaWxpdHlXZWlnaHQiLCJtYXhMaWFiaWxpdHlXZWlnaHQiLCJtYXgiLCJhc3NldFdlaWdodCIsImltZk51bWVyYXRvciIsInNpemVEaXNjb3VudEFzc2V0V2VpZ2h0IiwiU1BPVF9NQVJLRVRfV0VJR0hUX1BSRUNJU0lPTiIsIm1pbkFzc2V0V2VpZ2h0IiwibWluIiwicGVycFBvc2l0aW9uIiwibWFya2V0Iiwib3JhY2xlUHJpY2VEYXRhIiwib3JhY2xlUHJpY2VPZmZzZXQiLCJhbW0iLCJtYXhTcHJlYWQiLCJwcmljZSIsIkJJRF9BU0tfU1BSRUFEX1BSRUNJU0lPTiIsImNvbmZpZGVuY2UiLCJiYXNlU3ByZWFkIiwibWFyZ2luUHJpY2UiLCJiYXNlQXNzZXRBbW91bnQiLCJpbmNsdWRlT3Blbk9yZGVycyIsImlzVmFyaWFudCIsInN0YXR1cyIsImV4cGlyeVByaWNlIiwiQU1NX1JFU0VSVkVfUFJFQ0lTSU9OIiwiYWxsQmlkcyIsIm9wZW5CaWRzIiwiYWxsQXNrcyIsIm9wZW5Bc2tzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/margin.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/market.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/market.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateAvailablePerpLiquidity = exports.calculateNetUserPnlImbalance = exports.calculateNetUserPnl = exports.calculateMarketMaxAvailableInsurance = exports.calculateMarketAvailablePNL = exports.calculateUnrealizedAssetWeight = exports.calculateMarketMarginRatio = exports.calculateOracleSpread = exports.calculateOracleReserveSpread = exports.calculateNewMarketAfterTrade = exports.calculateAskPrice = exports.calculateBidPrice = exports.calculateReservePrice = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst amm_1 = __webpack_require__(/*! ./amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\");\nconst margin_1 = __webpack_require__(/*! ./margin */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/margin.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst spotBalance_1 = __webpack_require__(/*! ./spotBalance */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js\");\nconst assert_1 = __webpack_require__(/*! ../assert/assert */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\");\n/**\n * Calculates market mark price\n *\n * @param market\n * @return markPrice : Precision PRICE_PRECISION\n */ function calculateReservePrice(market, oraclePriceData) {\n    const newAmm = (0, amm_1.calculateUpdatedAMM)(market.amm, oraclePriceData);\n    return (0, amm_1.calculatePrice)(newAmm.baseAssetReserve, newAmm.quoteAssetReserve, newAmm.pegMultiplier);\n}\nexports.calculateReservePrice = calculateReservePrice;\n/**\n * Calculates market bid price\n *\n * @param market\n * @return bidPrice : Precision PRICE_PRECISION\n */ function calculateBidPrice(market, oraclePriceData) {\n    const { baseAssetReserve, quoteAssetReserve, newPeg } = (0, amm_1.calculateUpdatedAMMSpreadReserves)(market.amm, types_1.PositionDirection.SHORT, oraclePriceData);\n    return (0, amm_1.calculatePrice)(baseAssetReserve, quoteAssetReserve, newPeg);\n}\nexports.calculateBidPrice = calculateBidPrice;\n/**\n * Calculates market ask price\n *\n * @param market\n * @return askPrice : Precision PRICE_PRECISION\n */ function calculateAskPrice(market, oraclePriceData) {\n    const { baseAssetReserve, quoteAssetReserve, newPeg } = (0, amm_1.calculateUpdatedAMMSpreadReserves)(market.amm, types_1.PositionDirection.LONG, oraclePriceData);\n    return (0, amm_1.calculatePrice)(baseAssetReserve, quoteAssetReserve, newPeg);\n}\nexports.calculateAskPrice = calculateAskPrice;\nfunction calculateNewMarketAfterTrade(baseAssetAmount, direction, market) {\n    const [newQuoteAssetReserve, newBaseAssetReserve] = (0, amm_1.calculateAmmReservesAfterSwap)(market.amm, \"base\", baseAssetAmount.abs(), (0, amm_1.getSwapDirection)(\"base\", direction));\n    const newAmm = Object.assign({}, market.amm);\n    const newMarket = Object.assign({}, market);\n    newMarket.amm = newAmm;\n    newMarket.amm.quoteAssetReserve = newQuoteAssetReserve;\n    newMarket.amm.baseAssetReserve = newBaseAssetReserve;\n    return newMarket;\n}\nexports.calculateNewMarketAfterTrade = calculateNewMarketAfterTrade;\nfunction calculateOracleReserveSpread(market, oraclePriceData) {\n    const reservePrice = calculateReservePrice(market, oraclePriceData);\n    return calculateOracleSpread(reservePrice, oraclePriceData);\n}\nexports.calculateOracleReserveSpread = calculateOracleReserveSpread;\nfunction calculateOracleSpread(price, oraclePriceData) {\n    return price.sub(oraclePriceData.price);\n}\nexports.calculateOracleSpread = calculateOracleSpread;\nfunction calculateMarketMarginRatio(market, size, marginCategory) {\n    let marginRatio;\n    switch(marginCategory){\n        case \"Initial\":\n            {\n                marginRatio = (0, margin_1.calculateSizePremiumLiabilityWeight)(size, new anchor_1.BN(market.imfFactor), new anchor_1.BN(market.marginRatioInitial), numericConstants_1.MARGIN_PRECISION).toNumber();\n                break;\n            }\n        case \"Maintenance\":\n            {\n                marginRatio = (0, margin_1.calculateSizePremiumLiabilityWeight)(size, new anchor_1.BN(market.imfFactor), new anchor_1.BN(market.marginRatioMaintenance), numericConstants_1.MARGIN_PRECISION).toNumber();\n                break;\n            }\n    }\n    return marginRatio;\n}\nexports.calculateMarketMarginRatio = calculateMarketMarginRatio;\nfunction calculateUnrealizedAssetWeight(market, quoteSpotMarket, unrealizedPnl, marginCategory, oraclePriceData) {\n    let assetWeight;\n    switch(marginCategory){\n        case \"Initial\":\n            assetWeight = new anchor_1.BN(market.unrealizedPnlInitialAssetWeight);\n            if (market.unrealizedPnlMaxImbalance.gt(numericConstants_1.ZERO)) {\n                const netUnsettledPnl = calculateNetUserPnlImbalance(market, quoteSpotMarket, oraclePriceData);\n                if (netUnsettledPnl.gt(market.unrealizedPnlMaxImbalance)) {\n                    assetWeight = assetWeight.mul(market.unrealizedPnlMaxImbalance).div(netUnsettledPnl);\n                }\n            }\n            assetWeight = (0, margin_1.calculateSizeDiscountAssetWeight)(unrealizedPnl, new anchor_1.BN(market.unrealizedPnlImfFactor), assetWeight);\n            break;\n        case \"Maintenance\":\n            assetWeight = new anchor_1.BN(market.unrealizedPnlMaintenanceAssetWeight);\n            break;\n    }\n    return assetWeight;\n}\nexports.calculateUnrealizedAssetWeight = calculateUnrealizedAssetWeight;\nfunction calculateMarketAvailablePNL(perpMarket, spotMarket) {\n    return (0, spotBalance_1.getTokenAmount)(perpMarket.pnlPool.scaledBalance, spotMarket, types_1.SpotBalanceType.DEPOSIT);\n}\nexports.calculateMarketAvailablePNL = calculateMarketAvailablePNL;\nfunction calculateMarketMaxAvailableInsurance(perpMarket, spotMarket) {\n    (0, assert_1.assert)(spotMarket.marketIndex == numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n    // todo: insuranceFundAllocation technically not guaranteed to be in Insurance Fund\n    const insuranceFundAllocation = perpMarket.insuranceClaim.quoteMaxInsurance.sub(perpMarket.insuranceClaim.quoteSettledInsurance);\n    const ammFeePool = (0, spotBalance_1.getTokenAmount)(perpMarket.amm.feePool.scaledBalance, spotMarket, types_1.SpotBalanceType.DEPOSIT);\n    return insuranceFundAllocation.add(ammFeePool);\n}\nexports.calculateMarketMaxAvailableInsurance = calculateMarketMaxAvailableInsurance;\nfunction calculateNetUserPnl(perpMarket, oraclePriceData) {\n    const netUserPositionValue = perpMarket.amm.baseAssetAmountWithAmm.mul(oraclePriceData.price).div(numericConstants_1.BASE_PRECISION).div(numericConstants_1.PRICE_TO_QUOTE_PRECISION);\n    const netUserCostBasis = perpMarket.amm.quoteAssetAmount;\n    const netUserPnl = netUserPositionValue.add(netUserCostBasis);\n    return netUserPnl;\n}\nexports.calculateNetUserPnl = calculateNetUserPnl;\nfunction calculateNetUserPnlImbalance(perpMarket, spotMarket, oraclePriceData) {\n    const netUserPnl = calculateNetUserPnl(perpMarket, oraclePriceData);\n    const pnlPool = (0, spotBalance_1.getTokenAmount)(perpMarket.pnlPool.scaledBalance, spotMarket, types_1.SpotBalanceType.DEPOSIT);\n    const feePool = (0, spotBalance_1.getTokenAmount)(perpMarket.amm.feePool.scaledBalance, spotMarket, types_1.SpotBalanceType.DEPOSIT);\n    const imbalance = netUserPnl.sub(pnlPool.add(feePool));\n    return imbalance;\n}\nexports.calculateNetUserPnlImbalance = calculateNetUserPnlImbalance;\nfunction calculateAvailablePerpLiquidity(market, oraclePriceData, dlob, slot) {\n    let [bids, asks] = (0, amm_1.calculateMarketOpenBidAsk)(market.amm.baseAssetReserve, market.amm.minBaseAssetReserve, market.amm.maxBaseAssetReserve, market.amm.orderStepSize);\n    asks = asks.abs();\n    const bidPrice = calculateBidPrice(market, oraclePriceData);\n    const askPrice = calculateAskPrice(market, oraclePriceData);\n    for (const bid of dlob.getMakerLimitBids(market.marketIndex, slot, types_1.MarketType.PERP, oraclePriceData, askPrice)){\n        bids = bids.add(bid.order.baseAssetAmount.sub(bid.order.baseAssetAmountFilled));\n    }\n    for (const ask of dlob.getMakerLimitAsks(market.marketIndex, slot, types_1.MarketType.PERP, oraclePriceData, bidPrice)){\n        asks = asks.add(ask.order.baseAssetAmount.sub(ask.order.baseAssetAmountFilled));\n    }\n    return {\n        bids: bids,\n        asks: asks\n    };\n}\nexports.calculateAvailablePerpLiquidity = calculateAvailablePerpLiquidity;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL21hcmtldC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsdUNBQXVDLEdBQUdBLG9DQUFvQyxHQUFHQSwyQkFBMkIsR0FBR0EsNENBQTRDLEdBQUdBLG1DQUFtQyxHQUFHQSxzQ0FBc0MsR0FBR0Esa0NBQWtDLEdBQUdBLDZCQUE2QixHQUFHQSxvQ0FBb0MsR0FBR0Esb0NBQW9DLEdBQUdBLHlCQUF5QixHQUFHQSx5QkFBeUIsR0FBR0EsNkJBQTZCLEdBQUcsS0FBSztBQUM3ZCxNQUFNZSxXQUFXQyxtQkFBT0EsQ0FBQyxtRkFBbUI7QUFDNUMsTUFBTUMsVUFBVUQsbUJBQU9BLENBQUMsbUVBQVU7QUFDbEMsTUFBTUUsUUFBUUYsbUJBQU9BLENBQUMsbUVBQU87QUFDN0IsTUFBTUcsV0FBV0gsbUJBQU9BLENBQUMseUVBQVU7QUFDbkMsTUFBTUkscUJBQXFCSixtQkFBT0EsQ0FBQyw2R0FBK0I7QUFDbEUsTUFBTUssZ0JBQWdCTCxtQkFBT0EsQ0FBQyxtRkFBZTtBQUM3QyxNQUFNTSxXQUFXTixtQkFBT0EsQ0FBQyxtRkFBa0I7QUFDM0M7Ozs7O0NBS0MsR0FDRCxTQUFTRixzQkFBc0JTLE1BQU0sRUFBRUMsZUFBZTtJQUNsRCxNQUFNQyxTQUFTLENBQUMsR0FBR1AsTUFBTVEsbUJBQW1CLEVBQUVILE9BQU9JLEdBQUcsRUFBRUg7SUFDMUQsT0FBTyxDQUFDLEdBQUdOLE1BQU1VLGNBQWMsRUFBRUgsT0FBT0ksZ0JBQWdCLEVBQUVKLE9BQU9LLGlCQUFpQixFQUFFTCxPQUFPTSxhQUFhO0FBQzVHO0FBQ0EvQiw2QkFBNkIsR0FBR2M7QUFDaEM7Ozs7O0NBS0MsR0FDRCxTQUFTRCxrQkFBa0JVLE1BQU0sRUFBRUMsZUFBZTtJQUM5QyxNQUFNLEVBQUVLLGdCQUFnQixFQUFFQyxpQkFBaUIsRUFBRUUsTUFBTSxF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QUcsQ0FBQ0UsZ0JBQWdCLEVBQUVOLE9BQU9JLEdBQUcsQ0FBQzJFLG1CQUFtQixFQUFFL0UsT0FBT0ksR0FBRyxDQUFDNEUsbUJBQW1CLEVBQUVoRixPQUFPSSxHQUFHLENBQUM2RSxhQUFhO0lBQzdLSixPQUFPQSxLQUFLMUQsR0FBRztJQUNmLE1BQU0rRCxXQUFXNUYsa0JBQWtCVSxRQUFRQztJQUMzQyxNQUFNa0YsV0FBVzlGLGtCQUFrQlcsUUFBUUM7SUFDM0MsS0FBSyxNQUFNbUYsT0FBT1YsS0FBS1csaUJBQWlCLENBQUNyRixPQUFPeUQsV0FBVyxFQUFFa0IsTUFBTWpGLFFBQVE0RixVQUFVLENBQUNDLElBQUksRUFBRXRGLGlCQUFpQmtGLFVBQVc7UUFDcEhQLE9BQU9BLEtBQUtYLEdBQUcsQ0FBQ21CLElBQUlJLEtBQUssQ0FBQzFFLGVBQWUsQ0FBQ1csR0FBRyxDQUFDMkQsSUFBSUksS0FBSyxDQUFDQyxxQkFBcUI7SUFDakY7SUFDQSxLQUFLLE1BQU1DLE9BQU9oQixLQUFLaUIsaUJBQWlCLENBQUMzRixPQUFPeUQsV0FBVyxFQUFFa0IsTUFBTWpGLFFBQVE0RixVQUFVLENBQUNDLElBQUksRUFBRXRGLGlCQUFpQmlGLFVBQVc7UUFDcEhMLE9BQU9BLEtBQUtaLEdBQUcsQ0FBQ3lCLElBQUlGLEtBQUssQ0FBQzFFLGVBQWUsQ0FBQ1csR0FBRyxDQUFDaUUsSUFBSUYsS0FBSyxDQUFDQyxxQkFBcUI7SUFDakY7SUFDQSxPQUFPO1FBQ0hiLE1BQU1BO1FBQ05DLE1BQU1BO0lBQ1Y7QUFDSjtBQUNBcEcsdUNBQXVDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvbWFya2V0LmpzP2ZlODAiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNhbGN1bGF0ZUF2YWlsYWJsZVBlcnBMaXF1aWRpdHkgPSBleHBvcnRzLmNhbGN1bGF0ZU5ldFVzZXJQbmxJbWJhbGFuY2UgPSBleHBvcnRzLmNhbGN1bGF0ZU5ldFVzZXJQbmwgPSBleHBvcnRzLmNhbGN1bGF0ZU1hcmtldE1heEF2YWlsYWJsZUluc3VyYW5jZSA9IGV4cG9ydHMuY2FsY3VsYXRlTWFya2V0QXZhaWxhYmxlUE5MID0gZXhwb3J0cy5jYWxjdWxhdGVVbnJlYWxpemVkQXNzZXRXZWlnaHQgPSBleHBvcnRzLmNhbGN1bGF0ZU1hcmtldE1hcmdpblJhdGlvID0gZXhwb3J0cy5jYWxjdWxhdGVPcmFjbGVTcHJlYWQgPSBleHBvcnRzLmNhbGN1bGF0ZU9yYWNsZVJlc2VydmVTcHJlYWQgPSBleHBvcnRzLmNhbGN1bGF0ZU5ld01hcmtldEFmdGVyVHJhZGUgPSBleHBvcnRzLmNhbGN1bGF0ZUFza1ByaWNlID0gZXhwb3J0cy5jYWxjdWxhdGVCaWRQcmljZSA9IGV4cG9ydHMuY2FsY3VsYXRlUmVzZXJ2ZVByaWNlID0gdm9pZCAwO1xuY29uc3QgYW5jaG9yXzEgPSByZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIik7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4uL3R5cGVzXCIpO1xuY29uc3QgYW1tXzEgPSByZXF1aXJlKFwiLi9hbW1cIik7XG5jb25zdCBtYXJnaW5fMSA9IHJlcXVpcmUoXCIuL21hcmdpblwiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IHNwb3RCYWxhbmNlXzEgPSByZXF1aXJlKFwiLi9zcG90QmFsYW5jZVwiKTtcbmNvbnN0IGFzc2VydF8xID0gcmVxdWlyZShcIi4uL2Fzc2VydC9hc3NlcnRcIik7XG4vKipcbiAqIENhbGN1bGF0ZXMgbWFya2V0IG1hcmsgcHJpY2VcbiAqXG4gKiBAcGFyYW0gbWFya2V0XG4gKiBAcmV0dXJuIG1hcmtQcmljZSA6IFByZWNpc2lvbiBQUklDRV9QUkVDSVNJT05cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlUmVzZXJ2ZVByaWNlKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgY29uc3QgbmV3QW1tID0gKDAsIGFtbV8xLmNhbGN1bGF0ZVVwZGF0ZWRBTU0pKG1hcmtldC5hbW0sIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgcmV0dXJuICgwLCBhbW1fMS5jYWxjdWxhdGVQcmljZSkobmV3QW1tLmJhc2VBc3NldFJlc2VydmUsIG5ld0FtbS5xdW90ZUFzc2V0UmVzZXJ2ZSwgbmV3QW1tLnBlZ011bHRpcGxpZXIpO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVSZXNlcnZlUHJpY2UgPSBjYWxjdWxhdGVSZXNlcnZlUHJpY2U7XG4vKipcbiAqIENhbGN1bGF0ZXMgbWFya2V0IGJpZCBwcmljZVxuICpcbiAqIEBwYXJhbSBtYXJrZXRcbiAqIEByZXR1cm4gYmlkUHJpY2UgOiBQcmVjaXNpb24gUFJJQ0VfUFJFQ0lTSU9OXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUJpZFByaWNlKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgY29uc3QgeyBiYXNlQXNzZXRSZXNlcnZlLCBxdW90ZUFzc2V0UmVzZXJ2ZSwgbmV3UGVnIH0gPSAoMCwgYW1tXzEuY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzKShtYXJrZXQuYW1tLCB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JULCBvcmFjbGVQcmljZURhdGEpO1xuICAgIHJldHVybiAoMCwgYW1tXzEuY2FsY3VsYXRlUHJpY2UpKGJhc2VBc3NldFJlc2VydmUsIHF1b3RlQXNzZXRSZXNlcnZlLCBuZXdQZWcpO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVCaWRQcmljZSA9IGNhbGN1bGF0ZUJpZFByaWNlO1xuLyoqXG4gKiBDYWxjdWxhdGVzIG1hcmtldCBhc2sgcHJpY2VcbiAqXG4gKiBAcGFyYW0gbWFya2V0XG4gKiBAcmV0dXJuIGFza1ByaWNlIDogUHJlY2lzaW9uIFBSSUNFX1BSRUNJU0lPTlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVBc2tQcmljZShtYXJrZXQsIG9yYWNsZVByaWNlRGF0YSkge1xuICAgIGNvbnN0IHsgYmFzZUFzc2V0UmVzZXJ2ZSwgcXVvdGVBc3NldFJlc2VydmUsIG5ld1BlZyB9ID0gKDAsIGFtbV8xLmNhbGN1bGF0ZVVwZGF0ZWRBTU1TcHJlYWRSZXNlcnZlcykobWFya2V0LmFtbSwgdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HLCBvcmFjbGVQcmljZURhdGEpO1xuICAgIHJldHVybiAoMCwgYW1tXzEuY2FsY3VsYXRlUHJpY2UpKGJhc2VBc3NldFJlc2VydmUsIHF1b3RlQXNzZXRSZXNlcnZlLCBuZXdQZWcpO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVBc2tQcmljZSA9IGNhbGN1bGF0ZUFza1ByaWNlO1xuZnVuY3Rpb24gY2FsY3VsYXRlTmV3TWFya2V0QWZ0ZXJUcmFkZShiYXNlQXNzZXRBbW91bnQsIGRpcmVjdGlvbiwgbWFya2V0KSB7XG4gICAgY29uc3QgW25ld1F1b3RlQXNzZXRSZXNlcnZlLCBuZXdCYXNlQXNzZXRSZXNlcnZlXSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVBbW1SZXNlcnZlc0FmdGVyU3dhcCkobWFya2V0LmFtbSwgJ2Jhc2UnLCBiYXNlQXNzZXRBbW91bnQuYWJzKCksICgwLCBhbW1fMS5nZXRTd2FwRGlyZWN0aW9uKSgnYmFzZScsIGRpcmVjdGlvbikpO1xuICAgIGNvbnN0IG5ld0FtbSA9IE9iamVjdC5hc3NpZ24oe30sIG1hcmtldC5hbW0pO1xuICAgIGNvbnN0IG5ld01hcmtldCA9IE9iamVjdC5hc3NpZ24oe30sIG1hcmtldCk7XG4gICAgbmV3TWFya2V0LmFtbSA9IG5ld0FtbTtcbiAgICBuZXdNYXJrZXQuYW1tLnF1b3RlQXNzZXRSZXNlcnZlID0gbmV3UXVvdGVBc3NldFJlc2VydmU7XG4gICAgbmV3TWFya2V0LmFtbS5iYXNlQXNzZXRSZXNlcnZlID0gbmV3QmFzZUFzc2V0UmVzZXJ2ZTtcbiAgICByZXR1cm4gbmV3TWFya2V0O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVOZXdNYXJrZXRBZnRlclRyYWRlID0gY2FsY3VsYXRlTmV3TWFya2V0QWZ0ZXJUcmFkZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZU9yYWNsZVJlc2VydmVTcHJlYWQobWFya2V0LCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBjb25zdCByZXNlcnZlUHJpY2UgPSBjYWxjdWxhdGVSZXNlcnZlUHJpY2UobWFya2V0LCBvcmFjbGVQcmljZURhdGEpO1xuICAgIHJldHVybiBjYWxjdWxhdGVPcmFjbGVTcHJlYWQocmVzZXJ2ZVByaWNlLCBvcmFjbGVQcmljZURhdGEpO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVPcmFjbGVSZXNlcnZlU3ByZWFkID0gY2FsY3VsYXRlT3JhY2xlUmVzZXJ2ZVNwcmVhZDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZU9yYWNsZVNwcmVhZChwcmljZSwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgcmV0dXJuIHByaWNlLnN1YihvcmFjbGVQcmljZURhdGEucHJpY2UpO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVPcmFjbGVTcHJlYWQgPSBjYWxjdWxhdGVPcmFjbGVTcHJlYWQ7XG5mdW5jdGlvbiBjYWxjdWxhdGVNYXJrZXRNYXJnaW5SYXRpbyhtYXJrZXQsIHNpemUsIG1hcmdpbkNhdGVnb3J5KSB7XG4gICAgbGV0IG1hcmdpblJhdGlvO1xuICAgIHN3aXRjaCAobWFyZ2luQ2F0ZWdvcnkpIHtcbiAgICAgICAgY2FzZSAnSW5pdGlhbCc6IHtcbiAgICAgICAgICAgIG1hcmdpblJhdGlvID0gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVNpemVQcmVtaXVtTGlhYmlsaXR5V2VpZ2h0KShzaXplLCBuZXcgYW5jaG9yXzEuQk4obWFya2V0LmltZkZhY3RvciksIG5ldyBhbmNob3JfMS5CTihtYXJrZXQubWFyZ2luUmF0aW9Jbml0aWFsKSwgbnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pLnRvTnVtYmVyKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdNYWludGVuYW5jZSc6IHtcbiAgICAgICAgICAgIG1hcmdpblJhdGlvID0gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVNpemVQcmVtaXVtTGlhYmlsaXR5V2VpZ2h0KShzaXplLCBuZXcgYW5jaG9yXzEuQk4obWFya2V0LmltZkZhY3RvciksIG5ldyBhbmNob3JfMS5CTihtYXJrZXQubWFyZ2luUmF0aW9NYWludGVuYW5jZSksIG51bWVyaWNDb25zdGFudHNfMS5NQVJHSU5fUFJFQ0lTSU9OKS50b051bWJlcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcmdpblJhdGlvO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVNYXJrZXRNYXJnaW5SYXRpbyA9IGNhbGN1bGF0ZU1hcmtldE1hcmdpblJhdGlvO1xuZnVuY3Rpb24gY2FsY3VsYXRlVW5yZWFsaXplZEFzc2V0V2VpZ2h0KG1hcmtldCwgcXVvdGVTcG90TWFya2V0LCB1bnJlYWxpemVkUG5sLCBtYXJnaW5DYXRlZ29yeSwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgbGV0IGFzc2V0V2VpZ2h0O1xuICAgIHN3aXRjaCAobWFyZ2luQ2F0ZWdvcnkpIHtcbiAgICAgICAgY2FzZSAnSW5pdGlhbCc6XG4gICAgICAgICAgICBhc3NldFdlaWdodCA9IG5ldyBhbmNob3JfMS5CTihtYXJrZXQudW5yZWFsaXplZFBubEluaXRpYWxBc3NldFdlaWdodCk7XG4gICAgICAgICAgICBpZiAobWFya2V0LnVucmVhbGl6ZWRQbmxNYXhJbWJhbGFuY2UuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV0VW5zZXR0bGVkUG5sID0gY2FsY3VsYXRlTmV0VXNlclBubEltYmFsYW5jZShtYXJrZXQsIHF1b3RlU3BvdE1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAobmV0VW5zZXR0bGVkUG5sLmd0KG1hcmtldC51bnJlYWxpemVkUG5sTWF4SW1iYWxhbmNlKSkge1xuICAgICAgICAgICAgICAgICAgICBhc3NldFdlaWdodCA9IGFzc2V0V2VpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICAubXVsKG1hcmtldC51bnJlYWxpemVkUG5sTWF4SW1iYWxhbmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpdihuZXRVbnNldHRsZWRQbmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2V0V2VpZ2h0ID0gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVNpemVEaXNjb3VudEFzc2V0V2VpZ2h0KSh1bnJlYWxpemVkUG5sLCBuZXcgYW5jaG9yXzEuQk4obWFya2V0LnVucmVhbGl6ZWRQbmxJbWZGYWN0b3IpLCBhc3NldFdlaWdodCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFpbnRlbmFuY2UnOlxuICAgICAgICAgICAgYXNzZXRXZWlnaHQgPSBuZXcgYW5jaG9yXzEuQk4obWFya2V0LnVucmVhbGl6ZWRQbmxNYWludGVuYW5jZUFzc2V0V2VpZ2h0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gYXNzZXRXZWlnaHQ7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVVucmVhbGl6ZWRBc3NldFdlaWdodCA9IGNhbGN1bGF0ZVVucmVhbGl6ZWRBc3NldFdlaWdodDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZU1hcmtldEF2YWlsYWJsZVBOTChwZXJwTWFya2V0LCBzcG90TWFya2V0KSB7XG4gICAgcmV0dXJuICgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShwZXJwTWFya2V0LnBubFBvb2wuc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldCwgdHlwZXNfMS5TcG90QmFsYW5jZVR5cGUuREVQT1NJVCk7XG59XG5leHBvcnRzLmNhbGN1bGF0ZU1hcmtldEF2YWlsYWJsZVBOTCA9IGNhbGN1bGF0ZU1hcmtldEF2YWlsYWJsZVBOTDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZU1hcmtldE1heEF2YWlsYWJsZUluc3VyYW5jZShwZXJwTWFya2V0LCBzcG90TWFya2V0KSB7XG4gICAgKDAsIGFzc2VydF8xLmFzc2VydCkoc3BvdE1hcmtldC5tYXJrZXRJbmRleCA9PSBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgpO1xuICAgIC8vIHRvZG86IGluc3VyYW5jZUZ1bmRBbGxvY2F0aW9uIHRlY2huaWNhbGx5IG5vdCBndWFyYW50ZWVkIHRvIGJlIGluIEluc3VyYW5jZSBGdW5kXG4gICAgY29uc3QgaW5zdXJhbmNlRnVuZEFsbG9jYXRpb24gPSBwZXJwTWFya2V0Lmluc3VyYW5jZUNsYWltLnF1b3RlTWF4SW5zdXJhbmNlLnN1YihwZXJwTWFya2V0Lmluc3VyYW5jZUNsYWltLnF1b3RlU2V0dGxlZEluc3VyYW5jZSk7XG4gICAgY29uc3QgYW1tRmVlUG9vbCA9ICgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShwZXJwTWFya2V0LmFtbS5mZWVQb29sLnNjYWxlZEJhbGFuY2UsIHNwb3RNYXJrZXQsIHR5cGVzXzEuU3BvdEJhbGFuY2VUeXBlLkRFUE9TSVQpO1xuICAgIHJldHVybiBpbnN1cmFuY2VGdW5kQWxsb2NhdGlvbi5hZGQoYW1tRmVlUG9vbCk7XG59XG5leHBvcnRzLmNhbGN1bGF0ZU1hcmtldE1heEF2YWlsYWJsZUluc3VyYW5jZSA9IGNhbGN1bGF0ZU1hcmtldE1heEF2YWlsYWJsZUluc3VyYW5jZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZU5ldFVzZXJQbmwocGVycE1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgY29uc3QgbmV0VXNlclBvc2l0aW9uVmFsdWUgPSBwZXJwTWFya2V0LmFtbS5iYXNlQXNzZXRBbW91bnRXaXRoQW1tXG4gICAgICAgIC5tdWwob3JhY2xlUHJpY2VEYXRhLnByaWNlKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5CQVNFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfVE9fUVVPVEVfUFJFQ0lTSU9OKTtcbiAgICBjb25zdCBuZXRVc2VyQ29zdEJhc2lzID0gcGVycE1hcmtldC5hbW0ucXVvdGVBc3NldEFtb3VudDtcbiAgICBjb25zdCBuZXRVc2VyUG5sID0gbmV0VXNlclBvc2l0aW9uVmFsdWUuYWRkKG5ldFVzZXJDb3N0QmFzaXMpO1xuICAgIHJldHVybiBuZXRVc2VyUG5sO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVOZXRVc2VyUG5sID0gY2FsY3VsYXRlTmV0VXNlclBubDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZU5ldFVzZXJQbmxJbWJhbGFuY2UocGVycE1hcmtldCwgc3BvdE1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgY29uc3QgbmV0VXNlclBubCA9IGNhbGN1bGF0ZU5ldFVzZXJQbmwocGVycE1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBwbmxQb29sID0gKDAsIHNwb3RCYWxhbmNlXzEuZ2V0VG9rZW5BbW91bnQpKHBlcnBNYXJrZXQucG5sUG9vbC5zY2FsZWRCYWxhbmNlLCBzcG90TWFya2V0LCB0eXBlc18xLlNwb3RCYWxhbmNlVHlwZS5ERVBPU0lUKTtcbiAgICBjb25zdCBmZWVQb29sID0gKDAsIHNwb3RCYWxhbmNlXzEuZ2V0VG9rZW5BbW91bnQpKHBlcnBNYXJrZXQuYW1tLmZlZVBvb2wuc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldCwgdHlwZXNfMS5TcG90QmFsYW5jZVR5cGUuREVQT1NJVCk7XG4gICAgY29uc3QgaW1iYWxhbmNlID0gbmV0VXNlclBubC5zdWIocG5sUG9vbC5hZGQoZmVlUG9vbCkpO1xuICAgIHJldHVybiBpbWJhbGFuY2U7XG59XG5leHBvcnRzLmNhbGN1bGF0ZU5ldFVzZXJQbmxJbWJhbGFuY2UgPSBjYWxjdWxhdGVOZXRVc2VyUG5sSW1iYWxhbmNlO1xuZnVuY3Rpb24gY2FsY3VsYXRlQXZhaWxhYmxlUGVycExpcXVpZGl0eShtYXJrZXQsIG9yYWNsZVByaWNlRGF0YSwgZGxvYiwgc2xvdCkge1xuICAgIGxldCBbYmlkcywgYXNrc10gPSAoMCwgYW1tXzEuY2FsY3VsYXRlTWFya2V0T3BlbkJpZEFzaykobWFya2V0LmFtbS5iYXNlQXNzZXRSZXNlcnZlLCBtYXJrZXQuYW1tLm1pbkJhc2VBc3NldFJlc2VydmUsIG1hcmtldC5hbW0ubWF4QmFzZUFzc2V0UmVzZXJ2ZSwgbWFya2V0LmFtbS5vcmRlclN0ZXBTaXplKTtcbiAgICBhc2tzID0gYXNrcy5hYnMoKTtcbiAgICBjb25zdCBiaWRQcmljZSA9IGNhbGN1bGF0ZUJpZFByaWNlKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBhc2tQcmljZSA9IGNhbGN1bGF0ZUFza1ByaWNlKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBmb3IgKGNvbnN0IGJpZCBvZiBkbG9iLmdldE1ha2VyTGltaXRCaWRzKG1hcmtldC5tYXJrZXRJbmRleCwgc2xvdCwgdHlwZXNfMS5NYXJrZXRUeXBlLlBFUlAsIG9yYWNsZVByaWNlRGF0YSwgYXNrUHJpY2UpKSB7XG4gICAgICAgIGJpZHMgPSBiaWRzLmFkZChiaWQub3JkZXIuYmFzZUFzc2V0QW1vdW50LnN1YihiaWQub3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkKSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYXNrIG9mIGRsb2IuZ2V0TWFrZXJMaW1pdEFza3MobWFya2V0Lm1hcmtldEluZGV4LCBzbG90LCB0eXBlc18xLk1hcmtldFR5cGUuUEVSUCwgb3JhY2xlUHJpY2VEYXRhLCBiaWRQcmljZSkpIHtcbiAgICAgICAgYXNrcyA9IGFza3MuYWRkKGFzay5vcmRlci5iYXNlQXNzZXRBbW91bnQuc3ViKGFzay5vcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYmlkczogYmlkcyxcbiAgICAgICAgYXNrczogYXNrcyxcbiAgICB9O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVBdmFpbGFibGVQZXJwTGlxdWlkaXR5ID0gY2FsY3VsYXRlQXZhaWxhYmxlUGVycExpcXVpZGl0eTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbGN1bGF0ZUF2YWlsYWJsZVBlcnBMaXF1aWRpdHkiLCJjYWxjdWxhdGVOZXRVc2VyUG5sSW1iYWxhbmNlIiwiY2FsY3VsYXRlTmV0VXNlclBubCIsImNhbGN1bGF0ZU1hcmtldE1heEF2YWlsYWJsZUluc3VyYW5jZSIsImNhbGN1bGF0ZU1hcmtldEF2YWlsYWJsZVBOTCIsImNhbGN1bGF0ZVVucmVhbGl6ZWRBc3NldFdlaWdodCIsImNhbGN1bGF0ZU1hcmtldE1hcmdpblJhdGlvIiwiY2FsY3VsYXRlT3JhY2xlU3ByZWFkIiwiY2FsY3VsYXRlT3JhY2xlUmVzZXJ2ZVNwcmVhZCIsImNhbGN1bGF0ZU5ld01hcmtldEFmdGVyVHJhZGUiLCJjYWxjdWxhdGVBc2tQcmljZSIsImNhbGN1bGF0ZUJpZFByaWNlIiwiY2FsY3VsYXRlUmVzZXJ2ZVByaWNlIiwiYW5jaG9yXzEiLCJyZXF1aXJlIiwidHlwZXNfMSIsImFtbV8xIiwibWFyZ2luXzEiLCJudW1lcmljQ29uc3RhbnRzXzEiLCJzcG90QmFsYW5jZV8xIiwiYXNzZXJ0XzEiLCJtYXJrZXQiLCJvcmFjbGVQcmljZURhdGEiLCJuZXdBbW0iLCJjYWxjdWxhdGVVcGRhdGVkQU1NIiwiYW1tIiwiY2FsY3VsYXRlUHJpY2UiLCJiYXNlQXNzZXRSZXNlcnZlIiwicXVvdGVBc3NldFJlc2VydmUiLCJwZWdNdWx0aXBsaWVyIiwibmV3UGVnIiwiY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzIiwiUG9zaXRpb25EaXJlY3Rpb24iLCJTSE9SVCIsIkxPTkciLCJiYXNlQXNzZXRBbW91bnQiLCJkaXJlY3Rpb24iLCJuZXdRdW90ZUFzc2V0UmVzZXJ2ZSIsIm5ld0Jhc2VBc3NldFJlc2VydmUiLCJjYWxjdWxhdGVBbW1SZXNlcnZlc0FmdGVyU3dhcCIsImFicyIsImdldFN3YXBEaXJlY3Rpb24iLCJhc3NpZ24iLCJuZXdNYXJrZXQiLCJyZXNlcnZlUHJpY2UiLCJwcmljZSIsInN1YiIsInNpemUiLCJtYXJnaW5DYXRlZ29yeSIsIm1hcmdpblJhdGlvIiwiY2FsY3VsYXRlU2l6ZVByZW1pdW1MaWFiaWxpdHlXZWlnaHQiLCJCTiIsImltZkZhY3RvciIsIm1hcmdpblJhdGlvSW5pdGlhbCIsIk1BUkdJTl9QUkVDSVNJT04iLCJ0b051bWJlciIsIm1hcmdpblJhdGlvTWFpbnRlbmFuY2UiLCJxdW90ZVNwb3RNYXJrZXQiLCJ1bnJlYWxpemVkUG5sIiwiYXNzZXRXZWlnaHQiLCJ1bnJlYWxpemVkUG5sSW5pdGlhbEFzc2V0V2VpZ2h0IiwidW5yZWFsaXplZFBubE1heEltYmFsYW5jZSIsImd0IiwiWkVSTyIsIm5ldFVuc2V0dGxlZFBubCIsIm11bCIsImRpdiIsImNhbGN1bGF0ZVNpemVEaXNjb3VudEFzc2V0V2VpZ2h0IiwidW5yZWFsaXplZFBubEltZkZhY3RvciIsInVucmVhbGl6ZWRQbmxNYWludGVuYW5jZUFzc2V0V2VpZ2h0IiwicGVycE1hcmtldCIsInNwb3RNYXJrZXQiLCJnZXRUb2tlbkFtb3VudCIsInBubFBvb2wiLCJzY2FsZWRCYWxhbmNlIiwiU3BvdEJhbGFuY2VUeXBlIiwiREVQT1NJVCIsImFzc2VydCIsIm1hcmtldEluZGV4IiwiUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgiLCJpbnN1cmFuY2VGdW5kQWxsb2NhdGlvbiIsImluc3VyYW5jZUNsYWltIiwicXVvdGVNYXhJbnN1cmFuY2UiLCJxdW90ZVNldHRsZWRJbnN1cmFuY2UiLCJhbW1GZWVQb29sIiwiZmVlUG9vbCIsImFkZCIsIm5ldFVzZXJQb3NpdGlvblZhbHVlIiwiYmFzZUFzc2V0QW1vdW50V2l0aEFtbSIsIkJBU0VfUFJFQ0lTSU9OIiwiUFJJQ0VfVE9fUVVPVEVfUFJFQ0lTSU9OIiwibmV0VXNlckNvc3RCYXNpcyIsInF1b3RlQXNzZXRBbW91bnQiLCJuZXRVc2VyUG5sIiwiaW1iYWxhbmNlIiwiZGxvYiIsInNsb3QiLCJiaWRzIiwiYXNrcyIsImNhbGN1bGF0ZU1hcmtldE9wZW5CaWRBc2siLCJtaW5CYXNlQXNzZXRSZXNlcnZlIiwibWF4QmFzZUFzc2V0UmVzZXJ2ZSIsIm9yZGVyU3RlcFNpemUiLCJiaWRQcmljZSIsImFza1ByaWNlIiwiYmlkIiwiZ2V0TWFrZXJMaW1pdEJpZHMiLCJNYXJrZXRUeXBlIiwiUEVSUCIsIm9yZGVyIiwiYmFzZUFzc2V0QW1vdW50RmlsbGVkIiwiYXNrIiwiZ2V0TWFrZXJMaW1pdEFza3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/market.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/oracles.js":
/*!**********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/oracles.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateLiveOracleStd = exports.calculateLiveOracleTwap = exports.isOracleTooDivergent = exports.isOracleValid = exports.oraclePriceBands = void 0;\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst index_1 = __webpack_require__(/*! ../index */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst assert_1 = __webpack_require__(/*! ../assert/assert */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\");\nfunction oraclePriceBands(market, oraclePriceData) {\n    const maxPercentDiff = market.marginRatioInitial - market.marginRatioMaintenance;\n    const offset = oraclePriceData.price.mul(new index_1.BN(maxPercentDiff)).div(numericConstants_1.MARGIN_PRECISION);\n    (0, assert_1.assert)(offset.gt(numericConstants_1.ZERO));\n    return [\n        oraclePriceData.price.sub(offset),\n        oraclePriceData.price.add(offset)\n    ];\n}\nexports.oraclePriceBands = oraclePriceBands;\nfunction isOracleValid(amm, oraclePriceData, oracleGuardRails, slot) {\n    const isOraclePriceNonPositive = oraclePriceData.price.lte(numericConstants_1.ZERO);\n    const isOraclePriceTooVolatile = oraclePriceData.price.div(index_1.BN.max(numericConstants_1.ONE, amm.historicalOracleData.lastOraclePriceTwap)).gt(oracleGuardRails.validity.tooVolatileRatio) || amm.historicalOracleData.lastOraclePriceTwap.div(index_1.BN.max(numericConstants_1.ONE, oraclePriceData.price)).gt(oracleGuardRails.validity.tooVolatileRatio);\n    const isConfidenceTooLarge = index_1.BN.max(numericConstants_1.ONE, oraclePriceData.confidence).mul(numericConstants_1.BID_ASK_SPREAD_PRECISION).div(oraclePriceData.price).gt(oracleGuardRails.validity.confidenceIntervalMaxSize);\n    const oracleIsStale = oraclePriceData.slot.sub(new index_1.BN(slot)).gt(oracleGuardRails.validity.slotsBeforeStaleForAmm);\n    return !(!oraclePriceData.hasSufficientNumberOfDataPoints || oracleIsStale || isOraclePriceNonPositive || isOraclePriceTooVolatile || isConfidenceTooLarge);\n}\nexports.isOracleValid = isOracleValid;\nfunction isOracleTooDivergent(amm, oraclePriceData, oracleGuardRails, now) {\n    const sinceLastUpdate = now.sub(amm.historicalOracleData.lastOraclePriceTwapTs);\n    const sinceStart = index_1.BN.max(numericConstants_1.ZERO, numericConstants_1.FIVE_MINUTE.sub(sinceLastUpdate));\n    const oracleTwap5min = amm.historicalOracleData.lastOraclePriceTwap5Min.mul(sinceStart).add(oraclePriceData.price).mul(sinceLastUpdate).div(sinceStart.add(sinceLastUpdate));\n    const oracleSpread = oracleTwap5min.sub(oraclePriceData.price);\n    const oracleSpreadPct = oracleSpread.mul(numericConstants_1.PRICE_PRECISION).div(oracleTwap5min);\n    const maxDivergence = index_1.BN.max(oracleGuardRails.priceDivergence.markOraclePercentDivergence, numericConstants_1.PERCENTAGE_PRECISION.div(new index_1.BN(10)));\n    const tooDivergent = oracleSpreadPct.abs().gte(maxDivergence);\n    return tooDivergent;\n}\nexports.isOracleTooDivergent = isOracleTooDivergent;\nfunction calculateLiveOracleTwap(histOracleData, oraclePriceData, now, period) {\n    let oracleTwap = undefined;\n    if (period.eq(numericConstants_1.FIVE_MINUTE)) {\n        oracleTwap = histOracleData.lastOraclePriceTwap5Min;\n    } else {\n        //todo: assumes its fundingPeriod (1hr)\n        // period = amm.fundingPeriod;\n        oracleTwap = histOracleData.lastOraclePriceTwap;\n    }\n    const sinceLastUpdate = index_1.BN.max(numericConstants_1.ONE, now.sub(histOracleData.lastOraclePriceTwapTs));\n    const sinceStart = index_1.BN.max(numericConstants_1.ZERO, period.sub(sinceLastUpdate));\n    const clampRange = oracleTwap.div(new index_1.BN(3));\n    const clampedOraclePrice = index_1.BN.min(oracleTwap.add(clampRange), index_1.BN.max(oraclePriceData.price, oracleTwap.sub(clampRange)));\n    const newOracleTwap = oracleTwap.mul(sinceStart).add(clampedOraclePrice.mul(sinceLastUpdate)).div(sinceStart.add(sinceLastUpdate));\n    return newOracleTwap;\n}\nexports.calculateLiveOracleTwap = calculateLiveOracleTwap;\nfunction calculateLiveOracleStd(amm, oraclePriceData, now) {\n    const sinceLastUpdate = index_1.BN.max(numericConstants_1.ONE, now.sub(amm.historicalOracleData.lastOraclePriceTwapTs));\n    const sinceStart = index_1.BN.max(numericConstants_1.ZERO, amm.fundingPeriod.sub(sinceLastUpdate));\n    const liveOracleTwap = calculateLiveOracleTwap(amm.historicalOracleData, oraclePriceData, now, amm.fundingPeriod);\n    const priceDeltaVsTwap = oraclePriceData.price.sub(liveOracleTwap).abs();\n    const oracleStd = priceDeltaVsTwap.add(amm.oracleStd.mul(sinceStart).div(sinceStart.add(sinceLastUpdate)));\n    return oracleStd;\n}\nexports.calculateLiveOracleStd = calculateLiveOracleStd;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL29yYWNsZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDhCQUE4QixHQUFHQSwrQkFBK0IsR0FBR0EsNEJBQTRCLEdBQUdBLHFCQUFxQixHQUFHQSx3QkFBd0IsR0FBRyxLQUFLO0FBQzFKLE1BQU1PLHFCQUFxQkMsbUJBQU9BLENBQUMsNkdBQStCO0FBQ2xFLE1BQU1DLFVBQVVELG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLE1BQU1FLFdBQVdGLG1CQUFPQSxDQUFDLG1GQUFrQjtBQUMzQyxTQUFTRixpQkFBaUJLLE1BQU0sRUFBRUMsZUFBZTtJQUM3QyxNQUFNQyxpQkFBaUJGLE9BQU9HLGtCQUFrQixHQUFHSCxPQUFPSSxzQkFBc0I7SUFDaEYsTUFBTUMsU0FBU0osZ0JBQWdCSyxLQUFLLENBQy9CQyxHQUFHLENBQUMsSUFBSVQsUUFBUVUsRUFBRSxDQUFDTixpQkFDbkJPLEdBQUcsQ0FBQ2IsbUJBQW1CYyxnQkFBZ0I7SUFDM0MsSUFBR1gsU0FBU1ksTUFBTSxFQUFFTixPQUFPTyxFQUFFLENBQUNoQixtQkFBbUJpQixJQUFJO0lBQ3RELE9BQU87UUFBQ1osZ0JBQWdCSyxLQUFLLENBQUNRLEdBQUcsQ0FBQ1Q7UUFBU0osZ0JBQWdCSyxLQUFLLENBQUNTLEdBQUcsQ0FBQ1Y7S0FBUTtBQUNqRjtBQUNBaEIsd0JBQXdCLEdBQUdNO0FBQzNCLFNBQVNELGNBQWNzQixHQUFHLEVBQUVmLGVBQWUsRUFBRWdCLGdCQUFnQixFQUFFQyxJQUFJO0lBQy9ELE1BQU1DLDJCQUEyQmxCLGdCQUFnQkssS0FBSyxDQUFDYyxHQUFHLENBQUN4QixtQkFBbUJpQixJQUFJO0lBQ2xGLE1BQU1RLDJCQUEyQnBCLGdCQUFnQkssS0FBSyxDQUNqREcsR0FBRyxDQUFDWCxRQUFRVSxFQUFFLENBQUNjLEdBQUcsQ0FBQzFCLG1C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QUNBM0UsOEJBQThCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvb3JhY2xlcy5qcz81Y2UyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jYWxjdWxhdGVMaXZlT3JhY2xlU3RkID0gZXhwb3J0cy5jYWxjdWxhdGVMaXZlT3JhY2xlVHdhcCA9IGV4cG9ydHMuaXNPcmFjbGVUb29EaXZlcmdlbnQgPSBleHBvcnRzLmlzT3JhY2xlVmFsaWQgPSBleHBvcnRzLm9yYWNsZVByaWNlQmFuZHMgPSB2b2lkIDA7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uL2luZGV4XCIpO1xuY29uc3QgYXNzZXJ0XzEgPSByZXF1aXJlKFwiLi4vYXNzZXJ0L2Fzc2VydFwiKTtcbmZ1bmN0aW9uIG9yYWNsZVByaWNlQmFuZHMobWFya2V0LCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBjb25zdCBtYXhQZXJjZW50RGlmZiA9IG1hcmtldC5tYXJnaW5SYXRpb0luaXRpYWwgLSBtYXJrZXQubWFyZ2luUmF0aW9NYWludGVuYW5jZTtcbiAgICBjb25zdCBvZmZzZXQgPSBvcmFjbGVQcmljZURhdGEucHJpY2VcbiAgICAgICAgLm11bChuZXcgaW5kZXhfMS5CTihtYXhQZXJjZW50RGlmZikpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pO1xuICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKG9mZnNldC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpO1xuICAgIHJldHVybiBbb3JhY2xlUHJpY2VEYXRhLnByaWNlLnN1YihvZmZzZXQpLCBvcmFjbGVQcmljZURhdGEucHJpY2UuYWRkKG9mZnNldCldO1xufVxuZXhwb3J0cy5vcmFjbGVQcmljZUJhbmRzID0gb3JhY2xlUHJpY2VCYW5kcztcbmZ1bmN0aW9uIGlzT3JhY2xlVmFsaWQoYW1tLCBvcmFjbGVQcmljZURhdGEsIG9yYWNsZUd1YXJkUmFpbHMsIHNsb3QpIHtcbiAgICBjb25zdCBpc09yYWNsZVByaWNlTm9uUG9zaXRpdmUgPSBvcmFjbGVQcmljZURhdGEucHJpY2UubHRlKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKTtcbiAgICBjb25zdCBpc09yYWNsZVByaWNlVG9vVm9sYXRpbGUgPSBvcmFjbGVQcmljZURhdGEucHJpY2VcbiAgICAgICAgLmRpdihpbmRleF8xLkJOLm1heChudW1lcmljQ29uc3RhbnRzXzEuT05FLCBhbW0uaGlzdG9yaWNhbE9yYWNsZURhdGEubGFzdE9yYWNsZVByaWNlVHdhcCkpXG4gICAgICAgIC5ndChvcmFjbGVHdWFyZFJhaWxzLnZhbGlkaXR5LnRvb1ZvbGF0aWxlUmF0aW8pIHx8XG4gICAgICAgIGFtbS5oaXN0b3JpY2FsT3JhY2xlRGF0YS5sYXN0T3JhY2xlUHJpY2VUd2FwXG4gICAgICAgICAgICAuZGl2KGluZGV4XzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5PTkUsIG9yYWNsZVByaWNlRGF0YS5wcmljZSkpXG4gICAgICAgICAgICAuZ3Qob3JhY2xlR3VhcmRSYWlscy52YWxpZGl0eS50b29Wb2xhdGlsZVJhdGlvKTtcbiAgICBjb25zdCBpc0NvbmZpZGVuY2VUb29MYXJnZSA9IGluZGV4XzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5PTkUsIG9yYWNsZVByaWNlRGF0YS5jb25maWRlbmNlKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5CSURfQVNLX1NQUkVBRF9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYob3JhY2xlUHJpY2VEYXRhLnByaWNlKVxuICAgICAgICAuZ3Qob3JhY2xlR3VhcmRSYWlscy52YWxpZGl0eS5jb25maWRlbmNlSW50ZXJ2YWxNYXhTaXplKTtcbiAgICBjb25zdCBvcmFjbGVJc1N0YWxlID0gb3JhY2xlUHJpY2VEYXRhLnNsb3RcbiAgICAgICAgLnN1YihuZXcgaW5kZXhfMS5CTihzbG90KSlcbiAgICAgICAgLmd0KG9yYWNsZUd1YXJkUmFpbHMudmFsaWRpdHkuc2xvdHNCZWZvcmVTdGFsZUZvckFtbSk7XG4gICAgcmV0dXJuICEoIW9yYWNsZVByaWNlRGF0YS5oYXNTdWZmaWNpZW50TnVtYmVyT2ZEYXRhUG9pbnRzIHx8XG4gICAgICAgIG9yYWNsZUlzU3RhbGUgfHxcbiAgICAgICAgaXNPcmFjbGVQcmljZU5vblBvc2l0aXZlIHx8XG4gICAgICAgIGlzT3JhY2xlUHJpY2VUb29Wb2xhdGlsZSB8fFxuICAgICAgICBpc0NvbmZpZGVuY2VUb29MYXJnZSk7XG59XG5leHBvcnRzLmlzT3JhY2xlVmFsaWQgPSBpc09yYWNsZVZhbGlkO1xuZnVuY3Rpb24gaXNPcmFjbGVUb29EaXZlcmdlbnQoYW1tLCBvcmFjbGVQcmljZURhdGEsIG9yYWNsZUd1YXJkUmFpbHMsIG5vdykge1xuICAgIGNvbnN0IHNpbmNlTGFzdFVwZGF0ZSA9IG5vdy5zdWIoYW1tLmhpc3RvcmljYWxPcmFjbGVEYXRhLmxhc3RPcmFjbGVQcmljZVR3YXBUcyk7XG4gICAgY29uc3Qgc2luY2VTdGFydCA9IGluZGV4XzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBudW1lcmljQ29uc3RhbnRzXzEuRklWRV9NSU5VVEUuc3ViKHNpbmNlTGFzdFVwZGF0ZSkpO1xuICAgIGNvbnN0IG9yYWNsZVR3YXA1bWluID0gYW1tLmhpc3RvcmljYWxPcmFjbGVEYXRhLmxhc3RPcmFjbGVQcmljZVR3YXA1TWluXG4gICAgICAgIC5tdWwoc2luY2VTdGFydClcbiAgICAgICAgLmFkZChvcmFjbGVQcmljZURhdGEucHJpY2UpXG4gICAgICAgIC5tdWwoc2luY2VMYXN0VXBkYXRlKVxuICAgICAgICAuZGl2KHNpbmNlU3RhcnQuYWRkKHNpbmNlTGFzdFVwZGF0ZSkpO1xuICAgIGNvbnN0IG9yYWNsZVNwcmVhZCA9IG9yYWNsZVR3YXA1bWluLnN1YihvcmFjbGVQcmljZURhdGEucHJpY2UpO1xuICAgIGNvbnN0IG9yYWNsZVNwcmVhZFBjdCA9IG9yYWNsZVNwcmVhZC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTikuZGl2KG9yYWNsZVR3YXA1bWluKTtcbiAgICBjb25zdCBtYXhEaXZlcmdlbmNlID0gaW5kZXhfMS5CTi5tYXgob3JhY2xlR3VhcmRSYWlscy5wcmljZURpdmVyZ2VuY2UubWFya09yYWNsZVBlcmNlbnREaXZlcmdlbmNlLCBudW1lcmljQ29uc3RhbnRzXzEuUEVSQ0VOVEFHRV9QUkVDSVNJT04uZGl2KG5ldyBpbmRleF8xLkJOKDEwKSkpO1xuICAgIGNvbnN0IHRvb0RpdmVyZ2VudCA9IG9yYWNsZVNwcmVhZFBjdC5hYnMoKS5ndGUobWF4RGl2ZXJnZW5jZSk7XG4gICAgcmV0dXJuIHRvb0RpdmVyZ2VudDtcbn1cbmV4cG9ydHMuaXNPcmFjbGVUb29EaXZlcmdlbnQgPSBpc09yYWNsZVRvb0RpdmVyZ2VudDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUxpdmVPcmFjbGVUd2FwKGhpc3RPcmFjbGVEYXRhLCBvcmFjbGVQcmljZURhdGEsIG5vdywgcGVyaW9kKSB7XG4gICAgbGV0IG9yYWNsZVR3YXAgPSB1bmRlZmluZWQ7XG4gICAgaWYgKHBlcmlvZC5lcShudW1lcmljQ29uc3RhbnRzXzEuRklWRV9NSU5VVEUpKSB7XG4gICAgICAgIG9yYWNsZVR3YXAgPSBoaXN0T3JhY2xlRGF0YS5sYXN0T3JhY2xlUHJpY2VUd2FwNU1pbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vdG9kbzogYXNzdW1lcyBpdHMgZnVuZGluZ1BlcmlvZCAoMWhyKVxuICAgICAgICAvLyBwZXJpb2QgPSBhbW0uZnVuZGluZ1BlcmlvZDtcbiAgICAgICAgb3JhY2xlVHdhcCA9IGhpc3RPcmFjbGVEYXRhLmxhc3RPcmFjbGVQcmljZVR3YXA7XG4gICAgfVxuICAgIGNvbnN0IHNpbmNlTGFzdFVwZGF0ZSA9IGluZGV4XzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5PTkUsIG5vdy5zdWIoaGlzdE9yYWNsZURhdGEubGFzdE9yYWNsZVByaWNlVHdhcFRzKSk7XG4gICAgY29uc3Qgc2luY2VTdGFydCA9IGluZGV4XzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBwZXJpb2Quc3ViKHNpbmNlTGFzdFVwZGF0ZSkpO1xuICAgIGNvbnN0IGNsYW1wUmFuZ2UgPSBvcmFjbGVUd2FwLmRpdihuZXcgaW5kZXhfMS5CTigzKSk7XG4gICAgY29uc3QgY2xhbXBlZE9yYWNsZVByaWNlID0gaW5kZXhfMS5CTi5taW4ob3JhY2xlVHdhcC5hZGQoY2xhbXBSYW5nZSksIGluZGV4XzEuQk4ubWF4KG9yYWNsZVByaWNlRGF0YS5wcmljZSwgb3JhY2xlVHdhcC5zdWIoY2xhbXBSYW5nZSkpKTtcbiAgICBjb25zdCBuZXdPcmFjbGVUd2FwID0gb3JhY2xlVHdhcFxuICAgICAgICAubXVsKHNpbmNlU3RhcnQpXG4gICAgICAgIC5hZGQoY2xhbXBlZE9yYWNsZVByaWNlLm11bChzaW5jZUxhc3RVcGRhdGUpKVxuICAgICAgICAuZGl2KHNpbmNlU3RhcnQuYWRkKHNpbmNlTGFzdFVwZGF0ZSkpO1xuICAgIHJldHVybiBuZXdPcmFjbGVUd2FwO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVMaXZlT3JhY2xlVHdhcCA9IGNhbGN1bGF0ZUxpdmVPcmFjbGVUd2FwO1xuZnVuY3Rpb24gY2FsY3VsYXRlTGl2ZU9yYWNsZVN0ZChhbW0sIG9yYWNsZVByaWNlRGF0YSwgbm93KSB7XG4gICAgY29uc3Qgc2luY2VMYXN0VXBkYXRlID0gaW5kZXhfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLk9ORSwgbm93LnN1YihhbW0uaGlzdG9yaWNhbE9yYWNsZURhdGEubGFzdE9yYWNsZVByaWNlVHdhcFRzKSk7XG4gICAgY29uc3Qgc2luY2VTdGFydCA9IGluZGV4XzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBhbW0uZnVuZGluZ1BlcmlvZC5zdWIoc2luY2VMYXN0VXBkYXRlKSk7XG4gICAgY29uc3QgbGl2ZU9yYWNsZVR3YXAgPSBjYWxjdWxhdGVMaXZlT3JhY2xlVHdhcChhbW0uaGlzdG9yaWNhbE9yYWNsZURhdGEsIG9yYWNsZVByaWNlRGF0YSwgbm93LCBhbW0uZnVuZGluZ1BlcmlvZCk7XG4gICAgY29uc3QgcHJpY2VEZWx0YVZzVHdhcCA9IG9yYWNsZVByaWNlRGF0YS5wcmljZS5zdWIobGl2ZU9yYWNsZVR3YXApLmFicygpO1xuICAgIGNvbnN0IG9yYWNsZVN0ZCA9IHByaWNlRGVsdGFWc1R3YXAuYWRkKGFtbS5vcmFjbGVTdGQubXVsKHNpbmNlU3RhcnQpLmRpdihzaW5jZVN0YXJ0LmFkZChzaW5jZUxhc3RVcGRhdGUpKSk7XG4gICAgcmV0dXJuIG9yYWNsZVN0ZDtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlTGl2ZU9yYWNsZVN0ZCA9IGNhbGN1bGF0ZUxpdmVPcmFjbGVTdGQ7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJjYWxjdWxhdGVMaXZlT3JhY2xlU3RkIiwiY2FsY3VsYXRlTGl2ZU9yYWNsZVR3YXAiLCJpc09yYWNsZVRvb0RpdmVyZ2VudCIsImlzT3JhY2xlVmFsaWQiLCJvcmFjbGVQcmljZUJhbmRzIiwibnVtZXJpY0NvbnN0YW50c18xIiwicmVxdWlyZSIsImluZGV4XzEiLCJhc3NlcnRfMSIsIm1hcmtldCIsIm9yYWNsZVByaWNlRGF0YSIsIm1heFBlcmNlbnREaWZmIiwibWFyZ2luUmF0aW9Jbml0aWFsIiwibWFyZ2luUmF0aW9NYWludGVuYW5jZSIsIm9mZnNldCIsInByaWNlIiwibXVsIiwiQk4iLCJkaXYiLCJNQVJHSU5fUFJFQ0lTSU9OIiwiYXNzZXJ0IiwiZ3QiLCJaRVJPIiwic3ViIiwiYWRkIiwiYW1tIiwib3JhY2xlR3VhcmRSYWlscyIsInNsb3QiLCJpc09yYWNsZVByaWNlTm9uUG9zaXRpdmUiLCJsdGUiLCJpc09yYWNsZVByaWNlVG9vVm9sYXRpbGUiLCJtYXgiLCJPTkUiLCJoaXN0b3JpY2FsT3JhY2xlRGF0YSIsImxhc3RPcmFjbGVQcmljZVR3YXAiLCJ2YWxpZGl0eSIsInRvb1ZvbGF0aWxlUmF0aW8iLCJpc0NvbmZpZGVuY2VUb29MYXJnZSIsImNvbmZpZGVuY2UiLCJCSURfQVNLX1NQUkVBRF9QUkVDSVNJT04iLCJjb25maWRlbmNlSW50ZXJ2YWxNYXhTaXplIiwib3JhY2xlSXNTdGFsZSIsInNsb3RzQmVmb3JlU3RhbGVGb3JBbW0iLCJoYXNTdWZmaWNpZW50TnVtYmVyT2ZEYXRhUG9pbnRzIiwibm93Iiwic2luY2VMYXN0VXBkYXRlIiwibGFzdE9yYWNsZVByaWNlVHdhcFRzIiwic2luY2VTdGFydCIsIkZJVkVfTUlOVVRFIiwib3JhY2xlVHdhcDVtaW4iLCJsYXN0T3JhY2xlUHJpY2VUd2FwNU1pbiIsIm9yYWNsZVNwcmVhZCIsIm9yYWNsZVNwcmVhZFBjdCIsIlBSSUNFX1BSRUNJU0lPTiIsIm1heERpdmVyZ2VuY2UiLCJwcmljZURpdmVyZ2VuY2UiLCJtYXJrT3JhY2xlUGVyY2VudERpdmVyZ2VuY2UiLCJQRVJDRU5UQUdFX1BSRUNJU0lPTiIsInRvb0RpdmVyZ2VudCIsImFicyIsImd0ZSIsImhpc3RPcmFjbGVEYXRhIiwicGVyaW9kIiwib3JhY2xlVHdhcCIsInVuZGVmaW5lZCIsImVxIiwiY2xhbXBSYW5nZSIsImNsYW1wZWRPcmFjbGVQcmljZSIsIm1pbiIsIm5ld09yYWNsZVR3YXAiLCJmdW5kaW5nUGVyaW9kIiwibGl2ZU9yYWNsZVR3YXAiLCJwcmljZURlbHRhVnNUd2FwIiwib3JhY2xlU3RkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/oracles.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/orders.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/orders.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.isTakingOrder = exports.isRestingLimitOrder = exports.isTriggered = exports.mustBeTriggered = exports.isLimitOrder = exports.isMarketOrder = exports.isOrderExpired = exports.calculateBaseAssetAmountToFillUpToLimitPrice = exports.calculateBaseAssetAmountForAmmToFulfill = exports.isFillableByVAMM = exports.hasAuctionPrice = exports.hasLimitPrice = exports.getLimitPrice = exports.standardizePrice = exports.standardizeBaseAssetAmount = exports.isOrderReduceOnly = exports.isOrderRiskIncreasingInSameDirection = exports.isOrderRiskIncreasing = void 0;\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst auction_1 = __webpack_require__(/*! ./auction */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/auction.js\");\nconst amm_1 = __webpack_require__(/*! ./amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\");\nfunction isOrderRiskIncreasing(user, order) {\n    if ((0, types_1.isVariant)(order.status, \"init\")) {\n        return false;\n    }\n    const position = user.getPerpPosition(order.marketIndex) || user.getEmptyPosition(order.marketIndex);\n    // if no position exists, it's risk increasing\n    if (position.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return true;\n    }\n    // if position is long and order is long\n    if (position.baseAssetAmount.gt(numericConstants_1.ZERO) && (0, types_1.isVariant)(order.direction, \"long\")) {\n        return true;\n    }\n    // if position is short and order is short\n    if (position.baseAssetAmount.lt(numericConstants_1.ZERO) && (0, types_1.isVariant)(order.direction, \"short\")) {\n        return true;\n    }\n    const baseAssetAmountToFill = order.baseAssetAmount.sub(order.baseAssetAmountFilled);\n    // if order will flip position\n    if (baseAssetAmountToFill.gt(position.baseAssetAmount.abs().mul(numericConstants_1.TWO))) {\n        return true;\n    }\n    return false;\n}\nexports.isOrderRiskIncreasing = isOrderRiskIncreasing;\nfunction isOrderRiskIncreasingInSameDirection(user, order) {\n    if ((0, types_1.isVariant)(order.status, \"init\")) {\n        return false;\n    }\n    const position = user.getPerpPosition(order.marketIndex) || user.getEmptyPosition(order.marketIndex);\n    // if no position exists, it's risk increasing\n    if (position.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return true;\n    }\n    // if position is long and order is long\n    if (position.baseAssetAmount.gt(numericConstants_1.ZERO) && (0, types_1.isVariant)(order.direction, \"long\")) {\n        return true;\n    }\n    // if position is short and order is short\n    if (position.baseAssetAmount.lt(numericConstants_1.ZERO) && (0, types_1.isVariant)(order.direction, \"short\")) {\n        return true;\n    }\n    return false;\n}\nexports.isOrderRiskIncreasingInSameDirection = isOrderRiskIncreasingInSameDirection;\nfunction isOrderReduceOnly(user, order) {\n    if ((0, types_1.isVariant)(order.status, \"init\")) {\n        return false;\n    }\n    const position = user.getPerpPosition(order.marketIndex) || user.getEmptyPosition(order.marketIndex);\n    // if position is long and order is long\n    if (position.baseAssetAmount.gte(numericConstants_1.ZERO) && (0, types_1.isVariant)(order.direction, \"long\")) {\n        return false;\n    }\n    // if position is short and order is short\n    if (position.baseAssetAmount.lte(numericConstants_1.ZERO) && (0, types_1.isVariant)(order.direction, \"short\")) {\n        return false;\n    }\n    return true;\n}\nexports.isOrderReduceOnly = isOrderReduceOnly;\nfunction standardizeBaseAssetAmount(baseAssetAmount, stepSize) {\n    const remainder = baseAssetAmount.mod(stepSize);\n    return baseAssetAmount.sub(remainder);\n}\nexports.standardizeBaseAssetAmount = standardizeBaseAssetAmount;\nfunction standardizePrice(price, tickSize, direction) {\n    if (price.eq(numericConstants_1.ZERO)) {\n        console.log(\"price is zero\");\n        return price;\n    }\n    const remainder = price.mod(tickSize);\n    if (remainder.eq(numericConstants_1.ZERO)) {\n        return price;\n    }\n    if ((0, types_1.isVariant)(direction, \"long\")) {\n        return price.sub(remainder);\n    } else {\n        return price.add(tickSize).sub(remainder);\n    }\n}\nexports.standardizePrice = standardizePrice;\nfunction getLimitPrice(order, oraclePriceData, slot, fallbackPrice) {\n    let limitPrice;\n    if (hasAuctionPrice(order, slot)) {\n        limitPrice = (0, auction_1.getAuctionPrice)(order, slot, oraclePriceData.price);\n    } else if (order.oraclePriceOffset !== 0) {\n        limitPrice = oraclePriceData.price.add(new anchor_1.BN(order.oraclePriceOffset));\n    } else if (order.price.eq(numericConstants_1.ZERO)) {\n        limitPrice = fallbackPrice;\n    } else {\n        limitPrice = order.price;\n    }\n    return limitPrice;\n}\nexports.getLimitPrice = getLimitPrice;\nfunction hasLimitPrice(order, slot) {\n    return order.price.gt(numericConstants_1.ZERO) || order.oraclePriceOffset != 0 || !(0, auction_1.isAuctionComplete)(order, slot);\n}\nexports.hasLimitPrice = hasLimitPrice;\nfunction hasAuctionPrice(order, slot) {\n    return !(0, auction_1.isAuctionComplete)(order, slot) && (!order.auctionStartPrice.eq(numericConstants_1.ZERO) || !order.auctionEndPrice.eq(numericConstants_1.ZERO));\n}\nexports.hasAuctionPrice = hasAuctionPrice;\nfunction isFillableByVAMM(order, market, oraclePriceData, slot, ts) {\n    return (0, auction_1.isAuctionComplete)(order, slot) && calculateBaseAssetAmountForAmmToFulfill(order, market, oraclePriceData, slot).gte(market.amm.minOrderSize) || isOrderExpired(order, ts);\n}\nexports.isFillableByVAMM = isFillableByVAMM;\nfunction calculateBaseAssetAmountForAmmToFulfill(order, market, oraclePriceData, slot) {\n    if (mustBeTriggered(order) && !isTriggered(order)) {\n        return numericConstants_1.ZERO;\n    }\n    const limitPrice = getLimitPrice(order, oraclePriceData, slot);\n    let baseAssetAmount;\n    const updatedAMM = (0, amm_1.calculateUpdatedAMM)(market.amm, oraclePriceData);\n    if (limitPrice !== undefined) {\n        baseAssetAmount = calculateBaseAssetAmountToFillUpToLimitPrice(order, updatedAMM, limitPrice, oraclePriceData);\n    } else {\n        baseAssetAmount = order.baseAssetAmount.sub(order.baseAssetAmountFilled);\n    }\n    const maxBaseAssetAmount = (0, amm_1.calculateMaxBaseAssetAmountFillable)(updatedAMM, order.direction);\n    return anchor_1.BN.min(maxBaseAssetAmount, baseAssetAmount);\n}\nexports.calculateBaseAssetAmountForAmmToFulfill = calculateBaseAssetAmountForAmmToFulfill;\nfunction calculateBaseAssetAmountToFillUpToLimitPrice(order, amm, limitPrice, oraclePriceData) {\n    const adjustedLimitPrice = (0, types_1.isVariant)(order.direction, \"long\") ? limitPrice.sub(amm.orderTickSize) : limitPrice.add(amm.orderTickSize);\n    const [maxAmountToTrade, direction] = (0, amm_1.calculateMaxBaseAssetAmountToTrade)(amm, adjustedLimitPrice, order.direction, oraclePriceData);\n    const baseAssetAmount = standardizeBaseAssetAmount(maxAmountToTrade, amm.orderStepSize);\n    // Check that directions are the same\n    const sameDirection = isSameDirection(direction, order.direction);\n    if (!sameDirection) {\n        return numericConstants_1.ZERO;\n    }\n    const baseAssetAmountUnfilled = order.baseAssetAmount.sub(order.baseAssetAmountFilled);\n    return baseAssetAmount.gt(baseAssetAmountUnfilled) ? baseAssetAmountUnfilled : baseAssetAmount;\n}\nexports.calculateBaseAssetAmountToFillUpToLimitPrice = calculateBaseAssetAmountToFillUpToLimitPrice;\nfunction isSameDirection(firstDirection, secondDirection) {\n    return (0, types_1.isVariant)(firstDirection, \"long\") && (0, types_1.isVariant)(secondDirection, \"long\") || (0, types_1.isVariant)(firstDirection, \"short\") && (0, types_1.isVariant)(secondDirection, \"short\");\n}\nfunction isOrderExpired(order, ts, enforceBuffer = false) {\n    if (mustBeTriggered(order) || !(0, types_1.isVariant)(order.status, \"open\") || order.maxTs.eq(numericConstants_1.ZERO)) {\n        return false;\n    }\n    let maxTs;\n    if (enforceBuffer && isLimitOrder(order)) {\n        maxTs = order.maxTs.addn(15);\n    } else {\n        maxTs = order.maxTs;\n    }\n    return new anchor_1.BN(ts).gt(maxTs);\n}\nexports.isOrderExpired = isOrderExpired;\nfunction isMarketOrder(order) {\n    return (0, types_1.isOneOfVariant)(order.orderType, [\n        \"market\",\n        \"triggerMarket\",\n        \"oracle\"\n    ]);\n}\nexports.isMarketOrder = isMarketOrder;\nfunction isLimitOrder(order) {\n    return (0, types_1.isOneOfVariant)(order.orderType, [\n        \"limit\",\n        \"triggerLimit\"\n    ]);\n}\nexports.isLimitOrder = isLimitOrder;\nfunction mustBeTriggered(order) {\n    return (0, types_1.isOneOfVariant)(order.orderType, [\n        \"triggerMarket\",\n        \"triggerLimit\"\n    ]);\n}\nexports.mustBeTriggered = mustBeTriggered;\nfunction isTriggered(order) {\n    return (0, types_1.isOneOfVariant)(order.triggerCondition, [\n        \"triggeredAbove\",\n        \"triggeredBelow\"\n    ]);\n}\nexports.isTriggered = isTriggered;\nfunction isRestingLimitOrder(order, slot) {\n    return isLimitOrder(order) && (order.postOnly || (0, auction_1.isAuctionComplete)(order, slot));\n}\nexports.isRestingLimitOrder = isRestingLimitOrder;\nfunction isTakingOrder(order, slot) {\n    return isMarketOrder(order) || !isRestingLimitOrder(order, slot);\n}\nexports.isTakingOrder = isTakingOrder;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL29yZGVycy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQscUJBQXFCLEdBQUdBLDJCQUEyQixHQUFHQSxtQkFBbUIsR0FBR0EsdUJBQXVCLEdBQUdBLG9CQUFvQixHQUFHQSxxQkFBcUIsR0FBR0Esc0JBQXNCLEdBQUdBLG9EQUFvRCxHQUFHQSwrQ0FBK0MsR0FBR0Esd0JBQXdCLEdBQUdBLHVCQUF1QixHQUFHQSxxQkFBcUIsR0FBR0EscUJBQXFCLEdBQUdBLHdCQUF3QixHQUFHQSxrQ0FBa0MsR0FBR0EseUJBQXlCLEdBQUdBLDRDQUE0QyxHQUFHQSw2QkFBNkIsR0FBRyxLQUFLO0FBQzVpQixNQUFNb0IsVUFBVUMsbUJBQU9BLENBQUMsbUVBQVU7QUFDbEMsTUFBTUMscUJBQXFCRCxtQkFBT0EsQ0FBQyw2R0FBK0I7QUFDbEUsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsbUZBQW1CO0FBQzVDLE1BQU1HLFlBQVlILG1CQUFPQSxDQUFDLDJFQUFXO0FBQ3JDLE1BQU1JLFFBQVFKLG1CQUFPQSxDQUFDLG1FQUFPO0FBQzdCLFNBQVNGLHNCQUFzQk8sSUFBSSxFQUFFQyxLQUFLO0lBQ3RDLElBQUksQ0FBQyxHQUFHUCxRQUFRUSxTQUFTLEVBQUVELE1BQU1FLE1BQU0sRUFBRSxTQUFTO1FBQzlDLE9BQU87SUFDWDtJQUNBLE1BQU1DLFdBQVdKLEtBQUtLLGVBQWUsQ0FBQ0osTUFBTUssV0FBVyxLQUNuRE4sS0FBS08sZ0JBQWdCLENBQUNOLE1BQU1LLFdBQVc7SUFDM0MsOENBQThDO0lBQzlDLElBQUlGLFNBQVNJLGVBQWUsQ0FBQ0MsRUFBRSxDQUFDYixtQkFBbUJjLElBQUksR0FBRztRQUN0RCxPQUFPO0lBQ1g7SUFDQSx3Q0FBd0M7SUFDeEMsSUFBSU4sU0FBU0ksZUFBZSxDQUFDRyxFQUFFLENBQUNmLG1C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RCxNQUFNZ0UsZ0JBQWdCLEVBQUU7UUFDdkQ7UUFDQTtLQUNIO0FBQ0w7QUFDQTNGLG1CQUFtQixHQUFHSTtBQUN0QixTQUFTRCxvQkFBb0J3QixLQUFLLEVBQUU4QixJQUFJO0lBQ3BDLE9BQVFuRCxhQUFhcUIsVUFBV0EsQ0FBQUEsTUFBTWlFLFFBQVEsSUFBSSxDQUFDLEdBQUdwRSxVQUFVdUMsaUJBQWlCLEVBQUVwQyxPQUFPOEIsS0FBSTtBQUNsRztBQUNBekQsMkJBQTJCLEdBQUdHO0FBQzlCLFNBQVNELGNBQWN5QixLQUFLLEVBQUU4QixJQUFJO0lBQzlCLE9BQU9sRCxjQUFjb0IsVUFBVSxDQUFDeEIsb0JBQW9Cd0IsT0FBTzhCO0FBQy9EO0FBQ0F6RCxxQkFBcUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvbWF0aC9vcmRlcnMuanM/YzIwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaXNUYWtpbmdPcmRlciA9IGV4cG9ydHMuaXNSZXN0aW5nTGltaXRPcmRlciA9IGV4cG9ydHMuaXNUcmlnZ2VyZWQgPSBleHBvcnRzLm11c3RCZVRyaWdnZXJlZCA9IGV4cG9ydHMuaXNMaW1pdE9yZGVyID0gZXhwb3J0cy5pc01hcmtldE9yZGVyID0gZXhwb3J0cy5pc09yZGVyRXhwaXJlZCA9IGV4cG9ydHMuY2FsY3VsYXRlQmFzZUFzc2V0QW1vdW50VG9GaWxsVXBUb0xpbWl0UHJpY2UgPSBleHBvcnRzLmNhbGN1bGF0ZUJhc2VBc3NldEFtb3VudEZvckFtbVRvRnVsZmlsbCA9IGV4cG9ydHMuaXNGaWxsYWJsZUJ5VkFNTSA9IGV4cG9ydHMuaGFzQXVjdGlvblByaWNlID0gZXhwb3J0cy5oYXNMaW1pdFByaWNlID0gZXhwb3J0cy5nZXRMaW1pdFByaWNlID0gZXhwb3J0cy5zdGFuZGFyZGl6ZVByaWNlID0gZXhwb3J0cy5zdGFuZGFyZGl6ZUJhc2VBc3NldEFtb3VudCA9IGV4cG9ydHMuaXNPcmRlclJlZHVjZU9ubHkgPSBleHBvcnRzLmlzT3JkZXJSaXNrSW5jcmVhc2luZ0luU2FtZURpcmVjdGlvbiA9IGV4cG9ydHMuaXNPcmRlclJpc2tJbmNyZWFzaW5nID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IGFuY2hvcl8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yXCIpO1xuY29uc3QgYXVjdGlvbl8xID0gcmVxdWlyZShcIi4vYXVjdGlvblwiKTtcbmNvbnN0IGFtbV8xID0gcmVxdWlyZShcIi4vYW1tXCIpO1xuZnVuY3Rpb24gaXNPcmRlclJpc2tJbmNyZWFzaW5nKHVzZXIsIG9yZGVyKSB7XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkob3JkZXIuc3RhdHVzLCAnaW5pdCcpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgcG9zaXRpb24gPSB1c2VyLmdldFBlcnBQb3NpdGlvbihvcmRlci5tYXJrZXRJbmRleCkgfHxcbiAgICAgICAgdXNlci5nZXRFbXB0eVBvc2l0aW9uKG9yZGVyLm1hcmtldEluZGV4KTtcbiAgICAvLyBpZiBubyBwb3NpdGlvbiBleGlzdHMsIGl0J3MgcmlzayBpbmNyZWFzaW5nXG4gICAgaWYgKHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGlmIHBvc2l0aW9uIGlzIGxvbmcgYW5kIG9yZGVyIGlzIGxvbmdcbiAgICBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJiAoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yZGVyLmRpcmVjdGlvbiwgJ2xvbmcnKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gaWYgcG9zaXRpb24gaXMgc2hvcnQgYW5kIG9yZGVyIGlzIHNob3J0XG4gICAgaWYgKHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5sdChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiZcbiAgICAgICAgKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5kaXJlY3Rpb24sICdzaG9ydCcpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBiYXNlQXNzZXRBbW91bnRUb0ZpbGwgPSBvcmRlci5iYXNlQXNzZXRBbW91bnQuc3ViKG9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCk7XG4gICAgLy8gaWYgb3JkZXIgd2lsbCBmbGlwIHBvc2l0aW9uXG4gICAgaWYgKGJhc2VBc3NldEFtb3VudFRvRmlsbC5ndChwb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuYWJzKCkubXVsKG51bWVyaWNDb25zdGFudHNfMS5UV08pKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0cy5pc09yZGVyUmlza0luY3JlYXNpbmcgPSBpc09yZGVyUmlza0luY3JlYXNpbmc7XG5mdW5jdGlvbiBpc09yZGVyUmlza0luY3JlYXNpbmdJblNhbWVEaXJlY3Rpb24odXNlciwgb3JkZXIpIHtcbiAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5zdGF0dXMsICdpbml0JykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvbiA9IHVzZXIuZ2V0UGVycFBvc2l0aW9uKG9yZGVyLm1hcmtldEluZGV4KSB8fFxuICAgICAgICB1c2VyLmdldEVtcHR5UG9zaXRpb24ob3JkZXIubWFya2V0SW5kZXgpO1xuICAgIC8vIGlmIG5vIHBvc2l0aW9uIGV4aXN0cywgaXQncyByaXNrIGluY3JlYXNpbmdcbiAgICBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50LmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gaWYgcG9zaXRpb24gaXMgbG9uZyBhbmQgb3JkZXIgaXMgbG9uZ1xuICAgIGlmIChwb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pICYmICgwLCB0eXBlc18xLmlzVmFyaWFudCkob3JkZXIuZGlyZWN0aW9uLCAnbG9uZycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBpZiBwb3NpdGlvbiBpcyBzaG9ydCBhbmQgb3JkZXIgaXMgc2hvcnRcbiAgICBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50Lmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJlxuICAgICAgICAoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKG9yZGVyLmRpcmVjdGlvbiwgJ3Nob3J0JykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMuaXNPcmRlclJpc2tJbmNyZWFzaW5nSW5TYW1lRGlyZWN0aW9uID0gaXNPcmRlclJpc2tJbmNyZWFzaW5nSW5TYW1lRGlyZWN0aW9uO1xuZnVuY3Rpb24gaXNPcmRlclJlZHVjZU9ubHkodXNlciwgb3JkZXIpIHtcbiAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5zdGF0dXMsICdpbml0JykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBwb3NpdGlvbiA9IHVzZXIuZ2V0UGVycFBvc2l0aW9uKG9yZGVyLm1hcmtldEluZGV4KSB8fFxuICAgICAgICB1c2VyLmdldEVtcHR5UG9zaXRpb24ob3JkZXIubWFya2V0SW5kZXgpO1xuICAgIC8vIGlmIHBvc2l0aW9uIGlzIGxvbmcgYW5kIG9yZGVyIGlzIGxvbmdcbiAgICBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50Lmd0ZShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiZcbiAgICAgICAgKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5kaXJlY3Rpb24sICdsb25nJykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBpZiBwb3NpdGlvbiBpcyBzaG9ydCBhbmQgb3JkZXIgaXMgc2hvcnRcbiAgICBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50Lmx0ZShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiZcbiAgICAgICAgKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5kaXJlY3Rpb24sICdzaG9ydCcpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnRzLmlzT3JkZXJSZWR1Y2VPbmx5ID0gaXNPcmRlclJlZHVjZU9ubHk7XG5mdW5jdGlvbiBzdGFuZGFyZGl6ZUJhc2VBc3NldEFtb3VudChiYXNlQXNzZXRBbW91bnQsIHN0ZXBTaXplKSB7XG4gICAgY29uc3QgcmVtYWluZGVyID0gYmFzZUFzc2V0QW1vdW50Lm1vZChzdGVwU2l6ZSk7XG4gICAgcmV0dXJuIGJhc2VBc3NldEFtb3VudC5zdWIocmVtYWluZGVyKTtcbn1cbmV4cG9ydHMuc3RhbmRhcmRpemVCYXNlQXNzZXRBbW91bnQgPSBzdGFuZGFyZGl6ZUJhc2VBc3NldEFtb3VudDtcbmZ1bmN0aW9uIHN0YW5kYXJkaXplUHJpY2UocHJpY2UsIHRpY2tTaXplLCBkaXJlY3Rpb24pIHtcbiAgICBpZiAocHJpY2UuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwcmljZSBpcyB6ZXJvJyk7XG4gICAgICAgIHJldHVybiBwcmljZTtcbiAgICB9XG4gICAgY29uc3QgcmVtYWluZGVyID0gcHJpY2UubW9kKHRpY2tTaXplKTtcbiAgICBpZiAocmVtYWluZGVyLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICByZXR1cm4gcHJpY2U7XG4gICAgfVxuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKGRpcmVjdGlvbiwgJ2xvbmcnKSkge1xuICAgICAgICByZXR1cm4gcHJpY2Uuc3ViKHJlbWFpbmRlcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcHJpY2UuYWRkKHRpY2tTaXplKS5zdWIocmVtYWluZGVyKTtcbiAgICB9XG59XG5leHBvcnRzLnN0YW5kYXJkaXplUHJpY2UgPSBzdGFuZGFyZGl6ZVByaWNlO1xuZnVuY3Rpb24gZ2V0TGltaXRQcmljZShvcmRlciwgb3JhY2xlUHJpY2VEYXRhLCBzbG90LCBmYWxsYmFja1ByaWNlKSB7XG4gICAgbGV0IGxpbWl0UHJpY2U7XG4gICAgaWYgKGhhc0F1Y3Rpb25QcmljZShvcmRlciwgc2xvdCkpIHtcbiAgICAgICAgbGltaXRQcmljZSA9ICgwLCBhdWN0aW9uXzEuZ2V0QXVjdGlvblByaWNlKShvcmRlciwgc2xvdCwgb3JhY2xlUHJpY2VEYXRhLnByaWNlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3JkZXIub3JhY2xlUHJpY2VPZmZzZXQgIT09IDApIHtcbiAgICAgICAgbGltaXRQcmljZSA9IG9yYWNsZVByaWNlRGF0YS5wcmljZS5hZGQobmV3IGFuY2hvcl8xLkJOKG9yZGVyLm9yYWNsZVByaWNlT2Zmc2V0KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9yZGVyLnByaWNlLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBsaW1pdFByaWNlID0gZmFsbGJhY2tQcmljZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxpbWl0UHJpY2UgPSBvcmRlci5wcmljZTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbWl0UHJpY2U7XG59XG5leHBvcnRzLmdldExpbWl0UHJpY2UgPSBnZXRMaW1pdFByaWNlO1xuZnVuY3Rpb24gaGFzTGltaXRQcmljZShvcmRlciwgc2xvdCkge1xuICAgIHJldHVybiAob3JkZXIucHJpY2UuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pIHx8XG4gICAgICAgIG9yZGVyLm9yYWNsZVByaWNlT2Zmc2V0ICE9IDAgfHxcbiAgICAgICAgISgwLCBhdWN0aW9uXzEuaXNBdWN0aW9uQ29tcGxldGUpKG9yZGVyLCBzbG90KSk7XG59XG5leHBvcnRzLmhhc0xpbWl0UHJpY2UgPSBoYXNMaW1pdFByaWNlO1xuZnVuY3Rpb24gaGFzQXVjdGlvblByaWNlKG9yZGVyLCBzbG90KSB7XG4gICAgcmV0dXJuICghKDAsIGF1Y3Rpb25fMS5pc0F1Y3Rpb25Db21wbGV0ZSkob3JkZXIsIHNsb3QpICYmXG4gICAgICAgICghb3JkZXIuYXVjdGlvblN0YXJ0UHJpY2UuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pIHx8ICFvcmRlci5hdWN0aW9uRW5kUHJpY2UuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSk7XG59XG5leHBvcnRzLmhhc0F1Y3Rpb25QcmljZSA9IGhhc0F1Y3Rpb25QcmljZTtcbmZ1bmN0aW9uIGlzRmlsbGFibGVCeVZBTU0ob3JkZXIsIG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhLCBzbG90LCB0cykge1xuICAgIHJldHVybiAoKCgwLCBhdWN0aW9uXzEuaXNBdWN0aW9uQ29tcGxldGUpKG9yZGVyLCBzbG90KSAmJlxuICAgICAgICBjYWxjdWxhdGVCYXNlQXNzZXRBbW91bnRGb3JBbW1Ub0Z1bGZpbGwob3JkZXIsIG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhLCBzbG90KS5ndGUobWFya2V0LmFtbS5taW5PcmRlclNpemUpKSB8fFxuICAgICAgICBpc09yZGVyRXhwaXJlZChvcmRlciwgdHMpKTtcbn1cbmV4cG9ydHMuaXNGaWxsYWJsZUJ5VkFNTSA9IGlzRmlsbGFibGVCeVZBTU07XG5mdW5jdGlvbiBjYWxjdWxhdGVCYXNlQXNzZXRBbW91bnRGb3JBbW1Ub0Z1bGZpbGwob3JkZXIsIG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhLCBzbG90KSB7XG4gICAgaWYgKG11c3RCZVRyaWdnZXJlZChvcmRlcikgJiYgIWlzVHJpZ2dlcmVkKG9yZGVyKSkge1xuICAgICAgICByZXR1cm4gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgfVxuICAgIGNvbnN0IGxpbWl0UHJpY2UgPSBnZXRMaW1pdFByaWNlKG9yZGVyLCBvcmFjbGVQcmljZURhdGEsIHNsb3QpO1xuICAgIGxldCBiYXNlQXNzZXRBbW91bnQ7XG4gICAgY29uc3QgdXBkYXRlZEFNTSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVVcGRhdGVkQU1NKShtYXJrZXQuYW1tLCBvcmFjbGVQcmljZURhdGEpO1xuICAgIGlmIChsaW1pdFByaWNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYmFzZUFzc2V0QW1vdW50ID0gY2FsY3VsYXRlQmFzZUFzc2V0QW1vdW50VG9GaWxsVXBUb0xpbWl0UHJpY2Uob3JkZXIsIHVwZGF0ZWRBTU0sIGxpbWl0UHJpY2UsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBiYXNlQXNzZXRBbW91bnQgPSBvcmRlci5iYXNlQXNzZXRBbW91bnQuc3ViKG9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZCk7XG4gICAgfVxuICAgIGNvbnN0IG1heEJhc2VBc3NldEFtb3VudCA9ICgwLCBhbW1fMS5jYWxjdWxhdGVNYXhCYXNlQXNzZXRBbW91bnRGaWxsYWJsZSkodXBkYXRlZEFNTSwgb3JkZXIuZGlyZWN0aW9uKTtcbiAgICByZXR1cm4gYW5jaG9yXzEuQk4ubWluKG1heEJhc2VBc3NldEFtb3VudCwgYmFzZUFzc2V0QW1vdW50KTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlQmFzZUFzc2V0QW1vdW50Rm9yQW1tVG9GdWxmaWxsID0gY2FsY3VsYXRlQmFzZUFzc2V0QW1vdW50Rm9yQW1tVG9GdWxmaWxsO1xuZnVuY3Rpb24gY2FsY3VsYXRlQmFzZUFzc2V0QW1vdW50VG9GaWxsVXBUb0xpbWl0UHJpY2Uob3JkZXIsIGFtbSwgbGltaXRQcmljZSwgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgY29uc3QgYWRqdXN0ZWRMaW1pdFByaWNlID0gKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5kaXJlY3Rpb24sICdsb25nJylcbiAgICAgICAgPyBsaW1pdFByaWNlLnN1YihhbW0ub3JkZXJUaWNrU2l6ZSlcbiAgICAgICAgOiBsaW1pdFByaWNlLmFkZChhbW0ub3JkZXJUaWNrU2l6ZSk7XG4gICAgY29uc3QgW21heEFtb3VudFRvVHJhZGUsIGRpcmVjdGlvbl0gPSAoMCwgYW1tXzEuY2FsY3VsYXRlTWF4QmFzZUFzc2V0QW1vdW50VG9UcmFkZSkoYW1tLCBhZGp1c3RlZExpbWl0UHJpY2UsIG9yZGVyLmRpcmVjdGlvbiwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBiYXNlQXNzZXRBbW91bnQgPSBzdGFuZGFyZGl6ZUJhc2VBc3NldEFtb3VudChtYXhBbW91bnRUb1RyYWRlLCBhbW0ub3JkZXJTdGVwU2l6ZSk7XG4gICAgLy8gQ2hlY2sgdGhhdCBkaXJlY3Rpb25zIGFyZSB0aGUgc2FtZVxuICAgIGNvbnN0IHNhbWVEaXJlY3Rpb24gPSBpc1NhbWVEaXJlY3Rpb24oZGlyZWN0aW9uLCBvcmRlci5kaXJlY3Rpb24pO1xuICAgIGlmICghc2FtZURpcmVjdGlvbikge1xuICAgICAgICByZXR1cm4gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgfVxuICAgIGNvbnN0IGJhc2VBc3NldEFtb3VudFVuZmlsbGVkID0gb3JkZXIuYmFzZUFzc2V0QW1vdW50LnN1YihvcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQpO1xuICAgIHJldHVybiBiYXNlQXNzZXRBbW91bnQuZ3QoYmFzZUFzc2V0QW1vdW50VW5maWxsZWQpXG4gICAgICAgID8gYmFzZUFzc2V0QW1vdW50VW5maWxsZWRcbiAgICAgICAgOiBiYXNlQXNzZXRBbW91bnQ7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUJhc2VBc3NldEFtb3VudFRvRmlsbFVwVG9MaW1pdFByaWNlID0gY2FsY3VsYXRlQmFzZUFzc2V0QW1vdW50VG9GaWxsVXBUb0xpbWl0UHJpY2U7XG5mdW5jdGlvbiBpc1NhbWVEaXJlY3Rpb24oZmlyc3REaXJlY3Rpb24sIHNlY29uZERpcmVjdGlvbikge1xuICAgIHJldHVybiAoKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoZmlyc3REaXJlY3Rpb24sICdsb25nJykgJiYgKDAsIHR5cGVzXzEuaXNWYXJpYW50KShzZWNvbmREaXJlY3Rpb24sICdsb25nJykpIHx8XG4gICAgICAgICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKGZpcnN0RGlyZWN0aW9uLCAnc2hvcnQnKSAmJiAoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHNlY29uZERpcmVjdGlvbiwgJ3Nob3J0JykpKTtcbn1cbmZ1bmN0aW9uIGlzT3JkZXJFeHBpcmVkKG9yZGVyLCB0cywgZW5mb3JjZUJ1ZmZlciA9IGZhbHNlKSB7XG4gICAgaWYgKG11c3RCZVRyaWdnZXJlZChvcmRlcikgfHxcbiAgICAgICAgISgwLCB0eXBlc18xLmlzVmFyaWFudCkob3JkZXIuc3RhdHVzLCAnb3BlbicpIHx8XG4gICAgICAgIG9yZGVyLm1heFRzLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxldCBtYXhUcztcbiAgICBpZiAoZW5mb3JjZUJ1ZmZlciAmJiBpc0xpbWl0T3JkZXIob3JkZXIpKSB7XG4gICAgICAgIG1heFRzID0gb3JkZXIubWF4VHMuYWRkbigxNSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXhUcyA9IG9yZGVyLm1heFRzO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IGFuY2hvcl8xLkJOKHRzKS5ndChtYXhUcyk7XG59XG5leHBvcnRzLmlzT3JkZXJFeHBpcmVkID0gaXNPcmRlckV4cGlyZWQ7XG5mdW5jdGlvbiBpc01hcmtldE9yZGVyKG9yZGVyKSB7XG4gICAgcmV0dXJuICgwLCB0eXBlc18xLmlzT25lT2ZWYXJpYW50KShvcmRlci5vcmRlclR5cGUsIFsnbWFya2V0JywgJ3RyaWdnZXJNYXJrZXQnLCAnb3JhY2xlJ10pO1xufVxuZXhwb3J0cy5pc01hcmtldE9yZGVyID0gaXNNYXJrZXRPcmRlcjtcbmZ1bmN0aW9uIGlzTGltaXRPcmRlcihvcmRlcikge1xuICAgIHJldHVybiAoMCwgdHlwZXNfMS5pc09uZU9mVmFyaWFudCkob3JkZXIub3JkZXJUeXBlLCBbJ2xpbWl0JywgJ3RyaWdnZXJMaW1pdCddKTtcbn1cbmV4cG9ydHMuaXNMaW1pdE9yZGVyID0gaXNMaW1pdE9yZGVyO1xuZnVuY3Rpb24gbXVzdEJlVHJpZ2dlcmVkKG9yZGVyKSB7XG4gICAgcmV0dXJuICgwLCB0eXBlc18xLmlzT25lT2ZWYXJpYW50KShvcmRlci5vcmRlclR5cGUsIFsndHJpZ2dlck1hcmtldCcsICd0cmlnZ2VyTGltaXQnXSk7XG59XG5leHBvcnRzLm11c3RCZVRyaWdnZXJlZCA9IG11c3RCZVRyaWdnZXJlZDtcbmZ1bmN0aW9uIGlzVHJpZ2dlcmVkKG9yZGVyKSB7XG4gICAgcmV0dXJuICgwLCB0eXBlc18xLmlzT25lT2ZWYXJpYW50KShvcmRlci50cmlnZ2VyQ29uZGl0aW9uLCBbXG4gICAgICAgICd0cmlnZ2VyZWRBYm92ZScsXG4gICAgICAgICd0cmlnZ2VyZWRCZWxvdycsXG4gICAgXSk7XG59XG5leHBvcnRzLmlzVHJpZ2dlcmVkID0gaXNUcmlnZ2VyZWQ7XG5mdW5jdGlvbiBpc1Jlc3RpbmdMaW1pdE9yZGVyKG9yZGVyLCBzbG90KSB7XG4gICAgcmV0dXJuIChpc0xpbWl0T3JkZXIob3JkZXIpICYmIChvcmRlci5wb3N0T25seSB8fCAoMCwgYXVjdGlvbl8xLmlzQXVjdGlvbkNvbXBsZXRlKShvcmRlciwgc2xvdCkpKTtcbn1cbmV4cG9ydHMuaXNSZXN0aW5nTGltaXRPcmRlciA9IGlzUmVzdGluZ0xpbWl0T3JkZXI7XG5mdW5jdGlvbiBpc1Rha2luZ09yZGVyKG9yZGVyLCBzbG90KSB7XG4gICAgcmV0dXJuIGlzTWFya2V0T3JkZXIob3JkZXIpIHx8ICFpc1Jlc3RpbmdMaW1pdE9yZGVyKG9yZGVyLCBzbG90KTtcbn1cbmV4cG9ydHMuaXNUYWtpbmdPcmRlciA9IGlzVGFraW5nT3JkZXI7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJpc1Rha2luZ09yZGVyIiwiaXNSZXN0aW5nTGltaXRPcmRlciIsImlzVHJpZ2dlcmVkIiwibXVzdEJlVHJpZ2dlcmVkIiwiaXNMaW1pdE9yZGVyIiwiaXNNYXJrZXRPcmRlciIsImlzT3JkZXJFeHBpcmVkIiwiY2FsY3VsYXRlQmFzZUFzc2V0QW1vdW50VG9GaWxsVXBUb0xpbWl0UHJpY2UiLCJjYWxjdWxhdGVCYXNlQXNzZXRBbW91bnRGb3JBbW1Ub0Z1bGZpbGwiLCJpc0ZpbGxhYmxlQnlWQU1NIiwiaGFzQXVjdGlvblByaWNlIiwiaGFzTGltaXRQcmljZSIsImdldExpbWl0UHJpY2UiLCJzdGFuZGFyZGl6ZVByaWNlIiwic3RhbmRhcmRpemVCYXNlQXNzZXRBbW91bnQiLCJpc09yZGVyUmVkdWNlT25seSIsImlzT3JkZXJSaXNrSW5jcmVhc2luZ0luU2FtZURpcmVjdGlvbiIsImlzT3JkZXJSaXNrSW5jcmVhc2luZyIsInR5cGVzXzEiLCJyZXF1aXJlIiwibnVtZXJpY0NvbnN0YW50c18xIiwiYW5jaG9yXzEiLCJhdWN0aW9uXzEiLCJhbW1fMSIsInVzZXIiLCJvcmRlciIsImlzVmFyaWFudCIsInN0YXR1cyIsInBvc2l0aW9uIiwiZ2V0UGVycFBvc2l0aW9uIiwibWFya2V0SW5kZXgiLCJnZXRFbXB0eVBvc2l0aW9uIiwiYmFzZUFzc2V0QW1vdW50IiwiZXEiLCJaRVJPIiwiZ3QiLCJkaXJlY3Rpb24iLCJsdCIsImJhc2VBc3NldEFtb3VudFRvRmlsbCIsInN1YiIsImJhc2VBc3NldEFtb3VudEZpbGxlZCIsImFicyIsIm11bCIsIlRXTyIsImd0ZSIsImx0ZSIsInN0ZXBTaXplIiwicmVtYWluZGVyIiwibW9kIiwicHJpY2UiLCJ0aWNrU2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJhZGQiLCJvcmFjbGVQcmljZURhdGEiLCJzbG90IiwiZmFsbGJhY2tQcmljZSIsImxpbWl0UHJpY2UiLCJnZXRBdWN0aW9uUHJpY2UiLCJvcmFjbGVQcmljZU9mZnNldCIsIkJOIiwiaXNBdWN0aW9uQ29tcGxldGUiLCJhdWN0aW9uU3RhcnRQcmljZSIsImF1Y3Rpb25FbmRQcmljZSIsIm1hcmtldCIsInRzIiwiYW1tIiwibWluT3JkZXJTaXplIiwidXBkYXRlZEFNTSIsImNhbGN1bGF0ZVVwZGF0ZWRBTU0iLCJ1bmRlZmluZWQiLCJtYXhCYXNlQXNzZXRBbW91bnQiLCJjYWxjdWxhdGVNYXhCYXNlQXNzZXRBbW91bnRGaWxsYWJsZSIsIm1pbiIsImFkanVzdGVkTGltaXRQcmljZSIsIm9yZGVyVGlja1NpemUiLCJtYXhBbW91bnRUb1RyYWRlIiwiY2FsY3VsYXRlTWF4QmFzZUFzc2V0QW1vdW50VG9UcmFkZSIsIm9yZGVyU3RlcFNpemUiLCJzYW1lRGlyZWN0aW9uIiwiaXNTYW1lRGlyZWN0aW9uIiwiYmFzZUFzc2V0QW1vdW50VW5maWxsZWQiLCJmaXJzdERpcmVjdGlvbiIsInNlY29uZERpcmVjdGlvbiIsImVuZm9yY2VCdWZmZXIiLCJtYXhUcyIsImFkZG4iLCJpc09uZU9mVmFyaWFudCIsIm9yZGVyVHlwZSIsInRyaWdnZXJDb25kaXRpb24iLCJwb3N0T25seSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/orders.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/position.js":
/*!***********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/position.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.hasOpenOrders = exports.isEmptyPosition = exports.positionCurrentDirection = exports.findDirectionToClose = exports.calculateCostBasis = exports.calculateEntryPrice = exports.calculateBreakEvenPrice = exports.positionIsAvailable = exports.calculatePositionFundingPNL = exports.calculateClaimablePnl = exports.calculatePositionPNL = exports.calculateBaseAssetValue = void 0;\nconst __1 = __webpack_require__(/*! ../ */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst amm_1 = __webpack_require__(/*! ./amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\");\nconst margin_1 = __webpack_require__(/*! ./margin */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/margin.js\");\nconst market_1 = __webpack_require__(/*! ./market */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/market.js\");\n/**\n * calculateBaseAssetValue\n * = market value of closing entire position\n * @param market\n * @param userPosition\n * @param oraclePriceData\n * @returns Base Asset Value. : Precision QUOTE_PRECISION\n */ function calculateBaseAssetValue(market, userPosition, oraclePriceData, useSpread = true, skipUpdate = false) {\n    if (userPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return numericConstants_1.ZERO;\n    }\n    const directionToClose = findDirectionToClose(userPosition);\n    let prepegAmm;\n    if (!skipUpdate) {\n        if (market.amm.baseSpread > 0 && useSpread) {\n            const { baseAssetReserve, quoteAssetReserve, sqrtK, newPeg } = (0, amm_1.calculateUpdatedAMMSpreadReserves)(market.amm, directionToClose, oraclePriceData);\n            prepegAmm = {\n                baseAssetReserve,\n                quoteAssetReserve,\n                sqrtK: sqrtK,\n                pegMultiplier: newPeg\n            };\n        } else {\n            prepegAmm = (0, amm_1.calculateUpdatedAMM)(market.amm, oraclePriceData);\n        }\n    } else {\n        prepegAmm = market.amm;\n    }\n    const [newQuoteAssetReserve, _] = (0, amm_1.calculateAmmReservesAfterSwap)(prepegAmm, \"base\", userPosition.baseAssetAmount.abs(), (0, amm_1.getSwapDirection)(\"base\", directionToClose));\n    switch(directionToClose){\n        case types_1.PositionDirection.SHORT:\n            return prepegAmm.quoteAssetReserve.sub(newQuoteAssetReserve).mul(prepegAmm.pegMultiplier).div(numericConstants_1.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO);\n        case types_1.PositionDirection.LONG:\n            return newQuoteAssetReserve.sub(prepegAmm.quoteAssetReserve).mul(prepegAmm.pegMultiplier).div(numericConstants_1.AMM_TIMES_PEG_TO_QUOTE_PRECISION_RATIO).add(numericConstants_1.ONE);\n    }\n}\nexports.calculateBaseAssetValue = calculateBaseAssetValue;\n/**\n * calculatePositionPNL\n * = BaseAssetAmount * (Avg Exit Price - Avg Entry Price)\n * @param market\n * @param PerpPosition\n * @param withFunding (adds unrealized funding payment pnl to result)\n * @param oraclePriceData\n * @returns BaseAssetAmount : Precision QUOTE_PRECISION\n */ function calculatePositionPNL(market, perpPosition, withFunding = false, oraclePriceData) {\n    if (perpPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return perpPosition.quoteAssetAmount;\n    }\n    const baseAssetValue = (0, margin_1.calculateBaseAssetValueWithOracle)(market, perpPosition, oraclePriceData);\n    const baseAssetValueSign = perpPosition.baseAssetAmount.isNeg() ? new __1.BN(-1) : new __1.BN(1);\n    let pnl = baseAssetValue.mul(baseAssetValueSign).add(perpPosition.quoteAssetAmount);\n    if (withFunding) {\n        const fundingRatePnL = calculatePositionFundingPNL(market, perpPosition);\n        pnl = pnl.add(fundingRatePnL);\n    }\n    return pnl;\n}\nexports.calculatePositionPNL = calculatePositionPNL;\nfunction calculateClaimablePnl(market, spotMarket, perpPosition, oraclePriceData) {\n    const unrealizedPnl = calculatePositionPNL(market, perpPosition, true, oraclePriceData);\n    let unsettledPnl = unrealizedPnl;\n    if (unrealizedPnl.gt(numericConstants_1.ZERO)) {\n        const excessPnlPool = __1.BN.max(numericConstants_1.ZERO, (0, market_1.calculateNetUserPnlImbalance)(market, spotMarket, oraclePriceData).mul(new __1.BN(-1)));\n        const maxPositivePnl = __1.BN.max(perpPosition.quoteAssetAmount.sub(perpPosition.quoteEntryAmount), numericConstants_1.ZERO).add(excessPnlPool);\n        unsettledPnl = __1.BN.min(maxPositivePnl, unrealizedPnl);\n    }\n    return unsettledPnl;\n}\nexports.calculateClaimablePnl = calculateClaimablePnl;\n/**\n *\n * @param market\n * @param PerpPosition\n * @returns // QUOTE_PRECISION\n */ function calculatePositionFundingPNL(market, perpPosition) {\n    if (perpPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return numericConstants_1.ZERO;\n    }\n    let ammCumulativeFundingRate;\n    if (perpPosition.baseAssetAmount.gt(numericConstants_1.ZERO)) {\n        ammCumulativeFundingRate = market.amm.cumulativeFundingRateLong;\n    } else {\n        ammCumulativeFundingRate = market.amm.cumulativeFundingRateShort;\n    }\n    const perPositionFundingRate = ammCumulativeFundingRate.sub(perpPosition.lastCumulativeFundingRate).mul(perpPosition.baseAssetAmount).div(numericConstants_1.AMM_RESERVE_PRECISION).div(numericConstants_1.FUNDING_RATE_BUFFER_PRECISION).mul(new __1.BN(-1));\n    return perPositionFundingRate;\n}\nexports.calculatePositionFundingPNL = calculatePositionFundingPNL;\nfunction positionIsAvailable(position) {\n    return position.baseAssetAmount.eq(numericConstants_1.ZERO) && position.openOrders === 0 && position.quoteAssetAmount.eq(numericConstants_1.ZERO) && position.lpShares.eq(numericConstants_1.ZERO);\n}\nexports.positionIsAvailable = positionIsAvailable;\n/**\n *\n * @param userPosition\n * @returns Precision: PRICE_PRECISION (10^6)\n */ function calculateBreakEvenPrice(userPosition) {\n    if (userPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return numericConstants_1.ZERO;\n    }\n    return userPosition.quoteBreakEvenAmount.mul(numericConstants_1.PRICE_PRECISION).mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).div(userPosition.baseAssetAmount).abs();\n}\nexports.calculateBreakEvenPrice = calculateBreakEvenPrice;\n/**\n *\n * @param userPosition\n * @returns Precision: PRICE_PRECISION (10^6)\n */ function calculateEntryPrice(userPosition) {\n    if (userPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return numericConstants_1.ZERO;\n    }\n    return userPosition.quoteEntryAmount.mul(numericConstants_1.PRICE_PRECISION).mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).div(userPosition.baseAssetAmount).abs();\n}\nexports.calculateEntryPrice = calculateEntryPrice;\n/**\n *\n * @param userPosition\n * @returns Precision: PRICE_PRECISION (10^10)\n */ function calculateCostBasis(userPosition) {\n    if (userPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n        return numericConstants_1.ZERO;\n    }\n    return userPosition.quoteAssetAmount.mul(numericConstants_1.PRICE_PRECISION).mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).div(userPosition.baseAssetAmount).abs();\n}\nexports.calculateCostBasis = calculateCostBasis;\nfunction findDirectionToClose(userPosition) {\n    return userPosition.baseAssetAmount.gt(numericConstants_1.ZERO) ? types_1.PositionDirection.SHORT : types_1.PositionDirection.LONG;\n}\nexports.findDirectionToClose = findDirectionToClose;\nfunction positionCurrentDirection(userPosition) {\n    return userPosition.baseAssetAmount.gte(numericConstants_1.ZERO) ? types_1.PositionDirection.LONG : types_1.PositionDirection.SHORT;\n}\nexports.positionCurrentDirection = positionCurrentDirection;\nfunction isEmptyPosition(userPosition) {\n    return userPosition.baseAssetAmount.eq(numericConstants_1.ZERO) && userPosition.openOrders === 0;\n}\nexports.isEmptyPosition = isEmptyPosition;\nfunction hasOpenOrders(position) {\n    return position.openOrders != 0 || !position.openBids.eq(numericConstants_1.ZERO) || !position.openAsks.eq(numericConstants_1.ZERO);\n}\nexports.hasOpenOrders = hasOpenOrders;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3Bvc2l0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBR0EsdUJBQXVCLEdBQUdBLGdDQUFnQyxHQUFHQSw0QkFBNEIsR0FBR0EsMEJBQTBCLEdBQUdBLDJCQUEyQixHQUFHQSwrQkFBK0IsR0FBR0EsMkJBQTJCLEdBQUdBLG1DQUFtQyxHQUFHQSw2QkFBNkIsR0FBR0EsNEJBQTRCLEdBQUdBLCtCQUErQixHQUFHLEtBQUs7QUFDM1gsTUFBTWMsTUFBTUMsbUJBQU9BLENBQUMsOERBQUs7QUFDekIsTUFBTUMscUJBQXFCRCxtQkFBT0EsQ0FBQyw2R0FBK0I7QUFDbEUsTUFBTUUsVUFBVUYsbUJBQU9BLENBQUMsbUVBQVU7QUFDbEMsTUFBTUcsUUFBUUgsbUJBQU9BLENBQUMsbUVBQU87QUFDN0IsTUFBTUksV0FBV0osbUJBQU9BLENBQUMseUVBQVU7QUFDbkMsTUFBTUssV0FBV0wsbUJBQU9BLENBQUMseUVBQVU7QUFDbkM7Ozs7Ozs7Q0FPQyxHQUNELFNBQVNGLHdCQUF3QlEsTUFBTSxFQUFFQyxZQUFZLEVBQUVDLGVBQWUsRUFBRUMsWUFBWSxJQUFJLEVBQUVDLGFBQWEsS0FBSztJQUN4RyxJQUFJSCxhQUFhSSxlQUFlLENBQUNDLEVBQUUsQ0FBQ1gsbUJBQW1CWSxJQUFJLEdBQUc7UUFDMUQsT0FBT1osbUJBQW1CWSxJQUFJO0lBQ2xDO0lBQ0EsTUFBTUMsbUJBQW1CeEIscUJBQXFCaUI7SUFDOUMsSUFBSVE7SUFDSixJQUFJLENBQUNMLFlBQVk7UUFDYixJQUFJSixPQUFPVSxHQUFHLENBQUNDLFVBQVUsR0FBRyxLQUFLUixXQUFXO1lBQ3hDLE1BQU0sRUFBRVMsZ0JBQWdCLEVBQUVDLGlCQUFpQixFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBR2xCLE1B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QUssR0FDL0I3QixRQUFRNEIsaUJBQWlCLENBQUNNLElBQUk7QUFDeEM7QUFDQW5ELDRCQUE0QixHQUFHSztBQUMvQixTQUFTRCx5QkFBeUJrQixZQUFZO0lBQzFDLE9BQU9BLGFBQWFJLGVBQWUsQ0FBQzZELEdBQUcsQ0FBQ3ZFLG1CQUFtQlksSUFBSSxJQUN6RFgsUUFBUTRCLGlCQUFpQixDQUFDTSxJQUFJLEdBQzlCbEMsUUFBUTRCLGlCQUFpQixDQUFDQyxLQUFLO0FBQ3pDO0FBQ0E5QyxnQ0FBZ0MsR0FBR0k7QUFDbkMsU0FBU0QsZ0JBQWdCbUIsWUFBWTtJQUNqQyxPQUFPQSxhQUFhSSxlQUFlLENBQUNDLEVBQUUsQ0FBQ1gsbUJBQW1CWSxJQUFJLEtBQUtOLGFBQWE0RCxVQUFVLEtBQUs7QUFDbkc7QUFDQWxGLHVCQUF1QixHQUFHRztBQUMxQixTQUFTRCxjQUFjK0UsUUFBUTtJQUMzQixPQUFRQSxTQUFTQyxVQUFVLElBQUksS0FDM0IsQ0FBQ0QsU0FBU08sUUFBUSxDQUFDN0QsRUFBRSxDQUFDWCxtQkFBbUJZLElBQUksS0FDN0MsQ0FBQ3FELFNBQVNRLFFBQVEsQ0FBQzlELEVBQUUsQ0FBQ1gsbUJBQW1CWSxJQUFJO0FBQ3JEO0FBQ0E1QixxQkFBcUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvbWF0aC9wb3NpdGlvbi5qcz84Y2JlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5oYXNPcGVuT3JkZXJzID0gZXhwb3J0cy5pc0VtcHR5UG9zaXRpb24gPSBleHBvcnRzLnBvc2l0aW9uQ3VycmVudERpcmVjdGlvbiA9IGV4cG9ydHMuZmluZERpcmVjdGlvblRvQ2xvc2UgPSBleHBvcnRzLmNhbGN1bGF0ZUNvc3RCYXNpcyA9IGV4cG9ydHMuY2FsY3VsYXRlRW50cnlQcmljZSA9IGV4cG9ydHMuY2FsY3VsYXRlQnJlYWtFdmVuUHJpY2UgPSBleHBvcnRzLnBvc2l0aW9uSXNBdmFpbGFibGUgPSBleHBvcnRzLmNhbGN1bGF0ZVBvc2l0aW9uRnVuZGluZ1BOTCA9IGV4cG9ydHMuY2FsY3VsYXRlQ2xhaW1hYmxlUG5sID0gZXhwb3J0cy5jYWxjdWxhdGVQb3NpdGlvblBOTCA9IGV4cG9ydHMuY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWUgPSB2b2lkIDA7XG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi4vXCIpO1xuY29uc3QgbnVtZXJpY0NvbnN0YW50c18xID0gcmVxdWlyZShcIi4uL2NvbnN0YW50cy9udW1lcmljQ29uc3RhbnRzXCIpO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IGFtbV8xID0gcmVxdWlyZShcIi4vYW1tXCIpO1xuY29uc3QgbWFyZ2luXzEgPSByZXF1aXJlKFwiLi9tYXJnaW5cIik7XG5jb25zdCBtYXJrZXRfMSA9IHJlcXVpcmUoXCIuL21hcmtldFwiKTtcbi8qKlxuICogY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWVcbiAqID0gbWFya2V0IHZhbHVlIG9mIGNsb3NpbmcgZW50aXJlIHBvc2l0aW9uXG4gKiBAcGFyYW0gbWFya2V0XG4gKiBAcGFyYW0gdXNlclBvc2l0aW9uXG4gKiBAcGFyYW0gb3JhY2xlUHJpY2VEYXRhXG4gKiBAcmV0dXJucyBCYXNlIEFzc2V0IFZhbHVlLiA6IFByZWNpc2lvbiBRVU9URV9QUkVDSVNJT05cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWUobWFya2V0LCB1c2VyUG9zaXRpb24sIG9yYWNsZVByaWNlRGF0YSwgdXNlU3ByZWFkID0gdHJ1ZSwgc2tpcFVwZGF0ZSA9IGZhbHNlKSB7XG4gICAgaWYgKHVzZXJQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIHJldHVybiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICB9XG4gICAgY29uc3QgZGlyZWN0aW9uVG9DbG9zZSA9IGZpbmREaXJlY3Rpb25Ub0Nsb3NlKHVzZXJQb3NpdGlvbik7XG4gICAgbGV0IHByZXBlZ0FtbTtcbiAgICBpZiAoIXNraXBVcGRhdGUpIHtcbiAgICAgICAgaWYgKG1hcmtldC5hbW0uYmFzZVNwcmVhZCA+IDAgJiYgdXNlU3ByZWFkKSB7XG4gICAgICAgICAgICBjb25zdCB7IGJhc2VBc3NldFJlc2VydmUsIHF1b3RlQXNzZXRSZXNlcnZlLCBzcXJ0SywgbmV3UGVnIH0gPSAoMCwgYW1tXzEuY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzKShtYXJrZXQuYW1tLCBkaXJlY3Rpb25Ub0Nsb3NlLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgcHJlcGVnQW1tID0ge1xuICAgICAgICAgICAgICAgIGJhc2VBc3NldFJlc2VydmUsXG4gICAgICAgICAgICAgICAgcXVvdGVBc3NldFJlc2VydmUsXG4gICAgICAgICAgICAgICAgc3FydEs6IHNxcnRLLFxuICAgICAgICAgICAgICAgIHBlZ011bHRpcGxpZXI6IG5ld1BlZyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwcmVwZWdBbW0gPSAoMCwgYW1tXzEuY2FsY3VsYXRlVXBkYXRlZEFNTSkobWFya2V0LmFtbSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJlcGVnQW1tID0gbWFya2V0LmFtbTtcbiAgICB9XG4gICAgY29uc3QgW25ld1F1b3RlQXNzZXRSZXNlcnZlLCBfXSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVBbW1SZXNlcnZlc0FmdGVyU3dhcCkocHJlcGVnQW1tLCAnYmFzZScsIHVzZXJQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuYWJzKCksICgwLCBhbW1fMS5nZXRTd2FwRGlyZWN0aW9uKSgnYmFzZScsIGRpcmVjdGlvblRvQ2xvc2UpKTtcbiAgICBzd2l0Y2ggKGRpcmVjdGlvblRvQ2xvc2UpIHtcbiAgICAgICAgY2FzZSB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JUOlxuICAgICAgICAgICAgcmV0dXJuIHByZXBlZ0FtbS5xdW90ZUFzc2V0UmVzZXJ2ZVxuICAgICAgICAgICAgICAgIC5zdWIobmV3UXVvdGVBc3NldFJlc2VydmUpXG4gICAgICAgICAgICAgICAgLm11bChwcmVwZWdBbW0ucGVnTXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fVElNRVNfUEVHX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyk7XG4gICAgICAgIGNhc2UgdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HOlxuICAgICAgICAgICAgcmV0dXJuIG5ld1F1b3RlQXNzZXRSZXNlcnZlXG4gICAgICAgICAgICAgICAgLnN1YihwcmVwZWdBbW0ucXVvdGVBc3NldFJlc2VydmUpXG4gICAgICAgICAgICAgICAgLm11bChwcmVwZWdBbW0ucGVnTXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fVElNRVNfUEVHX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTylcbiAgICAgICAgICAgICAgICAuYWRkKG51bWVyaWNDb25zdGFudHNfMS5PTkUpO1xuICAgIH1cbn1cbmV4cG9ydHMuY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWUgPSBjYWxjdWxhdGVCYXNlQXNzZXRWYWx1ZTtcbi8qKlxuICogY2FsY3VsYXRlUG9zaXRpb25QTkxcbiAqID0gQmFzZUFzc2V0QW1vdW50ICogKEF2ZyBFeGl0IFByaWNlIC0gQXZnIEVudHJ5IFByaWNlKVxuICogQHBhcmFtIG1hcmtldFxuICogQHBhcmFtIFBlcnBQb3NpdGlvblxuICogQHBhcmFtIHdpdGhGdW5kaW5nIChhZGRzIHVucmVhbGl6ZWQgZnVuZGluZyBwYXltZW50IHBubCB0byByZXN1bHQpXG4gKiBAcGFyYW0gb3JhY2xlUHJpY2VEYXRhXG4gKiBAcmV0dXJucyBCYXNlQXNzZXRBbW91bnQgOiBQcmVjaXNpb24gUVVPVEVfUFJFQ0lTSU9OXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVBvc2l0aW9uUE5MKG1hcmtldCwgcGVycFBvc2l0aW9uLCB3aXRoRnVuZGluZyA9IGZhbHNlLCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBpZiAocGVycFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIHBlcnBQb3NpdGlvbi5xdW90ZUFzc2V0QW1vdW50O1xuICAgIH1cbiAgICBjb25zdCBiYXNlQXNzZXRWYWx1ZSA9ICgwLCBtYXJnaW5fMS5jYWxjdWxhdGVCYXNlQXNzZXRWYWx1ZVdpdGhPcmFjbGUpKG1hcmtldCwgcGVycFBvc2l0aW9uLCBvcmFjbGVQcmljZURhdGEpO1xuICAgIGNvbnN0IGJhc2VBc3NldFZhbHVlU2lnbiA9IHBlcnBQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuaXNOZWcoKVxuICAgICAgICA/IG5ldyBfXzEuQk4oLTEpXG4gICAgICAgIDogbmV3IF9fMS5CTigxKTtcbiAgICBsZXQgcG5sID0gYmFzZUFzc2V0VmFsdWVcbiAgICAgICAgLm11bChiYXNlQXNzZXRWYWx1ZVNpZ24pXG4gICAgICAgIC5hZGQocGVycFBvc2l0aW9uLnF1b3RlQXNzZXRBbW91bnQpO1xuICAgIGlmICh3aXRoRnVuZGluZykge1xuICAgICAgICBjb25zdCBmdW5kaW5nUmF0ZVBuTCA9IGNhbGN1bGF0ZVBvc2l0aW9uRnVuZGluZ1BOTChtYXJrZXQsIHBlcnBQb3NpdGlvbik7XG4gICAgICAgIHBubCA9IHBubC5hZGQoZnVuZGluZ1JhdGVQbkwpO1xuICAgIH1cbiAgICByZXR1cm4gcG5sO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVQb3NpdGlvblBOTCA9IGNhbGN1bGF0ZVBvc2l0aW9uUE5MO1xuZnVuY3Rpb24gY2FsY3VsYXRlQ2xhaW1hYmxlUG5sKG1hcmtldCwgc3BvdE1hcmtldCwgcGVycFBvc2l0aW9uLCBvcmFjbGVQcmljZURhdGEpIHtcbiAgICBjb25zdCB1bnJlYWxpemVkUG5sID0gY2FsY3VsYXRlUG9zaXRpb25QTkwobWFya2V0LCBwZXJwUG9zaXRpb24sIHRydWUsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgbGV0IHVuc2V0dGxlZFBubCA9IHVucmVhbGl6ZWRQbmw7XG4gICAgaWYgKHVucmVhbGl6ZWRQbmwuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIGNvbnN0IGV4Y2Vzc1BubFBvb2wgPSBfXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCAoMCwgbWFya2V0XzEuY2FsY3VsYXRlTmV0VXNlclBubEltYmFsYW5jZSkobWFya2V0LCBzcG90TWFya2V0LCBvcmFjbGVQcmljZURhdGEpLm11bChuZXcgX18xLkJOKC0xKSkpO1xuICAgICAgICBjb25zdCBtYXhQb3NpdGl2ZVBubCA9IF9fMS5CTi5tYXgocGVycFBvc2l0aW9uLnF1b3RlQXNzZXRBbW91bnQuc3ViKHBlcnBQb3NpdGlvbi5xdW90ZUVudHJ5QW1vdW50KSwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pLmFkZChleGNlc3NQbmxQb29sKTtcbiAgICAgICAgdW5zZXR0bGVkUG5sID0gX18xLkJOLm1pbihtYXhQb3NpdGl2ZVBubCwgdW5yZWFsaXplZFBubCk7XG4gICAgfVxuICAgIHJldHVybiB1bnNldHRsZWRQbmw7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUNsYWltYWJsZVBubCA9IGNhbGN1bGF0ZUNsYWltYWJsZVBubDtcbi8qKlxuICpcbiAqIEBwYXJhbSBtYXJrZXRcbiAqIEBwYXJhbSBQZXJwUG9zaXRpb25cbiAqIEByZXR1cm5zIC8vIFFVT1RFX1BSRUNJU0lPTlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVQb3NpdGlvbkZ1bmRpbmdQTkwobWFya2V0LCBwZXJwUG9zaXRpb24pIHtcbiAgICBpZiAocGVycFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIH1cbiAgICBsZXQgYW1tQ3VtdWxhdGl2ZUZ1bmRpbmdSYXRlO1xuICAgIGlmIChwZXJwUG9zaXRpb24uYmFzZUFzc2V0QW1vdW50Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBhbW1DdW11bGF0aXZlRnVuZGluZ1JhdGUgPSBtYXJrZXQuYW1tLmN1bXVsYXRpdmVGdW5kaW5nUmF0ZUxvbmc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhbW1DdW11bGF0aXZlRnVuZGluZ1JhdGUgPSBtYXJrZXQuYW1tLmN1bXVsYXRpdmVGdW5kaW5nUmF0ZVNob3J0O1xuICAgIH1cbiAgICBjb25zdCBwZXJQb3NpdGlvbkZ1bmRpbmdSYXRlID0gYW1tQ3VtdWxhdGl2ZUZ1bmRpbmdSYXRlXG4gICAgICAgIC5zdWIocGVycFBvc2l0aW9uLmxhc3RDdW11bGF0aXZlRnVuZGluZ1JhdGUpXG4gICAgICAgIC5tdWwocGVycFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudClcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5GVU5ESU5HX1JBVEVfQlVGRkVSX1BSRUNJU0lPTilcbiAgICAgICAgLm11bChuZXcgX18xLkJOKC0xKSk7XG4gICAgcmV0dXJuIHBlclBvc2l0aW9uRnVuZGluZ1JhdGU7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVBvc2l0aW9uRnVuZGluZ1BOTCA9IGNhbGN1bGF0ZVBvc2l0aW9uRnVuZGluZ1BOTDtcbmZ1bmN0aW9uIHBvc2l0aW9uSXNBdmFpbGFibGUocG9zaXRpb24pIHtcbiAgICByZXR1cm4gKHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiZcbiAgICAgICAgcG9zaXRpb24ub3Blbk9yZGVycyA9PT0gMCAmJlxuICAgICAgICBwb3NpdGlvbi5xdW90ZUFzc2V0QW1vdW50LmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJlxuICAgICAgICBwb3NpdGlvbi5scFNoYXJlcy5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpO1xufVxuZXhwb3J0cy5wb3NpdGlvbklzQXZhaWxhYmxlID0gcG9zaXRpb25Jc0F2YWlsYWJsZTtcbi8qKlxuICpcbiAqIEBwYXJhbSB1c2VyUG9zaXRpb25cbiAqIEByZXR1cm5zIFByZWNpc2lvbjogUFJJQ0VfUFJFQ0lTSU9OICgxMF42KVxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVCcmVha0V2ZW5QcmljZSh1c2VyUG9zaXRpb24pIHtcbiAgICBpZiAodXNlclBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIH1cbiAgICByZXR1cm4gdXNlclBvc2l0aW9uLnF1b3RlQnJlYWtFdmVuQW1vdW50XG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTylcbiAgICAgICAgLmRpdih1c2VyUG9zaXRpb24uYmFzZUFzc2V0QW1vdW50KVxuICAgICAgICAuYWJzKCk7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUJyZWFrRXZlblByaWNlID0gY2FsY3VsYXRlQnJlYWtFdmVuUHJpY2U7XG4vKipcbiAqXG4gKiBAcGFyYW0gdXNlclBvc2l0aW9uXG4gKiBAcmV0dXJucyBQcmVjaXNpb246IFBSSUNFX1BSRUNJU0lPTiAoMTBeNilcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlRW50cnlQcmljZSh1c2VyUG9zaXRpb24pIHtcbiAgICBpZiAodXNlclBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIH1cbiAgICByZXR1cm4gdXNlclBvc2l0aW9uLnF1b3RlRW50cnlBbW91bnRcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5BTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPKVxuICAgICAgICAuZGl2KHVzZXJQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQpXG4gICAgICAgIC5hYnMoKTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlRW50cnlQcmljZSA9IGNhbGN1bGF0ZUVudHJ5UHJpY2U7XG4vKipcbiAqXG4gKiBAcGFyYW0gdXNlclBvc2l0aW9uXG4gKiBAcmV0dXJucyBQcmVjaXNpb246IFBSSUNFX1BSRUNJU0lPTiAoMTBeMTApXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNvc3RCYXNpcyh1c2VyUG9zaXRpb24pIHtcbiAgICBpZiAodXNlclBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIH1cbiAgICByZXR1cm4gdXNlclBvc2l0aW9uLnF1b3RlQXNzZXRBbW91bnRcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5BTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPKVxuICAgICAgICAuZGl2KHVzZXJQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQpXG4gICAgICAgIC5hYnMoKTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlQ29zdEJhc2lzID0gY2FsY3VsYXRlQ29zdEJhc2lzO1xuZnVuY3Rpb24gZmluZERpcmVjdGlvblRvQ2xvc2UodXNlclBvc2l0aW9uKSB7XG4gICAgcmV0dXJuIHVzZXJQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pXG4gICAgICAgID8gdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5TSE9SVFxuICAgICAgICA6IHR5cGVzXzEuUG9zaXRpb25EaXJlY3Rpb24uTE9ORztcbn1cbmV4cG9ydHMuZmluZERpcmVjdGlvblRvQ2xvc2UgPSBmaW5kRGlyZWN0aW9uVG9DbG9zZTtcbmZ1bmN0aW9uIHBvc2l0aW9uQ3VycmVudERpcmVjdGlvbih1c2VyUG9zaXRpb24pIHtcbiAgICByZXR1cm4gdXNlclBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5ndGUobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pXG4gICAgICAgID8gdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HXG4gICAgICAgIDogdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5TSE9SVDtcbn1cbmV4cG9ydHMucG9zaXRpb25DdXJyZW50RGlyZWN0aW9uID0gcG9zaXRpb25DdXJyZW50RGlyZWN0aW9uO1xuZnVuY3Rpb24gaXNFbXB0eVBvc2l0aW9uKHVzZXJQb3NpdGlvbikge1xuICAgIHJldHVybiB1c2VyUG9zaXRpb24uYmFzZUFzc2V0QW1vdW50LmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJiB1c2VyUG9zaXRpb24ub3Blbk9yZGVycyA9PT0gMDtcbn1cbmV4cG9ydHMuaXNFbXB0eVBvc2l0aW9uID0gaXNFbXB0eVBvc2l0aW9uO1xuZnVuY3Rpb24gaGFzT3Blbk9yZGVycyhwb3NpdGlvbikge1xuICAgIHJldHVybiAocG9zaXRpb24ub3Blbk9yZGVycyAhPSAwIHx8XG4gICAgICAgICFwb3NpdGlvbi5vcGVuQmlkcy5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgfHxcbiAgICAgICAgIXBvc2l0aW9uLm9wZW5Bc2tzLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSk7XG59XG5leHBvcnRzLmhhc09wZW5PcmRlcnMgPSBoYXNPcGVuT3JkZXJzO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiaGFzT3Blbk9yZGVycyIsImlzRW1wdHlQb3NpdGlvbiIsInBvc2l0aW9uQ3VycmVudERpcmVjdGlvbiIsImZpbmREaXJlY3Rpb25Ub0Nsb3NlIiwiY2FsY3VsYXRlQ29zdEJhc2lzIiwiY2FsY3VsYXRlRW50cnlQcmljZSIsImNhbGN1bGF0ZUJyZWFrRXZlblByaWNlIiwicG9zaXRpb25Jc0F2YWlsYWJsZSIsImNhbGN1bGF0ZVBvc2l0aW9uRnVuZGluZ1BOTCIsImNhbGN1bGF0ZUNsYWltYWJsZVBubCIsImNhbGN1bGF0ZVBvc2l0aW9uUE5MIiwiY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWUiLCJfXzEiLCJyZXF1aXJlIiwibnVtZXJpY0NvbnN0YW50c18xIiwidHlwZXNfMSIsImFtbV8xIiwibWFyZ2luXzEiLCJtYXJrZXRfMSIsIm1hcmtldCIsInVzZXJQb3NpdGlvbiIsIm9yYWNsZVByaWNlRGF0YSIsInVzZVNwcmVhZCIsInNraXBVcGRhdGUiLCJiYXNlQXNzZXRBbW91bnQiLCJlcSIsIlpFUk8iLCJkaXJlY3Rpb25Ub0Nsb3NlIiwicHJlcGVnQW1tIiwiYW1tIiwiYmFzZVNwcmVhZCIsImJhc2VBc3NldFJlc2VydmUiLCJxdW90ZUFzc2V0UmVzZXJ2ZSIsInNxcnRLIiwibmV3UGVnIiwiY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzIiwicGVnTXVsdGlwbGllciIsImNhbGN1bGF0ZVVwZGF0ZWRBTU0iLCJuZXdRdW90ZUFzc2V0UmVzZXJ2ZSIsIl8iLCJjYWxjdWxhdGVBbW1SZXNlcnZlc0FmdGVyU3dhcCIsImFicyIsImdldFN3YXBEaXJlY3Rpb24iLCJQb3NpdGlvbkRpcmVjdGlvbiIsIlNIT1JUIiwic3ViIiwibXVsIiwiZGl2IiwiQU1NX1RJTUVTX1BFR19UT19RVU9URV9QUkVDSVNJT05fUkFUSU8iLCJMT05HIiwiYWRkIiwiT05FIiwicGVycFBvc2l0aW9uIiwid2l0aEZ1bmRpbmciLCJxdW90ZUFzc2V0QW1vdW50IiwiYmFzZUFzc2V0VmFsdWUiLCJjYWxjdWxhdGVCYXNlQXNzZXRWYWx1ZVdpdGhPcmFjbGUiLCJiYXNlQXNzZXRWYWx1ZVNpZ24iLCJpc05lZyIsIkJOIiwicG5sIiwiZnVuZGluZ1JhdGVQbkwiLCJzcG90TWFya2V0IiwidW5yZWFsaXplZFBubCIsInVuc2V0dGxlZFBubCIsImd0IiwiZXhjZXNzUG5sUG9vbCIsIm1heCIsImNhbGN1bGF0ZU5ldFVzZXJQbmxJbWJhbGFuY2UiLCJtYXhQb3NpdGl2ZVBubCIsInF1b3RlRW50cnlBbW91bnQiLCJtaW4iLCJhbW1DdW11bGF0aXZlRnVuZGluZ1JhdGUiLCJjdW11bGF0aXZlRnVuZGluZ1JhdGVMb25nIiwiY3VtdWxhdGl2ZUZ1bmRpbmdSYXRlU2hvcnQiLCJwZXJQb3NpdGlvbkZ1bmRpbmdSYXRlIiwibGFzdEN1bXVsYXRpdmVGdW5kaW5nUmF0ZSIsIkFNTV9SRVNFUlZFX1BSRUNJU0lPTiIsIkZVTkRJTkdfUkFURV9CVUZGRVJfUFJFQ0lTSU9OIiwicG9zaXRpb24iLCJvcGVuT3JkZXJzIiwibHBTaGFyZXMiLCJxdW90ZUJyZWFrRXZlbkFtb3VudCIsIlBSSUNFX1BSRUNJU0lPTiIsIkFNTV9UT19RVU9URV9QUkVDSVNJT05fUkFUSU8iLCJndGUiLCJvcGVuQmlkcyIsIm9wZW5Bc2tzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/position.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/repeg.js":
/*!********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/repeg.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateBudgetedPeg = exports.calculateBudgetedK = exports.calculateBudgetedKBN = exports.calculateRepegCost = exports.calculateAdjustKCost = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst assert_1 = __webpack_require__(/*! ../assert/assert */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\n/**\n * Helper function calculating adjust k cost\n * @param amm\n * @param numerator\n * @param denomenator\n * @returns cost : Precision QUOTE_ASSET_PRECISION\n */ function calculateAdjustKCost(amm, numerator, denomenator) {\n    // const k = market.amm.sqrtK.mul(market.amm.sqrtK);\n    const x = amm.baseAssetReserve;\n    const y = amm.quoteAssetReserve;\n    const d = amm.baseAssetAmountWithAmm;\n    const Q = amm.pegMultiplier;\n    const quoteScale = y.mul(d).mul(Q); //.div(AMM_RESERVE_PRECISION);\n    const p = numerator.mul(numericConstants_1.PRICE_PRECISION).div(denomenator);\n    const cost = quoteScale.mul(numericConstants_1.PERCENTAGE_PRECISION).mul(numericConstants_1.PERCENTAGE_PRECISION).div(x.add(d)).sub(quoteScale.mul(p).mul(numericConstants_1.PERCENTAGE_PRECISION).mul(numericConstants_1.PERCENTAGE_PRECISION).div(numericConstants_1.PRICE_PRECISION).div(x.mul(p).div(numericConstants_1.PRICE_PRECISION).add(d))).div(numericConstants_1.PERCENTAGE_PRECISION).div(numericConstants_1.PERCENTAGE_PRECISION).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).div(numericConstants_1.PEG_PRECISION);\n    return cost.mul(new anchor_1.BN(-1));\n}\nexports.calculateAdjustKCost = calculateAdjustKCost;\n// /**\n//  * Helper function calculating adjust k cost\n//  * @param amm\n//  * @param numerator\n//  * @param denomenator\n//  * @returns cost : Precision QUOTE_ASSET_PRECISION\n//  */\n// export function calculateAdjustKCost2(\n// \tamm: AMM,\n// \tnumerator: BN,\n// \tdenomenator: BN\n// ): BN {\n// \t// const k = market.amm.sqrtK.mul(market.amm.sqrtK);\n// \tconst directionToClose = amm.baseAssetAmountWithAmm.gt(ZERO)\n// \t\t? PositionDirection.SHORT\n// \t\t: PositionDirection.LONG;\n// \tconst [newQuoteAssetReserve, _newBaseAssetReserve] =\n// \t\tcalculateAmmReservesAfterSwap(\n// \t\t\tamm,\n// \t\t\t'base',\n// \t\t\tamm.baseAssetAmountWithAmm.abs(),\n// \t\t\tgetSwapDirection('base', directionToClose)\n// \t\t);\n// }\n/**\n * Helper function calculating adjust pegMultiplier (repeg) cost\n *\n * @param amm\n * @param newPeg\n * @returns cost : Precision QUOTE_ASSET_PRECISION\n */ function calculateRepegCost(amm, newPeg) {\n    const dqar = amm.quoteAssetReserve.sub(amm.terminalQuoteAssetReserve);\n    const cost = dqar.mul(newPeg.sub(amm.pegMultiplier)).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).div(numericConstants_1.PEG_PRECISION);\n    return cost;\n}\nexports.calculateRepegCost = calculateRepegCost;\nfunction calculateBudgetedKBN(x, y, budget, Q, d) {\n    (0, assert_1.assert)(Q.gt(new anchor_1.BN(0)));\n    const C = budget.mul(new anchor_1.BN(-1));\n    let dSign = new anchor_1.BN(1);\n    if (d.lt(new anchor_1.BN(0))) {\n        dSign = new anchor_1.BN(-1);\n    }\n    const pegged_y_d_d = y.mul(d).mul(d).mul(Q).div(numericConstants_1.AMM_RESERVE_PRECISION).div(numericConstants_1.AMM_RESERVE_PRECISION).div(numericConstants_1.PEG_PRECISION);\n    const numer1 = pegged_y_d_d;\n    const numer2 = C.mul(d).div(numericConstants_1.QUOTE_PRECISION).mul(x.add(d)).div(numericConstants_1.AMM_RESERVE_PRECISION).mul(dSign);\n    const denom1 = C.mul(x).mul(x.add(d)).div(numericConstants_1.AMM_RESERVE_PRECISION).div(numericConstants_1.QUOTE_PRECISION);\n    const denom2 = pegged_y_d_d;\n    // protocol is spending to increase k\n    if (C.lt(numericConstants_1.ZERO)) {\n        // thus denom1 is negative and solution is unstable\n        if (denom1.abs().gt(denom2.abs())) {\n            console.log(\"denom1 > denom2\", denom1.toString(), denom2.toString());\n            console.log(\"budget cost exceeds stable K solution\");\n            return [\n                new anchor_1.BN(10000),\n                new anchor_1.BN(1)\n            ];\n        }\n    }\n    const numerator = numer1.sub(numer2).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO);\n    const denominator = denom1.add(denom2).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO);\n    return [\n        numerator,\n        denominator\n    ];\n}\nexports.calculateBudgetedKBN = calculateBudgetedKBN;\nfunction calculateBudgetedK(amm, cost) {\n    // wolframalpha.com\n    // (1/(x+d) - p/(x*p+d))*y*d*Q = C solve for p\n    // p = (d(y*d*Q - C(x+d))) / (C*x(x+d) + y*d*d*Q)\n    // numer\n    //   =  y*d*d*Q - Cxd - Cdd\n    //   =  y/x*Q*d*d - Cd - Cd/x\n    //   = mark      - C/d - C/(x)\n    //   =  mark/C    - 1/d - 1/x\n    // denom\n    // = C*x*x + C*x*d + y*d*d*Q\n    // = x/d**2 + 1 / d + mark/C\n    // todo: assumes k = x * y\n    // otherwise use: (y(1-p) + (kp^2/(x*p+d)) - k/(x+d)) * Q = C solve for p\n    const x = amm.baseAssetReserve;\n    const y = amm.quoteAssetReserve;\n    const d = amm.baseAssetAmountWithAmm;\n    const Q = amm.pegMultiplier;\n    const [numerator, denominator] = calculateBudgetedKBN(x, y, cost, Q, d);\n    return [\n        numerator,\n        denominator\n    ];\n}\nexports.calculateBudgetedK = calculateBudgetedK;\nfunction calculateBudgetedPeg(amm, budget, targetPrice) {\n    let perPegCost = amm.quoteAssetReserve.sub(amm.terminalQuoteAssetReserve).div(numericConstants_1.AMM_RESERVE_PRECISION.div(numericConstants_1.PRICE_PRECISION));\n    if (perPegCost.gt(numericConstants_1.ZERO)) {\n        perPegCost = perPegCost.add(numericConstants_1.ONE);\n    } else if (perPegCost.lt(numericConstants_1.ZERO)) {\n        perPegCost = perPegCost.sub(numericConstants_1.ONE);\n    }\n    const targetPeg = targetPrice.mul(amm.baseAssetReserve).div(amm.quoteAssetReserve).div(numericConstants_1.PRICE_DIV_PEG);\n    const pegChangeDirection = targetPeg.sub(amm.pegMultiplier);\n    const useTargetPeg = perPegCost.lt(numericConstants_1.ZERO) && pegChangeDirection.gt(numericConstants_1.ZERO) || perPegCost.gt(numericConstants_1.ZERO) && pegChangeDirection.lt(numericConstants_1.ZERO);\n    if (perPegCost.eq(numericConstants_1.ZERO) || useTargetPeg) {\n        return targetPeg;\n    }\n    const budgetDeltaPeg = budget.mul(numericConstants_1.PEG_PRECISION).div(perPegCost);\n    const newPeg = anchor_1.BN.max(numericConstants_1.ONE, amm.pegMultiplier.add(budgetDeltaPeg));\n    return newPeg;\n}\nexports.calculateBudgetedPeg = calculateBudgetedPeg;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3JlcGVnLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw0QkFBNEIsR0FBR0EsMEJBQTBCLEdBQUdBLDRCQUE0QixHQUFHQSwwQkFBMEIsR0FBR0EsNEJBQTRCLEdBQUcsS0FBSztBQUM1SixNQUFNTyxXQUFXQyxtQkFBT0EsQ0FBQyxtRkFBbUI7QUFDNUMsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsbUZBQWtCO0FBQzNDLE1BQU1FLHFCQUFxQkYsbUJBQU9BLENBQUMsNkdBQStCO0FBQ2xFOzs7Ozs7Q0FNQyxHQUNELFNBQVNGLHFCQUFxQkssR0FBRyxFQUFFQyxTQUFTLEVBQUVDLFdBQVc7SUFDckQsb0RBQW9EO0lBQ3BELE1BQU1DLElBQUlILElBQUlJLGdCQUFnQjtJQUM5QixNQUFNQyxJQUFJTCxJQUFJTSxpQkFBaUI7SUFDL0IsTUFBTUMsSUFBSVAsSUFBSVEsc0JBQXNCO0lBQ3BDLE1BQU1DLElBQUlULElBQUlVLGFBQWE7SUFDM0IsTUFBTUMsYUFBYU4sRUFBRU8sR0FBRyxDQUFDTCxHQUFHSyxHQUFHLENBQUNILElBQUksOEJBQThCO0lBQ2xFLE1BQU1JLElBQUlaLFVBQVVXLEdBQUcsQ0FBQ2IsbUJBQW1CZSxlQUFlLEVBQUVDLEdBQUcsQ0FBQ2I7SUFDaEUsTUFBTWMsT0FBT0wsV0FDUkMsR0FBRyxDQUFDYixtQkFBbUJrQixvQkFBb0IsRUFDM0NMLEdBQUcsQ0FBQ2IsbUJBQW1Ca0Isb0JBQW9CLEVBQzNDRixHQUFHLENBQUNaLEVBQUVlLEdBQUcsQ0FBQ1gsSUFDVlksR0FBRyxDQUFDUixXQUNKQyxHQUFHLENBQUNDLEdBQ0pELEdBQUcsQ0FBQ2IsbUJBQW1Ca0Isb0JBQW9CLEVBQzNDTCxHQUFHLENBQUNiLG1CQUFtQmtCLG9CQUFvQixFQUMzQ0YsR0FBRyxDQUFDaEIsbUJBQW1CZSxlQUFl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R0FBRyxFQUFFL0MsSUFBSVUsYUFBYSxDQUFDUSxHQUFHLENBQUNtQztJQUM3RSxPQUFPOUI7QUFDWDtBQUNBbEMsNEJBQTRCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvcmVwZWcuanM/YjIzYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2FsY3VsYXRlQnVkZ2V0ZWRQZWcgPSBleHBvcnRzLmNhbGN1bGF0ZUJ1ZGdldGVkSyA9IGV4cG9ydHMuY2FsY3VsYXRlQnVkZ2V0ZWRLQk4gPSBleHBvcnRzLmNhbGN1bGF0ZVJlcGVnQ29zdCA9IGV4cG9ydHMuY2FsY3VsYXRlQWRqdXN0S0Nvc3QgPSB2b2lkIDA7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IGFzc2VydF8xID0gcmVxdWlyZShcIi4uL2Fzc2VydC9hc3NlcnRcIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiBjYWxjdWxhdGluZyBhZGp1c3QgayBjb3N0XG4gKiBAcGFyYW0gYW1tXG4gKiBAcGFyYW0gbnVtZXJhdG9yXG4gKiBAcGFyYW0gZGVub21lbmF0b3JcbiAqIEByZXR1cm5zIGNvc3QgOiBQcmVjaXNpb24gUVVPVEVfQVNTRVRfUFJFQ0lTSU9OXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUFkanVzdEtDb3N0KGFtbSwgbnVtZXJhdG9yLCBkZW5vbWVuYXRvcikge1xuICAgIC8vIGNvbnN0IGsgPSBtYXJrZXQuYW1tLnNxcnRLLm11bChtYXJrZXQuYW1tLnNxcnRLKTtcbiAgICBjb25zdCB4ID0gYW1tLmJhc2VBc3NldFJlc2VydmU7XG4gICAgY29uc3QgeSA9IGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZTtcbiAgICBjb25zdCBkID0gYW1tLmJhc2VBc3NldEFtb3VudFdpdGhBbW07XG4gICAgY29uc3QgUSA9IGFtbS5wZWdNdWx0aXBsaWVyO1xuICAgIGNvbnN0IHF1b3RlU2NhbGUgPSB5Lm11bChkKS5tdWwoUSk7IC8vLmRpdihBTU1fUkVTRVJWRV9QUkVDSVNJT04pO1xuICAgIGNvbnN0IHAgPSBudW1lcmF0b3IubXVsKG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pLmRpdihkZW5vbWVuYXRvcik7XG4gICAgY29uc3QgY29zdCA9IHF1b3RlU2NhbGVcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUEVSQ0VOVEFHRV9QUkVDSVNJT04pXG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KHguYWRkKGQpKVxuICAgICAgICAuc3ViKHF1b3RlU2NhbGVcbiAgICAgICAgLm11bChwKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5QRVJDRU5UQUdFX1BSRUNJU0lPTilcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUEVSQ0VOVEFHRV9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdih4Lm11bChwKS5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTikuYWRkKGQpKSlcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUEVSQ0VOVEFHRV9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QRUdfUFJFQ0lTSU9OKTtcbiAgICByZXR1cm4gY29zdC5tdWwobmV3IGFuY2hvcl8xLkJOKC0xKSk7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUFkanVzdEtDb3N0ID0gY2FsY3VsYXRlQWRqdXN0S0Nvc3Q7XG4vLyAvKipcbi8vICAqIEhlbHBlciBmdW5jdGlvbiBjYWxjdWxhdGluZyBhZGp1c3QgayBjb3N0XG4vLyAgKiBAcGFyYW0gYW1tXG4vLyAgKiBAcGFyYW0gbnVtZXJhdG9yXG4vLyAgKiBAcGFyYW0gZGVub21lbmF0b3Jcbi8vICAqIEByZXR1cm5zIGNvc3QgOiBQcmVjaXNpb24gUVVPVEVfQVNTRVRfUFJFQ0lTSU9OXG4vLyAgKi9cbi8vIGV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVBZGp1c3RLQ29zdDIoXG4vLyBcdGFtbTogQU1NLFxuLy8gXHRudW1lcmF0b3I6IEJOLFxuLy8gXHRkZW5vbWVuYXRvcjogQk5cbi8vICk6IEJOIHtcbi8vIFx0Ly8gY29uc3QgayA9IG1hcmtldC5hbW0uc3FydEsubXVsKG1hcmtldC5hbW0uc3FydEspO1xuLy8gXHRjb25zdCBkaXJlY3Rpb25Ub0Nsb3NlID0gYW1tLmJhc2VBc3NldEFtb3VudFdpdGhBbW0uZ3QoWkVSTylcbi8vIFx0XHQ/IFBvc2l0aW9uRGlyZWN0aW9uLlNIT1JUXG4vLyBcdFx0OiBQb3NpdGlvbkRpcmVjdGlvbi5MT05HO1xuLy8gXHRjb25zdCBbbmV3UXVvdGVBc3NldFJlc2VydmUsIF9uZXdCYXNlQXNzZXRSZXNlcnZlXSA9XG4vLyBcdFx0Y2FsY3VsYXRlQW1tUmVzZXJ2ZXNBZnRlclN3YXAoXG4vLyBcdFx0XHRhbW0sXG4vLyBcdFx0XHQnYmFzZScsXG4vLyBcdFx0XHRhbW0uYmFzZUFzc2V0QW1vdW50V2l0aEFtbS5hYnMoKSxcbi8vIFx0XHRcdGdldFN3YXBEaXJlY3Rpb24oJ2Jhc2UnLCBkaXJlY3Rpb25Ub0Nsb3NlKVxuLy8gXHRcdCk7XG4vLyB9XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiBjYWxjdWxhdGluZyBhZGp1c3QgcGVnTXVsdGlwbGllciAocmVwZWcpIGNvc3RcbiAqXG4gKiBAcGFyYW0gYW1tXG4gKiBAcGFyYW0gbmV3UGVnXG4gKiBAcmV0dXJucyBjb3N0IDogUHJlY2lzaW9uIFFVT1RFX0FTU0VUX1BSRUNJU0lPTlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVSZXBlZ0Nvc3QoYW1tLCBuZXdQZWcpIHtcbiAgICBjb25zdCBkcWFyID0gYW1tLnF1b3RlQXNzZXRSZXNlcnZlLnN1YihhbW0udGVybWluYWxRdW90ZUFzc2V0UmVzZXJ2ZSk7XG4gICAgY29uc3QgY29zdCA9IGRxYXJcbiAgICAgICAgLm11bChuZXdQZWcuc3ViKGFtbS5wZWdNdWx0aXBsaWVyKSlcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTylcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUEVHX1BSRUNJU0lPTik7XG4gICAgcmV0dXJuIGNvc3Q7XG59XG5leHBvcnRzLmNhbGN1bGF0ZVJlcGVnQ29zdCA9IGNhbGN1bGF0ZVJlcGVnQ29zdDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJ1ZGdldGVkS0JOKHgsIHksIGJ1ZGdldCwgUSwgZCkge1xuICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKFEuZ3QobmV3IGFuY2hvcl8xLkJOKDApKSk7XG4gICAgY29uc3QgQyA9IGJ1ZGdldC5tdWwobmV3IGFuY2hvcl8xLkJOKC0xKSk7XG4gICAgbGV0IGRTaWduID0gbmV3IGFuY2hvcl8xLkJOKDEpO1xuICAgIGlmIChkLmx0KG5ldyBhbmNob3JfMS5CTigwKSkpIHtcbiAgICAgICAgZFNpZ24gPSBuZXcgYW5jaG9yXzEuQk4oLTEpO1xuICAgIH1cbiAgICBjb25zdCBwZWdnZWRfeV9kX2QgPSB5XG4gICAgICAgIC5tdWwoZClcbiAgICAgICAgLm11bChkKVxuICAgICAgICAubXVsKFEpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QRUdfUFJFQ0lTSU9OKTtcbiAgICBjb25zdCBudW1lcjEgPSBwZWdnZWRfeV9kX2Q7XG4gICAgY29uc3QgbnVtZXIyID0gQy5tdWwoZClcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OKVxuICAgICAgICAubXVsKHguYWRkKGQpKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pXG4gICAgICAgIC5tdWwoZFNpZ24pO1xuICAgIGNvbnN0IGRlbm9tMSA9IEMubXVsKHgpXG4gICAgICAgIC5tdWwoeC5hZGQoZCkpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OKTtcbiAgICBjb25zdCBkZW5vbTIgPSBwZWdnZWRfeV9kX2Q7XG4gICAgLy8gcHJvdG9jb2wgaXMgc3BlbmRpbmcgdG8gaW5jcmVhc2Uga1xuICAgIGlmIChDLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAvLyB0aHVzIGRlbm9tMSBpcyBuZWdhdGl2ZSBhbmQgc29sdXRpb24gaXMgdW5zdGFibGVcbiAgICAgICAgaWYgKGRlbm9tMS5hYnMoKS5ndChkZW5vbTIuYWJzKCkpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGVub20xID4gZGVub20yJywgZGVub20xLnRvU3RyaW5nKCksIGRlbm9tMi50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdidWRnZXQgY29zdCBleGNlZWRzIHN0YWJsZSBLIHNvbHV0aW9uJyk7XG4gICAgICAgICAgICByZXR1cm4gW25ldyBhbmNob3JfMS5CTigxMDAwMCksIG5ldyBhbmNob3JfMS5CTigxKV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbnVtZXJhdG9yID0gbnVtZXIxLnN1YihudW1lcjIpLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyk7XG4gICAgY29uc3QgZGVub21pbmF0b3IgPSBkZW5vbTEuYWRkKGRlbm9tMikuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPKTtcbiAgICByZXR1cm4gW251bWVyYXRvciwgZGVub21pbmF0b3JdO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVCdWRnZXRlZEtCTiA9IGNhbGN1bGF0ZUJ1ZGdldGVkS0JOO1xuZnVuY3Rpb24gY2FsY3VsYXRlQnVkZ2V0ZWRLKGFtbSwgY29zdCkge1xuICAgIC8vIHdvbGZyYW1hbHBoYS5jb21cbiAgICAvLyAoMS8oeCtkKSAtIHAvKHgqcCtkKSkqeSpkKlEgPSBDIHNvbHZlIGZvciBwXG4gICAgLy8gcCA9IChkKHkqZCpRIC0gQyh4K2QpKSkgLyAoQyp4KHgrZCkgKyB5KmQqZCpRKVxuICAgIC8vIG51bWVyXG4gICAgLy8gICA9ICB5KmQqZCpRIC0gQ3hkIC0gQ2RkXG4gICAgLy8gICA9ICB5L3gqUSpkKmQgLSBDZCAtIENkL3hcbiAgICAvLyAgID0gbWFyayAgICAgIC0gQy9kIC0gQy8oeClcbiAgICAvLyAgID0gIG1hcmsvQyAgICAtIDEvZCAtIDEveFxuICAgIC8vIGRlbm9tXG4gICAgLy8gPSBDKngqeCArIEMqeCpkICsgeSpkKmQqUVxuICAgIC8vID0geC9kKioyICsgMSAvIGQgKyBtYXJrL0NcbiAgICAvLyB0b2RvOiBhc3N1bWVzIGsgPSB4ICogeVxuICAgIC8vIG90aGVyd2lzZSB1c2U6ICh5KDEtcCkgKyAoa3BeMi8oeCpwK2QpKSAtIGsvKHgrZCkpICogUSA9IEMgc29sdmUgZm9yIHBcbiAgICBjb25zdCB4ID0gYW1tLmJhc2VBc3NldFJlc2VydmU7XG4gICAgY29uc3QgeSA9IGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZTtcbiAgICBjb25zdCBkID0gYW1tLmJhc2VBc3NldEFtb3VudFdpdGhBbW07XG4gICAgY29uc3QgUSA9IGFtbS5wZWdNdWx0aXBsaWVyO1xuICAgIGNvbnN0IFtudW1lcmF0b3IsIGRlbm9taW5hdG9yXSA9IGNhbGN1bGF0ZUJ1ZGdldGVkS0JOKHgsIHksIGNvc3QsIFEsIGQpO1xuICAgIHJldHVybiBbbnVtZXJhdG9yLCBkZW5vbWluYXRvcl07XG59XG5leHBvcnRzLmNhbGN1bGF0ZUJ1ZGdldGVkSyA9IGNhbGN1bGF0ZUJ1ZGdldGVkSztcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJ1ZGdldGVkUGVnKGFtbSwgYnVkZ2V0LCB0YXJnZXRQcmljZSkge1xuICAgIGxldCBwZXJQZWdDb3N0ID0gYW1tLnF1b3RlQXNzZXRSZXNlcnZlXG4gICAgICAgIC5zdWIoYW1tLnRlcm1pbmFsUXVvdGVBc3NldFJlc2VydmUpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTi5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTikpO1xuICAgIGlmIChwZXJQZWdDb3N0Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBwZXJQZWdDb3N0ID0gcGVyUGVnQ29zdC5hZGQobnVtZXJpY0NvbnN0YW50c18xLk9ORSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBlclBlZ0Nvc3QubHQobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIHBlclBlZ0Nvc3QgPSBwZXJQZWdDb3N0LnN1YihudW1lcmljQ29uc3RhbnRzXzEuT05FKTtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0UGVnID0gdGFyZ2V0UHJpY2VcbiAgICAgICAgLm11bChhbW0uYmFzZUFzc2V0UmVzZXJ2ZSlcbiAgICAgICAgLmRpdihhbW0ucXVvdGVBc3NldFJlc2VydmUpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX0RJVl9QRUcpO1xuICAgIGNvbnN0IHBlZ0NoYW5nZURpcmVjdGlvbiA9IHRhcmdldFBlZy5zdWIoYW1tLnBlZ011bHRpcGxpZXIpO1xuICAgIGNvbnN0IHVzZVRhcmdldFBlZyA9IChwZXJQZWdDb3N0Lmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJiBwZWdDaGFuZ2VEaXJlY3Rpb24uZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB8fFxuICAgICAgICAocGVyUGVnQ29zdC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiYgcGVnQ2hhbmdlRGlyZWN0aW9uLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSk7XG4gICAgaWYgKHBlclBlZ0Nvc3QuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pIHx8IHVzZVRhcmdldFBlZykge1xuICAgICAgICByZXR1cm4gdGFyZ2V0UGVnO1xuICAgIH1cbiAgICBjb25zdCBidWRnZXREZWx0YVBlZyA9IGJ1ZGdldC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBFR19QUkVDSVNJT04pLmRpdihwZXJQZWdDb3N0KTtcbiAgICBjb25zdCBuZXdQZWcgPSBhbmNob3JfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLk9ORSwgYW1tLnBlZ011bHRpcGxpZXIuYWRkKGJ1ZGdldERlbHRhUGVnKSk7XG4gICAgcmV0dXJuIG5ld1BlZztcbn1cbmV4cG9ydHMuY2FsY3VsYXRlQnVkZ2V0ZWRQZWcgPSBjYWxjdWxhdGVCdWRnZXRlZFBlZztcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbGN1bGF0ZUJ1ZGdldGVkUGVnIiwiY2FsY3VsYXRlQnVkZ2V0ZWRLIiwiY2FsY3VsYXRlQnVkZ2V0ZWRLQk4iLCJjYWxjdWxhdGVSZXBlZ0Nvc3QiLCJjYWxjdWxhdGVBZGp1c3RLQ29zdCIsImFuY2hvcl8xIiwicmVxdWlyZSIsImFzc2VydF8xIiwibnVtZXJpY0NvbnN0YW50c18xIiwiYW1tIiwibnVtZXJhdG9yIiwiZGVub21lbmF0b3IiLCJ4IiwiYmFzZUFzc2V0UmVzZXJ2ZSIsInkiLCJxdW90ZUFzc2V0UmVzZXJ2ZSIsImQiLCJiYXNlQXNzZXRBbW91bnRXaXRoQW1tIiwiUSIsInBlZ011bHRpcGxpZXIiLCJxdW90ZVNjYWxlIiwibXVsIiwicCIsIlBSSUNFX1BSRUNJU0lPTiIsImRpdiIsImNvc3QiLCJQRVJDRU5UQUdFX1BSRUNJU0lPTiIsImFkZCIsInN1YiIsIkFNTV9UT19RVU9URV9QUkVDSVNJT05fUkFUSU8iLCJQRUdfUFJFQ0lTSU9OIiwiQk4iLCJuZXdQZWciLCJkcWFyIiwidGVybWluYWxRdW90ZUFzc2V0UmVzZXJ2ZSIsImJ1ZGdldCIsImFzc2VydCIsImd0IiwiQyIsImRTaWduIiwibHQiLCJwZWdnZWRfeV9kX2QiLCJBTU1fUkVTRVJWRV9QUkVDSVNJT04iLCJudW1lcjEiLCJudW1lcjIiLCJRVU9URV9QUkVDSVNJT04iLCJkZW5vbTEiLCJkZW5vbTIiLCJaRVJPIiwiYWJzIiwiY29uc29sZSIsImxvZyIsInRvU3RyaW5nIiwiZGVub21pbmF0b3IiLCJ0YXJnZXRQcmljZSIsInBlclBlZ0Nvc3QiLCJPTkUiLCJ0YXJnZXRQZWciLCJQUklDRV9ESVZfUEVHIiwicGVnQ2hhbmdlRGlyZWN0aW9uIiwidXNlVGFyZ2V0UGVnIiwiZXEiLCJidWRnZXREZWx0YVBlZyIsIm1heCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/repeg.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js":
/*!**************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/spotBalance.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateWithdrawLimit = exports.calculateTokenUtilizationLimits = exports.calculateInterestAccumulated = exports.calculateBorrowRate = exports.calculateDepositRate = exports.calculateInterestRate = exports.calculateSpotMarketBorrowCapacity = exports.calculateUtilization = exports.calculateLiabilityWeight = exports.calculateAssetWeight = exports.getTokenValue = exports.getStrictTokenValue = exports.getSignedTokenAmount = exports.getTokenAmount = exports.getBalance = void 0;\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst margin_1 = __webpack_require__(/*! ./margin */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/margin.js\");\nconst numericConstants_2 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/utils.js\");\n/**\n * Calculates the balance of a given token amount including any accumulated interest. This\n * is the same as `SpotPosition.scaledBalance`.\n *\n * @param {BN} tokenAmount - the amount of tokens\n * @param {SpotMarketAccount} spotMarket - the spot market account\n * @param {SpotBalanceType} balanceType - the balance type ('deposit' or 'borrow')\n * @return {BN} the calculated balance, scaled by `SPOT_MARKET_BALANCE_PRECISION`\n */ function getBalance(tokenAmount, spotMarket, balanceType) {\n    const precisionIncrease = numericConstants_1.TEN.pow(new anchor_1.BN(19 - spotMarket.decimals));\n    const cumulativeInterest = (0, types_1.isVariant)(balanceType, \"deposit\") ? spotMarket.cumulativeDepositInterest : spotMarket.cumulativeBorrowInterest;\n    let balance = tokenAmount.mul(precisionIncrease).div(cumulativeInterest);\n    if (!balance.eq(numericConstants_1.ZERO) && (0, types_1.isVariant)(balanceType, \"borrow\")) {\n        balance = balance.add(numericConstants_1.ONE);\n    }\n    return balance;\n}\nexports.getBalance = getBalance;\n/**\n * Calculates the spot token amount including any accumulated interest.\n *\n * @param {BN} balanceAmount - The balance amount, typically from `SpotPosition.scaledBalance`\n * @param {SpotMarketAccount} spotMarket - The spot market account details\n * @param {SpotBalanceType} balanceType - The balance type to be used for calculation\n * @returns {BN} The calculated token amount, scaled by `SpotMarketConfig.precision`\n */ function getTokenAmount(balanceAmount, spotMarket, balanceType) {\n    const precisionDecrease = numericConstants_1.TEN.pow(new anchor_1.BN(19 - spotMarket.decimals));\n    if ((0, types_1.isVariant)(balanceType, \"deposit\")) {\n        return balanceAmount.mul(spotMarket.cumulativeDepositInterest).div(precisionDecrease);\n    } else {\n        return (0, utils_1.divCeil)(balanceAmount.mul(spotMarket.cumulativeBorrowInterest), precisionDecrease);\n    }\n}\nexports.getTokenAmount = getTokenAmount;\n/**\n * Returns the signed (positive for deposit,negative for borrow) token amount based on the balance type.\n *\n * @param {BN} tokenAmount - The token amount to convert (from `getTokenAmount`)\n * @param {SpotBalanceType} balanceType - The balance type to determine the sign of the token amount.\n * @returns {BN} - The signed token amount, scaled by `SpotMarketConfig.precision`\n */ function getSignedTokenAmount(tokenAmount, balanceType) {\n    if ((0, types_1.isVariant)(balanceType, \"deposit\")) {\n        return tokenAmount;\n    } else {\n        return tokenAmount.abs().neg();\n    }\n}\nexports.getSignedTokenAmount = getSignedTokenAmount;\n/**\n * Calculates the value of a given token amount using the worst of the provided oracle price and its TWAP.\n *\n * @param {BN} tokenAmount - The amount of tokens to calculate the value for (from `getTokenAmount`)\n * @param {number} spotDecimals - The number of decimals in the token.\n * @param {OraclePriceData} oraclePriceData - The oracle price data (typically a token/USD oracle).\n * @param {BN} oraclePriceTwap - The Time-Weighted Average Price of the oracle.\n * @return {BN} The calculated value of the given token amount, scaled by `PRICE_PRECISION`\n */ function getStrictTokenValue(tokenAmount, spotDecimals, oraclePriceData, oraclePriceTwap) {\n    if (tokenAmount.eq(numericConstants_1.ZERO)) {\n        return numericConstants_1.ZERO;\n    }\n    let price = oraclePriceData.price;\n    if (tokenAmount.gt(numericConstants_1.ZERO)) {\n        price = anchor_1.BN.min(oraclePriceData.price, oraclePriceTwap);\n    } else {\n        price = anchor_1.BN.max(oraclePriceData.price, oraclePriceTwap);\n    }\n    const precisionDecrease = numericConstants_1.TEN.pow(new anchor_1.BN(spotDecimals));\n    return tokenAmount.mul(price).div(precisionDecrease);\n}\nexports.getStrictTokenValue = getStrictTokenValue;\n/**\n * Calculates the value of a given token amount in relation to an oracle price data\n *\n * @param {BN} tokenAmount - The amount of tokens to calculate the value for (from `getTokenAmount`)\n * @param {number} spotDecimals - The number of decimal places of the token.\n * @param {OraclePriceData} oraclePriceData - The oracle price data (typically a token/USD oracle).\n * @return {BN} The value of the token based on the oracle, scaled by `PRICE_PRECISION`\n */ function getTokenValue(tokenAmount, spotDecimals, oraclePriceData) {\n    if (tokenAmount.eq(numericConstants_1.ZERO)) {\n        return numericConstants_1.ZERO;\n    }\n    const precisionDecrease = numericConstants_1.TEN.pow(new anchor_1.BN(spotDecimals));\n    return tokenAmount.mul(oraclePriceData.price).div(precisionDecrease);\n}\nexports.getTokenValue = getTokenValue;\nfunction calculateAssetWeight(balanceAmount, spotMarket, marginCategory) {\n    const sizePrecision = numericConstants_1.TEN.pow(new anchor_1.BN(spotMarket.decimals));\n    let sizeInAmmReservePrecision;\n    if (sizePrecision.gt(numericConstants_1.AMM_RESERVE_PRECISION)) {\n        sizeInAmmReservePrecision = balanceAmount.div(sizePrecision.div(numericConstants_1.AMM_RESERVE_PRECISION));\n    } else {\n        sizeInAmmReservePrecision = balanceAmount.mul(numericConstants_1.AMM_RESERVE_PRECISION).div(sizePrecision);\n    }\n    let assetWeight;\n    switch(marginCategory){\n        case \"Initial\":\n            assetWeight = (0, margin_1.calculateSizeDiscountAssetWeight)(sizeInAmmReservePrecision, new anchor_1.BN(spotMarket.imfFactor), new anchor_1.BN(spotMarket.initialAssetWeight));\n            break;\n        case \"Maintenance\":\n            assetWeight = (0, margin_1.calculateSizeDiscountAssetWeight)(sizeInAmmReservePrecision, new anchor_1.BN(spotMarket.imfFactor), new anchor_1.BN(spotMarket.maintenanceAssetWeight));\n            break;\n        default:\n            assetWeight = new anchor_1.BN(spotMarket.initialAssetWeight);\n            break;\n    }\n    return assetWeight;\n}\nexports.calculateAssetWeight = calculateAssetWeight;\nfunction calculateLiabilityWeight(size, spotMarket, marginCategory) {\n    const sizePrecision = numericConstants_1.TEN.pow(new anchor_1.BN(spotMarket.decimals));\n    let sizeInAmmReservePrecision;\n    if (sizePrecision.gt(numericConstants_1.AMM_RESERVE_PRECISION)) {\n        sizeInAmmReservePrecision = size.div(sizePrecision.div(numericConstants_1.AMM_RESERVE_PRECISION));\n    } else {\n        sizeInAmmReservePrecision = size.mul(numericConstants_1.AMM_RESERVE_PRECISION).div(sizePrecision);\n    }\n    let liabilityWeight;\n    switch(marginCategory){\n        case \"Initial\":\n            liabilityWeight = (0, margin_1.calculateSizePremiumLiabilityWeight)(sizeInAmmReservePrecision, new anchor_1.BN(spotMarket.imfFactor), new anchor_1.BN(spotMarket.initialLiabilityWeight), numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n            break;\n        case \"Maintenance\":\n            liabilityWeight = (0, margin_1.calculateSizePremiumLiabilityWeight)(sizeInAmmReservePrecision, new anchor_1.BN(spotMarket.imfFactor), new anchor_1.BN(spotMarket.maintenanceLiabilityWeight), numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n            break;\n        default:\n            liabilityWeight = spotMarket.initialLiabilityWeight;\n            break;\n    }\n    return liabilityWeight;\n}\nexports.calculateLiabilityWeight = calculateLiabilityWeight;\nfunction calculateUtilization(bank, delta = numericConstants_1.ZERO) {\n    let tokenDepositAmount = getTokenAmount(bank.depositBalance, bank, types_1.SpotBalanceType.DEPOSIT);\n    let tokenBorrowAmount = getTokenAmount(bank.borrowBalance, bank, types_1.SpotBalanceType.BORROW);\n    if (delta.gt(numericConstants_1.ZERO)) {\n        tokenDepositAmount = tokenDepositAmount.add(delta);\n    } else if (delta.lt(numericConstants_1.ZERO)) {\n        tokenBorrowAmount = tokenBorrowAmount.add(delta.abs());\n    }\n    let utilization;\n    if (tokenBorrowAmount.eq(numericConstants_1.ZERO) && tokenDepositAmount.eq(numericConstants_1.ZERO)) {\n        utilization = numericConstants_1.ZERO;\n    } else if (tokenDepositAmount.eq(numericConstants_1.ZERO)) {\n        utilization = numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION;\n    } else {\n        utilization = tokenBorrowAmount.mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(tokenDepositAmount);\n    }\n    return utilization;\n}\nexports.calculateUtilization = calculateUtilization;\n/**\n * calculates max borrow amount where rate would stay below targetBorrowRate\n * @param spotMarketAccount\n * @param targetBorrowRate\n * @returns : Precision: TOKEN DECIMALS\n */ function calculateSpotMarketBorrowCapacity(spotMarketAccount, targetBorrowRate) {\n    const currentBorrowRate = calculateBorrowRate(spotMarketAccount);\n    const tokenDepositAmount = getTokenAmount(spotMarketAccount.depositBalance, spotMarketAccount, types_1.SpotBalanceType.DEPOSIT);\n    const tokenBorrowAmount = getTokenAmount(spotMarketAccount.borrowBalance, spotMarketAccount, types_1.SpotBalanceType.BORROW);\n    let targetUtilization;\n    // target utilization past mid point\n    if (targetBorrowRate.gte(new anchor_1.BN(spotMarketAccount.optimalBorrowRate))) {\n        const borrowRateSlope = new anchor_1.BN(spotMarketAccount.maxBorrowRate - spotMarketAccount.optimalBorrowRate).mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION.sub(new anchor_1.BN(spotMarketAccount.optimalUtilization)));\n        const surplusTargetUtilization = targetBorrowRate.sub(new anchor_1.BN(spotMarketAccount.optimalBorrowRate)).mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(borrowRateSlope);\n        targetUtilization = surplusTargetUtilization.add(new anchor_1.BN(spotMarketAccount.optimalUtilization));\n    } else {\n        const borrowRateSlope = new anchor_1.BN(spotMarketAccount.optimalBorrowRate).mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(new anchor_1.BN(spotMarketAccount.optimalUtilization));\n        targetUtilization = targetBorrowRate.mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(borrowRateSlope);\n    }\n    const totalCapacity = tokenDepositAmount.mul(targetUtilization).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION);\n    let remainingCapacity;\n    if (currentBorrowRate.gte(targetBorrowRate)) {\n        remainingCapacity = numericConstants_1.ZERO;\n    } else {\n        remainingCapacity = anchor_1.BN.max(numericConstants_1.ZERO, totalCapacity.sub(tokenBorrowAmount));\n    }\n    return {\n        totalCapacity,\n        remainingCapacity\n    };\n}\nexports.calculateSpotMarketBorrowCapacity = calculateSpotMarketBorrowCapacity;\nfunction calculateInterestRate(bank, delta = numericConstants_1.ZERO) {\n    const utilization = calculateUtilization(bank, delta);\n    let interestRate;\n    if (utilization.gt(new anchor_1.BN(bank.optimalUtilization))) {\n        const surplusUtilization = utilization.sub(new anchor_1.BN(bank.optimalUtilization));\n        const borrowRateSlope = new anchor_1.BN(bank.maxBorrowRate - bank.optimalBorrowRate).mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION.sub(new anchor_1.BN(bank.optimalUtilization)));\n        interestRate = new anchor_1.BN(bank.optimalBorrowRate).add(surplusUtilization.mul(borrowRateSlope).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION));\n    } else {\n        const borrowRateSlope = new anchor_1.BN(bank.optimalBorrowRate).mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(new anchor_1.BN(bank.optimalUtilization));\n        interestRate = utilization.mul(borrowRateSlope).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION);\n    }\n    return interestRate;\n}\nexports.calculateInterestRate = calculateInterestRate;\nfunction calculateDepositRate(bank) {\n    const utilization = calculateUtilization(bank);\n    const borrowRate = calculateBorrowRate(bank);\n    const depositRate = borrowRate.mul(numericConstants_2.PERCENTAGE_PRECISION.sub(new anchor_1.BN(bank.insuranceFund.totalFactor))).mul(utilization).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(numericConstants_2.PERCENTAGE_PRECISION);\n    return depositRate;\n}\nexports.calculateDepositRate = calculateDepositRate;\nfunction calculateBorrowRate(bank) {\n    return calculateInterestRate(bank);\n}\nexports.calculateBorrowRate = calculateBorrowRate;\nfunction calculateInterestAccumulated(bank, now) {\n    const interestRate = calculateInterestRate(bank);\n    const timeSinceLastUpdate = now.sub(bank.lastInterestTs);\n    const modifiedBorrowRate = interestRate.mul(timeSinceLastUpdate);\n    const utilization = calculateUtilization(bank);\n    const modifiedDepositRate = modifiedBorrowRate.mul(utilization).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION);\n    const borrowInterest = bank.cumulativeBorrowInterest.mul(modifiedBorrowRate).div(numericConstants_1.ONE_YEAR).div(numericConstants_1.SPOT_MARKET_RATE_PRECISION).add(numericConstants_1.ONE);\n    const depositInterest = bank.cumulativeDepositInterest.mul(modifiedDepositRate).div(numericConstants_1.ONE_YEAR).div(numericConstants_1.SPOT_MARKET_RATE_PRECISION);\n    return {\n        borrowInterest,\n        depositInterest\n    };\n}\nexports.calculateInterestAccumulated = calculateInterestAccumulated;\nfunction calculateTokenUtilizationLimits(depositTokenAmount, borrowTokenAmount, spotMarket) {\n    // Calculates the allowable minimum deposit and maximum borrow amounts for immediate withdrawal based on market utilization.\n    // First, it determines a maximum withdrawal utilization from the market's target and historic utilization.\n    // Then, it deduces corresponding deposit/borrow amounts.\n    // Note: For deposit sizes below the guard threshold, withdrawals aren't blocked.\n    const maxWithdrawUtilization = anchor_1.BN.max(new anchor_1.BN(spotMarket.optimalUtilization), spotMarket.utilizationTwap.add(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION.sub(spotMarket.utilizationTwap).div(new anchor_1.BN(2))));\n    let minDepositTokensForUtilization = borrowTokenAmount.mul(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION).div(maxWithdrawUtilization);\n    // don't block withdraws for deposit sizes below guard threshold\n    minDepositTokensForUtilization = anchor_1.BN.min(minDepositTokensForUtilization, depositTokenAmount.sub(spotMarket.withdrawGuardThreshold));\n    let maxBorrowTokensForUtilization = maxWithdrawUtilization.mul(depositTokenAmount).div(numericConstants_1.SPOT_MARKET_UTILIZATION_PRECISION);\n    maxBorrowTokensForUtilization = anchor_1.BN.max(spotMarket.withdrawGuardThreshold, maxBorrowTokensForUtilization);\n    return {\n        minDepositTokensForUtilization,\n        maxBorrowTokensForUtilization\n    };\n}\nexports.calculateTokenUtilizationLimits = calculateTokenUtilizationLimits;\nfunction calculateWithdrawLimit(spotMarket, now) {\n    const marketDepositTokenAmount = getTokenAmount(spotMarket.depositBalance, spotMarket, types_1.SpotBalanceType.DEPOSIT);\n    const marketBorrowTokenAmount = getTokenAmount(spotMarket.borrowBalance, spotMarket, types_1.SpotBalanceType.BORROW);\n    const twentyFourHours = new anchor_1.BN(60 * 60 * 24);\n    const sinceLast = now.sub(spotMarket.lastTwapTs);\n    const sinceStart = anchor_1.BN.max(numericConstants_1.ZERO, twentyFourHours.sub(sinceLast));\n    const borrowTokenTwapLive = spotMarket.borrowTokenTwap.mul(sinceStart).add(marketBorrowTokenAmount.mul(sinceLast)).div(sinceLast.add(sinceStart));\n    const depositTokenTwapLive = spotMarket.depositTokenTwap.mul(sinceStart).add(marketDepositTokenAmount.mul(sinceLast)).div(sinceLast.add(sinceStart));\n    const lesserDepositAmount = anchor_1.BN.min(marketDepositTokenAmount, depositTokenTwapLive);\n    const maxBorrowTokensTwap = anchor_1.BN.max(spotMarket.withdrawGuardThreshold, anchor_1.BN.min(anchor_1.BN.max(marketDepositTokenAmount.div(new anchor_1.BN(6)), borrowTokenTwapLive.add(lesserDepositAmount.div(new anchor_1.BN(10)))), lesserDepositAmount.sub(lesserDepositAmount.div(new anchor_1.BN(5))))); // between ~15-80% utilization with friction on twap\n    const minDepositTokensTwap = depositTokenTwapLive.sub(anchor_1.BN.max(depositTokenTwapLive.div(new anchor_1.BN(4)), anchor_1.BN.min(spotMarket.withdrawGuardThreshold, depositTokenTwapLive)));\n    const { minDepositTokensForUtilization, maxBorrowTokensForUtilization } = calculateTokenUtilizationLimits(marketDepositTokenAmount, marketBorrowTokenAmount, spotMarket);\n    const minDepositTokens = anchor_1.BN.max(minDepositTokensForUtilization, minDepositTokensTwap);\n    const maxBorrowTokens = anchor_1.BN.min(maxBorrowTokensForUtilization, maxBorrowTokensTwap);\n    const withdrawLimit = anchor_1.BN.max(marketDepositTokenAmount.sub(minDepositTokens), numericConstants_1.ZERO);\n    let borrowLimit = maxBorrowTokens.sub(marketBorrowTokenAmount);\n    borrowLimit = anchor_1.BN.min(borrowLimit, marketDepositTokenAmount.sub(marketBorrowTokenAmount));\n    if (withdrawLimit.eq(numericConstants_1.ZERO)) {\n        borrowLimit = numericConstants_1.ZERO;\n    }\n    return {\n        borrowLimit,\n        withdrawLimit,\n        maxBorrowAmount: maxBorrowTokens,\n        minDepositAmount: minDepositTokens,\n        currentDepositAmount: marketDepositTokenAmount,\n        currentBorrowAmount: marketBorrowTokenAmount\n    };\n}\nexports.calculateWithdrawLimit = calculateWithdrawLimit;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3Nwb3RCYWxhbmNlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw4QkFBOEIsR0FBR0EsdUNBQXVDLEdBQUdBLG9DQUFvQyxHQUFHQSwyQkFBMkIsR0FBR0EsNEJBQTRCLEdBQUdBLDZCQUE2QixHQUFHQSx5Q0FBeUMsR0FBR0EsNEJBQTRCLEdBQUdBLGdDQUFnQyxHQUFHQSw0QkFBNEIsR0FBR0EscUJBQXFCLEdBQUdBLDJCQUEyQixHQUFHQSw0QkFBNEIsR0FBR0Esc0JBQXNCLEdBQUdBLGtCQUFrQixHQUFHLEtBQUs7QUFDcGUsTUFBTWlCLFVBQVVDLG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLDZHQUErQjtBQUNsRSxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyx5RUFBVTtBQUNuQyxNQUFNSSxxQkFBcUJKLG1CQUFPQSxDQUFDLDZHQUErQjtBQUNsRSxNQUFNSyxVQUFVTCxtQkFBT0EsQ0FBQyx1RUFBUztBQUNqQzs7Ozs7Ozs7Q0FRQyxHQUNELFNBQVNGLFdBQVdRLFdBQVcsRUFBRUMsVUFBVSxFQUFFQyxXQUFXO0lBQ3BELE1BQU1DLG9CQUFvQlAsbUJBQW1CUSxHQUFHLENBQUNDLEdBQUcsQ0FBQyxJQUFJVixTQUFTVyxFQUFFLENBQUMsS0FBS0wsV0FBV00sUUFBUTtJQUM3RixNQUFNQyxxQkFBcUIsQ0FBQyxHQUFHZixRQUFRZ0IsU0FBUyxFQUFFUCxhQUFhLGFBQ3pERCxXQUFXUyx5QkFBeUIsR0FDcENULFdBQVdVLHdCQUF3QjtJQUN6QyxJQUFJQyxVQUFVWixZQUFZYSxHQUFHLENBQUNWLG1CQUFtQlcsR0FBRyxDQUFDTjtJQUNyRCxJQUFJLENBQUNJLFFBQVFHLEVBQUUsQ0FBQ25C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QmhILFNBQVNXLEVBQUUsQ0FBQ3dCLEdBQUcsQ0FBQzZELGdDQUFnQ2U7SUFDekUsTUFBTUUsa0JBQWtCakgsU0FBU1csRUFBRSxDQUFDdUIsR0FBRyxDQUFDZ0UsK0JBQStCWTtJQUN2RSxNQUFNSSxnQkFBZ0JsSCxTQUFTVyxFQUFFLENBQUN3QixHQUFHLENBQUNnRSx5QkFBeUI1QixHQUFHLENBQUN5QyxtQkFBbUIvRyxtQkFBbUJvQixJQUFJO0lBQzdHLElBQUk4RixjQUFjRixnQkFBZ0IxQyxHQUFHLENBQUM2QjtJQUN0Q2UsY0FBY25ILFNBQVNXLEVBQUUsQ0FBQ3VCLEdBQUcsQ0FBQ2lGLGFBQWFoQix5QkFBeUI1QixHQUFHLENBQUM2QjtJQUN4RSxJQUFJYyxjQUFjOUYsRUFBRSxDQUFDbkIsbUJBQW1Cb0IsSUFBSSxHQUFHO1FBQzNDOEYsY0FBY2xILG1CQUFtQm9CLElBQUk7SUFDekM7SUFDQSxPQUFPO1FBQ0g4RjtRQUNBRDtRQUNBRSxpQkFBaUJIO1FBQ2pCSSxrQkFBa0JMO1FBQ2xCTSxzQkFBc0JuQjtRQUN0Qm9CLHFCQUFxQm5CO0lBQ3pCO0FBQ0o7QUFDQXZILDhCQUE4QixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3Nwb3RCYWxhbmNlLmpzPzYzMzQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNhbGN1bGF0ZVdpdGhkcmF3TGltaXQgPSBleHBvcnRzLmNhbGN1bGF0ZVRva2VuVXRpbGl6YXRpb25MaW1pdHMgPSBleHBvcnRzLmNhbGN1bGF0ZUludGVyZXN0QWNjdW11bGF0ZWQgPSBleHBvcnRzLmNhbGN1bGF0ZUJvcnJvd1JhdGUgPSBleHBvcnRzLmNhbGN1bGF0ZURlcG9zaXRSYXRlID0gZXhwb3J0cy5jYWxjdWxhdGVJbnRlcmVzdFJhdGUgPSBleHBvcnRzLmNhbGN1bGF0ZVNwb3RNYXJrZXRCb3Jyb3dDYXBhY2l0eSA9IGV4cG9ydHMuY2FsY3VsYXRlVXRpbGl6YXRpb24gPSBleHBvcnRzLmNhbGN1bGF0ZUxpYWJpbGl0eVdlaWdodCA9IGV4cG9ydHMuY2FsY3VsYXRlQXNzZXRXZWlnaHQgPSBleHBvcnRzLmdldFRva2VuVmFsdWUgPSBleHBvcnRzLmdldFN0cmljdFRva2VuVmFsdWUgPSBleHBvcnRzLmdldFNpZ25lZFRva2VuQW1vdW50ID0gZXhwb3J0cy5nZXRUb2tlbkFtb3VudCA9IGV4cG9ydHMuZ2V0QmFsYW5jZSA9IHZvaWQgMDtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IG1hcmdpbl8xID0gcmVxdWlyZShcIi4vbWFyZ2luXCIpO1xuY29uc3QgbnVtZXJpY0NvbnN0YW50c18yID0gcmVxdWlyZShcIi4uL2NvbnN0YW50cy9udW1lcmljQ29uc3RhbnRzXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBiYWxhbmNlIG9mIGEgZ2l2ZW4gdG9rZW4gYW1vdW50IGluY2x1ZGluZyBhbnkgYWNjdW11bGF0ZWQgaW50ZXJlc3QuIFRoaXNcbiAqIGlzIHRoZSBzYW1lIGFzIGBTcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZWAuXG4gKlxuICogQHBhcmFtIHtCTn0gdG9rZW5BbW91bnQgLSB0aGUgYW1vdW50IG9mIHRva2Vuc1xuICogQHBhcmFtIHtTcG90TWFya2V0QWNjb3VudH0gc3BvdE1hcmtldCAtIHRoZSBzcG90IG1hcmtldCBhY2NvdW50XG4gKiBAcGFyYW0ge1Nwb3RCYWxhbmNlVHlwZX0gYmFsYW5jZVR5cGUgLSB0aGUgYmFsYW5jZSB0eXBlICgnZGVwb3NpdCcgb3IgJ2JvcnJvdycpXG4gKiBAcmV0dXJuIHtCTn0gdGhlIGNhbGN1bGF0ZWQgYmFsYW5jZSwgc2NhbGVkIGJ5IGBTUE9UX01BUktFVF9CQUxBTkNFX1BSRUNJU0lPTmBcbiAqL1xuZnVuY3Rpb24gZ2V0QmFsYW5jZSh0b2tlbkFtb3VudCwgc3BvdE1hcmtldCwgYmFsYW5jZVR5cGUpIHtcbiAgICBjb25zdCBwcmVjaXNpb25JbmNyZWFzZSA9IG51bWVyaWNDb25zdGFudHNfMS5URU4ucG93KG5ldyBhbmNob3JfMS5CTigxOSAtIHNwb3RNYXJrZXQuZGVjaW1hbHMpKTtcbiAgICBjb25zdCBjdW11bGF0aXZlSW50ZXJlc3QgPSAoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKGJhbGFuY2VUeXBlLCAnZGVwb3NpdCcpXG4gICAgICAgID8gc3BvdE1hcmtldC5jdW11bGF0aXZlRGVwb3NpdEludGVyZXN0XG4gICAgICAgIDogc3BvdE1hcmtldC5jdW11bGF0aXZlQm9ycm93SW50ZXJlc3Q7XG4gICAgbGV0IGJhbGFuY2UgPSB0b2tlbkFtb3VudC5tdWwocHJlY2lzaW9uSW5jcmVhc2UpLmRpdihjdW11bGF0aXZlSW50ZXJlc3QpO1xuICAgIGlmICghYmFsYW5jZS5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiYgKDAsIHR5cGVzXzEuaXNWYXJpYW50KShiYWxhbmNlVHlwZSwgJ2JvcnJvdycpKSB7XG4gICAgICAgIGJhbGFuY2UgPSBiYWxhbmNlLmFkZChudW1lcmljQ29uc3RhbnRzXzEuT05FKTtcbiAgICB9XG4gICAgcmV0dXJuIGJhbGFuY2U7XG59XG5leHBvcnRzLmdldEJhbGFuY2UgPSBnZXRCYWxhbmNlO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcG90IHRva2VuIGFtb3VudCBpbmNsdWRpbmcgYW55IGFjY3VtdWxhdGVkIGludGVyZXN0LlxuICpcbiAqIEBwYXJhbSB7Qk59IGJhbGFuY2VBbW91bnQgLSBUaGUgYmFsYW5jZSBhbW91bnQsIHR5cGljYWxseSBmcm9tIGBTcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZWBcbiAqIEBwYXJhbSB7U3BvdE1hcmtldEFjY291bnR9IHNwb3RNYXJrZXQgLSBUaGUgc3BvdCBtYXJrZXQgYWNjb3VudCBkZXRhaWxzXG4gKiBAcGFyYW0ge1Nwb3RCYWxhbmNlVHlwZX0gYmFsYW5jZVR5cGUgLSBUaGUgYmFsYW5jZSB0eXBlIHRvIGJlIHVzZWQgZm9yIGNhbGN1bGF0aW9uXG4gKiBAcmV0dXJucyB7Qk59IFRoZSBjYWxjdWxhdGVkIHRva2VuIGFtb3VudCwgc2NhbGVkIGJ5IGBTcG90TWFya2V0Q29uZmlnLnByZWNpc2lvbmBcbiAqL1xuZnVuY3Rpb24gZ2V0VG9rZW5BbW91bnQoYmFsYW5jZUFtb3VudCwgc3BvdE1hcmtldCwgYmFsYW5jZVR5cGUpIHtcbiAgICBjb25zdCBwcmVjaXNpb25EZWNyZWFzZSA9IG51bWVyaWNDb25zdGFudHNfMS5URU4ucG93KG5ldyBhbmNob3JfMS5CTigxOSAtIHNwb3RNYXJrZXQuZGVjaW1hbHMpKTtcbiAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShiYWxhbmNlVHlwZSwgJ2RlcG9zaXQnKSkge1xuICAgICAgICByZXR1cm4gYmFsYW5jZUFtb3VudFxuICAgICAgICAgICAgLm11bChzcG90TWFya2V0LmN1bXVsYXRpdmVEZXBvc2l0SW50ZXJlc3QpXG4gICAgICAgICAgICAuZGl2KHByZWNpc2lvbkRlY3JlYXNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5kaXZDZWlsKShiYWxhbmNlQW1vdW50Lm11bChzcG90TWFya2V0LmN1bXVsYXRpdmVCb3Jyb3dJbnRlcmVzdCksIHByZWNpc2lvbkRlY3JlYXNlKTtcbiAgICB9XG59XG5leHBvcnRzLmdldFRva2VuQW1vdW50ID0gZ2V0VG9rZW5BbW91bnQ7XG4vKipcbiAqIFJldHVybnMgdGhlIHNpZ25lZCAocG9zaXRpdmUgZm9yIGRlcG9zaXQsbmVnYXRpdmUgZm9yIGJvcnJvdykgdG9rZW4gYW1vdW50IGJhc2VkIG9uIHRoZSBiYWxhbmNlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtCTn0gdG9rZW5BbW91bnQgLSBUaGUgdG9rZW4gYW1vdW50IHRvIGNvbnZlcnQgKGZyb20gYGdldFRva2VuQW1vdW50YClcbiAqIEBwYXJhbSB7U3BvdEJhbGFuY2VUeXBlfSBiYWxhbmNlVHlwZSAtIFRoZSBiYWxhbmNlIHR5cGUgdG8gZGV0ZXJtaW5lIHRoZSBzaWduIG9mIHRoZSB0b2tlbiBhbW91bnQuXG4gKiBAcmV0dXJucyB7Qk59IC0gVGhlIHNpZ25lZCB0b2tlbiBhbW91bnQsIHNjYWxlZCBieSBgU3BvdE1hcmtldENvbmZpZy5wcmVjaXNpb25gXG4gKi9cbmZ1bmN0aW9uIGdldFNpZ25lZFRva2VuQW1vdW50KHRva2VuQW1vdW50LCBiYWxhbmNlVHlwZSkge1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKGJhbGFuY2VUeXBlLCAnZGVwb3NpdCcpKSB7XG4gICAgICAgIHJldHVybiB0b2tlbkFtb3VudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0b2tlbkFtb3VudC5hYnMoKS5uZWcoKTtcbiAgICB9XG59XG5leHBvcnRzLmdldFNpZ25lZFRva2VuQW1vdW50ID0gZ2V0U2lnbmVkVG9rZW5BbW91bnQ7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHZhbHVlIG9mIGEgZ2l2ZW4gdG9rZW4gYW1vdW50IHVzaW5nIHRoZSB3b3JzdCBvZiB0aGUgcHJvdmlkZWQgb3JhY2xlIHByaWNlIGFuZCBpdHMgVFdBUC5cbiAqXG4gKiBAcGFyYW0ge0JOfSB0b2tlbkFtb3VudCAtIFRoZSBhbW91bnQgb2YgdG9rZW5zIHRvIGNhbGN1bGF0ZSB0aGUgdmFsdWUgZm9yIChmcm9tIGBnZXRUb2tlbkFtb3VudGApXG4gKiBAcGFyYW0ge251bWJlcn0gc3BvdERlY2ltYWxzIC0gVGhlIG51bWJlciBvZiBkZWNpbWFscyBpbiB0aGUgdG9rZW4uXG4gKiBAcGFyYW0ge09yYWNsZVByaWNlRGF0YX0gb3JhY2xlUHJpY2VEYXRhIC0gVGhlIG9yYWNsZSBwcmljZSBkYXRhICh0eXBpY2FsbHkgYSB0b2tlbi9VU0Qgb3JhY2xlKS5cbiAqIEBwYXJhbSB7Qk59IG9yYWNsZVByaWNlVHdhcCAtIFRoZSBUaW1lLVdlaWdodGVkIEF2ZXJhZ2UgUHJpY2Ugb2YgdGhlIG9yYWNsZS5cbiAqIEByZXR1cm4ge0JOfSBUaGUgY2FsY3VsYXRlZCB2YWx1ZSBvZiB0aGUgZ2l2ZW4gdG9rZW4gYW1vdW50LCBzY2FsZWQgYnkgYFBSSUNFX1BSRUNJU0lPTmBcbiAqL1xuZnVuY3Rpb24gZ2V0U3RyaWN0VG9rZW5WYWx1ZSh0b2tlbkFtb3VudCwgc3BvdERlY2ltYWxzLCBvcmFjbGVQcmljZURhdGEsIG9yYWNsZVByaWNlVHdhcCkge1xuICAgIGlmICh0b2tlbkFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIH1cbiAgICBsZXQgcHJpY2UgPSBvcmFjbGVQcmljZURhdGEucHJpY2U7XG4gICAgaWYgKHRva2VuQW1vdW50Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICBwcmljZSA9IGFuY2hvcl8xLkJOLm1pbihvcmFjbGVQcmljZURhdGEucHJpY2UsIG9yYWNsZVByaWNlVHdhcCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcmljZSA9IGFuY2hvcl8xLkJOLm1heChvcmFjbGVQcmljZURhdGEucHJpY2UsIG9yYWNsZVByaWNlVHdhcCk7XG4gICAgfVxuICAgIGNvbnN0IHByZWNpc2lvbkRlY3JlYXNlID0gbnVtZXJpY0NvbnN0YW50c18xLlRFTi5wb3cobmV3IGFuY2hvcl8xLkJOKHNwb3REZWNpbWFscykpO1xuICAgIHJldHVybiB0b2tlbkFtb3VudC5tdWwocHJpY2UpLmRpdihwcmVjaXNpb25EZWNyZWFzZSk7XG59XG5leHBvcnRzLmdldFN0cmljdFRva2VuVmFsdWUgPSBnZXRTdHJpY3RUb2tlblZhbHVlO1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSB2YWx1ZSBvZiBhIGdpdmVuIHRva2VuIGFtb3VudCBpbiByZWxhdGlvbiB0byBhbiBvcmFjbGUgcHJpY2UgZGF0YVxuICpcbiAqIEBwYXJhbSB7Qk59IHRva2VuQW1vdW50IC0gVGhlIGFtb3VudCBvZiB0b2tlbnMgdG8gY2FsY3VsYXRlIHRoZSB2YWx1ZSBmb3IgKGZyb20gYGdldFRva2VuQW1vdW50YClcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcG90RGVjaW1hbHMgLSBUaGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIG9mIHRoZSB0b2tlbi5cbiAqIEBwYXJhbSB7T3JhY2xlUHJpY2VEYXRhfSBvcmFjbGVQcmljZURhdGEgLSBUaGUgb3JhY2xlIHByaWNlIGRhdGEgKHR5cGljYWxseSBhIHRva2VuL1VTRCBvcmFjbGUpLlxuICogQHJldHVybiB7Qk59IFRoZSB2YWx1ZSBvZiB0aGUgdG9rZW4gYmFzZWQgb24gdGhlIG9yYWNsZSwgc2NhbGVkIGJ5IGBQUklDRV9QUkVDSVNJT05gXG4gKi9cbmZ1bmN0aW9uIGdldFRva2VuVmFsdWUodG9rZW5BbW91bnQsIHNwb3REZWNpbWFscywgb3JhY2xlUHJpY2VEYXRhKSB7XG4gICAgaWYgKHRva2VuQW1vdW50LmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICByZXR1cm4gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgfVxuICAgIGNvbnN0IHByZWNpc2lvbkRlY3JlYXNlID0gbnVtZXJpY0NvbnN0YW50c18xLlRFTi5wb3cobmV3IGFuY2hvcl8xLkJOKHNwb3REZWNpbWFscykpO1xuICAgIHJldHVybiB0b2tlbkFtb3VudC5tdWwob3JhY2xlUHJpY2VEYXRhLnByaWNlKS5kaXYocHJlY2lzaW9uRGVjcmVhc2UpO1xufVxuZXhwb3J0cy5nZXRUb2tlblZhbHVlID0gZ2V0VG9rZW5WYWx1ZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUFzc2V0V2VpZ2h0KGJhbGFuY2VBbW91bnQsIHNwb3RNYXJrZXQsIG1hcmdpbkNhdGVnb3J5KSB7XG4gICAgY29uc3Qgc2l6ZVByZWNpc2lvbiA9IG51bWVyaWNDb25zdGFudHNfMS5URU4ucG93KG5ldyBhbmNob3JfMS5CTihzcG90TWFya2V0LmRlY2ltYWxzKSk7XG4gICAgbGV0IHNpemVJbkFtbVJlc2VydmVQcmVjaXNpb247XG4gICAgaWYgKHNpemVQcmVjaXNpb24uZ3QobnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTikpIHtcbiAgICAgICAgc2l6ZUluQW1tUmVzZXJ2ZVByZWNpc2lvbiA9IGJhbGFuY2VBbW91bnQuZGl2KHNpemVQcmVjaXNpb24uZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNpemVJbkFtbVJlc2VydmVQcmVjaXNpb24gPSBiYWxhbmNlQW1vdW50XG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pXG4gICAgICAgICAgICAuZGl2KHNpemVQcmVjaXNpb24pO1xuICAgIH1cbiAgICBsZXQgYXNzZXRXZWlnaHQ7XG4gICAgc3dpdGNoIChtYXJnaW5DYXRlZ29yeSkge1xuICAgICAgICBjYXNlICdJbml0aWFsJzpcbiAgICAgICAgICAgIGFzc2V0V2VpZ2h0ID0gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVNpemVEaXNjb3VudEFzc2V0V2VpZ2h0KShzaXplSW5BbW1SZXNlcnZlUHJlY2lzaW9uLCBuZXcgYW5jaG9yXzEuQk4oc3BvdE1hcmtldC5pbWZGYWN0b3IpLCBuZXcgYW5jaG9yXzEuQk4oc3BvdE1hcmtldC5pbml0aWFsQXNzZXRXZWlnaHQpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdNYWludGVuYW5jZSc6XG4gICAgICAgICAgICBhc3NldFdlaWdodCA9ICgwLCBtYXJnaW5fMS5jYWxjdWxhdGVTaXplRGlzY291bnRBc3NldFdlaWdodCkoc2l6ZUluQW1tUmVzZXJ2ZVByZWNpc2lvbiwgbmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXQuaW1mRmFjdG9yKSwgbmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXQubWFpbnRlbmFuY2VBc3NldFdlaWdodCkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBhc3NldFdlaWdodCA9IG5ldyBhbmNob3JfMS5CTihzcG90TWFya2V0LmluaXRpYWxBc3NldFdlaWdodCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIGFzc2V0V2VpZ2h0O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVBc3NldFdlaWdodCA9IGNhbGN1bGF0ZUFzc2V0V2VpZ2h0O1xuZnVuY3Rpb24gY2FsY3VsYXRlTGlhYmlsaXR5V2VpZ2h0KHNpemUsIHNwb3RNYXJrZXQsIG1hcmdpbkNhdGVnb3J5KSB7XG4gICAgY29uc3Qgc2l6ZVByZWNpc2lvbiA9IG51bWVyaWNDb25zdGFudHNfMS5URU4ucG93KG5ldyBhbmNob3JfMS5CTihzcG90TWFya2V0LmRlY2ltYWxzKSk7XG4gICAgbGV0IHNpemVJbkFtbVJlc2VydmVQcmVjaXNpb247XG4gICAgaWYgKHNpemVQcmVjaXNpb24uZ3QobnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTikpIHtcbiAgICAgICAgc2l6ZUluQW1tUmVzZXJ2ZVByZWNpc2lvbiA9IHNpemUuZGl2KHNpemVQcmVjaXNpb24uZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNpemVJbkFtbVJlc2VydmVQcmVjaXNpb24gPSBzaXplXG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pXG4gICAgICAgICAgICAuZGl2KHNpemVQcmVjaXNpb24pO1xuICAgIH1cbiAgICBsZXQgbGlhYmlsaXR5V2VpZ2h0O1xuICAgIHN3aXRjaCAobWFyZ2luQ2F0ZWdvcnkpIHtcbiAgICAgICAgY2FzZSAnSW5pdGlhbCc6XG4gICAgICAgICAgICBsaWFiaWxpdHlXZWlnaHQgPSAoMCwgbWFyZ2luXzEuY2FsY3VsYXRlU2l6ZVByZW1pdW1MaWFiaWxpdHlXZWlnaHQpKHNpemVJbkFtbVJlc2VydmVQcmVjaXNpb24sIG5ldyBhbmNob3JfMS5CTihzcG90TWFya2V0LmltZkZhY3RvciksIG5ldyBhbmNob3JfMS5CTihzcG90TWFya2V0LmluaXRpYWxMaWFiaWxpdHlXZWlnaHQpLCBudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfV0VJR0hUX1BSRUNJU0lPTik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFpbnRlbmFuY2UnOlxuICAgICAgICAgICAgbGlhYmlsaXR5V2VpZ2h0ID0gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVNpemVQcmVtaXVtTGlhYmlsaXR5V2VpZ2h0KShzaXplSW5BbW1SZXNlcnZlUHJlY2lzaW9uLCBuZXcgYW5jaG9yXzEuQk4oc3BvdE1hcmtldC5pbWZGYWN0b3IpLCBuZXcgYW5jaG9yXzEuQk4oc3BvdE1hcmtldC5tYWludGVuYW5jZUxpYWJpbGl0eVdlaWdodCksIG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgbGlhYmlsaXR5V2VpZ2h0ID0gc3BvdE1hcmtldC5pbml0aWFsTGlhYmlsaXR5V2VpZ2h0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBsaWFiaWxpdHlXZWlnaHQ7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUxpYWJpbGl0eVdlaWdodCA9IGNhbGN1bGF0ZUxpYWJpbGl0eVdlaWdodDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZVV0aWxpemF0aW9uKGJhbmssIGRlbHRhID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pIHtcbiAgICBsZXQgdG9rZW5EZXBvc2l0QW1vdW50ID0gZ2V0VG9rZW5BbW91bnQoYmFuay5kZXBvc2l0QmFsYW5jZSwgYmFuaywgdHlwZXNfMS5TcG90QmFsYW5jZVR5cGUuREVQT1NJVCk7XG4gICAgbGV0IHRva2VuQm9ycm93QW1vdW50ID0gZ2V0VG9rZW5BbW91bnQoYmFuay5ib3Jyb3dCYWxhbmNlLCBiYW5rLCB0eXBlc18xLlNwb3RCYWxhbmNlVHlwZS5CT1JST1cpO1xuICAgIGlmIChkZWx0YS5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgdG9rZW5EZXBvc2l0QW1vdW50ID0gdG9rZW5EZXBvc2l0QW1vdW50LmFkZChkZWx0YSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRlbHRhLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICB0b2tlbkJvcnJvd0Ftb3VudCA9IHRva2VuQm9ycm93QW1vdW50LmFkZChkZWx0YS5hYnMoKSk7XG4gICAgfVxuICAgIGxldCB1dGlsaXphdGlvbjtcbiAgICBpZiAodG9rZW5Cb3Jyb3dBbW91bnQuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pICYmIHRva2VuRGVwb3NpdEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgdXRpbGl6YXRpb24gPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICB9XG4gICAgZWxzZSBpZiAodG9rZW5EZXBvc2l0QW1vdW50LmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICB1dGlsaXphdGlvbiA9IG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT047XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB1dGlsaXphdGlvbiA9IHRva2VuQm9ycm93QW1vdW50XG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT04pXG4gICAgICAgICAgICAuZGl2KHRva2VuRGVwb3NpdEFtb3VudCk7XG4gICAgfVxuICAgIHJldHVybiB1dGlsaXphdGlvbjtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlVXRpbGl6YXRpb24gPSBjYWxjdWxhdGVVdGlsaXphdGlvbjtcbi8qKlxuICogY2FsY3VsYXRlcyBtYXggYm9ycm93IGFtb3VudCB3aGVyZSByYXRlIHdvdWxkIHN0YXkgYmVsb3cgdGFyZ2V0Qm9ycm93UmF0ZVxuICogQHBhcmFtIHNwb3RNYXJrZXRBY2NvdW50XG4gKiBAcGFyYW0gdGFyZ2V0Qm9ycm93UmF0ZVxuICogQHJldHVybnMgOiBQcmVjaXNpb246IFRPS0VOIERFQ0lNQUxTXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVNwb3RNYXJrZXRCb3Jyb3dDYXBhY2l0eShzcG90TWFya2V0QWNjb3VudCwgdGFyZ2V0Qm9ycm93UmF0ZSkge1xuICAgIGNvbnN0IGN1cnJlbnRCb3Jyb3dSYXRlID0gY2FsY3VsYXRlQm9ycm93UmF0ZShzcG90TWFya2V0QWNjb3VudCk7XG4gICAgY29uc3QgdG9rZW5EZXBvc2l0QW1vdW50ID0gZ2V0VG9rZW5BbW91bnQoc3BvdE1hcmtldEFjY291bnQuZGVwb3NpdEJhbGFuY2UsIHNwb3RNYXJrZXRBY2NvdW50LCB0eXBlc18xLlNwb3RCYWxhbmNlVHlwZS5ERVBPU0lUKTtcbiAgICBjb25zdCB0b2tlbkJvcnJvd0Ftb3VudCA9IGdldFRva2VuQW1vdW50KHNwb3RNYXJrZXRBY2NvdW50LmJvcnJvd0JhbGFuY2UsIHNwb3RNYXJrZXRBY2NvdW50LCB0eXBlc18xLlNwb3RCYWxhbmNlVHlwZS5CT1JST1cpO1xuICAgIGxldCB0YXJnZXRVdGlsaXphdGlvbjtcbiAgICAvLyB0YXJnZXQgdXRpbGl6YXRpb24gcGFzdCBtaWQgcG9pbnRcbiAgICBpZiAodGFyZ2V0Qm9ycm93UmF0ZS5ndGUobmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXRBY2NvdW50Lm9wdGltYWxCb3Jyb3dSYXRlKSkpIHtcbiAgICAgICAgY29uc3QgYm9ycm93UmF0ZVNsb3BlID0gbmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXRBY2NvdW50Lm1heEJvcnJvd1JhdGUgLSBzcG90TWFya2V0QWNjb3VudC5vcHRpbWFsQm9ycm93UmF0ZSlcbiAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTi5zdWIobmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXRBY2NvdW50Lm9wdGltYWxVdGlsaXphdGlvbikpKTtcbiAgICAgICAgY29uc3Qgc3VycGx1c1RhcmdldFV0aWxpemF0aW9uID0gdGFyZ2V0Qm9ycm93UmF0ZVxuICAgICAgICAgICAgLnN1YihuZXcgYW5jaG9yXzEuQk4oc3BvdE1hcmtldEFjY291bnQub3B0aW1hbEJvcnJvd1JhdGUpKVxuICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihib3Jyb3dSYXRlU2xvcGUpO1xuICAgICAgICB0YXJnZXRVdGlsaXphdGlvbiA9IHN1cnBsdXNUYXJnZXRVdGlsaXphdGlvbi5hZGQobmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXRBY2NvdW50Lm9wdGltYWxVdGlsaXphdGlvbikpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYm9ycm93UmF0ZVNsb3BlID0gbmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXRBY2NvdW50Lm9wdGltYWxCb3Jyb3dSYXRlKVxuICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihuZXcgYW5jaG9yXzEuQk4oc3BvdE1hcmtldEFjY291bnQub3B0aW1hbFV0aWxpemF0aW9uKSk7XG4gICAgICAgIHRhcmdldFV0aWxpemF0aW9uID0gdGFyZ2V0Qm9ycm93UmF0ZVxuICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihib3Jyb3dSYXRlU2xvcGUpO1xuICAgIH1cbiAgICBjb25zdCB0b3RhbENhcGFjaXR5ID0gdG9rZW5EZXBvc2l0QW1vdW50XG4gICAgICAgIC5tdWwodGFyZ2V0VXRpbGl6YXRpb24pXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTik7XG4gICAgbGV0IHJlbWFpbmluZ0NhcGFjaXR5O1xuICAgIGlmIChjdXJyZW50Qm9ycm93UmF0ZS5ndGUodGFyZ2V0Qm9ycm93UmF0ZSkpIHtcbiAgICAgICAgcmVtYWluaW5nQ2FwYWNpdHkgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlbWFpbmluZ0NhcGFjaXR5ID0gYW5jaG9yXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCB0b3RhbENhcGFjaXR5LnN1Yih0b2tlbkJvcnJvd0Ftb3VudCkpO1xuICAgIH1cbiAgICByZXR1cm4geyB0b3RhbENhcGFjaXR5LCByZW1haW5pbmdDYXBhY2l0eSB9O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVTcG90TWFya2V0Qm9ycm93Q2FwYWNpdHkgPSBjYWxjdWxhdGVTcG90TWFya2V0Qm9ycm93Q2FwYWNpdHk7XG5mdW5jdGlvbiBjYWxjdWxhdGVJbnRlcmVzdFJhdGUoYmFuaywgZGVsdGEgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTykge1xuICAgIGNvbnN0IHV0aWxpemF0aW9uID0gY2FsY3VsYXRlVXRpbGl6YXRpb24oYmFuaywgZGVsdGEpO1xuICAgIGxldCBpbnRlcmVzdFJhdGU7XG4gICAgaWYgKHV0aWxpemF0aW9uLmd0KG5ldyBhbmNob3JfMS5CTihiYW5rLm9wdGltYWxVdGlsaXphdGlvbikpKSB7XG4gICAgICAgIGNvbnN0IHN1cnBsdXNVdGlsaXphdGlvbiA9IHV0aWxpemF0aW9uLnN1YihuZXcgYW5jaG9yXzEuQk4oYmFuay5vcHRpbWFsVXRpbGl6YXRpb24pKTtcbiAgICAgICAgY29uc3QgYm9ycm93UmF0ZVNsb3BlID0gbmV3IGFuY2hvcl8xLkJOKGJhbmsubWF4Qm9ycm93UmF0ZSAtIGJhbmsub3B0aW1hbEJvcnJvd1JhdGUpXG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT04pXG4gICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT04uc3ViKG5ldyBhbmNob3JfMS5CTihiYW5rLm9wdGltYWxVdGlsaXphdGlvbikpKTtcbiAgICAgICAgaW50ZXJlc3RSYXRlID0gbmV3IGFuY2hvcl8xLkJOKGJhbmsub3B0aW1hbEJvcnJvd1JhdGUpLmFkZChzdXJwbHVzVXRpbGl6YXRpb25cbiAgICAgICAgICAgIC5tdWwoYm9ycm93UmF0ZVNsb3BlKVxuICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBib3Jyb3dSYXRlU2xvcGUgPSBuZXcgYW5jaG9yXzEuQk4oYmFuay5vcHRpbWFsQm9ycm93UmF0ZSlcbiAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYobmV3IGFuY2hvcl8xLkJOKGJhbmsub3B0aW1hbFV0aWxpemF0aW9uKSk7XG4gICAgICAgIGludGVyZXN0UmF0ZSA9IHV0aWxpemF0aW9uXG4gICAgICAgICAgICAubXVsKGJvcnJvd1JhdGVTbG9wZSlcbiAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTik7XG4gICAgfVxuICAgIHJldHVybiBpbnRlcmVzdFJhdGU7XG59XG5leHBvcnRzLmNhbGN1bGF0ZUludGVyZXN0UmF0ZSA9IGNhbGN1bGF0ZUludGVyZXN0UmF0ZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZURlcG9zaXRSYXRlKGJhbmspIHtcbiAgICBjb25zdCB1dGlsaXphdGlvbiA9IGNhbGN1bGF0ZVV0aWxpemF0aW9uKGJhbmspO1xuICAgIGNvbnN0IGJvcnJvd1JhdGUgPSBjYWxjdWxhdGVCb3Jyb3dSYXRlKGJhbmspO1xuICAgIGNvbnN0IGRlcG9zaXRSYXRlID0gYm9ycm93UmF0ZVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMi5QRVJDRU5UQUdFX1BSRUNJU0lPTi5zdWIobmV3IGFuY2hvcl8xLkJOKGJhbmsuaW5zdXJhbmNlRnVuZC50b3RhbEZhY3RvcikpKVxuICAgICAgICAubXVsKHV0aWxpemF0aW9uKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18yLlBFUkNFTlRBR0VfUFJFQ0lTSU9OKTtcbiAgICByZXR1cm4gZGVwb3NpdFJhdGU7XG59XG5leHBvcnRzLmNhbGN1bGF0ZURlcG9zaXRSYXRlID0gY2FsY3VsYXRlRGVwb3NpdFJhdGU7XG5mdW5jdGlvbiBjYWxjdWxhdGVCb3Jyb3dSYXRlKGJhbmspIHtcbiAgICByZXR1cm4gY2FsY3VsYXRlSW50ZXJlc3RSYXRlKGJhbmspO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVCb3Jyb3dSYXRlID0gY2FsY3VsYXRlQm9ycm93UmF0ZTtcbmZ1bmN0aW9uIGNhbGN1bGF0ZUludGVyZXN0QWNjdW11bGF0ZWQoYmFuaywgbm93KSB7XG4gICAgY29uc3QgaW50ZXJlc3RSYXRlID0gY2FsY3VsYXRlSW50ZXJlc3RSYXRlKGJhbmspO1xuICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RVcGRhdGUgPSBub3cuc3ViKGJhbmsubGFzdEludGVyZXN0VHMpO1xuICAgIGNvbnN0IG1vZGlmaWVkQm9ycm93UmF0ZSA9IGludGVyZXN0UmF0ZS5tdWwodGltZVNpbmNlTGFzdFVwZGF0ZSk7XG4gICAgY29uc3QgdXRpbGl6YXRpb24gPSBjYWxjdWxhdGVVdGlsaXphdGlvbihiYW5rKTtcbiAgICBjb25zdCBtb2RpZmllZERlcG9zaXRSYXRlID0gbW9kaWZpZWRCb3Jyb3dSYXRlXG4gICAgICAgIC5tdWwodXRpbGl6YXRpb24pXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1VUSUxJWkFUSU9OX1BSRUNJU0lPTik7XG4gICAgY29uc3QgYm9ycm93SW50ZXJlc3QgPSBiYW5rLmN1bXVsYXRpdmVCb3Jyb3dJbnRlcmVzdFxuICAgICAgICAubXVsKG1vZGlmaWVkQm9ycm93UmF0ZSlcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuT05FX1lFQVIpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1JBVEVfUFJFQ0lTSU9OKVxuICAgICAgICAuYWRkKG51bWVyaWNDb25zdGFudHNfMS5PTkUpO1xuICAgIGNvbnN0IGRlcG9zaXRJbnRlcmVzdCA9IGJhbmsuY3VtdWxhdGl2ZURlcG9zaXRJbnRlcmVzdFxuICAgICAgICAubXVsKG1vZGlmaWVkRGVwb3NpdFJhdGUpXG4gICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLk9ORV9ZRUFSKVxuICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9SQVRFX1BSRUNJU0lPTik7XG4gICAgcmV0dXJuIHsgYm9ycm93SW50ZXJlc3QsIGRlcG9zaXRJbnRlcmVzdCB9O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVJbnRlcmVzdEFjY3VtdWxhdGVkID0gY2FsY3VsYXRlSW50ZXJlc3RBY2N1bXVsYXRlZDtcbmZ1bmN0aW9uIGNhbGN1bGF0ZVRva2VuVXRpbGl6YXRpb25MaW1pdHMoZGVwb3NpdFRva2VuQW1vdW50LCBib3Jyb3dUb2tlbkFtb3VudCwgc3BvdE1hcmtldCkge1xuICAgIC8vIENhbGN1bGF0ZXMgdGhlIGFsbG93YWJsZSBtaW5pbXVtIGRlcG9zaXQgYW5kIG1heGltdW0gYm9ycm93IGFtb3VudHMgZm9yIGltbWVkaWF0ZSB3aXRoZHJhd2FsIGJhc2VkIG9uIG1hcmtldCB1dGlsaXphdGlvbi5cbiAgICAvLyBGaXJzdCwgaXQgZGV0ZXJtaW5lcyBhIG1heGltdW0gd2l0aGRyYXdhbCB1dGlsaXphdGlvbiBmcm9tIHRoZSBtYXJrZXQncyB0YXJnZXQgYW5kIGhpc3RvcmljIHV0aWxpemF0aW9uLlxuICAgIC8vIFRoZW4sIGl0IGRlZHVjZXMgY29ycmVzcG9uZGluZyBkZXBvc2l0L2JvcnJvdyBhbW91bnRzLlxuICAgIC8vIE5vdGU6IEZvciBkZXBvc2l0IHNpemVzIGJlbG93IHRoZSBndWFyZCB0aHJlc2hvbGQsIHdpdGhkcmF3YWxzIGFyZW4ndCBibG9ja2VkLlxuICAgIGNvbnN0IG1heFdpdGhkcmF3VXRpbGl6YXRpb24gPSBhbmNob3JfMS5CTi5tYXgobmV3IGFuY2hvcl8xLkJOKHNwb3RNYXJrZXQub3B0aW1hbFV0aWxpemF0aW9uKSwgc3BvdE1hcmtldC51dGlsaXphdGlvblR3YXAuYWRkKG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT04uc3ViKHNwb3RNYXJrZXQudXRpbGl6YXRpb25Ud2FwKS5kaXYobmV3IGFuY2hvcl8xLkJOKDIpKSkpO1xuICAgIGxldCBtaW5EZXBvc2l0VG9rZW5zRm9yVXRpbGl6YXRpb24gPSBib3Jyb3dUb2tlbkFtb3VudFxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9VVElMSVpBVElPTl9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYobWF4V2l0aGRyYXdVdGlsaXphdGlvbik7XG4gICAgLy8gZG9uJ3QgYmxvY2sgd2l0aGRyYXdzIGZvciBkZXBvc2l0IHNpemVzIGJlbG93IGd1YXJkIHRocmVzaG9sZFxuICAgIG1pbkRlcG9zaXRUb2tlbnNGb3JVdGlsaXphdGlvbiA9IGFuY2hvcl8xLkJOLm1pbihtaW5EZXBvc2l0VG9rZW5zRm9yVXRpbGl6YXRpb24sIGRlcG9zaXRUb2tlbkFtb3VudC5zdWIoc3BvdE1hcmtldC53aXRoZHJhd0d1YXJkVGhyZXNob2xkKSk7XG4gICAgbGV0IG1heEJvcnJvd1Rva2Vuc0ZvclV0aWxpemF0aW9uID0gbWF4V2l0aGRyYXdVdGlsaXphdGlvblxuICAgICAgICAubXVsKGRlcG9zaXRUb2tlbkFtb3VudClcbiAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OKTtcbiAgICBtYXhCb3Jyb3dUb2tlbnNGb3JVdGlsaXphdGlvbiA9IGFuY2hvcl8xLkJOLm1heChzcG90TWFya2V0LndpdGhkcmF3R3VhcmRUaHJlc2hvbGQsIG1heEJvcnJvd1Rva2Vuc0ZvclV0aWxpemF0aW9uKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBtaW5EZXBvc2l0VG9rZW5zRm9yVXRpbGl6YXRpb24sXG4gICAgICAgIG1heEJvcnJvd1Rva2Vuc0ZvclV0aWxpemF0aW9uLFxuICAgIH07XG59XG5leHBvcnRzLmNhbGN1bGF0ZVRva2VuVXRpbGl6YXRpb25MaW1pdHMgPSBjYWxjdWxhdGVUb2tlblV0aWxpemF0aW9uTGltaXRzO1xuZnVuY3Rpb24gY2FsY3VsYXRlV2l0aGRyYXdMaW1pdChzcG90TWFya2V0LCBub3cpIHtcbiAgICBjb25zdCBtYXJrZXREZXBvc2l0VG9rZW5BbW91bnQgPSBnZXRUb2tlbkFtb3VudChzcG90TWFya2V0LmRlcG9zaXRCYWxhbmNlLCBzcG90TWFya2V0LCB0eXBlc18xLlNwb3RCYWxhbmNlVHlwZS5ERVBPU0lUKTtcbiAgICBjb25zdCBtYXJrZXRCb3Jyb3dUb2tlbkFtb3VudCA9IGdldFRva2VuQW1vdW50KHNwb3RNYXJrZXQuYm9ycm93QmFsYW5jZSwgc3BvdE1hcmtldCwgdHlwZXNfMS5TcG90QmFsYW5jZVR5cGUuQk9SUk9XKTtcbiAgICBjb25zdCB0d2VudHlGb3VySG91cnMgPSBuZXcgYW5jaG9yXzEuQk4oNjAgKiA2MCAqIDI0KTtcbiAgICBjb25zdCBzaW5jZUxhc3QgPSBub3cuc3ViKHNwb3RNYXJrZXQubGFzdFR3YXBUcyk7XG4gICAgY29uc3Qgc2luY2VTdGFydCA9IGFuY2hvcl8xLkJOLm1heChudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgdHdlbnR5Rm91ckhvdXJzLnN1YihzaW5jZUxhc3QpKTtcbiAgICBjb25zdCBib3Jyb3dUb2tlblR3YXBMaXZlID0gc3BvdE1hcmtldC5ib3Jyb3dUb2tlblR3YXBcbiAgICAgICAgLm11bChzaW5jZVN0YXJ0KVxuICAgICAgICAuYWRkKG1hcmtldEJvcnJvd1Rva2VuQW1vdW50Lm11bChzaW5jZUxhc3QpKVxuICAgICAgICAuZGl2KHNpbmNlTGFzdC5hZGQoc2luY2VTdGFydCkpO1xuICAgIGNvbnN0IGRlcG9zaXRUb2tlblR3YXBMaXZlID0gc3BvdE1hcmtldC5kZXBvc2l0VG9rZW5Ud2FwXG4gICAgICAgIC5tdWwoc2luY2VTdGFydClcbiAgICAgICAgLmFkZChtYXJrZXREZXBvc2l0VG9rZW5BbW91bnQubXVsKHNpbmNlTGFzdCkpXG4gICAgICAgIC5kaXYoc2luY2VMYXN0LmFkZChzaW5jZVN0YXJ0KSk7XG4gICAgY29uc3QgbGVzc2VyRGVwb3NpdEFtb3VudCA9IGFuY2hvcl8xLkJOLm1pbihtYXJrZXREZXBvc2l0VG9rZW5BbW91bnQsIGRlcG9zaXRUb2tlblR3YXBMaXZlKTtcbiAgICBjb25zdCBtYXhCb3Jyb3dUb2tlbnNUd2FwID0gYW5jaG9yXzEuQk4ubWF4KHNwb3RNYXJrZXQud2l0aGRyYXdHdWFyZFRocmVzaG9sZCwgYW5jaG9yXzEuQk4ubWluKGFuY2hvcl8xLkJOLm1heChtYXJrZXREZXBvc2l0VG9rZW5BbW91bnQuZGl2KG5ldyBhbmNob3JfMS5CTig2KSksIGJvcnJvd1Rva2VuVHdhcExpdmUuYWRkKGxlc3NlckRlcG9zaXRBbW91bnQuZGl2KG5ldyBhbmNob3JfMS5CTigxMCkpKSksIGxlc3NlckRlcG9zaXRBbW91bnQuc3ViKGxlc3NlckRlcG9zaXRBbW91bnQuZGl2KG5ldyBhbmNob3JfMS5CTig1KSkpKSk7IC8vIGJldHdlZW4gfjE1LTgwJSB1dGlsaXphdGlvbiB3aXRoIGZyaWN0aW9uIG9uIHR3YXBcbiAgICBjb25zdCBtaW5EZXBvc2l0VG9rZW5zVHdhcCA9IGRlcG9zaXRUb2tlblR3YXBMaXZlLnN1YihhbmNob3JfMS5CTi5tYXgoZGVwb3NpdFRva2VuVHdhcExpdmUuZGl2KG5ldyBhbmNob3JfMS5CTig0KSksIGFuY2hvcl8xLkJOLm1pbihzcG90TWFya2V0LndpdGhkcmF3R3VhcmRUaHJlc2hvbGQsIGRlcG9zaXRUb2tlblR3YXBMaXZlKSkpO1xuICAgIGNvbnN0IHsgbWluRGVwb3NpdFRva2Vuc0ZvclV0aWxpemF0aW9uLCBtYXhCb3Jyb3dUb2tlbnNGb3JVdGlsaXphdGlvbiB9ID0gY2FsY3VsYXRlVG9rZW5VdGlsaXphdGlvbkxpbWl0cyhtYXJrZXREZXBvc2l0VG9rZW5BbW91bnQsIG1hcmtldEJvcnJvd1Rva2VuQW1vdW50LCBzcG90TWFya2V0KTtcbiAgICBjb25zdCBtaW5EZXBvc2l0VG9rZW5zID0gYW5jaG9yXzEuQk4ubWF4KG1pbkRlcG9zaXRUb2tlbnNGb3JVdGlsaXphdGlvbiwgbWluRGVwb3NpdFRva2Vuc1R3YXApO1xuICAgIGNvbnN0IG1heEJvcnJvd1Rva2VucyA9IGFuY2hvcl8xLkJOLm1pbihtYXhCb3Jyb3dUb2tlbnNGb3JVdGlsaXphdGlvbiwgbWF4Qm9ycm93VG9rZW5zVHdhcCk7XG4gICAgY29uc3Qgd2l0aGRyYXdMaW1pdCA9IGFuY2hvcl8xLkJOLm1heChtYXJrZXREZXBvc2l0VG9rZW5BbW91bnQuc3ViKG1pbkRlcG9zaXRUb2tlbnMpLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgbGV0IGJvcnJvd0xpbWl0ID0gbWF4Qm9ycm93VG9rZW5zLnN1YihtYXJrZXRCb3Jyb3dUb2tlbkFtb3VudCk7XG4gICAgYm9ycm93TGltaXQgPSBhbmNob3JfMS5CTi5taW4oYm9ycm93TGltaXQsIG1hcmtldERlcG9zaXRUb2tlbkFtb3VudC5zdWIobWFya2V0Qm9ycm93VG9rZW5BbW91bnQpKTtcbiAgICBpZiAod2l0aGRyYXdMaW1pdC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgYm9ycm93TGltaXQgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYm9ycm93TGltaXQsXG4gICAgICAgIHdpdGhkcmF3TGltaXQsXG4gICAgICAgIG1heEJvcnJvd0Ftb3VudDogbWF4Qm9ycm93VG9rZW5zLFxuICAgICAgICBtaW5EZXBvc2l0QW1vdW50OiBtaW5EZXBvc2l0VG9rZW5zLFxuICAgICAgICBjdXJyZW50RGVwb3NpdEFtb3VudDogbWFya2V0RGVwb3NpdFRva2VuQW1vdW50LFxuICAgICAgICBjdXJyZW50Qm9ycm93QW1vdW50OiBtYXJrZXRCb3Jyb3dUb2tlbkFtb3VudCxcbiAgICB9O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVXaXRoZHJhd0xpbWl0ID0gY2FsY3VsYXRlV2l0aGRyYXdMaW1pdDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbGN1bGF0ZVdpdGhkcmF3TGltaXQiLCJjYWxjdWxhdGVUb2tlblV0aWxpemF0aW9uTGltaXRzIiwiY2FsY3VsYXRlSW50ZXJlc3RBY2N1bXVsYXRlZCIsImNhbGN1bGF0ZUJvcnJvd1JhdGUiLCJjYWxjdWxhdGVEZXBvc2l0UmF0ZSIsImNhbGN1bGF0ZUludGVyZXN0UmF0ZSIsImNhbGN1bGF0ZVNwb3RNYXJrZXRCb3Jyb3dDYXBhY2l0eSIsImNhbGN1bGF0ZVV0aWxpemF0aW9uIiwiY2FsY3VsYXRlTGlhYmlsaXR5V2VpZ2h0IiwiY2FsY3VsYXRlQXNzZXRXZWlnaHQiLCJnZXRUb2tlblZhbHVlIiwiZ2V0U3RyaWN0VG9rZW5WYWx1ZSIsImdldFNpZ25lZFRva2VuQW1vdW50IiwiZ2V0VG9rZW5BbW91bnQiLCJnZXRCYWxhbmNlIiwidHlwZXNfMSIsInJlcXVpcmUiLCJhbmNob3JfMSIsIm51bWVyaWNDb25zdGFudHNfMSIsIm1hcmdpbl8xIiwibnVtZXJpY0NvbnN0YW50c18yIiwidXRpbHNfMSIsInRva2VuQW1vdW50Iiwic3BvdE1hcmtldCIsImJhbGFuY2VUeXBlIiwicHJlY2lzaW9uSW5jcmVhc2UiLCJURU4iLCJwb3ciLCJCTiIsImRlY2ltYWxzIiwiY3VtdWxhdGl2ZUludGVyZXN0IiwiaXNWYXJpYW50IiwiY3VtdWxhdGl2ZURlcG9zaXRJbnRlcmVzdCIsImN1bXVsYXRpdmVCb3Jyb3dJbnRlcmVzdCIsImJhbGFuY2UiLCJtdWwiLCJkaXYiLCJlcSIsIlpFUk8iLCJhZGQiLCJPTkUiLCJiYWxhbmNlQW1vdW50IiwicHJlY2lzaW9uRGVjcmVhc2UiLCJkaXZDZWlsIiwiYWJzIiwibmVnIiwic3BvdERlY2ltYWxzIiwib3JhY2xlUHJpY2VEYXRhIiwib3JhY2xlUHJpY2VUd2FwIiwicHJpY2UiLCJndCIsIm1pbiIsIm1heCIsIm1hcmdpbkNhdGVnb3J5Iiwic2l6ZVByZWNpc2lvbiIsInNpemVJbkFtbVJlc2VydmVQcmVjaXNpb24iLCJBTU1fUkVTRVJWRV9QUkVDSVNJT04iLCJhc3NldFdlaWdodCIsImNhbGN1bGF0ZVNpemVEaXNjb3VudEFzc2V0V2VpZ2h0IiwiaW1mRmFjdG9yIiwiaW5pdGlhbEFzc2V0V2VpZ2h0IiwibWFpbnRlbmFuY2VBc3NldFdlaWdodCIsInNpemUiLCJsaWFiaWxpdHlXZWlnaHQiLCJjYWxjdWxhdGVTaXplUHJlbWl1bUxpYWJpbGl0eVdlaWdodCIsImluaXRpYWxMaWFiaWxpdHlXZWlnaHQiLCJTUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OIiwibWFpbnRlbmFuY2VMaWFiaWxpdHlXZWlnaHQiLCJiYW5rIiwiZGVsdGEiLCJ0b2tlbkRlcG9zaXRBbW91bnQiLCJkZXBvc2l0QmFsYW5jZSIsIlNwb3RCYWxhbmNlVHlwZSIsIkRFUE9TSVQiLCJ0b2tlbkJvcnJvd0Ftb3VudCIsImJvcnJvd0JhbGFuY2UiLCJCT1JST1ciLCJsdCIsInV0aWxpemF0aW9uIiwiU1BPVF9NQVJLRVRfVVRJTElaQVRJT05fUFJFQ0lTSU9OIiwic3BvdE1hcmtldEFjY291bnQiLCJ0YXJnZXRCb3Jyb3dSYXRlIiwiY3VycmVudEJvcnJvd1JhdGUiLCJ0YXJnZXRVdGlsaXphdGlvbiIsImd0ZSIsIm9wdGltYWxCb3Jyb3dSYXRlIiwiYm9ycm93UmF0ZVNsb3BlIiwibWF4Qm9ycm93UmF0ZSIsInN1YiIsIm9wdGltYWxVdGlsaXphdGlvbiIsInN1cnBsdXNUYXJnZXRVdGlsaXphdGlvbiIsInRvdGFsQ2FwYWNpdHkiLCJyZW1haW5pbmdDYXBhY2l0eSIsImludGVyZXN0UmF0ZSIsInN1cnBsdXNVdGlsaXphdGlvbiIsImJvcnJvd1JhdGUiLCJkZXBvc2l0UmF0ZSIsIlBFUkNFTlRBR0VfUFJFQ0lTSU9OIiwiaW5zdXJhbmNlRnVuZCIsInRvdGFsRmFjdG9yIiwibm93IiwidGltZVNpbmNlTGFzdFVwZGF0ZSIsImxhc3RJbnRlcmVzdFRzIiwibW9kaWZpZWRCb3Jyb3dSYXRlIiwibW9kaWZpZWREZXBvc2l0UmF0ZSIsImJvcnJvd0ludGVyZXN0IiwiT05FX1lFQVIiLCJTUE9UX01BUktFVF9SQVRFX1BSRUNJU0lPTiIsImRlcG9zaXRJbnRlcmVzdCIsImRlcG9zaXRUb2tlbkFtb3VudCIsImJvcnJvd1Rva2VuQW1vdW50IiwibWF4V2l0aGRyYXdVdGlsaXphdGlvbiIsInV0aWxpemF0aW9uVHdhcCIsIm1pbkRlcG9zaXRUb2tlbnNGb3JVdGlsaXphdGlvbiIsIndpdGhkcmF3R3VhcmRUaHJlc2hvbGQiLCJtYXhCb3Jyb3dUb2tlbnNGb3JVdGlsaXphdGlvbiIsIm1hcmtldERlcG9zaXRUb2tlbkFtb3VudCIsIm1hcmtldEJvcnJvd1Rva2VuQW1vdW50IiwidHdlbnR5Rm91ckhvdXJzIiwic2luY2VMYXN0IiwibGFzdFR3YXBUcyIsInNpbmNlU3RhcnQiLCJib3Jyb3dUb2tlblR3YXBMaXZlIiwiYm9ycm93VG9rZW5Ud2FwIiwiZGVwb3NpdFRva2VuVHdhcExpdmUiLCJkZXBvc2l0VG9rZW5Ud2FwIiwibGVzc2VyRGVwb3NpdEFtb3VudCIsIm1heEJvcnJvd1Rva2Vuc1R3YXAiLCJtaW5EZXBvc2l0VG9rZW5zVHdhcCIsIm1pbkRlcG9zaXRUb2tlbnMiLCJtYXhCb3Jyb3dUb2tlbnMiLCJ3aXRoZHJhd0xpbWl0IiwiYm9ycm93TGltaXQiLCJtYXhCb3Jyb3dBbW91bnQiLCJtaW5EZXBvc2l0QW1vdW50IiwiY3VycmVudERlcG9zaXRBbW91bnQiLCJjdXJyZW50Qm9ycm93QW1vdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotMarket.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/spotMarket.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateSpotMarketMarginRatio = exports.castNumberToSpotPrecision = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst spotBalance_1 = __webpack_require__(/*! ./spotBalance */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nfunction castNumberToSpotPrecision(value, spotMarket) {\n    if (typeof value === \"number\") {\n        return new anchor_1.BN(value * Math.pow(10, spotMarket.decimals));\n    } else {\n        return value.mul(new anchor_1.BN(Math.pow(10, spotMarket.decimals)));\n    }\n}\nexports.castNumberToSpotPrecision = castNumberToSpotPrecision;\nfunction calculateSpotMarketMarginRatio(market, marginCategory, size, balanceType) {\n    if ((0, types_1.isVariant)(balanceType, \"deposit\")) {\n        const assetWeight = (0, spotBalance_1.calculateAssetWeight)(size, market, marginCategory);\n        return numericConstants_1.MARGIN_PRECISION.sub(assetWeight).toNumber();\n    } else {\n        const liabilityWeight = (0, spotBalance_1.calculateLiabilityWeight)(size, market, marginCategory);\n        return liabilityWeight.sub(numericConstants_1.MARGIN_PRECISION).toNumber();\n    }\n}\nexports.calculateSpotMarketMarginRatio = calculateSpotMarketMarginRatio;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3Nwb3RNYXJrZXQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHNDQUFzQyxHQUFHQSxpQ0FBaUMsR0FBRyxLQUFLO0FBQ2xGLE1BQU1JLFdBQVdDLG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNQyxVQUFVRCxtQkFBT0EsQ0FBQyxtRUFBVTtBQUNsQyxNQUFNRSxnQkFBZ0JGLG1CQUFPQSxDQUFDLG1GQUFlO0FBQzdDLE1BQU1HLHFCQUFxQkgsbUJBQU9BLENBQUMsNkdBQStCO0FBQ2xFLFNBQVNGLDBCQUEwQkYsS0FBSyxFQUFFUSxVQUFVO0lBQ2hELElBQUksT0FBT1IsVUFBVSxVQUFVO1FBQzNCLE9BQU8sSUFBSUcsU0FBU00sRUFBRSxDQUFDVCxRQUFRVSxLQUFLQyxHQUFHLENBQUMsSUFBSUgsV0FBV0ksUUFBUTtJQUNuRSxPQUNLO1FBQ0QsT0FBT1osTUFBTWEsR0FBRyxDQUFDLElBQUlWLFNBQVNNLEVBQUUsQ0FBQ0MsS0FBS0MsR0FBRyxDQUFDLElBQUlILFdBQVdJLFFBQVE7SUFDckU7QUFDSjtBQUNBYixpQ0FBaUMsR0FBR0c7QUFDcEMsU0FBU0QsK0JBQStCYSxNQUFNLEVBQUVDLGNBQWMsRUFBRUMsSUFBSSxFQUFFQyxXQUFXO0lBQzdFLElBQUksQ0FBQyxHQUFHWixRQUFRYSxTQUFTLEVBQUVELGFBQWEsWUFBWTtRQUNoRCxNQUFNRSxjQUFjLENBQUMsR0FBR2IsY0FBY2Msb0JBQW9CLEVBQUVKLE1BQU1GLFFBQVFDO1FBQzFFLE9BQU9SLG1CQUFtQmMsZ0JBQWdCLENBQUNDLEdBQUcsQ0FBQ0gsYUFBYUksUUFBUTtJQUN4RSxPQUNLO1FBQ0QsTUFBTUMsa0JBQWtCLENBQUMsR0FBR2xCLGNBQWNtQix3QkFBd0IsRUFBRVQsTUFBTUYsUUFBUUM7UUFDbEYsT0FBT1MsZ0JBQWdCRixHQUFHLENBQUNmLG1CQUFtQmMsZ0JBQWdCLEVBQUVFLFFBQVE7SUFDNUU7QUFDSjtBQUNBeEIsc0NBQXNDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvc3BvdE1hcmtldC5qcz82Y2I5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jYWxjdWxhdGVTcG90TWFya2V0TWFyZ2luUmF0aW8gPSBleHBvcnRzLmNhc3ROdW1iZXJUb1Nwb3RQcmVjaXNpb24gPSB2b2lkIDA7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5jb25zdCBzcG90QmFsYW5jZV8xID0gcmVxdWlyZShcIi4vc3BvdEJhbGFuY2VcIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5mdW5jdGlvbiBjYXN0TnVtYmVyVG9TcG90UHJlY2lzaW9uKHZhbHVlLCBzcG90TWFya2V0KSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbmNob3JfMS5CTih2YWx1ZSAqIE1hdGgucG93KDEwLCBzcG90TWFya2V0LmRlY2ltYWxzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWUubXVsKG5ldyBhbmNob3JfMS5CTihNYXRoLnBvdygxMCwgc3BvdE1hcmtldC5kZWNpbWFscykpKTtcbiAgICB9XG59XG5leHBvcnRzLmNhc3ROdW1iZXJUb1Nwb3RQcmVjaXNpb24gPSBjYXN0TnVtYmVyVG9TcG90UHJlY2lzaW9uO1xuZnVuY3Rpb24gY2FsY3VsYXRlU3BvdE1hcmtldE1hcmdpblJhdGlvKG1hcmtldCwgbWFyZ2luQ2F0ZWdvcnksIHNpemUsIGJhbGFuY2VUeXBlKSB7XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoYmFsYW5jZVR5cGUsICdkZXBvc2l0JykpIHtcbiAgICAgICAgY29uc3QgYXNzZXRXZWlnaHQgPSAoMCwgc3BvdEJhbGFuY2VfMS5jYWxjdWxhdGVBc3NldFdlaWdodCkoc2l6ZSwgbWFya2V0LCBtYXJnaW5DYXRlZ29yeSk7XG4gICAgICAgIHJldHVybiBudW1lcmljQ29uc3RhbnRzXzEuTUFSR0lOX1BSRUNJU0lPTi5zdWIoYXNzZXRXZWlnaHQpLnRvTnVtYmVyKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBsaWFiaWxpdHlXZWlnaHQgPSAoMCwgc3BvdEJhbGFuY2VfMS5jYWxjdWxhdGVMaWFiaWxpdHlXZWlnaHQpKHNpemUsIG1hcmtldCwgbWFyZ2luQ2F0ZWdvcnkpO1xuICAgICAgICByZXR1cm4gbGlhYmlsaXR5V2VpZ2h0LnN1YihudW1lcmljQ29uc3RhbnRzXzEuTUFSR0lOX1BSRUNJU0lPTikudG9OdW1iZXIoKTtcbiAgICB9XG59XG5leHBvcnRzLmNhbGN1bGF0ZVNwb3RNYXJrZXRNYXJnaW5SYXRpbyA9IGNhbGN1bGF0ZVNwb3RNYXJrZXRNYXJnaW5SYXRpbztcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbGN1bGF0ZVNwb3RNYXJrZXRNYXJnaW5SYXRpbyIsImNhc3ROdW1iZXJUb1Nwb3RQcmVjaXNpb24iLCJhbmNob3JfMSIsInJlcXVpcmUiLCJ0eXBlc18xIiwic3BvdEJhbGFuY2VfMSIsIm51bWVyaWNDb25zdGFudHNfMSIsInNwb3RNYXJrZXQiLCJCTiIsIk1hdGgiLCJwb3ciLCJkZWNpbWFscyIsIm11bCIsIm1hcmtldCIsIm1hcmdpbkNhdGVnb3J5Iiwic2l6ZSIsImJhbGFuY2VUeXBlIiwiaXNWYXJpYW50IiwiYXNzZXRXZWlnaHQiLCJjYWxjdWxhdGVBc3NldFdlaWdodCIsIk1BUkdJTl9QUkVDSVNJT04iLCJzdWIiLCJ0b051bWJlciIsImxpYWJpbGl0eVdlaWdodCIsImNhbGN1bGF0ZUxpYWJpbGl0eVdlaWdodCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotMarket.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotPosition.js":
/*!***************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/spotPosition.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getWorstCaseTokenAmounts = exports.isSpotPositionAvailable = void 0;\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst spotBalance_1 = __webpack_require__(/*! ./spotBalance */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js\");\nfunction isSpotPositionAvailable(position) {\n    return position.scaledBalance.eq(numericConstants_1.ZERO) && position.openOrders === 0;\n}\nexports.isSpotPositionAvailable = isSpotPositionAvailable;\nfunction getWorstCaseTokenAmounts(spotPosition, spotMarketAccount, oraclePriceData) {\n    const tokenAmount = (0, spotBalance_1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType), spotPosition.balanceType);\n    const tokenAmountAllBidsFill = tokenAmount.add(spotPosition.openBids);\n    const tokenAmountAllAsksFill = tokenAmount.add(spotPosition.openAsks);\n    if (tokenAmountAllBidsFill.abs().gt(tokenAmountAllAsksFill.abs())) {\n        const worstCaseQuoteTokenAmount = (0, spotBalance_1.getTokenValue)(spotPosition.openBids.neg(), spotMarketAccount.decimals, oraclePriceData);\n        return [\n            tokenAmountAllBidsFill,\n            worstCaseQuoteTokenAmount\n        ];\n    } else {\n        const worstCaseQuoteTokenAmount = (0, spotBalance_1.getTokenValue)(spotPosition.openAsks.neg(), spotMarketAccount.decimals, oraclePriceData);\n        return [\n            tokenAmountAllAsksFill,\n            worstCaseQuoteTokenAmount\n        ];\n    }\n}\nexports.getWorstCaseTokenAmounts = getWorstCaseTokenAmounts;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3Nwb3RQb3NpdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0NBQWdDLEdBQUdBLCtCQUErQixHQUFHLEtBQUs7QUFDMUUsTUFBTUkscUJBQXFCQyxtQkFBT0EsQ0FBQyw2R0FBK0I7QUFDbEUsTUFBTUMsZ0JBQWdCRCxtQkFBT0EsQ0FBQyxtRkFBZTtBQUM3QyxTQUFTRix3QkFBd0JJLFFBQVE7SUFDckMsT0FBT0EsU0FBU0MsYUFBYSxDQUFDQyxFQUFFLENBQUNMLG1CQUFtQk0sSUFBSSxLQUFLSCxTQUFTSSxVQUFVLEtBQUs7QUFDekY7QUFDQVgsK0JBQStCLEdBQUdHO0FBQ2xDLFNBQVNELHlCQUF5QlUsWUFBWSxFQUFFQyxpQkFBaUIsRUFBRUMsZUFBZTtJQUM5RSxNQUFNQyxjQUFjLENBQUMsR0FBR1QsY0FBY1Usb0JBQW9CLEVBQUUsQ0FBQyxHQUFHVixjQUFjVyxjQUFjLEVBQUVMLGFBQWFKLGFBQWEsRUFBRUssbUJBQW1CRCxhQUFhTSxXQUFXLEdBQUdOLGFBQWFNLFdBQVc7SUFDaE0sTUFBTUMseUJBQXlCSixZQUFZSyxHQUFHLENBQUNSLGFBQWFTLFFBQVE7SUFDcEUsTUFBTUMseUJBQXlCUCxZQUFZSyxHQUFHLENBQUNSLGFBQWFXLFFBQVE7SUFDcEUsSUFBSUosdUJBQXVCSyxHQUFHLEdBQUdDLEVBQUUsQ0FBQ0gsdUJBQXVCRSxHQUFHLEtBQUs7UUFDL0QsTUFBTUUsNEJBQTRCLENBQUMsR0FBR3BCLGNBQWNxQixhQUFhLEVBQUVmLGFBQWFTLFFBQVEsQ0FBQ08sR0FBRyxJQUFJZixrQkFBa0JnQixRQUFRLEVBQUVmO1FBQzVILE9BQU87WUFBQ0s7WUFBd0JPO1NBQTBCO0lBQzlELE9BQ0s7UUFDRCxNQUFNQSw0QkFBNEIsQ0FBQyxHQUFHcEIsY0FBY3FCLGFBQWEsRUFBRWYsYUFBYVcsUUFBUSxDQUFDSyxHQUFHLElBQUlmLGtCQUFrQmdCLFFBQVEsRUFBRWY7UUFDNUgsT0FBTztZQUFDUTtZQUF3Qkk7U0FBMEI7SUFDOUQ7QUFDSjtBQUNBMUIsZ0NBQWdDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvc3BvdFBvc2l0aW9uLmpzPzVkNzkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldFdvcnN0Q2FzZVRva2VuQW1vdW50cyA9IGV4cG9ydHMuaXNTcG90UG9zaXRpb25BdmFpbGFibGUgPSB2b2lkIDA7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5jb25zdCBzcG90QmFsYW5jZV8xID0gcmVxdWlyZShcIi4vc3BvdEJhbGFuY2VcIik7XG5mdW5jdGlvbiBpc1Nwb3RQb3NpdGlvbkF2YWlsYWJsZShwb3NpdGlvbikge1xuICAgIHJldHVybiBwb3NpdGlvbi5zY2FsZWRCYWxhbmNlLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJiBwb3NpdGlvbi5vcGVuT3JkZXJzID09PSAwO1xufVxuZXhwb3J0cy5pc1Nwb3RQb3NpdGlvbkF2YWlsYWJsZSA9IGlzU3BvdFBvc2l0aW9uQXZhaWxhYmxlO1xuZnVuY3Rpb24gZ2V0V29yc3RDYXNlVG9rZW5BbW91bnRzKHNwb3RQb3NpdGlvbiwgc3BvdE1hcmtldEFjY291bnQsIG9yYWNsZVByaWNlRGF0YSkge1xuICAgIGNvbnN0IHRva2VuQW1vdW50ID0gKDAsIHNwb3RCYWxhbmNlXzEuZ2V0U2lnbmVkVG9rZW5BbW91bnQpKCgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShzcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldEFjY291bnQsIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSksIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSk7XG4gICAgY29uc3QgdG9rZW5BbW91bnRBbGxCaWRzRmlsbCA9IHRva2VuQW1vdW50LmFkZChzcG90UG9zaXRpb24ub3BlbkJpZHMpO1xuICAgIGNvbnN0IHRva2VuQW1vdW50QWxsQXNrc0ZpbGwgPSB0b2tlbkFtb3VudC5hZGQoc3BvdFBvc2l0aW9uLm9wZW5Bc2tzKTtcbiAgICBpZiAodG9rZW5BbW91bnRBbGxCaWRzRmlsbC5hYnMoKS5ndCh0b2tlbkFtb3VudEFsbEFza3NGaWxsLmFicygpKSkge1xuICAgICAgICBjb25zdCB3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50ID0gKDAsIHNwb3RCYWxhbmNlXzEuZ2V0VG9rZW5WYWx1ZSkoc3BvdFBvc2l0aW9uLm9wZW5CaWRzLm5lZygpLCBzcG90TWFya2V0QWNjb3VudC5kZWNpbWFscywgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgcmV0dXJuIFt0b2tlbkFtb3VudEFsbEJpZHNGaWxsLCB3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50XTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHdvcnN0Q2FzZVF1b3RlVG9rZW5BbW91bnQgPSAoMCwgc3BvdEJhbGFuY2VfMS5nZXRUb2tlblZhbHVlKShzcG90UG9zaXRpb24ub3BlbkFza3MubmVnKCksIHNwb3RNYXJrZXRBY2NvdW50LmRlY2ltYWxzLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICByZXR1cm4gW3Rva2VuQW1vdW50QWxsQXNrc0ZpbGwsIHdvcnN0Q2FzZVF1b3RlVG9rZW5BbW91bnRdO1xuICAgIH1cbn1cbmV4cG9ydHMuZ2V0V29yc3RDYXNlVG9rZW5BbW91bnRzID0gZ2V0V29yc3RDYXNlVG9rZW5BbW91bnRzO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZ2V0V29yc3RDYXNlVG9rZW5BbW91bnRzIiwiaXNTcG90UG9zaXRpb25BdmFpbGFibGUiLCJudW1lcmljQ29uc3RhbnRzXzEiLCJyZXF1aXJlIiwic3BvdEJhbGFuY2VfMSIsInBvc2l0aW9uIiwic2NhbGVkQmFsYW5jZSIsImVxIiwiWkVSTyIsIm9wZW5PcmRlcnMiLCJzcG90UG9zaXRpb24iLCJzcG90TWFya2V0QWNjb3VudCIsIm9yYWNsZVByaWNlRGF0YSIsInRva2VuQW1vdW50IiwiZ2V0U2lnbmVkVG9rZW5BbW91bnQiLCJnZXRUb2tlbkFtb3VudCIsImJhbGFuY2VUeXBlIiwidG9rZW5BbW91bnRBbGxCaWRzRmlsbCIsImFkZCIsIm9wZW5CaWRzIiwidG9rZW5BbW91bnRBbGxBc2tzRmlsbCIsIm9wZW5Bc2tzIiwiYWJzIiwiZ3QiLCJ3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50IiwiZ2V0VG9rZW5WYWx1ZSIsIm5lZyIsImRlY2ltYWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotPosition.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/superStake.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/superStake.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateEstimatedSuperStakeLiquidationPrice = exports.calculateSolEarned = exports.findBestSuperStakeIxs = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst marinade_1 = __webpack_require__(/*! ../marinade */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/marinade/index.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst node_fetch_1 = __importDefault(__webpack_require__(/*! node-fetch */ \"(ssr)/./node_modules/node-fetch/lib/index.mjs\"));\nasync function findBestSuperStakeIxs({ amount, jupiterClient, driftClient, userAccountPublicKey, marinadePrice, forceMarinade, onlyDirectRoutes }) {\n    if (!marinadePrice) {\n        const marinadeProgram = (0, marinade_1.getMarinadeFinanceProgram)(driftClient.provider);\n        marinadePrice = await (0, marinade_1.getMarinadeMSolPrice)(marinadeProgram);\n    }\n    const solMint = driftClient.getSpotMarketAccount(1).mint;\n    const mSOLMint = driftClient.getSpotMarketAccount(2).mint;\n    let jupiterPrice;\n    let bestRoute;\n    try {\n        const jupiterRoutes = await jupiterClient.getRoutes({\n            inputMint: solMint,\n            outputMint: mSOLMint,\n            amount,\n            onlyDirectRoutes\n        });\n        bestRoute = jupiterRoutes[0];\n        jupiterPrice = bestRoute.inAmount / bestRoute.outAmount;\n    } catch (e) {\n        console.error(\"Error getting jupiter price\", e);\n    }\n    if (!jupiterPrice || marinadePrice <= jupiterPrice || forceMarinade) {\n        const ixs = await driftClient.getStakeForMSOLIx({\n            amount,\n            userAccountPublicKey\n        });\n        return {\n            method: \"marinade\",\n            ixs,\n            lookupTables: [],\n            price: marinadePrice\n        };\n    } else {\n        const { ixs, lookupTables } = await driftClient.getJupiterSwapIx({\n            inMarketIndex: 1,\n            outMarketIndex: 2,\n            route: bestRoute,\n            jupiterClient,\n            amount,\n            userAccountPublicKey\n        });\n        return {\n            method: \"jupiter\",\n            ixs,\n            lookupTables,\n            price: jupiterPrice\n        };\n    }\n}\nexports.findBestSuperStakeIxs = findBestSuperStakeIxs;\nasync function calculateSolEarned({ user, depositRecords }) {\n    const now = Date.now() / 1000;\n    const timestamps = [\n        now,\n        ...depositRecords.map((r)=>r.ts.toNumber())\n    ];\n    const msolRatios = new Map();\n    const getPrice = async (timestamp)=>{\n        const date = new Date(timestamp * 1000); // Convert Unix timestamp to milliseconds\n        const swaggerApiDateTime = date.toISOString(); // Format date as swagger API date-time\n        const url = `https://api.marinade.finance/msol/price_sol?time=${swaggerApiDateTime}`;\n        const response = await (0, node_fetch_1.default)(url);\n        if (response.status === 200) {\n            const data = await response.json();\n            msolRatios.set(timestamp, data);\n        }\n    };\n    await Promise.all(timestamps.map(getPrice));\n    let solEarned = numericConstants_1.ZERO;\n    for (const record of depositRecords){\n        if (record.marketIndex === 1) {\n            if ((0, types_1.isVariant)(record.direction, \"deposit\")) {\n                solEarned = solEarned.sub(record.amount);\n            } else {\n                solEarned = solEarned.add(record.amount);\n            }\n        } else if (record.marketIndex === 2) {\n            const msolRatio = msolRatios.get(record.ts.toNumber());\n            const msolRatioBN = new anchor_1.BN(msolRatio * web3_js_1.LAMPORTS_PER_SOL);\n            const solAmount = record.amount.mul(msolRatioBN).div(numericConstants_1.LAMPORTS_PRECISION);\n            if ((0, types_1.isVariant)(record.direction, \"deposit\")) {\n                solEarned = solEarned.sub(solAmount);\n            } else {\n                solEarned = solEarned.add(solAmount);\n            }\n        }\n    }\n    const currentMSOLTokenAmount = await user.getTokenAmount(2);\n    const currentSOLTokenAmount = await user.getTokenAmount(1);\n    const currentMSOLRatio = msolRatios.get(now);\n    const currentMSOLRatioBN = new anchor_1.BN(currentMSOLRatio * web3_js_1.LAMPORTS_PER_SOL);\n    solEarned = solEarned.add(currentMSOLTokenAmount.mul(currentMSOLRatioBN).div(numericConstants_1.LAMPORTS_PRECISION));\n    solEarned = solEarned.add(currentSOLTokenAmount);\n    return solEarned;\n}\nexports.calculateSolEarned = calculateSolEarned;\n// calculate estimated liquidation price (in mSOL/SOL) based on target amounts\nfunction calculateEstimatedSuperStakeLiquidationPrice(msolDepositAmount, msolMaintenanceAssetWeight, solBorrowAmount, solMaintenanceLiabilityWeight, msolPriceRatio) {\n    const liquidationDivergence = solMaintenanceLiabilityWeight * solBorrowAmount / (msolMaintenanceAssetWeight * msolDepositAmount * msolPriceRatio);\n    const liquidationPrice = msolPriceRatio * liquidationDivergence;\n    return liquidationPrice;\n}\nexports.calculateEstimatedSuperStakeLiquidationPrice = calculateEstimatedSuperStakeLiquidationPrice;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3N1cGVyU3Rha2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQUUsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9EQUFvRCxHQUFHQSwwQkFBMEIsR0FBR0EsNkJBQTZCLEdBQUcsS0FBSztBQUN6SCxNQUFNSyxZQUFZQyxtQkFBT0EsQ0FBQyw4RUFBaUI7QUFDM0MsTUFBTUMsYUFBYUQsbUJBQU9BLENBQUMsK0VBQWE7QUFDeEMsTUFBTUUsV0FBV0YsbUJBQU9BLENBQUMsbUZBQW1CO0FBQzVDLE1BQU1HLFVBQVVILG1CQUFPQSxDQUFDLG1FQUFVO0FBQ2xDLE1BQU1JLHFCQUFxQkosbUJBQU9BLENBQUMsNkdBQStCO0FBQ2xFLE1BQU1LLGVBQWVoQixnQkFBZ0JXLG1CQUFPQSxDQUFDLGlFQUFZO0FBQ3pELGVBQWVGLHNCQUFzQixFQUFFUSxNQUFNLEVBQUVDLGFBQWEsRUFBRUMsV0FBVyxFQUFFQyxvQkFBb0IsRUFBRUMsYUFBYSxFQUFFQyxhQUFhLEVBQUVDLGdCQUFnQixFQUFHO0lBQzlJLElBQUksQ0FBQ0YsZUFBZTtRQUNoQixNQUFNRyxrQkFBa0IsQ0FBQyxHQUFHWixXQUFXYSx5QkFBeUIsRUFBRU4sWUFBWU8sUUFBUTtRQUN0RkwsZ0JBQWdCLE1BQU0sQ0FBQyxHQUFHVCxXQUFXZSxvQkFBb0IsRUFBRUg7SUFDL0Q7SUFDQSxNQUFNSSxVQUFVVCxZQUFZVSxvQkFBb0IsQ0FBQyxHQUFHQyxJQUFJO0lBQ3hELE1BQU1DLFdBQVdaLFlBQVlVLG9CQUFvQixDQUFDLEdBQUdDLElBQUk7SUFDekQsSUFBSUU7SUFDSixJQUFJ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RyxDQUFDTTtZQUM5QjtRQUNKO0lBQ0o7SUFDQSxNQUFNSSx5QkFBeUIsTUFBTTFDLEtBQUsyQyxjQUFjLENBQUM7SUFDekQsTUFBTUMsd0JBQXdCLE1BQU01QyxLQUFLMkMsY0FBYyxDQUFDO0lBQ3hELE1BQU1FLG1CQUFtQnBDLFdBQVd5QixHQUFHLENBQUNoQztJQUN4QyxNQUFNNEMscUJBQXFCLElBQUlyRixTQUFTMkUsRUFBRSxDQUFDUyxtQkFBbUJ2RixVQUFVK0UsZ0JBQWdCO0lBQ3hGWixZQUFZQSxVQUFVTyxHQUFHLENBQUNVLHVCQUF1QkgsR0FBRyxDQUFDTyxvQkFBb0JOLEdBQUcsQ0FBQzdFLG1CQUFtQjhFLGtCQUFrQjtJQUNsSGhCLFlBQVlBLFVBQVVPLEdBQUcsQ0FBQ1k7SUFDMUIsT0FBT25CO0FBQ1g7QUFDQXhFLDBCQUEwQixHQUFHRztBQUM3Qiw4RUFBOEU7QUFDOUUsU0FBU0QsNkNBQTZDNEYsaUJBQWlCLEVBQUVDLDBCQUEwQixFQUFFQyxlQUFlLEVBQUVDLDZCQUE2QixFQUFFQyxjQUFjO0lBQy9KLE1BQU1DLHdCQUF3QixnQ0FBaUNILGtCQUMxREQsQ0FBQUEsNkJBQTZCRCxvQkFBb0JJLGNBQWE7SUFDbkUsTUFBTUUsbUJBQW1CRixpQkFBaUJDO0lBQzFDLE9BQU9DO0FBQ1g7QUFDQXBHLG9EQUFvRCxHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3N1cGVyU3Rha2UuanM/MDMyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuY2FsY3VsYXRlRXN0aW1hdGVkU3VwZXJTdGFrZUxpcXVpZGF0aW9uUHJpY2UgPSBleHBvcnRzLmNhbGN1bGF0ZVNvbEVhcm5lZCA9IGV4cG9ydHMuZmluZEJlc3RTdXBlclN0YWtlSXhzID0gdm9pZCAwO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IG1hcmluYWRlXzEgPSByZXF1aXJlKFwiLi4vbWFyaW5hZGVcIik7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IHR5cGVzXzEgPSByZXF1aXJlKFwiLi4vdHlwZXNcIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5jb25zdCBub2RlX2ZldGNoXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIm5vZGUtZmV0Y2hcIikpO1xuYXN5bmMgZnVuY3Rpb24gZmluZEJlc3RTdXBlclN0YWtlSXhzKHsgYW1vdW50LCBqdXBpdGVyQ2xpZW50LCBkcmlmdENsaWVudCwgdXNlckFjY291bnRQdWJsaWNLZXksIG1hcmluYWRlUHJpY2UsIGZvcmNlTWFyaW5hZGUsIG9ubHlEaXJlY3RSb3V0ZXMsIH0pIHtcbiAgICBpZiAoIW1hcmluYWRlUHJpY2UpIHtcbiAgICAgICAgY29uc3QgbWFyaW5hZGVQcm9ncmFtID0gKDAsIG1hcmluYWRlXzEuZ2V0TWFyaW5hZGVGaW5hbmNlUHJvZ3JhbSkoZHJpZnRDbGllbnQucHJvdmlkZXIpO1xuICAgICAgICBtYXJpbmFkZVByaWNlID0gYXdhaXQgKDAsIG1hcmluYWRlXzEuZ2V0TWFyaW5hZGVNU29sUHJpY2UpKG1hcmluYWRlUHJvZ3JhbSk7XG4gICAgfVxuICAgIGNvbnN0IHNvbE1pbnQgPSBkcmlmdENsaWVudC5nZXRTcG90TWFya2V0QWNjb3VudCgxKS5taW50O1xuICAgIGNvbnN0IG1TT0xNaW50ID0gZHJpZnRDbGllbnQuZ2V0U3BvdE1hcmtldEFjY291bnQoMikubWludDtcbiAgICBsZXQganVwaXRlclByaWNlO1xuICAgIGxldCBiZXN0Um91dGU7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QganVwaXRlclJvdXRlcyA9IGF3YWl0IGp1cGl0ZXJDbGllbnQuZ2V0Um91dGVzKHtcbiAgICAgICAgICAgIGlucHV0TWludDogc29sTWludCxcbiAgICAgICAgICAgIG91dHB1dE1pbnQ6IG1TT0xNaW50LFxuICAgICAgICAgICAgYW1vdW50LFxuICAgICAgICAgICAgb25seURpcmVjdFJvdXRlcyxcbiAgICAgICAgfSk7XG4gICAgICAgIGJlc3RSb3V0ZSA9IGp1cGl0ZXJSb3V0ZXNbMF07XG4gICAgICAgIGp1cGl0ZXJQcmljZSA9IGJlc3RSb3V0ZS5pbkFtb3VudCAvIGJlc3RSb3V0ZS5vdXRBbW91bnQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcganVwaXRlciBwcmljZScsIGUpO1xuICAgIH1cbiAgICBpZiAoIWp1cGl0ZXJQcmljZSB8fCBtYXJpbmFkZVByaWNlIDw9IGp1cGl0ZXJQcmljZSB8fCBmb3JjZU1hcmluYWRlKSB7XG4gICAgICAgIGNvbnN0IGl4cyA9IGF3YWl0IGRyaWZ0Q2xpZW50LmdldFN0YWtlRm9yTVNPTEl4KHtcbiAgICAgICAgICAgIGFtb3VudCxcbiAgICAgICAgICAgIHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ21hcmluYWRlJyxcbiAgICAgICAgICAgIGl4cyxcbiAgICAgICAgICAgIGxvb2t1cFRhYmxlczogW10sXG4gICAgICAgICAgICBwcmljZTogbWFyaW5hZGVQcmljZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHsgaXhzLCBsb29rdXBUYWJsZXMgfSA9IGF3YWl0IGRyaWZ0Q2xpZW50LmdldEp1cGl0ZXJTd2FwSXgoe1xuICAgICAgICAgICAgaW5NYXJrZXRJbmRleDogMSxcbiAgICAgICAgICAgIG91dE1hcmtldEluZGV4OiAyLFxuICAgICAgICAgICAgcm91dGU6IGJlc3RSb3V0ZSxcbiAgICAgICAgICAgIGp1cGl0ZXJDbGllbnQsXG4gICAgICAgICAgICBhbW91bnQsXG4gICAgICAgICAgICB1c2VyQWNjb3VudFB1YmxpY0tleSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2Q6ICdqdXBpdGVyJyxcbiAgICAgICAgICAgIGl4cyxcbiAgICAgICAgICAgIGxvb2t1cFRhYmxlcyxcbiAgICAgICAgICAgIHByaWNlOiBqdXBpdGVyUHJpY2UsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5maW5kQmVzdFN1cGVyU3Rha2VJeHMgPSBmaW5kQmVzdFN1cGVyU3Rha2VJeHM7XG5hc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVTb2xFYXJuZWQoeyB1c2VyLCBkZXBvc2l0UmVjb3JkcywgfSkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCkgLyAxMDAwO1xuICAgIGNvbnN0IHRpbWVzdGFtcHMgPSBbXG4gICAgICAgIG5vdyxcbiAgICAgICAgLi4uZGVwb3NpdFJlY29yZHMubWFwKChyKSA9PiByLnRzLnRvTnVtYmVyKCkpLFxuICAgIF07XG4gICAgY29uc3QgbXNvbFJhdGlvcyA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBnZXRQcmljZSA9IGFzeW5jICh0aW1lc3RhbXApID0+IHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCAqIDEwMDApOyAvLyBDb252ZXJ0IFVuaXggdGltZXN0YW1wIHRvIG1pbGxpc2Vjb25kc1xuICAgICAgICBjb25zdCBzd2FnZ2VyQXBpRGF0ZVRpbWUgPSBkYXRlLnRvSVNPU3RyaW5nKCk7IC8vIEZvcm1hdCBkYXRlIGFzIHN3YWdnZXIgQVBJIGRhdGUtdGltZVxuICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkubWFyaW5hZGUuZmluYW5jZS9tc29sL3ByaWNlX3NvbD90aW1lPSR7c3dhZ2dlckFwaURhdGVUaW1lfWA7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgKDAsIG5vZGVfZmV0Y2hfMS5kZWZhdWx0KSh1cmwpO1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBtc29sUmF0aW9zLnNldCh0aW1lc3RhbXAsIGRhdGEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh0aW1lc3RhbXBzLm1hcChnZXRQcmljZSkpO1xuICAgIGxldCBzb2xFYXJuZWQgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBkZXBvc2l0UmVjb3Jkcykge1xuICAgICAgICBpZiAocmVjb3JkLm1hcmtldEluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShyZWNvcmQuZGlyZWN0aW9uLCAnZGVwb3NpdCcpKSB7XG4gICAgICAgICAgICAgICAgc29sRWFybmVkID0gc29sRWFybmVkLnN1YihyZWNvcmQuYW1vdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvbEVhcm5lZCA9IHNvbEVhcm5lZC5hZGQocmVjb3JkLmFtb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLm1hcmtldEluZGV4ID09PSAyKSB7XG4gICAgICAgICAgICBjb25zdCBtc29sUmF0aW8gPSBtc29sUmF0aW9zLmdldChyZWNvcmQudHMudG9OdW1iZXIoKSk7XG4gICAgICAgICAgICBjb25zdCBtc29sUmF0aW9CTiA9IG5ldyBhbmNob3JfMS5CTihtc29sUmF0aW8gKiB3ZWIzX2pzXzEuTEFNUE9SVFNfUEVSX1NPTCk7XG4gICAgICAgICAgICBjb25zdCBzb2xBbW91bnQgPSByZWNvcmQuYW1vdW50Lm11bChtc29sUmF0aW9CTikuZGl2KG51bWVyaWNDb25zdGFudHNfMS5MQU1QT1JUU19QUkVDSVNJT04pO1xuICAgICAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkocmVjb3JkLmRpcmVjdGlvbiwgJ2RlcG9zaXQnKSkge1xuICAgICAgICAgICAgICAgIHNvbEVhcm5lZCA9IHNvbEVhcm5lZC5zdWIoc29sQW1vdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvbEVhcm5lZCA9IHNvbEVhcm5lZC5hZGQoc29sQW1vdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjdXJyZW50TVNPTFRva2VuQW1vdW50ID0gYXdhaXQgdXNlci5nZXRUb2tlbkFtb3VudCgyKTtcbiAgICBjb25zdCBjdXJyZW50U09MVG9rZW5BbW91bnQgPSBhd2FpdCB1c2VyLmdldFRva2VuQW1vdW50KDEpO1xuICAgIGNvbnN0IGN1cnJlbnRNU09MUmF0aW8gPSBtc29sUmF0aW9zLmdldChub3cpO1xuICAgIGNvbnN0IGN1cnJlbnRNU09MUmF0aW9CTiA9IG5ldyBhbmNob3JfMS5CTihjdXJyZW50TVNPTFJhdGlvICogd2ViM19qc18xLkxBTVBPUlRTX1BFUl9TT0wpO1xuICAgIHNvbEVhcm5lZCA9IHNvbEVhcm5lZC5hZGQoY3VycmVudE1TT0xUb2tlbkFtb3VudC5tdWwoY3VycmVudE1TT0xSYXRpb0JOKS5kaXYobnVtZXJpY0NvbnN0YW50c18xLkxBTVBPUlRTX1BSRUNJU0lPTikpO1xuICAgIHNvbEVhcm5lZCA9IHNvbEVhcm5lZC5hZGQoY3VycmVudFNPTFRva2VuQW1vdW50KTtcbiAgICByZXR1cm4gc29sRWFybmVkO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVTb2xFYXJuZWQgPSBjYWxjdWxhdGVTb2xFYXJuZWQ7XG4vLyBjYWxjdWxhdGUgZXN0aW1hdGVkIGxpcXVpZGF0aW9uIHByaWNlIChpbiBtU09ML1NPTCkgYmFzZWQgb24gdGFyZ2V0IGFtb3VudHNcbmZ1bmN0aW9uIGNhbGN1bGF0ZUVzdGltYXRlZFN1cGVyU3Rha2VMaXF1aWRhdGlvblByaWNlKG1zb2xEZXBvc2l0QW1vdW50LCBtc29sTWFpbnRlbmFuY2VBc3NldFdlaWdodCwgc29sQm9ycm93QW1vdW50LCBzb2xNYWludGVuYW5jZUxpYWJpbGl0eVdlaWdodCwgbXNvbFByaWNlUmF0aW8pIHtcbiAgICBjb25zdCBsaXF1aWRhdGlvbkRpdmVyZ2VuY2UgPSAoc29sTWFpbnRlbmFuY2VMaWFiaWxpdHlXZWlnaHQgKiBzb2xCb3Jyb3dBbW91bnQpIC9cbiAgICAgICAgKG1zb2xNYWludGVuYW5jZUFzc2V0V2VpZ2h0ICogbXNvbERlcG9zaXRBbW91bnQgKiBtc29sUHJpY2VSYXRpbyk7XG4gICAgY29uc3QgbGlxdWlkYXRpb25QcmljZSA9IG1zb2xQcmljZVJhdGlvICogbGlxdWlkYXRpb25EaXZlcmdlbmNlO1xuICAgIHJldHVybiBsaXF1aWRhdGlvblByaWNlO1xufVxuZXhwb3J0cy5jYWxjdWxhdGVFc3RpbWF0ZWRTdXBlclN0YWtlTGlxdWlkYXRpb25QcmljZSA9IGNhbGN1bGF0ZUVzdGltYXRlZFN1cGVyU3Rha2VMaXF1aWRhdGlvblByaWNlO1xuIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbGN1bGF0ZUVzdGltYXRlZFN1cGVyU3Rha2VMaXF1aWRhdGlvblByaWNlIiwiY2FsY3VsYXRlU29sRWFybmVkIiwiZmluZEJlc3RTdXBlclN0YWtlSXhzIiwid2ViM19qc18xIiwicmVxdWlyZSIsIm1hcmluYWRlXzEiLCJhbmNob3JfMSIsInR5cGVzXzEiLCJudW1lcmljQ29uc3RhbnRzXzEiLCJub2RlX2ZldGNoXzEiLCJhbW91bnQiLCJqdXBpdGVyQ2xpZW50IiwiZHJpZnRDbGllbnQiLCJ1c2VyQWNjb3VudFB1YmxpY0tleSIsIm1hcmluYWRlUHJpY2UiLCJmb3JjZU1hcmluYWRlIiwib25seURpcmVjdFJvdXRlcyIsIm1hcmluYWRlUHJvZ3JhbSIsImdldE1hcmluYWRlRmluYW5jZVByb2dyYW0iLCJwcm92aWRlciIsImdldE1hcmluYWRlTVNvbFByaWNlIiwic29sTWludCIsImdldFNwb3RNYXJrZXRBY2NvdW50IiwibWludCIsIm1TT0xNaW50IiwianVwaXRlclByaWNlIiwiYmVzdFJvdXRlIiwianVwaXRlclJvdXRlcyIsImdldFJvdXRlcyIsImlucHV0TWludCIsIm91dHB1dE1pbnQiLCJpbkFtb3VudCIsIm91dEFtb3VudCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJpeHMiLCJnZXRTdGFrZUZvck1TT0xJeCIsIm1ldGhvZCIsImxvb2t1cFRhYmxlcyIsInByaWNlIiwiZ2V0SnVwaXRlclN3YXBJeCIsImluTWFya2V0SW5kZXgiLCJvdXRNYXJrZXRJbmRleCIsInJvdXRlIiwidXNlciIsImRlcG9zaXRSZWNvcmRzIiwibm93IiwiRGF0ZSIsInRpbWVzdGFtcHMiLCJtYXAiLCJyIiwidHMiLCJ0b051bWJlciIsIm1zb2xSYXRpb3MiLCJNYXAiLCJnZXRQcmljZSIsInRpbWVzdGFtcCIsImRhdGUiLCJzd2FnZ2VyQXBpRGF0ZVRpbWUiLCJ0b0lTT1N0cmluZyIsInVybCIsInJlc3BvbnNlIiwiZGVmYXVsdCIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwic2V0IiwiUHJvbWlzZSIsImFsbCIsInNvbEVhcm5lZCIsIlpFUk8iLCJyZWNvcmQiLCJtYXJrZXRJbmRleCIsImlzVmFyaWFudCIsImRpcmVjdGlvbiIsInN1YiIsImFkZCIsIm1zb2xSYXRpbyIsImdldCIsIm1zb2xSYXRpb0JOIiwiQk4iLCJMQU1QT1JUU19QRVJfU09MIiwic29sQW1vdW50IiwibXVsIiwiZGl2IiwiTEFNUE9SVFNfUFJFQ0lTSU9OIiwiY3VycmVudE1TT0xUb2tlbkFtb3VudCIsImdldFRva2VuQW1vdW50IiwiY3VycmVudFNPTFRva2VuQW1vdW50IiwiY3VycmVudE1TT0xSYXRpbyIsImN1cnJlbnRNU09MUmF0aW9CTiIsIm1zb2xEZXBvc2l0QW1vdW50IiwibXNvbE1haW50ZW5hbmNlQXNzZXRXZWlnaHQiLCJzb2xCb3Jyb3dBbW91bnQiLCJzb2xNYWludGVuYW5jZUxpYWJpbGl0eVdlaWdodCIsIm1zb2xQcmljZVJhdGlvIiwibGlxdWlkYXRpb25EaXZlcmdlbmNlIiwibGlxdWlkYXRpb25QcmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/superStake.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/tiers.js":
/*!********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/tiers.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.perpTierIsAsSafeAs = exports.getSpotMarketTierNumber = exports.getPerpMarketTierNumber = void 0;\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nfunction getPerpMarketTierNumber(perpMarket) {\n    if ((0, types_1.isVariant)(perpMarket.contractTier, \"a\")) {\n        return 0;\n    } else if ((0, types_1.isVariant)(perpMarket.contractTier, \"b\")) {\n        return 1;\n    } else if ((0, types_1.isVariant)(perpMarket.contractTier, \"c\")) {\n        return 2;\n    } else if ((0, types_1.isVariant)(perpMarket.contractTier, \"speculative\")) {\n        return 3;\n    } else if ((0, types_1.isVariant)(perpMarket.contractTier, \"isolated\")) {\n        return 4;\n    } else {\n        return 5;\n    }\n}\nexports.getPerpMarketTierNumber = getPerpMarketTierNumber;\nfunction getSpotMarketTierNumber(spotMarket) {\n    if ((0, types_1.isVariant)(spotMarket.assetTier, \"collateral\")) {\n        return 0;\n    } else if ((0, types_1.isVariant)(spotMarket.assetTier, \"protected\")) {\n        return 1;\n    } else if ((0, types_1.isVariant)(spotMarket.assetTier, \"cross\")) {\n        return 2;\n    } else if ((0, types_1.isVariant)(spotMarket.assetTier, \"isolated\")) {\n        return 3;\n    } else if ((0, types_1.isVariant)(spotMarket.assetTier, \"unlisted\")) {\n        return 4;\n    } else {\n        return 5;\n    }\n}\nexports.getSpotMarketTierNumber = getSpotMarketTierNumber;\nfunction perpTierIsAsSafeAs(perpTier, otherPerpTier, otherSpotTier) {\n    const asSafeAsPerp = perpTier <= otherPerpTier;\n    const asSafeAsSpot = otherSpotTier === 4 || otherSpotTier >= 2 && perpTier <= 2;\n    return asSafeAsSpot && asSafeAsPerp;\n}\nexports.perpTierIsAsSafeAs = perpTierIsAsSafeAs;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3RpZXJzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQkFBMEIsR0FBR0EsK0JBQStCLEdBQUdBLCtCQUErQixHQUFHLEtBQUs7QUFDdEcsTUFBTUssVUFBVUMsbUJBQU9BLENBQUMsbUVBQVU7QUFDbEMsU0FBU0Ysd0JBQXdCRyxVQUFVO0lBQ3ZDLElBQUksQ0FBQyxHQUFHRixRQUFRRyxTQUFTLEVBQUVELFdBQVdFLFlBQVksRUFBRSxNQUFNO1FBQ3RELE9BQU87SUFDWCxPQUNLLElBQUksQ0FBQyxHQUFHSixRQUFRRyxTQUFTLEVBQUVELFdBQVdFLFlBQVksRUFBRSxNQUFNO1FBQzNELE9BQU87SUFDWCxPQUNLLElBQUksQ0FBQyxHQUFHSixRQUFRRyxTQUFTLEVBQUVELFdBQVdFLFlBQVksRUFBRSxNQUFNO1FBQzNELE9BQU87SUFDWCxPQUNLLElBQUksQ0FBQyxHQUFHSixRQUFRRyxTQUFTLEVBQUVELFdBQVdFLFlBQVksRUFBRSxnQkFBZ0I7UUFDckUsT0FBTztJQUNYLE9BQ0ssSUFBSSxDQUFDLEdBQUdKLFFBQVFHLFNBQVMsRUFBRUQsV0FBV0UsWUFBWSxFQUFFLGFBQWE7UUFDbEUsT0FBTztJQUNYLE9BQ0s7UUFDRCxPQUFPO0lBQ1g7QUFDSjtBQUNBVCwrQkFBK0IsR0FBR0k7QUFDbEMsU0FBU0Qsd0JBQXdCTyxVQUFVO0lBQ3ZDLElBQUksQ0FBQyxHQUFHTCxRQUFRRyxTQUFTLEVBQUVFLFdBQVdDLFNBQVMsRUFBRSxlQUFlO1FBQzVELE9BQU87SUFDWCxPQUNLLElBQUksQ0FBQyxHQUFHTixRQUFRRyxTQUFTLEVBQUVFLFdBQVdDLFNBQVMsRUFBRSxjQUFjO1FBQ2hFLE9BQU87SUFDWCxPQUNLLElBQUksQ0FBQyxHQUFHTixRQUFRRyxTQUFTLEVBQUVFLFdBQVdDLFNBQVMsRUFBRSxVQUFVO1FBQzVELE9BQU87SUFDWCxPQUNLLElBQUksQ0FBQyxHQUFHTixRQUFRRyxTQUFTLEVBQUVFLFdBQVdDLFNBQVMsRUFBRSxhQUFhO1FBQy9ELE9BQU87SUFDWCxPQUNLLElBQUksQ0FBQyxHQUFHTixRQUFRRyxTQUFTLEVBQUVFLFdBQVdDLFNBQVMsRUFBRSxhQUFhO1FBQy9ELE9BQU87SUFDWCxPQUNLO1FBQ0QsT0FBTztJQUNYO0FBQ0o7QUFDQVgsK0JBQStCLEdBQUdHO0FBQ2xDLFNBQVNELG1CQUFtQlUsUUFBUSxFQUFFQyxhQUFhLEVBQUVDLGFBQWE7SUFDOUQsTUFBTUMsZUFBZUgsWUFBWUM7SUFDakMsTUFBTUcsZUFBZUYsa0JBQWtCLEtBQU1BLGlCQUFpQixLQUFLRixZQUFZO0lBQy9FLE9BQU9JLGdCQUFnQkQ7QUFDM0I7QUFDQWYsMEJBQTBCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL21hdGgvdGllcnMuanM/YmQ0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMucGVycFRpZXJJc0FzU2FmZUFzID0gZXhwb3J0cy5nZXRTcG90TWFya2V0VGllck51bWJlciA9IGV4cG9ydHMuZ2V0UGVycE1hcmtldFRpZXJOdW1iZXIgPSB2b2lkIDA7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4uL3R5cGVzXCIpO1xuZnVuY3Rpb24gZ2V0UGVycE1hcmtldFRpZXJOdW1iZXIocGVycE1hcmtldCkge1xuICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHBlcnBNYXJrZXQuY29udHJhY3RUaWVyLCAnYScpKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHBlcnBNYXJrZXQuY29udHJhY3RUaWVyLCAnYicpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICBlbHNlIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHBlcnBNYXJrZXQuY29udHJhY3RUaWVyLCAnYycpKSB7XG4gICAgICAgIHJldHVybiAyO1xuICAgIH1cbiAgICBlbHNlIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHBlcnBNYXJrZXQuY29udHJhY3RUaWVyLCAnc3BlY3VsYXRpdmUnKSkge1xuICAgICAgICByZXR1cm4gMztcbiAgICB9XG4gICAgZWxzZSBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShwZXJwTWFya2V0LmNvbnRyYWN0VGllciwgJ2lzb2xhdGVkJykpIHtcbiAgICAgICAgcmV0dXJuIDQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gNTtcbiAgICB9XG59XG5leHBvcnRzLmdldFBlcnBNYXJrZXRUaWVyTnVtYmVyID0gZ2V0UGVycE1hcmtldFRpZXJOdW1iZXI7XG5mdW5jdGlvbiBnZXRTcG90TWFya2V0VGllck51bWJlcihzcG90TWFya2V0KSB7XG4gICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3BvdE1hcmtldC5hc3NldFRpZXIsICdjb2xsYXRlcmFsJykpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3BvdE1hcmtldC5hc3NldFRpZXIsICdwcm90ZWN0ZWQnKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShzcG90TWFya2V0LmFzc2V0VGllciwgJ2Nyb3NzJykpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgfVxuICAgIGVsc2UgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3BvdE1hcmtldC5hc3NldFRpZXIsICdpc29sYXRlZCcpKSB7XG4gICAgICAgIHJldHVybiAzO1xuICAgIH1cbiAgICBlbHNlIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHNwb3RNYXJrZXQuYXNzZXRUaWVyLCAndW5saXN0ZWQnKSkge1xuICAgICAgICByZXR1cm4gNDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiA1O1xuICAgIH1cbn1cbmV4cG9ydHMuZ2V0U3BvdE1hcmtldFRpZXJOdW1iZXIgPSBnZXRTcG90TWFya2V0VGllck51bWJlcjtcbmZ1bmN0aW9uIHBlcnBUaWVySXNBc1NhZmVBcyhwZXJwVGllciwgb3RoZXJQZXJwVGllciwgb3RoZXJTcG90VGllcikge1xuICAgIGNvbnN0IGFzU2FmZUFzUGVycCA9IHBlcnBUaWVyIDw9IG90aGVyUGVycFRpZXI7XG4gICAgY29uc3QgYXNTYWZlQXNTcG90ID0gb3RoZXJTcG90VGllciA9PT0gNCB8fCAob3RoZXJTcG90VGllciA+PSAyICYmIHBlcnBUaWVyIDw9IDIpO1xuICAgIHJldHVybiBhc1NhZmVBc1Nwb3QgJiYgYXNTYWZlQXNQZXJwO1xufVxuZXhwb3J0cy5wZXJwVGllcklzQXNTYWZlQXMgPSBwZXJwVGllcklzQXNTYWZlQXM7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJwZXJwVGllcklzQXNTYWZlQXMiLCJnZXRTcG90TWFya2V0VGllck51bWJlciIsImdldFBlcnBNYXJrZXRUaWVyTnVtYmVyIiwidHlwZXNfMSIsInJlcXVpcmUiLCJwZXJwTWFya2V0IiwiaXNWYXJpYW50IiwiY29udHJhY3RUaWVyIiwic3BvdE1hcmtldCIsImFzc2V0VGllciIsInBlcnBUaWVyIiwib3RoZXJQZXJwVGllciIsIm90aGVyU3BvdFRpZXIiLCJhc1NhZmVBc1BlcnAiLCJhc1NhZmVBc1Nwb3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/tiers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/trade.js":
/*!********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/trade.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.calculateEstimatedEntryPriceWithL2 = exports.calculateEstimatedSpotEntryPrice = exports.calculateEstimatedPerpEntryPrice = exports.calculateTargetPriceTrade = exports.calculateTradeAcquiredAmounts = exports.calculateTradeSlippage = void 0;\nconst types_1 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst assert_1 = __webpack_require__(/*! ../assert/assert */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/assert/assert.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst market_1 = __webpack_require__(/*! ./market */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/market.js\");\nconst amm_1 = __webpack_require__(/*! ./amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/utils.js\");\nconst types_2 = __webpack_require__(/*! ../types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst MAXPCT = new anchor_1.BN(1000); //percentage units are [0,1000] => [0,1]\n/**\n * Calculates avg/max slippage (price impact) for candidate trade\n *\n * @deprecated use calculateEstimatedPerpEntryPrice instead\n *\n * @param direction\n * @param amount\n * @param market\n * @param inputAssetType which asset is being traded\n * @param useSpread whether to consider spread with calculating slippage\n * @return [pctAvgSlippage, pctMaxSlippage, entryPrice, newPrice]\n *\n * 'pctAvgSlippage' =>  the percentage change to entryPrice (average est slippage in execution) : Precision PRICE_PRECISION\n *\n * 'pctMaxSlippage' =>  the percentage change to maxPrice (highest est slippage in execution) : Precision PRICE_PRECISION\n *\n * 'entryPrice' => the average price of the trade : Precision PRICE_PRECISION\n *\n * 'newPrice' => the price of the asset after the trade : Precision PRICE_PRECISION\n */ function calculateTradeSlippage(direction, amount, market, inputAssetType = \"quote\", oraclePriceData, useSpread = true) {\n    let oldPrice;\n    if (useSpread && market.amm.baseSpread > 0) {\n        if ((0, types_2.isVariant)(direction, \"long\")) {\n            oldPrice = (0, market_1.calculateAskPrice)(market, oraclePriceData);\n        } else {\n            oldPrice = (0, market_1.calculateBidPrice)(market, oraclePriceData);\n        }\n    } else {\n        oldPrice = (0, market_1.calculateReservePrice)(market, oraclePriceData);\n    }\n    if (amount.eq(numericConstants_1.ZERO)) {\n        return [\n            numericConstants_1.ZERO,\n            numericConstants_1.ZERO,\n            oldPrice,\n            oldPrice\n        ];\n    }\n    const [acquiredBaseReserve, acquiredQuoteReserve, acquiredQuoteAssetAmount] = calculateTradeAcquiredAmounts(direction, amount, market, inputAssetType, oraclePriceData, useSpread);\n    const entryPrice = acquiredQuoteAssetAmount.mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).mul(numericConstants_1.PRICE_PRECISION).div(acquiredBaseReserve.abs());\n    let amm;\n    if (useSpread && market.amm.baseSpread > 0) {\n        const { baseAssetReserve, quoteAssetReserve, sqrtK, newPeg } = (0, amm_1.calculateUpdatedAMMSpreadReserves)(market.amm, direction, oraclePriceData);\n        amm = {\n            baseAssetReserve,\n            quoteAssetReserve,\n            sqrtK: sqrtK,\n            pegMultiplier: newPeg\n        };\n    } else {\n        amm = market.amm;\n    }\n    const newPrice = (0, amm_1.calculatePrice)(amm.baseAssetReserve.sub(acquiredBaseReserve), amm.quoteAssetReserve.sub(acquiredQuoteReserve), amm.pegMultiplier);\n    if (direction == types_1.PositionDirection.SHORT) {\n        (0, assert_1.assert)(newPrice.lte(oldPrice));\n    } else {\n        (0, assert_1.assert)(oldPrice.lte(newPrice));\n    }\n    const pctMaxSlippage = newPrice.sub(oldPrice).mul(numericConstants_1.PRICE_PRECISION).div(oldPrice).abs();\n    const pctAvgSlippage = entryPrice.sub(oldPrice).mul(numericConstants_1.PRICE_PRECISION).div(oldPrice).abs();\n    return [\n        pctAvgSlippage,\n        pctMaxSlippage,\n        entryPrice,\n        newPrice\n    ];\n}\nexports.calculateTradeSlippage = calculateTradeSlippage;\n/**\n * Calculates acquired amounts for trade executed\n * @param direction\n * @param amount\n * @param market\n * @param inputAssetType\n * @param useSpread\n * @return\n * \t| 'acquiredBase' =>  positive/negative change in user's base : BN AMM_RESERVE_PRECISION\n * \t| 'acquiredQuote' => positive/negative change in user's quote : BN TODO-PRECISION\n */ function calculateTradeAcquiredAmounts(direction, amount, market, inputAssetType = \"quote\", oraclePriceData, useSpread = true) {\n    if (amount.eq(numericConstants_1.ZERO)) {\n        return [\n            numericConstants_1.ZERO,\n            numericConstants_1.ZERO,\n            numericConstants_1.ZERO\n        ];\n    }\n    const swapDirection = (0, amm_1.getSwapDirection)(inputAssetType, direction);\n    let amm;\n    if (useSpread && market.amm.baseSpread > 0) {\n        const { baseAssetReserve, quoteAssetReserve, sqrtK, newPeg } = (0, amm_1.calculateUpdatedAMMSpreadReserves)(market.amm, direction, oraclePriceData);\n        amm = {\n            baseAssetReserve,\n            quoteAssetReserve,\n            sqrtK: sqrtK,\n            pegMultiplier: newPeg\n        };\n    } else {\n        amm = market.amm;\n    }\n    const [newQuoteAssetReserve, newBaseAssetReserve] = (0, amm_1.calculateAmmReservesAfterSwap)(amm, inputAssetType, amount, swapDirection);\n    const acquiredBase = amm.baseAssetReserve.sub(newBaseAssetReserve);\n    const acquiredQuote = amm.quoteAssetReserve.sub(newQuoteAssetReserve);\n    const acquiredQuoteAssetAmount = (0, amm_1.calculateQuoteAssetAmountSwapped)(acquiredQuote.abs(), amm.pegMultiplier, swapDirection);\n    return [\n        acquiredBase,\n        acquiredQuote,\n        acquiredQuoteAssetAmount\n    ];\n}\nexports.calculateTradeAcquiredAmounts = calculateTradeAcquiredAmounts;\n/**\n * calculateTargetPriceTrade\n * simple function for finding arbitraging trades\n *\n * @deprecated\n *\n * @param market\n * @param targetPrice\n * @param pct optional default is 100% gap filling, can set smaller.\n * @param outputAssetType which asset to trade.\n * @param useSpread whether or not to consider the spread when calculating the trade size\n * @returns trade direction/size in order to push price to a targetPrice,\n *\n * [\n *   direction => direction of trade required, PositionDirection\n *   tradeSize => size of trade required, TODO-PRECISION\n *   entryPrice => the entry price for the trade, PRICE_PRECISION\n *   targetPrice => the target price PRICE_PRECISION\n * ]\n */ function calculateTargetPriceTrade(market, targetPrice, pct = MAXPCT, outputAssetType = \"quote\", oraclePriceData, useSpread = true) {\n    (0, assert_1.assert)(market.amm.baseAssetReserve.gt(numericConstants_1.ZERO));\n    (0, assert_1.assert)(targetPrice.gt(numericConstants_1.ZERO));\n    (0, assert_1.assert)(pct.lte(MAXPCT) && pct.gt(numericConstants_1.ZERO));\n    const reservePriceBefore = (0, market_1.calculateReservePrice)(market, oraclePriceData);\n    const bidPriceBefore = (0, market_1.calculateBidPrice)(market, oraclePriceData);\n    const askPriceBefore = (0, market_1.calculateAskPrice)(market, oraclePriceData);\n    let direction;\n    if (targetPrice.gt(reservePriceBefore)) {\n        const priceGap = targetPrice.sub(reservePriceBefore);\n        const priceGapScaled = priceGap.mul(pct).div(MAXPCT);\n        targetPrice = reservePriceBefore.add(priceGapScaled);\n        direction = types_1.PositionDirection.LONG;\n    } else {\n        const priceGap = reservePriceBefore.sub(targetPrice);\n        const priceGapScaled = priceGap.mul(pct).div(MAXPCT);\n        targetPrice = reservePriceBefore.sub(priceGapScaled);\n        direction = types_1.PositionDirection.SHORT;\n    }\n    let tradeSize;\n    let baseSize;\n    let baseAssetReserveBefore;\n    let quoteAssetReserveBefore;\n    let peg = market.amm.pegMultiplier;\n    if (useSpread && market.amm.baseSpread > 0) {\n        const { baseAssetReserve, quoteAssetReserve, newPeg } = (0, amm_1.calculateUpdatedAMMSpreadReserves)(market.amm, direction, oraclePriceData);\n        baseAssetReserveBefore = baseAssetReserve;\n        quoteAssetReserveBefore = quoteAssetReserve;\n        peg = newPeg;\n    } else {\n        baseAssetReserveBefore = market.amm.baseAssetReserve;\n        quoteAssetReserveBefore = market.amm.quoteAssetReserve;\n    }\n    const invariant = market.amm.sqrtK.mul(market.amm.sqrtK);\n    const k = invariant.mul(numericConstants_1.PRICE_PRECISION);\n    let baseAssetReserveAfter;\n    let quoteAssetReserveAfter;\n    const biasModifier = new anchor_1.BN(1);\n    let markPriceAfter;\n    if (useSpread && targetPrice.lt(askPriceBefore) && targetPrice.gt(bidPriceBefore)) {\n        // no trade, market is at target\n        if (reservePriceBefore.gt(targetPrice)) {\n            direction = types_1.PositionDirection.SHORT;\n        } else {\n            direction = types_1.PositionDirection.LONG;\n        }\n        tradeSize = numericConstants_1.ZERO;\n        return [\n            direction,\n            tradeSize,\n            targetPrice,\n            targetPrice\n        ];\n    } else if (reservePriceBefore.gt(targetPrice)) {\n        // overestimate y2\n        baseAssetReserveAfter = (0, utils_1.squareRootBN)(k.div(targetPrice).mul(peg).div(numericConstants_1.PEG_PRECISION).sub(biasModifier)).sub(new anchor_1.BN(1));\n        quoteAssetReserveAfter = k.div(numericConstants_1.PRICE_PRECISION).div(baseAssetReserveAfter);\n        markPriceAfter = (0, amm_1.calculatePrice)(baseAssetReserveAfter, quoteAssetReserveAfter, peg);\n        direction = types_1.PositionDirection.SHORT;\n        tradeSize = quoteAssetReserveBefore.sub(quoteAssetReserveAfter).mul(peg).div(numericConstants_1.PEG_PRECISION).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO);\n        baseSize = baseAssetReserveAfter.sub(baseAssetReserveBefore);\n    } else if (reservePriceBefore.lt(targetPrice)) {\n        // underestimate y2\n        baseAssetReserveAfter = (0, utils_1.squareRootBN)(k.div(targetPrice).mul(peg).div(numericConstants_1.PEG_PRECISION).add(biasModifier)).add(new anchor_1.BN(1));\n        quoteAssetReserveAfter = k.div(numericConstants_1.PRICE_PRECISION).div(baseAssetReserveAfter);\n        markPriceAfter = (0, amm_1.calculatePrice)(baseAssetReserveAfter, quoteAssetReserveAfter, peg);\n        direction = types_1.PositionDirection.LONG;\n        tradeSize = quoteAssetReserveAfter.sub(quoteAssetReserveBefore).mul(peg).div(numericConstants_1.PEG_PRECISION).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO);\n        baseSize = baseAssetReserveBefore.sub(baseAssetReserveAfter);\n    } else {\n        // no trade, market is at target\n        direction = types_1.PositionDirection.LONG;\n        tradeSize = numericConstants_1.ZERO;\n        return [\n            direction,\n            tradeSize,\n            targetPrice,\n            targetPrice\n        ];\n    }\n    let tp1 = targetPrice;\n    let tp2 = markPriceAfter;\n    let originalDiff = targetPrice.sub(reservePriceBefore);\n    if (direction == types_1.PositionDirection.SHORT) {\n        tp1 = markPriceAfter;\n        tp2 = targetPrice;\n        originalDiff = reservePriceBefore.sub(targetPrice);\n    }\n    const entryPrice = tradeSize.mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).mul(numericConstants_1.PRICE_PRECISION).div(baseSize.abs());\n    (0, assert_1.assert)(tp1.sub(tp2).lte(originalDiff), \"Target Price Calculation incorrect\");\n    (0, assert_1.assert)(tp2.lte(tp1) || tp2.sub(tp1).abs() < 100000, \"Target Price Calculation incorrect\" + tp2.toString() + \">=\" + tp1.toString() + \"err: \" + tp2.sub(tp1).abs().toString());\n    if (outputAssetType == \"quote\") {\n        return [\n            direction,\n            tradeSize,\n            entryPrice,\n            targetPrice\n        ];\n    } else {\n        return [\n            direction,\n            baseSize,\n            entryPrice,\n            targetPrice\n        ];\n    }\n}\nexports.calculateTargetPriceTrade = calculateTargetPriceTrade;\n/**\n * Calculates the estimated entry price and price impact of order, in base or quote\n * Price impact is based on the difference between the entry price and the best bid/ask price (whether it's dlob or vamm)\n *\n * @param assetType\n * @param amount\n * @param direction\n * @param market\n * @param oraclePriceData\n * @param dlob\n * @param slot\n * @param usersToSkip\n */ function calculateEstimatedPerpEntryPrice(assetType, amount, direction, market, oraclePriceData, dlob, slot, usersToSkip = new Map()) {\n    if (amount.eq(numericConstants_1.ZERO)) {\n        return {\n            entryPrice: numericConstants_1.ZERO,\n            priceImpact: numericConstants_1.ZERO,\n            bestPrice: numericConstants_1.ZERO,\n            worstPrice: numericConstants_1.ZERO,\n            baseFilled: numericConstants_1.ZERO,\n            quoteFilled: numericConstants_1.ZERO\n        };\n    }\n    const takerIsLong = (0, types_2.isVariant)(direction, \"long\");\n    const limitOrders = dlob[takerIsLong ? \"getMakerLimitAsks\" : \"getMakerLimitBids\"](market.marketIndex, slot, types_1.MarketType.PERP, oraclePriceData, takerIsLong ? (0, market_1.calculateBidPrice)(market, oraclePriceData) : (0, market_1.calculateAskPrice)(market, oraclePriceData));\n    const swapDirection = (0, amm_1.getSwapDirection)(assetType, direction);\n    const { baseAssetReserve, quoteAssetReserve, sqrtK, newPeg } = (0, amm_1.calculateUpdatedAMMSpreadReserves)(market.amm, direction, oraclePriceData);\n    const amm = {\n        baseAssetReserve,\n        quoteAssetReserve,\n        sqrtK: sqrtK,\n        pegMultiplier: newPeg\n    };\n    const [ammBids, ammAsks] = (0, amm_1.calculateMarketOpenBidAsk)(market.amm.baseAssetReserve, market.amm.minBaseAssetReserve, market.amm.maxBaseAssetReserve, market.amm.orderStepSize);\n    let ammLiquidity;\n    if (assetType === \"base\") {\n        ammLiquidity = takerIsLong ? ammAsks.abs() : ammBids;\n    } else {\n        const [afterSwapQuoteReserves, _] = (0, amm_1.calculateAmmReservesAfterSwap)(amm, \"base\", takerIsLong ? ammAsks.abs() : ammBids, (0, amm_1.getSwapDirection)(\"base\", direction));\n        ammLiquidity = (0, amm_1.calculateQuoteAssetAmountSwapped)(amm.quoteAssetReserve.sub(afterSwapQuoteReserves).abs(), amm.pegMultiplier, swapDirection);\n    }\n    const invariant = amm.sqrtK.mul(amm.sqrtK);\n    let bestPrice = (0, amm_1.calculatePrice)(amm.baseAssetReserve, amm.quoteAssetReserve, amm.pegMultiplier);\n    let cumulativeBaseFilled = numericConstants_1.ZERO;\n    let cumulativeQuoteFilled = numericConstants_1.ZERO;\n    let limitOrder = limitOrders.next().value;\n    if (limitOrder) {\n        const limitOrderPrice = limitOrder.getPrice(oraclePriceData, slot);\n        bestPrice = takerIsLong ? anchor_1.BN.min(limitOrderPrice, bestPrice) : anchor_1.BN.max(limitOrderPrice, bestPrice);\n    }\n    let worstPrice = bestPrice;\n    if (assetType === \"base\") {\n        while(!cumulativeBaseFilled.eq(amount) && (ammLiquidity.gt(numericConstants_1.ZERO) || limitOrder)){\n            const limitOrderPrice = limitOrder === null || limitOrder === void 0 ? void 0 : limitOrder.getPrice(oraclePriceData, slot);\n            let maxAmmFill;\n            if (limitOrderPrice) {\n                const newBaseReserves = (0, utils_1.squareRootBN)(invariant.mul(numericConstants_1.PRICE_PRECISION).mul(amm.pegMultiplier).div(limitOrderPrice).div(numericConstants_1.PEG_PRECISION));\n                // will be zero if the limit order price is better than the amm price\n                maxAmmFill = takerIsLong ? amm.baseAssetReserve.sub(newBaseReserves) : newBaseReserves.sub(amm.baseAssetReserve);\n            } else {\n                maxAmmFill = amount.sub(cumulativeBaseFilled);\n            }\n            maxAmmFill = anchor_1.BN.min(maxAmmFill, ammLiquidity);\n            if (maxAmmFill.gt(numericConstants_1.ZERO)) {\n                const baseFilled = anchor_1.BN.min(amount.sub(cumulativeBaseFilled), maxAmmFill);\n                const [afterSwapQuoteReserves, afterSwapBaseReserves] = (0, amm_1.calculateAmmReservesAfterSwap)(amm, \"base\", baseFilled, swapDirection);\n                ammLiquidity = ammLiquidity.sub(baseFilled);\n                const quoteFilled = (0, amm_1.calculateQuoteAssetAmountSwapped)(amm.quoteAssetReserve.sub(afterSwapQuoteReserves).abs(), amm.pegMultiplier, swapDirection);\n                cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n                cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n                amm.baseAssetReserve = afterSwapBaseReserves;\n                amm.quoteAssetReserve = afterSwapQuoteReserves;\n                worstPrice = (0, amm_1.calculatePrice)(amm.baseAssetReserve, amm.quoteAssetReserve, amm.pegMultiplier);\n                if (cumulativeBaseFilled.eq(amount)) {\n                    break;\n                }\n            }\n            if (!limitOrder) {\n                continue;\n            }\n            if (usersToSkip.has(limitOrder.userAccount)) {\n                continue;\n            }\n            const baseFilled = anchor_1.BN.min(limitOrder.order.baseAssetAmount.sub(limitOrder.order.baseAssetAmountFilled), amount.sub(cumulativeBaseFilled));\n            const quoteFilled = baseFilled.mul(limitOrderPrice).div(numericConstants_1.BASE_PRECISION);\n            cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n            cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n            worstPrice = limitOrderPrice;\n            if (cumulativeBaseFilled.eq(amount)) {\n                break;\n            }\n            limitOrder = limitOrders.next().value;\n        }\n    } else {\n        while(!cumulativeQuoteFilled.eq(amount) && (ammLiquidity.gt(numericConstants_1.ZERO) || limitOrder)){\n            const limitOrderPrice = limitOrder === null || limitOrder === void 0 ? void 0 : limitOrder.getPrice(oraclePriceData, slot);\n            let maxAmmFill;\n            if (limitOrderPrice) {\n                const newQuoteReserves = (0, utils_1.squareRootBN)(invariant.mul(numericConstants_1.PEG_PRECISION).mul(limitOrderPrice).div(amm.pegMultiplier).div(numericConstants_1.PRICE_PRECISION));\n                // will be zero if the limit order price is better than the amm price\n                maxAmmFill = takerIsLong ? newQuoteReserves.sub(amm.quoteAssetReserve) : amm.quoteAssetReserve.sub(newQuoteReserves);\n            } else {\n                maxAmmFill = amount.sub(cumulativeQuoteFilled);\n            }\n            maxAmmFill = anchor_1.BN.min(maxAmmFill, ammLiquidity);\n            if (maxAmmFill.gt(numericConstants_1.ZERO)) {\n                const quoteFilled = anchor_1.BN.min(amount.sub(cumulativeQuoteFilled), maxAmmFill);\n                const [afterSwapQuoteReserves, afterSwapBaseReserves] = (0, amm_1.calculateAmmReservesAfterSwap)(amm, \"quote\", quoteFilled, swapDirection);\n                ammLiquidity = ammLiquidity.sub(quoteFilled);\n                const baseFilled = afterSwapBaseReserves.sub(amm.baseAssetReserve).abs();\n                cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n                cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n                amm.baseAssetReserve = afterSwapBaseReserves;\n                amm.quoteAssetReserve = afterSwapQuoteReserves;\n                worstPrice = (0, amm_1.calculatePrice)(amm.baseAssetReserve, amm.quoteAssetReserve, amm.pegMultiplier);\n                if (cumulativeQuoteFilled.eq(amount)) {\n                    break;\n                }\n            }\n            if (!limitOrder) {\n                continue;\n            }\n            if (usersToSkip.has(limitOrder.userAccount)) {\n                continue;\n            }\n            const quoteFilled = anchor_1.BN.min(limitOrder.order.baseAssetAmount.sub(limitOrder.order.baseAssetAmountFilled).mul(limitOrderPrice).div(numericConstants_1.BASE_PRECISION), amount.sub(cumulativeQuoteFilled));\n            const baseFilled = quoteFilled.mul(numericConstants_1.BASE_PRECISION).div(limitOrderPrice);\n            cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n            cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n            worstPrice = limitOrderPrice;\n            if (cumulativeQuoteFilled.eq(amount)) {\n                break;\n            }\n            limitOrder = limitOrders.next().value;\n        }\n    }\n    const entryPrice = cumulativeQuoteFilled.mul(numericConstants_1.BASE_PRECISION).div(cumulativeBaseFilled);\n    const priceImpact = entryPrice.sub(bestPrice).mul(numericConstants_1.PRICE_PRECISION).div(bestPrice).abs();\n    return {\n        entryPrice,\n        priceImpact,\n        bestPrice,\n        worstPrice,\n        baseFilled: cumulativeBaseFilled,\n        quoteFilled: cumulativeQuoteFilled\n    };\n}\nexports.calculateEstimatedPerpEntryPrice = calculateEstimatedPerpEntryPrice;\n/**\n * Calculates the estimated entry price and price impact of order, in base or quote\n * Price impact is based on the difference between the entry price and the best bid/ask price (whether it's dlob or serum)\n *\n * @param assetType\n * @param amount\n * @param direction\n * @param market\n * @param oraclePriceData\n * @param dlob\n * @param serumBids\n * @param serumAsks\n * @param slot\n * @param usersToSkip\n */ function calculateEstimatedSpotEntryPrice(assetType, amount, direction, market, oraclePriceData, dlob, serumBids, serumAsks, slot, usersToSkip = new Map()) {\n    if (amount.eq(numericConstants_1.ZERO)) {\n        return {\n            entryPrice: numericConstants_1.ZERO,\n            priceImpact: numericConstants_1.ZERO,\n            bestPrice: numericConstants_1.ZERO,\n            worstPrice: numericConstants_1.ZERO,\n            baseFilled: numericConstants_1.ZERO,\n            quoteFilled: numericConstants_1.ZERO\n        };\n    }\n    const basePrecision = new anchor_1.BN(Math.pow(10, market.decimals));\n    const takerIsLong = (0, types_2.isVariant)(direction, \"long\");\n    const dlobLimitOrders = dlob[takerIsLong ? \"getMakerLimitAsks\" : \"getMakerLimitBids\"](market.marketIndex, slot, types_1.MarketType.SPOT, oraclePriceData);\n    const serumLimitOrders = takerIsLong ? serumAsks.getL2(100) : serumBids.getL2(100);\n    let cumulativeBaseFilled = numericConstants_1.ZERO;\n    let cumulativeQuoteFilled = numericConstants_1.ZERO;\n    let dlobLimitOrder = dlobLimitOrders.next().value;\n    let serumLimitOrder = serumLimitOrders.shift();\n    const dlobLimitOrderPrice = dlobLimitOrder === null || dlobLimitOrder === void 0 ? void 0 : dlobLimitOrder.getPrice(oraclePriceData, slot);\n    const serumLimitOrderPrice = serumLimitOrder ? new anchor_1.BN(serumLimitOrder[0] * numericConstants_1.PRICE_PRECISION.toNumber()) : undefined;\n    const bestPrice = takerIsLong ? anchor_1.BN.min(serumLimitOrderPrice || numericConstants_1.BN_MAX, dlobLimitOrderPrice || numericConstants_1.BN_MAX) : anchor_1.BN.max(serumLimitOrderPrice || numericConstants_1.ZERO, dlobLimitOrderPrice || numericConstants_1.ZERO);\n    let worstPrice = bestPrice;\n    if (assetType === \"base\") {\n        while(!cumulativeBaseFilled.eq(amount) && (dlobLimitOrder || serumLimitOrder)){\n            const dlobLimitOrderPrice = dlobLimitOrder === null || dlobLimitOrder === void 0 ? void 0 : dlobLimitOrder.getPrice(oraclePriceData, slot);\n            const serumLimitOrderPrice = serumLimitOrder ? new anchor_1.BN(serumLimitOrder[0] * numericConstants_1.PRICE_PRECISION.toNumber()) : undefined;\n            const useSerum = takerIsLong ? (serumLimitOrderPrice || numericConstants_1.BN_MAX).lt(dlobLimitOrderPrice || numericConstants_1.BN_MAX) : (serumLimitOrderPrice || numericConstants_1.ZERO).gt(dlobLimitOrderPrice || numericConstants_1.ZERO);\n            if (!useSerum) {\n                if (dlobLimitOrder && usersToSkip.has(dlobLimitOrder.userAccount)) {\n                    continue;\n                }\n                const baseFilled = anchor_1.BN.min(dlobLimitOrder.order.baseAssetAmount.sub(dlobLimitOrder.order.baseAssetAmountFilled), amount.sub(cumulativeBaseFilled));\n                const quoteFilled = baseFilled.mul(dlobLimitOrderPrice).div(basePrecision);\n                cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n                cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n                worstPrice = dlobLimitOrderPrice;\n                dlobLimitOrder = dlobLimitOrders.next().value;\n            } else {\n                const baseFilled = anchor_1.BN.min(new anchor_1.BN(serumLimitOrder[1] * basePrecision.toNumber()), amount.sub(cumulativeBaseFilled));\n                const quoteFilled = baseFilled.mul(serumLimitOrderPrice).div(basePrecision);\n                cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n                cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n                worstPrice = serumLimitOrderPrice;\n                serumLimitOrder = serumLimitOrders.shift();\n            }\n        }\n    } else {\n        while(!cumulativeQuoteFilled.eq(amount) && (dlobLimitOrder || serumLimitOrder)){\n            const dlobLimitOrderPrice = dlobLimitOrder === null || dlobLimitOrder === void 0 ? void 0 : dlobLimitOrder.getPrice(oraclePriceData, slot);\n            const serumLimitOrderPrice = serumLimitOrder ? new anchor_1.BN(serumLimitOrder[0] * numericConstants_1.PRICE_PRECISION.toNumber()) : undefined;\n            const useSerum = takerIsLong ? (serumLimitOrderPrice || numericConstants_1.BN_MAX).lt(dlobLimitOrderPrice || numericConstants_1.BN_MAX) : (serumLimitOrderPrice || numericConstants_1.ZERO).gt(dlobLimitOrderPrice || numericConstants_1.ZERO);\n            if (!useSerum) {\n                if (dlobLimitOrder && usersToSkip.has(dlobLimitOrder.userAccount)) {\n                    continue;\n                }\n                const quoteFilled = anchor_1.BN.min(dlobLimitOrder.order.baseAssetAmount.sub(dlobLimitOrder.order.baseAssetAmountFilled).mul(dlobLimitOrderPrice).div(basePrecision), amount.sub(cumulativeQuoteFilled));\n                const baseFilled = quoteFilled.mul(basePrecision).div(dlobLimitOrderPrice);\n                cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n                cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n                worstPrice = dlobLimitOrderPrice;\n                dlobLimitOrder = dlobLimitOrders.next().value;\n            } else {\n                const serumOrderBaseAmount = new anchor_1.BN(serumLimitOrder[1] * basePrecision.toNumber());\n                const quoteFilled = anchor_1.BN.min(serumOrderBaseAmount.mul(serumLimitOrderPrice).div(basePrecision), amount.sub(cumulativeQuoteFilled));\n                const baseFilled = quoteFilled.mul(basePrecision).div(serumLimitOrderPrice);\n                cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n                cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n                worstPrice = serumLimitOrderPrice;\n                serumLimitOrder = serumLimitOrders.shift();\n            }\n        }\n    }\n    const entryPrice = cumulativeQuoteFilled.mul(basePrecision).div(cumulativeBaseFilled);\n    const priceImpact = entryPrice.sub(bestPrice).mul(numericConstants_1.PRICE_PRECISION).div(bestPrice).abs();\n    return {\n        entryPrice,\n        priceImpact,\n        bestPrice,\n        worstPrice,\n        baseFilled: cumulativeBaseFilled,\n        quoteFilled: cumulativeQuoteFilled\n    };\n}\nexports.calculateEstimatedSpotEntryPrice = calculateEstimatedSpotEntryPrice;\nfunction calculateEstimatedEntryPriceWithL2(assetType, amount, direction, basePrecision, l2) {\n    const takerIsLong = (0, types_2.isVariant)(direction, \"long\");\n    let cumulativeBaseFilled = numericConstants_1.ZERO;\n    let cumulativeQuoteFilled = numericConstants_1.ZERO;\n    const levels = [\n        ...takerIsLong ? l2.asks : l2.bids\n    ];\n    let nextLevel = levels.shift();\n    let bestPrice;\n    let worstPrice;\n    if (nextLevel) {\n        bestPrice = nextLevel.price;\n        worstPrice = nextLevel.price;\n    } else {\n        bestPrice = takerIsLong ? numericConstants_1.BN_MAX : numericConstants_1.ZERO;\n        worstPrice = bestPrice;\n    }\n    if (assetType === \"base\") {\n        while(!cumulativeBaseFilled.eq(amount) && nextLevel){\n            const price = nextLevel.price;\n            const size = nextLevel.size;\n            worstPrice = price;\n            const baseFilled = anchor_1.BN.min(size, amount.sub(cumulativeBaseFilled));\n            const quoteFilled = baseFilled.mul(price).div(basePrecision);\n            cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n            cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n            nextLevel = levels.shift();\n        }\n    } else {\n        while(!cumulativeQuoteFilled.eq(amount) && nextLevel){\n            const price = nextLevel.price;\n            const size = nextLevel.size;\n            worstPrice = price;\n            const quoteFilled = anchor_1.BN.min(size.mul(price).div(basePrecision), amount.sub(cumulativeQuoteFilled));\n            const baseFilled = quoteFilled.mul(basePrecision).div(price);\n            cumulativeBaseFilled = cumulativeBaseFilled.add(baseFilled);\n            cumulativeQuoteFilled = cumulativeQuoteFilled.add(quoteFilled);\n            nextLevel = levels.shift();\n        }\n    }\n    const entryPrice = cumulativeQuoteFilled.mul(basePrecision).div(cumulativeBaseFilled);\n    const priceImpact = entryPrice.sub(bestPrice).mul(numericConstants_1.PRICE_PRECISION).div(bestPrice).abs();\n    return {\n        entryPrice,\n        priceImpact,\n        bestPrice,\n        worstPrice,\n        baseFilled: cumulativeBaseFilled,\n        quoteFilled: cumulativeQuoteFilled\n    };\n}\nexports.calculateEstimatedEntryPriceWithL2 = calculateEstimatedEntryPriceWithL2;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3RyYWRlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCwwQ0FBMEMsR0FBR0Esd0NBQXdDLEdBQUdBLHdDQUF3QyxHQUFHQSxpQ0FBaUMsR0FBR0EscUNBQXFDLEdBQUdBLDhCQUE4QixHQUFHLEtBQUs7QUFDclAsTUFBTVEsVUFBVUMsbUJBQU9BLENBQUMsbUVBQVU7QUFDbEMsTUFBTUMsV0FBV0QsbUJBQU9BLENBQUMsbUZBQW1CO0FBQzVDLE1BQU1FLFdBQVdGLG1CQUFPQSxDQUFDLG1GQUFrQjtBQUMzQyxNQUFNRyxxQkFBcUJILG1CQUFPQSxDQUFDLDZHQUErQjtBQUNsRSxNQUFNSSxXQUFXSixtQkFBT0EsQ0FBQyx5RUFBVTtBQUNuQyxNQUFNSyxRQUFRTCxtQkFBT0EsQ0FBQyxtRUFBTztBQUM3QixNQUFNTSxVQUFVTixtQkFBT0EsQ0FBQyx1RUFBUztBQUNqQyxNQUFNTyxVQUFVUCxtQkFBT0EsQ0FBQyxtRUFBVTtBQUNsQyxNQUFNUSxTQUFTLElBQUlQLFNBQVNRLEVBQUUsQ0FBQyxPQUFPLHdDQUF3QztBQUM5RTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW1CQyxHQUNELFNBQVNYLHVCQUF1QlksU0FBUyxFQUFFQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsaUJBQWlCLE9BQU8sRUFBRUMsZUFBZSxFQUFFQyxZQUFZLElBQUk7SUFDbEgsSUFBSUM7SUFDSixJQUFJRCxhQUFhSCxPQUFPSyxHQUFHLENBQUNDLFVBQVUsR0FBRyxHQUFHO1FBQ3hDLElBQUksQ0FBQyxHQUFHWCxRQUFRWSxTQUFTLEVBQUVULFdBQVcsU0FBUztZQUMzQ00sV0FBVyxDQUFDLEdBQUdaLFNBQVNnQixpQkFBaUIsRUFBRVIsUUFBUUU7UUFDdkQsT0FDSztZQUNERSxXQUFXLENBQUMsR0FBR1osU0FBU2lCLGlCQUFpQixFQUFFVCxR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QUFDa0QsV0FDSi9ELEdBQUcsQ0FBQzFCLG1CQUFtQjRCLGVBQWUsRUFDdENDLEdBQUcsQ0FBQzRELFdBQ0ozRCxHQUFHO0lBQ1IsT0FBTztRQUNITDtRQUNBK0Q7UUFDQUM7UUFDQUM7UUFDQUMsWUFBWWdCO1FBQ1pmLGFBQWFnQjtJQUNqQjtBQUNKO0FBQ0F4SCwwQ0FBMEMsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvbWF0aC90cmFkZS5qcz9jNDFhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jYWxjdWxhdGVFc3RpbWF0ZWRFbnRyeVByaWNlV2l0aEwyID0gZXhwb3J0cy5jYWxjdWxhdGVFc3RpbWF0ZWRTcG90RW50cnlQcmljZSA9IGV4cG9ydHMuY2FsY3VsYXRlRXN0aW1hdGVkUGVycEVudHJ5UHJpY2UgPSBleHBvcnRzLmNhbGN1bGF0ZVRhcmdldFByaWNlVHJhZGUgPSBleHBvcnRzLmNhbGN1bGF0ZVRyYWRlQWNxdWlyZWRBbW91bnRzID0gZXhwb3J0cy5jYWxjdWxhdGVUcmFkZVNsaXBwYWdlID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuLi90eXBlc1wiKTtcbmNvbnN0IGFuY2hvcl8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yXCIpO1xuY29uc3QgYXNzZXJ0XzEgPSByZXF1aXJlKFwiLi4vYXNzZXJ0L2Fzc2VydFwiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IG1hcmtldF8xID0gcmVxdWlyZShcIi4vbWFya2V0XCIpO1xuY29uc3QgYW1tXzEgPSByZXF1aXJlKFwiLi9hbW1cIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG5jb25zdCB0eXBlc18yID0gcmVxdWlyZShcIi4uL3R5cGVzXCIpO1xuY29uc3QgTUFYUENUID0gbmV3IGFuY2hvcl8xLkJOKDEwMDApOyAvL3BlcmNlbnRhZ2UgdW5pdHMgYXJlIFswLDEwMDBdID0+IFswLDFdXG4vKipcbiAqIENhbGN1bGF0ZXMgYXZnL21heCBzbGlwcGFnZSAocHJpY2UgaW1wYWN0KSBmb3IgY2FuZGlkYXRlIHRyYWRlXG4gKlxuICogQGRlcHJlY2F0ZWQgdXNlIGNhbGN1bGF0ZUVzdGltYXRlZFBlcnBFbnRyeVByaWNlIGluc3RlYWRcbiAqXG4gKiBAcGFyYW0gZGlyZWN0aW9uXG4gKiBAcGFyYW0gYW1vdW50XG4gKiBAcGFyYW0gbWFya2V0XG4gKiBAcGFyYW0gaW5wdXRBc3NldFR5cGUgd2hpY2ggYXNzZXQgaXMgYmVpbmcgdHJhZGVkXG4gKiBAcGFyYW0gdXNlU3ByZWFkIHdoZXRoZXIgdG8gY29uc2lkZXIgc3ByZWFkIHdpdGggY2FsY3VsYXRpbmcgc2xpcHBhZ2VcbiAqIEByZXR1cm4gW3BjdEF2Z1NsaXBwYWdlLCBwY3RNYXhTbGlwcGFnZSwgZW50cnlQcmljZSwgbmV3UHJpY2VdXG4gKlxuICogJ3BjdEF2Z1NsaXBwYWdlJyA9PiAgdGhlIHBlcmNlbnRhZ2UgY2hhbmdlIHRvIGVudHJ5UHJpY2UgKGF2ZXJhZ2UgZXN0IHNsaXBwYWdlIGluIGV4ZWN1dGlvbikgOiBQcmVjaXNpb24gUFJJQ0VfUFJFQ0lTSU9OXG4gKlxuICogJ3BjdE1heFNsaXBwYWdlJyA9PiAgdGhlIHBlcmNlbnRhZ2UgY2hhbmdlIHRvIG1heFByaWNlIChoaWdoZXN0IGVzdCBzbGlwcGFnZSBpbiBleGVjdXRpb24pIDogUHJlY2lzaW9uIFBSSUNFX1BSRUNJU0lPTlxuICpcbiAqICdlbnRyeVByaWNlJyA9PiB0aGUgYXZlcmFnZSBwcmljZSBvZiB0aGUgdHJhZGUgOiBQcmVjaXNpb24gUFJJQ0VfUFJFQ0lTSU9OXG4gKlxuICogJ25ld1ByaWNlJyA9PiB0aGUgcHJpY2Ugb2YgdGhlIGFzc2V0IGFmdGVyIHRoZSB0cmFkZSA6IFByZWNpc2lvbiBQUklDRV9QUkVDSVNJT05cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlVHJhZGVTbGlwcGFnZShkaXJlY3Rpb24sIGFtb3VudCwgbWFya2V0LCBpbnB1dEFzc2V0VHlwZSA9ICdxdW90ZScsIG9yYWNsZVByaWNlRGF0YSwgdXNlU3ByZWFkID0gdHJ1ZSkge1xuICAgIGxldCBvbGRQcmljZTtcbiAgICBpZiAodXNlU3ByZWFkICYmIG1hcmtldC5hbW0uYmFzZVNwcmVhZCA+IDApIHtcbiAgICAgICAgaWYgKCgwLCB0eXBlc18yLmlzVmFyaWFudCkoZGlyZWN0aW9uLCAnbG9uZycpKSB7XG4gICAgICAgICAgICBvbGRQcmljZSA9ICgwLCBtYXJrZXRfMS5jYWxjdWxhdGVBc2tQcmljZSkobWFya2V0LCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2xkUHJpY2UgPSAoMCwgbWFya2V0XzEuY2FsY3VsYXRlQmlkUHJpY2UpKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb2xkUHJpY2UgPSAoMCwgbWFya2V0XzEuY2FsY3VsYXRlUmVzZXJ2ZVByaWNlKShtYXJrZXQsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgfVxuICAgIGlmIChhbW91bnQuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIHJldHVybiBbbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBvbGRQcmljZSwgb2xkUHJpY2VdO1xuICAgIH1cbiAgICBjb25zdCBbYWNxdWlyZWRCYXNlUmVzZXJ2ZSwgYWNxdWlyZWRRdW90ZVJlc2VydmUsIGFjcXVpcmVkUXVvdGVBc3NldEFtb3VudF0gPSBjYWxjdWxhdGVUcmFkZUFjcXVpcmVkQW1vdW50cyhkaXJlY3Rpb24sIGFtb3VudCwgbWFya2V0LCBpbnB1dEFzc2V0VHlwZSwgb3JhY2xlUHJpY2VEYXRhLCB1c2VTcHJlYWQpO1xuICAgIGNvbnN0IGVudHJ5UHJpY2UgPSBhY3F1aXJlZFF1b3RlQXNzZXRBbW91bnRcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTylcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KGFjcXVpcmVkQmFzZVJlc2VydmUuYWJzKCkpO1xuICAgIGxldCBhbW07XG4gICAgaWYgKHVzZVNwcmVhZCAmJiBtYXJrZXQuYW1tLmJhc2VTcHJlYWQgPiAwKSB7XG4gICAgICAgIGNvbnN0IHsgYmFzZUFzc2V0UmVzZXJ2ZSwgcXVvdGVBc3NldFJlc2VydmUsIHNxcnRLLCBuZXdQZWcgfSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVVcGRhdGVkQU1NU3ByZWFkUmVzZXJ2ZXMpKG1hcmtldC5hbW0sIGRpcmVjdGlvbiwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgYW1tID0ge1xuICAgICAgICAgICAgYmFzZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgICAgIHF1b3RlQXNzZXRSZXNlcnZlLFxuICAgICAgICAgICAgc3FydEs6IHNxcnRLLFxuICAgICAgICAgICAgcGVnTXVsdGlwbGllcjogbmV3UGVnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYW1tID0gbWFya2V0LmFtbTtcbiAgICB9XG4gICAgY29uc3QgbmV3UHJpY2UgPSAoMCwgYW1tXzEuY2FsY3VsYXRlUHJpY2UpKGFtbS5iYXNlQXNzZXRSZXNlcnZlLnN1YihhY3F1aXJlZEJhc2VSZXNlcnZlKSwgYW1tLnF1b3RlQXNzZXRSZXNlcnZlLnN1YihhY3F1aXJlZFF1b3RlUmVzZXJ2ZSksIGFtbS5wZWdNdWx0aXBsaWVyKTtcbiAgICBpZiAoZGlyZWN0aW9uID09IHR5cGVzXzEuUG9zaXRpb25EaXJlY3Rpb24uU0hPUlQpIHtcbiAgICAgICAgKDAsIGFzc2VydF8xLmFzc2VydCkobmV3UHJpY2UubHRlKG9sZFByaWNlKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAoMCwgYXNzZXJ0XzEuYXNzZXJ0KShvbGRQcmljZS5sdGUobmV3UHJpY2UpKTtcbiAgICB9XG4gICAgY29uc3QgcGN0TWF4U2xpcHBhZ2UgPSBuZXdQcmljZVxuICAgICAgICAuc3ViKG9sZFByaWNlKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYob2xkUHJpY2UpXG4gICAgICAgIC5hYnMoKTtcbiAgICBjb25zdCBwY3RBdmdTbGlwcGFnZSA9IGVudHJ5UHJpY2VcbiAgICAgICAgLnN1YihvbGRQcmljZSlcbiAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAuZGl2KG9sZFByaWNlKVxuICAgICAgICAuYWJzKCk7XG4gICAgcmV0dXJuIFtwY3RBdmdTbGlwcGFnZSwgcGN0TWF4U2xpcHBhZ2UsIGVudHJ5UHJpY2UsIG5ld1ByaWNlXTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlVHJhZGVTbGlwcGFnZSA9IGNhbGN1bGF0ZVRyYWRlU2xpcHBhZ2U7XG4vKipcbiAqIENhbGN1bGF0ZXMgYWNxdWlyZWQgYW1vdW50cyBmb3IgdHJhZGUgZXhlY3V0ZWRcbiAqIEBwYXJhbSBkaXJlY3Rpb25cbiAqIEBwYXJhbSBhbW91bnRcbiAqIEBwYXJhbSBtYXJrZXRcbiAqIEBwYXJhbSBpbnB1dEFzc2V0VHlwZVxuICogQHBhcmFtIHVzZVNwcmVhZFxuICogQHJldHVyblxuICogXHR8ICdhY3F1aXJlZEJhc2UnID0+ICBwb3NpdGl2ZS9uZWdhdGl2ZSBjaGFuZ2UgaW4gdXNlcidzIGJhc2UgOiBCTiBBTU1fUkVTRVJWRV9QUkVDSVNJT05cbiAqIFx0fCAnYWNxdWlyZWRRdW90ZScgPT4gcG9zaXRpdmUvbmVnYXRpdmUgY2hhbmdlIGluIHVzZXIncyBxdW90ZSA6IEJOIFRPRE8tUFJFQ0lTSU9OXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVRyYWRlQWNxdWlyZWRBbW91bnRzKGRpcmVjdGlvbiwgYW1vdW50LCBtYXJrZXQsIGlucHV0QXNzZXRUeXBlID0gJ3F1b3RlJywgb3JhY2xlUHJpY2VEYXRhLCB1c2VTcHJlYWQgPSB0cnVlKSB7XG4gICAgaWYgKGFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIFtudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPXTtcbiAgICB9XG4gICAgY29uc3Qgc3dhcERpcmVjdGlvbiA9ICgwLCBhbW1fMS5nZXRTd2FwRGlyZWN0aW9uKShpbnB1dEFzc2V0VHlwZSwgZGlyZWN0aW9uKTtcbiAgICBsZXQgYW1tO1xuICAgIGlmICh1c2VTcHJlYWQgJiYgbWFya2V0LmFtbS5iYXNlU3ByZWFkID4gMCkge1xuICAgICAgICBjb25zdCB7IGJhc2VBc3NldFJlc2VydmUsIHF1b3RlQXNzZXRSZXNlcnZlLCBzcXJ0SywgbmV3UGVnIH0gPSAoMCwgYW1tXzEuY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzKShtYXJrZXQuYW1tLCBkaXJlY3Rpb24sIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgIGFtbSA9IHtcbiAgICAgICAgICAgIGJhc2VBc3NldFJlc2VydmUsXG4gICAgICAgICAgICBxdW90ZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgICAgIHNxcnRLOiBzcXJ0SyxcbiAgICAgICAgICAgIHBlZ011bHRpcGxpZXI6IG5ld1BlZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFtbSA9IG1hcmtldC5hbW07XG4gICAgfVxuICAgIGNvbnN0IFtuZXdRdW90ZUFzc2V0UmVzZXJ2ZSwgbmV3QmFzZUFzc2V0UmVzZXJ2ZV0gPSAoMCwgYW1tXzEuY2FsY3VsYXRlQW1tUmVzZXJ2ZXNBZnRlclN3YXApKGFtbSwgaW5wdXRBc3NldFR5cGUsIGFtb3VudCwgc3dhcERpcmVjdGlvbik7XG4gICAgY29uc3QgYWNxdWlyZWRCYXNlID0gYW1tLmJhc2VBc3NldFJlc2VydmUuc3ViKG5ld0Jhc2VBc3NldFJlc2VydmUpO1xuICAgIGNvbnN0IGFjcXVpcmVkUXVvdGUgPSBhbW0ucXVvdGVBc3NldFJlc2VydmUuc3ViKG5ld1F1b3RlQXNzZXRSZXNlcnZlKTtcbiAgICBjb25zdCBhY3F1aXJlZFF1b3RlQXNzZXRBbW91bnQgPSAoMCwgYW1tXzEuY2FsY3VsYXRlUXVvdGVBc3NldEFtb3VudFN3YXBwZWQpKGFjcXVpcmVkUXVvdGUuYWJzKCksIGFtbS5wZWdNdWx0aXBsaWVyLCBzd2FwRGlyZWN0aW9uKTtcbiAgICByZXR1cm4gW2FjcXVpcmVkQmFzZSwgYWNxdWlyZWRRdW90ZSwgYWNxdWlyZWRRdW90ZUFzc2V0QW1vdW50XTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlVHJhZGVBY3F1aXJlZEFtb3VudHMgPSBjYWxjdWxhdGVUcmFkZUFjcXVpcmVkQW1vdW50cztcbi8qKlxuICogY2FsY3VsYXRlVGFyZ2V0UHJpY2VUcmFkZVxuICogc2ltcGxlIGZ1bmN0aW9uIGZvciBmaW5kaW5nIGFyYml0cmFnaW5nIHRyYWRlc1xuICpcbiAqIEBkZXByZWNhdGVkXG4gKlxuICogQHBhcmFtIG1hcmtldFxuICogQHBhcmFtIHRhcmdldFByaWNlXG4gKiBAcGFyYW0gcGN0IG9wdGlvbmFsIGRlZmF1bHQgaXMgMTAwJSBnYXAgZmlsbGluZywgY2FuIHNldCBzbWFsbGVyLlxuICogQHBhcmFtIG91dHB1dEFzc2V0VHlwZSB3aGljaCBhc3NldCB0byB0cmFkZS5cbiAqIEBwYXJhbSB1c2VTcHJlYWQgd2hldGhlciBvciBub3QgdG8gY29uc2lkZXIgdGhlIHNwcmVhZCB3aGVuIGNhbGN1bGF0aW5nIHRoZSB0cmFkZSBzaXplXG4gKiBAcmV0dXJucyB0cmFkZSBkaXJlY3Rpb24vc2l6ZSBpbiBvcmRlciB0byBwdXNoIHByaWNlIHRvIGEgdGFyZ2V0UHJpY2UsXG4gKlxuICogW1xuICogICBkaXJlY3Rpb24gPT4gZGlyZWN0aW9uIG9mIHRyYWRlIHJlcXVpcmVkLCBQb3NpdGlvbkRpcmVjdGlvblxuICogICB0cmFkZVNpemUgPT4gc2l6ZSBvZiB0cmFkZSByZXF1aXJlZCwgVE9ETy1QUkVDSVNJT05cbiAqICAgZW50cnlQcmljZSA9PiB0aGUgZW50cnkgcHJpY2UgZm9yIHRoZSB0cmFkZSwgUFJJQ0VfUFJFQ0lTSU9OXG4gKiAgIHRhcmdldFByaWNlID0+IHRoZSB0YXJnZXQgcHJpY2UgUFJJQ0VfUFJFQ0lTSU9OXG4gKiBdXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVRhcmdldFByaWNlVHJhZGUobWFya2V0LCB0YXJnZXRQcmljZSwgcGN0ID0gTUFYUENULCBvdXRwdXRBc3NldFR5cGUgPSAncXVvdGUnLCBvcmFjbGVQcmljZURhdGEsIHVzZVNwcmVhZCA9IHRydWUpIHtcbiAgICAoMCwgYXNzZXJ0XzEuYXNzZXJ0KShtYXJrZXQuYW1tLmJhc2VBc3NldFJlc2VydmUuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKTtcbiAgICAoMCwgYXNzZXJ0XzEuYXNzZXJ0KSh0YXJnZXRQcmljZS5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpO1xuICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKHBjdC5sdGUoTUFYUENUKSAmJiBwY3QuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKTtcbiAgICBjb25zdCByZXNlcnZlUHJpY2VCZWZvcmUgPSAoMCwgbWFya2V0XzEuY2FsY3VsYXRlUmVzZXJ2ZVByaWNlKShtYXJrZXQsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgY29uc3QgYmlkUHJpY2VCZWZvcmUgPSAoMCwgbWFya2V0XzEuY2FsY3VsYXRlQmlkUHJpY2UpKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBhc2tQcmljZUJlZm9yZSA9ICgwLCBtYXJrZXRfMS5jYWxjdWxhdGVBc2tQcmljZSkobWFya2V0LCBvcmFjbGVQcmljZURhdGEpO1xuICAgIGxldCBkaXJlY3Rpb247XG4gICAgaWYgKHRhcmdldFByaWNlLmd0KHJlc2VydmVQcmljZUJlZm9yZSkpIHtcbiAgICAgICAgY29uc3QgcHJpY2VHYXAgPSB0YXJnZXRQcmljZS5zdWIocmVzZXJ2ZVByaWNlQmVmb3JlKTtcbiAgICAgICAgY29uc3QgcHJpY2VHYXBTY2FsZWQgPSBwcmljZUdhcC5tdWwocGN0KS5kaXYoTUFYUENUKTtcbiAgICAgICAgdGFyZ2V0UHJpY2UgPSByZXNlcnZlUHJpY2VCZWZvcmUuYWRkKHByaWNlR2FwU2NhbGVkKTtcbiAgICAgICAgZGlyZWN0aW9uID0gdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgcHJpY2VHYXAgPSByZXNlcnZlUHJpY2VCZWZvcmUuc3ViKHRhcmdldFByaWNlKTtcbiAgICAgICAgY29uc3QgcHJpY2VHYXBTY2FsZWQgPSBwcmljZUdhcC5tdWwocGN0KS5kaXYoTUFYUENUKTtcbiAgICAgICAgdGFyZ2V0UHJpY2UgPSByZXNlcnZlUHJpY2VCZWZvcmUuc3ViKHByaWNlR2FwU2NhbGVkKTtcbiAgICAgICAgZGlyZWN0aW9uID0gdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5TSE9SVDtcbiAgICB9XG4gICAgbGV0IHRyYWRlU2l6ZTtcbiAgICBsZXQgYmFzZVNpemU7XG4gICAgbGV0IGJhc2VBc3NldFJlc2VydmVCZWZvcmU7XG4gICAgbGV0IHF1b3RlQXNzZXRSZXNlcnZlQmVmb3JlO1xuICAgIGxldCBwZWcgPSBtYXJrZXQuYW1tLnBlZ011bHRpcGxpZXI7XG4gICAgaWYgKHVzZVNwcmVhZCAmJiBtYXJrZXQuYW1tLmJhc2VTcHJlYWQgPiAwKSB7XG4gICAgICAgIGNvbnN0IHsgYmFzZUFzc2V0UmVzZXJ2ZSwgcXVvdGVBc3NldFJlc2VydmUsIG5ld1BlZyB9ID0gKDAsIGFtbV8xLmNhbGN1bGF0ZVVwZGF0ZWRBTU1TcHJlYWRSZXNlcnZlcykobWFya2V0LmFtbSwgZGlyZWN0aW9uLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICBiYXNlQXNzZXRSZXNlcnZlQmVmb3JlID0gYmFzZUFzc2V0UmVzZXJ2ZTtcbiAgICAgICAgcXVvdGVBc3NldFJlc2VydmVCZWZvcmUgPSBxdW90ZUFzc2V0UmVzZXJ2ZTtcbiAgICAgICAgcGVnID0gbmV3UGVnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYmFzZUFzc2V0UmVzZXJ2ZUJlZm9yZSA9IG1hcmtldC5hbW0uYmFzZUFzc2V0UmVzZXJ2ZTtcbiAgICAgICAgcXVvdGVBc3NldFJlc2VydmVCZWZvcmUgPSBtYXJrZXQuYW1tLnF1b3RlQXNzZXRSZXNlcnZlO1xuICAgIH1cbiAgICBjb25zdCBpbnZhcmlhbnQgPSBtYXJrZXQuYW1tLnNxcnRLLm11bChtYXJrZXQuYW1tLnNxcnRLKTtcbiAgICBjb25zdCBrID0gaW52YXJpYW50Lm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKTtcbiAgICBsZXQgYmFzZUFzc2V0UmVzZXJ2ZUFmdGVyO1xuICAgIGxldCBxdW90ZUFzc2V0UmVzZXJ2ZUFmdGVyO1xuICAgIGNvbnN0IGJpYXNNb2RpZmllciA9IG5ldyBhbmNob3JfMS5CTigxKTtcbiAgICBsZXQgbWFya1ByaWNlQWZ0ZXI7XG4gICAgaWYgKHVzZVNwcmVhZCAmJlxuICAgICAgICB0YXJnZXRQcmljZS5sdChhc2tQcmljZUJlZm9yZSkgJiZcbiAgICAgICAgdGFyZ2V0UHJpY2UuZ3QoYmlkUHJpY2VCZWZvcmUpKSB7XG4gICAgICAgIC8vIG5vIHRyYWRlLCBtYXJrZXQgaXMgYXQgdGFyZ2V0XG4gICAgICAgIGlmIChyZXNlcnZlUHJpY2VCZWZvcmUuZ3QodGFyZ2V0UHJpY2UpKSB7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JUO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gdHlwZXNfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HO1xuICAgICAgICB9XG4gICAgICAgIHRyYWRlU2l6ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICByZXR1cm4gW2RpcmVjdGlvbiwgdHJhZGVTaXplLCB0YXJnZXRQcmljZSwgdGFyZ2V0UHJpY2VdO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXNlcnZlUHJpY2VCZWZvcmUuZ3QodGFyZ2V0UHJpY2UpKSB7XG4gICAgICAgIC8vIG92ZXJlc3RpbWF0ZSB5MlxuICAgICAgICBiYXNlQXNzZXRSZXNlcnZlQWZ0ZXIgPSAoMCwgdXRpbHNfMS5zcXVhcmVSb290Qk4pKGsuZGl2KHRhcmdldFByaWNlKS5tdWwocGVnKS5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBFR19QUkVDSVNJT04pLnN1YihiaWFzTW9kaWZpZXIpKS5zdWIobmV3IGFuY2hvcl8xLkJOKDEpKTtcbiAgICAgICAgcXVvdGVBc3NldFJlc2VydmVBZnRlciA9IGsuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pLmRpdihiYXNlQXNzZXRSZXNlcnZlQWZ0ZXIpO1xuICAgICAgICBtYXJrUHJpY2VBZnRlciA9ICgwLCBhbW1fMS5jYWxjdWxhdGVQcmljZSkoYmFzZUFzc2V0UmVzZXJ2ZUFmdGVyLCBxdW90ZUFzc2V0UmVzZXJ2ZUFmdGVyLCBwZWcpO1xuICAgICAgICBkaXJlY3Rpb24gPSB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JUO1xuICAgICAgICB0cmFkZVNpemUgPSBxdW90ZUFzc2V0UmVzZXJ2ZUJlZm9yZVxuICAgICAgICAgICAgLnN1YihxdW90ZUFzc2V0UmVzZXJ2ZUFmdGVyKVxuICAgICAgICAgICAgLm11bChwZWcpXG4gICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QRUdfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyk7XG4gICAgICAgIGJhc2VTaXplID0gYmFzZUFzc2V0UmVzZXJ2ZUFmdGVyLnN1YihiYXNlQXNzZXRSZXNlcnZlQmVmb3JlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVzZXJ2ZVByaWNlQmVmb3JlLmx0KHRhcmdldFByaWNlKSkge1xuICAgICAgICAvLyB1bmRlcmVzdGltYXRlIHkyXG4gICAgICAgIGJhc2VBc3NldFJlc2VydmVBZnRlciA9ICgwLCB1dGlsc18xLnNxdWFyZVJvb3RCTikoay5kaXYodGFyZ2V0UHJpY2UpLm11bChwZWcpLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUEVHX1BSRUNJU0lPTikuYWRkKGJpYXNNb2RpZmllcikpLmFkZChuZXcgYW5jaG9yXzEuQk4oMSkpO1xuICAgICAgICBxdW90ZUFzc2V0UmVzZXJ2ZUFmdGVyID0gay5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTikuZGl2KGJhc2VBc3NldFJlc2VydmVBZnRlcik7XG4gICAgICAgIG1hcmtQcmljZUFmdGVyID0gKDAsIGFtbV8xLmNhbGN1bGF0ZVByaWNlKShiYXNlQXNzZXRSZXNlcnZlQWZ0ZXIsIHF1b3RlQXNzZXRSZXNlcnZlQWZ0ZXIsIHBlZyk7XG4gICAgICAgIGRpcmVjdGlvbiA9IHR5cGVzXzEuUG9zaXRpb25EaXJlY3Rpb24uTE9ORztcbiAgICAgICAgdHJhZGVTaXplID0gcXVvdGVBc3NldFJlc2VydmVBZnRlclxuICAgICAgICAgICAgLnN1YihxdW90ZUFzc2V0UmVzZXJ2ZUJlZm9yZSlcbiAgICAgICAgICAgIC5tdWwocGVnKVxuICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUEVHX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkFNTV9UT19RVU9URV9QUkVDSVNJT05fUkFUSU8pO1xuICAgICAgICBiYXNlU2l6ZSA9IGJhc2VBc3NldFJlc2VydmVCZWZvcmUuc3ViKGJhc2VBc3NldFJlc2VydmVBZnRlcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBubyB0cmFkZSwgbWFya2V0IGlzIGF0IHRhcmdldFxuICAgICAgICBkaXJlY3Rpb24gPSB0eXBlc18xLlBvc2l0aW9uRGlyZWN0aW9uLkxPTkc7XG4gICAgICAgIHRyYWRlU2l6ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICByZXR1cm4gW2RpcmVjdGlvbiwgdHJhZGVTaXplLCB0YXJnZXRQcmljZSwgdGFyZ2V0UHJpY2VdO1xuICAgIH1cbiAgICBsZXQgdHAxID0gdGFyZ2V0UHJpY2U7XG4gICAgbGV0IHRwMiA9IG1hcmtQcmljZUFmdGVyO1xuICAgIGxldCBvcmlnaW5hbERpZmYgPSB0YXJnZXRQcmljZS5zdWIocmVzZXJ2ZVByaWNlQmVmb3JlKTtcbiAgICBpZiAoZGlyZWN0aW9uID09IHR5cGVzXzEuUG9zaXRpb25EaXJlY3Rpb24uU0hPUlQpIHtcbiAgICAgICAgdHAxID0gbWFya1ByaWNlQWZ0ZXI7XG4gICAgICAgIHRwMiA9IHRhcmdldFByaWNlO1xuICAgICAgICBvcmlnaW5hbERpZmYgPSByZXNlcnZlUHJpY2VCZWZvcmUuc3ViKHRhcmdldFByaWNlKTtcbiAgICB9XG4gICAgY29uc3QgZW50cnlQcmljZSA9IHRyYWRlU2l6ZVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5BTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYoYmFzZVNpemUuYWJzKCkpO1xuICAgICgwLCBhc3NlcnRfMS5hc3NlcnQpKHRwMS5zdWIodHAyKS5sdGUob3JpZ2luYWxEaWZmKSwgJ1RhcmdldCBQcmljZSBDYWxjdWxhdGlvbiBpbmNvcnJlY3QnKTtcbiAgICAoMCwgYXNzZXJ0XzEuYXNzZXJ0KSh0cDIubHRlKHRwMSkgfHwgdHAyLnN1Yih0cDEpLmFicygpIDwgMTAwMDAwLCAnVGFyZ2V0IFByaWNlIENhbGN1bGF0aW9uIGluY29ycmVjdCcgK1xuICAgICAgICB0cDIudG9TdHJpbmcoKSArXG4gICAgICAgICc+PScgK1xuICAgICAgICB0cDEudG9TdHJpbmcoKSArXG4gICAgICAgICdlcnI6ICcgK1xuICAgICAgICB0cDIuc3ViKHRwMSkuYWJzKCkudG9TdHJpbmcoKSk7XG4gICAgaWYgKG91dHB1dEFzc2V0VHlwZSA9PSAncXVvdGUnKSB7XG4gICAgICAgIHJldHVybiBbZGlyZWN0aW9uLCB0cmFkZVNpemUsIGVudHJ5UHJpY2UsIHRhcmdldFByaWNlXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbZGlyZWN0aW9uLCBiYXNlU2l6ZSwgZW50cnlQcmljZSwgdGFyZ2V0UHJpY2VdO1xuICAgIH1cbn1cbmV4cG9ydHMuY2FsY3VsYXRlVGFyZ2V0UHJpY2VUcmFkZSA9IGNhbGN1bGF0ZVRhcmdldFByaWNlVHJhZGU7XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGVzdGltYXRlZCBlbnRyeSBwcmljZSBhbmQgcHJpY2UgaW1wYWN0IG9mIG9yZGVyLCBpbiBiYXNlIG9yIHF1b3RlXG4gKiBQcmljZSBpbXBhY3QgaXMgYmFzZWQgb24gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgZW50cnkgcHJpY2UgYW5kIHRoZSBiZXN0IGJpZC9hc2sgcHJpY2UgKHdoZXRoZXIgaXQncyBkbG9iIG9yIHZhbW0pXG4gKlxuICogQHBhcmFtIGFzc2V0VHlwZVxuICogQHBhcmFtIGFtb3VudFxuICogQHBhcmFtIGRpcmVjdGlvblxuICogQHBhcmFtIG1hcmtldFxuICogQHBhcmFtIG9yYWNsZVByaWNlRGF0YVxuICogQHBhcmFtIGRsb2JcbiAqIEBwYXJhbSBzbG90XG4gKiBAcGFyYW0gdXNlcnNUb1NraXBcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlRXN0aW1hdGVkUGVycEVudHJ5UHJpY2UoYXNzZXRUeXBlLCBhbW91bnQsIGRpcmVjdGlvbiwgbWFya2V0LCBvcmFjbGVQcmljZURhdGEsIGRsb2IsIHNsb3QsIHVzZXJzVG9Ta2lwID0gbmV3IE1hcCgpKSB7XG4gICAgaWYgKGFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVudHJ5UHJpY2U6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPLFxuICAgICAgICAgICAgcHJpY2VJbXBhY3Q6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPLFxuICAgICAgICAgICAgYmVzdFByaWNlOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIHdvcnN0UHJpY2U6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPLFxuICAgICAgICAgICAgYmFzZUZpbGxlZDogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgICAgICBxdW90ZUZpbGxlZDogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IHRha2VySXNMb25nID0gKDAsIHR5cGVzXzIuaXNWYXJpYW50KShkaXJlY3Rpb24sICdsb25nJyk7XG4gICAgY29uc3QgbGltaXRPcmRlcnMgPSBkbG9iW3Rha2VySXNMb25nID8gJ2dldE1ha2VyTGltaXRBc2tzJyA6ICdnZXRNYWtlckxpbWl0QmlkcyddKG1hcmtldC5tYXJrZXRJbmRleCwgc2xvdCwgdHlwZXNfMS5NYXJrZXRUeXBlLlBFUlAsIG9yYWNsZVByaWNlRGF0YSwgdGFrZXJJc0xvbmdcbiAgICAgICAgPyAoMCwgbWFya2V0XzEuY2FsY3VsYXRlQmlkUHJpY2UpKG1hcmtldCwgb3JhY2xlUHJpY2VEYXRhKVxuICAgICAgICA6ICgwLCBtYXJrZXRfMS5jYWxjdWxhdGVBc2tQcmljZSkobWFya2V0LCBvcmFjbGVQcmljZURhdGEpKTtcbiAgICBjb25zdCBzd2FwRGlyZWN0aW9uID0gKDAsIGFtbV8xLmdldFN3YXBEaXJlY3Rpb24pKGFzc2V0VHlwZSwgZGlyZWN0aW9uKTtcbiAgICBjb25zdCB7IGJhc2VBc3NldFJlc2VydmUsIHF1b3RlQXNzZXRSZXNlcnZlLCBzcXJ0SywgbmV3UGVnIH0gPSAoMCwgYW1tXzEuY2FsY3VsYXRlVXBkYXRlZEFNTVNwcmVhZFJlc2VydmVzKShtYXJrZXQuYW1tLCBkaXJlY3Rpb24sIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgY29uc3QgYW1tID0ge1xuICAgICAgICBiYXNlQXNzZXRSZXNlcnZlLFxuICAgICAgICBxdW90ZUFzc2V0UmVzZXJ2ZSxcbiAgICAgICAgc3FydEs6IHNxcnRLLFxuICAgICAgICBwZWdNdWx0aXBsaWVyOiBuZXdQZWcsXG4gICAgfTtcbiAgICBjb25zdCBbYW1tQmlkcywgYW1tQXNrc10gPSAoMCwgYW1tXzEuY2FsY3VsYXRlTWFya2V0T3BlbkJpZEFzaykobWFya2V0LmFtbS5iYXNlQXNzZXRSZXNlcnZlLCBtYXJrZXQuYW1tLm1pbkJhc2VBc3NldFJlc2VydmUsIG1hcmtldC5hbW0ubWF4QmFzZUFzc2V0UmVzZXJ2ZSwgbWFya2V0LmFtbS5vcmRlclN0ZXBTaXplKTtcbiAgICBsZXQgYW1tTGlxdWlkaXR5O1xuICAgIGlmIChhc3NldFR5cGUgPT09ICdiYXNlJykge1xuICAgICAgICBhbW1MaXF1aWRpdHkgPSB0YWtlcklzTG9uZyA/IGFtbUFza3MuYWJzKCkgOiBhbW1CaWRzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgW2FmdGVyU3dhcFF1b3RlUmVzZXJ2ZXMsIF9dID0gKDAsIGFtbV8xLmNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwKShhbW0sICdiYXNlJywgdGFrZXJJc0xvbmcgPyBhbW1Bc2tzLmFicygpIDogYW1tQmlkcywgKDAsIGFtbV8xLmdldFN3YXBEaXJlY3Rpb24pKCdiYXNlJywgZGlyZWN0aW9uKSk7XG4gICAgICAgIGFtbUxpcXVpZGl0eSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVRdW90ZUFzc2V0QW1vdW50U3dhcHBlZCkoYW1tLnF1b3RlQXNzZXRSZXNlcnZlLnN1YihhZnRlclN3YXBRdW90ZVJlc2VydmVzKS5hYnMoKSwgYW1tLnBlZ011bHRpcGxpZXIsIHN3YXBEaXJlY3Rpb24pO1xuICAgIH1cbiAgICBjb25zdCBpbnZhcmlhbnQgPSBhbW0uc3FydEsubXVsKGFtbS5zcXJ0Syk7XG4gICAgbGV0IGJlc3RQcmljZSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVQcmljZSkoYW1tLmJhc2VBc3NldFJlc2VydmUsIGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZSwgYW1tLnBlZ011bHRpcGxpZXIpO1xuICAgIGxldCBjdW11bGF0aXZlQmFzZUZpbGxlZCA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIGxldCBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICBsZXQgbGltaXRPcmRlciA9IGxpbWl0T3JkZXJzLm5leHQoKS52YWx1ZTtcbiAgICBpZiAobGltaXRPcmRlcikge1xuICAgICAgICBjb25zdCBsaW1pdE9yZGVyUHJpY2UgPSBsaW1pdE9yZGVyLmdldFByaWNlKG9yYWNsZVByaWNlRGF0YSwgc2xvdCk7XG4gICAgICAgIGJlc3RQcmljZSA9IHRha2VySXNMb25nXG4gICAgICAgICAgICA/IGFuY2hvcl8xLkJOLm1pbihsaW1pdE9yZGVyUHJpY2UsIGJlc3RQcmljZSlcbiAgICAgICAgICAgIDogYW5jaG9yXzEuQk4ubWF4KGxpbWl0T3JkZXJQcmljZSwgYmVzdFByaWNlKTtcbiAgICB9XG4gICAgbGV0IHdvcnN0UHJpY2UgPSBiZXN0UHJpY2U7XG4gICAgaWYgKGFzc2V0VHlwZSA9PT0gJ2Jhc2UnKSB7XG4gICAgICAgIHdoaWxlICghY3VtdWxhdGl2ZUJhc2VGaWxsZWQuZXEoYW1vdW50KSAmJlxuICAgICAgICAgICAgKGFtbUxpcXVpZGl0eS5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgfHwgbGltaXRPcmRlcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0T3JkZXJQcmljZSA9IGxpbWl0T3JkZXIgPT09IG51bGwgfHwgbGltaXRPcmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGltaXRPcmRlci5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpO1xuICAgICAgICAgICAgbGV0IG1heEFtbUZpbGw7XG4gICAgICAgICAgICBpZiAobGltaXRPcmRlclByaWNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3QmFzZVJlc2VydmVzID0gKDAsIHV0aWxzXzEuc3F1YXJlUm9vdEJOKShpbnZhcmlhbnRcbiAgICAgICAgICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgICAgICAubXVsKGFtbS5wZWdNdWx0aXBsaWVyKVxuICAgICAgICAgICAgICAgICAgICAuZGl2KGxpbWl0T3JkZXJQcmljZSlcbiAgICAgICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUEVHX1BSRUNJU0lPTikpO1xuICAgICAgICAgICAgICAgIC8vIHdpbGwgYmUgemVybyBpZiB0aGUgbGltaXQgb3JkZXIgcHJpY2UgaXMgYmV0dGVyIHRoYW4gdGhlIGFtbSBwcmljZVxuICAgICAgICAgICAgICAgIG1heEFtbUZpbGwgPSB0YWtlcklzTG9uZ1xuICAgICAgICAgICAgICAgICAgICA/IGFtbS5iYXNlQXNzZXRSZXNlcnZlLnN1YihuZXdCYXNlUmVzZXJ2ZXMpXG4gICAgICAgICAgICAgICAgICAgIDogbmV3QmFzZVJlc2VydmVzLnN1YihhbW0uYmFzZUFzc2V0UmVzZXJ2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXhBbW1GaWxsID0gYW1vdW50LnN1YihjdW11bGF0aXZlQmFzZUZpbGxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXhBbW1GaWxsID0gYW5jaG9yXzEuQk4ubWluKG1heEFtbUZpbGwsIGFtbUxpcXVpZGl0eSk7XG4gICAgICAgICAgICBpZiAobWF4QW1tRmlsbC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlRmlsbGVkID0gYW5jaG9yXzEuQk4ubWluKGFtb3VudC5zdWIoY3VtdWxhdGl2ZUJhc2VGaWxsZWQpLCBtYXhBbW1GaWxsKTtcbiAgICAgICAgICAgICAgICBjb25zdCBbYWZ0ZXJTd2FwUXVvdGVSZXNlcnZlcywgYWZ0ZXJTd2FwQmFzZVJlc2VydmVzXSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVBbW1SZXNlcnZlc0FmdGVyU3dhcCkoYW1tLCAnYmFzZScsIGJhc2VGaWxsZWQsIHN3YXBEaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGFtbUxpcXVpZGl0eSA9IGFtbUxpcXVpZGl0eS5zdWIoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVGaWxsZWQgPSAoMCwgYW1tXzEuY2FsY3VsYXRlUXVvdGVBc3NldEFtb3VudFN3YXBwZWQpKGFtbS5xdW90ZUFzc2V0UmVzZXJ2ZS5zdWIoYWZ0ZXJTd2FwUXVvdGVSZXNlcnZlcykuYWJzKCksIGFtbS5wZWdNdWx0aXBsaWVyLCBzd2FwRGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlQmFzZUZpbGxlZCA9IGN1bXVsYXRpdmVCYXNlRmlsbGVkLmFkZChiYXNlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICBhbW0uYmFzZUFzc2V0UmVzZXJ2ZSA9IGFmdGVyU3dhcEJhc2VSZXNlcnZlcztcbiAgICAgICAgICAgICAgICBhbW0ucXVvdGVBc3NldFJlc2VydmUgPSBhZnRlclN3YXBRdW90ZVJlc2VydmVzO1xuICAgICAgICAgICAgICAgIHdvcnN0UHJpY2UgPSAoMCwgYW1tXzEuY2FsY3VsYXRlUHJpY2UpKGFtbS5iYXNlQXNzZXRSZXNlcnZlLCBhbW0ucXVvdGVBc3NldFJlc2VydmUsIGFtbS5wZWdNdWx0aXBsaWVyKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VtdWxhdGl2ZUJhc2VGaWxsZWQuZXEoYW1vdW50KSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWxpbWl0T3JkZXIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2Vyc1RvU2tpcC5oYXMobGltaXRPcmRlci51c2VyQWNjb3VudCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxsZWQgPSBhbmNob3JfMS5CTi5taW4obGltaXRPcmRlci5vcmRlci5iYXNlQXNzZXRBbW91bnQuc3ViKGxpbWl0T3JkZXIub3JkZXIuYmFzZUFzc2V0QW1vdW50RmlsbGVkKSwgYW1vdW50LnN1YihjdW11bGF0aXZlQmFzZUZpbGxlZCkpO1xuICAgICAgICAgICAgY29uc3QgcXVvdGVGaWxsZWQgPSBiYXNlRmlsbGVkLm11bChsaW1pdE9yZGVyUHJpY2UpLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQkFTRV9QUkVDSVNJT04pO1xuICAgICAgICAgICAgY3VtdWxhdGl2ZUJhc2VGaWxsZWQgPSBjdW11bGF0aXZlQmFzZUZpbGxlZC5hZGQoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgIHdvcnN0UHJpY2UgPSBsaW1pdE9yZGVyUHJpY2U7XG4gICAgICAgICAgICBpZiAoY3VtdWxhdGl2ZUJhc2VGaWxsZWQuZXEoYW1vdW50KSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGltaXRPcmRlciA9IGxpbWl0T3JkZXJzLm5leHQoKS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgd2hpbGUgKCFjdW11bGF0aXZlUXVvdGVGaWxsZWQuZXEoYW1vdW50KSAmJlxuICAgICAgICAgICAgKGFtbUxpcXVpZGl0eS5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgfHwgbGltaXRPcmRlcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbWl0T3JkZXJQcmljZSA9IGxpbWl0T3JkZXIgPT09IG51bGwgfHwgbGltaXRPcmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbGltaXRPcmRlci5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpO1xuICAgICAgICAgICAgbGV0IG1heEFtbUZpbGw7XG4gICAgICAgICAgICBpZiAobGltaXRPcmRlclByaWNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UXVvdGVSZXNlcnZlcyA9ICgwLCB1dGlsc18xLnNxdWFyZVJvb3RCTikoaW52YXJpYW50XG4gICAgICAgICAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBFR19QUkVDSVNJT04pXG4gICAgICAgICAgICAgICAgICAgIC5tdWwobGltaXRPcmRlclByaWNlKVxuICAgICAgICAgICAgICAgICAgICAuZGl2KGFtbS5wZWdNdWx0aXBsaWVyKVxuICAgICAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pKTtcbiAgICAgICAgICAgICAgICAvLyB3aWxsIGJlIHplcm8gaWYgdGhlIGxpbWl0IG9yZGVyIHByaWNlIGlzIGJldHRlciB0aGFuIHRoZSBhbW0gcHJpY2VcbiAgICAgICAgICAgICAgICBtYXhBbW1GaWxsID0gdGFrZXJJc0xvbmdcbiAgICAgICAgICAgICAgICAgICAgPyBuZXdRdW90ZVJlc2VydmVzLnN1YihhbW0ucXVvdGVBc3NldFJlc2VydmUpXG4gICAgICAgICAgICAgICAgICAgIDogYW1tLnF1b3RlQXNzZXRSZXNlcnZlLnN1YihuZXdRdW90ZVJlc2VydmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1heEFtbUZpbGwgPSBhbW91bnQuc3ViKGN1bXVsYXRpdmVRdW90ZUZpbGxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXhBbW1GaWxsID0gYW5jaG9yXzEuQk4ubWluKG1heEFtbUZpbGwsIGFtbUxpcXVpZGl0eSk7XG4gICAgICAgICAgICBpZiAobWF4QW1tRmlsbC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZUZpbGxlZCA9IGFuY2hvcl8xLkJOLm1pbihhbW91bnQuc3ViKGN1bXVsYXRpdmVRdW90ZUZpbGxlZCksIG1heEFtbUZpbGwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IFthZnRlclN3YXBRdW90ZVJlc2VydmVzLCBhZnRlclN3YXBCYXNlUmVzZXJ2ZXNdID0gKDAsIGFtbV8xLmNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwKShhbW0sICdxdW90ZScsIHF1b3RlRmlsbGVkLCBzd2FwRGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICBhbW1MaXF1aWRpdHkgPSBhbW1MaXF1aWRpdHkuc3ViKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlRmlsbGVkID0gYWZ0ZXJTd2FwQmFzZVJlc2VydmVzXG4gICAgICAgICAgICAgICAgICAgIC5zdWIoYW1tLmJhc2VBc3NldFJlc2VydmUpXG4gICAgICAgICAgICAgICAgICAgIC5hYnMoKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlQmFzZUZpbGxlZCA9IGN1bXVsYXRpdmVCYXNlRmlsbGVkLmFkZChiYXNlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICBhbW0uYmFzZUFzc2V0UmVzZXJ2ZSA9IGFmdGVyU3dhcEJhc2VSZXNlcnZlcztcbiAgICAgICAgICAgICAgICBhbW0ucXVvdGVBc3NldFJlc2VydmUgPSBhZnRlclN3YXBRdW90ZVJlc2VydmVzO1xuICAgICAgICAgICAgICAgIHdvcnN0UHJpY2UgPSAoMCwgYW1tXzEuY2FsY3VsYXRlUHJpY2UpKGFtbS5iYXNlQXNzZXRSZXNlcnZlLCBhbW0ucXVvdGVBc3NldFJlc2VydmUsIGFtbS5wZWdNdWx0aXBsaWVyKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VtdWxhdGl2ZVF1b3RlRmlsbGVkLmVxKGFtb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFsaW1pdE9yZGVyKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodXNlcnNUb1NraXAuaGFzKGxpbWl0T3JkZXIudXNlckFjY291bnQpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdW90ZUZpbGxlZCA9IGFuY2hvcl8xLkJOLm1pbihsaW1pdE9yZGVyLm9yZGVyLmJhc2VBc3NldEFtb3VudFxuICAgICAgICAgICAgICAgIC5zdWIobGltaXRPcmRlci5vcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQpXG4gICAgICAgICAgICAgICAgLm11bChsaW1pdE9yZGVyUHJpY2UpXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQkFTRV9QUkVDSVNJT04pLCBhbW91bnQuc3ViKGN1bXVsYXRpdmVRdW90ZUZpbGxlZCkpO1xuICAgICAgICAgICAgY29uc3QgYmFzZUZpbGxlZCA9IHF1b3RlRmlsbGVkLm11bChudW1lcmljQ29uc3RhbnRzXzEuQkFTRV9QUkVDSVNJT04pLmRpdihsaW1pdE9yZGVyUHJpY2UpO1xuICAgICAgICAgICAgY3VtdWxhdGl2ZUJhc2VGaWxsZWQgPSBjdW11bGF0aXZlQmFzZUZpbGxlZC5hZGQoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgIHdvcnN0UHJpY2UgPSBsaW1pdE9yZGVyUHJpY2U7XG4gICAgICAgICAgICBpZiAoY3VtdWxhdGl2ZVF1b3RlRmlsbGVkLmVxKGFtb3VudCkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbWl0T3JkZXIgPSBsaW1pdE9yZGVycy5uZXh0KCkudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZW50cnlQcmljZSA9IGN1bXVsYXRpdmVRdW90ZUZpbGxlZFxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5CQVNFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihjdW11bGF0aXZlQmFzZUZpbGxlZCk7XG4gICAgY29uc3QgcHJpY2VJbXBhY3QgPSBlbnRyeVByaWNlXG4gICAgICAgIC5zdWIoYmVzdFByaWNlKVxuICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pXG4gICAgICAgIC5kaXYoYmVzdFByaWNlKVxuICAgICAgICAuYWJzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW50cnlQcmljZSxcbiAgICAgICAgcHJpY2VJbXBhY3QsXG4gICAgICAgIGJlc3RQcmljZSxcbiAgICAgICAgd29yc3RQcmljZSxcbiAgICAgICAgYmFzZUZpbGxlZDogY3VtdWxhdGl2ZUJhc2VGaWxsZWQsXG4gICAgICAgIHF1b3RlRmlsbGVkOiBjdW11bGF0aXZlUXVvdGVGaWxsZWQsXG4gICAgfTtcbn1cbmV4cG9ydHMuY2FsY3VsYXRlRXN0aW1hdGVkUGVycEVudHJ5UHJpY2UgPSBjYWxjdWxhdGVFc3RpbWF0ZWRQZXJwRW50cnlQcmljZTtcbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXN0aW1hdGVkIGVudHJ5IHByaWNlIGFuZCBwcmljZSBpbXBhY3Qgb2Ygb3JkZXIsIGluIGJhc2Ugb3IgcXVvdGVcbiAqIFByaWNlIGltcGFjdCBpcyBiYXNlZCBvbiB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBlbnRyeSBwcmljZSBhbmQgdGhlIGJlc3QgYmlkL2FzayBwcmljZSAod2hldGhlciBpdCdzIGRsb2Igb3Igc2VydW0pXG4gKlxuICogQHBhcmFtIGFzc2V0VHlwZVxuICogQHBhcmFtIGFtb3VudFxuICogQHBhcmFtIGRpcmVjdGlvblxuICogQHBhcmFtIG1hcmtldFxuICogQHBhcmFtIG9yYWNsZVByaWNlRGF0YVxuICogQHBhcmFtIGRsb2JcbiAqIEBwYXJhbSBzZXJ1bUJpZHNcbiAqIEBwYXJhbSBzZXJ1bUFza3NcbiAqIEBwYXJhbSBzbG90XG4gKiBAcGFyYW0gdXNlcnNUb1NraXBcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlRXN0aW1hdGVkU3BvdEVudHJ5UHJpY2UoYXNzZXRUeXBlLCBhbW91bnQsIGRpcmVjdGlvbiwgbWFya2V0LCBvcmFjbGVQcmljZURhdGEsIGRsb2IsIHNlcnVtQmlkcywgc2VydW1Bc2tzLCBzbG90LCB1c2Vyc1RvU2tpcCA9IG5ldyBNYXAoKSkge1xuICAgIGlmIChhbW91bnQuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbnRyeVByaWNlOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIHByaWNlSW1wYWN0OiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIGJlc3RQcmljZTogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgICAgICB3b3JzdFByaWNlOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIGJhc2VGaWxsZWQ6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPLFxuICAgICAgICAgICAgcXVvdGVGaWxsZWQ6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlUHJlY2lzaW9uID0gbmV3IGFuY2hvcl8xLkJOKE1hdGgucG93KDEwLCBtYXJrZXQuZGVjaW1hbHMpKTtcbiAgICBjb25zdCB0YWtlcklzTG9uZyA9ICgwLCB0eXBlc18yLmlzVmFyaWFudCkoZGlyZWN0aW9uLCAnbG9uZycpO1xuICAgIGNvbnN0IGRsb2JMaW1pdE9yZGVycyA9IGRsb2JbdGFrZXJJc0xvbmcgPyAnZ2V0TWFrZXJMaW1pdEFza3MnIDogJ2dldE1ha2VyTGltaXRCaWRzJ10obWFya2V0Lm1hcmtldEluZGV4LCBzbG90LCB0eXBlc18xLk1hcmtldFR5cGUuU1BPVCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICBjb25zdCBzZXJ1bUxpbWl0T3JkZXJzID0gdGFrZXJJc0xvbmdcbiAgICAgICAgPyBzZXJ1bUFza3MuZ2V0TDIoMTAwKVxuICAgICAgICA6IHNlcnVtQmlkcy5nZXRMMigxMDApO1xuICAgIGxldCBjdW11bGF0aXZlQmFzZUZpbGxlZCA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIGxldCBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICBsZXQgZGxvYkxpbWl0T3JkZXIgPSBkbG9iTGltaXRPcmRlcnMubmV4dCgpLnZhbHVlO1xuICAgIGxldCBzZXJ1bUxpbWl0T3JkZXIgPSBzZXJ1bUxpbWl0T3JkZXJzLnNoaWZ0KCk7XG4gICAgY29uc3QgZGxvYkxpbWl0T3JkZXJQcmljZSA9IGRsb2JMaW1pdE9yZGVyID09PSBudWxsIHx8IGRsb2JMaW1pdE9yZGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkbG9iTGltaXRPcmRlci5nZXRQcmljZShvcmFjbGVQcmljZURhdGEsIHNsb3QpO1xuICAgIGNvbnN0IHNlcnVtTGltaXRPcmRlclByaWNlID0gc2VydW1MaW1pdE9yZGVyXG4gICAgICAgID8gbmV3IGFuY2hvcl8xLkJOKHNlcnVtTGltaXRPcmRlclswXSAqIG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04udG9OdW1iZXIoKSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgYmVzdFByaWNlID0gdGFrZXJJc0xvbmdcbiAgICAgICAgPyBhbmNob3JfMS5CTi5taW4oc2VydW1MaW1pdE9yZGVyUHJpY2UgfHwgbnVtZXJpY0NvbnN0YW50c18xLkJOX01BWCwgZGxvYkxpbWl0T3JkZXJQcmljZSB8fCBudW1lcmljQ29uc3RhbnRzXzEuQk5fTUFYKVxuICAgICAgICA6IGFuY2hvcl8xLkJOLm1heChzZXJ1bUxpbWl0T3JkZXJQcmljZSB8fCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgZGxvYkxpbWl0T3JkZXJQcmljZSB8fCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgbGV0IHdvcnN0UHJpY2UgPSBiZXN0UHJpY2U7XG4gICAgaWYgKGFzc2V0VHlwZSA9PT0gJ2Jhc2UnKSB7XG4gICAgICAgIHdoaWxlICghY3VtdWxhdGl2ZUJhc2VGaWxsZWQuZXEoYW1vdW50KSAmJlxuICAgICAgICAgICAgKGRsb2JMaW1pdE9yZGVyIHx8IHNlcnVtTGltaXRPcmRlcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGRsb2JMaW1pdE9yZGVyUHJpY2UgPSBkbG9iTGltaXRPcmRlciA9PT0gbnVsbCB8fCBkbG9iTGltaXRPcmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGxvYkxpbWl0T3JkZXIuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnVtTGltaXRPcmRlclByaWNlID0gc2VydW1MaW1pdE9yZGVyXG4gICAgICAgICAgICAgICAgPyBuZXcgYW5jaG9yXzEuQk4oc2VydW1MaW1pdE9yZGVyWzBdICogbnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTi50b051bWJlcigpKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgdXNlU2VydW0gPSB0YWtlcklzTG9uZ1xuICAgICAgICAgICAgICAgID8gKHNlcnVtTGltaXRPcmRlclByaWNlIHx8IG51bWVyaWNDb25zdGFudHNfMS5CTl9NQVgpLmx0KGRsb2JMaW1pdE9yZGVyUHJpY2UgfHwgbnVtZXJpY0NvbnN0YW50c18xLkJOX01BWClcbiAgICAgICAgICAgICAgICA6IChzZXJ1bUxpbWl0T3JkZXJQcmljZSB8fCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTykuZ3QoZGxvYkxpbWl0T3JkZXJQcmljZSB8fCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgICAgICAgICBpZiAoIXVzZVNlcnVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRsb2JMaW1pdE9yZGVyICYmIHVzZXJzVG9Ta2lwLmhhcyhkbG9iTGltaXRPcmRlci51c2VyQWNjb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxsZWQgPSBhbmNob3JfMS5CTi5taW4oZGxvYkxpbWl0T3JkZXIub3JkZXIuYmFzZUFzc2V0QW1vdW50LnN1YihkbG9iTGltaXRPcmRlci5vcmRlci5iYXNlQXNzZXRBbW91bnRGaWxsZWQpLCBhbW91bnQuc3ViKGN1bXVsYXRpdmVCYXNlRmlsbGVkKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVGaWxsZWQgPSBiYXNlRmlsbGVkXG4gICAgICAgICAgICAgICAgICAgIC5tdWwoZGxvYkxpbWl0T3JkZXJQcmljZSlcbiAgICAgICAgICAgICAgICAgICAgLmRpdihiYXNlUHJlY2lzaW9uKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlQmFzZUZpbGxlZCA9IGN1bXVsYXRpdmVCYXNlRmlsbGVkLmFkZChiYXNlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICB3b3JzdFByaWNlID0gZGxvYkxpbWl0T3JkZXJQcmljZTtcbiAgICAgICAgICAgICAgICBkbG9iTGltaXRPcmRlciA9IGRsb2JMaW1pdE9yZGVycy5uZXh0KCkudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlRmlsbGVkID0gYW5jaG9yXzEuQk4ubWluKG5ldyBhbmNob3JfMS5CTihzZXJ1bUxpbWl0T3JkZXJbMV0gKiBiYXNlUHJlY2lzaW9uLnRvTnVtYmVyKCkpLCBhbW91bnQuc3ViKGN1bXVsYXRpdmVCYXNlRmlsbGVkKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcXVvdGVGaWxsZWQgPSBiYXNlRmlsbGVkXG4gICAgICAgICAgICAgICAgICAgIC5tdWwoc2VydW1MaW1pdE9yZGVyUHJpY2UpXG4gICAgICAgICAgICAgICAgICAgIC5kaXYoYmFzZVByZWNpc2lvbik7XG4gICAgICAgICAgICAgICAgY3VtdWxhdGl2ZUJhc2VGaWxsZWQgPSBjdW11bGF0aXZlQmFzZUZpbGxlZC5hZGQoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICAgICAgY3VtdWxhdGl2ZVF1b3RlRmlsbGVkID0gY3VtdWxhdGl2ZVF1b3RlRmlsbGVkLmFkZChxdW90ZUZpbGxlZCk7XG4gICAgICAgICAgICAgICAgd29yc3RQcmljZSA9IHNlcnVtTGltaXRPcmRlclByaWNlO1xuICAgICAgICAgICAgICAgIHNlcnVtTGltaXRPcmRlciA9IHNlcnVtTGltaXRPcmRlcnMuc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgd2hpbGUgKCFjdW11bGF0aXZlUXVvdGVGaWxsZWQuZXEoYW1vdW50KSAmJlxuICAgICAgICAgICAgKGRsb2JMaW1pdE9yZGVyIHx8IHNlcnVtTGltaXRPcmRlcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGRsb2JMaW1pdE9yZGVyUHJpY2UgPSBkbG9iTGltaXRPcmRlciA9PT0gbnVsbCB8fCBkbG9iTGltaXRPcmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGxvYkxpbWl0T3JkZXIuZ2V0UHJpY2Uob3JhY2xlUHJpY2VEYXRhLCBzbG90KTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnVtTGltaXRPcmRlclByaWNlID0gc2VydW1MaW1pdE9yZGVyXG4gICAgICAgICAgICAgICAgPyBuZXcgYW5jaG9yXzEuQk4oc2VydW1MaW1pdE9yZGVyWzBdICogbnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTi50b051bWJlcigpKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgdXNlU2VydW0gPSB0YWtlcklzTG9uZ1xuICAgICAgICAgICAgICAgID8gKHNlcnVtTGltaXRPcmRlclByaWNlIHx8IG51bWVyaWNDb25zdGFudHNfMS5CTl9NQVgpLmx0KGRsb2JMaW1pdE9yZGVyUHJpY2UgfHwgbnVtZXJpY0NvbnN0YW50c18xLkJOX01BWClcbiAgICAgICAgICAgICAgICA6IChzZXJ1bUxpbWl0T3JkZXJQcmljZSB8fCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTykuZ3QoZGxvYkxpbWl0T3JkZXJQcmljZSB8fCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgICAgICAgICBpZiAoIXVzZVNlcnVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRsb2JMaW1pdE9yZGVyICYmIHVzZXJzVG9Ta2lwLmhhcyhkbG9iTGltaXRPcmRlci51c2VyQWNjb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHF1b3RlRmlsbGVkID0gYW5jaG9yXzEuQk4ubWluKGRsb2JMaW1pdE9yZGVyLm9yZGVyLmJhc2VBc3NldEFtb3VudFxuICAgICAgICAgICAgICAgICAgICAuc3ViKGRsb2JMaW1pdE9yZGVyLm9yZGVyLmJhc2VBc3NldEFtb3VudEZpbGxlZClcbiAgICAgICAgICAgICAgICAgICAgLm11bChkbG9iTGltaXRPcmRlclByaWNlKVxuICAgICAgICAgICAgICAgICAgICAuZGl2KGJhc2VQcmVjaXNpb24pLCBhbW91bnQuc3ViKGN1bXVsYXRpdmVRdW90ZUZpbGxlZCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxsZWQgPSBxdW90ZUZpbGxlZFxuICAgICAgICAgICAgICAgICAgICAubXVsKGJhc2VQcmVjaXNpb24pXG4gICAgICAgICAgICAgICAgICAgIC5kaXYoZGxvYkxpbWl0T3JkZXJQcmljZSk7XG4gICAgICAgICAgICAgICAgY3VtdWxhdGl2ZUJhc2VGaWxsZWQgPSBjdW11bGF0aXZlQmFzZUZpbGxlZC5hZGQoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICAgICAgY3VtdWxhdGl2ZVF1b3RlRmlsbGVkID0gY3VtdWxhdGl2ZVF1b3RlRmlsbGVkLmFkZChxdW90ZUZpbGxlZCk7XG4gICAgICAgICAgICAgICAgd29yc3RQcmljZSA9IGRsb2JMaW1pdE9yZGVyUHJpY2U7XG4gICAgICAgICAgICAgICAgZGxvYkxpbWl0T3JkZXIgPSBkbG9iTGltaXRPcmRlcnMubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydW1PcmRlckJhc2VBbW91bnQgPSBuZXcgYW5jaG9yXzEuQk4oc2VydW1MaW1pdE9yZGVyWzFdICogYmFzZVByZWNpc2lvbi50b051bWJlcigpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBxdW90ZUZpbGxlZCA9IGFuY2hvcl8xLkJOLm1pbihzZXJ1bU9yZGVyQmFzZUFtb3VudC5tdWwoc2VydW1MaW1pdE9yZGVyUHJpY2UpLmRpdihiYXNlUHJlY2lzaW9uKSwgYW1vdW50LnN1YihjdW11bGF0aXZlUXVvdGVGaWxsZWQpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlRmlsbGVkID0gcXVvdGVGaWxsZWRcbiAgICAgICAgICAgICAgICAgICAgLm11bChiYXNlUHJlY2lzaW9uKVxuICAgICAgICAgICAgICAgICAgICAuZGl2KHNlcnVtTGltaXRPcmRlclByaWNlKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlQmFzZUZpbGxlZCA9IGN1bXVsYXRpdmVCYXNlRmlsbGVkLmFkZChiYXNlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgICAgICB3b3JzdFByaWNlID0gc2VydW1MaW1pdE9yZGVyUHJpY2U7XG4gICAgICAgICAgICAgICAgc2VydW1MaW1pdE9yZGVyID0gc2VydW1MaW1pdE9yZGVycy5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGVudHJ5UHJpY2UgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWRcbiAgICAgICAgLm11bChiYXNlUHJlY2lzaW9uKVxuICAgICAgICAuZGl2KGN1bXVsYXRpdmVCYXNlRmlsbGVkKTtcbiAgICBjb25zdCBwcmljZUltcGFjdCA9IGVudHJ5UHJpY2VcbiAgICAgICAgLnN1YihiZXN0UHJpY2UpXG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihiZXN0UHJpY2UpXG4gICAgICAgIC5hYnMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBlbnRyeVByaWNlLFxuICAgICAgICBwcmljZUltcGFjdCxcbiAgICAgICAgYmVzdFByaWNlLFxuICAgICAgICB3b3JzdFByaWNlLFxuICAgICAgICBiYXNlRmlsbGVkOiBjdW11bGF0aXZlQmFzZUZpbGxlZCxcbiAgICAgICAgcXVvdGVGaWxsZWQ6IGN1bXVsYXRpdmVRdW90ZUZpbGxlZCxcbiAgICB9O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVFc3RpbWF0ZWRTcG90RW50cnlQcmljZSA9IGNhbGN1bGF0ZUVzdGltYXRlZFNwb3RFbnRyeVByaWNlO1xuZnVuY3Rpb24gY2FsY3VsYXRlRXN0aW1hdGVkRW50cnlQcmljZVdpdGhMMihhc3NldFR5cGUsIGFtb3VudCwgZGlyZWN0aW9uLCBiYXNlUHJlY2lzaW9uLCBsMikge1xuICAgIGNvbnN0IHRha2VySXNMb25nID0gKDAsIHR5cGVzXzIuaXNWYXJpYW50KShkaXJlY3Rpb24sICdsb25nJyk7XG4gICAgbGV0IGN1bXVsYXRpdmVCYXNlRmlsbGVkID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgbGV0IGN1bXVsYXRpdmVRdW90ZUZpbGxlZCA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIGNvbnN0IGxldmVscyA9IFsuLi4odGFrZXJJc0xvbmcgPyBsMi5hc2tzIDogbDIuYmlkcyldO1xuICAgIGxldCBuZXh0TGV2ZWwgPSBsZXZlbHMuc2hpZnQoKTtcbiAgICBsZXQgYmVzdFByaWNlO1xuICAgIGxldCB3b3JzdFByaWNlO1xuICAgIGlmIChuZXh0TGV2ZWwpIHtcbiAgICAgICAgYmVzdFByaWNlID0gbmV4dExldmVsLnByaWNlO1xuICAgICAgICB3b3JzdFByaWNlID0gbmV4dExldmVsLnByaWNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYmVzdFByaWNlID0gdGFrZXJJc0xvbmcgPyBudW1lcmljQ29uc3RhbnRzXzEuQk5fTUFYIDogbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIHdvcnN0UHJpY2UgPSBiZXN0UHJpY2U7XG4gICAgfVxuICAgIGlmIChhc3NldFR5cGUgPT09ICdiYXNlJykge1xuICAgICAgICB3aGlsZSAoIWN1bXVsYXRpdmVCYXNlRmlsbGVkLmVxKGFtb3VudCkgJiYgbmV4dExldmVsKSB7XG4gICAgICAgICAgICBjb25zdCBwcmljZSA9IG5leHRMZXZlbC5wcmljZTtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBuZXh0TGV2ZWwuc2l6ZTtcbiAgICAgICAgICAgIHdvcnN0UHJpY2UgPSBwcmljZTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxsZWQgPSBhbmNob3JfMS5CTi5taW4oc2l6ZSwgYW1vdW50LnN1YihjdW11bGF0aXZlQmFzZUZpbGxlZCkpO1xuICAgICAgICAgICAgY29uc3QgcXVvdGVGaWxsZWQgPSBiYXNlRmlsbGVkLm11bChwcmljZSkuZGl2KGJhc2VQcmVjaXNpb24pO1xuICAgICAgICAgICAgY3VtdWxhdGl2ZUJhc2VGaWxsZWQgPSBjdW11bGF0aXZlQmFzZUZpbGxlZC5hZGQoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgIG5leHRMZXZlbCA9IGxldmVscy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB3aGlsZSAoIWN1bXVsYXRpdmVRdW90ZUZpbGxlZC5lcShhbW91bnQpICYmIG5leHRMZXZlbCkge1xuICAgICAgICAgICAgY29uc3QgcHJpY2UgPSBuZXh0TGV2ZWwucHJpY2U7XG4gICAgICAgICAgICBjb25zdCBzaXplID0gbmV4dExldmVsLnNpemU7XG4gICAgICAgICAgICB3b3JzdFByaWNlID0gcHJpY2U7XG4gICAgICAgICAgICBjb25zdCBxdW90ZUZpbGxlZCA9IGFuY2hvcl8xLkJOLm1pbihzaXplLm11bChwcmljZSkuZGl2KGJhc2VQcmVjaXNpb24pLCBhbW91bnQuc3ViKGN1bXVsYXRpdmVRdW90ZUZpbGxlZCkpO1xuICAgICAgICAgICAgY29uc3QgYmFzZUZpbGxlZCA9IHF1b3RlRmlsbGVkLm11bChiYXNlUHJlY2lzaW9uKS5kaXYocHJpY2UpO1xuICAgICAgICAgICAgY3VtdWxhdGl2ZUJhc2VGaWxsZWQgPSBjdW11bGF0aXZlQmFzZUZpbGxlZC5hZGQoYmFzZUZpbGxlZCk7XG4gICAgICAgICAgICBjdW11bGF0aXZlUXVvdGVGaWxsZWQgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWQuYWRkKHF1b3RlRmlsbGVkKTtcbiAgICAgICAgICAgIG5leHRMZXZlbCA9IGxldmVscy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGVudHJ5UHJpY2UgPSBjdW11bGF0aXZlUXVvdGVGaWxsZWRcbiAgICAgICAgLm11bChiYXNlUHJlY2lzaW9uKVxuICAgICAgICAuZGl2KGN1bXVsYXRpdmVCYXNlRmlsbGVkKTtcbiAgICBjb25zdCBwcmljZUltcGFjdCA9IGVudHJ5UHJpY2VcbiAgICAgICAgLnN1YihiZXN0UHJpY2UpXG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihiZXN0UHJpY2UpXG4gICAgICAgIC5hYnMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBlbnRyeVByaWNlLFxuICAgICAgICBwcmljZUltcGFjdCxcbiAgICAgICAgYmVzdFByaWNlLFxuICAgICAgICB3b3JzdFByaWNlLFxuICAgICAgICBiYXNlRmlsbGVkOiBjdW11bGF0aXZlQmFzZUZpbGxlZCxcbiAgICAgICAgcXVvdGVGaWxsZWQ6IGN1bXVsYXRpdmVRdW90ZUZpbGxlZCxcbiAgICB9O1xufVxuZXhwb3J0cy5jYWxjdWxhdGVFc3RpbWF0ZWRFbnRyeVByaWNlV2l0aEwyID0gY2FsY3VsYXRlRXN0aW1hdGVkRW50cnlQcmljZVdpdGhMMjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNhbGN1bGF0ZUVzdGltYXRlZEVudHJ5UHJpY2VXaXRoTDIiLCJjYWxjdWxhdGVFc3RpbWF0ZWRTcG90RW50cnlQcmljZSIsImNhbGN1bGF0ZUVzdGltYXRlZFBlcnBFbnRyeVByaWNlIiwiY2FsY3VsYXRlVGFyZ2V0UHJpY2VUcmFkZSIsImNhbGN1bGF0ZVRyYWRlQWNxdWlyZWRBbW91bnRzIiwiY2FsY3VsYXRlVHJhZGVTbGlwcGFnZSIsInR5cGVzXzEiLCJyZXF1aXJlIiwiYW5jaG9yXzEiLCJhc3NlcnRfMSIsIm51bWVyaWNDb25zdGFudHNfMSIsIm1hcmtldF8xIiwiYW1tXzEiLCJ1dGlsc18xIiwidHlwZXNfMiIsIk1BWFBDVCIsIkJOIiwiZGlyZWN0aW9uIiwiYW1vdW50IiwibWFya2V0IiwiaW5wdXRBc3NldFR5cGUiLCJvcmFjbGVQcmljZURhdGEiLCJ1c2VTcHJlYWQiLCJvbGRQcmljZSIsImFtbSIsImJhc2VTcHJlYWQiLCJpc1ZhcmlhbnQiLCJjYWxjdWxhdGVBc2tQcmljZSIsImNhbGN1bGF0ZUJpZFByaWNlIiwiY2FsY3VsYXRlUmVzZXJ2ZVByaWNlIiwiZXEiLCJaRVJPIiwiYWNxdWlyZWRCYXNlUmVzZXJ2ZSIsImFjcXVpcmVkUXVvdGVSZXNlcnZlIiwiYWNxdWlyZWRRdW90ZUFzc2V0QW1vdW50IiwiZW50cnlQcmljZSIsIm11bCIsIkFNTV9UT19RVU9URV9QUkVDSVNJT05fUkFUSU8iLCJQUklDRV9QUkVDSVNJT04iLCJkaXYiLCJhYnMiLCJiYXNlQXNzZXRSZXNlcnZlIiwicXVvdGVBc3NldFJlc2VydmUiLCJzcXJ0SyIsIm5ld1BlZyIsImNhbGN1bGF0ZVVwZGF0ZWRBTU1TcHJlYWRSZXNlcnZlcyIsInBlZ011bHRpcGxpZXIiLCJuZXdQcmljZSIsImNhbGN1bGF0ZVByaWNlIiwic3ViIiwiUG9zaXRpb25EaXJlY3Rpb24iLCJTSE9SVCIsImFzc2VydCIsImx0ZSIsInBjdE1heFNsaXBwYWdlIiwicGN0QXZnU2xpcHBhZ2UiLCJzd2FwRGlyZWN0aW9uIiwiZ2V0U3dhcERpcmVjdGlvbiIsIm5ld1F1b3RlQXNzZXRSZXNlcnZlIiwibmV3QmFzZUFzc2V0UmVzZXJ2ZSIsImNhbGN1bGF0ZUFtbVJlc2VydmVzQWZ0ZXJTd2FwIiwiYWNxdWlyZWRCYXNlIiwiYWNxdWlyZWRRdW90ZSIsImNhbGN1bGF0ZVF1b3RlQXNzZXRBbW91bnRTd2FwcGVkIiwidGFyZ2V0UHJpY2UiLCJwY3QiLCJvdXRwdXRBc3NldFR5cGUiLCJndCIsInJlc2VydmVQcmljZUJlZm9yZSIsImJpZFByaWNlQmVmb3JlIiwiYXNrUHJpY2VCZWZvcmUiLCJwcmljZUdhcCIsInByaWNlR2FwU2NhbGVkIiwiYWRkIiwiTE9ORyIsInRyYWRlU2l6ZSIsImJhc2VTaXplIiwiYmFzZUFzc2V0UmVzZXJ2ZUJlZm9yZSIsInF1b3RlQXNzZXRSZXNlcnZlQmVmb3JlIiwicGVnIiwiaW52YXJpYW50IiwiayIsImJhc2VBc3NldFJlc2VydmVBZnRlciIsInF1b3RlQXNzZXRSZXNlcnZlQWZ0ZXIiLCJiaWFzTW9kaWZpZXIiLCJtYXJrUHJpY2VBZnRlciIsImx0Iiwic3F1YXJlUm9vdEJOIiwiUEVHX1BSRUNJU0lPTiIsInRwMSIsInRwMiIsIm9yaWdpbmFsRGlmZiIsInRvU3RyaW5nIiwiYXNzZXRUeXBlIiwiZGxvYiIsInNsb3QiLCJ1c2Vyc1RvU2tpcCIsIk1hcCIsInByaWNlSW1wYWN0IiwiYmVzdFByaWNlIiwid29yc3RQcmljZSIsImJhc2VGaWxsZWQiLCJxdW90ZUZpbGxlZCIsInRha2VySXNMb25nIiwibGltaXRPcmRlcnMiLCJtYXJrZXRJbmRleCIsIk1hcmtldFR5cGUiLCJQRVJQIiwiYW1tQmlkcyIsImFtbUFza3MiLCJjYWxjdWxhdGVNYXJrZXRPcGVuQmlkQXNrIiwibWluQmFzZUFzc2V0UmVzZXJ2ZSIsIm1heEJhc2VBc3NldFJlc2VydmUiLCJvcmRlclN0ZXBTaXplIiwiYW1tTGlxdWlkaXR5IiwiYWZ0ZXJTd2FwUXVvdGVSZXNlcnZlcyIsIl8iLCJjdW11bGF0aXZlQmFzZUZpbGxlZCIsImN1bXVsYXRpdmVRdW90ZUZpbGxlZCIsImxpbWl0T3JkZXIiLCJuZXh0IiwibGltaXRPcmRlclByaWNlIiwiZ2V0UHJpY2UiLCJtaW4iLCJtYXgiLCJtYXhBbW1GaWxsIiwibmV3QmFzZVJlc2VydmVzIiwiYWZ0ZXJTd2FwQmFzZVJlc2VydmVzIiwiaGFzIiwidXNlckFjY291bnQiLCJvcmRlciIsImJhc2VBc3NldEFtb3VudCIsImJhc2VBc3NldEFtb3VudEZpbGxlZCIsIkJBU0VfUFJFQ0lTSU9OIiwibmV3UXVvdGVSZXNlcnZlcyIsInNlcnVtQmlkcyIsInNlcnVtQXNrcyIsImJhc2VQcmVjaXNpb24iLCJNYXRoIiwicG93IiwiZGVjaW1hbHMiLCJkbG9iTGltaXRPcmRlcnMiLCJTUE9UIiwic2VydW1MaW1pdE9yZGVycyIsImdldEwyIiwiZGxvYkxpbWl0T3JkZXIiLCJzZXJ1bUxpbWl0T3JkZXIiLCJzaGlmdCIsImRsb2JMaW1pdE9yZGVyUHJpY2UiLCJzZXJ1bUxpbWl0T3JkZXJQcmljZSIsInRvTnVtYmVyIiwidW5kZWZpbmVkIiwiQk5fTUFYIiwidXNlU2VydW0iLCJzZXJ1bU9yZGVyQmFzZUFtb3VudCIsImwyIiwibGV2ZWxzIiwiYXNrcyIsImJpZHMiLCJuZXh0TGV2ZWwiLCJwcmljZSIsInNpemUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/trade.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/math/utils.js":
/*!********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/math/utils.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.timeRemainingUntilUpdate = exports.sigNum = exports.divCeil = exports.squareRootBN = exports.clampBN = void 0;\nconst __1 = __webpack_require__(/*! ../ */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nfunction clampBN(x, min, max) {\n    return __1.BN.max(min, __1.BN.min(x, max));\n}\nexports.clampBN = clampBN;\nconst squareRootBN = (n)=>{\n    if (n.lt(new __1.BN(0))) {\n        throw new Error(\"Sqrt only works on non-negtiave inputs\");\n    }\n    if (n.lt(new __1.BN(2))) {\n        return n;\n    }\n    const smallCand = (0, exports.squareRootBN)(n.shrn(2)).shln(1);\n    const largeCand = smallCand.add(new __1.BN(1));\n    if (largeCand.mul(largeCand).gt(n)) {\n        return smallCand;\n    } else {\n        return largeCand;\n    }\n};\nexports.squareRootBN = squareRootBN;\nconst divCeil = (a, b)=>{\n    const quotient = a.div(b);\n    const remainder = a.mod(b);\n    if (remainder.gt(__1.ZERO)) {\n        return quotient.add(__1.ONE);\n    } else {\n        return quotient;\n    }\n};\nexports.divCeil = divCeil;\nconst sigNum = (x)=>{\n    return x.isNeg() ? new __1.BN(-1) : new __1.BN(1);\n};\nexports.sigNum = sigNum;\n/**\n * calculates the time remaining until the next update based on a rounded, \"on-the-hour\" update schedule\n * this schedule is used for Perpetual Funding Rate and Revenue -> Insurance Updates\n * @param now: current blockchain unix timestamp\n * @param lastUpdateTs: the unix timestamp of the last update\n * @param updatePeriod: desired interval between updates (in seconds)\n * @returns: timeRemainingUntilUpdate (in seconds)\n */ function timeRemainingUntilUpdate(now, lastUpdateTs, updatePeriod) {\n    const timeSinceLastUpdate = now.sub(lastUpdateTs);\n    // round next update time to be available on the hour\n    let nextUpdateWait = updatePeriod;\n    if (updatePeriod.gt(new __1.BN(1))) {\n        const lastUpdateDelay = lastUpdateTs.umod(updatePeriod);\n        if (!lastUpdateDelay.isZero()) {\n            const maxDelayForNextPeriod = updatePeriod.div(new __1.BN(3));\n            const twoFundingPeriods = updatePeriod.mul(new __1.BN(2));\n            if (lastUpdateDelay.gt(maxDelayForNextPeriod)) {\n                // too late for on the hour next period, delay to following period\n                nextUpdateWait = twoFundingPeriods.sub(lastUpdateDelay);\n            } else {\n                // allow update on the hour\n                nextUpdateWait = updatePeriod.sub(lastUpdateDelay);\n            }\n            if (nextUpdateWait.gt(twoFundingPeriods)) {\n                nextUpdateWait = nextUpdateWait.sub(updatePeriod);\n            }\n        }\n    }\n    const timeRemainingUntilUpdate = nextUpdateWait.sub(timeSinceLastUpdate).isNeg() ? __1.ZERO : nextUpdateWait.sub(timeSinceLastUpdate);\n    return timeRemainingUntilUpdate;\n}\nexports.timeRemainingUntilUpdate = timeRemainingUntilUpdate;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3V0aWxzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxnQ0FBZ0MsR0FBR0EsY0FBYyxHQUFHQSxlQUFlLEdBQUdBLG9CQUFvQixHQUFHQSxlQUFlLEdBQUcsS0FBSztBQUNwSCxNQUFNTyxNQUFNQyxtQkFBT0EsQ0FBQyw4REFBSztBQUN6QixTQUFTRixRQUFRRyxDQUFDLEVBQUVDLEdBQUcsRUFBRUMsR0FBRztJQUN4QixPQUFPSixJQUFJSyxFQUFFLENBQUNELEdBQUcsQ0FBQ0QsS0FBS0gsSUFBSUssRUFBRSxDQUFDRixHQUFHLENBQUNELEdBQUdFO0FBQ3pDO0FBQ0FYLGVBQWUsR0FBR007QUFDbEIsTUFBTUQsZUFBZSxDQUFDUTtJQUNsQixJQUFJQSxFQUFFQyxFQUFFLENBQUMsSUFBSVAsSUFBSUssRUFBRSxDQUFDLEtBQUs7UUFDckIsTUFBTSxJQUFJRyxNQUFNO0lBQ3BCO0lBQ0EsSUFBSUYsRUFBRUMsRUFBRSxDQUFDLElBQUlQLElBQUlLLEVBQUUsQ0FBQyxLQUFLO1FBQ3JCLE9BQU9DO0lBQ1g7SUFDQSxNQUFNRyxZQUFZLENBQUMsR0FBR2hCLFFBQVFLLFlBQVksRUFBRVEsRUFBRUksSUFBSSxDQUFDLElBQUlDLElBQUksQ0FBQztJQUM1RCxNQUFNQyxZQUFZSCxVQUFVSSxHQUFHLENBQUMsSUFBSWIsSUFBSUssRUFBRSxDQUFDO0lBQzNDLElBQUlPLFVBQVVFLEdBQUcsQ0FBQ0YsV0FBV0csRUFBRSxDQUFDVCxJQUFJO1FBQ2hDLE9BQU9HO0lBQ1gsT0FDSztRQUNELE9BQU9HO0lBQ1g7QUFDSjtBQUNBbkIsb0JBQW9CLEdBQUdLO0FBQ3ZCLE1BQU1ELFVBQVUsQ0FBQ21CLEdBQUdDO0lBQ2hCLE1BQU1DLFdBQVdGLEVBQUVHLEdBQUcsQ0FBQ0Y7SUFDdkIsTUFBTUcsWUFBWUosRUFBRUssR0FBRyxDQUFDSjtJQUN4QixJQUFJRyxVQUFVTCxFQUFFLENBQUNmLElBQUlzQixJQUFJLEdBQUc7UUFDeEIsT0FBT0osU0FBU0wsR0FBRyxDQUFDYixJQUFJdUIsR0FBRztJQUMvQixPQUNLO1FBQ0QsT0FBT0w7SUFDWDtBQUNKO0FBQ0F6QixlQUFlLEdBQUdJO0FBQ2xCLE1BQU1ELFNBQVMsQ0FBQ007SUFDWixPQUFPQSxFQUFFc0IsS0FBSyxLQUFLLElBQUl4QixJQUFJSyxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUlMLElBQUlLLEVBQUUsQ0FBQztBQUNuRDtBQUNBWixjQUFjLEdBQUdHO0FBQ2pCOzs7Ozs7O0NBT0MsR0FDRCxTQUFTRCx5QkFBeUI4QixHQUFHLEVBQUVDLFlBQVksRUFBRUMsWUFBWTtJQUM3RCxNQUFNQyxzQkFBc0JILElBQUlJLEdBQUcsQ0FBQ0g7SUFDcEMscURBQXFEO0lBQ3JELElBQUlJLGlCQUFpQkg7SUFDckIsSUFBSUEsYUFBYVosRUFBRSxDQUFDLElBQUlmLElBQUlLLEVBQUUsQ0FBQyxLQUFLO1FBQ2hDLE1BQU0wQixrQkFBa0JMLGFBQWFNLElBQUksQ0FBQ0w7UUFDMUMsSUFBSSxDQUFDSSxnQkFBZ0JFLE1BQU0sSUFBSTtZQUMzQixNQUFNQyx3QkFBd0JQLGFBQWFSLEdBQUcsQ0FBQyxJQUFJbkIsSUFBSUssRUFBRSxDQUFDO1lBQzFELE1BQU04QixvQkFBb0JSLGFBQWFiLEdBQUcsQ0FBQyxJQUFJZCxJQUFJSyxFQUFFLENBQUM7WUFDdEQsSUFBSTBCLGdCQUFnQmhCLEVBQUUsQ0FBQ21CLHdCQUF3QjtnQkFDM0Msa0VBQWtFO2dCQUNsRUosaUJBQWlCSyxrQkFBa0JOLEdBQUcsQ0FBQ0U7WUFDM0MsT0FDSztnQkFDRCwyQkFBMkI7Z0JBQzNCRCxpQkFBaUJILGFBQWFFLEdBQUcsQ0FBQ0U7WUFDdEM7WUFDQSxJQUFJRCxlQUFlZixFQUFFLENBQUNvQixvQkFBb0I7Z0JBQ3RDTCxpQkFBaUJBLGVBQWVELEdBQUcsQ0FBQ0Y7WUFDeEM7UUFDSjtJQUNKO0lBQ0EsTUFBTWhDLDJCQUEyQm1DLGVBQzVCRCxHQUFHLENBQUNELHFCQUNKSixLQUFLLEtBQ0p4QixJQUFJc0IsSUFBSSxHQUNSUSxlQUFlRCxHQUFHLENBQUNEO0lBQ3pCLE9BQU9qQztBQUNYO0FBQ0FGLGdDQUFnQyxHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tYXRoL3V0aWxzLmpzPzE5MWQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnRpbWVSZW1haW5pbmdVbnRpbFVwZGF0ZSA9IGV4cG9ydHMuc2lnTnVtID0gZXhwb3J0cy5kaXZDZWlsID0gZXhwb3J0cy5zcXVhcmVSb290Qk4gPSBleHBvcnRzLmNsYW1wQk4gPSB2b2lkIDA7XG5jb25zdCBfXzEgPSByZXF1aXJlKFwiLi4vXCIpO1xuZnVuY3Rpb24gY2xhbXBCTih4LCBtaW4sIG1heCkge1xuICAgIHJldHVybiBfXzEuQk4ubWF4KG1pbiwgX18xLkJOLm1pbih4LCBtYXgpKTtcbn1cbmV4cG9ydHMuY2xhbXBCTiA9IGNsYW1wQk47XG5jb25zdCBzcXVhcmVSb290Qk4gPSAobikgPT4ge1xuICAgIGlmIChuLmx0KG5ldyBfXzEuQk4oMCkpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU3FydCBvbmx5IHdvcmtzIG9uIG5vbi1uZWd0aWF2ZSBpbnB1dHMnKTtcbiAgICB9XG4gICAgaWYgKG4ubHQobmV3IF9fMS5CTigyKSkpIHtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIGNvbnN0IHNtYWxsQ2FuZCA9ICgwLCBleHBvcnRzLnNxdWFyZVJvb3RCTikobi5zaHJuKDIpKS5zaGxuKDEpO1xuICAgIGNvbnN0IGxhcmdlQ2FuZCA9IHNtYWxsQ2FuZC5hZGQobmV3IF9fMS5CTigxKSk7XG4gICAgaWYgKGxhcmdlQ2FuZC5tdWwobGFyZ2VDYW5kKS5ndChuKSkge1xuICAgICAgICByZXR1cm4gc21hbGxDYW5kO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGxhcmdlQ2FuZDtcbiAgICB9XG59O1xuZXhwb3J0cy5zcXVhcmVSb290Qk4gPSBzcXVhcmVSb290Qk47XG5jb25zdCBkaXZDZWlsID0gKGEsIGIpID0+IHtcbiAgICBjb25zdCBxdW90aWVudCA9IGEuZGl2KGIpO1xuICAgIGNvbnN0IHJlbWFpbmRlciA9IGEubW9kKGIpO1xuICAgIGlmIChyZW1haW5kZXIuZ3QoX18xLlpFUk8pKSB7XG4gICAgICAgIHJldHVybiBxdW90aWVudC5hZGQoX18xLk9ORSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcXVvdGllbnQ7XG4gICAgfVxufTtcbmV4cG9ydHMuZGl2Q2VpbCA9IGRpdkNlaWw7XG5jb25zdCBzaWdOdW0gPSAoeCkgPT4ge1xuICAgIHJldHVybiB4LmlzTmVnKCkgPyBuZXcgX18xLkJOKC0xKSA6IG5ldyBfXzEuQk4oMSk7XG59O1xuZXhwb3J0cy5zaWdOdW0gPSBzaWdOdW07XG4vKipcbiAqIGNhbGN1bGF0ZXMgdGhlIHRpbWUgcmVtYWluaW5nIHVudGlsIHRoZSBuZXh0IHVwZGF0ZSBiYXNlZCBvbiBhIHJvdW5kZWQsIFwib24tdGhlLWhvdXJcIiB1cGRhdGUgc2NoZWR1bGVcbiAqIHRoaXMgc2NoZWR1bGUgaXMgdXNlZCBmb3IgUGVycGV0dWFsIEZ1bmRpbmcgUmF0ZSBhbmQgUmV2ZW51ZSAtPiBJbnN1cmFuY2UgVXBkYXRlc1xuICogQHBhcmFtIG5vdzogY3VycmVudCBibG9ja2NoYWluIHVuaXggdGltZXN0YW1wXG4gKiBAcGFyYW0gbGFzdFVwZGF0ZVRzOiB0aGUgdW5peCB0aW1lc3RhbXAgb2YgdGhlIGxhc3QgdXBkYXRlXG4gKiBAcGFyYW0gdXBkYXRlUGVyaW9kOiBkZXNpcmVkIGludGVydmFsIGJldHdlZW4gdXBkYXRlcyAoaW4gc2Vjb25kcylcbiAqIEByZXR1cm5zOiB0aW1lUmVtYWluaW5nVW50aWxVcGRhdGUgKGluIHNlY29uZHMpXG4gKi9cbmZ1bmN0aW9uIHRpbWVSZW1haW5pbmdVbnRpbFVwZGF0ZShub3csIGxhc3RVcGRhdGVUcywgdXBkYXRlUGVyaW9kKSB7XG4gICAgY29uc3QgdGltZVNpbmNlTGFzdFVwZGF0ZSA9IG5vdy5zdWIobGFzdFVwZGF0ZVRzKTtcbiAgICAvLyByb3VuZCBuZXh0IHVwZGF0ZSB0aW1lIHRvIGJlIGF2YWlsYWJsZSBvbiB0aGUgaG91clxuICAgIGxldCBuZXh0VXBkYXRlV2FpdCA9IHVwZGF0ZVBlcmlvZDtcbiAgICBpZiAodXBkYXRlUGVyaW9kLmd0KG5ldyBfXzEuQk4oMSkpKSB7XG4gICAgICAgIGNvbnN0IGxhc3RVcGRhdGVEZWxheSA9IGxhc3RVcGRhdGVUcy51bW9kKHVwZGF0ZVBlcmlvZCk7XG4gICAgICAgIGlmICghbGFzdFVwZGF0ZURlbGF5LmlzWmVybygpKSB7XG4gICAgICAgICAgICBjb25zdCBtYXhEZWxheUZvck5leHRQZXJpb2QgPSB1cGRhdGVQZXJpb2QuZGl2KG5ldyBfXzEuQk4oMykpO1xuICAgICAgICAgICAgY29uc3QgdHdvRnVuZGluZ1BlcmlvZHMgPSB1cGRhdGVQZXJpb2QubXVsKG5ldyBfXzEuQk4oMikpO1xuICAgICAgICAgICAgaWYgKGxhc3RVcGRhdGVEZWxheS5ndChtYXhEZWxheUZvck5leHRQZXJpb2QpKSB7XG4gICAgICAgICAgICAgICAgLy8gdG9vIGxhdGUgZm9yIG9uIHRoZSBob3VyIG5leHQgcGVyaW9kLCBkZWxheSB0byBmb2xsb3dpbmcgcGVyaW9kXG4gICAgICAgICAgICAgICAgbmV4dFVwZGF0ZVdhaXQgPSB0d29GdW5kaW5nUGVyaW9kcy5zdWIobGFzdFVwZGF0ZURlbGF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGFsbG93IHVwZGF0ZSBvbiB0aGUgaG91clxuICAgICAgICAgICAgICAgIG5leHRVcGRhdGVXYWl0ID0gdXBkYXRlUGVyaW9kLnN1YihsYXN0VXBkYXRlRGVsYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5leHRVcGRhdGVXYWl0Lmd0KHR3b0Z1bmRpbmdQZXJpb2RzKSkge1xuICAgICAgICAgICAgICAgIG5leHRVcGRhdGVXYWl0ID0gbmV4dFVwZGF0ZVdhaXQuc3ViKHVwZGF0ZVBlcmlvZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdGltZVJlbWFpbmluZ1VudGlsVXBkYXRlID0gbmV4dFVwZGF0ZVdhaXRcbiAgICAgICAgLnN1Yih0aW1lU2luY2VMYXN0VXBkYXRlKVxuICAgICAgICAuaXNOZWcoKVxuICAgICAgICA/IF9fMS5aRVJPXG4gICAgICAgIDogbmV4dFVwZGF0ZVdhaXQuc3ViKHRpbWVTaW5jZUxhc3RVcGRhdGUpO1xuICAgIHJldHVybiB0aW1lUmVtYWluaW5nVW50aWxVcGRhdGU7XG59XG5leHBvcnRzLnRpbWVSZW1haW5pbmdVbnRpbFVwZGF0ZSA9IHRpbWVSZW1haW5pbmdVbnRpbFVwZGF0ZTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRpbWVSZW1haW5pbmdVbnRpbFVwZGF0ZSIsInNpZ051bSIsImRpdkNlaWwiLCJzcXVhcmVSb290Qk4iLCJjbGFtcEJOIiwiX18xIiwicmVxdWlyZSIsIngiLCJtaW4iLCJtYXgiLCJCTiIsIm4iLCJsdCIsIkVycm9yIiwic21hbGxDYW5kIiwic2hybiIsInNobG4iLCJsYXJnZUNhbmQiLCJhZGQiLCJtdWwiLCJndCIsImEiLCJiIiwicXVvdGllbnQiLCJkaXYiLCJyZW1haW5kZXIiLCJtb2QiLCJaRVJPIiwiT05FIiwiaXNOZWciLCJub3ciLCJsYXN0VXBkYXRlVHMiLCJ1cGRhdGVQZXJpb2QiLCJ0aW1lU2luY2VMYXN0VXBkYXRlIiwic3ViIiwibmV4dFVwZGF0ZVdhaXQiLCJsYXN0VXBkYXRlRGVsYXkiLCJ1bW9kIiwiaXNaZXJvIiwibWF4RGVsYXlGb3JOZXh0UGVyaW9kIiwidHdvRnVuZGluZ1BlcmlvZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/math/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js":
/*!****************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/memcmp.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getUserWithName = exports.getUserThatHasBeenLP = exports.getUserWithAuctionFilter = exports.getUserWithOrderFilter = exports.getNonIdleUserFilter = exports.getUserFilter = void 0;\nconst bs58_1 = __importDefault(__webpack_require__(/*! bs58 */ \"(ssr)/./node_modules/bs58/index.js\"));\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst userName_1 = __webpack_require__(/*! ./userName */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/userName.js\");\nfunction getUserFilter() {\n    return {\n        memcmp: {\n            offset: 0,\n            bytes: bs58_1.default.encode(anchor_1.BorshAccountsCoder.accountDiscriminator(\"User\"))\n        }\n    };\n}\nexports.getUserFilter = getUserFilter;\nfunction getNonIdleUserFilter() {\n    return {\n        memcmp: {\n            offset: 4350,\n            bytes: bs58_1.default.encode(Uint8Array.from([\n                0\n            ]))\n        }\n    };\n}\nexports.getNonIdleUserFilter = getNonIdleUserFilter;\nfunction getUserWithOrderFilter() {\n    return {\n        memcmp: {\n            offset: 4352,\n            bytes: bs58_1.default.encode(Uint8Array.from([\n                1\n            ]))\n        }\n    };\n}\nexports.getUserWithOrderFilter = getUserWithOrderFilter;\nfunction getUserWithAuctionFilter() {\n    return {\n        memcmp: {\n            offset: 4354,\n            bytes: bs58_1.default.encode(Uint8Array.from([\n                1\n            ]))\n        }\n    };\n}\nexports.getUserWithAuctionFilter = getUserWithAuctionFilter;\nfunction getUserThatHasBeenLP() {\n    return {\n        memcmp: {\n            offset: 4267,\n            bytes: bs58_1.default.encode(Uint8Array.from([\n                99\n            ]))\n        }\n    };\n}\nexports.getUserThatHasBeenLP = getUserThatHasBeenLP;\nfunction getUserWithName(name) {\n    return {\n        memcmp: {\n            offset: 72,\n            bytes: bs58_1.default.encode(Uint8Array.from((0, userName_1.encodeName)(name)))\n        }\n    };\n}\nexports.getUserWithName = getUserWithName;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tZW1jbXAuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQUUsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHQSw0QkFBNEIsR0FBR0EsZ0NBQWdDLEdBQUdBLDhCQUE4QixHQUFHQSw0QkFBNEIsR0FBR0EscUJBQXFCLEdBQUcsS0FBSztBQUN6TCxNQUFNUSxTQUFTYixnQkFBZ0JjLG1CQUFPQSxDQUFDLGdEQUFNO0FBQzdDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNRSxhQUFhRixtQkFBT0EsQ0FBQyx3RUFBWTtBQUN2QyxTQUFTRjtJQUNMLE9BQU87UUFDSEssUUFBUTtZQUNKQyxRQUFRO1lBQ1JDLE9BQU9OLE9BQU9PLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDTixTQUFTTyxrQkFBa0IsQ0FBQ0Msb0JBQW9CLENBQUM7UUFDbEY7SUFDSjtBQUNKO0FBQ0FsQixxQkFBcUIsR0FBR087QUFDeEIsU0FBU0Q7SUFDTCxPQUFPO1FBQ0hNLFFBQVE7WUFDSkMsUUFBUTtZQUNSQyxPQUFPTixPQUFPTyxPQUFPLENBQUNDLE1BQU0sQ0FBQ0csV0FBV0MsSUFBSSxDQUFDO2dCQUFDO2FBQUU7UUFDcEQ7SUFDSjtBQUNKO0FBQ0FwQiw0QkFBNEIsR0FBR007QUFDL0IsU0FBU0Q7SUFDTCxPQUFPO1FBQ0hPLFFBQVE7WUFDSkMsUUFBUTtZQUNSQyxPQUFPTixPQUFPTyxPQUFPLENBQUNDLE1BQU0sQ0FBQ0csV0FBV0MsSUFBSSxDQUFDO2dCQUFDO2FBQUU7UUFDcEQ7SUFDSjtBQUNKO0FBQ0FwQiw4QkFBOEIsR0FBR0s7QUFDakMsU0FBU0Q7SUFDTCxPQUFPO1FBQ0hRLFFBQVE7WUFDSkMsUUFBUTtZQUNSQyxPQUFPTixPQUFPTyxPQUFPLENBQUNDLE1BQU0sQ0FBQ0csV0FBV0MsSUFBSSxDQUFDO2dCQUFDO2FBQUU7UUFDcEQ7SUFDSjtBQUNKO0FBQ0FwQixnQ0FBZ0MsR0FBR0k7QUFDbkMsU0FBU0Q7SUFDTCxPQUFPO1FBQ0hTLFFBQVE7WUFDSkMsUUFBUTtZQUNSQyxPQUFPTixPQUFPTyxPQUFPLENBQUNDLE1BQU0sQ0FBQ0csV0FBV0MsSUFBSSxDQUFDO2dCQUFDO2FBQUc7UUFDckQ7SUFDSjtBQUNKO0FBQ0FwQiw0QkFBNEIsR0FBR0c7QUFDL0IsU0FBU0QsZ0JBQWdCbUIsSUFBSTtJQUN6QixPQUFPO1FBQ0hULFFBQVE7WUFDSkMsUUFBUTtZQUNSQyxPQUFPTixPQUFPTyxPQUFPLENBQUNDLE1BQU0sQ0FBQ0csV0FBV0MsSUFBSSxDQUFDLENBQUMsR0FBR1QsV0FBV1csVUFBVSxFQUFFRDtRQUM1RTtJQUNKO0FBQ0o7QUFDQXJCLHVCQUF1QixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9tZW1jbXAuanM/MTE0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuZ2V0VXNlcldpdGhOYW1lID0gZXhwb3J0cy5nZXRVc2VyVGhhdEhhc0JlZW5MUCA9IGV4cG9ydHMuZ2V0VXNlcldpdGhBdWN0aW9uRmlsdGVyID0gZXhwb3J0cy5nZXRVc2VyV2l0aE9yZGVyRmlsdGVyID0gZXhwb3J0cy5nZXROb25JZGxlVXNlckZpbHRlciA9IGV4cG9ydHMuZ2V0VXNlckZpbHRlciA9IHZvaWQgMDtcbmNvbnN0IGJzNThfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiYnM1OFwiKSk7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IHVzZXJOYW1lXzEgPSByZXF1aXJlKFwiLi91c2VyTmFtZVwiKTtcbmZ1bmN0aW9uIGdldFVzZXJGaWx0ZXIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVtY21wOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICBieXRlczogYnM1OF8xLmRlZmF1bHQuZW5jb2RlKGFuY2hvcl8xLkJvcnNoQWNjb3VudHNDb2Rlci5hY2NvdW50RGlzY3JpbWluYXRvcignVXNlcicpKSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0cy5nZXRVc2VyRmlsdGVyID0gZ2V0VXNlckZpbHRlcjtcbmZ1bmN0aW9uIGdldE5vbklkbGVVc2VyRmlsdGVyKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG1lbWNtcDoge1xuICAgICAgICAgICAgb2Zmc2V0OiA0MzUwLFxuICAgICAgICAgICAgYnl0ZXM6IGJzNThfMS5kZWZhdWx0LmVuY29kZShVaW50OEFycmF5LmZyb20oWzBdKSksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydHMuZ2V0Tm9uSWRsZVVzZXJGaWx0ZXIgPSBnZXROb25JZGxlVXNlckZpbHRlcjtcbmZ1bmN0aW9uIGdldFVzZXJXaXRoT3JkZXJGaWx0ZXIoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWVtY21wOiB7XG4gICAgICAgICAgICBvZmZzZXQ6IDQzNTIsXG4gICAgICAgICAgICBieXRlczogYnM1OF8xLmRlZmF1bHQuZW5jb2RlKFVpbnQ4QXJyYXkuZnJvbShbMV0pKSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0cy5nZXRVc2VyV2l0aE9yZGVyRmlsdGVyID0gZ2V0VXNlcldpdGhPcmRlckZpbHRlcjtcbmZ1bmN0aW9uIGdldFVzZXJXaXRoQXVjdGlvbkZpbHRlcigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBtZW1jbXA6IHtcbiAgICAgICAgICAgIG9mZnNldDogNDM1NCxcbiAgICAgICAgICAgIGJ5dGVzOiBiczU4XzEuZGVmYXVsdC5lbmNvZGUoVWludDhBcnJheS5mcm9tKFsxXSkpLFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnRzLmdldFVzZXJXaXRoQXVjdGlvbkZpbHRlciA9IGdldFVzZXJXaXRoQXVjdGlvbkZpbHRlcjtcbmZ1bmN0aW9uIGdldFVzZXJUaGF0SGFzQmVlbkxQKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG1lbWNtcDoge1xuICAgICAgICAgICAgb2Zmc2V0OiA0MjY3LFxuICAgICAgICAgICAgYnl0ZXM6IGJzNThfMS5kZWZhdWx0LmVuY29kZShVaW50OEFycmF5LmZyb20oWzk5XSkpLFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnRzLmdldFVzZXJUaGF0SGFzQmVlbkxQID0gZ2V0VXNlclRoYXRIYXNCZWVuTFA7XG5mdW5jdGlvbiBnZXRVc2VyV2l0aE5hbWUobmFtZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG1lbWNtcDoge1xuICAgICAgICAgICAgb2Zmc2V0OiA3MixcbiAgICAgICAgICAgIGJ5dGVzOiBiczU4XzEuZGVmYXVsdC5lbmNvZGUoVWludDhBcnJheS5mcm9tKCgwLCB1c2VyTmFtZV8xLmVuY29kZU5hbWUpKG5hbWUpKSksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydHMuZ2V0VXNlcldpdGhOYW1lID0gZ2V0VXNlcldpdGhOYW1lO1xuIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldFVzZXJXaXRoTmFtZSIsImdldFVzZXJUaGF0SGFzQmVlbkxQIiwiZ2V0VXNlcldpdGhBdWN0aW9uRmlsdGVyIiwiZ2V0VXNlcldpdGhPcmRlckZpbHRlciIsImdldE5vbklkbGVVc2VyRmlsdGVyIiwiZ2V0VXNlckZpbHRlciIsImJzNThfMSIsInJlcXVpcmUiLCJhbmNob3JfMSIsInVzZXJOYW1lXzEiLCJtZW1jbXAiLCJvZmZzZXQiLCJieXRlcyIsImRlZmF1bHQiLCJlbmNvZGUiLCJCb3JzaEFjY291bnRzQ29kZXIiLCJhY2NvdW50RGlzY3JpbWluYXRvciIsIlVpbnQ4QXJyYXkiLCJmcm9tIiwibmFtZSIsImVuY29kZU5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/oracleClientCache.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/oracles/oracleClientCache.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OracleClientCache = void 0;\nconst oracleClient_1 = __webpack_require__(/*! ../factory/oracleClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/factory/oracleClient.js\");\nclass OracleClientCache {\n    constructor(){\n        this.cache = new Map();\n    }\n    get(oracleSource, connection) {\n        const key = Object.keys(oracleSource)[0];\n        if (this.cache.has(key)) {\n            return this.cache.get(key);\n        }\n        const client = (0, oracleClient_1.getOracleClient)(oracleSource, connection);\n        this.cache.set(key, client);\n        return client;\n    }\n}\nexports.OracleClientCache = OracleClientCache;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmFjbGVzL29yYWNsZUNsaWVudENhY2hlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx5QkFBeUIsR0FBRyxLQUFLO0FBQ2pDLE1BQU1HLGlCQUFpQkMsbUJBQU9BLENBQUMsaUdBQXlCO0FBQ3hELE1BQU1GO0lBQ0ZHLGFBQWM7UUFDVixJQUFJLENBQUNDLEtBQUssR0FBRyxJQUFJQztJQUNyQjtJQUNBQyxJQUFJQyxZQUFZLEVBQUVDLFVBQVUsRUFBRTtRQUMxQixNQUFNQyxNQUFNYixPQUFPYyxJQUFJLENBQUNILGFBQWEsQ0FBQyxFQUFFO1FBQ3hDLElBQUksSUFBSSxDQUFDSCxLQUFLLENBQUNPLEdBQUcsQ0FBQ0YsTUFBTTtZQUNyQixPQUFPLElBQUksQ0FBQ0wsS0FBSyxDQUFDRSxHQUFHLENBQUNHO1FBQzFCO1FBQ0EsTUFBTUcsU0FBUyxDQUFDLEdBQUdYLGVBQWVZLGVBQWUsRUFBRU4sY0FBY0M7UUFDakUsSUFBSSxDQUFDSixLQUFLLENBQUNVLEdBQUcsQ0FBQ0wsS0FBS0c7UUFDcEIsT0FBT0E7SUFDWDtBQUNKO0FBQ0FkLHlCQUF5QixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmFjbGVzL29yYWNsZUNsaWVudENhY2hlLmpzPzE2ZjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLk9yYWNsZUNsaWVudENhY2hlID0gdm9pZCAwO1xuY29uc3Qgb3JhY2xlQ2xpZW50XzEgPSByZXF1aXJlKFwiLi4vZmFjdG9yeS9vcmFjbGVDbGllbnRcIik7XG5jbGFzcyBPcmFjbGVDbGllbnRDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldChvcmFjbGVTb3VyY2UsIGNvbm5lY3Rpb24pIHtcbiAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMob3JhY2xlU291cmNlKVswXTtcbiAgICAgICAgaWYgKHRoaXMuY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsaWVudCA9ICgwLCBvcmFjbGVDbGllbnRfMS5nZXRPcmFjbGVDbGllbnQpKG9yYWNsZVNvdXJjZSwgY29ubmVjdGlvbik7XG4gICAgICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgY2xpZW50KTtcbiAgICAgICAgcmV0dXJuIGNsaWVudDtcbiAgICB9XG59XG5leHBvcnRzLk9yYWNsZUNsaWVudENhY2hlID0gT3JhY2xlQ2xpZW50Q2FjaGU7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJPcmFjbGVDbGllbnRDYWNoZSIsIm9yYWNsZUNsaWVudF8xIiwicmVxdWlyZSIsImNvbnN0cnVjdG9yIiwiY2FjaGUiLCJNYXAiLCJnZXQiLCJvcmFjbGVTb3VyY2UiLCJjb25uZWN0aW9uIiwia2V5Iiwia2V5cyIsImhhcyIsImNsaWVudCIsImdldE9yYWNsZUNsaWVudCIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/oracleClientCache.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/pythClient.js":
/*!****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/oracles/pythClient.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.convertPythPrice = exports.PythClient = void 0;\nconst client_1 = __webpack_require__(/*! @pythnetwork/client */ \"(ssr)/./node_modules/@pythnetwork/client/lib/index.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nclass PythClient {\n    constructor(connection, multiple = numericConstants_1.ONE, stableCoin = false){\n        this.connection = connection;\n        this.multiple = multiple;\n        this.stableCoin = stableCoin;\n    }\n    async getOraclePriceData(pricePublicKey) {\n        const accountInfo = await this.connection.getAccountInfo(pricePublicKey);\n        return this.getOraclePriceDataFromBuffer(accountInfo.data);\n    }\n    getOraclePriceDataFromBuffer(buffer) {\n        const priceData = (0, client_1.parsePriceData)(buffer);\n        const confidence = convertPythPrice(priceData.confidence, priceData.exponent, this.multiple);\n        let price = convertPythPrice(priceData.aggregate.price, priceData.exponent, this.multiple);\n        if (this.stableCoin) {\n            price = getStableCoinPrice(price, confidence);\n        }\n        return {\n            price,\n            slot: new anchor_1.BN(priceData.lastSlot.toString()),\n            confidence,\n            twap: convertPythPrice(priceData.twap.value, priceData.exponent, this.multiple),\n            twapConfidence: convertPythPrice(priceData.twac.value, priceData.exponent, this.multiple),\n            hasSufficientNumberOfDataPoints: true\n        };\n    }\n}\nexports.PythClient = PythClient;\nfunction convertPythPrice(price, exponent, multiple) {\n    exponent = Math.abs(exponent);\n    const pythPrecision = numericConstants_1.TEN.pow(new anchor_1.BN(exponent).abs()).div(multiple);\n    return new anchor_1.BN(price * Math.pow(10, exponent)).mul(numericConstants_1.PRICE_PRECISION).div(pythPrecision);\n}\nexports.convertPythPrice = convertPythPrice;\nconst fiveBPS = new anchor_1.BN(500);\nfunction getStableCoinPrice(price, confidence) {\n    if (price.sub(numericConstants_1.QUOTE_PRECISION).abs().lt(anchor_1.BN.min(confidence, fiveBPS))) {\n        return numericConstants_1.QUOTE_PRECISION;\n    } else {\n        return price;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmFjbGVzL3B5dGhDbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHdCQUF3QixHQUFHQSxrQkFBa0IsR0FBRyxLQUFLO0FBQ3JELE1BQU1JLFdBQVdDLG1CQUFPQSxDQUFDLGtGQUFxQjtBQUM5QyxNQUFNQyxXQUFXRCxtQkFBT0EsQ0FBQyxtRkFBbUI7QUFDNUMsTUFBTUUscUJBQXFCRixtQkFBT0EsQ0FBQyw2R0FBK0I7QUFDbEUsTUFBTUY7SUFDRkssWUFBWUMsVUFBVSxFQUFFQyxXQUFXSCxtQkFBbUJJLEdBQUcsRUFBRUMsYUFBYSxLQUFLLENBQUU7UUFDM0UsSUFBSSxDQUFDSCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNFLFVBQVUsR0FBR0E7SUFDdEI7SUFDQSxNQUFNQyxtQkFBbUJDLGNBQWMsRUFBRTtRQUNyQyxNQUFNQyxjQUFjLE1BQU0sSUFBSSxDQUFDTixVQUFVLENBQUNPLGNBQWMsQ0FBQ0Y7UUFDekQsT0FBTyxJQUFJLENBQUNHLDRCQUE0QixDQUFDRixZQUFZRyxJQUFJO0lBQzdEO0lBQ0FELDZCQUE2QkUsTUFBTSxFQUFFO1FBQ2pDLE1BQU1DLFlBQVksQ0FBQyxHQUFHaEIsU0FBU2lCLGNBQWMsRUFBRUY7UUFDL0MsTUFBTUcsYUFBYXBCLGlCQUFpQmtCLFVBQVVFLFVBQVUsRUFBRUYsVUFBVUcsUUFBUSxFQUFFLElBQUksQ0FBQ2IsUUFBUTtRQUMzRixJQUFJYyxRQUFRdEIsaUJBQWlCa0IsVUFBVUssU0FBUyxDQUFDRCxLQUFLLEVBQUVKLFVBQVVHLFFBQVEsRUFBRSxJQUFJLENBQUNiLFFBQVE7UUFDekYsSUFBSSxJQUFJLENBQUNFLFVBQVUsRUFBRTtZQUNqQlksUUFBUUUsbUJBQW1CRixPQUFPRjtRQUN0QztRQUNBLE9BQU87WUFDSEU7WUFDQUcsTUFBTSxJQUFJckIsU0FBU3NCLEVBQUUsQ0FBQ1IsVUFBVVMsUUFBUSxDQUFDQyxRQUFRO1lBQ2pEUjtZQUNBUyxNQUFNN0IsaUJBQWlCa0IsVUFBVVcsSUFBSSxDQUFDOUIsS0FBSyxFQUFFbUIsVUFBVUcsUUFBUSxFQUFFLElBQUksQ0FBQ2IsUUFBUTtZQUM5RXNCLGdCQUFnQjlCLGlCQUFpQmtCLFVBQVVhLElBQUksQ0FBQ2hDLEtBQUssRUFBRW1CLFVBQVVHLFFBQVEsRUFBRSxJQUFJLENBQUNiLFFBQVE7WUFDeEZ3QixpQ0FBaUM7UUFDckM7SUFDSjtBQUNKO0FBQ0FsQyxrQkFBa0IsR0FBR0c7QUFDckIsU0FBU0QsaUJBQWlCc0IsS0FBSyxFQUFFRCxRQUFRLEVBQUViLFFBQVE7SUFDL0NhLFdBQVdZLEtBQUtDLEdBQUcsQ0FBQ2I7SUFDcEIsTUFBTWMsZ0JBQWdCOUIsbUJBQW1CK0IsR0FBRyxDQUFDQyxHQUFHLENBQUMsSUFBSWpDLFNBQVNzQixFQUFFLENBQUNMLFVBQVVhLEdBQUcsSUFBSUksR0FBRyxDQUFDOUI7SUFDdEYsT0FBTyxJQUFJSixTQUFTc0IsRUFBRSxDQUFDSixRQUFRVyxLQUFLSSxHQUFHLENBQUMsSUFBSWhCLFdBQ3ZDa0IsR0FBRyxDQUFDbEMsbUJBQW1CbUMsZUFBZSxFQUN0Q0YsR0FBRyxDQUFDSDtBQUNiO0FBQ0FyQyx3QkFBd0IsR0FBR0U7QUFDM0IsTUFBTXlDLFVBQVUsSUFBSXJDLFNBQVNzQixFQUFFLENBQUM7QUFDaEMsU0FBU0YsbUJBQW1CRixLQUFLLEVBQUVGLFVBQVU7SUFDekMsSUFBSUUsTUFBTW9CLEdBQUcsQ0FBQ3JDLG1CQUFtQnNDLGVBQWUsRUFBRVQsR0FBRyxHQUFHVSxFQUFFLENBQUN4QyxTQUFTc0IsRUFBRSxDQUFDbUIsR0FBRyxDQUFDekIsWUFBWXFCLFdBQVc7UUFDOUYsT0FBT3BDLG1CQUFtQnNDLGVBQWU7SUFDN0MsT0FDSztRQUNELE9BQU9yQjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvb3JhY2xlcy9weXRoQ2xpZW50LmpzP2I1YmIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNvbnZlcnRQeXRoUHJpY2UgPSBleHBvcnRzLlB5dGhDbGllbnQgPSB2b2lkIDA7XG5jb25zdCBjbGllbnRfMSA9IHJlcXVpcmUoXCJAcHl0aG5ldHdvcmsvY2xpZW50XCIpO1xuY29uc3QgYW5jaG9yXzEgPSByZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5jbGFzcyBQeXRoQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCBtdWx0aXBsZSA9IG51bWVyaWNDb25zdGFudHNfMS5PTkUsIHN0YWJsZUNvaW4gPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLm11bHRpcGxlID0gbXVsdGlwbGU7XG4gICAgICAgIHRoaXMuc3RhYmxlQ29pbiA9IHN0YWJsZUNvaW47XG4gICAgfVxuICAgIGFzeW5jIGdldE9yYWNsZVByaWNlRGF0YShwcmljZVB1YmxpY0tleSkge1xuICAgICAgICBjb25zdCBhY2NvdW50SW5mbyA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRBY2NvdW50SW5mbyhwcmljZVB1YmxpY0tleSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIoYWNjb3VudEluZm8uZGF0YSk7XG4gICAgfVxuICAgIGdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIoYnVmZmVyKSB7XG4gICAgICAgIGNvbnN0IHByaWNlRGF0YSA9ICgwLCBjbGllbnRfMS5wYXJzZVByaWNlRGF0YSkoYnVmZmVyKTtcbiAgICAgICAgY29uc3QgY29uZmlkZW5jZSA9IGNvbnZlcnRQeXRoUHJpY2UocHJpY2VEYXRhLmNvbmZpZGVuY2UsIHByaWNlRGF0YS5leHBvbmVudCwgdGhpcy5tdWx0aXBsZSk7XG4gICAgICAgIGxldCBwcmljZSA9IGNvbnZlcnRQeXRoUHJpY2UocHJpY2VEYXRhLmFnZ3JlZ2F0ZS5wcmljZSwgcHJpY2VEYXRhLmV4cG9uZW50LCB0aGlzLm11bHRpcGxlKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhYmxlQ29pbikge1xuICAgICAgICAgICAgcHJpY2UgPSBnZXRTdGFibGVDb2luUHJpY2UocHJpY2UsIGNvbmZpZGVuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcmljZSxcbiAgICAgICAgICAgIHNsb3Q6IG5ldyBhbmNob3JfMS5CTihwcmljZURhdGEubGFzdFNsb3QudG9TdHJpbmcoKSksXG4gICAgICAgICAgICBjb25maWRlbmNlLFxuICAgICAgICAgICAgdHdhcDogY29udmVydFB5dGhQcmljZShwcmljZURhdGEudHdhcC52YWx1ZSwgcHJpY2VEYXRhLmV4cG9uZW50LCB0aGlzLm11bHRpcGxlKSxcbiAgICAgICAgICAgIHR3YXBDb25maWRlbmNlOiBjb252ZXJ0UHl0aFByaWNlKHByaWNlRGF0YS50d2FjLnZhbHVlLCBwcmljZURhdGEuZXhwb25lbnQsIHRoaXMubXVsdGlwbGUpLFxuICAgICAgICAgICAgaGFzU3VmZmljaWVudE51bWJlck9mRGF0YVBvaW50czogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnRzLlB5dGhDbGllbnQgPSBQeXRoQ2xpZW50O1xuZnVuY3Rpb24gY29udmVydFB5dGhQcmljZShwcmljZSwgZXhwb25lbnQsIG11bHRpcGxlKSB7XG4gICAgZXhwb25lbnQgPSBNYXRoLmFicyhleHBvbmVudCk7XG4gICAgY29uc3QgcHl0aFByZWNpc2lvbiA9IG51bWVyaWNDb25zdGFudHNfMS5URU4ucG93KG5ldyBhbmNob3JfMS5CTihleHBvbmVudCkuYWJzKCkpLmRpdihtdWx0aXBsZSk7XG4gICAgcmV0dXJuIG5ldyBhbmNob3JfMS5CTihwcmljZSAqIE1hdGgucG93KDEwLCBleHBvbmVudCkpXG4gICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgLmRpdihweXRoUHJlY2lzaW9uKTtcbn1cbmV4cG9ydHMuY29udmVydFB5dGhQcmljZSA9IGNvbnZlcnRQeXRoUHJpY2U7XG5jb25zdCBmaXZlQlBTID0gbmV3IGFuY2hvcl8xLkJOKDUwMCk7XG5mdW5jdGlvbiBnZXRTdGFibGVDb2luUHJpY2UocHJpY2UsIGNvbmZpZGVuY2UpIHtcbiAgICBpZiAocHJpY2Uuc3ViKG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT04pLmFicygpLmx0KGFuY2hvcl8xLkJOLm1pbihjb25maWRlbmNlLCBmaXZlQlBTKSkpIHtcbiAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT047XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcHJpY2U7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY29udmVydFB5dGhQcmljZSIsIlB5dGhDbGllbnQiLCJjbGllbnRfMSIsInJlcXVpcmUiLCJhbmNob3JfMSIsIm51bWVyaWNDb25zdGFudHNfMSIsImNvbnN0cnVjdG9yIiwiY29ubmVjdGlvbiIsIm11bHRpcGxlIiwiT05FIiwic3RhYmxlQ29pbiIsImdldE9yYWNsZVByaWNlRGF0YSIsInByaWNlUHVibGljS2V5IiwiYWNjb3VudEluZm8iLCJnZXRBY2NvdW50SW5mbyIsImdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIiLCJkYXRhIiwiYnVmZmVyIiwicHJpY2VEYXRhIiwicGFyc2VQcmljZURhdGEiLCJjb25maWRlbmNlIiwiZXhwb25lbnQiLCJwcmljZSIsImFnZ3JlZ2F0ZSIsImdldFN0YWJsZUNvaW5QcmljZSIsInNsb3QiLCJCTiIsImxhc3RTbG90IiwidG9TdHJpbmciLCJ0d2FwIiwidHdhcENvbmZpZGVuY2UiLCJ0d2FjIiwiaGFzU3VmZmljaWVudE51bWJlck9mRGF0YVBvaW50cyIsIk1hdGgiLCJhYnMiLCJweXRoUHJlY2lzaW9uIiwiVEVOIiwicG93IiwiZGl2IiwibXVsIiwiUFJJQ0VfUFJFQ0lTSU9OIiwiZml2ZUJQUyIsInN1YiIsIlFVT1RFX1BSRUNJU0lPTiIsImx0IiwibWluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/pythClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/quoteAssetOracleClient.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/oracles/quoteAssetOracleClient.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.QuoteAssetOracleClient = exports.QUOTE_ORACLE_PRICE_DATA = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nexports.QUOTE_ORACLE_PRICE_DATA = {\n    price: numericConstants_1.PRICE_PRECISION,\n    slot: new anchor_1.BN(0),\n    confidence: new anchor_1.BN(1),\n    hasSufficientNumberOfDataPoints: true\n};\nclass QuoteAssetOracleClient {\n    constructor(){}\n    async getOraclePriceData(_pricePublicKey) {\n        return Promise.resolve(exports.QUOTE_ORACLE_PRICE_DATA);\n    }\n    getOraclePriceDataFromBuffer(_buffer) {\n        return exports.QUOTE_ORACLE_PRICE_DATA;\n    }\n}\nexports.QuoteAssetOracleClient = QuoteAssetOracleClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmFjbGVzL3F1b3RlQXNzZXRPcmFjbGVDbGllbnQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDhCQUE4QixHQUFHQSwrQkFBK0IsR0FBRyxLQUFLO0FBQ3hFLE1BQU1JLFdBQVdDLG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNQyxxQkFBcUJELG1CQUFPQSxDQUFDLDZHQUErQjtBQUNsRUwsK0JBQStCLEdBQUc7SUFDOUJPLE9BQU9ELG1CQUFtQkUsZUFBZTtJQUN6Q0MsTUFBTSxJQUFJTCxTQUFTTSxFQUFFLENBQUM7SUFDdEJDLFlBQVksSUFBSVAsU0FBU00sRUFBRSxDQUFDO0lBQzVCRSxpQ0FBaUM7QUFDckM7QUFDQSxNQUFNVjtJQUNGVyxhQUFjLENBQUU7SUFDaEIsTUFBTUMsbUJBQW1CQyxlQUFlLEVBQUU7UUFDdEMsT0FBT0MsUUFBUUMsT0FBTyxDQUFDakIsUUFBUUcsdUJBQXVCO0lBQzFEO0lBQ0FlLDZCQUE2QkMsT0FBTyxFQUFFO1FBQ2xDLE9BQU9uQixRQUFRRyx1QkFBdUI7SUFDMUM7QUFDSjtBQUNBSCw4QkFBOEIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvb3JhY2xlcy9xdW90ZUFzc2V0T3JhY2xlQ2xpZW50LmpzPzBmYTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlF1b3RlQXNzZXRPcmFjbGVDbGllbnQgPSBleHBvcnRzLlFVT1RFX09SQUNMRV9QUklDRV9EQVRBID0gdm9pZCAwO1xuY29uc3QgYW5jaG9yXzEgPSByZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RhbnRzL251bWVyaWNDb25zdGFudHNcIik7XG5leHBvcnRzLlFVT1RFX09SQUNMRV9QUklDRV9EQVRBID0ge1xuICAgIHByaWNlOiBudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OLFxuICAgIHNsb3Q6IG5ldyBhbmNob3JfMS5CTigwKSxcbiAgICBjb25maWRlbmNlOiBuZXcgYW5jaG9yXzEuQk4oMSksXG4gICAgaGFzU3VmZmljaWVudE51bWJlck9mRGF0YVBvaW50czogdHJ1ZSxcbn07XG5jbGFzcyBRdW90ZUFzc2V0T3JhY2xlQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIGFzeW5jIGdldE9yYWNsZVByaWNlRGF0YShfcHJpY2VQdWJsaWNLZXkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShleHBvcnRzLlFVT1RFX09SQUNMRV9QUklDRV9EQVRBKTtcbiAgICB9XG4gICAgZ2V0T3JhY2xlUHJpY2VEYXRhRnJvbUJ1ZmZlcihfYnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBleHBvcnRzLlFVT1RFX09SQUNMRV9QUklDRV9EQVRBO1xuICAgIH1cbn1cbmV4cG9ydHMuUXVvdGVBc3NldE9yYWNsZUNsaWVudCA9IFF1b3RlQXNzZXRPcmFjbGVDbGllbnQ7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJRdW90ZUFzc2V0T3JhY2xlQ2xpZW50IiwiUVVPVEVfT1JBQ0xFX1BSSUNFX0RBVEEiLCJhbmNob3JfMSIsInJlcXVpcmUiLCJudW1lcmljQ29uc3RhbnRzXzEiLCJwcmljZSIsIlBSSUNFX1BSRUNJU0lPTiIsInNsb3QiLCJCTiIsImNvbmZpZGVuY2UiLCJoYXNTdWZmaWNpZW50TnVtYmVyT2ZEYXRhUG9pbnRzIiwiY29uc3RydWN0b3IiLCJnZXRPcmFjbGVQcmljZURhdGEiLCJfcHJpY2VQdWJsaWNLZXkiLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldE9yYWNsZVByaWNlRGF0YUZyb21CdWZmZXIiLCJfYnVmZmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/quoteAssetOracleClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/types.js":
/*!***********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/oracles/types.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmFjbGVzL3R5cGVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL29yYWNsZXMvdHlwZXMuanM/Y2VhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/oracles/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/orderParams.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/orderParams.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.getOrderParams = exports.getMarketOrderParams = exports.getTriggerLimitOrderParams = exports.getTriggerMarketOrderParams = exports.getLimitOrderParams = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nfunction getLimitOrderParams(params) {\n    return Object.assign({}, params, {\n        orderType: types_1.OrderType.LIMIT\n    });\n}\nexports.getLimitOrderParams = getLimitOrderParams;\nfunction getTriggerMarketOrderParams(params) {\n    return Object.assign({}, params, {\n        orderType: types_1.OrderType.TRIGGER_MARKET\n    });\n}\nexports.getTriggerMarketOrderParams = getTriggerMarketOrderParams;\nfunction getTriggerLimitOrderParams(params) {\n    return Object.assign({}, params, {\n        orderType: types_1.OrderType.TRIGGER_LIMIT\n    });\n}\nexports.getTriggerLimitOrderParams = getTriggerLimitOrderParams;\nfunction getMarketOrderParams(params) {\n    return Object.assign({}, params, {\n        orderType: types_1.OrderType.MARKET\n    });\n}\nexports.getMarketOrderParams = getMarketOrderParams;\n/**\n * Creates an OrderParams object with the given OptionalOrderParams and any params to override.\n *\n * example:\n * ```\n * const orderParams = getOrderParams(optionalOrderParams, { marketType: MarketType.PERP });\n * ```\n *\n * @param optionalOrderParams\n * @param overridingParams\n * @returns\n */ function getOrderParams(optionalOrderParams, overridingParams = {}) {\n    return Object.assign({}, types_1.DefaultOrderParams, optionalOrderParams, overridingParams);\n}\nexports.getOrderParams = getOrderParams;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmRlclBhcmFtcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUdBLDRCQUE0QixHQUFHQSxrQ0FBa0MsR0FBR0EsbUNBQW1DLEdBQUdBLDJCQUEyQixHQUFHLEtBQUs7QUFDdEssTUFBTU8sVUFBVUMsbUJBQU9BLENBQUMsa0VBQVM7QUFDakMsU0FBU0Ysb0JBQW9CRyxNQUFNO0lBQy9CLE9BQU9YLE9BQU9ZLE1BQU0sQ0FBQyxDQUFDLEdBQUdELFFBQVE7UUFDN0JFLFdBQVdKLFFBQVFLLFNBQVMsQ0FBQ0MsS0FBSztJQUN0QztBQUNKO0FBQ0FiLDJCQUEyQixHQUFHTTtBQUM5QixTQUFTRCw0QkFBNEJJLE1BQU07SUFDdkMsT0FBT1gsT0FBT1ksTUFBTSxDQUFDLENBQUMsR0FBR0QsUUFBUTtRQUM3QkUsV0FBV0osUUFBUUssU0FBUyxDQUFDRSxjQUFjO0lBQy9DO0FBQ0o7QUFDQWQsbUNBQW1DLEdBQUdLO0FBQ3RDLFNBQVNELDJCQUEyQkssTUFBTTtJQUN0QyxPQUFPWCxPQUFPWSxNQUFNLENBQUMsQ0FBQyxHQUFHRCxRQUFRO1FBQzdCRSxXQUFXSixRQUFRSyxTQUFTLENBQUNHLGFBQWE7SUFDOUM7QUFDSjtBQUNBZixrQ0FBa0MsR0FBR0k7QUFDckMsU0FBU0QscUJBQXFCTSxNQUFNO0lBQ2hDLE9BQU9YLE9BQU9ZLE1BQU0sQ0FBQyxDQUFDLEdBQUdELFFBQVE7UUFDN0JFLFdBQVdKLFFBQVFLLFNBQVMsQ0FBQ0ksTUFBTTtJQUN2QztBQUNKO0FBQ0FoQiw0QkFBNEIsR0FBR0c7QUFDL0I7Ozs7Ozs7Ozs7O0NBV0MsR0FDRCxTQUFTRCxlQUFlZSxtQkFBbUIsRUFBRUMsbUJBQW1CLENBQUMsQ0FBQztJQUM5RCxPQUFPcEIsT0FBT1ksTUFBTSxDQUFDLENBQUMsR0FBR0gsUUFBUVksa0JBQWtCLEVBQUVGLHFCQUFxQkM7QUFDOUU7QUFDQWxCLHNCQUFzQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmRlclBhcmFtcy5qcz8zMTBiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5nZXRPcmRlclBhcmFtcyA9IGV4cG9ydHMuZ2V0TWFya2V0T3JkZXJQYXJhbXMgPSBleHBvcnRzLmdldFRyaWdnZXJMaW1pdE9yZGVyUGFyYW1zID0gZXhwb3J0cy5nZXRUcmlnZ2VyTWFya2V0T3JkZXJQYXJhbXMgPSBleHBvcnRzLmdldExpbWl0T3JkZXJQYXJhbXMgPSB2b2lkIDA7XG5jb25zdCB0eXBlc18xID0gcmVxdWlyZShcIi4vdHlwZXNcIik7XG5mdW5jdGlvbiBnZXRMaW1pdE9yZGVyUGFyYW1zKHBhcmFtcykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgb3JkZXJUeXBlOiB0eXBlc18xLk9yZGVyVHlwZS5MSU1JVCxcbiAgICB9KTtcbn1cbmV4cG9ydHMuZ2V0TGltaXRPcmRlclBhcmFtcyA9IGdldExpbWl0T3JkZXJQYXJhbXM7XG5mdW5jdGlvbiBnZXRUcmlnZ2VyTWFya2V0T3JkZXJQYXJhbXMocGFyYW1zKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywge1xuICAgICAgICBvcmRlclR5cGU6IHR5cGVzXzEuT3JkZXJUeXBlLlRSSUdHRVJfTUFSS0VULFxuICAgIH0pO1xufVxuZXhwb3J0cy5nZXRUcmlnZ2VyTWFya2V0T3JkZXJQYXJhbXMgPSBnZXRUcmlnZ2VyTWFya2V0T3JkZXJQYXJhbXM7XG5mdW5jdGlvbiBnZXRUcmlnZ2VyTGltaXRPcmRlclBhcmFtcyhwYXJhbXMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCB7XG4gICAgICAgIG9yZGVyVHlwZTogdHlwZXNfMS5PcmRlclR5cGUuVFJJR0dFUl9MSU1JVCxcbiAgICB9KTtcbn1cbmV4cG9ydHMuZ2V0VHJpZ2dlckxpbWl0T3JkZXJQYXJhbXMgPSBnZXRUcmlnZ2VyTGltaXRPcmRlclBhcmFtcztcbmZ1bmN0aW9uIGdldE1hcmtldE9yZGVyUGFyYW1zKHBhcmFtcykge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgb3JkZXJUeXBlOiB0eXBlc18xLk9yZGVyVHlwZS5NQVJLRVQsXG4gICAgfSk7XG59XG5leHBvcnRzLmdldE1hcmtldE9yZGVyUGFyYW1zID0gZ2V0TWFya2V0T3JkZXJQYXJhbXM7XG4vKipcbiAqIENyZWF0ZXMgYW4gT3JkZXJQYXJhbXMgb2JqZWN0IHdpdGggdGhlIGdpdmVuIE9wdGlvbmFsT3JkZXJQYXJhbXMgYW5kIGFueSBwYXJhbXMgdG8gb3ZlcnJpZGUuXG4gKlxuICogZXhhbXBsZTpcbiAqIGBgYFxuICogY29uc3Qgb3JkZXJQYXJhbXMgPSBnZXRPcmRlclBhcmFtcyhvcHRpb25hbE9yZGVyUGFyYW1zLCB7IG1hcmtldFR5cGU6IE1hcmtldFR5cGUuUEVSUCB9KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBvcHRpb25hbE9yZGVyUGFyYW1zXG4gKiBAcGFyYW0gb3ZlcnJpZGluZ1BhcmFtc1xuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gZ2V0T3JkZXJQYXJhbXMob3B0aW9uYWxPcmRlclBhcmFtcywgb3ZlcnJpZGluZ1BhcmFtcyA9IHt9KSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHR5cGVzXzEuRGVmYXVsdE9yZGVyUGFyYW1zLCBvcHRpb25hbE9yZGVyUGFyYW1zLCBvdmVycmlkaW5nUGFyYW1zKTtcbn1cbmV4cG9ydHMuZ2V0T3JkZXJQYXJhbXMgPSBnZXRPcmRlclBhcmFtcztcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImdldE9yZGVyUGFyYW1zIiwiZ2V0TWFya2V0T3JkZXJQYXJhbXMiLCJnZXRUcmlnZ2VyTGltaXRPcmRlclBhcmFtcyIsImdldFRyaWdnZXJNYXJrZXRPcmRlclBhcmFtcyIsImdldExpbWl0T3JkZXJQYXJhbXMiLCJ0eXBlc18xIiwicmVxdWlyZSIsInBhcmFtcyIsImFzc2lnbiIsIm9yZGVyVHlwZSIsIk9yZGVyVHlwZSIsIkxJTUlUIiwiVFJJR0dFUl9NQVJLRVQiLCJUUklHR0VSX0xJTUlUIiwiTUFSS0VUIiwib3B0aW9uYWxPcmRlclBhcmFtcyIsIm92ZXJyaWRpbmdQYXJhbXMiLCJEZWZhdWx0T3JkZXJQYXJhbXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/orderParams.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/OrderSubscriber.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/orderSubscriber/OrderSubscriber.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.OrderSubscriber = void 0;\nconst memcmp_1 = __webpack_require__(/*! ../memcmp */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst buffer_1 = __webpack_require__(/*! buffer */ \"buffer\");\nconst DLOB_1 = __webpack_require__(/*! ../dlob/DLOB */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/DLOB.js\");\nconst PollingSubscription_1 = __webpack_require__(/*! ./PollingSubscription */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/PollingSubscription.js\");\nconst WebsocketSubscription_1 = __webpack_require__(/*! ./WebsocketSubscription */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/WebsocketSubscription.js\");\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nclass OrderSubscriber {\n    constructor(config){\n        this.usersAccounts = new Map();\n        this.driftClient = config.driftClient;\n        if (config.subscriptionConfig.type === \"polling\") {\n            this.subscription = new PollingSubscription_1.PollingSubscription({\n                orderSubscriber: this,\n                frequency: config.subscriptionConfig.frequency\n            });\n        } else {\n            this.subscription = new WebsocketSubscription_1.WebsocketSubscription({\n                orderSubscriber: this,\n                skipInitialLoad: config.subscriptionConfig.skipInitialLoad\n            });\n        }\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        await this.subscription.subscribe();\n    }\n    async fetch() {\n        if (this.fetchPromise) {\n            return this.fetchPromise;\n        }\n        this.fetchPromise = new Promise((resolver)=>{\n            this.fetchPromiseResolver = resolver;\n        });\n        try {\n            const rpcRequestArgs = [\n                this.driftClient.program.programId.toBase58(),\n                {\n                    commitment: this.driftClient.opts.commitment,\n                    filters: [\n                        (0, memcmp_1.getUserFilter)(),\n                        (0, memcmp_1.getUserWithOrderFilter)()\n                    ],\n                    encoding: \"base64\",\n                    withContext: true\n                }\n            ];\n            const rpcJSONResponse = // @ts-ignore\n            await this.driftClient.connection._rpcRequest(\"getProgramAccounts\", rpcRequestArgs);\n            const rpcResponseAndContext = rpcJSONResponse.result;\n            const slot = rpcResponseAndContext.context.slot;\n            const programAccountSet = new Set();\n            for (const programAccount of rpcResponseAndContext.value){\n                const key = programAccount.pubkey.toString();\n                // @ts-ignore\n                const buffer = buffer_1.Buffer.from(programAccount.account.data[0], programAccount.account.data[1]);\n                programAccountSet.add(key);\n                this.tryUpdateUserAccount(key, buffer, slot);\n            }\n            for (const key of this.usersAccounts.keys()){\n                if (!programAccountSet.has(key)) {\n                    this.usersAccounts.delete(key);\n                }\n            }\n        } catch (e) {\n            console.error(e);\n        } finally{\n            this.fetchPromiseResolver();\n            this.fetchPromise = undefined;\n        }\n    }\n    tryUpdateUserAccount(key, buffer, slot) {\n        const slotAndUserAccount = this.usersAccounts.get(key);\n        if (!slotAndUserAccount || slotAndUserAccount.slot < slot) {\n            const userAccount = this.driftClient.program.account.user.coder.accounts.decode(\"User\", buffer);\n            const newOrders = userAccount.orders.filter((order)=>{\n                var _a;\n                return order.slot.toNumber() > ((_a = slotAndUserAccount === null || slotAndUserAccount === void 0 ? void 0 : slotAndUserAccount.slot) !== null && _a !== void 0 ? _a : 0) && order.slot.toNumber() <= slot;\n            });\n            if (newOrders.length > 0) {\n                this.eventEmitter.emit(\"onUpdate\", userAccount, newOrders, new web3_js_1.PublicKey(key), slot);\n            }\n            if (userAccount.hasOpenOrder) {\n                this.usersAccounts.set(key, {\n                    slot,\n                    userAccount\n                });\n            } else {\n                this.usersAccounts.delete(key);\n            }\n        }\n    }\n    async getDLOB(slot) {\n        const dlob = new DLOB_1.DLOB();\n        for (const [key, { userAccount }] of this.usersAccounts.entries()){\n            const userAccountPubkey = new web3_js_1.PublicKey(key);\n            for (const order of userAccount.orders){\n                dlob.insertOrder(order, userAccountPubkey, slot);\n            }\n        }\n        return dlob;\n    }\n    async unsubscribe() {\n        await this.subscription.unsubscribe();\n    }\n}\nexports.OrderSubscriber = OrderSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmRlclN1YnNjcmliZXIvT3JkZXJTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx1QkFBdUIsR0FBRyxLQUFLO0FBQy9CLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLHFFQUFXO0FBQ3BDLE1BQU1DLFlBQVlELG1CQUFPQSxDQUFDLDhFQUFpQjtBQUMzQyxNQUFNRSxXQUFXRixtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRyxTQUFTSCxtQkFBT0EsQ0FBQywyRUFBYztBQUNyQyxNQUFNSSx3QkFBd0JKLG1CQUFPQSxDQUFDLDhHQUF1QjtBQUM3RCxNQUFNSywwQkFBMEJMLG1CQUFPQSxDQUFDLGtIQUF5QjtBQUNqRSxNQUFNTSxXQUFXTixtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRjtJQUNGUyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFDQyxhQUFhLEdBQUcsSUFBSUM7UUFDekIsSUFBSSxDQUFDQyxXQUFXLEdBQUdILE9BQU9HLFdBQVc7UUFDckMsSUFBSUgsT0FBT0ksa0JBQWtCLENBQUNDLElBQUksS0FBSyxXQUFXO1lBQzlDLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUlWLHNCQUFzQlcsbUJBQW1CLENBQUM7Z0JBQzlEQyxpQkFBaUIsSUFBSTtnQkFDckJDLFdBQVdULE9BQU9JLGtCQUFrQixDQUFDSyxTQUFTO1lBQ2xEO1FBQ0osT0FDSztZQUNELElBQUksQ0FBQ0gsWUFBWSxHQUFHLElBQUlULHdCQUF3QmEscUJBQXFCLENBQUM7Z0JBQ2xFRixpQkFBaUIsSUFBSTtnQkFDckJHLGlCQUFpQlgsT0FBT0ksa0JBQWtCLENBQUNPLGVBQWU7WUFDOUQ7UUFDSjtRQUNBLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUlkLFNBQVNlLFlBQVk7SUFDakQ7SUFDQSxNQUFNQyxZ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QVlaLGFBQWFLLFdBQVcsSUFBSXhFLFVBQVVnRixTQUFTLENBQUNoQyxNQUFNTDtZQUM3RjtZQUNBLElBQUl3QixZQUFZYyxZQUFZLEVBQUU7Z0JBQzFCLElBQUksQ0FBQ3pFLGFBQWEsQ0FBQzBFLEdBQUcsQ0FBQ2xDLEtBQUs7b0JBQUVMO29CQUFNd0I7Z0JBQVk7WUFDcEQsT0FDSztnQkFDRCxJQUFJLENBQUMzRCxhQUFhLENBQUNvRCxNQUFNLENBQUNaO1lBQzlCO1FBQ0o7SUFDSjtJQUNBLE1BQU1tQyxRQUFReEMsSUFBSSxFQUFFO1FBQ2hCLE1BQU15QyxPQUFPLElBQUlsRixPQUFPbUYsSUFBSTtRQUM1QixLQUFLLE1BQU0sQ0FBQ3JDLEtBQUssRUFBRW1CLFdBQVcsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDM0QsYUFBYSxDQUFDOEUsT0FBTyxHQUFJO1lBQy9ELE1BQU1DLG9CQUFvQixJQUFJdkYsVUFBVWdGLFNBQVMsQ0FBQ2hDO1lBQ2xELEtBQUssTUFBTTJCLFNBQVNSLFlBQVlNLE1BQU0sQ0FBRTtnQkFDcENXLEtBQUtJLFdBQVcsQ0FBQ2IsT0FBT1ksbUJBQW1CNUM7WUFDL0M7UUFDSjtRQUNBLE9BQU95QztJQUNYO0lBQ0EsTUFBTUssY0FBYztRQUNoQixNQUFNLElBQUksQ0FBQzVFLFlBQVksQ0FBQzRFLFdBQVc7SUFDdkM7QUFDSjtBQUNBOUYsdUJBQXVCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL29yZGVyU3Vic2NyaWJlci9PcmRlclN1YnNjcmliZXIuanM/ZDI4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuT3JkZXJTdWJzY3JpYmVyID0gdm9pZCAwO1xuY29uc3QgbWVtY21wXzEgPSByZXF1aXJlKFwiLi4vbWVtY21wXCIpO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IGJ1ZmZlcl8xID0gcmVxdWlyZShcImJ1ZmZlclwiKTtcbmNvbnN0IERMT0JfMSA9IHJlcXVpcmUoXCIuLi9kbG9iL0RMT0JcIik7XG5jb25zdCBQb2xsaW5nU3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKFwiLi9Qb2xsaW5nU3Vic2NyaXB0aW9uXCIpO1xuY29uc3QgV2Vic29ja2V0U3Vic2NyaXB0aW9uXzEgPSByZXF1aXJlKFwiLi9XZWJzb2NrZXRTdWJzY3JpcHRpb25cIik7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XG5jbGFzcyBPcmRlclN1YnNjcmliZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLnVzZXJzQWNjb3VudHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuZHJpZnRDbGllbnQgPSBjb25maWcuZHJpZnRDbGllbnQ7XG4gICAgICAgIGlmIChjb25maWcuc3Vic2NyaXB0aW9uQ29uZmlnLnR5cGUgPT09ICdwb2xsaW5nJykge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBuZXcgUG9sbGluZ1N1YnNjcmlwdGlvbl8xLlBvbGxpbmdTdWJzY3JpcHRpb24oe1xuICAgICAgICAgICAgICAgIG9yZGVyU3Vic2NyaWJlcjogdGhpcyxcbiAgICAgICAgICAgICAgICBmcmVxdWVuY3k6IGNvbmZpZy5zdWJzY3JpcHRpb25Db25maWcuZnJlcXVlbmN5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG5ldyBXZWJzb2NrZXRTdWJzY3JpcHRpb25fMS5XZWJzb2NrZXRTdWJzY3JpcHRpb24oe1xuICAgICAgICAgICAgICAgIG9yZGVyU3Vic2NyaWJlcjogdGhpcyxcbiAgICAgICAgICAgICAgICBza2lwSW5pdGlhbExvYWQ6IGNvbmZpZy5zdWJzY3JpcHRpb25Db25maWcuc2tpcEluaXRpYWxMb2FkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgZXZlbnRzXzEuRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zdWJzY3JpcHRpb24uc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGFzeW5jIGZldGNoKCkge1xuICAgICAgICBpZiAodGhpcy5mZXRjaFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZldGNoUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5mZXRjaFByb21pc2VSZXNvbHZlciA9IHJlc29sdmVyO1xuICAgICAgICB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJwY1JlcXVlc3RBcmdzID0gW1xuICAgICAgICAgICAgICAgIHRoaXMuZHJpZnRDbGllbnQucHJvZ3JhbS5wcm9ncmFtSWQudG9CYXNlNTgoKSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbW1pdG1lbnQ6IHRoaXMuZHJpZnRDbGllbnQub3B0cy5jb21taXRtZW50LFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzOiBbKDAsIG1lbWNtcF8xLmdldFVzZXJGaWx0ZXIpKCksICgwLCBtZW1jbXBfMS5nZXRVc2VyV2l0aE9yZGVyRmlsdGVyKSgpXSxcbiAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc6ICdiYXNlNjQnLFxuICAgICAgICAgICAgICAgICAgICB3aXRoQ29udGV4dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGNvbnN0IHJwY0pTT05SZXNwb25zZSA9IFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kcmlmdENsaWVudC5jb25uZWN0aW9uLl9ycGNSZXF1ZXN0KCdnZXRQcm9ncmFtQWNjb3VudHMnLCBycGNSZXF1ZXN0QXJncyk7XG4gICAgICAgICAgICBjb25zdCBycGNSZXNwb25zZUFuZENvbnRleHQgPSBycGNKU09OUmVzcG9uc2UucmVzdWx0O1xuICAgICAgICAgICAgY29uc3Qgc2xvdCA9IHJwY1Jlc3BvbnNlQW5kQ29udGV4dC5jb250ZXh0LnNsb3Q7XG4gICAgICAgICAgICBjb25zdCBwcm9ncmFtQWNjb3VudFNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvZ3JhbUFjY291bnQgb2YgcnBjUmVzcG9uc2VBbmRDb250ZXh0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcHJvZ3JhbUFjY291bnQucHVia2V5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGJ1ZmZlcl8xLkJ1ZmZlci5mcm9tKHByb2dyYW1BY2NvdW50LmFjY291bnQuZGF0YVswXSwgcHJvZ3JhbUFjY291bnQuYWNjb3VudC5kYXRhWzFdKTtcbiAgICAgICAgICAgICAgICBwcm9ncmFtQWNjb3VudFNldC5hZGQoa2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyeVVwZGF0ZVVzZXJBY2NvdW50KGtleSwgYnVmZmVyLCBzbG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMudXNlcnNBY2NvdW50cy5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXByb2dyYW1BY2NvdW50U2V0LmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcnNBY2NvdW50cy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmZldGNoUHJvbWlzZVJlc29sdmVyKCk7XG4gICAgICAgICAgICB0aGlzLmZldGNoUHJvbWlzZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cnlVcGRhdGVVc2VyQWNjb3VudChrZXksIGJ1ZmZlciwgc2xvdCkge1xuICAgICAgICBjb25zdCBzbG90QW5kVXNlckFjY291bnQgPSB0aGlzLnVzZXJzQWNjb3VudHMuZ2V0KGtleSk7XG4gICAgICAgIGlmICghc2xvdEFuZFVzZXJBY2NvdW50IHx8IHNsb3RBbmRVc2VyQWNjb3VudC5zbG90IDwgc2xvdCkge1xuICAgICAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmRyaWZ0Q2xpZW50LnByb2dyYW0uYWNjb3VudC51c2VyLmNvZGVyLmFjY291bnRzLmRlY29kZSgnVXNlcicsIGJ1ZmZlcik7XG4gICAgICAgICAgICBjb25zdCBuZXdPcmRlcnMgPSB1c2VyQWNjb3VudC5vcmRlcnMuZmlsdGVyKChvcmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JkZXIuc2xvdC50b051bWJlcigpID4gKChfYSA9IHNsb3RBbmRVc2VyQWNjb3VudCA9PT0gbnVsbCB8fCBzbG90QW5kVXNlckFjY291bnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNsb3RBbmRVc2VyQWNjb3VudC5zbG90KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwKSAmJlxuICAgICAgICAgICAgICAgICAgICBvcmRlci5zbG90LnRvTnVtYmVyKCkgPD0gc2xvdDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKG5ld09yZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnb25VcGRhdGUnLCB1c2VyQWNjb3VudCwgbmV3T3JkZXJzLCBuZXcgd2ViM19qc18xLlB1YmxpY0tleShrZXkpLCBzbG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh1c2VyQWNjb3VudC5oYXNPcGVuT3JkZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXJzQWNjb3VudHMuc2V0KGtleSwgeyBzbG90LCB1c2VyQWNjb3VudCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudXNlcnNBY2NvdW50cy5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRETE9CKHNsb3QpIHtcbiAgICAgICAgY29uc3QgZGxvYiA9IG5ldyBETE9CXzEuRExPQigpO1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHsgdXNlckFjY291bnQgfV0gb2YgdGhpcy51c2Vyc0FjY291bnRzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3QgdXNlckFjY291bnRQdWJrZXkgPSBuZXcgd2ViM19qc18xLlB1YmxpY0tleShrZXkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBvcmRlciBvZiB1c2VyQWNjb3VudC5vcmRlcnMpIHtcbiAgICAgICAgICAgICAgICBkbG9iLmluc2VydE9yZGVyKG9yZGVyLCB1c2VyQWNjb3VudFB1YmtleSwgc2xvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRsb2I7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgIH1cbn1cbmV4cG9ydHMuT3JkZXJTdWJzY3JpYmVyID0gT3JkZXJTdWJzY3JpYmVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiT3JkZXJTdWJzY3JpYmVyIiwibWVtY21wXzEiLCJyZXF1aXJlIiwid2ViM19qc18xIiwiYnVmZmVyXzEiLCJETE9CXzEiLCJQb2xsaW5nU3Vic2NyaXB0aW9uXzEiLCJXZWJzb2NrZXRTdWJzY3JpcHRpb25fMSIsImV2ZW50c18xIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJ1c2Vyc0FjY291bnRzIiwiTWFwIiwiZHJpZnRDbGllbnQiLCJzdWJzY3JpcHRpb25Db25maWciLCJ0eXBlIiwic3Vic2NyaXB0aW9uIiwiUG9sbGluZ1N1YnNjcmlwdGlvbiIsIm9yZGVyU3Vic2NyaWJlciIsImZyZXF1ZW5jeSIsIldlYnNvY2tldFN1YnNjcmlwdGlvbiIsInNraXBJbml0aWFsTG9hZCIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmliZSIsImZldGNoIiwiZmV0Y2hQcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmVyIiwiZmV0Y2hQcm9taXNlUmVzb2x2ZXIiLCJycGNSZXF1ZXN0QXJncyIsInByb2dyYW0iLCJwcm9ncmFtSWQiLCJ0b0Jhc2U1OCIsImNvbW1pdG1lbnQiLCJvcHRzIiwiZmlsdGVycyIsImdldFVzZXJGaWx0ZXIiLCJnZXRVc2VyV2l0aE9yZGVyRmlsdGVyIiwiZW5jb2RpbmciLCJ3aXRoQ29udGV4dCIsInJwY0pTT05SZXNwb25zZSIsImNvbm5lY3Rpb24iLCJfcnBjUmVxdWVzdCIsInJwY1Jlc3BvbnNlQW5kQ29udGV4dCIsInJlc3VsdCIsInNsb3QiLCJjb250ZXh0IiwicHJvZ3JhbUFjY291bnRTZXQiLCJTZXQiLCJwcm9ncmFtQWNjb3VudCIsImtleSIsInB1YmtleSIsInRvU3RyaW5nIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImFjY291bnQiLCJkYXRhIiwiYWRkIiwidHJ5VXBkYXRlVXNlckFjY291bnQiLCJrZXlzIiwiaGFzIiwiZGVsZXRlIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsInVuZGVmaW5lZCIsInNsb3RBbmRVc2VyQWNjb3VudCIsImdldCIsInVzZXJBY2NvdW50IiwidXNlciIsImNvZGVyIiwiYWNjb3VudHMiLCJkZWNvZGUiLCJuZXdPcmRlcnMiLCJvcmRlcnMiLCJmaWx0ZXIiLCJvcmRlciIsIl9hIiwidG9OdW1iZXIiLCJsZW5ndGgiLCJlbWl0IiwiUHVibGljS2V5IiwiaGFzT3Blbk9yZGVyIiwic2V0IiwiZ2V0RExPQiIsImRsb2IiLCJETE9CIiwiZW50cmllcyIsInVzZXJBY2NvdW50UHVia2V5IiwiaW5zZXJ0T3JkZXIiLCJ1bnN1YnNjcmliZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/OrderSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/PollingSubscription.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/orderSubscriber/PollingSubscription.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PollingSubscription = void 0;\nclass PollingSubscription {\n    constructor({ orderSubscriber, frequency }){\n        this.orderSubscriber = orderSubscriber;\n        this.frequency = frequency;\n    }\n    async subscribe() {\n        if (this.intervalId) {\n            return;\n        }\n        this.intervalId = setInterval(this.orderSubscriber.fetch.bind(this.orderSubscriber), this.frequency);\n        await this.orderSubscriber.fetch();\n    }\n    async unsubscribe() {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n            this.intervalId = undefined;\n        }\n    }\n}\nexports.PollingSubscription = PollingSubscription;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmRlclN1YnNjcmliZXIvUG9sbGluZ1N1YnNjcmlwdGlvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsMkJBQTJCLEdBQUcsS0FBSztBQUNuQyxNQUFNRTtJQUNGQyxZQUFZLEVBQUVDLGVBQWUsRUFBRUMsU0FBUyxFQUFHLENBQUU7UUFDekMsSUFBSSxDQUFDRCxlQUFlLEdBQUdBO1FBQ3ZCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtJQUNyQjtJQUNBLE1BQU1DLFlBQVk7UUFDZCxJQUFJLElBQUksQ0FBQ0MsVUFBVSxFQUFFO1lBQ2pCO1FBQ0o7UUFDQSxJQUFJLENBQUNBLFVBQVUsR0FBR0MsWUFBWSxJQUFJLENBQUNKLGVBQWUsQ0FBQ0ssS0FBSyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDTixlQUFlLEdBQUcsSUFBSSxDQUFDQyxTQUFTO1FBQ25HLE1BQU0sSUFBSSxDQUFDRCxlQUFlLENBQUNLLEtBQUs7SUFDcEM7SUFDQSxNQUFNRSxjQUFjO1FBQ2hCLElBQUksSUFBSSxDQUFDSixVQUFVLEVBQUU7WUFDakJLLGNBQWMsSUFBSSxDQUFDTCxVQUFVO1lBQzdCLElBQUksQ0FBQ0EsVUFBVSxHQUFHTTtRQUN0QjtJQUNKO0FBQ0o7QUFDQWIsMkJBQTJCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL29yZGVyU3Vic2NyaWJlci9Qb2xsaW5nU3Vic2NyaXB0aW9uLmpzPzBhZTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlBvbGxpbmdTdWJzY3JpcHRpb24gPSB2b2lkIDA7XG5jbGFzcyBQb2xsaW5nU3Vic2NyaXB0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG9yZGVyU3Vic2NyaWJlciwgZnJlcXVlbmN5LCB9KSB7XG4gICAgICAgIHRoaXMub3JkZXJTdWJzY3JpYmVyID0gb3JkZXJTdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLmZyZXF1ZW5jeSA9IGZyZXF1ZW5jeTtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5pbnRlcnZhbElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwodGhpcy5vcmRlclN1YnNjcmliZXIuZmV0Y2guYmluZCh0aGlzLm9yZGVyU3Vic2NyaWJlciksIHRoaXMuZnJlcXVlbmN5KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vcmRlclN1YnNjcmliZXIuZmV0Y2goKTtcbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmludGVydmFsSWQpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuUG9sbGluZ1N1YnNjcmlwdGlvbiA9IFBvbGxpbmdTdWJzY3JpcHRpb247XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJQb2xsaW5nU3Vic2NyaXB0aW9uIiwiY29uc3RydWN0b3IiLCJvcmRlclN1YnNjcmliZXIiLCJmcmVxdWVuY3kiLCJzdWJzY3JpYmUiLCJpbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJmZXRjaCIsImJpbmQiLCJ1bnN1YnNjcmliZSIsImNsZWFySW50ZXJ2YWwiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/PollingSubscription.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/WebsocketSubscription.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/orderSubscriber/WebsocketSubscription.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.WebsocketSubscription = void 0;\nconst memcmp_1 = __webpack_require__(/*! ../memcmp */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js\");\nclass WebsocketSubscription {\n    constructor({ orderSubscriber, skipInitialLoad = false }){\n        this.orderSubscriber = orderSubscriber;\n        this.skipInitialLoad = skipInitialLoad;\n    }\n    async subscribe() {\n        if (this.websocketId) {\n            return;\n        }\n        this.websocketId = this.orderSubscriber.driftClient.connection.onProgramAccountChange(this.orderSubscriber.driftClient.program.programId, (keyAccountInfo, context)=>{\n            const userKey = keyAccountInfo.accountId.toBase58();\n            this.orderSubscriber.tryUpdateUserAccount(userKey, keyAccountInfo.accountInfo.data, context.slot);\n        }, this.orderSubscriber.driftClient.opts.commitment, [\n            (0, memcmp_1.getUserFilter)(),\n            (0, memcmp_1.getNonIdleUserFilter)()\n        ]);\n        if (!this.skipInitialLoad) {\n            await this.orderSubscriber.fetch();\n        }\n    }\n    async unsubscribe() {\n        if (this.websocketId) {\n            await this.orderSubscriber.driftClient.connection.removeProgramAccountChangeListener(this.websocketId);\n            this.websocketId = undefined;\n        }\n    }\n}\nexports.WebsocketSubscription = WebsocketSubscription;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmRlclN1YnNjcmliZXIvV2Vic29ja2V0U3Vic2NyaXB0aW9uLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCw2QkFBNkIsR0FBRyxLQUFLO0FBQ3JDLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLHFFQUFXO0FBQ3BDLE1BQU1GO0lBQ0ZHLFlBQVksRUFBRUMsZUFBZSxFQUFFQyxrQkFBa0IsS0FBSyxFQUFHLENBQUU7UUFDdkQsSUFBSSxDQUFDRCxlQUFlLEdBQUdBO1FBQ3ZCLElBQUksQ0FBQ0MsZUFBZSxHQUFHQTtJQUMzQjtJQUNBLE1BQU1DLFlBQVk7UUFDZCxJQUFJLElBQUksQ0FBQ0MsV0FBVyxFQUFFO1lBQ2xCO1FBQ0o7UUFDQSxJQUFJLENBQUNBLFdBQVcsR0FDWixJQUFJLENBQUNILGVBQWUsQ0FBQ0ksV0FBVyxDQUFDQyxVQUFVLENBQUNDLHNCQUFzQixDQUFDLElBQUksQ0FBQ04sZUFBZSxDQUFDSSxXQUFXLENBQUNHLE9BQU8sQ0FBQ0MsU0FBUyxFQUFFLENBQUNDLGdCQUFnQkM7WUFDcEksTUFBTUMsVUFBVUYsZUFBZUcsU0FBUyxDQUFDQyxRQUFRO1lBQ2pELElBQUksQ0FBQ2IsZUFBZSxDQUFDYyxvQkFBb0IsQ0FBQ0gsU0FBU0YsZUFBZU0sV0FBVyxDQUFDQyxJQUFJLEVBQUVOLFFBQVFPLElBQUk7UUFDcEcsR0FBRyxJQUFJLENBQUNqQixlQUFlLENBQUNJLFdBQVcsQ0FBQ2MsSUFBSSxDQUFDQyxVQUFVLEVBQUU7WUFBRSxJQUFHdEIsU0FBU3VCLGFBQWE7WUFBTSxJQUFHdkIsU0FBU3dCLG9CQUFvQjtTQUFJO1FBQzlILElBQUksQ0FBQyxJQUFJLENBQUNwQixlQUFlLEVBQUU7WUFDdkIsTUFBTSxJQUFJLENBQUNELGVBQWUsQ0FBQ3NCLEtBQUs7UUFDcEM7SUFDSjtJQUNBLE1BQU1DLGNBQWM7UUFDaEIsSUFBSSxJQUFJLENBQUNwQixXQUFXLEVBQUU7WUFDbEIsTUFBTSxJQUFJLENBQUNILGVBQWUsQ0FBQ0ksV0FBVyxDQUFDQyxVQUFVLENBQUNtQixrQ0FBa0MsQ0FBQyxJQUFJLENBQUNyQixXQUFXO1lBQ3JHLElBQUksQ0FBQ0EsV0FBVyxHQUFHc0I7UUFDdkI7SUFDSjtBQUNKO0FBQ0EvQiw2QkFBNkIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvb3JkZXJTdWJzY3JpYmVyL1dlYnNvY2tldFN1YnNjcmlwdGlvbi5qcz8yOWM4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5XZWJzb2NrZXRTdWJzY3JpcHRpb24gPSB2b2lkIDA7XG5jb25zdCBtZW1jbXBfMSA9IHJlcXVpcmUoXCIuLi9tZW1jbXBcIik7XG5jbGFzcyBXZWJzb2NrZXRTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgb3JkZXJTdWJzY3JpYmVyLCBza2lwSW5pdGlhbExvYWQgPSBmYWxzZSwgfSkge1xuICAgICAgICB0aGlzLm9yZGVyU3Vic2NyaWJlciA9IG9yZGVyU3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5za2lwSW5pdGlhbExvYWQgPSBza2lwSW5pdGlhbExvYWQ7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKHRoaXMud2Vic29ja2V0SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndlYnNvY2tldElkID1cbiAgICAgICAgICAgIHRoaXMub3JkZXJTdWJzY3JpYmVyLmRyaWZ0Q2xpZW50LmNvbm5lY3Rpb24ub25Qcm9ncmFtQWNjb3VudENoYW5nZSh0aGlzLm9yZGVyU3Vic2NyaWJlci5kcmlmdENsaWVudC5wcm9ncmFtLnByb2dyYW1JZCwgKGtleUFjY291bnRJbmZvLCBjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlcktleSA9IGtleUFjY291bnRJbmZvLmFjY291bnRJZC50b0Jhc2U1OCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3JkZXJTdWJzY3JpYmVyLnRyeVVwZGF0ZVVzZXJBY2NvdW50KHVzZXJLZXksIGtleUFjY291bnRJbmZvLmFjY291bnRJbmZvLmRhdGEsIGNvbnRleHQuc2xvdCk7XG4gICAgICAgICAgICB9LCB0aGlzLm9yZGVyU3Vic2NyaWJlci5kcmlmdENsaWVudC5vcHRzLmNvbW1pdG1lbnQsIFsoMCwgbWVtY21wXzEuZ2V0VXNlckZpbHRlcikoKSwgKDAsIG1lbWNtcF8xLmdldE5vbklkbGVVc2VyRmlsdGVyKSgpXSk7XG4gICAgICAgIGlmICghdGhpcy5za2lwSW5pdGlhbExvYWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMub3JkZXJTdWJzY3JpYmVyLmZldGNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICh0aGlzLndlYnNvY2tldElkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9yZGVyU3Vic2NyaWJlci5kcmlmdENsaWVudC5jb25uZWN0aW9uLnJlbW92ZVByb2dyYW1BY2NvdW50Q2hhbmdlTGlzdGVuZXIodGhpcy53ZWJzb2NrZXRJZCk7XG4gICAgICAgICAgICB0aGlzLndlYnNvY2tldElkID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5XZWJzb2NrZXRTdWJzY3JpcHRpb24gPSBXZWJzb2NrZXRTdWJzY3JpcHRpb247XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJXZWJzb2NrZXRTdWJzY3JpcHRpb24iLCJtZW1jbXBfMSIsInJlcXVpcmUiLCJjb25zdHJ1Y3RvciIsIm9yZGVyU3Vic2NyaWJlciIsInNraXBJbml0aWFsTG9hZCIsInN1YnNjcmliZSIsIndlYnNvY2tldElkIiwiZHJpZnRDbGllbnQiLCJjb25uZWN0aW9uIiwib25Qcm9ncmFtQWNjb3VudENoYW5nZSIsInByb2dyYW0iLCJwcm9ncmFtSWQiLCJrZXlBY2NvdW50SW5mbyIsImNvbnRleHQiLCJ1c2VyS2V5IiwiYWNjb3VudElkIiwidG9CYXNlNTgiLCJ0cnlVcGRhdGVVc2VyQWNjb3VudCIsImFjY291bnRJbmZvIiwiZGF0YSIsInNsb3QiLCJvcHRzIiwiY29tbWl0bWVudCIsImdldFVzZXJGaWx0ZXIiLCJnZXROb25JZGxlVXNlckZpbHRlciIsImZldGNoIiwidW5zdWJzY3JpYmUiLCJyZW1vdmVQcm9ncmFtQWNjb3VudENoYW5nZUxpc3RlbmVyIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/WebsocketSubscription.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/orderSubscriber/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __exportStar = (void 0) && (void 0).__exportStar || function(m, exports1) {\n    for(var p in m)if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports1, p)) __createBinding(exports1, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n__exportStar(__webpack_require__(/*! ./OrderSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/OrderSubscriber.js\"), exports);\n__exportStar(__webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/types.js\"), exports);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmRlclN1YnNjcmliZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQU1DLENBQUFBLE9BQU9DLE1BQU0sR0FBSSxTQUFTQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxFQUFFO0lBQzFGLElBQUlBLE9BQU9DLFdBQVdELEtBQUtEO0lBQzNCLElBQUlHLE9BQU9QLE9BQU9RLHdCQUF3QixDQUFDTCxHQUFHQztJQUM5QyxJQUFJLENBQUNHLFFBQVMsVUFBU0EsT0FBTyxDQUFDSixFQUFFTSxVQUFVLEdBQUdGLEtBQUtHLFFBQVEsSUFBSUgsS0FBS0ksWUFBWSxHQUFHO1FBQ2pGSixPQUFPO1lBQUVLLFlBQVk7WUFBTUMsS0FBSztnQkFBYSxPQUFPVixDQUFDLENBQUNDLEVBQUU7WUFBRTtRQUFFO0lBQzlEO0lBQ0FKLE9BQU9jLGNBQWMsQ0FBQ1osR0FBR0csSUFBSUU7QUFDakMsSUFBTSxTQUFTTCxDQUFDLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxFQUFFO0lBQ3RCLElBQUlBLE9BQU9DLFdBQVdELEtBQUtEO0lBQzNCRixDQUFDLENBQUNHLEdBQUcsR0FBR0YsQ0FBQyxDQUFDQyxFQUFFO0FBQ2hCLENBQUM7QUFDRCxJQUFJVyxlQUFlLENBQUMsTUFBRyxLQUFLLE9BQUcsRUFBRUEsWUFBWSxJQUFLLFNBQVNaLENBQUMsRUFBRWEsUUFBTztJQUNqRSxJQUFLLElBQUlDLEtBQUtkLEVBQUcsSUFBSWMsTUFBTSxhQUFhLENBQUNqQixPQUFPa0IsU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ0osVUFBU0MsSUFBSWxCLGdCQUFnQmlCLFVBQVNiLEdBQUdjO0FBQzNIO0FBQ0FqQiw4Q0FBNkM7SUFBRXFCLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0ROLGFBQWFPLG1CQUFPQSxDQUFDLHNHQUFtQixHQUFHTjtBQUMzQ0QsYUFBYU8sbUJBQU9BLENBQUMsa0ZBQVMsR0FBR04iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvb3JkZXJTdWJzY3JpYmVyL2luZGV4LmpzPzc1NmQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fZXhwb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19leHBvcnRTdGFyKSB8fCBmdW5jdGlvbihtLCBleHBvcnRzKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9PcmRlclN1YnNjcmliZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzXCIpLCBleHBvcnRzKTtcbiJdLCJuYW1lcyI6WyJfX2NyZWF0ZUJpbmRpbmciLCJPYmplY3QiLCJjcmVhdGUiLCJvIiwibSIsImsiLCJrMiIsInVuZGVmaW5lZCIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJfX2VzTW9kdWxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiZGVmaW5lUHJvcGVydHkiLCJfX2V4cG9ydFN0YXIiLCJleHBvcnRzIiwicCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInZhbHVlIiwicmVxdWlyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/types.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/orderSubscriber/types.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9vcmRlclN1YnNjcmliZXIvdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvb3JkZXJTdWJzY3JpYmVyL3R5cGVzLmpzPzBiZjYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/orderSubscriber/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/phoenix/phoenixFulfillmentConfigMap.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/phoenix/phoenixFulfillmentConfigMap.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PhoenixFulfillmentConfigMap = void 0;\nclass PhoenixFulfillmentConfigMap {\n    constructor(driftClient){\n        this.map = new Map();\n        this.driftClient = driftClient;\n    }\n    async add(marketIndex, phoenixMarketAddress) {\n        const account = await this.driftClient.getPhoenixV1FulfillmentConfig(phoenixMarketAddress);\n        this.map.set(marketIndex, account);\n    }\n    get(marketIndex) {\n        return this.map.get(marketIndex);\n    }\n}\nexports.PhoenixFulfillmentConfigMap = PhoenixFulfillmentConfigMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9waG9lbml4L3Bob2VuaXhGdWxmaWxsbWVudENvbmZpZ01hcC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUNBQW1DLEdBQUcsS0FBSztBQUMzQyxNQUFNRTtJQUNGQyxZQUFZQyxXQUFXLENBQUU7UUFDckIsSUFBSSxDQUFDQyxHQUFHLEdBQUcsSUFBSUM7UUFDZixJQUFJLENBQUNGLFdBQVcsR0FBR0E7SUFDdkI7SUFDQSxNQUFNRyxJQUFJQyxXQUFXLEVBQUVDLG9CQUFvQixFQUFFO1FBQ3pDLE1BQU1DLFVBQVUsTUFBTSxJQUFJLENBQUNOLFdBQVcsQ0FBQ08sNkJBQTZCLENBQUNGO1FBQ3JFLElBQUksQ0FBQ0osR0FBRyxDQUFDTyxHQUFHLENBQUNKLGFBQWFFO0lBQzlCO0lBQ0FHLElBQUlMLFdBQVcsRUFBRTtRQUNiLE9BQU8sSUFBSSxDQUFDSCxHQUFHLENBQUNRLEdBQUcsQ0FBQ0w7SUFDeEI7QUFDSjtBQUNBUixtQ0FBbUMsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvcGhvZW5peC9waG9lbml4RnVsZmlsbG1lbnRDb25maWdNYXAuanM/OGY5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnTWFwID0gdm9pZCAwO1xuY2xhc3MgUGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihkcmlmdENsaWVudCkge1xuICAgICAgICB0aGlzLm1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5kcmlmdENsaWVudCA9IGRyaWZ0Q2xpZW50O1xuICAgIH1cbiAgICBhc3luYyBhZGQobWFya2V0SW5kZXgsIHBob2VuaXhNYXJrZXRBZGRyZXNzKSB7XG4gICAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCB0aGlzLmRyaWZ0Q2xpZW50LmdldFBob2VuaXhWMUZ1bGZpbGxtZW50Q29uZmlnKHBob2VuaXhNYXJrZXRBZGRyZXNzKTtcbiAgICAgICAgdGhpcy5tYXAuc2V0KG1hcmtldEluZGV4LCBhY2NvdW50KTtcbiAgICB9XG4gICAgZ2V0KG1hcmtldEluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5nZXQobWFya2V0SW5kZXgpO1xuICAgIH1cbn1cbmV4cG9ydHMuUGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnTWFwID0gUGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnTWFwO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUGhvZW5peEZ1bGZpbGxtZW50Q29uZmlnTWFwIiwiY29uc3RydWN0b3IiLCJkcmlmdENsaWVudCIsIm1hcCIsIk1hcCIsImFkZCIsIm1hcmtldEluZGV4IiwicGhvZW5peE1hcmtldEFkZHJlc3MiLCJhY2NvdW50IiwiZ2V0UGhvZW5peFYxRnVsZmlsbG1lbnRDb25maWciLCJzZXQiLCJnZXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/phoenix/phoenixFulfillmentConfigMap.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/phoenix/phoenixSubscriber.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/phoenix/phoenixSubscriber.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.PhoenixSubscriber = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst phoenix_sdk_1 = __webpack_require__(/*! @ellipsis-labs/phoenix-sdk */ \"(ssr)/./node_modules/@ellipsis-labs/phoenix-sdk/dist/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nclass PhoenixSubscriber {\n    constructor(config){\n        this.connection = config.connection;\n        this.programId = config.programId;\n        this.marketAddress = config.marketAddress;\n        if (config.accountSubscription.type === \"polling\") {\n            this.subscriptionType = \"polling\";\n            this.accountLoader = config.accountSubscription.accountLoader;\n        } else {\n            this.subscriptionType = \"websocket\";\n        }\n        this.lastSlot = 0;\n        this.lastUnixTimestamp = 0;\n    }\n    async subscribe() {\n        if (this.subscribed) {\n            return;\n        }\n        this.market = await phoenix_sdk_1.Market.loadFromAddress({\n            connection: this.connection,\n            address: this.marketAddress\n        });\n        const clock = (0, phoenix_sdk_1.deserializeClockData)((await this.connection.getAccountInfo(web3_js_1.SYSVAR_CLOCK_PUBKEY, \"confirmed\")).data);\n        this.lastUnixTimestamp = (0, phoenix_sdk_1.toNum)(clock.unixTimestamp);\n        if (this.subscriptionType === \"websocket\") {\n            this.marketCallbackId = this.connection.onAccountChange(this.marketAddress, (accountInfo, _ctx)=>{\n                try {\n                    this.market = this.market.reload(accountInfo.data);\n                } catch  {\n                    console.error(\"Failed to reload Phoenix market data\");\n                }\n            });\n            this.clockCallbackId = this.connection.onAccountChange(web3_js_1.SYSVAR_CLOCK_PUBKEY, (accountInfo, ctx)=>{\n                try {\n                    this.lastSlot = ctx.slot;\n                    const clock = (0, phoenix_sdk_1.deserializeClockData)(accountInfo.data);\n                    this.lastUnixTimestamp = (0, phoenix_sdk_1.toNum)(clock.unixTimestamp);\n                } catch  {\n                    console.error(\"Failed to reload clock data\");\n                }\n            });\n        } else {\n            this.marketCallbackId = await this.accountLoader.addAccount(this.marketAddress, (buffer, slot)=>{\n                try {\n                    this.lastSlot = slot;\n                    if (buffer) {\n                        this.market = this.market.reload(buffer);\n                    }\n                } catch  {\n                    console.error(\"Failed to reload Phoenix market data\");\n                }\n            });\n            this.clockCallbackId = await this.accountLoader.addAccount(web3_js_1.SYSVAR_CLOCK_PUBKEY, (buffer, slot)=>{\n                try {\n                    this.lastSlot = slot;\n                    const clock = (0, phoenix_sdk_1.deserializeClockData)(buffer);\n                    this.lastUnixTimestamp = (0, phoenix_sdk_1.toNum)(clock.unixTimestamp);\n                } catch  {\n                    console.error(\"Failed to reload clock data\");\n                }\n            });\n        }\n        this.subscribed = true;\n    }\n    getBestBid() {\n        const ladder = (0, phoenix_sdk_1.getMarketUiLadder)(this.market, this.lastSlot, this.lastUnixTimestamp, 1);\n        const bestBid = ladder.bids[0];\n        if (!bestBid) {\n            return undefined;\n        }\n        return new anchor_1.BN(Math.floor(bestBid.price * numericConstants_1.PRICE_PRECISION.toNumber()));\n    }\n    getBestAsk() {\n        const ladder = (0, phoenix_sdk_1.getMarketUiLadder)(this.market, this.lastSlot, this.lastUnixTimestamp, 1);\n        const bestAsk = ladder.asks[0];\n        if (!bestAsk) {\n            return undefined;\n        }\n        return new anchor_1.BN(Math.floor(bestAsk.price * numericConstants_1.PRICE_PRECISION.toNumber()));\n    }\n    getL2Bids() {\n        return this.getL2Levels(\"bids\");\n    }\n    getL2Asks() {\n        return this.getL2Levels(\"asks\");\n    }\n    *getL2Levels(side) {\n        const basePrecision = Math.pow(10, this.market.data.header.baseParams.decimals);\n        const pricePrecision = numericConstants_1.PRICE_PRECISION.toNumber();\n        const ladder = (0, phoenix_sdk_1.getMarketUiLadder)(this.market, this.lastSlot, this.lastUnixTimestamp, 20);\n        for(let i = 0; i < ladder[side].length; i++){\n            const { price, quantity } = ladder[side][i];\n            const size = new anchor_1.BN(Math.floor(quantity * basePrecision));\n            yield {\n                price: new anchor_1.BN(Math.floor(price * pricePrecision)),\n                size,\n                sources: {\n                    phoenix: size\n                }\n            };\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscribed) {\n            return;\n        }\n        // remove listeners\n        if (this.subscriptionType === \"websocket\") {\n            await this.connection.removeAccountChangeListener(this.marketCallbackId);\n            await this.connection.removeAccountChangeListener(this.clockCallbackId);\n        } else {\n            this.accountLoader.removeAccount(this.marketAddress, this.marketCallbackId);\n            this.accountLoader.removeAccount(web3_js_1.SYSVAR_CLOCK_PUBKEY, this.clockCallbackId);\n        }\n        this.subscribed = false;\n    }\n}\nexports.PhoenixSubscriber = PhoenixSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9waG9lbml4L3Bob2VuaXhTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCx5QkFBeUIsR0FBRyxLQUFLO0FBQ2pDLE1BQU1HLFlBQVlDLG1CQUFPQSxDQUFDLDhFQUFpQjtBQUMzQyxNQUFNQyxnQkFBZ0JELG1CQUFPQSxDQUFDLGlHQUE0QjtBQUMxRCxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLDZHQUErQjtBQUNsRSxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxtRkFBbUI7QUFDNUMsTUFBTUY7SUFDRk0sWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLElBQUksQ0FBQ0MsVUFBVSxHQUFHRCxPQUFPQyxVQUFVO1FBQ25DLElBQUksQ0FBQ0MsU0FBUyxHQUFHRixPQUFPRSxTQUFTO1FBQ2pDLElBQUksQ0FBQ0MsYUFBYSxHQUFHSCxPQUFPRyxhQUFhO1FBQ3pDLElBQUlILE9BQU9JLG1CQUFtQixDQUFDQyxJQUFJLEtBQUssV0FBVztZQUMvQyxJQUFJLENBQUNDLGdCQUFnQixHQUFHO1lBQ3hCLElBQUksQ0FBQ0MsYUFBYSxHQUFHUCxPQUFPSSxtQkFBbUIsQ0FBQ0csYUFBYTtRQUNqRSxPQUNLO1lBQ0QsSUFBSSxDQUFDRCxnQkFBZ0IsR0FBRztRQUM1QjtRQUNBLElBQUksQ0FBQ0UsUUFBUSxHQUFHO1FBQ2hCLElBQUksQ0FBQ0MsaUJBQWlCLEdBQUc7SUFDN0I7SUFDQSxNQUFNQyxZQUFZO1FBQ2QsSUFBSSxJQUFJLENBQUNDLFVBQVUsRUFBRTtZQUNqQjtRQUNKO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsTUFBTWhCLGNBQWNpQixNQUFNLENBQUNDLGVBQWUsQ0FBQztZQUNyRGIsWUFBWSxJQUFJLENBQUNBLFVBQVU7WUFDM0JjLFNBQVMsSUFBSSxDQUFDWixhQUFhO1FBQy9CO1FBQ0EsTUFBTWEs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LENBQUNDLFFBQVFlO2dCQUMxQ0k7Z0JBQ0FDLFNBQVM7b0JBQ0xDLFNBQVNGO2dCQUNiO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsTUFBTUcsY0FBYztRQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDdkQsVUFBVSxFQUFFO1lBQ2xCO1FBQ0o7UUFDQSxtQkFBbUI7UUFDbkIsSUFBSSxJQUFJLENBQUNMLGdCQUFnQixLQUFLLGFBQWE7WUFDdkMsTUFBTSxJQUFJLENBQUNMLFVBQVUsQ0FBQ2tFLDJCQUEyQixDQUFDLElBQUksQ0FBQzVDLGdCQUFnQjtZQUN2RSxNQUFNLElBQUksQ0FBQ3RCLFVBQVUsQ0FBQ2tFLDJCQUEyQixDQUFDLElBQUksQ0FBQ3JDLGVBQWU7UUFDMUUsT0FDSztZQUNELElBQUksQ0FBQ3ZCLGFBQWEsQ0FBQzZELGFBQWEsQ0FBQyxJQUFJLENBQUNqRSxhQUFhLEVBQUUsSUFBSSxDQUFDb0IsZ0JBQWdCO1lBQzFFLElBQUksQ0FBQ2hCLGFBQWEsQ0FBQzZELGFBQWEsQ0FBQzFFLFVBQVV5QixtQkFBbUIsRUFBRSxJQUFJLENBQUNXLGVBQWU7UUFDeEY7UUFDQSxJQUFJLENBQUNuQixVQUFVLEdBQUc7SUFDdEI7QUFDSjtBQUNBcEIseUJBQXlCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3Bob2VuaXgvcGhvZW5peFN1YnNjcmliZXIuanM/MGVhYSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuUGhvZW5peFN1YnNjcmliZXIgPSB2b2lkIDA7XG5jb25zdCB3ZWIzX2pzXzEgPSByZXF1aXJlKFwiQHNvbGFuYS93ZWIzLmpzXCIpO1xuY29uc3QgcGhvZW5peF9zZGtfMSA9IHJlcXVpcmUoXCJAZWxsaXBzaXMtbGFicy9waG9lbml4LXNka1wiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IGFuY2hvcl8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yXCIpO1xuY2xhc3MgUGhvZW5peFN1YnNjcmliZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25maWcuY29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5wcm9ncmFtSWQgPSBjb25maWcucHJvZ3JhbUlkO1xuICAgICAgICB0aGlzLm1hcmtldEFkZHJlc3MgPSBjb25maWcubWFya2V0QWRkcmVzcztcbiAgICAgICAgaWYgKGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uLnR5cGUgPT09ICdwb2xsaW5nJykge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25UeXBlID0gJ3BvbGxpbmcnO1xuICAgICAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyID0gY29uZmlnLmFjY291bnRTdWJzY3JpcHRpb24uYWNjb3VudExvYWRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uVHlwZSA9ICd3ZWJzb2NrZXQnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdFNsb3QgPSAwO1xuICAgICAgICB0aGlzLmxhc3RVbml4VGltZXN0YW1wID0gMDtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXJrZXQgPSBhd2FpdCBwaG9lbml4X3Nka18xLk1hcmtldC5sb2FkRnJvbUFkZHJlc3Moe1xuICAgICAgICAgICAgY29ubmVjdGlvbjogdGhpcy5jb25uZWN0aW9uLFxuICAgICAgICAgICAgYWRkcmVzczogdGhpcy5tYXJrZXRBZGRyZXNzLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY2xvY2sgPSAoMCwgcGhvZW5peF9zZGtfMS5kZXNlcmlhbGl6ZUNsb2NrRGF0YSkoKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRBY2NvdW50SW5mbyh3ZWIzX2pzXzEuU1lTVkFSX0NMT0NLX1BVQktFWSwgJ2NvbmZpcm1lZCcpKVxuICAgICAgICAgICAgLmRhdGEpO1xuICAgICAgICB0aGlzLmxhc3RVbml4VGltZXN0YW1wID0gKDAsIHBob2VuaXhfc2RrXzEudG9OdW0pKGNsb2NrLnVuaXhUaW1lc3RhbXApO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25UeXBlID09PSAnd2Vic29ja2V0Jykge1xuICAgICAgICAgICAgdGhpcy5tYXJrZXRDYWxsYmFja0lkID0gdGhpcy5jb25uZWN0aW9uLm9uQWNjb3VudENoYW5nZSh0aGlzLm1hcmtldEFkZHJlc3MsIChhY2NvdW50SW5mbywgX2N0eCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWFya2V0ID0gdGhpcy5tYXJrZXQucmVsb2FkKGFjY291bnRJbmZvLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWxvYWQgUGhvZW5peCBtYXJrZXQgZGF0YScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jbG9ja0NhbGxiYWNrSWQgPSB0aGlzLmNvbm5lY3Rpb24ub25BY2NvdW50Q2hhbmdlKHdlYjNfanNfMS5TWVNWQVJfQ0xPQ0tfUFVCS0VZLCAoYWNjb3VudEluZm8sIGN0eCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFNsb3QgPSBjdHguc2xvdDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xvY2sgPSAoMCwgcGhvZW5peF9zZGtfMS5kZXNlcmlhbGl6ZUNsb2NrRGF0YSkoYWNjb3VudEluZm8uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFVuaXhUaW1lc3RhbXAgPSAoMCwgcGhvZW5peF9zZGtfMS50b051bSkoY2xvY2sudW5peFRpbWVzdGFtcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlbG9hZCBjbG9jayBkYXRhJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hcmtldENhbGxiYWNrSWQgPSBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIuYWRkQWNjb3VudCh0aGlzLm1hcmtldEFkZHJlc3MsIChidWZmZXIsIHNsb3QpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RTbG90ID0gc2xvdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXJrZXQgPSB0aGlzLm1hcmtldC5yZWxvYWQoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWxvYWQgUGhvZW5peCBtYXJrZXQgZGF0YScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jbG9ja0NhbGxiYWNrSWQgPSBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIuYWRkQWNjb3VudCh3ZWIzX2pzXzEuU1lTVkFSX0NMT0NLX1BVQktFWSwgKGJ1ZmZlciwgc2xvdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFNsb3QgPSBzbG90O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9jayA9ICgwLCBwaG9lbml4X3Nka18xLmRlc2VyaWFsaXplQ2xvY2tEYXRhKShidWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RVbml4VGltZXN0YW1wID0gKDAsIHBob2VuaXhfc2RrXzEudG9OdW0pKGNsb2NrLnVuaXhUaW1lc3RhbXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWxvYWQgY2xvY2sgZGF0YScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgfVxuICAgIGdldEJlc3RCaWQoKSB7XG4gICAgICAgIGNvbnN0IGxhZGRlciA9ICgwLCBwaG9lbml4X3Nka18xLmdldE1hcmtldFVpTGFkZGVyKSh0aGlzLm1hcmtldCwgdGhpcy5sYXN0U2xvdCwgdGhpcy5sYXN0VW5peFRpbWVzdGFtcCwgMSk7XG4gICAgICAgIGNvbnN0IGJlc3RCaWQgPSBsYWRkZXIuYmlkc1swXTtcbiAgICAgICAgaWYgKCFiZXN0QmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgYW5jaG9yXzEuQk4oTWF0aC5mbG9vcihiZXN0QmlkLnByaWNlICogbnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTi50b051bWJlcigpKSk7XG4gICAgfVxuICAgIGdldEJlc3RBc2soKSB7XG4gICAgICAgIGNvbnN0IGxhZGRlciA9ICgwLCBwaG9lbml4X3Nka18xLmdldE1hcmtldFVpTGFkZGVyKSh0aGlzLm1hcmtldCwgdGhpcy5sYXN0U2xvdCwgdGhpcy5sYXN0VW5peFRpbWVzdGFtcCwgMSk7XG4gICAgICAgIGNvbnN0IGJlc3RBc2sgPSBsYWRkZXIuYXNrc1swXTtcbiAgICAgICAgaWYgKCFiZXN0QXNrKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgYW5jaG9yXzEuQk4oTWF0aC5mbG9vcihiZXN0QXNrLnByaWNlICogbnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTi50b051bWJlcigpKSk7XG4gICAgfVxuICAgIGdldEwyQmlkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TDJMZXZlbHMoJ2JpZHMnKTtcbiAgICB9XG4gICAgZ2V0TDJBc2tzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMMkxldmVscygnYXNrcycpO1xuICAgIH1cbiAgICAqZ2V0TDJMZXZlbHMoc2lkZSkge1xuICAgICAgICBjb25zdCBiYXNlUHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIHRoaXMubWFya2V0LmRhdGEuaGVhZGVyLmJhc2VQYXJhbXMuZGVjaW1hbHMpO1xuICAgICAgICBjb25zdCBwcmljZVByZWNpc2lvbiA9IG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04udG9OdW1iZXIoKTtcbiAgICAgICAgY29uc3QgbGFkZGVyID0gKDAsIHBob2VuaXhfc2RrXzEuZ2V0TWFya2V0VWlMYWRkZXIpKHRoaXMubWFya2V0LCB0aGlzLmxhc3RTbG90LCB0aGlzLmxhc3RVbml4VGltZXN0YW1wLCAyMCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFkZGVyW3NpZGVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB7IHByaWNlLCBxdWFudGl0eSB9ID0gbGFkZGVyW3NpZGVdW2ldO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IG5ldyBhbmNob3JfMS5CTihNYXRoLmZsb29yKHF1YW50aXR5ICogYmFzZVByZWNpc2lvbikpO1xuICAgICAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgICAgIHByaWNlOiBuZXcgYW5jaG9yXzEuQk4oTWF0aC5mbG9vcihwcmljZSAqIHByaWNlUHJlY2lzaW9uKSksXG4gICAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgICBzb3VyY2VzOiB7XG4gICAgICAgICAgICAgICAgICAgIHBob2VuaXg6IHNpemUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIGxpc3RlbmVyc1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25UeXBlID09PSAnd2Vic29ja2V0Jykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uLnJlbW92ZUFjY291bnRDaGFuZ2VMaXN0ZW5lcih0aGlzLm1hcmtldENhbGxiYWNrSWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uLnJlbW92ZUFjY291bnRDaGFuZ2VMaXN0ZW5lcih0aGlzLmNsb2NrQ2FsbGJhY2tJZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIucmVtb3ZlQWNjb3VudCh0aGlzLm1hcmtldEFkZHJlc3MsIHRoaXMubWFya2V0Q2FsbGJhY2tJZCk7XG4gICAgICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIucmVtb3ZlQWNjb3VudCh3ZWIzX2pzXzEuU1lTVkFSX0NMT0NLX1BVQktFWSwgdGhpcy5jbG9ja0NhbGxiYWNrSWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbn1cbmV4cG9ydHMuUGhvZW5peFN1YnNjcmliZXIgPSBQaG9lbml4U3Vic2NyaWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlBob2VuaXhTdWJzY3JpYmVyIiwid2ViM19qc18xIiwicmVxdWlyZSIsInBob2VuaXhfc2RrXzEiLCJudW1lcmljQ29uc3RhbnRzXzEiLCJhbmNob3JfMSIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiY29ubmVjdGlvbiIsInByb2dyYW1JZCIsIm1hcmtldEFkZHJlc3MiLCJhY2NvdW50U3Vic2NyaXB0aW9uIiwidHlwZSIsInN1YnNjcmlwdGlvblR5cGUiLCJhY2NvdW50TG9hZGVyIiwibGFzdFNsb3QiLCJsYXN0VW5peFRpbWVzdGFtcCIsInN1YnNjcmliZSIsInN1YnNjcmliZWQiLCJtYXJrZXQiLCJNYXJrZXQiLCJsb2FkRnJvbUFkZHJlc3MiLCJhZGRyZXNzIiwiY2xvY2siLCJkZXNlcmlhbGl6ZUNsb2NrRGF0YSIsImdldEFjY291bnRJbmZvIiwiU1lTVkFSX0NMT0NLX1BVQktFWSIsImRhdGEiLCJ0b051bSIsInVuaXhUaW1lc3RhbXAiLCJtYXJrZXRDYWxsYmFja0lkIiwib25BY2NvdW50Q2hhbmdlIiwiYWNjb3VudEluZm8iLCJfY3R4IiwicmVsb2FkIiwiY29uc29sZSIsImVycm9yIiwiY2xvY2tDYWxsYmFja0lkIiwiY3R4Iiwic2xvdCIsImFkZEFjY291bnQiLCJidWZmZXIiLCJnZXRCZXN0QmlkIiwibGFkZGVyIiwiZ2V0TWFya2V0VWlMYWRkZXIiLCJiZXN0QmlkIiwiYmlkcyIsInVuZGVmaW5lZCIsIkJOIiwiTWF0aCIsImZsb29yIiwicHJpY2UiLCJQUklDRV9QUkVDSVNJT04iLCJ0b051bWJlciIsImdldEJlc3RBc2siLCJiZXN0QXNrIiwiYXNrcyIsImdldEwyQmlkcyIsImdldEwyTGV2ZWxzIiwiZ2V0TDJBc2tzIiwic2lkZSIsImJhc2VQcmVjaXNpb24iLCJwb3ciLCJoZWFkZXIiLCJiYXNlUGFyYW1zIiwiZGVjaW1hbHMiLCJwcmljZVByZWNpc2lvbiIsImkiLCJsZW5ndGgiLCJxdWFudGl0eSIsInNpemUiLCJzb3VyY2VzIiwicGhvZW5peCIsInVuc3Vic2NyaWJlIiwicmVtb3ZlQWNjb3VudENoYW5nZUxpc3RlbmVyIiwicmVtb3ZlQWNjb3VudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/phoenix/phoenixSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/serum/serumFulfillmentConfigMap.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/serum/serumFulfillmentConfigMap.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SerumFulfillmentConfigMap = void 0;\nclass SerumFulfillmentConfigMap {\n    constructor(driftClient){\n        this.map = new Map();\n        this.driftClient = driftClient;\n    }\n    async add(marketIndex, serumMarketAddress) {\n        const account = await this.driftClient.getSerumV3FulfillmentConfig(serumMarketAddress);\n        this.map.set(marketIndex, account);\n    }\n    get(marketIndex) {\n        return this.map.get(marketIndex);\n    }\n}\nexports.SerumFulfillmentConfigMap = SerumFulfillmentConfigMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9zZXJ1bS9zZXJ1bUZ1bGZpbGxtZW50Q29uZmlnTWFwLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxpQ0FBaUMsR0FBRyxLQUFLO0FBQ3pDLE1BQU1FO0lBQ0ZDLFlBQVlDLFdBQVcsQ0FBRTtRQUNyQixJQUFJLENBQUNDLEdBQUcsR0FBRyxJQUFJQztRQUNmLElBQUksQ0FBQ0YsV0FBVyxHQUFHQTtJQUN2QjtJQUNBLE1BQU1HLElBQUlDLFdBQVcsRUFBRUMsa0JBQWtCLEVBQUU7UUFDdkMsTUFBTUMsVUFBVSxNQUFNLElBQUksQ0FBQ04sV0FBVyxDQUFDTywyQkFBMkIsQ0FBQ0Y7UUFDbkUsSUFBSSxDQUFDSixHQUFHLENBQUNPLEdBQUcsQ0FBQ0osYUFBYUU7SUFDOUI7SUFDQUcsSUFBSUwsV0FBVyxFQUFFO1FBQ2IsT0FBTyxJQUFJLENBQUNILEdBQUcsQ0FBQ1EsR0FBRyxDQUFDTDtJQUN4QjtBQUNKO0FBQ0FSLGlDQUFpQyxHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9zZXJ1bS9zZXJ1bUZ1bGZpbGxtZW50Q29uZmlnTWFwLmpzPzQzZGEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNlcnVtRnVsZmlsbG1lbnRDb25maWdNYXAgPSB2b2lkIDA7XG5jbGFzcyBTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihkcmlmdENsaWVudCkge1xuICAgICAgICB0aGlzLm1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5kcmlmdENsaWVudCA9IGRyaWZ0Q2xpZW50O1xuICAgIH1cbiAgICBhc3luYyBhZGQobWFya2V0SW5kZXgsIHNlcnVtTWFya2V0QWRkcmVzcykge1xuICAgICAgICBjb25zdCBhY2NvdW50ID0gYXdhaXQgdGhpcy5kcmlmdENsaWVudC5nZXRTZXJ1bVYzRnVsZmlsbG1lbnRDb25maWcoc2VydW1NYXJrZXRBZGRyZXNzKTtcbiAgICAgICAgdGhpcy5tYXAuc2V0KG1hcmtldEluZGV4LCBhY2NvdW50KTtcbiAgICB9XG4gICAgZ2V0KG1hcmtldEluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5nZXQobWFya2V0SW5kZXgpO1xuICAgIH1cbn1cbmV4cG9ydHMuU2VydW1GdWxmaWxsbWVudENvbmZpZ01hcCA9IFNlcnVtRnVsZmlsbG1lbnRDb25maWdNYXA7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTZXJ1bUZ1bGZpbGxtZW50Q29uZmlnTWFwIiwiY29uc3RydWN0b3IiLCJkcmlmdENsaWVudCIsIm1hcCIsIk1hcCIsImFkZCIsIm1hcmtldEluZGV4Iiwic2VydW1NYXJrZXRBZGRyZXNzIiwiYWNjb3VudCIsImdldFNlcnVtVjNGdWxmaWxsbWVudENvbmZpZyIsInNldCIsImdldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/serum/serumFulfillmentConfigMap.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/serum/serumSubscriber.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/serum/serumSubscriber.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SerumSubscriber = void 0;\nconst serum_1 = __webpack_require__(/*! @project-serum/serum */ \"(ssr)/./node_modules/@project-serum/serum/lib/index.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst numericConstants_1 = __webpack_require__(/*! ../constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nclass SerumSubscriber {\n    constructor(config){\n        this.connection = config.connection;\n        this.programId = config.programId;\n        this.marketAddress = config.marketAddress;\n        if (config.accountSubscription.type === \"polling\") {\n            this.subscriptionType = \"polling\";\n            this.accountLoader = config.accountSubscription.accountLoader;\n        } else {\n            this.subscriptionType = \"websocket\";\n        }\n    }\n    async subscribe() {\n        if (this.subscribed) {\n            return;\n        }\n        this.market = await serum_1.Market.load(this.connection, this.marketAddress, undefined, this.programId);\n        this.asksAddress = this.market.asksAddress;\n        this.asks = await this.market.loadAsks(this.connection);\n        if (this.subscriptionType === \"websocket\") {\n            this.asksCallbackId = this.connection.onAccountChange(this.asksAddress, (accountInfo, ctx)=>{\n                this.lastAsksSlot = ctx.slot;\n                this.asks = serum_1.Orderbook.decode(this.market, accountInfo.data);\n            });\n        } else {\n            this.asksCallbackId = await this.accountLoader.addAccount(this.asksAddress, (buffer, slot)=>{\n                this.lastAsksSlot = slot;\n                this.asks = serum_1.Orderbook.decode(this.market, buffer);\n            });\n        }\n        this.bidsAddress = this.market.bidsAddress;\n        this.bids = await this.market.loadBids(this.connection);\n        if (this.subscriptionType === \"websocket\") {\n            this.bidsCallbackId = this.connection.onAccountChange(this.bidsAddress, (accountInfo, ctx)=>{\n                this.lastBidsSlot = ctx.slot;\n                this.bids = serum_1.Orderbook.decode(this.market, accountInfo.data);\n            });\n        } else {\n            this.bidsCallbackId = await this.accountLoader.addAccount(this.bidsAddress, (buffer, slot)=>{\n                this.lastBidsSlot = slot;\n                this.bids = serum_1.Orderbook.decode(this.market, buffer);\n            });\n        }\n        this.subscribed = true;\n    }\n    getBestBid() {\n        const bestBid = this.bids.getL2(1)[0];\n        if (!bestBid) {\n            return undefined;\n        }\n        return new anchor_1.BN(bestBid[0] * numericConstants_1.PRICE_PRECISION.toNumber());\n    }\n    getBestAsk() {\n        const bestAsk = this.asks.getL2(1)[0];\n        if (!bestAsk) {\n            return undefined;\n        }\n        return new anchor_1.BN(bestAsk[0] * numericConstants_1.PRICE_PRECISION.toNumber());\n    }\n    getL2Bids() {\n        return this.getL2Levels(\"bids\");\n    }\n    getL2Asks() {\n        return this.getL2Levels(\"asks\");\n    }\n    *getL2Levels(side) {\n        // @ts-ignore\n        const basePrecision = Math.pow(10, this.market._baseSplTokenDecimals);\n        const pricePrecision = numericConstants_1.PRICE_PRECISION.toNumber();\n        for (const { price: priceNum, size: sizeNum } of this[side].items(side === \"bids\")){\n            const price = new anchor_1.BN(priceNum * pricePrecision);\n            const size = new anchor_1.BN(sizeNum * basePrecision);\n            yield {\n                price,\n                size,\n                sources: {\n                    serum: size\n                }\n            };\n        }\n    }\n    async unsubscribe() {\n        if (!this.subscribed) {\n            return;\n        }\n        // remove listeners\n        if (this.subscriptionType === \"websocket\") {\n            await this.connection.removeAccountChangeListener(this.asksCallbackId);\n            await this.connection.removeAccountChangeListener(this.bidsCallbackId);\n        } else {\n            this.accountLoader.removeAccount(this.asksAddress, this.asksCallbackId);\n            this.accountLoader.removeAccount(this.bidsAddress, this.bidsCallbackId);\n        }\n        this.subscribed = false;\n    }\n}\nexports.SerumSubscriber = SerumSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9zZXJ1bS9zZXJ1bVN1YnNjcmliZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELHVCQUF1QixHQUFHLEtBQUs7QUFDL0IsTUFBTUcsVUFBVUMsbUJBQU9BLENBQUMsb0ZBQXNCO0FBQzlDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNRSxxQkFBcUJGLG1CQUFPQSxDQUFDLDZHQUErQjtBQUNsRSxNQUFNRjtJQUNGSyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFDQyxVQUFVLEdBQUdELE9BQU9DLFVBQVU7UUFDbkMsSUFBSSxDQUFDQyxTQUFTLEdBQUdGLE9BQU9FLFNBQVM7UUFDakMsSUFBSSxDQUFDQyxhQUFhLEdBQUdILE9BQU9HLGFBQWE7UUFDekMsSUFBSUgsT0FBT0ksbUJBQW1CLENBQUNDLElBQUksS0FBSyxXQUFXO1lBQy9DLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUc7WUFDeEIsSUFBSSxDQUFDQyxhQUFhLEdBQUdQLE9BQU9JLG1CQUFtQixDQUFDRyxhQUFhO1FBQ2pFLE9BQ0s7WUFDRCxJQUFJLENBQUNELGdCQUFnQixHQUFHO1FBQzVCO0lBQ0o7SUFDQSxNQUFNRSxZQUFZO1FBQ2QsSUFBSSxJQUFJLENBQUNDLFVBQVUsRUFBRTtZQUNqQjtRQUNKO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsTUFBTWYsUUFBUWdCLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQ1gsVUFBVSxFQUFFLElBQUksQ0FBQ0UsYUFBYSxFQUFFVSxXQUFXLElBQUksQ0FBQ1gsU0FBUztRQUN0RyxJQUFJLENBQUNZLFdBQVcsR0FBRyxJQUFJLENBQUNKLE1BQU0sQ0FBQ0ksV0FBVztRQUMxQyxJQUFJLENBQUNDLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQ0wsTUFBTSxDQUFDTSxR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cUI7UUFDcEUsTUFBTUMsaUJBQWlCbkQsbUJBQW1CdUMsZUFBZSxDQUFDQyxRQUFRO1FBQ2xFLEtBQUssTUFBTSxFQUFFWSxPQUFPQyxRQUFRLEVBQUVDLE1BQU1DLE9BQU8sRUFBRSxJQUFJLElBQUksQ0FBQ1QsS0FBSyxDQUFDVSxLQUFLLENBQUNWLFNBQVMsUUFBUztZQUNoRixNQUFNTSxRQUFRLElBQUlyRCxTQUFTdUMsRUFBRSxDQUFDZSxXQUFXRjtZQUN6QyxNQUFNRyxPQUFPLElBQUl2RCxTQUFTdUMsRUFBRSxDQUFDaUIsVUFBVVI7WUFDdkMsTUFBTTtnQkFDRks7Z0JBQ0FFO2dCQUNBRyxTQUFTO29CQUNMQyxPQUFPSjtnQkFDWDtZQUNKO1FBQ0o7SUFDSjtJQUNBLE1BQU1LLGNBQWM7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQ2hELFVBQVUsRUFBRTtZQUNsQjtRQUNKO1FBQ0EsbUJBQW1CO1FBQ25CLElBQUksSUFBSSxDQUFDSCxnQkFBZ0IsS0FBSyxhQUFhO1lBQ3ZDLE1BQU0sSUFBSSxDQUFDTCxVQUFVLENBQUN5RCwyQkFBMkIsQ0FBQyxJQUFJLENBQUN6QyxjQUFjO1lBQ3JFLE1BQU0sSUFBSSxDQUFDaEIsVUFBVSxDQUFDeUQsMkJBQTJCLENBQUMsSUFBSSxDQUFDM0IsY0FBYztRQUN6RSxPQUNLO1lBQ0QsSUFBSSxDQUFDeEIsYUFBYSxDQUFDb0QsYUFBYSxDQUFDLElBQUksQ0FBQzdDLFdBQVcsRUFBRSxJQUFJLENBQUNHLGNBQWM7WUFDdEUsSUFBSSxDQUFDVixhQUFhLENBQUNvRCxhQUFhLENBQUMsSUFBSSxDQUFDL0IsV0FBVyxFQUFFLElBQUksQ0FBQ0csY0FBYztRQUMxRTtRQUNBLElBQUksQ0FBQ3RCLFVBQVUsR0FBRztJQUN0QjtBQUNKO0FBQ0FqQix1QkFBdUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvc2VydW0vc2VydW1TdWJzY3JpYmVyLmpzPzhlNTgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNlcnVtU3Vic2NyaWJlciA9IHZvaWQgMDtcbmNvbnN0IHNlcnVtXzEgPSByZXF1aXJlKFwiQHByb2plY3Qtc2VydW0vc2VydW1cIik7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IG51bWVyaWNDb25zdGFudHNfMSA9IHJlcXVpcmUoXCIuLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNsYXNzIFNlcnVtU3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbmZpZy5jb25uZWN0aW9uO1xuICAgICAgICB0aGlzLnByb2dyYW1JZCA9IGNvbmZpZy5wcm9ncmFtSWQ7XG4gICAgICAgIHRoaXMubWFya2V0QWRkcmVzcyA9IGNvbmZpZy5tYXJrZXRBZGRyZXNzO1xuICAgICAgICBpZiAoY29uZmlnLmFjY291bnRTdWJzY3JpcHRpb24udHlwZSA9PT0gJ3BvbGxpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblR5cGUgPSAncG9sbGluZyc7XG4gICAgICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIgPSBjb25maWcuYWNjb3VudFN1YnNjcmlwdGlvbi5hY2NvdW50TG9hZGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25UeXBlID0gJ3dlYnNvY2tldCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXJrZXQgPSBhd2FpdCBzZXJ1bV8xLk1hcmtldC5sb2FkKHRoaXMuY29ubmVjdGlvbiwgdGhpcy5tYXJrZXRBZGRyZXNzLCB1bmRlZmluZWQsIHRoaXMucHJvZ3JhbUlkKTtcbiAgICAgICAgdGhpcy5hc2tzQWRkcmVzcyA9IHRoaXMubWFya2V0LmFza3NBZGRyZXNzO1xuICAgICAgICB0aGlzLmFza3MgPSBhd2FpdCB0aGlzLm1hcmtldC5sb2FkQXNrcyh0aGlzLmNvbm5lY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25UeXBlID09PSAnd2Vic29ja2V0Jykge1xuICAgICAgICAgICAgdGhpcy5hc2tzQ2FsbGJhY2tJZCA9IHRoaXMuY29ubmVjdGlvbi5vbkFjY291bnRDaGFuZ2UodGhpcy5hc2tzQWRkcmVzcywgKGFjY291bnRJbmZvLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RBc2tzU2xvdCA9IGN0eC5zbG90O1xuICAgICAgICAgICAgICAgIHRoaXMuYXNrcyA9IHNlcnVtXzEuT3JkZXJib29rLmRlY29kZSh0aGlzLm1hcmtldCwgYWNjb3VudEluZm8uZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXNrc0NhbGxiYWNrSWQgPSBhd2FpdCB0aGlzLmFjY291bnRMb2FkZXIuYWRkQWNjb3VudCh0aGlzLmFza3NBZGRyZXNzLCAoYnVmZmVyLCBzbG90KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0QXNrc1Nsb3QgPSBzbG90O1xuICAgICAgICAgICAgICAgIHRoaXMuYXNrcyA9IHNlcnVtXzEuT3JkZXJib29rLmRlY29kZSh0aGlzLm1hcmtldCwgYnVmZmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmlkc0FkZHJlc3MgPSB0aGlzLm1hcmtldC5iaWRzQWRkcmVzcztcbiAgICAgICAgdGhpcy5iaWRzID0gYXdhaXQgdGhpcy5tYXJrZXQubG9hZEJpZHModGhpcy5jb25uZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uVHlwZSA9PT0gJ3dlYnNvY2tldCcpIHtcbiAgICAgICAgICAgIHRoaXMuYmlkc0NhbGxiYWNrSWQgPSB0aGlzLmNvbm5lY3Rpb24ub25BY2NvdW50Q2hhbmdlKHRoaXMuYmlkc0FkZHJlc3MsIChhY2NvdW50SW5mbywgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0Qmlkc1Nsb3QgPSBjdHguc2xvdDtcbiAgICAgICAgICAgICAgICB0aGlzLmJpZHMgPSBzZXJ1bV8xLk9yZGVyYm9vay5kZWNvZGUodGhpcy5tYXJrZXQsIGFjY291bnRJbmZvLmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpZHNDYWxsYmFja0lkID0gYXdhaXQgdGhpcy5hY2NvdW50TG9hZGVyLmFkZEFjY291bnQodGhpcy5iaWRzQWRkcmVzcywgKGJ1ZmZlciwgc2xvdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEJpZHNTbG90ID0gc2xvdDtcbiAgICAgICAgICAgICAgICB0aGlzLmJpZHMgPSBzZXJ1bV8xLk9yZGVyYm9vay5kZWNvZGUodGhpcy5tYXJrZXQsIGJ1ZmZlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmliZWQgPSB0cnVlO1xuICAgIH1cbiAgICBnZXRCZXN0QmlkKCkge1xuICAgICAgICBjb25zdCBiZXN0QmlkID0gdGhpcy5iaWRzLmdldEwyKDEpWzBdO1xuICAgICAgICBpZiAoIWJlc3RCaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBhbmNob3JfMS5CTihiZXN0QmlkWzBdICogbnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTi50b051bWJlcigpKTtcbiAgICB9XG4gICAgZ2V0QmVzdEFzaygpIHtcbiAgICAgICAgY29uc3QgYmVzdEFzayA9IHRoaXMuYXNrcy5nZXRMMigxKVswXTtcbiAgICAgICAgaWYgKCFiZXN0QXNrKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgYW5jaG9yXzEuQk4oYmVzdEFza1swXSAqIG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04udG9OdW1iZXIoKSk7XG4gICAgfVxuICAgIGdldEwyQmlkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TDJMZXZlbHMoJ2JpZHMnKTtcbiAgICB9XG4gICAgZ2V0TDJBc2tzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMMkxldmVscygnYXNrcycpO1xuICAgIH1cbiAgICAqZ2V0TDJMZXZlbHMoc2lkZSkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IGJhc2VQcmVjaXNpb24gPSBNYXRoLnBvdygxMCwgdGhpcy5tYXJrZXQuX2Jhc2VTcGxUb2tlbkRlY2ltYWxzKTtcbiAgICAgICAgY29uc3QgcHJpY2VQcmVjaXNpb24gPSBudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OLnRvTnVtYmVyKCk7XG4gICAgICAgIGZvciAoY29uc3QgeyBwcmljZTogcHJpY2VOdW0sIHNpemU6IHNpemVOdW0gfSBvZiB0aGlzW3NpZGVdLml0ZW1zKHNpZGUgPT09ICdiaWRzJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByaWNlID0gbmV3IGFuY2hvcl8xLkJOKHByaWNlTnVtICogcHJpY2VQcmVjaXNpb24pO1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IG5ldyBhbmNob3JfMS5CTihzaXplTnVtICogYmFzZVByZWNpc2lvbik7XG4gICAgICAgICAgICB5aWVsZCB7XG4gICAgICAgICAgICAgICAgcHJpY2UsXG4gICAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgICBzb3VyY2VzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnVtOiBzaXplLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSBsaXN0ZW5lcnNcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uVHlwZSA9PT0gJ3dlYnNvY2tldCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdGlvbi5yZW1vdmVBY2NvdW50Q2hhbmdlTGlzdGVuZXIodGhpcy5hc2tzQ2FsbGJhY2tJZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbm5lY3Rpb24ucmVtb3ZlQWNjb3VudENoYW5nZUxpc3RlbmVyKHRoaXMuYmlkc0NhbGxiYWNrSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY2NvdW50TG9hZGVyLnJlbW92ZUFjY291bnQodGhpcy5hc2tzQWRkcmVzcywgdGhpcy5hc2tzQ2FsbGJhY2tJZCk7XG4gICAgICAgICAgICB0aGlzLmFjY291bnRMb2FkZXIucmVtb3ZlQWNjb3VudCh0aGlzLmJpZHNBZGRyZXNzLCB0aGlzLmJpZHNDYWxsYmFja0lkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICB9XG59XG5leHBvcnRzLlNlcnVtU3Vic2NyaWJlciA9IFNlcnVtU3Vic2NyaWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlNlcnVtU3Vic2NyaWJlciIsInNlcnVtXzEiLCJyZXF1aXJlIiwiYW5jaG9yXzEiLCJudW1lcmljQ29uc3RhbnRzXzEiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImNvbm5lY3Rpb24iLCJwcm9ncmFtSWQiLCJtYXJrZXRBZGRyZXNzIiwiYWNjb3VudFN1YnNjcmlwdGlvbiIsInR5cGUiLCJzdWJzY3JpcHRpb25UeXBlIiwiYWNjb3VudExvYWRlciIsInN1YnNjcmliZSIsInN1YnNjcmliZWQiLCJtYXJrZXQiLCJNYXJrZXQiLCJsb2FkIiwidW5kZWZpbmVkIiwiYXNrc0FkZHJlc3MiLCJhc2tzIiwibG9hZEFza3MiLCJhc2tzQ2FsbGJhY2tJZCIsIm9uQWNjb3VudENoYW5nZSIsImFjY291bnRJbmZvIiwiY3R4IiwibGFzdEFza3NTbG90Iiwic2xvdCIsIk9yZGVyYm9vayIsImRlY29kZSIsImRhdGEiLCJhZGRBY2NvdW50IiwiYnVmZmVyIiwiYmlkc0FkZHJlc3MiLCJiaWRzIiwibG9hZEJpZHMiLCJiaWRzQ2FsbGJhY2tJZCIsImxhc3RCaWRzU2xvdCIsImdldEJlc3RCaWQiLCJiZXN0QmlkIiwiZ2V0TDIiLCJCTiIsIlBSSUNFX1BSRUNJU0lPTiIsInRvTnVtYmVyIiwiZ2V0QmVzdEFzayIsImJlc3RBc2siLCJnZXRMMkJpZHMiLCJnZXRMMkxldmVscyIsImdldEwyQXNrcyIsInNpZGUiLCJiYXNlUHJlY2lzaW9uIiwiTWF0aCIsInBvdyIsIl9iYXNlU3BsVG9rZW5EZWNpbWFscyIsInByaWNlUHJlY2lzaW9uIiwicHJpY2UiLCJwcmljZU51bSIsInNpemUiLCJzaXplTnVtIiwiaXRlbXMiLCJzb3VyY2VzIiwic2VydW0iLCJ1bnN1YnNjcmliZSIsInJlbW92ZUFjY291bnRDaGFuZ2VMaXN0ZW5lciIsInJlbW92ZUFjY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/serum/serumSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/slot/SlotSubscriber.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/slot/SlotSubscriber.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SlotSubscriber = void 0;\nconst events_1 = __webpack_require__(/*! events */ \"events\");\nclass SlotSubscriber {\n    constructor(connection, _config){\n        this.connection = connection;\n        this.eventEmitter = new events_1.EventEmitter();\n    }\n    async subscribe() {\n        if (this.subscriptionId) {\n            return;\n        }\n        this.currentSlot = await this.connection.getSlot(\"confirmed\");\n        this.subscriptionId = this.connection.onSlotChange((slotInfo)=>{\n            this.currentSlot = slotInfo.slot;\n            this.eventEmitter.emit(\"newSlot\", slotInfo.slot);\n        });\n    }\n    getSlot() {\n        return this.currentSlot;\n    }\n    async unsubscribe() {\n        if (this.subscriptionId) {\n            await this.connection.removeSlotChangeListener(this.subscriptionId);\n        }\n    }\n}\nexports.SlotSubscriber = SlotSubscriber;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9zbG90L1Nsb3RTdWJzY3JpYmVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxzQkFBc0IsR0FBRyxLQUFLO0FBQzlCLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pDLE1BQU1GO0lBQ0ZHLFlBQVlDLFVBQVUsRUFBRUMsT0FBTyxDQUFFO1FBQzdCLElBQUksQ0FBQ0QsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNFLFlBQVksR0FBRyxJQUFJTCxTQUFTTSxZQUFZO0lBQ2pEO0lBQ0EsTUFBTUMsWUFBWTtRQUNkLElBQUksSUFBSSxDQUFDQyxjQUFjLEVBQUU7WUFDckI7UUFDSjtRQUNBLElBQUksQ0FBQ0MsV0FBVyxHQUFHLE1BQU0sSUFBSSxDQUFDTixVQUFVLENBQUNPLE9BQU8sQ0FBQztRQUNqRCxJQUFJLENBQUNGLGNBQWMsR0FBRyxJQUFJLENBQUNMLFVBQVUsQ0FBQ1EsWUFBWSxDQUFDLENBQUNDO1lBQ2hELElBQUksQ0FBQ0gsV0FBVyxHQUFHRyxTQUFTQyxJQUFJO1lBQ2hDLElBQUksQ0FBQ1IsWUFBWSxDQUFDUyxJQUFJLENBQUMsV0FBV0YsU0FBU0MsSUFBSTtRQUNuRDtJQUNKO0lBQ0FILFVBQVU7UUFDTixPQUFPLElBQUksQ0FBQ0QsV0FBVztJQUMzQjtJQUNBLE1BQU1NLGNBQWM7UUFDaEIsSUFBSSxJQUFJLENBQUNQLGNBQWMsRUFBRTtZQUNyQixNQUFNLElBQUksQ0FBQ0wsVUFBVSxDQUFDYSx3QkFBd0IsQ0FBQyxJQUFJLENBQUNSLGNBQWM7UUFDdEU7SUFDSjtBQUNKO0FBQ0FYLHNCQUFzQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi9zbG90L1Nsb3RTdWJzY3JpYmVyLmpzP2E3MGEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlNsb3RTdWJzY3JpYmVyID0gdm9pZCAwO1xuY29uc3QgZXZlbnRzXzEgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xuY2xhc3MgU2xvdFN1YnNjcmliZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbm5lY3Rpb24sIF9jb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIgPSBuZXcgZXZlbnRzXzEuRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRTbG90ID0gYXdhaXQgdGhpcy5jb25uZWN0aW9uLmdldFNsb3QoJ2NvbmZpcm1lZCcpO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbklkID0gdGhpcy5jb25uZWN0aW9uLm9uU2xvdENoYW5nZSgoc2xvdEluZm8pID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNsb3QgPSBzbG90SW5mby5zbG90O1xuICAgICAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCgnbmV3U2xvdCcsIHNsb3RJbmZvLnNsb3QpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0U2xvdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFNsb3Q7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25JZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uLnJlbW92ZVNsb3RDaGFuZ2VMaXN0ZW5lcih0aGlzLnN1YnNjcmlwdGlvbklkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuU2xvdFN1YnNjcmliZXIgPSBTbG90U3Vic2NyaWJlcjtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlNsb3RTdWJzY3JpYmVyIiwiZXZlbnRzXzEiLCJyZXF1aXJlIiwiY29uc3RydWN0b3IiLCJjb25uZWN0aW9uIiwiX2NvbmZpZyIsImV2ZW50RW1pdHRlciIsIkV2ZW50RW1pdHRlciIsInN1YnNjcmliZSIsInN1YnNjcmlwdGlvbklkIiwiY3VycmVudFNsb3QiLCJnZXRTbG90Iiwib25TbG90Q2hhbmdlIiwic2xvdEluZm8iLCJzbG90IiwiZW1pdCIsInVuc3Vic2NyaWJlIiwicmVtb3ZlU2xvdENoYW5nZUxpc3RlbmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/slot/SlotSubscriber.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/testClient.js":
/*!********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/testClient.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TestClient = void 0;\nconst adminClient_1 = __webpack_require__(/*! ./adminClient */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/adminClient.js\");\nclass TestClient extends adminClient_1.AdminClient {\n    constructor(config){\n        if (config.accountSubscription.type !== \"polling\") {\n            throw new Error(\"Test client must be polling\");\n        }\n        super(config);\n    }\n    async sendTransaction(tx, additionalSigners, opts, preSigned) {\n        const { txSig, slot } = await super.sendTransaction(tx, additionalSigners, opts, preSigned);\n        let lastFetchedSlot = this.accountSubscriber.accountLoader.mostRecentSlot;\n        while(lastFetchedSlot < slot){\n            await this.fetchAccounts();\n            lastFetchedSlot = this.accountSubscriber.accountLoader.mostRecentSlot;\n        }\n        return {\n            txSig,\n            slot\n        };\n    }\n}\nexports.TestClient = TestClient;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90ZXN0Q2xpZW50LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxrQkFBa0IsR0FBRyxLQUFLO0FBQzFCLE1BQU1HLGdCQUFnQkMsbUJBQU9BLENBQUMsOEVBQWU7QUFDN0MsTUFBTUYsbUJBQW1CQyxjQUFjRSxXQUFXO0lBQzlDQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsSUFBSUEsT0FBT0MsbUJBQW1CLENBQUNDLElBQUksS0FBSyxXQUFXO1lBQy9DLE1BQU0sSUFBSUMsTUFBTTtRQUNwQjtRQUNBLEtBQUssQ0FBQ0g7SUFDVjtJQUNBLE1BQU1JLGdCQUFnQkMsRUFBRSxFQUFFQyxpQkFBaUIsRUFBRUMsSUFBSSxFQUFFQyxTQUFTLEVBQUU7UUFDMUQsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRSxHQUFHLE1BQU0sS0FBSyxDQUFDTixnQkFBZ0JDLElBQUlDLG1CQUFtQkMsTUFBTUM7UUFDakYsSUFBSUcsa0JBQWtCLElBQUksQ0FBQ0MsaUJBQWlCLENBQUNDLGFBQWEsQ0FBQ0MsY0FBYztRQUN6RSxNQUFPSCxrQkFBa0JELEtBQU07WUFDM0IsTUFBTSxJQUFJLENBQUNLLGFBQWE7WUFDeEJKLGtCQUFrQixJQUFJLENBQUNDLGlCQUFpQixDQUFDQyxhQUFhLENBQUNDLGNBQWM7UUFDekU7UUFDQSxPQUFPO1lBQUVMO1lBQU9DO1FBQUs7SUFDekI7QUFDSjtBQUNBakIsa0JBQWtCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3Rlc3RDbGllbnQuanM/YWIwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVGVzdENsaWVudCA9IHZvaWQgMDtcbmNvbnN0IGFkbWluQ2xpZW50XzEgPSByZXF1aXJlKFwiLi9hZG1pbkNsaWVudFwiKTtcbmNsYXNzIFRlc3RDbGllbnQgZXh0ZW5kcyBhZG1pbkNsaWVudF8xLkFkbWluQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uLnR5cGUgIT09ICdwb2xsaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXN0IGNsaWVudCBtdXN0IGJlIHBvbGxpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyBzZW5kVHJhbnNhY3Rpb24odHgsIGFkZGl0aW9uYWxTaWduZXJzLCBvcHRzLCBwcmVTaWduZWQpIHtcbiAgICAgICAgY29uc3QgeyB0eFNpZywgc2xvdCB9ID0gYXdhaXQgc3VwZXIuc2VuZFRyYW5zYWN0aW9uKHR4LCBhZGRpdGlvbmFsU2lnbmVycywgb3B0cywgcHJlU2lnbmVkKTtcbiAgICAgICAgbGV0IGxhc3RGZXRjaGVkU2xvdCA9IHRoaXMuYWNjb3VudFN1YnNjcmliZXIuYWNjb3VudExvYWRlci5tb3N0UmVjZW50U2xvdDtcbiAgICAgICAgd2hpbGUgKGxhc3RGZXRjaGVkU2xvdCA8IHNsb3QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZmV0Y2hBY2NvdW50cygpO1xuICAgICAgICAgICAgbGFzdEZldGNoZWRTbG90ID0gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5hY2NvdW50TG9hZGVyLm1vc3RSZWNlbnRTbG90O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHR4U2lnLCBzbG90IH07XG4gICAgfVxufVxuZXhwb3J0cy5UZXN0Q2xpZW50ID0gVGVzdENsaWVudDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlRlc3RDbGllbnQiLCJhZG1pbkNsaWVudF8xIiwicmVxdWlyZSIsIkFkbWluQ2xpZW50IiwiY29uc3RydWN0b3IiLCJjb25maWciLCJhY2NvdW50U3Vic2NyaXB0aW9uIiwidHlwZSIsIkVycm9yIiwic2VuZFRyYW5zYWN0aW9uIiwidHgiLCJhZGRpdGlvbmFsU2lnbmVycyIsIm9wdHMiLCJwcmVTaWduZWQiLCJ0eFNpZyIsInNsb3QiLCJsYXN0RmV0Y2hlZFNsb3QiLCJhY2NvdW50U3Vic2NyaWJlciIsImFjY291bnRMb2FkZXIiLCJtb3N0UmVjZW50U2xvdCIsImZldGNoQWNjb3VudHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/testClient.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/token/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/token/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.parseTokenAccount = void 0;\nconst spl_token_1 = __webpack_require__(/*! @solana/spl-token */ \"(ssr)/./node_modules/@solana/spl-token/lib/cjs/index.js\");\nfunction parseTokenAccount(data, pubkey) {\n    // mock AccountInfo so unpackAccount can be used\n    const accountInfo = {\n        data,\n        owner: spl_token_1.TOKEN_PROGRAM_ID,\n        executable: false,\n        lamports: 0\n    };\n    return (0, spl_token_1.unpackAccount)(pubkey, accountInfo, spl_token_1.TOKEN_PROGRAM_ID);\n}\nexports.parseTokenAccount = parseTokenAccount;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90b2tlbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQseUJBQXlCLEdBQUcsS0FBSztBQUNqQyxNQUFNRyxjQUFjQyxtQkFBT0EsQ0FBQyxrRkFBbUI7QUFDL0MsU0FBU0Ysa0JBQWtCRyxJQUFJLEVBQUVDLE1BQU07SUFDbkMsZ0RBQWdEO0lBQ2hELE1BQU1DLGNBQWM7UUFDaEJGO1FBQ0FHLE9BQU9MLFlBQVlNLGdCQUFnQjtRQUNuQ0MsWUFBWTtRQUNaQyxVQUFVO0lBQ2Q7SUFDQSxPQUFPLENBQUMsR0FBR1IsWUFBWVMsYUFBYSxFQUFFTixRQUFRQyxhQUFhSixZQUFZTSxnQkFBZ0I7QUFDM0Y7QUFDQVQseUJBQXlCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3Rva2VuL2luZGV4LmpzP2FkNWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnBhcnNlVG9rZW5BY2NvdW50ID0gdm9pZCAwO1xuY29uc3Qgc3BsX3Rva2VuXzEgPSByZXF1aXJlKFwiQHNvbGFuYS9zcGwtdG9rZW5cIik7XG5mdW5jdGlvbiBwYXJzZVRva2VuQWNjb3VudChkYXRhLCBwdWJrZXkpIHtcbiAgICAvLyBtb2NrIEFjY291bnRJbmZvIHNvIHVucGFja0FjY291bnQgY2FuIGJlIHVzZWRcbiAgICBjb25zdCBhY2NvdW50SW5mbyA9IHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgb3duZXI6IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgIGV4ZWN1dGFibGU6IGZhbHNlLFxuICAgICAgICBsYW1wb3J0czogMCxcbiAgICB9O1xuICAgIHJldHVybiAoMCwgc3BsX3Rva2VuXzEudW5wYWNrQWNjb3VudCkocHVia2V5LCBhY2NvdW50SW5mbywgc3BsX3Rva2VuXzEuVE9LRU5fUFJPR1JBTV9JRCk7XG59XG5leHBvcnRzLnBhcnNlVG9rZW5BY2NvdW50ID0gcGFyc2VUb2tlbkFjY291bnQ7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJwYXJzZVRva2VuQWNjb3VudCIsInNwbF90b2tlbl8xIiwicmVxdWlyZSIsImRhdGEiLCJwdWJrZXkiLCJhY2NvdW50SW5mbyIsIm93bmVyIiwiVE9LRU5fUFJPR1JBTV9JRCIsImV4ZWN1dGFibGUiLCJsYW1wb3J0cyIsInVucGFja0FjY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/token/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/tokenFaucet.js":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/tokenFaucet.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __createBinding = (void 0) && (void 0).__createBinding || (Object.create ? function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n        desc = {\n            enumerable: true,\n            get: function() {\n                return m[k];\n            }\n        };\n    }\n    Object.defineProperty(o, k2, desc);\n} : function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n});\nvar __setModuleDefault = (void 0) && (void 0).__setModuleDefault || (Object.create ? function(o, v) {\n    Object.defineProperty(o, \"default\", {\n        enumerable: true,\n        value: v\n    });\n} : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (void 0) && (void 0).__importStar || function(mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) {\n        for(var k in mod)if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    }\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.TokenFaucet = void 0;\nconst anchor = __importStar(__webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\"));\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst spl_token_1 = __webpack_require__(/*! @solana/spl-token */ \"(ssr)/./node_modules/@solana/spl-token/lib/cjs/index.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst token_faucet_json_1 = __importDefault(__webpack_require__(/*! ./idl/token_faucet.json */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/idl/token_faucet.json\"));\nclass TokenFaucet {\n    constructor(connection, wallet, programId, mint, opts){\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts || anchor_1.AnchorProvider.defaultOptions();\n        const provider = new anchor_1.AnchorProvider(connection, wallet, this.opts);\n        this.provider = provider;\n        this.program = new anchor_1.Program(token_faucet_json_1.default, programId, provider);\n        this.mint = mint;\n    }\n    async getFaucetConfigPublicKeyAndNonce() {\n        return anchor.web3.PublicKey.findProgramAddress([\n            Buffer.from(anchor.utils.bytes.utf8.encode(\"faucet_config\")),\n            this.mint.toBuffer()\n        ], this.program.programId);\n    }\n    async getMintAuthority() {\n        return (await anchor.web3.PublicKey.findProgramAddress([\n            Buffer.from(anchor.utils.bytes.utf8.encode(\"mint_authority\")),\n            this.mint.toBuffer()\n        ], this.program.programId))[0];\n    }\n    async getFaucetConfigPublicKey() {\n        return (await this.getFaucetConfigPublicKeyAndNonce())[0];\n    }\n    async initialize() {\n        const [faucetConfigPublicKey] = await this.getFaucetConfigPublicKeyAndNonce();\n        return await this.program.rpc.initialize({\n            accounts: {\n                faucetConfig: faucetConfigPublicKey,\n                admin: this.wallet.publicKey,\n                mintAccount: this.mint,\n                rent: web3_js_1.SYSVAR_RENT_PUBKEY,\n                systemProgram: anchor.web3.SystemProgram.programId,\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            }\n        });\n    }\n    async fetchState() {\n        return await this.program.account.faucetConfig.fetch(await this.getFaucetConfigPublicKey());\n    }\n    async mintToUserIx(userTokenAccount, amount) {\n        return this.program.instruction.mintToUser(amount, {\n            accounts: {\n                faucetConfig: await this.getFaucetConfigPublicKey(),\n                mintAccount: this.mint,\n                userTokenAccount,\n                mintAuthority: await this.getMintAuthority(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID\n            }\n        });\n    }\n    async mintToUser(userTokenAccount, amount) {\n        const mintIx = await this.mintToUserIx(userTokenAccount, amount);\n        const tx = new web3_js_1.Transaction().add(mintIx);\n        const txSig = await this.program.provider.sendAndConfirm(tx, [], this.opts);\n        return txSig;\n    }\n    async transferMintAuthority() {\n        return await this.program.rpc.transferMintAuthority({\n            accounts: {\n                faucetConfig: await this.getFaucetConfigPublicKey(),\n                mintAccount: this.mint,\n                mintAuthority: await this.getMintAuthority(),\n                tokenProgram: spl_token_1.TOKEN_PROGRAM_ID,\n                admin: this.wallet.publicKey\n            }\n        });\n    }\n    async createAssociatedTokenAccountAndMintTo(userPublicKey, amount) {\n        const tx = new web3_js_1.Transaction();\n        const [associatedTokenPublicKey, createAssociatedAccountIx, mintToTx] = await this.createAssociatedTokenAccountAndMintToInstructions(userPublicKey, amount);\n        let associatedTokenAccountExists = false;\n        try {\n            const assosciatedTokenAccount = await this.connection.getAccountInfo(associatedTokenPublicKey);\n            associatedTokenAccountExists = !!assosciatedTokenAccount;\n        } catch (e) {\n            // token account doesn't exist\n            associatedTokenAccountExists = false;\n        }\n        const skipAccountCreation = associatedTokenAccountExists;\n        if (!skipAccountCreation) tx.add(createAssociatedAccountIx);\n        tx.add(mintToTx);\n        const txSig = await this.program.provider.sendAndConfirm(tx, [], this.opts);\n        return [\n            associatedTokenPublicKey,\n            txSig\n        ];\n    }\n    async createAssociatedTokenAccountAndMintToInstructions(userPublicKey, amount) {\n        const state = await this.fetchState();\n        const associateTokenPublicKey = await this.getAssosciatedMockUSDMintAddress({\n            userPubKey: userPublicKey\n        });\n        const createAssociatedAccountIx = (0, spl_token_1.createAssociatedTokenAccountInstruction)(this.wallet.publicKey, associateTokenPublicKey, userPublicKey, state.mint);\n        const mintToIx = await this.mintToUserIx(associateTokenPublicKey, amount);\n        return [\n            associateTokenPublicKey,\n            createAssociatedAccountIx,\n            mintToIx\n        ];\n    }\n    async getAssosciatedMockUSDMintAddress(props) {\n        const state = await this.fetchState();\n        return (0, spl_token_1.getAssociatedTokenAddress)(state.mint, props.userPubKey);\n    }\n    async getTokenAccountInfo(props) {\n        const associatedKey = await this.getAssosciatedMockUSDMintAddress(props);\n        return await (0, spl_token_1.getAccount)(this.connection, associatedKey);\n    }\n    async subscribeToTokenAccount(props) {\n        try {\n            const tokenAccountKey = await this.getAssosciatedMockUSDMintAddress(props);\n            props.callback(await this.getTokenAccountInfo(props));\n            // Couldn't find a way to do it using anchor framework subscription, someone on serum discord recommended this way\n            this.connection.onAccountChange(tokenAccountKey, async (_accountInfo /* accountInfo is a buffer which we don't know how to deserialize */ )=>{\n                props.callback(await this.getTokenAccountInfo(props));\n            });\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n}\nexports.TokenFaucet = TokenFaucet;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90b2tlbkZhdWNldC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLElBQUlBLGtCQUFrQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGVBQWUsSUFBTUMsQ0FBQUEsT0FBT0MsTUFBTSxHQUFJLFNBQVNDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDMUYsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0IsSUFBSUcsT0FBT1AsT0FBT1Esd0JBQXdCLENBQUNMLEdBQUdDO0lBQzlDLElBQUksQ0FBQ0csUUFBUyxVQUFTQSxPQUFPLENBQUNKLEVBQUVNLFVBQVUsR0FBR0YsS0FBS0csUUFBUSxJQUFJSCxLQUFLSSxZQUFZLEdBQUc7UUFDakZKLE9BQU87WUFBRUssWUFBWTtZQUFNQyxLQUFLO2dCQUFhLE9BQU9WLENBQUMsQ0FBQ0MsRUFBRTtZQUFFO1FBQUU7SUFDOUQ7SUFDQUosT0FBT2MsY0FBYyxDQUFDWixHQUFHRyxJQUFJRTtBQUNqQyxJQUFNLFNBQVNMLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEVBQUU7SUFDdEIsSUFBSUEsT0FBT0MsV0FBV0QsS0FBS0Q7SUFDM0JGLENBQUMsQ0FBQ0csR0FBRyxHQUFHRixDQUFDLENBQUNDLEVBQUU7QUFDaEIsQ0FBQztBQUNELElBQUlXLHFCQUFxQixDQUFDLE1BQUcsS0FBSyxPQUFHLEVBQUVBLGtCQUFrQixJQUFNZixDQUFBQSxPQUFPQyxNQUFNLEdBQUksU0FBU0MsQ0FBQyxFQUFFYyxDQUFDO0lBQ3pGaEIsT0FBT2MsY0FBYyxDQUFDWixHQUFHLFdBQVc7UUFBRVUsWUFBWTtRQUFNSyxPQUFPRDtJQUFFO0FBQ3JFLElBQUssU0FBU2QsQ0FBQyxFQUFFYyxDQUFDO0lBQ2RkLENBQUMsQ0FBQyxVQUFVLEdBQUdjO0FBQ25CO0FBQ0EsSUFBSUUsZUFBZSxDQUFDLE1BQUcsS0FBSyxPQUFHLEVB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ZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90b2tlbkZhdWNldC5qcz9jYzBmIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlRva2VuRmF1Y2V0ID0gdm9pZCAwO1xuY29uc3QgYW5jaG9yID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKSk7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IHNwbF90b2tlbl8xID0gcmVxdWlyZShcIkBzb2xhbmEvc3BsLXRva2VuXCIpO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IHRva2VuX2ZhdWNldF9qc29uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vaWRsL3Rva2VuX2ZhdWNldC5qc29uXCIpKTtcbmNsYXNzIFRva2VuRmF1Y2V0IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uLCB3YWxsZXQsIHByb2dyYW1JZCwgbWludCwgb3B0cykge1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLndhbGxldCA9IHdhbGxldDtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cyB8fCBhbmNob3JfMS5BbmNob3JQcm92aWRlci5kZWZhdWx0T3B0aW9ucygpO1xuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBhbmNob3JfMS5BbmNob3JQcm92aWRlcihjb25uZWN0aW9uLCB3YWxsZXQsIHRoaXMub3B0cyk7XG4gICAgICAgIHRoaXMucHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gbmV3IGFuY2hvcl8xLlByb2dyYW0odG9rZW5fZmF1Y2V0X2pzb25fMS5kZWZhdWx0LCBwcm9ncmFtSWQsIHByb3ZpZGVyKTtcbiAgICAgICAgdGhpcy5taW50ID0gbWludDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmF1Y2V0Q29uZmlnUHVibGljS2V5QW5kTm9uY2UoKSB7XG4gICAgICAgIHJldHVybiBhbmNob3Iud2ViMy5QdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzKFtcbiAgICAgICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgnZmF1Y2V0X2NvbmZpZycpKSxcbiAgICAgICAgICAgIHRoaXMubWludC50b0J1ZmZlcigpLFxuICAgICAgICBdLCB0aGlzLnByb2dyYW0ucHJvZ3JhbUlkKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWludEF1dGhvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCBhbmNob3Iud2ViMy5QdWJsaWNLZXkuZmluZFByb2dyYW1BZGRyZXNzKFtcbiAgICAgICAgICAgIEJ1ZmZlci5mcm9tKGFuY2hvci51dGlscy5ieXRlcy51dGY4LmVuY29kZSgnbWludF9hdXRob3JpdHknKSksXG4gICAgICAgICAgICB0aGlzLm1pbnQudG9CdWZmZXIoKSxcbiAgICAgICAgXSwgdGhpcy5wcm9ncmFtLnByb2dyYW1JZCkpWzBdO1xuICAgIH1cbiAgICBhc3luYyBnZXRGYXVjZXRDb25maWdQdWJsaWNLZXkoKSB7XG4gICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5nZXRGYXVjZXRDb25maWdQdWJsaWNLZXlBbmROb25jZSgpKVswXTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgY29uc3QgW2ZhdWNldENvbmZpZ1B1YmxpY0tleV0gPSBhd2FpdCB0aGlzLmdldEZhdWNldENvbmZpZ1B1YmxpY0tleUFuZE5vbmNlKCk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2dyYW0ucnBjLmluaXRpYWxpemUoe1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBmYXVjZXRDb25maWc6IGZhdWNldENvbmZpZ1B1YmxpY0tleSxcbiAgICAgICAgICAgICAgICBhZG1pbjogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgICAgIG1pbnRBY2NvdW50OiB0aGlzLm1pbnQsXG4gICAgICAgICAgICAgICAgcmVudDogd2ViM19qc18xLlNZU1ZBUl9SRU5UX1BVQktFWSxcbiAgICAgICAgICAgICAgICBzeXN0ZW1Qcm9ncmFtOiBhbmNob3Iud2ViMy5TeXN0ZW1Qcm9ncmFtLnByb2dyYW1JZCxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvZ3JhbS5hY2NvdW50LmZhdWNldENvbmZpZy5mZXRjaChhd2FpdCB0aGlzLmdldEZhdWNldENvbmZpZ1B1YmxpY0tleSgpKTtcbiAgICB9XG4gICAgYXN5bmMgbWludFRvVXNlckl4KHVzZXJUb2tlbkFjY291bnQsIGFtb3VudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9ncmFtLmluc3RydWN0aW9uLm1pbnRUb1VzZXIoYW1vdW50LCB7XG4gICAgICAgICAgICBhY2NvdW50czoge1xuICAgICAgICAgICAgICAgIGZhdWNldENvbmZpZzogYXdhaXQgdGhpcy5nZXRGYXVjZXRDb25maWdQdWJsaWNLZXkoKSxcbiAgICAgICAgICAgICAgICBtaW50QWNjb3VudDogdGhpcy5taW50LFxuICAgICAgICAgICAgICAgIHVzZXJUb2tlbkFjY291bnQsXG4gICAgICAgICAgICAgICAgbWludEF1dGhvcml0eTogYXdhaXQgdGhpcy5nZXRNaW50QXV0aG9yaXR5KCksXG4gICAgICAgICAgICAgICAgdG9rZW5Qcm9ncmFtOiBzcGxfdG9rZW5fMS5UT0tFTl9QUk9HUkFNX0lELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIG1pbnRUb1VzZXIodXNlclRva2VuQWNjb3VudCwgYW1vdW50KSB7XG4gICAgICAgIGNvbnN0IG1pbnRJeCA9IGF3YWl0IHRoaXMubWludFRvVXNlckl4KHVzZXJUb2tlbkFjY291bnQsIGFtb3VudCk7XG4gICAgICAgIGNvbnN0IHR4ID0gbmV3IHdlYjNfanNfMS5UcmFuc2FjdGlvbigpLmFkZChtaW50SXgpO1xuICAgICAgICBjb25zdCB0eFNpZyA9IGF3YWl0IHRoaXMucHJvZ3JhbS5wcm92aWRlci5zZW5kQW5kQ29uZmlybSh0eCwgW10sIHRoaXMub3B0cyk7XG4gICAgICAgIHJldHVybiB0eFNpZztcbiAgICB9XG4gICAgYXN5bmMgdHJhbnNmZXJNaW50QXV0aG9yaXR5KCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9ncmFtLnJwYy50cmFuc2Zlck1pbnRBdXRob3JpdHkoe1xuICAgICAgICAgICAgYWNjb3VudHM6IHtcbiAgICAgICAgICAgICAgICBmYXVjZXRDb25maWc6IGF3YWl0IHRoaXMuZ2V0RmF1Y2V0Q29uZmlnUHVibGljS2V5KCksXG4gICAgICAgICAgICAgICAgbWludEFjY291bnQ6IHRoaXMubWludCxcbiAgICAgICAgICAgICAgICBtaW50QXV0aG9yaXR5OiBhd2FpdCB0aGlzLmdldE1pbnRBdXRob3JpdHkoKSxcbiAgICAgICAgICAgICAgICB0b2tlblByb2dyYW06IHNwbF90b2tlbl8xLlRPS0VOX1BST0dSQU1fSUQsXG4gICAgICAgICAgICAgICAgYWRtaW46IHRoaXMud2FsbGV0LnB1YmxpY0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjcmVhdGVBc3NvY2lhdGVkVG9rZW5BY2NvdW50QW5kTWludFRvKHVzZXJQdWJsaWNLZXksIGFtb3VudCkge1xuICAgICAgICBjb25zdCB0eCA9IG5ldyB3ZWIzX2pzXzEuVHJhbnNhY3Rpb24oKTtcbiAgICAgICAgY29uc3QgW2Fzc29jaWF0ZWRUb2tlblB1YmxpY0tleSwgY3JlYXRlQXNzb2NpYXRlZEFjY291bnRJeCwgbWludFRvVHhdID0gYXdhaXQgdGhpcy5jcmVhdGVBc3NvY2lhdGVkVG9rZW5BY2NvdW50QW5kTWludFRvSW5zdHJ1Y3Rpb25zKHVzZXJQdWJsaWNLZXksIGFtb3VudCk7XG4gICAgICAgIGxldCBhc3NvY2lhdGVkVG9rZW5BY2NvdW50RXhpc3RzID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhc3Nvc2NpYXRlZFRva2VuQWNjb3VudCA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRBY2NvdW50SW5mbyhhc3NvY2lhdGVkVG9rZW5QdWJsaWNLZXkpO1xuICAgICAgICAgICAgYXNzb2NpYXRlZFRva2VuQWNjb3VudEV4aXN0cyA9ICEhYXNzb3NjaWF0ZWRUb2tlbkFjY291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIHRva2VuIGFjY291bnQgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgYXNzb2NpYXRlZFRva2VuQWNjb3VudEV4aXN0cyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNraXBBY2NvdW50Q3JlYXRpb24gPSBhc3NvY2lhdGVkVG9rZW5BY2NvdW50RXhpc3RzO1xuICAgICAgICBpZiAoIXNraXBBY2NvdW50Q3JlYXRpb24pXG4gICAgICAgICAgICB0eC5hZGQoY3JlYXRlQXNzb2NpYXRlZEFjY291bnRJeCk7XG4gICAgICAgIHR4LmFkZChtaW50VG9UeCk7XG4gICAgICAgIGNvbnN0IHR4U2lnID0gYXdhaXQgdGhpcy5wcm9ncmFtLnByb3ZpZGVyLnNlbmRBbmRDb25maXJtKHR4LCBbXSwgdGhpcy5vcHRzKTtcbiAgICAgICAgcmV0dXJuIFthc3NvY2lhdGVkVG9rZW5QdWJsaWNLZXksIHR4U2lnXTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudEFuZE1pbnRUb0luc3RydWN0aW9ucyh1c2VyUHVibGljS2V5LCBhbW91bnQpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLmZldGNoU3RhdGUoKTtcbiAgICAgICAgY29uc3QgYXNzb2NpYXRlVG9rZW5QdWJsaWNLZXkgPSBhd2FpdCB0aGlzLmdldEFzc29zY2lhdGVkTW9ja1VTRE1pbnRBZGRyZXNzKHsgdXNlclB1YktleTogdXNlclB1YmxpY0tleSB9KTtcbiAgICAgICAgY29uc3QgY3JlYXRlQXNzb2NpYXRlZEFjY291bnRJeCA9ICgwLCBzcGxfdG9rZW5fMS5jcmVhdGVBc3NvY2lhdGVkVG9rZW5BY2NvdW50SW5zdHJ1Y3Rpb24pKHRoaXMud2FsbGV0LnB1YmxpY0tleSwgYXNzb2NpYXRlVG9rZW5QdWJsaWNLZXksIHVzZXJQdWJsaWNLZXksIHN0YXRlLm1pbnQpO1xuICAgICAgICBjb25zdCBtaW50VG9JeCA9IGF3YWl0IHRoaXMubWludFRvVXNlckl4KGFzc29jaWF0ZVRva2VuUHVibGljS2V5LCBhbW91bnQpO1xuICAgICAgICByZXR1cm4gW2Fzc29jaWF0ZVRva2VuUHVibGljS2V5LCBjcmVhdGVBc3NvY2lhdGVkQWNjb3VudEl4LCBtaW50VG9JeF07XG4gICAgfVxuICAgIGFzeW5jIGdldEFzc29zY2lhdGVkTW9ja1VTRE1pbnRBZGRyZXNzKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5mZXRjaFN0YXRlKCk7XG4gICAgICAgIHJldHVybiAoMCwgc3BsX3Rva2VuXzEuZ2V0QXNzb2NpYXRlZFRva2VuQWRkcmVzcykoc3RhdGUubWludCwgcHJvcHMudXNlclB1YktleSk7XG4gICAgfVxuICAgIGFzeW5jIGdldFRva2VuQWNjb3VudEluZm8ocHJvcHMpIHtcbiAgICAgICAgY29uc3QgYXNzb2NpYXRlZEtleSA9IGF3YWl0IHRoaXMuZ2V0QXNzb3NjaWF0ZWRNb2NrVVNETWludEFkZHJlc3MocHJvcHMpO1xuICAgICAgICByZXR1cm4gYXdhaXQgKDAsIHNwbF90b2tlbl8xLmdldEFjY291bnQpKHRoaXMuY29ubmVjdGlvbiwgYXNzb2NpYXRlZEtleSk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZVRvVG9rZW5BY2NvdW50KHByb3BzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbkFjY291bnRLZXkgPSBhd2FpdCB0aGlzLmdldEFzc29zY2lhdGVkTW9ja1VTRE1pbnRBZGRyZXNzKHByb3BzKTtcbiAgICAgICAgICAgIHByb3BzLmNhbGxiYWNrKGF3YWl0IHRoaXMuZ2V0VG9rZW5BY2NvdW50SW5mbyhwcm9wcykpO1xuICAgICAgICAgICAgLy8gQ291bGRuJ3QgZmluZCBhIHdheSB0byBkbyBpdCB1c2luZyBhbmNob3IgZnJhbWV3b3JrIHN1YnNjcmlwdGlvbiwgc29tZW9uZSBvbiBzZXJ1bSBkaXNjb3JkIHJlY29tbWVuZGVkIHRoaXMgd2F5XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24ub25BY2NvdW50Q2hhbmdlKHRva2VuQWNjb3VudEtleSwgYXN5bmMgKF9hY2NvdW50SW5mbyAvKiBhY2NvdW50SW5mbyBpcyBhIGJ1ZmZlciB3aGljaCB3ZSBkb24ndCBrbm93IGhvdyB0byBkZXNlcmlhbGl6ZSAqLykgPT4ge1xuICAgICAgICAgICAgICAgIHByb3BzLmNhbGxiYWNrKGF3YWl0IHRoaXMuZ2V0VG9rZW5BY2NvdW50SW5mbyhwcm9wcykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5Ub2tlbkZhdWNldCA9IFRva2VuRmF1Y2V0O1xuIl0sIm5hbWVzIjpbIl9fY3JlYXRlQmluZGluZyIsIk9iamVjdCIsImNyZWF0ZSIsIm8iLCJtIiwiayIsImsyIiwidW5kZWZpbmVkIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9fZXNNb2R1bGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJkZWZpbmVQcm9wZXJ0eSIsIl9fc2V0TW9kdWxlRGVmYXVsdCIsInYiLCJ2YWx1ZSIsIl9faW1wb3J0U3RhciIsIm1vZCIsInJlc3VsdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIl9faW1wb3J0RGVmYXVsdCIsImV4cG9ydHMiLCJUb2tlbkZhdWNldCIsImFuY2hvciIsInJlcXVpcmUiLCJhbmNob3JfMSIsInNwbF90b2tlbl8xIiwid2ViM19qc18xIiwidG9rZW5fZmF1Y2V0X2pzb25fMSIsImNvbnN0cnVjdG9yIiwiY29ubmVjdGlvbiIsIndhbGxldCIsInByb2dyYW1JZCIsIm1pbnQiLCJvcHRzIiwiQW5jaG9yUHJvdmlkZXIiLCJkZWZhdWx0T3B0aW9ucyIsInByb3ZpZGVyIiwicHJvZ3JhbSIsIlByb2dyYW0iLCJkZWZhdWx0IiwiZ2V0RmF1Y2V0Q29uZmlnUHVibGljS2V5QW5kTm9uY2UiLCJ3ZWIzIiwiUHVibGljS2V5IiwiZmluZFByb2dyYW1BZGRyZXNzIiwiQnVmZmVyIiwiZnJvbSIsInV0aWxzIiwiYnl0ZXMiLCJ1dGY4IiwiZW5jb2RlIiwidG9CdWZmZXIiLCJnZXRNaW50QXV0aG9yaXR5IiwiZ2V0RmF1Y2V0Q29uZmlnUHVibGljS2V5IiwiaW5pdGlhbGl6ZSIsImZhdWNldENvbmZpZ1B1YmxpY0tleSIsInJwYyIsImFjY291bnRzIiwiZmF1Y2V0Q29uZmlnIiwiYWRtaW4iLCJwdWJsaWNLZXkiLCJtaW50QWNjb3VudCIsInJlbnQiLCJTWVNWQVJfUkVOVF9QVUJLRVkiLCJzeXN0ZW1Qcm9ncmFtIiwiU3lzdGVtUHJvZ3JhbSIsInRva2VuUHJvZ3JhbSIsIlRPS0VOX1BST0dSQU1fSUQiLCJmZXRjaFN0YXRlIiwiYWNjb3VudCIsImZldGNoIiwibWludFRvVXNlckl4IiwidXNlclRva2VuQWNjb3VudCIsImFtb3VudCIsImluc3RydWN0aW9uIiwibWludFRvVXNlciIsIm1pbnRBdXRob3JpdHkiLCJtaW50SXgiLCJ0eCIsIlRyYW5zYWN0aW9uIiwiYWRkIiwidHhTaWciLCJzZW5kQW5kQ29uZmlybSIsInRyYW5zZmVyTWludEF1dGhvcml0eSIsImNyZWF0ZUFzc29jaWF0ZWRUb2tlbkFjY291bnRBbmRNaW50VG8iLCJ1c2VyUHVibGljS2V5IiwiYXNzb2NpYXRlZFRva2VuUHVibGljS2V5IiwiY3JlYXRlQXNzb2NpYXRlZEFjY291bnRJeCIsIm1pbnRUb1R4IiwiY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudEFuZE1pbnRUb0luc3RydWN0aW9ucyIsImFzc29jaWF0ZWRUb2tlbkFjY291bnRFeGlzdHMiLCJhc3Nvc2NpYXRlZFRva2VuQWNjb3VudCIsImdldEFjY291bnRJbmZvIiwiZSIsInNraXBBY2NvdW50Q3JlYXRpb24iLCJzdGF0ZSIsImFzc29jaWF0ZVRva2VuUHVibGljS2V5IiwiZ2V0QXNzb3NjaWF0ZWRNb2NrVVNETWludEFkZHJlc3MiLCJ1c2VyUHViS2V5IiwiY3JlYXRlQXNzb2NpYXRlZFRva2VuQWNjb3VudEluc3RydWN0aW9uIiwibWludFRvSXgiLCJwcm9wcyIsImdldEFzc29jaWF0ZWRUb2tlbkFkZHJlc3MiLCJnZXRUb2tlbkFjY291bnRJbmZvIiwiYXNzb2NpYXRlZEtleSIsImdldEFjY291bnQiLCJzdWJzY3JpYmVUb1Rva2VuQWNjb3VudCIsInRva2VuQWNjb3VudEtleSIsImNhbGxiYWNrIiwib25BY2NvdW50Q2hhbmdlIiwiX2FjY291bnRJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/tokenFaucet.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/tx/baseTxSender.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/tx/baseTxSender.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.BaseTxSender = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst assert_1 = __importDefault(__webpack_require__(/*! assert */ \"assert\"));\nconst bs58_1 = __importDefault(__webpack_require__(/*! bs58 */ \"(ssr)/./node_modules/bs58/index.js\"));\nconst DEFAULT_TIMEOUT = 35000;\nclass BaseTxSender {\n    constructor({ connection, wallet, opts = anchor_1.AnchorProvider.defaultOptions(), timeout = DEFAULT_TIMEOUT, additionalConnections = new Array() }){\n        this.timeoutCount = 0;\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n        this.timeout = timeout;\n        this.additionalConnections = additionalConnections;\n    }\n    async send(tx, additionalSigners, opts, preSigned) {\n        if (additionalSigners === undefined) {\n            additionalSigners = [];\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        const signedTx = preSigned ? tx : await this.prepareTx(tx, additionalSigners, opts);\n        return this.sendRawTransaction(signedTx.serialize(), opts);\n    }\n    async prepareTx(tx, additionalSigners, opts) {\n        tx.feePayer = this.wallet.publicKey;\n        tx.recentBlockhash = (await this.connection.getLatestBlockhash(opts.preflightCommitment)).blockhash;\n        additionalSigners.filter((s)=>s !== undefined).forEach((kp)=>{\n            tx.partialSign(kp);\n        });\n        const signedTx = await this.wallet.signTransaction(tx);\n        return signedTx;\n    }\n    async getVersionedTransaction(ixs, lookupTableAccounts, additionalSigners, opts) {\n        if (additionalSigners === undefined) {\n            additionalSigners = [];\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        const message = new web3_js_1.TransactionMessage({\n            payerKey: this.wallet.publicKey,\n            recentBlockhash: (await this.connection.getLatestBlockhash(opts.preflightCommitment)).blockhash,\n            instructions: ixs\n        }).compileToV0Message(lookupTableAccounts);\n        const tx = new web3_js_1.VersionedTransaction(message);\n        return tx;\n    }\n    async sendVersionedTransaction(tx, additionalSigners, opts, preSigned) {\n        let signedTx;\n        if (preSigned) {\n            signedTx = tx;\n        // @ts-ignore\n        } else if (this.wallet.payer) {\n            // @ts-ignore\n            tx.sign((additionalSigners !== null && additionalSigners !== void 0 ? additionalSigners : []).concat(this.wallet.payer));\n            signedTx = tx;\n        } else {\n            additionalSigners === null || additionalSigners === void 0 ? void 0 : additionalSigners.filter((s)=>s !== undefined).forEach((kp)=>{\n                tx.sign([\n                    kp\n                ]);\n            });\n            // @ts-ignore\n            signedTx = await this.wallet.signTransaction(tx);\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        return this.sendRawTransaction(signedTx.serialize(), opts);\n    }\n    async sendRawTransaction(// eslint-disable-next-line @typescript-eslint/no-unused-vars\n    rawTransaction, // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    opts) {\n        throw new Error(\"Must be implemented by subclass\");\n    }\n    async confirmTransaction(signature, commitment) {\n        let decodedSignature;\n        try {\n            decodedSignature = bs58_1.default.decode(signature);\n        } catch (err) {\n            throw new Error(\"signature must be base58 encoded: \" + signature);\n        }\n        (0, assert_1.default)(decodedSignature.length === 64, \"signature has invalid length\");\n        const start = Date.now();\n        const subscriptionCommitment = commitment || this.opts.commitment;\n        const subscriptionIds = new Array();\n        const connections = [\n            this.connection,\n            ...this.additionalConnections\n        ];\n        let response = null;\n        const promises = connections.map((connection, i)=>{\n            let subscriptionId;\n            const confirmPromise = new Promise((resolve, reject)=>{\n                try {\n                    subscriptionId = connection.onSignature(signature, (result, context)=>{\n                        subscriptionIds[i] = undefined;\n                        response = {\n                            context,\n                            value: result\n                        };\n                        resolve(null);\n                    }, subscriptionCommitment);\n                } catch (err) {\n                    reject(err);\n                }\n            });\n            subscriptionIds.push(subscriptionId);\n            return confirmPromise;\n        });\n        try {\n            await this.promiseTimeout(promises, this.timeout);\n        } finally{\n            for (const [i, subscriptionId] of subscriptionIds.entries()){\n                if (subscriptionId) {\n                    connections[i].removeSignatureListener(subscriptionId);\n                }\n            }\n        }\n        if (response === null) {\n            this.timeoutCount += 1;\n            const duration = (Date.now() - start) / 1000;\n            throw new Error(`Transaction was not confirmed in ${duration.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${signature} using the Solana Explorer or CLI tools.`);\n        }\n        return response;\n    }\n    getTimestamp() {\n        return new Date().getTime();\n    }\n    promiseTimeout(promises, timeoutMs) {\n        let timeoutId;\n        const timeoutPromise = new Promise((resolve)=>{\n            timeoutId = setTimeout(()=>resolve(null), timeoutMs);\n        });\n        return Promise.race([\n            ...promises,\n            timeoutPromise\n        ]).then((result)=>{\n            clearTimeout(timeoutId);\n            return result;\n        });\n    }\n    sendToAdditionalConnections(rawTx, opts) {\n        this.additionalConnections.map((connection)=>{\n            connection.sendRawTransaction(rawTx, opts).catch((e)=>{\n                console.error(// @ts-ignore\n                `error sending tx to additional connection ${connection._rpcEndpoint}`);\n                console.error(e);\n            });\n        });\n    }\n    addAdditionalConnection(newConnection) {\n        const alreadyUsingConnection = this.additionalConnections.filter((connection)=>{\n            // @ts-ignore\n            return connection._rpcEndpoint === newConnection.rpcEndpoint;\n        }).length > 0;\n        if (!alreadyUsingConnection) {\n            this.additionalConnections.push(newConnection);\n        }\n    }\n    getTimeoutCount() {\n        return this.timeoutCount;\n    }\n}\nexports.BaseTxSender = BaseTxSender;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC9iYXNlVHhTZW5kZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQUUsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG9CQUFvQixHQUFHLEtBQUs7QUFDNUIsTUFBTUcsWUFBWUMsbUJBQU9BLENBQUMsOEVBQWlCO0FBQzNDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNRSxXQUFXWCxnQkFBZ0JTLG1CQUFPQSxDQUFDLHNCQUFRO0FBQ2pELE1BQU1HLFNBQVNaLGdCQUFnQlMsbUJBQU9BLENBQUMsZ0RBQU07QUFDN0MsTUFBTUksa0JBQWtCO0FBQ3hCLE1BQU1OO0lBQ0ZPLFlBQVksRUFBRUMsVUFBVSxFQUFFQyxNQUFNLEVBQUVDLE9BQU9QLFNBQVNRLGNBQWMsQ0FBQ0MsY0FBYyxFQUFFLEVBQUVDLFVBQVVQLGVBQWUsRUFBRVEsd0JBQXdCLElBQUlDLE9BQU8sRUFBRyxDQUFFO1FBQ2xKLElBQUksQ0FBQ0MsWUFBWSxHQUFHO1FBQ3BCLElBQUksQ0FBQ1IsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNHLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLHFCQUFxQixHQUFHQTtJQUNqQztJQUNBLE1BQU1HLEtBQUtDLEVBQUUsRUFBRUMsaUJBQWlCLEVBQUVULElBQUksRUFBRVUsU0FBUyxFQUFFO1FBQy9DLElBQUlELHNCQUFzQkUsV0FBVztZQUNqQ0Ysb0JBQW9CLEVBQUU7UUFDMUI7UUFDQSxJQUFJVCxT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R0FBRzVDLE1BQU0sR0FBRztRQUNaLElBQUksQ0FBQzJDLHdCQUF3QjtZQUN6QixJQUFJLENBQUN6RixxQkFBcUIsQ0FBQ2lFLElBQUksQ0FBQ3VCO1FBQ3BDO0lBQ0o7SUFDQUcsa0JBQWtCO1FBQ2QsT0FBTyxJQUFJLENBQUN6RixZQUFZO0lBQzVCO0FBQ0o7QUFDQWxCLG9CQUFvQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC9iYXNlVHhTZW5kZXIuanM/ZWM0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuQmFzZVR4U2VuZGVyID0gdm9pZCAwO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IGFuY2hvcl8xID0gcmVxdWlyZShcIkBjb3JhbC14eXovYW5jaG9yXCIpO1xuY29uc3QgYXNzZXJ0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImFzc2VydFwiKSk7XG5jb25zdCBiczU4XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImJzNThcIikpO1xuY29uc3QgREVGQVVMVF9USU1FT1VUID0gMzUwMDA7XG5jbGFzcyBCYXNlVHhTZW5kZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgY29ubmVjdGlvbiwgd2FsbGV0LCBvcHRzID0gYW5jaG9yXzEuQW5jaG9yUHJvdmlkZXIuZGVmYXVsdE9wdGlvbnMoKSwgdGltZW91dCA9IERFRkFVTFRfVElNRU9VVCwgYWRkaXRpb25hbENvbm5lY3Rpb25zID0gbmV3IEFycmF5KCksIH0pIHtcbiAgICAgICAgdGhpcy50aW1lb3V0Q291bnQgPSAwO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLndhbGxldCA9IHdhbGxldDtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsQ29ubmVjdGlvbnMgPSBhZGRpdGlvbmFsQ29ubmVjdGlvbnM7XG4gICAgfVxuICAgIGFzeW5jIHNlbmQodHgsIGFkZGl0aW9uYWxTaWduZXJzLCBvcHRzLCBwcmVTaWduZWQpIHtcbiAgICAgICAgaWYgKGFkZGl0aW9uYWxTaWduZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGFkZGl0aW9uYWxTaWduZXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0cztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaWduZWRUeCA9IHByZVNpZ25lZFxuICAgICAgICAgICAgPyB0eFxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLnByZXBhcmVUeCh0eCwgYWRkaXRpb25hbFNpZ25lcnMsIG9wdHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmF3VHJhbnNhY3Rpb24oc2lnbmVkVHguc2VyaWFsaXplKCksIG9wdHMpO1xuICAgIH1cbiAgICBhc3luYyBwcmVwYXJlVHgodHgsIGFkZGl0aW9uYWxTaWduZXJzLCBvcHRzKSB7XG4gICAgICAgIHR4LmZlZVBheWVyID0gdGhpcy53YWxsZXQucHVibGljS2V5O1xuICAgICAgICB0eC5yZWNlbnRCbG9ja2hhc2ggPSAoYXdhaXQgdGhpcy5jb25uZWN0aW9uLmdldExhdGVzdEJsb2NraGFzaChvcHRzLnByZWZsaWdodENvbW1pdG1lbnQpKS5ibG9ja2hhc2g7XG4gICAgICAgIGFkZGl0aW9uYWxTaWduZXJzXG4gICAgICAgICAgICAuZmlsdGVyKChzKSA9PiBzICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAuZm9yRWFjaCgoa3ApID0+IHtcbiAgICAgICAgICAgIHR4LnBhcnRpYWxTaWduKGtwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNpZ25lZFR4ID0gYXdhaXQgdGhpcy53YWxsZXQuc2lnblRyYW5zYWN0aW9uKHR4KTtcbiAgICAgICAgcmV0dXJuIHNpZ25lZFR4O1xuICAgIH1cbiAgICBhc3luYyBnZXRWZXJzaW9uZWRUcmFuc2FjdGlvbihpeHMsIGxvb2t1cFRhYmxlQWNjb3VudHMsIGFkZGl0aW9uYWxTaWduZXJzLCBvcHRzKSB7XG4gICAgICAgIGlmIChhZGRpdGlvbmFsU2lnbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsU2lnbmVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyB3ZWIzX2pzXzEuVHJhbnNhY3Rpb25NZXNzYWdlKHtcbiAgICAgICAgICAgIHBheWVyS2V5OiB0aGlzLndhbGxldC5wdWJsaWNLZXksXG4gICAgICAgICAgICByZWNlbnRCbG9ja2hhc2g6IChhd2FpdCB0aGlzLmNvbm5lY3Rpb24uZ2V0TGF0ZXN0QmxvY2toYXNoKG9wdHMucHJlZmxpZ2h0Q29tbWl0bWVudCkpLmJsb2NraGFzaCxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogaXhzLFxuICAgICAgICB9KS5jb21waWxlVG9WME1lc3NhZ2UobG9va3VwVGFibGVBY2NvdW50cyk7XG4gICAgICAgIGNvbnN0IHR4ID0gbmV3IHdlYjNfanNfMS5WZXJzaW9uZWRUcmFuc2FjdGlvbihtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHR4O1xuICAgIH1cbiAgICBhc3luYyBzZW5kVmVyc2lvbmVkVHJhbnNhY3Rpb24odHgsIGFkZGl0aW9uYWxTaWduZXJzLCBvcHRzLCBwcmVTaWduZWQpIHtcbiAgICAgICAgbGV0IHNpZ25lZFR4O1xuICAgICAgICBpZiAocHJlU2lnbmVkKSB7XG4gICAgICAgICAgICBzaWduZWRUeCA9IHR4O1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMud2FsbGV0LnBheWVyKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICB0eC5zaWduKChhZGRpdGlvbmFsU2lnbmVycyAhPT0gbnVsbCAmJiBhZGRpdGlvbmFsU2lnbmVycyAhPT0gdm9pZCAwID8gYWRkaXRpb25hbFNpZ25lcnMgOiBbXSkuY29uY2F0KHRoaXMud2FsbGV0LnBheWVyKSk7XG4gICAgICAgICAgICBzaWduZWRUeCA9IHR4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYWRkaXRpb25hbFNpZ25lcnMgPT09IG51bGwgfHwgYWRkaXRpb25hbFNpZ25lcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkZGl0aW9uYWxTaWduZXJzLmZpbHRlcigocykgPT4gcyAhPT0gdW5kZWZpbmVkKS5mb3JFYWNoKChrcCkgPT4ge1xuICAgICAgICAgICAgICAgIHR4LnNpZ24oW2twXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIHNpZ25lZFR4ID0gYXdhaXQgdGhpcy53YWxsZXQuc2lnblRyYW5zYWN0aW9uKHR4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRzID0gdGhpcy5vcHRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRSYXdUcmFuc2FjdGlvbihzaWduZWRUeC5zZXJpYWxpemUoKSwgb3B0cyk7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRSYXdUcmFuc2FjdGlvbihcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgcmF3VHJhbnNhY3Rpb24sIFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBvcHRzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzcycpO1xuICAgIH1cbiAgICBhc3luYyBjb25maXJtVHJhbnNhY3Rpb24oc2lnbmF0dXJlLCBjb21taXRtZW50KSB7XG4gICAgICAgIGxldCBkZWNvZGVkU2lnbmF0dXJlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVjb2RlZFNpZ25hdHVyZSA9IGJzNThfMS5kZWZhdWx0LmRlY29kZShzaWduYXR1cmUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc2lnbmF0dXJlIG11c3QgYmUgYmFzZTU4IGVuY29kZWQ6ICcgKyBzaWduYXR1cmUpO1xuICAgICAgICB9XG4gICAgICAgICgwLCBhc3NlcnRfMS5kZWZhdWx0KShkZWNvZGVkU2lnbmF0dXJlLmxlbmd0aCA9PT0gNjQsICdzaWduYXR1cmUgaGFzIGludmFsaWQgbGVuZ3RoJyk7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uQ29tbWl0bWVudCA9IGNvbW1pdG1lbnQgfHwgdGhpcy5vcHRzLmNvbW1pdG1lbnQ7XG4gICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbklkcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICBjb25zdCBjb25uZWN0aW9ucyA9IFt0aGlzLmNvbm5lY3Rpb24sIC4uLnRoaXMuYWRkaXRpb25hbENvbm5lY3Rpb25zXTtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gbnVsbDtcbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBjb25uZWN0aW9ucy5tYXAoKGNvbm5lY3Rpb24sIGkpID0+IHtcbiAgICAgICAgICAgIGxldCBzdWJzY3JpcHRpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1Qcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbklkID0gY29ubmVjdGlvbi5vblNpZ25hdHVyZShzaWduYXR1cmUsIChyZXN1bHQsIGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbklkc1tpXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9LCBzdWJzY3JpcHRpb25Db21taXRtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbklkcy5wdXNoKHN1YnNjcmlwdGlvbklkKTtcbiAgICAgICAgICAgIHJldHVybiBjb25maXJtUHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByb21pc2VUaW1lb3V0KHByb21pc2VzLCB0aGlzLnRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbaSwgc3Vic2NyaXB0aW9uSWRdIG9mIHN1YnNjcmlwdGlvbklkcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbnNbaV0ucmVtb3ZlU2lnbmF0dXJlTGlzdGVuZXIoc3Vic2NyaXB0aW9uSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzcG9uc2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGltZW91dENvdW50ICs9IDE7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IChEYXRlLm5vdygpIC0gc3RhcnQpIC8gMTAwMDtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVHJhbnNhY3Rpb24gd2FzIG5vdCBjb25maXJtZWQgaW4gJHtkdXJhdGlvbi50b0ZpeGVkKDIpfSBzZWNvbmRzLiBJdCBpcyB1bmtub3duIGlmIGl0IHN1Y2NlZWRlZCBvciBmYWlsZWQuIENoZWNrIHNpZ25hdHVyZSAke3NpZ25hdHVyZX0gdXNpbmcgdGhlIFNvbGFuYSBFeHBsb3JlciBvciBDTEkgdG9vbHMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICBnZXRUaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9XG4gICAgcHJvbWlzZVRpbWVvdXQocHJvbWlzZXMsIHRpbWVvdXRNcykge1xuICAgICAgICBsZXQgdGltZW91dElkO1xuICAgICAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUobnVsbCksIHRpbWVvdXRNcyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFsuLi5wcm9taXNlcywgdGltZW91dFByb21pc2VdKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNlbmRUb0FkZGl0aW9uYWxDb25uZWN0aW9ucyhyYXdUeCwgb3B0cykge1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxDb25uZWN0aW9ucy5tYXAoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24uc2VuZFJhd1RyYW5zYWN0aW9uKHJhd1R4LCBvcHRzKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgIGBlcnJvciBzZW5kaW5nIHR4IHRvIGFkZGl0aW9uYWwgY29ubmVjdGlvbiAke2Nvbm5lY3Rpb24uX3JwY0VuZHBvaW50fWApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZEFkZGl0aW9uYWxDb25uZWN0aW9uKG5ld0Nvbm5lY3Rpb24pIHtcbiAgICAgICAgY29uc3QgYWxyZWFkeVVzaW5nQ29ubmVjdGlvbiA9IHRoaXMuYWRkaXRpb25hbENvbm5lY3Rpb25zLmZpbHRlcigoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uX3JwY0VuZHBvaW50ID09PSBuZXdDb25uZWN0aW9uLnJwY0VuZHBvaW50O1xuICAgICAgICB9KS5sZW5ndGggPiAwO1xuICAgICAgICBpZiAoIWFscmVhZHlVc2luZ0Nvbm5lY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuYWRkaXRpb25hbENvbm5lY3Rpb25zLnB1c2gobmV3Q29ubmVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VGltZW91dENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lb3V0Q291bnQ7XG4gICAgfVxufVxuZXhwb3J0cy5CYXNlVHhTZW5kZXIgPSBCYXNlVHhTZW5kZXI7XG4iXSwibmFtZXMiOlsiX19pbXBvcnREZWZhdWx0IiwibW9kIiwiX19lc01vZHVsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQmFzZVR4U2VuZGVyIiwid2ViM19qc18xIiwicmVxdWlyZSIsImFuY2hvcl8xIiwiYXNzZXJ0XzEiLCJiczU4XzEiLCJERUZBVUxUX1RJTUVPVVQiLCJjb25zdHJ1Y3RvciIsImNvbm5lY3Rpb24iLCJ3YWxsZXQiLCJvcHRzIiwiQW5jaG9yUHJvdmlkZXIiLCJkZWZhdWx0T3B0aW9ucyIsInRpbWVvdXQiLCJhZGRpdGlvbmFsQ29ubmVjdGlvbnMiLCJBcnJheSIsInRpbWVvdXRDb3VudCIsInNlbmQiLCJ0eCIsImFkZGl0aW9uYWxTaWduZXJzIiwicHJlU2lnbmVkIiwidW5kZWZpbmVkIiwic2lnbmVkVHgiLCJwcmVwYXJlVHgiLCJzZW5kUmF3VHJhbnNhY3Rpb24iLCJzZXJpYWxpemUiLCJmZWVQYXllciIsInB1YmxpY0tleSIsInJlY2VudEJsb2NraGFzaCIsImdldExhdGVzdEJsb2NraGFzaCIsInByZWZsaWdodENvbW1pdG1lbnQiLCJibG9ja2hhc2giLCJmaWx0ZXIiLCJzIiwiZm9yRWFjaCIsImtwIiwicGFydGlhbFNpZ24iLCJzaWduVHJhbnNhY3Rpb24iLCJnZXRWZXJzaW9uZWRUcmFuc2FjdGlvbiIsIml4cyIsImxvb2t1cFRhYmxlQWNjb3VudHMiLCJtZXNzYWdlIiwiVHJhbnNhY3Rpb25NZXNzYWdlIiwicGF5ZXJLZXkiLCJpbnN0cnVjdGlvbnMiLCJjb21waWxlVG9WME1lc3NhZ2UiLCJWZXJzaW9uZWRUcmFuc2FjdGlvbiIsInNlbmRWZXJzaW9uZWRUcmFuc2FjdGlvbiIsInBheWVyIiwic2lnbiIsImNvbmNhdCIsInJhd1RyYW5zYWN0aW9uIiwiRXJyb3IiLCJjb25maXJtVHJhbnNhY3Rpb24iLCJzaWduYXR1cmUiLCJjb21taXRtZW50IiwiZGVjb2RlZFNpZ25hdHVyZSIsImRlZmF1bHQiLCJkZWNvZGUiLCJlcnIiLCJsZW5ndGgiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJzdWJzY3JpcHRpb25Db21taXRtZW50Iiwic3Vic2NyaXB0aW9uSWRzIiwiY29ubmVjdGlvbnMiLCJyZXNwb25zZSIsInByb21pc2VzIiwibWFwIiwiaSIsInN1YnNjcmlwdGlvbklkIiwiY29uZmlybVByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9uU2lnbmF0dXJlIiwicmVzdWx0IiwiY29udGV4dCIsInB1c2giLCJwcm9taXNlVGltZW91dCIsImVudHJpZXMiLCJyZW1vdmVTaWduYXR1cmVMaXN0ZW5lciIsImR1cmF0aW9uIiwidG9GaXhlZCIsImdldFRpbWVzdGFtcCIsImdldFRpbWUiLCJ0aW1lb3V0TXMiLCJ0aW1lb3V0SWQiLCJ0aW1lb3V0UHJvbWlzZSIsInNldFRpbWVvdXQiLCJyYWNlIiwidGhlbiIsImNsZWFyVGltZW91dCIsInNlbmRUb0FkZGl0aW9uYWxDb25uZWN0aW9ucyIsInJhd1R4IiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwiX3JwY0VuZHBvaW50IiwiYWRkQWRkaXRpb25hbENvbm5lY3Rpb24iLCJuZXdDb25uZWN0aW9uIiwiYWxyZWFkeVVzaW5nQ29ubmVjdGlvbiIsInJwY0VuZHBvaW50IiwiZ2V0VGltZW91dENvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/tx/baseTxSender.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/tx/fastSingleTxSender.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/tx/fastSingleTxSender.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.FastSingleTxSender = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst baseTxSender_1 = __webpack_require__(/*! ./baseTxSender */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tx/baseTxSender.js\");\nconst DEFAULT_TIMEOUT = 35000;\nconst DEFAULT_BLOCKHASH_REFRESH = 10000;\nclass FastSingleTxSender extends baseTxSender_1.BaseTxSender {\n    constructor({ connection, wallet, opts = anchor_1.AnchorProvider.defaultOptions(), timeout = DEFAULT_TIMEOUT, blockhashRefreshInterval = DEFAULT_BLOCKHASH_REFRESH, additionalConnections = new Array() }){\n        super({\n            connection,\n            wallet,\n            opts,\n            timeout,\n            additionalConnections\n        });\n        this.timoutCount = 0;\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n        this.timeout = timeout;\n        this.blockhashRefreshInterval = blockhashRefreshInterval;\n        this.additionalConnections = additionalConnections;\n        this.startBlockhashRefreshLoop();\n    }\n    startBlockhashRefreshLoop() {\n        setInterval(async ()=>{\n            this.recentBlockhash = (await this.connection.getLatestBlockhash(this.opts)).blockhash;\n        }, this.blockhashRefreshInterval);\n    }\n    async prepareTx(tx, additionalSigners, opts) {\n        var _a;\n        tx.feePayer = this.wallet.publicKey;\n        tx.recentBlockhash = (_a = this.recentBlockhash) !== null && _a !== void 0 ? _a : (await this.connection.getLatestBlockhash(opts.preflightCommitment)).blockhash;\n        additionalSigners.filter((s)=>s !== undefined).forEach((kp)=>{\n            tx.partialSign(kp);\n        });\n        const signedTx = await this.wallet.signTransaction(tx);\n        return signedTx;\n    }\n    async getVersionedTransaction(ixs, lookupTableAccounts, additionalSigners, opts) {\n        var _a;\n        if (additionalSigners === undefined) {\n            additionalSigners = [];\n        }\n        if (opts === undefined) {\n            opts = this.opts;\n        }\n        const message = new web3_js_1.TransactionMessage({\n            payerKey: this.wallet.publicKey,\n            recentBlockhash: (_a = this.recentBlockhash) !== null && _a !== void 0 ? _a : (await this.connection.getLatestBlockhash(opts.preflightCommitment)).blockhash,\n            instructions: ixs\n        }).compileToV0Message(lookupTableAccounts);\n        const tx = new web3_js_1.VersionedTransaction(message);\n        return tx;\n    }\n    async sendRawTransaction(rawTransaction, opts) {\n        let txid;\n        try {\n            txid = await this.connection.sendRawTransaction(rawTransaction, opts);\n            this.sendToAdditionalConnections(rawTransaction, opts);\n        } catch (e) {\n            console.error(e);\n            throw e;\n        }\n        this.connection.sendRawTransaction(rawTransaction, opts).catch((e)=>{\n            console.error(e);\n        });\n        this.sendToAdditionalConnections(rawTransaction, opts);\n        let slot;\n        try {\n            const result = await this.confirmTransaction(txid, opts.commitment);\n            slot = result.context.slot;\n        } catch (e) {\n            console.error(e);\n            throw e;\n        }\n        return {\n            txSig: txid,\n            slot\n        };\n    }\n}\nexports.FastSingleTxSender = FastSingleTxSender;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC9mYXN0U2luZ2xlVHhTZW5kZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELDBCQUEwQixHQUFHLEtBQUs7QUFDbEMsTUFBTUcsWUFBWUMsbUJBQU9BLENBQUMsOEVBQWlCO0FBQzNDLE1BQU1DLFdBQVdELG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNRSxpQkFBaUJGLG1CQUFPQSxDQUFDLG1GQUFnQjtBQUMvQyxNQUFNRyxrQkFBa0I7QUFDeEIsTUFBTUMsNEJBQTRCO0FBQ2xDLE1BQU1OLDJCQUEyQkksZUFBZUcsWUFBWTtJQUN4REMsWUFBWSxFQUFFQyxVQUFVLEVBQUVDLE1BQU0sRUFBRUMsT0FBT1IsU0FBU1MsY0FBYyxDQUFDQyxjQUFjLEVBQUUsRUFBRUMsVUFBVVQsZUFBZSxFQUFFVSwyQkFBMkJULHlCQUF5QixFQUFFVSx3QkFBd0IsSUFBSUMsT0FBTyxFQUFHLENBQUU7UUFDeE0sS0FBSyxDQUFDO1lBQUVSO1lBQVlDO1lBQVFDO1lBQU1HO1lBQVNFO1FBQXNCO1FBQ2pFLElBQUksQ0FBQ0UsV0FBVyxHQUFHO1FBQ25CLElBQUksQ0FBQ1QsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLElBQUksR0FBR0E7UUFDWixJQUFJLENBQUNHLE9BQU8sR0FBR0E7UUFDZixJQUFJLENBQUNDLHdCQUF3QixHQUFHQTtRQUNoQyxJQUFJLENBQUNDLHFCQUFxQixHQUFHQTtRQUM3QixJQUFJLENBQUNHLHlCQUF5QjtJQUNsQztJQUNBQSw0QkFBNEI7UUFDeEJDLFlBQVk7WUFDUixJQUFJLENBQUNDLGVBQWUsR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDWixVQUFVLENBQUNhLGtCQUFrQixDQUFDLElBQUksQ0FBQ1gsSUFBSSxHQUFHWSxTQUFTO1FBQzFGLEdBQUcsSUFBSSxDQUFDUix3QkFBd0I7SUFDcEM7SUFDQSxNQUFNUyxVQUFVQyxFQUFFLEVBQUVDLGlCQUFpQixFQUFFZixJQUFJLEVBQUU7UUFDekMsSUFBSWdCO1FBQ0pGLEdBQUdHLFFBQVEsR0FBRyxJQUFJLENBQUNsQixNQUFNLENBQUNtQixTQUFTO1FBQ25DSixHQUFHSixlQUFlLEdBQ2QsQ0FBQ00sS0FBSyxJQUFJLENBQUNOLGVBQWUsTUFBTSxRQUFRTSxPQUFPLEtBQUssSUFBSUEsS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDbEIsVUFBVSxDQUFDYSxrQkFBa0IsQ0FBQ1gsS0FBS21CLG1CQUFtQixHQUMxSFAsU0FBUztRQUNsQkcsa0JBQ0tLLE1BQU0sQ0FBQyxDQUFDQyxJQUFNQSxNQUFNQyxXQUNwQkMsT0FBTyxDQUFDLENBQUNDO1lBQ1ZWLEdBQUdXLFdBQVcsQ0FBQ0Q7UUFDbkI7UUFDQSxNQUFNRSxXQUFXLE1BQU0sSUFBSSxDQUFDM0IsTUFBTSxDQUFDNEIsZUFBZSxDQUFDYjtRQUNuRCxPQUFPWTtJQUNYO0lBQ0EsTUFBTUUsd0JBQXdCQyxHQUFHLEVBQUVDLG1CQUFtQixFQUFFZixpQkFBaUIsRUFBRWYsSUFBSSxFQUFFO1FBQzdFLElBQUlnQjtRQUNKLElBQUlELHNCQUFzQk8sV0FBVztZQUNqQ1Asb0JBQW9CLEVBQUU7UUFDMUI7UUFDQSxJQUFJZixTQUFTc0IsV0FBVztZQUNwQnRCLE9BQU8sSUFBSSxDQUFDQSxJQUFJO1FBQ3BCO1FBQ0EsTUFBTStCLFVBQVUsSUFBSXpDLFVBQVUwQyxrQkFBa0IsQ0FBQztZQUM3Q0MsVUFBVSxJQUFJLENBQUNsQyxNQUFNLENBQUNtQixTQUFTO1lBQy9CUixpQkFBaUIsQ0FBQ00sS0FBSyxJQUFJLENBQUNOLGVBQWUsTUFBTSxRQUFRTSxPQUFPLEtBQUssSUFBSUEsS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDbEIsVUFBVSxDQUFDYSxrQkFBa0IsQ0FBQ1gsS0FBS21CLG1CQUFtQixHQUMzSVAsU0FBUztZQUNkc0IsY0FBY0w7UUFDbEIsR0FBR00sa0JBQWtCLENBQUNMO1FBQ3RCLE1BQU1oQixLQUFLLElBQUl4QixVQUFVOEMsb0JBQW9CLENBQUNMO1FBQzlDLE9BQU9qQjtJQUNYO0lBQ0EsTUFBTXVCLG1CQUFtQkMsY0FBYyxFQUFFdEMsSUFBSSxFQUFFO1FBQzNDLElBQUl1QztRQUNKLElBQUk7WUFDQUEsT0FBTyxNQUFNLElBQUksQ0FBQ3pDLFVBQVUsQ0FBQ3VDLGtCQUFrQixDQUFDQyxnQkFBZ0J0QztZQUNoRSxJQUFJLENBQUN3QywyQkFBMkIsQ0FBQ0YsZ0JBQWdCdEM7UUFDckQsRUFDQSxPQUFPeUMsR0FBRztZQUNOQyxRQUFRQyxLQUFLLENBQUNGO1lBQ2QsTUFBTUE7UUFDVjtRQUNBLElBQUksQ0FBQzNDLFVBQVUsQ0FBQ3VDLGtCQUFrQixDQUFDQyxnQkFBZ0J0QyxNQUFNNEMsS0FBSyxDQUFDLENBQUNIO1lBQzVEQyxRQUFRQyxLQUFLLENBQUNGO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDRCwyQkFBMkIsQ0FBQ0YsZ0JBQWdCdEM7UUFDakQsSUFBSTZDO1FBQ0osSUFBSTtZQUNBLE1BQU1DLFNBQVMsTUFBTSxJQUFJLENBQUNDLGtCQUFrQixDQUFDUixNQUFNdkMsS0FBS2dELFVBQVU7WUFDbEVILE9BQU9DLE9BQU9HLE9BQU8sQ0FBQ0osSUFBSTtRQUM5QixFQUNBLE9BQU9KLEdBQUc7WUFDTkMsUUFBUUMsS0FBSyxDQUFDRjtZQUNkLE1BQU1BO1FBQ1Y7UUFDQSxPQUFPO1lBQUVTLE9BQU9YO1lBQU1NO1FBQUs7SUFDL0I7QUFDSjtBQUNBMUQsMEJBQTBCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3R4L2Zhc3RTaW5nbGVUeFNlbmRlci5qcz9mNjVhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5GYXN0U2luZ2xlVHhTZW5kZXIgPSB2b2lkIDA7XG5jb25zdCB3ZWIzX2pzXzEgPSByZXF1aXJlKFwiQHNvbGFuYS93ZWIzLmpzXCIpO1xuY29uc3QgYW5jaG9yXzEgPSByZXF1aXJlKFwiQGNvcmFsLXh5ei9hbmNob3JcIik7XG5jb25zdCBiYXNlVHhTZW5kZXJfMSA9IHJlcXVpcmUoXCIuL2Jhc2VUeFNlbmRlclwiKTtcbmNvbnN0IERFRkFVTFRfVElNRU9VVCA9IDM1MDAwO1xuY29uc3QgREVGQVVMVF9CTE9DS0hBU0hfUkVGUkVTSCA9IDEwMDAwO1xuY2xhc3MgRmFzdFNpbmdsZVR4U2VuZGVyIGV4dGVuZHMgYmFzZVR4U2VuZGVyXzEuQmFzZVR4U2VuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNvbm5lY3Rpb24sIHdhbGxldCwgb3B0cyA9IGFuY2hvcl8xLkFuY2hvclByb3ZpZGVyLmRlZmF1bHRPcHRpb25zKCksIHRpbWVvdXQgPSBERUZBVUxUX1RJTUVPVVQsIGJsb2NraGFzaFJlZnJlc2hJbnRlcnZhbCA9IERFRkFVTFRfQkxPQ0tIQVNIX1JFRlJFU0gsIGFkZGl0aW9uYWxDb25uZWN0aW9ucyA9IG5ldyBBcnJheSgpLCB9KSB7XG4gICAgICAgIHN1cGVyKHsgY29ubmVjdGlvbiwgd2FsbGV0LCBvcHRzLCB0aW1lb3V0LCBhZGRpdGlvbmFsQ29ubmVjdGlvbnMgfSk7XG4gICAgICAgIHRoaXMudGltb3V0Q291bnQgPSAwO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLndhbGxldCA9IHdhbGxldDtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgdGhpcy5ibG9ja2hhc2hSZWZyZXNoSW50ZXJ2YWwgPSBibG9ja2hhc2hSZWZyZXNoSW50ZXJ2YWw7XG4gICAgICAgIHRoaXMuYWRkaXRpb25hbENvbm5lY3Rpb25zID0gYWRkaXRpb25hbENvbm5lY3Rpb25zO1xuICAgICAgICB0aGlzLnN0YXJ0QmxvY2toYXNoUmVmcmVzaExvb3AoKTtcbiAgICB9XG4gICAgc3RhcnRCbG9ja2hhc2hSZWZyZXNoTG9vcCgpIHtcbiAgICAgICAgc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWNlbnRCbG9ja2hhc2ggPSAoYXdhaXQgdGhpcy5jb25uZWN0aW9uLmdldExhdGVzdEJsb2NraGFzaCh0aGlzLm9wdHMpKS5ibG9ja2hhc2g7XG4gICAgICAgIH0sIHRoaXMuYmxvY2toYXNoUmVmcmVzaEludGVydmFsKTtcbiAgICB9XG4gICAgYXN5bmMgcHJlcGFyZVR4KHR4LCBhZGRpdGlvbmFsU2lnbmVycywgb3B0cykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHR4LmZlZVBheWVyID0gdGhpcy53YWxsZXQucHVibGljS2V5O1xuICAgICAgICB0eC5yZWNlbnRCbG9ja2hhc2ggPVxuICAgICAgICAgICAgKF9hID0gdGhpcy5yZWNlbnRCbG9ja2hhc2gpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChhd2FpdCB0aGlzLmNvbm5lY3Rpb24uZ2V0TGF0ZXN0QmxvY2toYXNoKG9wdHMucHJlZmxpZ2h0Q29tbWl0bWVudCkpXG4gICAgICAgICAgICAgICAgLmJsb2NraGFzaDtcbiAgICAgICAgYWRkaXRpb25hbFNpZ25lcnNcbiAgICAgICAgICAgIC5maWx0ZXIoKHMpID0+IHMgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIC5mb3JFYWNoKChrcCkgPT4ge1xuICAgICAgICAgICAgdHgucGFydGlhbFNpZ24oa3ApO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2lnbmVkVHggPSBhd2FpdCB0aGlzLndhbGxldC5zaWduVHJhbnNhY3Rpb24odHgpO1xuICAgICAgICByZXR1cm4gc2lnbmVkVHg7XG4gICAgfVxuICAgIGFzeW5jIGdldFZlcnNpb25lZFRyYW5zYWN0aW9uKGl4cywgbG9va3VwVGFibGVBY2NvdW50cywgYWRkaXRpb25hbFNpZ25lcnMsIG9wdHMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoYWRkaXRpb25hbFNpZ25lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYWRkaXRpb25hbFNpZ25lcnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRzID0gdGhpcy5vcHRzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgd2ViM19qc18xLlRyYW5zYWN0aW9uTWVzc2FnZSh7XG4gICAgICAgICAgICBwYXllcktleTogdGhpcy53YWxsZXQucHVibGljS2V5LFxuICAgICAgICAgICAgcmVjZW50QmxvY2toYXNoOiAoX2EgPSB0aGlzLnJlY2VudEJsb2NraGFzaCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5nZXRMYXRlc3RCbG9ja2hhc2gob3B0cy5wcmVmbGlnaHRDb21taXRtZW50KSlcbiAgICAgICAgICAgICAgICAuYmxvY2toYXNoLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBpeHMsXG4gICAgICAgIH0pLmNvbXBpbGVUb1YwTWVzc2FnZShsb29rdXBUYWJsZUFjY291bnRzKTtcbiAgICAgICAgY29uc3QgdHggPSBuZXcgd2ViM19qc18xLlZlcnNpb25lZFRyYW5zYWN0aW9uKG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gdHg7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRSYXdUcmFuc2FjdGlvbihyYXdUcmFuc2FjdGlvbiwgb3B0cykge1xuICAgICAgICBsZXQgdHhpZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHR4aWQgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uc2VuZFJhd1RyYW5zYWN0aW9uKHJhd1RyYW5zYWN0aW9uLCBvcHRzKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFRvQWRkaXRpb25hbENvbm5lY3Rpb25zKHJhd1RyYW5zYWN0aW9uLCBvcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNlbmRSYXdUcmFuc2FjdGlvbihyYXdUcmFuc2FjdGlvbiwgb3B0cykuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmRUb0FkZGl0aW9uYWxDb25uZWN0aW9ucyhyYXdUcmFuc2FjdGlvbiwgb3B0cyk7XG4gICAgICAgIGxldCBzbG90O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jb25maXJtVHJhbnNhY3Rpb24odHhpZCwgb3B0cy5jb21taXRtZW50KTtcbiAgICAgICAgICAgIHNsb3QgPSByZXN1bHQuY29udGV4dC5zbG90O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0eFNpZzogdHhpZCwgc2xvdCB9O1xuICAgIH1cbn1cbmV4cG9ydHMuRmFzdFNpbmdsZVR4U2VuZGVyID0gRmFzdFNpbmdsZVR4U2VuZGVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiRmFzdFNpbmdsZVR4U2VuZGVyIiwid2ViM19qc18xIiwicmVxdWlyZSIsImFuY2hvcl8xIiwiYmFzZVR4U2VuZGVyXzEiLCJERUZBVUxUX1RJTUVPVVQiLCJERUZBVUxUX0JMT0NLSEFTSF9SRUZSRVNIIiwiQmFzZVR4U2VuZGVyIiwiY29uc3RydWN0b3IiLCJjb25uZWN0aW9uIiwid2FsbGV0Iiwib3B0cyIsIkFuY2hvclByb3ZpZGVyIiwiZGVmYXVsdE9wdGlvbnMiLCJ0aW1lb3V0IiwiYmxvY2toYXNoUmVmcmVzaEludGVydmFsIiwiYWRkaXRpb25hbENvbm5lY3Rpb25zIiwiQXJyYXkiLCJ0aW1vdXRDb3VudCIsInN0YXJ0QmxvY2toYXNoUmVmcmVzaExvb3AiLCJzZXRJbnRlcnZhbCIsInJlY2VudEJsb2NraGFzaCIsImdldExhdGVzdEJsb2NraGFzaCIsImJsb2NraGFzaCIsInByZXBhcmVUeCIsInR4IiwiYWRkaXRpb25hbFNpZ25lcnMiLCJfYSIsImZlZVBheWVyIiwicHVibGljS2V5IiwicHJlZmxpZ2h0Q29tbWl0bWVudCIsImZpbHRlciIsInMiLCJ1bmRlZmluZWQiLCJmb3JFYWNoIiwia3AiLCJwYXJ0aWFsU2lnbiIsInNpZ25lZFR4Iiwic2lnblRyYW5zYWN0aW9uIiwiZ2V0VmVyc2lvbmVkVHJhbnNhY3Rpb24iLCJpeHMiLCJsb29rdXBUYWJsZUFjY291bnRzIiwibWVzc2FnZSIsIlRyYW5zYWN0aW9uTWVzc2FnZSIsInBheWVyS2V5IiwiaW5zdHJ1Y3Rpb25zIiwiY29tcGlsZVRvVjBNZXNzYWdlIiwiVmVyc2lvbmVkVHJhbnNhY3Rpb24iLCJzZW5kUmF3VHJhbnNhY3Rpb24iLCJyYXdUcmFuc2FjdGlvbiIsInR4aWQiLCJzZW5kVG9BZGRpdGlvbmFsQ29ubmVjdGlvbnMiLCJlIiwiY29uc29sZSIsImVycm9yIiwiY2F0Y2giLCJzbG90IiwicmVzdWx0IiwiY29uZmlybVRyYW5zYWN0aW9uIiwiY29tbWl0bWVudCIsImNvbnRleHQiLCJ0eFNpZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/tx/fastSingleTxSender.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/tx/retryTxSender.js":
/*!**************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/tx/retryTxSender.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.RetryTxSender = void 0;\nconst anchor_1 = __webpack_require__(/*! @coral-xyz/anchor */ \"(ssr)/./node_modules/@coral-xyz/anchor/dist/esm/index.js\");\nconst baseTxSender_1 = __webpack_require__(/*! ./baseTxSender */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/tx/baseTxSender.js\");\nconst DEFAULT_TIMEOUT = 35000;\nconst DEFAULT_RETRY = 8000;\nclass RetryTxSender extends baseTxSender_1.BaseTxSender {\n    constructor({ connection, wallet, opts = anchor_1.AnchorProvider.defaultOptions(), timeout = DEFAULT_TIMEOUT, retrySleep = DEFAULT_RETRY, additionalConnections = new Array() }){\n        super({\n            connection,\n            wallet,\n            opts,\n            timeout,\n            additionalConnections\n        });\n        this.timoutCount = 0;\n        this.connection = connection;\n        this.wallet = wallet;\n        this.opts = opts;\n        this.timeout = timeout;\n        this.retrySleep = retrySleep;\n        this.additionalConnections = additionalConnections;\n    }\n    async sleep(reference) {\n        return new Promise((resolve)=>{\n            reference.resolve = resolve;\n            setTimeout(resolve, this.retrySleep);\n        });\n    }\n    async sendRawTransaction(rawTransaction, opts) {\n        const startTime = this.getTimestamp();\n        let txid;\n        try {\n            txid = await this.connection.sendRawTransaction(rawTransaction, opts);\n            this.sendToAdditionalConnections(rawTransaction, opts);\n        } catch (e) {\n            console.error(e);\n            throw e;\n        }\n        let done = false;\n        const resolveReference = {\n            resolve: undefined\n        };\n        const stopWaiting = ()=>{\n            done = true;\n            if (resolveReference.resolve) {\n                resolveReference.resolve();\n            }\n        };\n        (async ()=>{\n            while(!done && this.getTimestamp() - startTime < this.timeout){\n                await this.sleep(resolveReference);\n                if (!done) {\n                    this.connection.sendRawTransaction(rawTransaction, opts).catch((e)=>{\n                        console.error(e);\n                        stopWaiting();\n                    });\n                    this.sendToAdditionalConnections(rawTransaction, opts);\n                }\n            }\n        })();\n        let slot;\n        try {\n            const result = await this.confirmTransaction(txid, opts.commitment);\n            slot = result.context.slot;\n        } catch (e) {\n            console.error(e);\n            throw e;\n        } finally{\n            stopWaiting();\n        }\n        return {\n            txSig: txid,\n            slot\n        };\n    }\n}\nexports.RetryTxSender = RetryTxSender;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC9yZXRyeVR4U2VuZGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxxQkFBcUIsR0FBRyxLQUFLO0FBQzdCLE1BQU1HLFdBQVdDLG1CQUFPQSxDQUFDLG1GQUFtQjtBQUM1QyxNQUFNQyxpQkFBaUJELG1CQUFPQSxDQUFDLG1GQUFnQjtBQUMvQyxNQUFNRSxrQkFBa0I7QUFDeEIsTUFBTUMsZ0JBQWdCO0FBQ3RCLE1BQU1MLHNCQUFzQkcsZUFBZUcsWUFBWTtJQUNuREMsWUFBWSxFQUFFQyxVQUFVLEVBQUVDLE1BQU0sRUFBRUMsT0FBT1QsU0FBU1UsY0FBYyxDQUFDQyxjQUFjLEVBQUUsRUFBRUMsVUFBVVQsZUFBZSxFQUFFVSxhQUFhVCxhQUFhLEVBQUVVLHdCQUF3QixJQUFJQyxPQUFPLEVBQUcsQ0FBRTtRQUM5SyxLQUFLLENBQUM7WUFBRVI7WUFBWUM7WUFBUUM7WUFBTUc7WUFBU0U7UUFBc0I7UUFDakUsSUFBSSxDQUFDRSxXQUFXLEdBQUc7UUFDbkIsSUFBSSxDQUFDVCxVQUFVLEdBQUdBO1FBQ2xCLElBQUksQ0FBQ0MsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ0MsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0csT0FBTyxHQUFHQTtRQUNmLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLHFCQUFxQixHQUFHQTtJQUNqQztJQUNBLE1BQU1HLE1BQU1DLFNBQVMsRUFBRTtRQUNuQixPQUFPLElBQUlDLFFBQVEsQ0FBQ0M7WUFDaEJGLFVBQVVFLE9BQU8sR0FBR0E7WUFDcEJDLFdBQVdELFNBQVMsSUFBSSxDQUFDUCxVQUFVO1FBQ3ZDO0lBQ0o7SUFDQSxNQUFNUyxtQkFBbUJDLGNBQWMsRUFBRWQsSUFBSSxFQUFFO1FBQzNDLE1BQU1lLFlBQVksSUFBSSxDQUFDQyxZQUFZO1FBQ25DLElBQUlDO1FBQ0osSUFBSTtZQUNBQSxPQUFPLE1BQU0sSUFBSSxDQUFDbkIsVUFBVSxDQUFDZSxrQkFBa0IsQ0FBQ0MsZ0JBQWdCZDtZQUNoRSxJQUFJLENBQUNrQiwyQkFBMkIsQ0FBQ0osZ0JBQWdCZDtRQUNyRCxFQUNBLE9BQU9tQixHQUFHO1lBQ05DLFFBQVFDLEtBQUssQ0FBQ0Y7WUFDZCxNQUFNQTtRQUNWO1FBQ0EsSUFBSUcsT0FBTztRQUNYLE1BQU1DLG1CQUFtQjtZQUNyQlosU0FBU2E7UUFDYjtRQUNBLE1BQU1DLGNBQWM7WUFDaEJILE9BQU87WUFDUCxJQUFJQyxpQkFBaUJaLE9BQU8sRUFBRTtnQkFDMUJZLGlCQUFpQlosT0FBTztZQUM1QjtRQUNKO1FBQ0M7WUFDRyxNQUFPLENBQUNXLFFBQVEsSUFBSSxDQUFDTixZQUFZLEtBQUtELFlBQVksSUFBSSxDQUFDWixPQUFPLENBQUU7Z0JBQzVELE1BQU0sSUFBSSxDQUFDSyxLQUFLLENBQUNlO2dCQUNqQixJQUFJLENBQUNELE1BQU07b0JBQ1AsSUFBSSxDQUFDeEIsVUFBVSxDQUNWZSxrQkFBa0IsQ0FBQ0MsZ0JBQWdCZCxNQUNuQzBCLEtBQUssQ0FBQyxDQUFDUDt3QkFDUkMsUUFBUUMsS0FBSyxDQUFDRjt3QkFDZE07b0JBQ0o7b0JBQ0EsSUFBSSxDQUFDUCwyQkFBMkIsQ0FBQ0osZ0JBQWdCZDtnQkFDckQ7WUFDSjtRQUNKO1FBQ0EsSUFBSTJCO1FBQ0osSUFBSTtZQUNBLE1BQU1DLFNBQVMsTUFBTSxJQUFJLENBQUNDLGtCQUFrQixDQUFDWixNQUFNakIsS0FBSzhCLFVBQVU7WUFDbEVILE9BQU9DLE9BQU9HLE9BQU8sQ0FBQ0osSUFBSTtRQUM5QixFQUNBLE9BQU9SLEdBQUc7WUFDTkMsUUFBUUMsS0FBSyxDQUFDRjtZQUNkLE1BQU1BO1FBQ1YsU0FDUTtZQUNKTTtRQUNKO1FBQ0EsT0FBTztZQUFFTyxPQUFPZjtZQUFNVTtRQUFLO0lBQy9CO0FBQ0o7QUFDQXZDLHFCQUFxQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC9yZXRyeVR4U2VuZGVyLmpzPzBkNDEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlJldHJ5VHhTZW5kZXIgPSB2b2lkIDA7XG5jb25zdCBhbmNob3JfMSA9IHJlcXVpcmUoXCJAY29yYWwteHl6L2FuY2hvclwiKTtcbmNvbnN0IGJhc2VUeFNlbmRlcl8xID0gcmVxdWlyZShcIi4vYmFzZVR4U2VuZGVyXCIpO1xuY29uc3QgREVGQVVMVF9USU1FT1VUID0gMzUwMDA7XG5jb25zdCBERUZBVUxUX1JFVFJZID0gODAwMDtcbmNsYXNzIFJldHJ5VHhTZW5kZXIgZXh0ZW5kcyBiYXNlVHhTZW5kZXJfMS5CYXNlVHhTZW5kZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgY29ubmVjdGlvbiwgd2FsbGV0LCBvcHRzID0gYW5jaG9yXzEuQW5jaG9yUHJvdmlkZXIuZGVmYXVsdE9wdGlvbnMoKSwgdGltZW91dCA9IERFRkFVTFRfVElNRU9VVCwgcmV0cnlTbGVlcCA9IERFRkFVTFRfUkVUUlksIGFkZGl0aW9uYWxDb25uZWN0aW9ucyA9IG5ldyBBcnJheSgpLCB9KSB7XG4gICAgICAgIHN1cGVyKHsgY29ubmVjdGlvbiwgd2FsbGV0LCBvcHRzLCB0aW1lb3V0LCBhZGRpdGlvbmFsQ29ubmVjdGlvbnMgfSk7XG4gICAgICAgIHRoaXMudGltb3V0Q291bnQgPSAwO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xuICAgICAgICB0aGlzLndhbGxldCA9IHdhbGxldDtcbiAgICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgICAgdGhpcy5yZXRyeVNsZWVwID0gcmV0cnlTbGVlcDtcbiAgICAgICAgdGhpcy5hZGRpdGlvbmFsQ29ubmVjdGlvbnMgPSBhZGRpdGlvbmFsQ29ubmVjdGlvbnM7XG4gICAgfVxuICAgIGFzeW5jIHNsZWVwKHJlZmVyZW5jZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHJlZmVyZW5jZS5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5yZXRyeVNsZWVwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIHNlbmRSYXdUcmFuc2FjdGlvbihyYXdUcmFuc2FjdGlvbiwgb3B0cykge1xuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSB0aGlzLmdldFRpbWVzdGFtcCgpO1xuICAgICAgICBsZXQgdHhpZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHR4aWQgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb24uc2VuZFJhd1RyYW5zYWN0aW9uKHJhd1RyYW5zYWN0aW9uLCBvcHRzKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZFRvQWRkaXRpb25hbENvbm5lY3Rpb25zKHJhd1RyYW5zYWN0aW9uLCBvcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZVJlZmVyZW5jZSA9IHtcbiAgICAgICAgICAgIHJlc29sdmU6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RvcFdhaXRpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlUmVmZXJlbmNlLnJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlUmVmZXJlbmNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHdoaWxlICghZG9uZSAmJiB0aGlzLmdldFRpbWVzdGFtcCgpIC0gc3RhcnRUaW1lIDwgdGhpcy50aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcChyZXNvbHZlUmVmZXJlbmNlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2VuZFJhd1RyYW5zYWN0aW9uKHJhd1RyYW5zYWN0aW9uLCBvcHRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcFdhaXRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFRvQWRkaXRpb25hbENvbm5lY3Rpb25zKHJhd1RyYW5zYWN0aW9uLCBvcHRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgICAgIGxldCBzbG90O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jb25maXJtVHJhbnNhY3Rpb24odHhpZCwgb3B0cy5jb21taXRtZW50KTtcbiAgICAgICAgICAgIHNsb3QgPSByZXN1bHQuY29udGV4dC5zbG90O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHN0b3BXYWl0aW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdHhTaWc6IHR4aWQsIHNsb3QgfTtcbiAgICB9XG59XG5leHBvcnRzLlJldHJ5VHhTZW5kZXIgPSBSZXRyeVR4U2VuZGVyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiUmV0cnlUeFNlbmRlciIsImFuY2hvcl8xIiwicmVxdWlyZSIsImJhc2VUeFNlbmRlcl8xIiwiREVGQVVMVF9USU1FT1VUIiwiREVGQVVMVF9SRVRSWSIsIkJhc2VUeFNlbmRlciIsImNvbnN0cnVjdG9yIiwiY29ubmVjdGlvbiIsIndhbGxldCIsIm9wdHMiLCJBbmNob3JQcm92aWRlciIsImRlZmF1bHRPcHRpb25zIiwidGltZW91dCIsInJldHJ5U2xlZXAiLCJhZGRpdGlvbmFsQ29ubmVjdGlvbnMiLCJBcnJheSIsInRpbW91dENvdW50Iiwic2xlZXAiLCJyZWZlcmVuY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJzZW5kUmF3VHJhbnNhY3Rpb24iLCJyYXdUcmFuc2FjdGlvbiIsInN0YXJ0VGltZSIsImdldFRpbWVzdGFtcCIsInR4aWQiLCJzZW5kVG9BZGRpdGlvbmFsQ29ubmVjdGlvbnMiLCJlIiwiY29uc29sZSIsImVycm9yIiwiZG9uZSIsInJlc29sdmVSZWZlcmVuY2UiLCJ1bmRlZmluZWQiLCJzdG9wV2FpdGluZyIsImNhdGNoIiwic2xvdCIsInJlc3VsdCIsImNvbmZpcm1UcmFuc2FjdGlvbiIsImNvbW1pdG1lbnQiLCJjb250ZXh0IiwidHhTaWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/tx/retryTxSender.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/tx/types.js":
/*!******************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/tx/types.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC90eXBlcy5qcz8yNDI3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/tx/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/tx/utils.js":
/*!******************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/tx/utils.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.wrapInTx = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst COMPUTE_UNITS_DEFAULT = 200000;\nfunction wrapInTx(instruction, computeUnits = 600000, computeUnitsPrice = 0) {\n    const tx = new web3_js_1.Transaction();\n    if (computeUnits != COMPUTE_UNITS_DEFAULT) {\n        tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitLimit({\n            units: computeUnits\n        }));\n    }\n    if (computeUnitsPrice != 0) {\n        tx.add(web3_js_1.ComputeBudgetProgram.setComputeUnitPrice({\n            microLamports: computeUnitsPrice\n        }));\n    }\n    return tx.add(instruction);\n}\nexports.wrapInTx = wrapInTx;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eC91dGlscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsZ0JBQWdCLEdBQUcsS0FBSztBQUN4QixNQUFNRyxZQUFZQyxtQkFBT0EsQ0FBQyw4RUFBaUI7QUFDM0MsTUFBTUMsd0JBQXdCO0FBQzlCLFNBQVNILFNBQVNJLFdBQVcsRUFBRUMsZUFBZSxNQUFNLEVBQUVDLG9CQUFvQixDQUFDO0lBQ3ZFLE1BQU1DLEtBQUssSUFBSU4sVUFBVU8sV0FBVztJQUNwQyxJQUFJSCxnQkFBZ0JGLHVCQUF1QjtRQUN2Q0ksR0FBR0UsR0FBRyxDQUFDUixVQUFVUyxvQkFBb0IsQ0FBQ0MsbUJBQW1CLENBQUM7WUFDdERDLE9BQU9QO1FBQ1g7SUFDSjtJQUNBLElBQUlDLHFCQUFxQixHQUFHO1FBQ3hCQyxHQUFHRSxHQUFHLENBQUNSLFVBQVVTLG9CQUFvQixDQUFDRyxtQkFBbUIsQ0FBQztZQUN0REMsZUFBZVI7UUFDbkI7SUFDSjtJQUNBLE9BQU9DLEdBQUdFLEdBQUcsQ0FBQ0w7QUFDbEI7QUFDQU4sZ0JBQWdCLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3R4L3V0aWxzLmpzP2MyMGIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLndyYXBJblR4ID0gdm9pZCAwO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IENPTVBVVEVfVU5JVFNfREVGQVVMVCA9IDIwMDAwMDtcbmZ1bmN0aW9uIHdyYXBJblR4KGluc3RydWN0aW9uLCBjb21wdXRlVW5pdHMgPSA2MDAwMDAsIGNvbXB1dGVVbml0c1ByaWNlID0gMCkge1xuICAgIGNvbnN0IHR4ID0gbmV3IHdlYjNfanNfMS5UcmFuc2FjdGlvbigpO1xuICAgIGlmIChjb21wdXRlVW5pdHMgIT0gQ09NUFVURV9VTklUU19ERUZBVUxUKSB7XG4gICAgICAgIHR4LmFkZCh3ZWIzX2pzXzEuQ29tcHV0ZUJ1ZGdldFByb2dyYW0uc2V0Q29tcHV0ZVVuaXRMaW1pdCh7XG4gICAgICAgICAgICB1bml0czogY29tcHV0ZVVuaXRzLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGlmIChjb21wdXRlVW5pdHNQcmljZSAhPSAwKSB7XG4gICAgICAgIHR4LmFkZCh3ZWIzX2pzXzEuQ29tcHV0ZUJ1ZGdldFByb2dyYW0uc2V0Q29tcHV0ZVVuaXRQcmljZSh7XG4gICAgICAgICAgICBtaWNyb0xhbXBvcnRzOiBjb21wdXRlVW5pdHNQcmljZSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gdHguYWRkKGluc3RydWN0aW9uKTtcbn1cbmV4cG9ydHMud3JhcEluVHggPSB3cmFwSW5UeDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIndyYXBJblR4Iiwid2ViM19qc18xIiwicmVxdWlyZSIsIkNPTVBVVEVfVU5JVFNfREVGQVVMVCIsImluc3RydWN0aW9uIiwiY29tcHV0ZVVuaXRzIiwiY29tcHV0ZVVuaXRzUHJpY2UiLCJ0eCIsIlRyYW5zYWN0aW9uIiwiYWRkIiwiQ29tcHV0ZUJ1ZGdldFByb2dyYW0iLCJzZXRDb21wdXRlVW5pdExpbWl0IiwidW5pdHMiLCJzZXRDb21wdXRlVW5pdFByaWNlIiwibWljcm9MYW1wb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/tx/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/types.js":
/*!***************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/types.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.SwapReduceOnly = exports.DefaultOrderParams = exports.ModifyOrderPolicy = exports.PostOnlyParams = exports.LiquidationType = exports.LPAction = exports.TradeSide = exports.getVariant = exports.isOneOfVariant = exports.isVariant = exports.StakeAction = exports.SpotFulfillmentConfigStatus = exports.SettlePnlExplanation = exports.DepositExplanation = exports.SpotFulfillmentStatus = exports.SpotFulfillmentType = exports.OrderTriggerCondition = exports.OrderActionExplanation = exports.OrderAction = exports.OrderStatus = exports.MarketType = exports.OrderType = exports.OracleSource = exports.DepositDirection = exports.PositionDirection = exports.SpotBalanceType = exports.SwapDirection = exports.AssetTier = exports.ContractTier = exports.ContractType = exports.UserStatus = exports.MarketStatus = exports.ExchangeStatus = void 0;\nconst _1 = __webpack_require__(/*! . */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\n// # Utility Types / Enums / Constants\nvar ExchangeStatus;\n(function(ExchangeStatus) {\n    ExchangeStatus[ExchangeStatus[\"ACTIVE\"] = 0] = \"ACTIVE\";\n    ExchangeStatus[ExchangeStatus[\"DEPOSIT_PAUSED\"] = 1] = \"DEPOSIT_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"WITHDRAW_PAUSED\"] = 2] = \"WITHDRAW_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"AMM_PAUSED\"] = 4] = \"AMM_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"FILL_PAUSED\"] = 8] = \"FILL_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"LIQ_PAUSED\"] = 16] = \"LIQ_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"FUNDING_PAUSED\"] = 32] = \"FUNDING_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"SETTLE_PNL_PAUSED\"] = 64] = \"SETTLE_PNL_PAUSED\";\n    ExchangeStatus[ExchangeStatus[\"PAUSED\"] = 127] = \"PAUSED\";\n})(ExchangeStatus = exports.ExchangeStatus || (exports.ExchangeStatus = {}));\nclass MarketStatus {\n}\nexports.MarketStatus = MarketStatus;\nMarketStatus.INITIALIZED = {\n    initialized: {}\n};\nMarketStatus.ACTIVE = {\n    active: {}\n};\nMarketStatus.FUNDING_PAUSED = {\n    fundingPaused: {}\n};\nMarketStatus.AMM_PAUSED = {\n    ammPaused: {}\n};\nMarketStatus.FILL_PAUSED = {\n    fillPaused: {}\n};\nMarketStatus.WITHDRAW_PAUSED = {\n    withdrawPaused: {}\n};\nMarketStatus.REDUCE_ONLY = {\n    reduceOnly: {}\n};\nMarketStatus.SETTLEMENT = {\n    settlement: {}\n};\nMarketStatus.DELISTED = {\n    delisted: {}\n};\nclass UserStatus {\n}\nexports.UserStatus = UserStatus;\nUserStatus.ACTIVE = {\n    active: {}\n};\nUserStatus.BEING_LIQUIDATED = {\n    beingLiquidated: {}\n};\nUserStatus.BANKRUPT = {\n    bankrupt: {}\n};\nUserStatus.REDUCE_ONLY = {\n    reduceOnly: {}\n};\nclass ContractType {\n}\nexports.ContractType = ContractType;\nContractType.PERPETUAL = {\n    perpetual: {}\n};\nContractType.FUTURE = {\n    future: {}\n};\nclass ContractTier {\n}\nexports.ContractTier = ContractTier;\nContractTier.A = {\n    a: {}\n};\nContractTier.B = {\n    b: {}\n};\nContractTier.C = {\n    c: {}\n};\nContractTier.SPECULATIVE = {\n    speculative: {}\n};\nContractTier.ISOLATED = {\n    isolated: {}\n};\nclass AssetTier {\n}\nexports.AssetTier = AssetTier;\nAssetTier.COLLATERAL = {\n    collateral: {}\n};\nAssetTier.PROTECTED = {\n    protected: {}\n};\nAssetTier.CROSS = {\n    cross: {}\n};\nAssetTier.ISOLATED = {\n    isolated: {}\n};\nAssetTier.UNLISTED = {\n    unlisted: {}\n};\nclass SwapDirection {\n}\nexports.SwapDirection = SwapDirection;\nSwapDirection.ADD = {\n    add: {}\n};\nSwapDirection.REMOVE = {\n    remove: {}\n};\nclass SpotBalanceType {\n}\nexports.SpotBalanceType = SpotBalanceType;\nSpotBalanceType.DEPOSIT = {\n    deposit: {}\n};\nSpotBalanceType.BORROW = {\n    borrow: {}\n};\nclass PositionDirection {\n}\nexports.PositionDirection = PositionDirection;\nPositionDirection.LONG = {\n    long: {}\n};\nPositionDirection.SHORT = {\n    short: {}\n};\nclass DepositDirection {\n}\nexports.DepositDirection = DepositDirection;\nDepositDirection.DEPOSIT = {\n    deposit: {}\n};\nDepositDirection.WITHDRAW = {\n    withdraw: {}\n};\nclass OracleSource {\n}\nexports.OracleSource = OracleSource;\nOracleSource.PYTH = {\n    pyth: {}\n};\nOracleSource.PYTH_1K = {\n    pyth1K: {}\n};\nOracleSource.PYTH_1M = {\n    pyth1M: {}\n};\n// static readonly SWITCHBOARD = { switchboard: {} };\nOracleSource.QUOTE_ASSET = {\n    quoteAsset: {}\n};\nOracleSource.PYTH_STABLE_COIN = {\n    pythStableCoin: {}\n};\nclass OrderType {\n}\nexports.OrderType = OrderType;\nOrderType.LIMIT = {\n    limit: {}\n};\nOrderType.TRIGGER_MARKET = {\n    triggerMarket: {}\n};\nOrderType.TRIGGER_LIMIT = {\n    triggerLimit: {}\n};\nOrderType.MARKET = {\n    market: {}\n};\nOrderType.ORACLE = {\n    oracle: {}\n};\nclass MarketType {\n}\nexports.MarketType = MarketType;\nMarketType.SPOT = {\n    spot: {}\n};\nMarketType.PERP = {\n    perp: {}\n};\nclass OrderStatus {\n}\nexports.OrderStatus = OrderStatus;\nOrderStatus.INIT = {\n    init: {}\n};\nOrderStatus.OPEN = {\n    open: {}\n};\nclass OrderAction {\n}\nexports.OrderAction = OrderAction;\nOrderAction.PLACE = {\n    place: {}\n};\nOrderAction.CANCEL = {\n    cancel: {}\n};\nOrderAction.EXPIRE = {\n    expire: {}\n};\nOrderAction.FILL = {\n    fill: {}\n};\nOrderAction.TRIGGER = {\n    trigger: {}\n};\nclass OrderActionExplanation {\n}\nexports.OrderActionExplanation = OrderActionExplanation;\nOrderActionExplanation.NONE = {\n    none: {}\n};\nOrderActionExplanation.INSUFFICIENT_FREE_COLLATERAL = {\n    insufficientFreeCollateral: {}\n};\nOrderActionExplanation.ORACLE_PRICE_BREACHED_LIMIT_PRICE = {\n    oraclePriceBreachedLimitPrice: {}\n};\nOrderActionExplanation.MARKET_ORDER_FILLED_TO_LIMIT_PRICE = {\n    marketOrderFilledToLimitPrice: {}\n};\nOrderActionExplanation.ORDER_EXPIRED = {\n    orderExpired: {}\n};\nOrderActionExplanation.LIQUIDATION = {\n    liquidation: {}\n};\nOrderActionExplanation.ORDER_FILLED_WITH_AMM = {\n    orderFilledWithAmm: {}\n};\nOrderActionExplanation.ORDER_FILLED_WITH_AMM_JIT = {\n    orderFilledWithAmmJit: {}\n};\nOrderActionExplanation.ORDER_FILLED_WITH_AMM_JIT_LP_SPLIT = {\n    orderFilledWithAmmJitLpSplit: {}\n};\nOrderActionExplanation.ORDER_FILLED_WITH_LP_JIT = {\n    orderFilledWithLpJit: {}\n};\nOrderActionExplanation.ORDER_FILLED_WITH_MATCH = {\n    orderFilledWithMatch: {}\n};\nOrderActionExplanation.ORDER_FILLED_WITH_MATCH_JIT = {\n    orderFilledWithMatchJit: {}\n};\nOrderActionExplanation.MARKET_EXPIRED = {\n    marketExpired: {}\n};\nOrderActionExplanation.RISK_INCREASING_ORDER = {\n    riskingIncreasingOrder: {}\n};\nOrderActionExplanation.ORDER_FILLED_WITH_SERUM = {\n    orderFillWithSerum: {}\n};\nOrderActionExplanation.REDUCE_ONLY_ORDER_INCREASED_POSITION = {\n    reduceOnlyOrderIncreasedPosition: {}\n};\nclass OrderTriggerCondition {\n}\nexports.OrderTriggerCondition = OrderTriggerCondition;\nOrderTriggerCondition.ABOVE = {\n    above: {}\n};\nOrderTriggerCondition.BELOW = {\n    below: {}\n};\nOrderTriggerCondition.TRIGGERED_ABOVE = {\n    triggeredAbove: {}\n}; // above condition has been triggered\nOrderTriggerCondition.TRIGGERED_BELOW = {\n    triggeredBelow: {}\n}; // below condition has been triggered\nclass SpotFulfillmentType {\n}\nexports.SpotFulfillmentType = SpotFulfillmentType;\nSpotFulfillmentType.EXTERNAL = {\n    external: {}\n};\nSpotFulfillmentType.MATCH = {\n    match: {}\n};\nclass SpotFulfillmentStatus {\n}\nexports.SpotFulfillmentStatus = SpotFulfillmentStatus;\nSpotFulfillmentStatus.ENABLED = {\n    enabled: {}\n};\nSpotFulfillmentStatus.DISABLED = {\n    disabled: {}\n};\nclass DepositExplanation {\n}\nexports.DepositExplanation = DepositExplanation;\nDepositExplanation.NONE = {\n    none: {}\n};\nDepositExplanation.TRANSFER = {\n    transfer: {}\n};\nclass SettlePnlExplanation {\n}\nexports.SettlePnlExplanation = SettlePnlExplanation;\nSettlePnlExplanation.NONE = {\n    none: {}\n};\nSettlePnlExplanation.EXPIRED_POSITION = {\n    expiredPosition: {}\n};\nclass SpotFulfillmentConfigStatus {\n}\nexports.SpotFulfillmentConfigStatus = SpotFulfillmentConfigStatus;\nSpotFulfillmentConfigStatus.ENABLED = {\n    enabled: {}\n};\nSpotFulfillmentConfigStatus.DISABLED = {\n    disabled: {}\n};\nclass StakeAction {\n}\nexports.StakeAction = StakeAction;\nStakeAction.STAKE = {\n    stake: {}\n};\nStakeAction.UNSTAKE_REQUEST = {\n    unstakeRequest: {}\n};\nStakeAction.UNSTAKE_CANCEL_REQUEST = {\n    unstakeCancelRequest: {}\n};\nStakeAction.UNSTAKE = {\n    unstake: {}\n};\nfunction isVariant(object, type) {\n    return object.hasOwnProperty(type);\n}\nexports.isVariant = isVariant;\nfunction isOneOfVariant(object, types) {\n    return types.reduce((result, type)=>{\n        return result || object.hasOwnProperty(type);\n    }, false);\n}\nexports.isOneOfVariant = isOneOfVariant;\nfunction getVariant(object) {\n    return Object.keys(object)[0];\n}\nexports.getVariant = getVariant;\nvar TradeSide;\n(function(TradeSide) {\n    TradeSide[TradeSide[\"None\"] = 0] = \"None\";\n    TradeSide[TradeSide[\"Buy\"] = 1] = \"Buy\";\n    TradeSide[TradeSide[\"Sell\"] = 2] = \"Sell\";\n})(TradeSide = exports.TradeSide || (exports.TradeSide = {}));\nclass LPAction {\n}\nexports.LPAction = LPAction;\nLPAction.ADD_LIQUIDITY = {\n    addLiquidity: {}\n};\nLPAction.REMOVE_LIQUIDITY = {\n    removeLiquidity: {}\n};\nLPAction.SETTLE_LIQUIDITY = {\n    settleLiquidity: {}\n};\nclass LiquidationType {\n}\nexports.LiquidationType = LiquidationType;\nLiquidationType.LIQUIDATE_PERP = {\n    liquidatePerp: {}\n};\nLiquidationType.LIQUIDATE_BORROW_FOR_PERP_PNL = {\n    liquidateBorrowForPerpPnl: {}\n};\nLiquidationType.LIQUIDATE_PERP_PNL_FOR_DEPOSIT = {\n    liquidatePerpPnlForDeposit: {}\n};\nLiquidationType.PERP_BANKRUPTCY = {\n    perpBankruptcy: {}\n};\nLiquidationType.SPOT_BANKRUPTCY = {\n    spotBankruptcy: {}\n};\nLiquidationType.LIQUIDATE_SPOT = {\n    liquidateSpot: {}\n};\nclass PostOnlyParams {\n}\nexports.PostOnlyParams = PostOnlyParams;\nPostOnlyParams.NONE = {\n    none: {}\n};\nPostOnlyParams.MUST_POST_ONLY = {\n    mustPostOnly: {}\n}; // Tx fails if order can't be post only\nPostOnlyParams.TRY_POST_ONLY = {\n    tryPostOnly: {}\n}; // Tx succeeds and order not placed if can't be post only\nPostOnlyParams.SLIDE = {\n    slide: {}\n}; // Modify price to be post only if can't be post only\nclass ModifyOrderPolicy {\n}\nexports.ModifyOrderPolicy = ModifyOrderPolicy;\nModifyOrderPolicy.MUST_MODIFY = {\n    mustModify: {}\n};\nModifyOrderPolicy.TRY_MODIFY = {\n    tryModify: {}\n};\nexports.DefaultOrderParams = {\n    orderType: OrderType.MARKET,\n    marketType: MarketType.PERP,\n    userOrderId: 0,\n    direction: PositionDirection.LONG,\n    baseAssetAmount: _1.ZERO,\n    price: _1.ZERO,\n    marketIndex: 0,\n    reduceOnly: false,\n    postOnly: PostOnlyParams.NONE,\n    immediateOrCancel: false,\n    triggerPrice: null,\n    triggerCondition: OrderTriggerCondition.ABOVE,\n    oraclePriceOffset: null,\n    auctionDuration: null,\n    maxTs: null,\n    auctionStartPrice: null,\n    auctionEndPrice: null\n};\nclass SwapReduceOnly {\n}\nexports.SwapReduceOnly = SwapReduceOnly;\nSwapReduceOnly.In = {\n    in: {}\n};\nSwapReduceOnly.Out = {\n    out: {}\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsc0JBQXNCLEdBQUdBLDBCQUEwQixHQUFHQSx5QkFBeUIsR0FBR0Esc0JBQXNCLEdBQUdBLHVCQUF1QixHQUFHQSxnQkFBZ0IsR0FBR0EsaUJBQWlCLEdBQUdBLGtCQUFrQixHQUFHQSxzQkFBc0IsR0FBR0EsaUJBQWlCLEdBQUdBLG1CQUFtQixHQUFHQSxtQ0FBbUMsR0FBR0EsNEJBQTRCLEdBQUdBLDBCQUEwQixHQUFHQSw2QkFBNkIsR0FBR0EsMkJBQTJCLEdBQUdBLDZCQUE2QixHQUFHQSw4QkFBOEIsR0FBR0EsbUJBQW1CLEdBQUdBLG1CQUFtQixHQUFHQSxrQkFBa0IsR0FBR0EsaUJBQWlCLEdBQUdBLG9CQUFvQixHQUFHQSx3QkFBd0IsR0FBR0EseUJBQXlCLEdBQUdBLHVCQUF1QixHQUFHQSxxQkFBcUIsR0FBR0EsaUJBQWlCLEdBQUdBLG9CQUFvQixHQUFHQSxvQkFBb0IsR0FBR0Esa0JBQWtCLEdBQUdBLG9CQUFvQixHQUFHQSxzQkFBc0IsR0FBRyxLQUFLO0FBQ3QwQixNQUFNbUMsS0FBS0MsbUJBQU9BLENBQUMsNERBQUc7QUFDdEIsc0NBQXNDO0FBQ3RDLElBQUlGO0FBQ0gsVUFBVUEsY0FBYztJQUNyQkEsY0FBYyxDQUFDQSxjQUFjLENBQUMsU0FBUyxHQUFHLEVBQUUsR0FBRztJQUMvQ0EsY0FBYyxDQUFDQSxjQUFjLENBQUMsaUJBQWlCLEdBQUcsRUFBRSxHQUFHO0lBQ3ZEQSxjQUFjLENBQUNBLGNBQWMsQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLEdBQUc7SUFDeERBLGNBQWMsQ0FBQ0EsY0FBYyxDQUFDLGFBQWEsR0FBRyxFQUFFLEdBQUc7SUFDbkRBLGNBQWMsQ0FBQ0EsY0FBYyxDQUFDLGNBQWMsR0FBRyxFQUFFLEdBQUc7SUFDcERBLGNB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LXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvdHlwZXMuanM/YTc2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuU3dhcFJlZHVjZU9ubHkgPSBleHBvcnRzLkRlZmF1bHRPcmRlclBhcmFtcyA9IGV4cG9ydHMuTW9kaWZ5T3JkZXJQb2xpY3kgPSBleHBvcnRzLlBvc3RPbmx5UGFyYW1zID0gZXhwb3J0cy5MaXF1aWRhdGlvblR5cGUgPSBleHBvcnRzLkxQQWN0aW9uID0gZXhwb3J0cy5UcmFkZVNpZGUgPSBleHBvcnRzLmdldFZhcmlhbnQgPSBleHBvcnRzLmlzT25lT2ZWYXJpYW50ID0gZXhwb3J0cy5pc1ZhcmlhbnQgPSBleHBvcnRzLlN0YWtlQWN0aW9uID0gZXhwb3J0cy5TcG90RnVsZmlsbG1lbnRDb25maWdTdGF0dXMgPSBleHBvcnRzLlNldHRsZVBubEV4cGxhbmF0aW9uID0gZXhwb3J0cy5EZXBvc2l0RXhwbGFuYXRpb24gPSBleHBvcnRzLlNwb3RGdWxmaWxsbWVudFN0YXR1cyA9IGV4cG9ydHMuU3BvdEZ1bGZpbGxtZW50VHlwZSA9IGV4cG9ydHMuT3JkZXJUcmlnZ2VyQ29uZGl0aW9uID0gZXhwb3J0cy5PcmRlckFjdGlvbkV4cGxhbmF0aW9uID0gZXhwb3J0cy5PcmRlckFjdGlvbiA9IGV4cG9ydHMuT3JkZXJTdGF0dXMgPSBleHBvcnRzLk1hcmtldFR5cGUgPSBleHBvcnRzLk9yZGVyVHlwZSA9IGV4cG9ydHMuT3JhY2xlU291cmNlID0gZXhwb3J0cy5EZXBvc2l0RGlyZWN0aW9uID0gZXhwb3J0cy5Qb3NpdGlvbkRpcmVjdGlvbiA9IGV4cG9ydHMuU3BvdEJhbGFuY2VUeXBlID0gZXhwb3J0cy5Td2FwRGlyZWN0aW9uID0gZXhwb3J0cy5Bc3NldFRpZXIgPSBleHBvcnRzLkNvbnRyYWN0VGllciA9IGV4cG9ydHMuQ29udHJhY3RUeXBlID0gZXhwb3J0cy5Vc2VyU3RhdHVzID0gZXhwb3J0cy5NYXJrZXRTdGF0dXMgPSBleHBvcnRzLkV4Y2hhbmdlU3RhdHVzID0gdm9pZCAwO1xuY29uc3QgXzEgPSByZXF1aXJlKFwiLlwiKTtcbi8vICMgVXRpbGl0eSBUeXBlcyAvIEVudW1zIC8gQ29uc3RhbnRzXG52YXIgRXhjaGFuZ2VTdGF0dXM7XG4oZnVuY3Rpb24gKEV4Y2hhbmdlU3RhdHVzKSB7XG4gICAgRXhjaGFuZ2VTdGF0dXNbRXhjaGFuZ2VTdGF0dXNbXCJBQ1RJVkVcIl0gPSAwXSA9IFwiQUNUSVZFXCI7XG4gICAgRXhjaGFuZ2VTdGF0dXNbRXhjaGFuZ2VTdGF0dXNbXCJERVBPU0lUX1BBVVNFRFwiXSA9IDFdID0gXCJERVBPU0lUX1BBVVNFRFwiO1xuICAgIEV4Y2hhbmdlU3RhdHVzW0V4Y2hhbmdlU3RhdHVzW1wiV0lUSERSQVdfUEFVU0VEXCJdID0gMl0gPSBcIldJVEhEUkFXX1BBVVNFRFwiO1xuICAgIEV4Y2hhbmdlU3RhdHVzW0V4Y2hhbmdlU3RhdHVzW1wiQU1NX1BBVVNFRFwiXSA9IDRdID0gXCJBTU1fUEFVU0VEXCI7XG4gICAgRXhjaGFuZ2VTdGF0dXNbRXhjaGFuZ2VTdGF0dXNbXCJGSUxMX1BBVVNFRFwiXSA9IDhdID0gXCJGSUxMX1BBVVNFRFwiO1xuICAgIEV4Y2hhbmdlU3RhdHVzW0V4Y2hhbmdlU3RhdHVzW1wiTElRX1BBVVNFRFwiXSA9IDE2XSA9IFwiTElRX1BBVVNFRFwiO1xuICAgIEV4Y2hhbmdlU3RhdHVzW0V4Y2hhbmdlU3RhdHVzW1wiRlVORElOR19QQVVTRURcIl0gPSAzMl0gPSBcIkZVTkRJTkdfUEFVU0VEXCI7XG4gICAgRXhjaGFuZ2VTdGF0dXNbRXhjaGFuZ2VTdGF0dXNbXCJTRVRUTEVfUE5MX1BBVVNFRFwiXSA9IDY0XSA9IFwiU0VUVExFX1BOTF9QQVVTRURcIjtcbiAgICBFeGNoYW5nZVN0YXR1c1tFeGNoYW5nZVN0YXR1c1tcIlBBVVNFRFwiXSA9IDEyN10gPSBcIlBBVVNFRFwiO1xufSkoRXhjaGFuZ2VTdGF0dXMgPSBleHBvcnRzLkV4Y2hhbmdlU3RhdHVzIHx8IChleHBvcnRzLkV4Y2hhbmdlU3RhdHVzID0ge30pKTtcbmNsYXNzIE1hcmtldFN0YXR1cyB7XG59XG5leHBvcnRzLk1hcmtldFN0YXR1cyA9IE1hcmtldFN0YXR1cztcbk1hcmtldFN0YXR1cy5JTklUSUFMSVpFRCA9IHsgaW5pdGlhbGl6ZWQ6IHt9IH07XG5NYXJrZXRTdGF0dXMuQUNUSVZFID0geyBhY3RpdmU6IHt9IH07XG5NYXJrZXRTdGF0dXMuRlVORElOR19QQVVTRUQgPSB7IGZ1bmRpbmdQYXVzZWQ6IHt9IH07XG5NYXJrZXRTdGF0dXMuQU1NX1BBVVNFRCA9IHsgYW1tUGF1c2VkOiB7fSB9O1xuTWFya2V0U3RhdHVzLkZJTExfUEFVU0VEID0geyBmaWxsUGF1c2VkOiB7fSB9O1xuTWFya2V0U3RhdHVzLldJVEhEUkFXX1BBVVNFRCA9IHsgd2l0aGRyYXdQYXVzZWQ6IHt9IH07XG5NYXJrZXRTdGF0dXMuUkVEVUNFX09OTFkgPSB7IHJlZHVjZU9ubHk6IHt9IH07XG5NYXJrZXRTdGF0dXMuU0VUVExFTUVOVCA9IHsgc2V0dGxlbWVudDoge30gfTtcbk1hcmtldFN0YXR1cy5ERUxJU1RFRCA9IHsgZGVsaXN0ZWQ6IHt9IH07XG5jbGFzcyBVc2VyU3RhdHVzIHtcbn1cbmV4cG9ydHMuVXNlclN0YXR1cyA9IFVzZXJTdGF0dXM7XG5Vc2VyU3RhdHVzLkFDVElWRSA9IHsgYWN0aXZlOiB7fSB9O1xuVXNlclN0YXR1cy5CRUlOR19MSVFVSURBVEVEID0geyBiZWluZ0xpcXVpZGF0ZWQ6IHt9IH07XG5Vc2VyU3RhdHVzLkJBTktSVVBUID0geyBiYW5rcnVwdDoge30gfTtcblVzZXJTdGF0dXMuUkVEVUNFX09OTFkgPSB7IHJlZHVjZU9ubHk6IHt9IH07XG5jbGFzcyBDb250cmFjdFR5cGUge1xufVxuZXhwb3J0cy5Db250cmFjdFR5cGUgPSBDb250cmFjdFR5cGU7XG5Db250cmFjdFR5cGUuUEVSUEVUVUFMID0geyBwZXJwZXR1YWw6IHt9IH07XG5Db250cmFjdFR5cGUuRlVUVVJFID0geyBmdXR1cmU6IHt9IH07XG5jbGFzcyBDb250cmFjdFRpZXIge1xufVxuZXhwb3J0cy5Db250cmFjdFRpZXIgPSBDb250cmFjdFRpZXI7XG5Db250cmFjdFRpZXIuQSA9IHsgYToge30gfTtcbkNvbnRyYWN0VGllci5CID0geyBiOiB7fSB9O1xuQ29udHJhY3RUaWVyLkMgPSB7IGM6IHt9IH07XG5Db250cmFjdFRpZXIuU1BFQ1VMQVRJVkUgPSB7IHNwZWN1bGF0aXZlOiB7fSB9O1xuQ29udHJhY3RUaWVyLklTT0xBVEVEID0geyBpc29sYXRlZDoge30gfTtcbmNsYXNzIEFzc2V0VGllciB7XG59XG5leHBvcnRzLkFzc2V0VGllciA9IEFzc2V0VGllcjtcbkFzc2V0VGllci5DT0xMQVRFUkFMID0geyBjb2xsYXRlcmFsOiB7fSB9O1xuQXNzZXRUaWVyLlBST1RFQ1RFRCA9IHsgcHJvdGVjdGVkOiB7fSB9O1xuQXNzZXRUaWVyLkNST1NTID0geyBjcm9zczoge30gfTtcbkFzc2V0VGllci5JU09MQVRFRCA9IHsgaXNvbGF0ZWQ6IHt9IH07XG5Bc3NldFRpZXIuVU5MSVNURUQgPSB7IHVubGlzdGVkOiB7fSB9O1xuY2xhc3MgU3dhcERpcmVjdGlvbiB7XG59XG5leHBvcnRzLlN3YXBEaXJlY3Rpb24gPSBTd2FwRGlyZWN0aW9uO1xuU3dhcERpcmVjdGlvbi5BREQgPSB7IGFkZDoge30gfTtcblN3YXBEaXJlY3Rpb24uUkVNT1ZFID0geyByZW1vdmU6IHt9IH07XG5jbGFzcyBTcG90QmFsYW5jZVR5cGUge1xufVxuZXhwb3J0cy5TcG90QmFsYW5jZVR5cGUgPSBTcG90QmFsYW5jZVR5cGU7XG5TcG90QmFsYW5jZVR5cGUuREVQT1NJVCA9IHsgZGVwb3NpdDoge30gfTtcblNwb3RCYWxhbmNlVHlwZS5CT1JST1cgPSB7IGJvcnJvdzoge30gfTtcbmNsYXNzIFBvc2l0aW9uRGlyZWN0aW9uIHtcbn1cbmV4cG9ydHMuUG9zaXRpb25EaXJlY3Rpb24gPSBQb3NpdGlvbkRpcmVjdGlvbjtcblBvc2l0aW9uRGlyZWN0aW9uLkxPTkcgPSB7IGxvbmc6IHt9IH07XG5Qb3NpdGlvbkRpcmVjdGlvbi5TSE9SVCA9IHsgc2hvcnQ6IHt9IH07XG5jbGFzcyBEZXBvc2l0RGlyZWN0aW9uIHtcbn1cbmV4cG9ydHMuRGVwb3NpdERpcmVjdGlvbiA9IERlcG9zaXREaXJlY3Rpb247XG5EZXBvc2l0RGlyZWN0aW9uLkRFUE9TSVQgPSB7IGRlcG9zaXQ6IHt9IH07XG5EZXBvc2l0RGlyZWN0aW9uLldJVEhEUkFXID0geyB3aXRoZHJhdzoge30gfTtcbmNsYXNzIE9yYWNsZVNvdXJjZSB7XG59XG5leHBvcnRzLk9yYWNsZVNvdXJjZSA9IE9yYWNsZVNvdXJjZTtcbk9yYWNsZVNvdXJjZS5QWVRIID0geyBweXRoOiB7fSB9O1xuT3JhY2xlU291cmNlLlBZVEhfMUsgPSB7IHB5dGgxSzoge30gfTtcbk9yYWNsZVNvdXJjZS5QWVRIXzFNID0geyBweXRoMU06IHt9IH07XG4vLyBzdGF0aWMgcmVhZG9ubHkgU1dJVENIQk9BUkQgPSB7IHN3aXRjaGJvYXJkOiB7fSB9O1xuT3JhY2xlU291cmNlLlFVT1RFX0FTU0VUID0geyBxdW90ZUFzc2V0OiB7fSB9O1xuT3JhY2xlU291cmNlLlBZVEhfU1RBQkxFX0NPSU4gPSB7IHB5dGhTdGFibGVDb2luOiB7fSB9O1xuY2xhc3MgT3JkZXJUeXBlIHtcbn1cbmV4cG9ydHMuT3JkZXJUeXBlID0gT3JkZXJUeXBlO1xuT3JkZXJUeXBlLkxJTUlUID0geyBsaW1pdDoge30gfTtcbk9yZGVyVHlwZS5UUklHR0VSX01BUktFVCA9IHsgdHJpZ2dlck1hcmtldDoge30gfTtcbk9yZGVyVHlwZS5UUklHR0VSX0xJTUlUID0geyB0cmlnZ2VyTGltaXQ6IHt9IH07XG5PcmRlclR5cGUuTUFSS0VUID0geyBtYXJrZXQ6IHt9IH07XG5PcmRlclR5cGUuT1JBQ0xFID0geyBvcmFjbGU6IHt9IH07XG5jbGFzcyBNYXJrZXRUeXBlIHtcbn1cbmV4cG9ydHMuTWFya2V0VHlwZSA9IE1hcmtldFR5cGU7XG5NYXJrZXRUeXBlLlNQT1QgPSB7IHNwb3Q6IHt9IH07XG5NYXJrZXRUeXBlLlBFUlAgPSB7IHBlcnA6IHt9IH07XG5jbGFzcyBPcmRlclN0YXR1cyB7XG59XG5leHBvcnRzLk9yZGVyU3RhdHVzID0gT3JkZXJTdGF0dXM7XG5PcmRlclN0YXR1cy5JTklUID0geyBpbml0OiB7fSB9O1xuT3JkZXJTdGF0dXMuT1BFTiA9IHsgb3Blbjoge30gfTtcbmNsYXNzIE9yZGVyQWN0aW9uIHtcbn1cbmV4cG9ydHMuT3JkZXJBY3Rpb24gPSBPcmRlckFjdGlvbjtcbk9yZGVyQWN0aW9uLlBMQUNFID0geyBwbGFjZToge30gfTtcbk9yZGVyQWN0aW9uLkNBTkNFTCA9IHsgY2FuY2VsOiB7fSB9O1xuT3JkZXJBY3Rpb24uRVhQSVJFID0geyBleHBpcmU6IHt9IH07XG5PcmRlckFjdGlvbi5GSUxMID0geyBmaWxsOiB7fSB9O1xuT3JkZXJBY3Rpb24uVFJJR0dFUiA9IHsgdHJpZ2dlcjoge30gfTtcbmNsYXNzIE9yZGVyQWN0aW9uRXhwbGFuYXRpb24ge1xufVxuZXhwb3J0cy5PcmRlckFjdGlvbkV4cGxhbmF0aW9uID0gT3JkZXJBY3Rpb25FeHBsYW5hdGlvbjtcbk9yZGVyQWN0aW9uRXhwbGFuYXRpb24uTk9ORSA9IHsgbm9uZToge30gfTtcbk9yZGVyQWN0aW9uRXhwbGFuYXRpb24uSU5TVUZGSUNJRU5UX0ZSRUVfQ09MTEFURVJBTCA9IHtcbiAgICBpbnN1ZmZpY2llbnRGcmVlQ29sbGF0ZXJhbDoge30sXG59O1xuT3JkZXJBY3Rpb25FeHBsYW5hdGlvbi5PUkFDTEVfUFJJQ0VfQlJFQUNIRURfTElNSVRfUFJJQ0UgPSB7XG4gICAgb3JhY2xlUHJpY2VCcmVhY2hlZExpbWl0UHJpY2U6IHt9LFxufTtcbk9yZGVyQWN0aW9uRXhwbGFuYXRpb24uTUFSS0VUX09SREVSX0ZJTExFRF9UT19MSU1JVF9QUklDRSA9IHtcbiAgICBtYXJrZXRPcmRlckZpbGxlZFRvTGltaXRQcmljZToge30sXG59O1xuT3JkZXJBY3Rpb25FeHBsYW5hdGlvbi5PUkRFUl9FWFBJUkVEID0ge1xuICAgIG9yZGVyRXhwaXJlZDoge30sXG59O1xuT3JkZXJBY3Rpb25FeHBsYW5hdGlvbi5MSVFVSURBVElPTiA9IHtcbiAgICBsaXF1aWRhdGlvbjoge30sXG59O1xuT3JkZXJBY3Rpb25FeHBsYW5hdGlvbi5PUkRFUl9GSUxMRURfV0lUSF9BTU0gPSB7XG4gICAgb3JkZXJGaWxsZWRXaXRoQW1tOiB7fSxcbn07XG5PcmRlckFjdGlvbkV4cGxhbmF0aW9uLk9SREVSX0ZJTExFRF9XSVRIX0FNTV9KSVQgPSB7XG4gICAgb3JkZXJGaWxsZWRXaXRoQW1tSml0OiB7fSxcbn07XG5PcmRlckFjdGlvbkV4cGxhbmF0aW9uLk9SREVSX0ZJTExFRF9XSVRIX0FNTV9KSVRfTFBfU1BMSVQgPSB7XG4gICAgb3JkZXJGaWxsZWRXaXRoQW1tSml0THBTcGxpdDoge30sXG59O1xuT3JkZXJBY3Rpb25FeHBsYW5hdGlvbi5PUkRFUl9GSUxMRURfV0lUSF9MUF9KSVQgPSB7XG4gICAgb3JkZXJGaWxsZWRXaXRoTHBKaXQ6IHt9LFxufTtcbk9yZGVyQWN0aW9uRXhwbGFuYXRpb24uT1JERVJfRklMTEVEX1dJVEhfTUFUQ0ggPSB7XG4gICAgb3JkZXJGaWxsZWRXaXRoTWF0Y2g6IHt9LFxufTtcbk9yZGVyQWN0aW9uRXhwbGFuYXRpb24uT1JERVJfRklMTEVEX1dJVEhfTUFUQ0hfSklUID0ge1xuICAgIG9yZGVyRmlsbGVkV2l0aE1hdGNoSml0OiB7fSxcbn07XG5PcmRlckFjdGlvbkV4cGxhbmF0aW9uLk1BUktFVF9FWFBJUkVEID0ge1xuICAgIG1hcmtldEV4cGlyZWQ6IHt9LFxufTtcbk9yZGVyQWN0aW9uRXhwbGFuYXRpb24uUklTS19JTkNSRUFTSU5HX09SREVSID0ge1xuICAgIHJpc2tpbmdJbmNyZWFzaW5nT3JkZXI6IHt9LFxufTtcbk9yZGVyQWN0aW9uRXhwbGFuYXRpb24uT1JERVJfRklMTEVEX1dJVEhfU0VSVU0gPSB7XG4gICAgb3JkZXJGaWxsV2l0aFNlcnVtOiB7fSxcbn07XG5PcmRlckFjdGlvbkV4cGxhbmF0aW9uLlJFRFVDRV9PTkxZX09SREVSX0lOQ1JFQVNFRF9QT1NJVElPTiA9IHtcbiAgICByZWR1Y2VPbmx5T3JkZXJJbmNyZWFzZWRQb3NpdGlvbjoge30sXG59O1xuY2xhc3MgT3JkZXJUcmlnZ2VyQ29uZGl0aW9uIHtcbn1cbmV4cG9ydHMuT3JkZXJUcmlnZ2VyQ29uZGl0aW9uID0gT3JkZXJUcmlnZ2VyQ29uZGl0aW9uO1xuT3JkZXJUcmlnZ2VyQ29uZGl0aW9uLkFCT1ZFID0geyBhYm92ZToge30gfTtcbk9yZGVyVHJpZ2dlckNvbmRpdGlvbi5CRUxPVyA9IHsgYmVsb3c6IHt9IH07XG5PcmRlclRyaWdnZXJDb25kaXRpb24uVFJJR0dFUkVEX0FCT1ZFID0geyB0cmlnZ2VyZWRBYm92ZToge30gfTsgLy8gYWJvdmUgY29uZGl0aW9uIGhhcyBiZWVuIHRyaWdnZXJlZFxuT3JkZXJUcmlnZ2VyQ29uZGl0aW9uLlRSSUdHRVJFRF9CRUxPVyA9IHsgdHJpZ2dlcmVkQmVsb3c6IHt9IH07IC8vIGJlbG93IGNvbmRpdGlvbiBoYXMgYmVlbiB0cmlnZ2VyZWRcbmNsYXNzIFNwb3RGdWxmaWxsbWVudFR5cGUge1xufVxuZXhwb3J0cy5TcG90RnVsZmlsbG1lbnRUeXBlID0gU3BvdEZ1bGZpbGxtZW50VHlwZTtcblNwb3RGdWxmaWxsbWVudFR5cGUuRVhURVJOQUwgPSB7IGV4dGVybmFsOiB7fSB9O1xuU3BvdEZ1bGZpbGxtZW50VHlwZS5NQVRDSCA9IHsgbWF0Y2g6IHt9IH07XG5jbGFzcyBTcG90RnVsZmlsbG1lbnRTdGF0dXMge1xufVxuZXhwb3J0cy5TcG90RnVsZmlsbG1lbnRTdGF0dXMgPSBTcG90RnVsZmlsbG1lbnRTdGF0dXM7XG5TcG90RnVsZmlsbG1lbnRTdGF0dXMuRU5BQkxFRCA9IHsgZW5hYmxlZDoge30gfTtcblNwb3RGdWxmaWxsbWVudFN0YXR1cy5ESVNBQkxFRCA9IHsgZGlzYWJsZWQ6IHt9IH07XG5jbGFzcyBEZXBvc2l0RXhwbGFuYXRpb24ge1xufVxuZXhwb3J0cy5EZXBvc2l0RXhwbGFuYXRpb24gPSBEZXBvc2l0RXhwbGFuYXRpb247XG5EZXBvc2l0RXhwbGFuYXRpb24uTk9ORSA9IHsgbm9uZToge30gfTtcbkRlcG9zaXRFeHBsYW5hdGlvbi5UUkFOU0ZFUiA9IHsgdHJhbnNmZXI6IHt9IH07XG5jbGFzcyBTZXR0bGVQbmxFeHBsYW5hdGlvbiB7XG59XG5leHBvcnRzLlNldHRsZVBubEV4cGxhbmF0aW9uID0gU2V0dGxlUG5sRXhwbGFuYXRpb247XG5TZXR0bGVQbmxFeHBsYW5hdGlvbi5OT05FID0geyBub25lOiB7fSB9O1xuU2V0dGxlUG5sRXhwbGFuYXRpb24uRVhQSVJFRF9QT1NJVElPTiA9IHsgZXhwaXJlZFBvc2l0aW9uOiB7fSB9O1xuY2xhc3MgU3BvdEZ1bGZpbGxtZW50Q29uZmlnU3RhdHVzIHtcbn1cbmV4cG9ydHMuU3BvdEZ1bGZpbGxtZW50Q29uZmlnU3RhdHVzID0gU3BvdEZ1bGZpbGxtZW50Q29uZmlnU3RhdHVzO1xuU3BvdEZ1bGZpbGxtZW50Q29uZmlnU3RhdHVzLkVOQUJMRUQgPSB7IGVuYWJsZWQ6IHt9IH07XG5TcG90RnVsZmlsbG1lbnRDb25maWdTdGF0dXMuRElTQUJMRUQgPSB7IGRpc2FibGVkOiB7fSB9O1xuY2xhc3MgU3Rha2VBY3Rpb24ge1xufVxuZXhwb3J0cy5TdGFrZUFjdGlvbiA9IFN0YWtlQWN0aW9uO1xuU3Rha2VBY3Rpb24uU1RBS0UgPSB7IHN0YWtlOiB7fSB9O1xuU3Rha2VBY3Rpb24uVU5TVEFLRV9SRVFVRVNUID0geyB1bnN0YWtlUmVxdWVzdDoge30gfTtcblN0YWtlQWN0aW9uLlVOU1RBS0VfQ0FOQ0VMX1JFUVVFU1QgPSB7IHVuc3Rha2VDYW5jZWxSZXF1ZXN0OiB7fSB9O1xuU3Rha2VBY3Rpb24uVU5TVEFLRSA9IHsgdW5zdGFrZToge30gfTtcbmZ1bmN0aW9uIGlzVmFyaWFudChvYmplY3QsIHR5cGUpIHtcbiAgICByZXR1cm4gb2JqZWN0Lmhhc093blByb3BlcnR5KHR5cGUpO1xufVxuZXhwb3J0cy5pc1ZhcmlhbnQgPSBpc1ZhcmlhbnQ7XG5mdW5jdGlvbiBpc09uZU9mVmFyaWFudChvYmplY3QsIHR5cGVzKSB7XG4gICAgcmV0dXJuIHR5cGVzLnJlZHVjZSgocmVzdWx0LCB0eXBlKSA9PiB7XG4gICAgICAgIHJldHVybiByZXN1bHQgfHwgb2JqZWN0Lmhhc093blByb3BlcnR5KHR5cGUpO1xuICAgIH0sIGZhbHNlKTtcbn1cbmV4cG9ydHMuaXNPbmVPZlZhcmlhbnQgPSBpc09uZU9mVmFyaWFudDtcbmZ1bmN0aW9uIGdldFZhcmlhbnQob2JqZWN0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iamVjdClbMF07XG59XG5leHBvcnRzLmdldFZhcmlhbnQgPSBnZXRWYXJpYW50O1xudmFyIFRyYWRlU2lkZTtcbihmdW5jdGlvbiAoVHJhZGVTaWRlKSB7XG4gICAgVHJhZGVTaWRlW1RyYWRlU2lkZVtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIFRyYWRlU2lkZVtUcmFkZVNpZGVbXCJCdXlcIl0gPSAxXSA9IFwiQnV5XCI7XG4gICAgVHJhZGVTaWRlW1RyYWRlU2lkZVtcIlNlbGxcIl0gPSAyXSA9IFwiU2VsbFwiO1xufSkoVHJhZGVTaWRlID0gZXhwb3J0cy5UcmFkZVNpZGUgfHwgKGV4cG9ydHMuVHJhZGVTaWRlID0ge30pKTtcbmNsYXNzIExQQWN0aW9uIHtcbn1cbmV4cG9ydHMuTFBBY3Rpb24gPSBMUEFjdGlvbjtcbkxQQWN0aW9uLkFERF9MSVFVSURJVFkgPSB7IGFkZExpcXVpZGl0eToge30gfTtcbkxQQWN0aW9uLlJFTU9WRV9MSVFVSURJVFkgPSB7IHJlbW92ZUxpcXVpZGl0eToge30gfTtcbkxQQWN0aW9uLlNFVFRMRV9MSVFVSURJVFkgPSB7IHNldHRsZUxpcXVpZGl0eToge30gfTtcbmNsYXNzIExpcXVpZGF0aW9uVHlwZSB7XG59XG5leHBvcnRzLkxpcXVpZGF0aW9uVHlwZSA9IExpcXVpZGF0aW9uVHlwZTtcbkxpcXVpZGF0aW9uVHlwZS5MSVFVSURBVEVfUEVSUCA9IHsgbGlxdWlkYXRlUGVycDoge30gfTtcbkxpcXVpZGF0aW9uVHlwZS5MSVFVSURBVEVfQk9SUk9XX0ZPUl9QRVJQX1BOTCA9IHtcbiAgICBsaXF1aWRhdGVCb3Jyb3dGb3JQZXJwUG5sOiB7fSxcbn07XG5MaXF1aWRhdGlvblR5cGUuTElRVUlEQVRFX1BFUlBfUE5MX0ZPUl9ERVBPU0lUID0ge1xuICAgIGxpcXVpZGF0ZVBlcnBQbmxGb3JEZXBvc2l0OiB7fSxcbn07XG5MaXF1aWRhdGlvblR5cGUuUEVSUF9CQU5LUlVQVENZID0ge1xuICAgIHBlcnBCYW5rcnVwdGN5OiB7fSxcbn07XG5MaXF1aWRhdGlvblR5cGUuU1BPVF9CQU5LUlVQVENZID0ge1xuICAgIHNwb3RCYW5rcnVwdGN5OiB7fSxcbn07XG5MaXF1aWRhdGlvblR5cGUuTElRVUlEQVRFX1NQT1QgPSB7XG4gICAgbGlxdWlkYXRlU3BvdDoge30sXG59O1xuY2xhc3MgUG9zdE9ubHlQYXJhbXMge1xufVxuZXhwb3J0cy5Qb3N0T25seVBhcmFtcyA9IFBvc3RPbmx5UGFyYW1zO1xuUG9zdE9ubHlQYXJhbXMuTk9ORSA9IHsgbm9uZToge30gfTtcblBvc3RPbmx5UGFyYW1zLk1VU1RfUE9TVF9PTkxZID0geyBtdXN0UG9zdE9ubHk6IHt9IH07IC8vIFR4IGZhaWxzIGlmIG9yZGVyIGNhbid0IGJlIHBvc3Qgb25seVxuUG9zdE9ubHlQYXJhbXMuVFJZX1BPU1RfT05MWSA9IHsgdHJ5UG9zdE9ubHk6IHt9IH07IC8vIFR4IHN1Y2NlZWRzIGFuZCBvcmRlciBub3QgcGxhY2VkIGlmIGNhbid0IGJlIHBvc3Qgb25seVxuUG9zdE9ubHlQYXJhbXMuU0xJREUgPSB7IHNsaWRlOiB7fSB9OyAvLyBNb2RpZnkgcHJpY2UgdG8gYmUgcG9zdCBvbmx5IGlmIGNhbid0IGJlIHBvc3Qgb25seVxuY2xhc3MgTW9kaWZ5T3JkZXJQb2xpY3kge1xufVxuZXhwb3J0cy5Nb2RpZnlPcmRlclBvbGljeSA9IE1vZGlmeU9yZGVyUG9saWN5O1xuTW9kaWZ5T3JkZXJQb2xpY3kuTVVTVF9NT0RJRlkgPSB7IG11c3RNb2RpZnk6IHt9IH07XG5Nb2RpZnlPcmRlclBvbGljeS5UUllfTU9ESUZZID0geyB0cnlNb2RpZnk6IHt9IH07XG5leHBvcnRzLkRlZmF1bHRPcmRlclBhcmFtcyA9IHtcbiAgICBvcmRlclR5cGU6IE9yZGVyVHlwZS5NQVJLRVQsXG4gICAgbWFya2V0VHlwZTogTWFya2V0VHlwZS5QRVJQLFxuICAgIHVzZXJPcmRlcklkOiAwLFxuICAgIGRpcmVjdGlvbjogUG9zaXRpb25EaXJlY3Rpb24uTE9ORyxcbiAgICBiYXNlQXNzZXRBbW91bnQ6IF8xLlpFUk8sXG4gICAgcHJpY2U6IF8xLlpFUk8sXG4gICAgbWFya2V0SW5kZXg6IDAsXG4gICAgcmVkdWNlT25seTogZmFsc2UsXG4gICAgcG9zdE9ubHk6IFBvc3RPbmx5UGFyYW1zLk5PTkUsXG4gICAgaW1tZWRpYXRlT3JDYW5jZWw6IGZhbHNlLFxuICAgIHRyaWdnZXJQcmljZTogbnVsbCxcbiAgICB0cmlnZ2VyQ29uZGl0aW9uOiBPcmRlclRyaWdnZXJDb25kaXRpb24uQUJPVkUsXG4gICAgb3JhY2xlUHJpY2VPZmZzZXQ6IG51bGwsXG4gICAgYXVjdGlvbkR1cmF0aW9uOiBudWxsLFxuICAgIG1heFRzOiBudWxsLFxuICAgIGF1Y3Rpb25TdGFydFByaWNlOiBudWxsLFxuICAgIGF1Y3Rpb25FbmRQcmljZTogbnVsbCxcbn07XG5jbGFzcyBTd2FwUmVkdWNlT25seSB7XG59XG5leHBvcnRzLlN3YXBSZWR1Y2VPbmx5ID0gU3dhcFJlZHVjZU9ubHk7XG5Td2FwUmVkdWNlT25seS5JbiA9IHsgaW46IHt9IH07XG5Td2FwUmVkdWNlT25seS5PdXQgPSB7IG91dDoge30gfTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlN3YXBSZWR1Y2VPbmx5IiwiRGVmYXVsdE9yZGVyUGFyYW1zIiwiTW9kaWZ5T3JkZXJQb2xpY3kiLCJQb3N0T25seVBhcmFtcyIsIkxpcXVpZGF0aW9uVHlwZSIsIkxQQWN0aW9uIiwiVHJhZGVTaWRlIiwiZ2V0VmFyaWFudCIsImlzT25lT2ZWYXJpYW50IiwiaXNWYXJpYW50IiwiU3Rha2VBY3Rpb24iLCJTcG90RnVsZmlsbG1lbnRDb25maWdTdGF0dXMiLCJTZXR0bGVQbmxFeHBsYW5hdGlvbiIsIkRlcG9zaXRFeHBsYW5hdGlvbiIsIlNwb3RGdWxmaWxsbWVudFN0YXR1cyIsIlNwb3RGdWxmaWxsbWVudFR5cGUiLCJPcmRlclRyaWdnZXJDb25kaXRpb24iLCJPcmRlckFjdGlvbkV4cGxhbmF0aW9uIiwiT3JkZXJBY3Rpb24iLCJPcmRlclN0YXR1cyIsIk1hcmtldFR5cGUiLCJPcmRlclR5cGUiLCJPcmFjbGVTb3VyY2UiLCJEZXBvc2l0RGlyZWN0aW9uIiwiUG9zaXRpb25EaXJlY3Rpb24iLCJTcG90QmFsYW5jZVR5cGUiLCJTd2FwRGlyZWN0aW9uIiwiQXNzZXRUaWVyIiwiQ29udHJhY3RUaWVyIiwiQ29udHJhY3RUeXBlIiwiVXNlclN0YXR1cyIsIk1hcmtldFN0YXR1cyIsIkV4Y2hhbmdlU3RhdHVzIiwiXzEiLCJyZXF1aXJlIiwiSU5JVElBTElaRUQiLCJpbml0aWFsaXplZCIsIkFDVElWRSIsImFjdGl2ZSIsIkZVTkRJTkdfUEFVU0VEIiwiZnVuZGluZ1BhdXNlZCIsIkFNTV9QQVVTRUQiLCJhbW1QYXVzZWQiLCJGSUxMX1BBVVNFRCIsImZpbGxQYXVzZWQiLCJXSVRIRFJBV19QQVVTRUQiLCJ3aXRoZHJhd1BhdXNlZCIsIlJFRFVDRV9PTkxZIiwicmVkdWNlT25seSIsIlNFVFRMRU1FTlQiLCJzZXR0bGVtZW50IiwiREVMSVNURUQiLCJkZWxpc3RlZCIsIkJFSU5HX0xJUVVJREFURUQiLCJiZWluZ0xpcXVpZGF0ZWQiLCJCQU5LUlVQVCIsImJhbmtydXB0IiwiUEVSUEVUVUFMIiwicGVycGV0dWFsIiwiRlVUVVJFIiwiZnV0dXJlIiwiQSIsImEiLCJCIiwiYiIsIkMiLCJjIiwiU1BFQ1VMQVRJVkUiLCJzcGVjdWxhdGl2ZSIsIklTT0xBVEVEIiwiaXNvbGF0ZWQiLCJDT0xMQVRFUkFMIiwiY29sbGF0ZXJhbCIsIlBST1RFQ1RFRCIsInByb3RlY3RlZCIsIkNST1NTIiwiY3Jvc3MiLCJVTkxJU1RFRCIsInVubGlzdGVkIiwiQUREIiwiYWRkIiwiUkVNT1ZFIiwicmVtb3ZlIiwiREVQT1NJVCIsImRlcG9zaXQiLCJCT1JST1ciLCJib3Jyb3ciLCJMT05HIiwibG9uZyIsIlNIT1JUIiwic2hvcnQiLCJXSVRIRFJBVyIsIndpdGhkcmF3IiwiUFlUSCIsInB5dGgiLCJQWVRIXzFLIiwicHl0aDFLIiwiUFlUSF8xTSIsInB5dGgxTSIsIlFVT1RFX0FTU0VUIiwicXVvdGVBc3NldCIsIlBZVEhfU1RBQkxFX0NPSU4iLCJweXRoU3RhYmxlQ29pbiIsIkxJTUlUIiwibGltaXQiLCJUUklHR0VSX01BUktFVCIsInRyaWdnZXJNYXJrZXQiLCJUUklHR0VSX0xJTUlUIiwidHJpZ2dlckxpbWl0IiwiTUFSS0VUIiwibWFya2V0IiwiT1JBQ0xFIiwib3JhY2xlIiwiU1BPVCIsInNwb3QiLCJQRVJQIiwicGVycCIsIklOSVQiLCJpbml0IiwiT1BFTiIsIm9wZW4iLCJQTEFDRSIsInBsYWNlIiwiQ0FOQ0VMIiwiY2FuY2VsIiwiRVhQSVJFIiwiZXhwaXJlIiwiRklMTCIsImZpbGwiLCJUUklHR0VSIiwidHJpZ2dlciIsIk5PTkUiLCJub25lIiwiSU5TVUZGSUNJRU5UX0ZSRUVfQ09MTEFURVJBTCIsImluc3VmZmljaWVudEZyZWVDb2xsYXRlcmFsIiwiT1JBQ0xFX1BSSUNFX0JSRUFDSEVEX0xJTUlUX1BSSUNFIiwib3JhY2xlUHJpY2VCcmVhY2hlZExpbWl0UHJpY2UiLCJNQVJLRVRfT1JERVJfRklMTEVEX1RPX0xJTUlUX1BSSUNFIiwibWFya2V0T3JkZXJGaWxsZWRUb0xpbWl0UHJpY2UiLCJPUkRFUl9FWFBJUkVEIiwib3JkZXJFeHBpcmVkIiwiTElRVUlEQVRJT04iLCJsaXF1aWRhdGlvbiIsIk9SREVSX0ZJTExFRF9XSVRIX0FNTSIsIm9yZGVyRmlsbGVkV2l0aEFtbSIsIk9SREVSX0ZJTExFRF9XSVRIX0FNTV9KSVQiLCJvcmRlckZpbGxlZFdpdGhBbW1KaXQiLCJPUkRFUl9GSUxMRURfV0lUSF9BTU1fSklUX0xQX1NQTElUIiwib3JkZXJGaWxsZWRXaXRoQW1tSml0THBTcGxpdCIsIk9SREVSX0ZJTExFRF9XSVRIX0xQX0pJVCIsIm9yZGVyRmlsbGVkV2l0aExwSml0IiwiT1JERVJfRklMTEVEX1dJVEhfTUFUQ0giLCJvcmRlckZpbGxlZFdpdGhNYXRjaCIsIk9SREVSX0ZJTExFRF9XSVRIX01BVENIX0pJVCIsIm9yZGVyRmlsbGVkV2l0aE1hdGNoSml0IiwiTUFSS0VUX0VYUElSRUQiLCJtYXJrZXRFeHBpcmVkIiwiUklTS19JTkNSRUFTSU5HX09SREVSIiwicmlza2luZ0luY3JlYXNpbmdPcmRlciIsIk9SREVSX0ZJTExFRF9XSVRIX1NFUlVNIiwib3JkZXJGaWxsV2l0aFNlcnVtIiwiUkVEVUNFX09OTFlfT1JERVJfSU5DUkVBU0VEX1BPU0lUSU9OIiwicmVkdWNlT25seU9yZGVySW5jcmVhc2VkUG9zaXRpb24iLCJBQk9WRSIsImFib3ZlIiwiQkVMT1ciLCJiZWxvdyIsIlRSSUdHRVJFRF9BQk9WRSIsInRyaWdnZXJlZEFib3ZlIiwiVFJJR0dFUkVEX0JFTE9XIiwidHJpZ2dlcmVkQmVsb3ciLCJFWFRFUk5BTCIsImV4dGVybmFsIiwiTUFUQ0giLCJtYXRjaCIsIkVOQUJMRUQiLCJlbmFibGVkIiwiRElTQUJMRUQiLCJkaXNhYmxlZCIsIlRSQU5TRkVSIiwidHJhbnNmZXIiLCJFWFBJUkVEX1BPU0lUSU9OIiwiZXhwaXJlZFBvc2l0aW9uIiwiU1RBS0UiLCJzdGFrZSIsIlVOU1RBS0VfUkVRVUVTVCIsInVuc3Rha2VSZXF1ZXN0IiwiVU5TVEFLRV9DQU5DRUxfUkVRVUVTVCIsInVuc3Rha2VDYW5jZWxSZXF1ZXN0IiwiVU5TVEFLRSIsInVuc3Rha2UiLCJvYmplY3QiLCJ0eXBlIiwiaGFzT3duUHJvcGVydHkiLCJ0eXBlcyIsInJlZHVjZSIsInJlc3VsdCIsImtleXMiLCJBRERfTElRVUlESVRZIiwiYWRkTGlxdWlkaXR5IiwiUkVNT1ZFX0xJUVVJRElUWSIsInJlbW92ZUxpcXVpZGl0eSIsIlNFVFRMRV9MSVFVSURJVFkiLCJzZXR0bGVMaXF1aWRpdHkiLCJMSVFVSURBVEVfUEVSUCIsImxpcXVpZGF0ZVBlcnAiLCJMSVFVSURBVEVfQk9SUk9XX0ZPUl9QRVJQX1BOTCIsImxpcXVpZGF0ZUJvcnJvd0ZvclBlcnBQbmwiLCJMSVFVSURBVEVfUEVSUF9QTkxfRk9SX0RFUE9TSVQiLCJsaXF1aWRhdGVQZXJwUG5sRm9yRGVwb3NpdCIsIlBFUlBfQkFOS1JVUFRDWSIsInBlcnBCYW5rcnVwdGN5IiwiU1BPVF9CQU5LUlVQVENZIiwic3BvdEJhbmtydXB0Y3kiLCJMSVFVSURBVEVfU1BPVCIsImxpcXVpZGF0ZVNwb3QiLCJNVVNUX1BPU1RfT05MWSIsIm11c3RQb3N0T25seSIsIlRSWV9QT1NUX09OTFkiLCJ0cnlQb3N0T25seSIsIlNMSURFIiwic2xpZGUiLCJNVVNUX01PRElGWSIsIm11c3RNb2RpZnkiLCJUUllfTU9ESUZZIiwidHJ5TW9kaWZ5Iiwib3JkZXJUeXBlIiwibWFya2V0VHlwZSIsInVzZXJPcmRlcklkIiwiZGlyZWN0aW9uIiwiYmFzZUFzc2V0QW1vdW50IiwiWkVSTyIsInByaWNlIiwibWFya2V0SW5kZXgiLCJwb3N0T25seSIsImltbWVkaWF0ZU9yQ2FuY2VsIiwidHJpZ2dlclByaWNlIiwidHJpZ2dlckNvbmRpdGlvbiIsIm9yYWNsZVByaWNlT2Zmc2V0IiwiYXVjdGlvbkR1cmF0aW9uIiwibWF4VHMiLCJhdWN0aW9uU3RhcnRQcmljZSIsImF1Y3Rpb25FbmRQcmljZSIsIkluIiwiaW4iLCJPdXQiLCJvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/user.js":
/*!**************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/user.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.User = void 0;\nconst types_1 = __webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/types.js\");\nconst position_1 = __webpack_require__(/*! ./math/position */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/position.js\");\nconst numericConstants_1 = __webpack_require__(/*! ./constants/numericConstants */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/constants/numericConstants.js\");\nconst _1 = __webpack_require__(/*! . */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst spotBalance_1 = __webpack_require__(/*! ./math/spotBalance */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotBalance.js\");\nconst amm_1 = __webpack_require__(/*! ./math/amm */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/amm.js\");\nconst margin_1 = __webpack_require__(/*! ./math/margin */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/margin.js\");\nconst pollingUserAccountSubscriber_1 = __webpack_require__(/*! ./accounts/pollingUserAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserAccountSubscriber.js\");\nconst webSocketUserAccountSubscriber_1 = __webpack_require__(/*! ./accounts/webSocketUserAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserAccountSubscriber.js\");\nconst spotPosition_1 = __webpack_require__(/*! ./math/spotPosition */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/spotPosition.js\");\nconst oracles_1 = __webpack_require__(/*! ./math/oracles */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/oracles.js\");\nconst tiers_1 = __webpack_require__(/*! ./math/tiers */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/math/tiers.js\");\nclass User {\n    get isSubscribed() {\n        return this._isSubscribed && this.accountSubscriber.isSubscribed;\n    }\n    set isSubscribed(val) {\n        this._isSubscribed = val;\n    }\n    constructor(config){\n        var _a, _b;\n        this._isSubscribed = false;\n        this.driftClient = config.driftClient;\n        this.userAccountPublicKey = config.userAccountPublicKey;\n        if (((_a = config.accountSubscription) === null || _a === void 0 ? void 0 : _a.type) === \"polling\") {\n            this.accountSubscriber = new pollingUserAccountSubscriber_1.PollingUserAccountSubscriber(config.driftClient.program, config.userAccountPublicKey, config.accountSubscription.accountLoader);\n        } else if (((_b = config.accountSubscription) === null || _b === void 0 ? void 0 : _b.type) === \"custom\") {\n            this.accountSubscriber = config.accountSubscription.userAccountSubscriber;\n        } else {\n            this.accountSubscriber = new webSocketUserAccountSubscriber_1.WebSocketUserAccountSubscriber(config.driftClient.program, config.userAccountPublicKey);\n        }\n        this.eventEmitter = this.accountSubscriber.eventEmitter;\n    }\n    /**\n     * Subscribe to User state accounts\n     * @returns SusbcriptionSuccess result\n     */ async subscribe(userAccount) {\n        this.isSubscribed = await this.accountSubscriber.subscribe(userAccount);\n        return this.isSubscribed;\n    }\n    /**\n     *\tForces the accountSubscriber to fetch account updates from rpc\n     */ async fetchAccounts() {\n        await this.accountSubscriber.fetch();\n    }\n    async unsubscribe() {\n        await this.accountSubscriber.unsubscribe();\n        this.isSubscribed = false;\n    }\n    getUserAccount() {\n        return this.accountSubscriber.getUserAccountAndSlot().data;\n    }\n    async forceGetUserAccount() {\n        await this.fetchAccounts();\n        return this.accountSubscriber.getUserAccountAndSlot().data;\n    }\n    getUserAccountAndSlot() {\n        return this.accountSubscriber.getUserAccountAndSlot();\n    }\n    getPerpPositionForUserAccount(userAccount, marketIndex) {\n        return userAccount.perpPositions.find((position)=>position.marketIndex === marketIndex);\n    }\n    /**\n     * Gets the user's current position for a given perp market. If the user has no position returns undefined\n     * @param marketIndex\n     * @returns userPerpPosition\n     */ getPerpPosition(marketIndex) {\n        const userAccount = this.getUserAccount();\n        return this.getPerpPositionForUserAccount(userAccount, marketIndex);\n    }\n    getPerpPositionAndSlot(marketIndex) {\n        const userAccount = this.getUserAccountAndSlot();\n        const perpPosition = this.getPerpPositionForUserAccount(userAccount.data, marketIndex);\n        return {\n            data: perpPosition,\n            slot: userAccount.slot\n        };\n    }\n    getSpotPositionForUserAccount(userAccount, marketIndex) {\n        return userAccount.spotPositions.find((position)=>position.marketIndex === marketIndex);\n    }\n    /**\n     * Gets the user's current position for a given spot market. If the user has no position returns undefined\n     * @param marketIndex\n     * @returns userSpotPosition\n     */ getSpotPosition(marketIndex) {\n        const userAccount = this.getUserAccount();\n        return this.getSpotPositionForUserAccount(userAccount, marketIndex);\n    }\n    getSpotPositionAndSlot(marketIndex) {\n        const userAccount = this.getUserAccountAndSlot();\n        const spotPosition = this.getSpotPositionForUserAccount(userAccount.data, marketIndex);\n        return {\n            data: spotPosition,\n            slot: userAccount.slot\n        };\n    }\n    getEmptySpotPosition(marketIndex) {\n        return {\n            marketIndex,\n            scaledBalance: numericConstants_1.ZERO,\n            balanceType: _1.SpotBalanceType.DEPOSIT,\n            cumulativeDeposits: numericConstants_1.ZERO,\n            openAsks: numericConstants_1.ZERO,\n            openBids: numericConstants_1.ZERO,\n            openOrders: 0\n        };\n    }\n    /**\n     * Returns the token amount for a given market. The spot market precision is based on the token mint decimals.\n     * Positive if it is a deposit, negative if it is a borrow.\n     *\n     * @param marketIndex\n     */ getTokenAmount(marketIndex) {\n        const spotPosition = this.getSpotPosition(marketIndex);\n        if (spotPosition === undefined) {\n            return numericConstants_1.ZERO;\n        }\n        const spotMarket = this.driftClient.getSpotMarketAccount(marketIndex);\n        return (0, _1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarket, spotPosition.balanceType), spotPosition.balanceType);\n    }\n    getEmptyPosition(marketIndex) {\n        return {\n            baseAssetAmount: numericConstants_1.ZERO,\n            remainderBaseAssetAmount: 0,\n            lastCumulativeFundingRate: numericConstants_1.ZERO,\n            marketIndex,\n            quoteAssetAmount: numericConstants_1.ZERO,\n            quoteEntryAmount: numericConstants_1.ZERO,\n            quoteBreakEvenAmount: numericConstants_1.ZERO,\n            openOrders: 0,\n            openBids: numericConstants_1.ZERO,\n            openAsks: numericConstants_1.ZERO,\n            settledPnl: numericConstants_1.ZERO,\n            lpShares: numericConstants_1.ZERO,\n            lastBaseAssetAmountPerLp: numericConstants_1.ZERO,\n            lastQuoteAssetAmountPerLp: numericConstants_1.ZERO,\n            perLpBase: 0\n        };\n    }\n    getClonedPosition(position) {\n        const clonedPosition = Object.assign({}, position);\n        return clonedPosition;\n    }\n    getOrderForUserAccount(userAccount, orderId) {\n        return userAccount.orders.find((order)=>order.orderId === orderId);\n    }\n    /**\n     * @param orderId\n     * @returns Order\n     */ getOrder(orderId) {\n        const userAccount = this.getUserAccount();\n        return this.getOrderForUserAccount(userAccount, orderId);\n    }\n    getOrderAndSlot(orderId) {\n        const userAccount = this.getUserAccountAndSlot();\n        const order = this.getOrderForUserAccount(userAccount.data, orderId);\n        return {\n            data: order,\n            slot: userAccount.slot\n        };\n    }\n    getOrderByUserIdForUserAccount(userAccount, userOrderId) {\n        return userAccount.orders.find((order)=>order.userOrderId === userOrderId);\n    }\n    /**\n     * @param userOrderId\n     * @returns Order\n     */ getOrderByUserOrderId(userOrderId) {\n        const userAccount = this.getUserAccount();\n        return this.getOrderByUserIdForUserAccount(userAccount, userOrderId);\n    }\n    getOrderByUserOrderIdAndSlot(userOrderId) {\n        const userAccount = this.getUserAccountAndSlot();\n        const order = this.getOrderByUserIdForUserAccount(userAccount.data, userOrderId);\n        return {\n            data: order,\n            slot: userAccount.slot\n        };\n    }\n    getOpenOrdersForUserAccount(userAccount) {\n        return userAccount === null || userAccount === void 0 ? void 0 : userAccount.orders.filter((order)=>(0, types_1.isVariant)(order.status, \"open\"));\n    }\n    getOpenOrders() {\n        const userAccount = this.getUserAccount();\n        return this.getOpenOrdersForUserAccount(userAccount);\n    }\n    getOpenOrdersAndSlot() {\n        const userAccount = this.getUserAccountAndSlot();\n        const openOrders = this.getOpenOrdersForUserAccount(userAccount.data);\n        return {\n            data: openOrders,\n            slot: userAccount.slot\n        };\n    }\n    getUserAccountPublicKey() {\n        return this.userAccountPublicKey;\n    }\n    async exists() {\n        const userAccountRPCResponse = await this.driftClient.connection.getParsedAccountInfo(this.userAccountPublicKey);\n        return userAccountRPCResponse.value !== null;\n    }\n    /**\n     * calculates the total open bids/asks in a perp market (including lps)\n     * @returns : open bids\n     * @returns : open asks\n     */ getPerpBidAsks(marketIndex) {\n        const position = this.getPerpPosition(marketIndex);\n        const [lpOpenBids, lpOpenAsks] = this.getLPBidAsks(marketIndex);\n        const totalOpenBids = lpOpenBids.add(position.openBids);\n        const totalOpenAsks = lpOpenAsks.add(position.openAsks);\n        return [\n            totalOpenBids,\n            totalOpenAsks\n        ];\n    }\n    /**\n     * calculates the open bids and asks for an lp\n     * @returns : lp open bids\n     * @returns : lp open asks\n     */ getLPBidAsks(marketIndex) {\n        const position = this.getPerpPosition(marketIndex);\n        if (position === undefined || position.lpShares.eq(numericConstants_1.ZERO)) {\n            return [\n                numericConstants_1.ZERO,\n                numericConstants_1.ZERO\n            ];\n        }\n        const market = this.driftClient.getPerpMarketAccount(marketIndex);\n        const [marketOpenBids, marketOpenAsks] = (0, amm_1.calculateMarketOpenBidAsk)(market.amm.baseAssetReserve, market.amm.minBaseAssetReserve, market.amm.maxBaseAssetReserve, market.amm.orderStepSize);\n        const lpOpenBids = marketOpenBids.mul(position.lpShares).div(market.amm.sqrtK);\n        const lpOpenAsks = marketOpenAsks.mul(position.lpShares).div(market.amm.sqrtK);\n        return [\n            lpOpenBids,\n            lpOpenAsks\n        ];\n    }\n    /**\n     * calculates the market position if the lp position was settled\n     * @returns : the settled userPosition\n     * @returns : the dust base asset amount (ie, < stepsize)\n     * @returns : pnl from settle\n     */ getPerpPositionWithLPSettle(marketIndex, originalPosition, burnLpShares = false) {\n        var _a;\n        originalPosition = (_a = originalPosition !== null && originalPosition !== void 0 ? originalPosition : this.getPerpPosition(marketIndex)) !== null && _a !== void 0 ? _a : this.getEmptyPosition(marketIndex);\n        if (originalPosition.lpShares.eq(numericConstants_1.ZERO)) {\n            return [\n                originalPosition,\n                numericConstants_1.ZERO,\n                numericConstants_1.ZERO\n            ];\n        }\n        const position = this.getClonedPosition(originalPosition);\n        const market = this.driftClient.getPerpMarketAccount(position.marketIndex);\n        if (market.amm.perLpBase != position.perLpBase) {\n            // perLpBase = 1 => per 10 LP shares, perLpBase = -1 => per 0.1 LP shares\n            const expoDiff = market.amm.perLpBase - position.perLpBase;\n            const marketPerLpRebaseScalar = new _1.BN(10 ** Math.abs(expoDiff));\n            if (expoDiff > 0) {\n                position.lastBaseAssetAmountPerLp = position.lastBaseAssetAmountPerLp.mul(marketPerLpRebaseScalar);\n                position.lastQuoteAssetAmountPerLp = position.lastQuoteAssetAmountPerLp.mul(marketPerLpRebaseScalar);\n            } else {\n                position.lastBaseAssetAmountPerLp = position.lastBaseAssetAmountPerLp.div(marketPerLpRebaseScalar);\n                position.lastQuoteAssetAmountPerLp = position.lastQuoteAssetAmountPerLp.div(marketPerLpRebaseScalar);\n            }\n            position.perLpBase = position.perLpBase + expoDiff;\n        }\n        const nShares = position.lpShares;\n        // incorp unsettled funding on pre settled position\n        const quoteFundingPnl = (0, _1.calculatePositionFundingPNL)(market, position);\n        let baseUnit = numericConstants_1.AMM_RESERVE_PRECISION;\n        if (market.amm.perLpBase == position.perLpBase) {\n            if (position.perLpBase >= 0 && position.perLpBase <= numericConstants_1.AMM_RESERVE_PRECISION_EXP.toNumber()) {\n                const marketPerLpRebase = new _1.BN(10 ** market.amm.perLpBase);\n                baseUnit = baseUnit.mul(marketPerLpRebase);\n            } else if (position.perLpBase < 0 && position.perLpBase >= -numericConstants_1.AMM_RESERVE_PRECISION_EXP.toNumber()) {\n                const marketPerLpRebase = new _1.BN(10 ** Math.abs(market.amm.perLpBase));\n                baseUnit = baseUnit.div(marketPerLpRebase);\n            } else {\n                throw \"cannot calc\";\n            }\n        } else {\n            throw \"market.amm.perLpBase != position.perLpBase\";\n        }\n        const deltaBaa = market.amm.baseAssetAmountPerLp.sub(position.lastBaseAssetAmountPerLp).mul(nShares).div(baseUnit);\n        const deltaQaa = market.amm.quoteAssetAmountPerLp.sub(position.lastQuoteAssetAmountPerLp).mul(nShares).div(baseUnit);\n        function sign(v) {\n            return v.isNeg() ? new _1.BN(-1) : new _1.BN(1);\n        }\n        function standardize(amount, stepSize) {\n            const remainder = amount.abs().mod(stepSize).mul(sign(amount));\n            const standardizedAmount = amount.sub(remainder);\n            return [\n                standardizedAmount,\n                remainder\n            ];\n        }\n        const [standardizedBaa, remainderBaa] = standardize(deltaBaa, market.amm.orderStepSize);\n        position.remainderBaseAssetAmount += remainderBaa.toNumber();\n        if (Math.abs(position.remainderBaseAssetAmount) > market.amm.orderStepSize.toNumber()) {\n            const [newStandardizedBaa, newRemainderBaa] = standardize(new _1.BN(position.remainderBaseAssetAmount), market.amm.orderStepSize);\n            position.baseAssetAmount = position.baseAssetAmount.add(newStandardizedBaa);\n            position.remainderBaseAssetAmount = newRemainderBaa.toNumber();\n        }\n        let dustBaseAssetValue = numericConstants_1.ZERO;\n        if (burnLpShares && position.remainderBaseAssetAmount != 0) {\n            const oraclePriceData = this.driftClient.getOracleDataForPerpMarket(position.marketIndex);\n            dustBaseAssetValue = new _1.BN(Math.abs(position.remainderBaseAssetAmount)).mul(oraclePriceData.price).div(numericConstants_1.AMM_RESERVE_PRECISION).add(numericConstants_1.ONE);\n        }\n        let updateType;\n        if (position.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n            updateType = \"open\";\n        } else if (sign(position.baseAssetAmount).eq(sign(deltaBaa))) {\n            updateType = \"increase\";\n        } else if (position.baseAssetAmount.abs().gt(deltaBaa.abs())) {\n            updateType = \"reduce\";\n        } else if (position.baseAssetAmount.abs().eq(deltaBaa.abs())) {\n            updateType = \"close\";\n        } else {\n            updateType = \"flip\";\n        }\n        let newQuoteEntry;\n        let pnl;\n        if (updateType == \"open\" || updateType == \"increase\") {\n            newQuoteEntry = position.quoteEntryAmount.add(deltaQaa);\n            pnl = numericConstants_1.ZERO;\n        } else if (updateType == \"reduce\" || updateType == \"close\") {\n            newQuoteEntry = position.quoteEntryAmount.sub(position.quoteEntryAmount.mul(deltaBaa.abs()).div(position.baseAssetAmount.abs()));\n            pnl = position.quoteEntryAmount.sub(newQuoteEntry).add(deltaQaa);\n        } else {\n            newQuoteEntry = deltaQaa.sub(deltaQaa.mul(position.baseAssetAmount.abs()).div(deltaBaa.abs()));\n            pnl = position.quoteEntryAmount.add(deltaQaa.sub(newQuoteEntry));\n        }\n        position.quoteEntryAmount = newQuoteEntry;\n        position.baseAssetAmount = position.baseAssetAmount.add(standardizedBaa);\n        position.quoteAssetAmount = position.quoteAssetAmount.add(deltaQaa).add(quoteFundingPnl).sub(dustBaseAssetValue);\n        position.quoteBreakEvenAmount = position.quoteBreakEvenAmount.add(deltaQaa).add(quoteFundingPnl).sub(dustBaseAssetValue);\n        // update open bids/asks\n        const [marketOpenBids, marketOpenAsks] = (0, amm_1.calculateMarketOpenBidAsk)(market.amm.baseAssetReserve, market.amm.minBaseAssetReserve, market.amm.maxBaseAssetReserve, market.amm.orderStepSize);\n        const lpOpenBids = marketOpenBids.mul(position.lpShares).div(market.amm.sqrtK);\n        const lpOpenAsks = marketOpenAsks.mul(position.lpShares).div(market.amm.sqrtK);\n        position.openBids = lpOpenBids.add(position.openBids);\n        position.openAsks = lpOpenAsks.add(position.openAsks);\n        // eliminate counting funding on settled position\n        if (position.baseAssetAmount.gt(numericConstants_1.ZERO)) {\n            position.lastCumulativeFundingRate = market.amm.cumulativeFundingRateLong;\n        } else if (position.baseAssetAmount.lt(numericConstants_1.ZERO)) {\n            position.lastCumulativeFundingRate = market.amm.cumulativeFundingRateShort;\n        } else {\n            position.lastCumulativeFundingRate = numericConstants_1.ZERO;\n        }\n        return [\n            position,\n            remainderBaa,\n            pnl\n        ];\n    }\n    /**\n     * calculates Buying Power = free collateral / initial margin ratio\n     * @returns : Precision QUOTE_PRECISION\n     */ getPerpBuyingPower(marketIndex, collateralBuffer = numericConstants_1.ZERO) {\n        const perpPosition = this.getPerpPositionWithLPSettle(marketIndex, undefined, true)[0];\n        const worstCaseBaseAssetAmount = perpPosition ? (0, margin_1.calculateWorstCaseBaseAssetAmount)(perpPosition) : numericConstants_1.ZERO;\n        const freeCollateral = this.getFreeCollateral().sub(collateralBuffer);\n        return this.getPerpBuyingPowerFromFreeCollateralAndBaseAssetAmount(marketIndex, freeCollateral, worstCaseBaseAssetAmount);\n    }\n    getPerpBuyingPowerFromFreeCollateralAndBaseAssetAmount(marketIndex, freeCollateral, baseAssetAmount) {\n        const marginRatio = (0, _1.calculateMarketMarginRatio)(this.driftClient.getPerpMarketAccount(marketIndex), baseAssetAmount, \"Initial\");\n        return freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new _1.BN(marginRatio));\n    }\n    /**\n     * calculates Free Collateral = Total collateral - margin requirement\n     * @returns : Precision QUOTE_PRECISION\n     */ getFreeCollateral(marginCategory = \"Initial\") {\n        const totalCollateral = this.getTotalCollateral(marginCategory, true);\n        const marginRequirement = marginCategory === \"Initial\" ? this.getInitialMarginRequirement() : this.getMaintenanceMarginRequirement();\n        const freeCollateral = totalCollateral.sub(marginRequirement);\n        return freeCollateral.gte(numericConstants_1.ZERO) ? freeCollateral : numericConstants_1.ZERO;\n    }\n    /**\n     * @returns The margin requirement of a certain type (Initial or Maintenance) in USDC. : QUOTE_PRECISION\n     */ getMarginRequirement(marginCategory, liquidationBuffer, strict = false) {\n        return this.getTotalPerpPositionValue(marginCategory, liquidationBuffer, true, strict).add(this.getSpotMarketLiabilityValue(undefined, marginCategory, liquidationBuffer, true, strict));\n    }\n    /**\n     * @returns The initial margin requirement in USDC. : QUOTE_PRECISION\n     */ getInitialMarginRequirement() {\n        return this.getMarginRequirement(\"Initial\", undefined, true);\n    }\n    /**\n     * @returns The maintenance margin requirement in USDC. : QUOTE_PRECISION\n     */ getMaintenanceMarginRequirement(liquidationBuffer) {\n        return this.getMarginRequirement(\"Maintenance\", liquidationBuffer);\n    }\n    getActivePerpPositionsForUserAccount(userAccount) {\n        return userAccount.perpPositions.filter((pos)=>!pos.baseAssetAmount.eq(numericConstants_1.ZERO) || !pos.quoteAssetAmount.eq(numericConstants_1.ZERO) || !(pos.openOrders == 0) || !pos.lpShares.eq(numericConstants_1.ZERO));\n    }\n    getActivePerpPositions() {\n        const userAccount = this.getUserAccount();\n        return this.getActivePerpPositionsForUserAccount(userAccount);\n    }\n    getActivePerpPositionsAndSlot() {\n        const userAccount = this.getUserAccountAndSlot();\n        const positions = this.getActivePerpPositionsForUserAccount(userAccount.data);\n        return {\n            data: positions,\n            slot: userAccount.slot\n        };\n    }\n    getActiveSpotPositionsForUserAccount(userAccount) {\n        return userAccount.spotPositions.filter((pos)=>!(0, spotPosition_1.isSpotPositionAvailable)(pos));\n    }\n    getActiveSpotPositions() {\n        const userAccount = this.getUserAccount();\n        return this.getActiveSpotPositionsForUserAccount(userAccount);\n    }\n    getActiveSpotPositionsAndSlot() {\n        const userAccount = this.getUserAccountAndSlot();\n        const positions = this.getActiveSpotPositionsForUserAccount(userAccount.data);\n        return {\n            data: positions,\n            slot: userAccount.slot\n        };\n    }\n    /**\n     * calculates unrealized position price pnl\n     * @returns : Precision QUOTE_PRECISION\n     */ getUnrealizedPNL(withFunding, marketIndex, withWeightMarginCategory, strict = false) {\n        return this.getActivePerpPositions().filter((pos)=>marketIndex ? pos.marketIndex === marketIndex : true).reduce((unrealizedPnl, perpPosition)=>{\n            const market = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n            const oraclePriceData = this.getOracleDataForPerpMarket(market.marketIndex);\n            const quoteSpotMarket = this.driftClient.getSpotMarketAccount(market.quoteSpotMarketIndex);\n            const quoteOraclePriceData = this.getOracleDataForSpotMarket(market.quoteSpotMarketIndex);\n            if (perpPosition.lpShares.gt(numericConstants_1.ZERO)) {\n                perpPosition = this.getPerpPositionWithLPSettle(perpPosition.marketIndex, undefined, !!withWeightMarginCategory)[0];\n            }\n            let positionUnrealizedPnl = (0, _1.calculatePositionPNL)(market, perpPosition, withFunding, oraclePriceData);\n            let quotePrice;\n            if (strict && positionUnrealizedPnl.gt(numericConstants_1.ZERO)) {\n                quotePrice = _1.BN.min(quoteOraclePriceData.price, quoteSpotMarket.historicalOracleData.lastOraclePriceTwap5Min);\n            } else if (strict && positionUnrealizedPnl.lt(numericConstants_1.ZERO)) {\n                quotePrice = _1.BN.max(quoteOraclePriceData.price, quoteSpotMarket.historicalOracleData.lastOraclePriceTwap5Min);\n            } else {\n                quotePrice = quoteOraclePriceData.price;\n            }\n            positionUnrealizedPnl = positionUnrealizedPnl.mul(quotePrice).div(numericConstants_1.PRICE_PRECISION);\n            if (withWeightMarginCategory !== undefined) {\n                if (positionUnrealizedPnl.gt(numericConstants_1.ZERO)) {\n                    positionUnrealizedPnl = positionUnrealizedPnl.mul((0, _1.calculateUnrealizedAssetWeight)(market, quoteSpotMarket, positionUnrealizedPnl, withWeightMarginCategory, oraclePriceData)).div(new _1.BN(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION));\n                }\n            }\n            return unrealizedPnl.add(positionUnrealizedPnl);\n        }, numericConstants_1.ZERO);\n    }\n    /**\n     * calculates unrealized funding payment pnl\n     * @returns : Precision QUOTE_PRECISION\n     */ getUnrealizedFundingPNL(marketIndex) {\n        return this.getUserAccount().perpPositions.filter((pos)=>marketIndex ? pos.marketIndex === marketIndex : true).reduce((pnl, perpPosition)=>{\n            const market = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n            return pnl.add((0, _1.calculatePositionFundingPNL)(market, perpPosition));\n        }, numericConstants_1.ZERO);\n    }\n    getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict = false, now) {\n        now = now || new _1.BN(new Date().getTime() / 1000);\n        let netQuoteValue = numericConstants_1.ZERO;\n        let totalAssetValue = numericConstants_1.ZERO;\n        let totalLiabilityValue = numericConstants_1.ZERO;\n        for (const spotPosition of this.getUserAccount().spotPositions){\n            const countForBase = marketIndex === undefined || spotPosition.marketIndex === marketIndex;\n            const countForQuote = marketIndex === undefined || marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX || includeOpenOrders && spotPosition.openOrders !== 0;\n            if ((0, spotPosition_1.isSpotPositionAvailable)(spotPosition) || !countForBase && !countForQuote) {\n                continue;\n            }\n            const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n            const oraclePriceData = this.getOracleDataForSpotMarket(spotPosition.marketIndex);\n            if (spotPosition.marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX && countForQuote) {\n                const tokenAmount = (0, _1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType), spotPosition.balanceType);\n                if ((0, types_1.isVariant)(spotPosition.balanceType, \"borrow\")) {\n                    const weightedTokenValue = this.getSpotLiabilityValue(tokenAmount, oraclePriceData, spotMarketAccount, marginCategory, liquidationBuffer, strict, now).abs();\n                    netQuoteValue = netQuoteValue.sub(weightedTokenValue);\n                } else {\n                    const weightedTokenValue = this.getSpotAssetValue(tokenAmount, oraclePriceData, spotMarketAccount, marginCategory, strict, now);\n                    netQuoteValue = netQuoteValue.add(weightedTokenValue);\n                }\n                continue;\n            }\n            if (!includeOpenOrders && countForBase) {\n                if ((0, types_1.isVariant)(spotPosition.balanceType, \"borrow\")) {\n                    const tokenAmount = (0, _1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType), _1.SpotBalanceType.BORROW);\n                    const liabilityValue = this.getSpotLiabilityValue(tokenAmount, oraclePriceData, spotMarketAccount, marginCategory, liquidationBuffer, strict, now).abs();\n                    totalLiabilityValue = totalLiabilityValue.add(liabilityValue);\n                    continue;\n                } else {\n                    const tokenAmount = (0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType);\n                    const assetValue = this.getSpotAssetValue(tokenAmount, oraclePriceData, spotMarketAccount, marginCategory, strict, now);\n                    totalAssetValue = totalAssetValue.add(assetValue);\n                    continue;\n                }\n            }\n            const [worstCaseTokenAmount, worstCaseQuoteTokenAmount] = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, this.getOracleDataForSpotMarket(spotPosition.marketIndex));\n            if (worstCaseTokenAmount.gt(numericConstants_1.ZERO) && countForBase) {\n                const baseAssetValue = this.getSpotAssetValue(worstCaseTokenAmount, oraclePriceData, spotMarketAccount, marginCategory, strict, now);\n                totalAssetValue = totalAssetValue.add(baseAssetValue);\n            }\n            if (worstCaseTokenAmount.lt(numericConstants_1.ZERO) && countForBase) {\n                const baseLiabilityValue = this.getSpotLiabilityValue(worstCaseTokenAmount, oraclePriceData, spotMarketAccount, marginCategory, liquidationBuffer, strict, now).abs();\n                totalLiabilityValue = totalLiabilityValue.add(baseLiabilityValue);\n            }\n            if (worstCaseQuoteTokenAmount.gt(numericConstants_1.ZERO) && countForQuote) {\n                netQuoteValue = netQuoteValue.add(worstCaseQuoteTokenAmount);\n            }\n            if (worstCaseQuoteTokenAmount.lt(numericConstants_1.ZERO) && countForQuote) {\n                let weight = numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION;\n                if (marginCategory === \"Initial\") {\n                    weight = _1.BN.max(weight, new _1.BN(this.getUserAccount().maxMarginRatio));\n                }\n                const weightedTokenValue = worstCaseQuoteTokenAmount.abs().mul(weight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n                netQuoteValue = netQuoteValue.sub(weightedTokenValue);\n            }\n            totalLiabilityValue = totalLiabilityValue.add(new _1.BN(spotPosition.openOrders).mul(numericConstants_1.OPEN_ORDER_MARGIN_REQUIREMENT));\n        }\n        if (marketIndex === undefined || marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX) {\n            if (netQuoteValue.gt(numericConstants_1.ZERO)) {\n                totalAssetValue = totalAssetValue.add(netQuoteValue);\n            } else {\n                totalLiabilityValue = totalLiabilityValue.add(netQuoteValue.abs());\n            }\n        }\n        return {\n            totalAssetValue,\n            totalLiabilityValue\n        };\n    }\n    getSpotMarketLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict = false, now) {\n        const { totalLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict, now);\n        return totalLiabilityValue;\n    }\n    getSpotLiabilityValue(tokenAmount, oraclePriceData, spotMarketAccount, marginCategory, liquidationBuffer, strict = false, now) {\n        let liabilityValue = null;\n        if (strict) {\n            const estOracleTwap = (0, oracles_1.calculateLiveOracleTwap)(spotMarketAccount.historicalOracleData, oraclePriceData, now, numericConstants_1.FIVE_MINUTE // 5MIN\n            );\n            liabilityValue = (0, _1.getStrictTokenValue)(tokenAmount, spotMarketAccount.decimals, oraclePriceData, estOracleTwap);\n        } else {\n            liabilityValue = (0, _1.getTokenValue)(tokenAmount, spotMarketAccount.decimals, oraclePriceData);\n        }\n        if (marginCategory !== undefined) {\n            let weight = (0, spotBalance_1.calculateLiabilityWeight)(tokenAmount, spotMarketAccount, marginCategory);\n            if (marginCategory === \"Initial\") {\n                weight = _1.BN.max(weight, new _1.BN(this.getUserAccount().maxMarginRatio));\n            }\n            if (liquidationBuffer !== undefined) {\n                weight = weight.add(liquidationBuffer);\n            }\n            liabilityValue = liabilityValue.mul(weight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n        }\n        return liabilityValue;\n    }\n    getSpotMarketAssetValue(marketIndex, marginCategory, includeOpenOrders, strict = false, now) {\n        const { totalAssetValue } = this.getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, undefined, includeOpenOrders, strict, now);\n        return totalAssetValue;\n    }\n    getSpotAssetValue(tokenAmount, oraclePriceData, spotMarketAccount, marginCategory, strict = false, now) {\n        let assetValue = null;\n        if (strict) {\n            const estOracleTwap = (0, oracles_1.calculateLiveOracleTwap)(spotMarketAccount.historicalOracleData, oraclePriceData, now, numericConstants_1.FIVE_MINUTE // 5MIN\n            );\n            assetValue = (0, _1.getStrictTokenValue)(tokenAmount, spotMarketAccount.decimals, oraclePriceData, estOracleTwap);\n        } else {\n            assetValue = (0, _1.getTokenValue)(tokenAmount, spotMarketAccount.decimals, oraclePriceData);\n        }\n        if (marginCategory !== undefined) {\n            const weight = (0, spotBalance_1.calculateAssetWeight)(tokenAmount, spotMarketAccount, marginCategory);\n            assetValue = assetValue.mul(weight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n        }\n        return assetValue;\n    }\n    getSpotPositionValue(marketIndex, marginCategory, includeOpenOrders, strict = false, now) {\n        const { totalAssetValue, totalLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue(marketIndex, marginCategory, undefined, includeOpenOrders, strict, now);\n        return totalAssetValue.sub(totalLiabilityValue);\n    }\n    getNetSpotMarketValue(withWeightMarginCategory) {\n        const { totalAssetValue, totalLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue(undefined, withWeightMarginCategory);\n        return totalAssetValue.sub(totalLiabilityValue);\n    }\n    /**\n     * calculates TotalCollateral: collateral + unrealized pnl\n     * @returns : Precision QUOTE_PRECISION\n     */ getTotalCollateral(marginCategory = \"Initial\", strict = false) {\n        return this.getSpotMarketAssetValue(undefined, marginCategory, true, strict).add(this.getUnrealizedPNL(true, undefined, marginCategory, strict));\n    }\n    /**\n     * calculates User Health by comparing total collateral and maint. margin requirement\n     * @returns : number (value from [0, 100])\n     */ getHealth() {\n        const userAccount = this.getUserAccount();\n        if ((0, types_1.isVariant)(userAccount.status, \"beingLiquidated\") || (0, types_1.isVariant)(userAccount.status, \"bankrupt\")) {\n            return 0;\n        }\n        const totalCollateral = this.getTotalCollateral(\"Maintenance\");\n        const maintenanceMarginReq = this.getMaintenanceMarginRequirement();\n        let health;\n        if (maintenanceMarginReq.eq(numericConstants_1.ZERO) && totalCollateral.gte(numericConstants_1.ZERO)) {\n            health = 100;\n        } else if (totalCollateral.lte(numericConstants_1.ZERO)) {\n            health = 0;\n        } else {\n            health = Math.round(Math.min(100, Math.max(0, (1 - maintenanceMarginReq.toNumber() / totalCollateral.toNumber()) * 100)));\n        }\n        return health;\n    }\n    calculateWeightedPerpPositionValue(perpPosition, marginCategory, liquidationBuffer, includeOpenOrders, strict = false) {\n        const market = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n        if (perpPosition.lpShares.gt(numericConstants_1.ZERO)) {\n            // is an lp, clone so we dont mutate the position\n            perpPosition = this.getPerpPositionWithLPSettle(market.marketIndex, this.getClonedPosition(perpPosition), !!marginCategory)[0];\n        }\n        let valuationPrice = this.getOracleDataForPerpMarket(market.marketIndex).price;\n        if ((0, types_1.isVariant)(market.status, \"settlement\")) {\n            valuationPrice = market.expiryPrice;\n        }\n        const baseAssetAmount = includeOpenOrders ? (0, margin_1.calculateWorstCaseBaseAssetAmount)(perpPosition) : perpPosition.baseAssetAmount;\n        let baseAssetValue = baseAssetAmount.abs().mul(valuationPrice).div(numericConstants_1.BASE_PRECISION);\n        if (marginCategory) {\n            let marginRatio = new _1.BN((0, _1.calculateMarketMarginRatio)(market, baseAssetAmount.abs(), marginCategory));\n            if (marginCategory === \"Initial\") {\n                marginRatio = _1.BN.max(marginRatio, new _1.BN(this.getUserAccount().maxMarginRatio));\n            }\n            if (liquidationBuffer !== undefined) {\n                marginRatio = marginRatio.add(liquidationBuffer);\n            }\n            if ((0, types_1.isVariant)(market.status, \"settlement\")) {\n                marginRatio = numericConstants_1.ZERO;\n            }\n            const quoteSpotMarket = this.driftClient.getSpotMarketAccount(market.quoteSpotMarketIndex);\n            const quoteOraclePriceData = this.driftClient.getOraclePriceDataAndSlot(quoteSpotMarket.oracle).data;\n            let quotePrice;\n            if (strict) {\n                quotePrice = _1.BN.max(quoteOraclePriceData.price, quoteSpotMarket.historicalOracleData.lastOraclePriceTwap5Min);\n            } else {\n                quotePrice = quoteOraclePriceData.price;\n            }\n            baseAssetValue = baseAssetValue.mul(quotePrice).div(numericConstants_1.PRICE_PRECISION).mul(marginRatio).div(numericConstants_1.MARGIN_PRECISION);\n            if (includeOpenOrders) {\n                baseAssetValue = baseAssetValue.add(new _1.BN(perpPosition.openOrders).mul(numericConstants_1.OPEN_ORDER_MARGIN_REQUIREMENT));\n                if (perpPosition.lpShares.gt(numericConstants_1.ZERO)) {\n                    baseAssetValue = baseAssetValue.add(_1.BN.max(numericConstants_1.QUOTE_PRECISION, valuationPrice.mul(market.amm.orderStepSize).mul(numericConstants_1.QUOTE_PRECISION).div(numericConstants_1.AMM_RESERVE_PRECISION).div(numericConstants_1.PRICE_PRECISION)));\n                }\n            }\n        }\n        return baseAssetValue;\n    }\n    /**\n     * calculates position value of a single perp market in margin system\n     * @returns : Precision QUOTE_PRECISION\n     */ getPerpMarketLiabilityValue(marketIndex, marginCategory, liquidationBuffer, includeOpenOrders, strict = false) {\n        const perpPosition = this.getPerpPosition(marketIndex);\n        return this.calculateWeightedPerpPositionValue(perpPosition, marginCategory, liquidationBuffer, includeOpenOrders, strict);\n    }\n    /**\n     * calculates sum of position value across all positions in margin system\n     * @returns : Precision QUOTE_PRECISION\n     */ getTotalPerpPositionValue(marginCategory, liquidationBuffer, includeOpenOrders, strict = false) {\n        return this.getActivePerpPositions().reduce((totalPerpValue, perpPosition)=>{\n            const baseAssetValue = this.calculateWeightedPerpPositionValue(perpPosition, marginCategory, liquidationBuffer, includeOpenOrders, strict);\n            return totalPerpValue.add(baseAssetValue);\n        }, numericConstants_1.ZERO);\n    }\n    /**\n     * calculates position value in margin system\n     * @returns : Precision QUOTE_PRECISION\n     */ getPerpPositionValue(marketIndex, oraclePriceData, includeOpenOrders = false) {\n        const userPosition = this.getPerpPositionWithLPSettle(marketIndex)[0] || this.getEmptyPosition(marketIndex);\n        const market = this.driftClient.getPerpMarketAccount(userPosition.marketIndex);\n        return (0, margin_1.calculateBaseAssetValueWithOracle)(market, userPosition, oraclePriceData, includeOpenOrders);\n    }\n    getPositionSide(currentPosition) {\n        if (currentPosition.baseAssetAmount.gt(numericConstants_1.ZERO)) {\n            return _1.PositionDirection.LONG;\n        } else if (currentPosition.baseAssetAmount.lt(numericConstants_1.ZERO)) {\n            return _1.PositionDirection.SHORT;\n        } else {\n            return undefined;\n        }\n    }\n    /**\n     * calculates average exit price (optionally for closing up to 100% of position)\n     * @returns : Precision PRICE_PRECISION\n     */ getPositionEstimatedExitPriceAndPnl(position, amountToClose, useAMMClose = false) {\n        const market = this.driftClient.getPerpMarketAccount(position.marketIndex);\n        const entryPrice = (0, position_1.calculateEntryPrice)(position);\n        const oraclePriceData = this.getOracleDataForPerpMarket(position.marketIndex);\n        if (amountToClose) {\n            if (amountToClose.eq(numericConstants_1.ZERO)) {\n                return [\n                    (0, _1.calculateReservePrice)(market, oraclePriceData),\n                    numericConstants_1.ZERO\n                ];\n            }\n            position = {\n                baseAssetAmount: amountToClose,\n                lastCumulativeFundingRate: position.lastCumulativeFundingRate,\n                marketIndex: position.marketIndex,\n                quoteAssetAmount: position.quoteAssetAmount\n            };\n        }\n        let baseAssetValue;\n        if (useAMMClose) {\n            baseAssetValue = (0, _1.calculateBaseAssetValue)(market, position, oraclePriceData);\n        } else {\n            baseAssetValue = (0, margin_1.calculateBaseAssetValueWithOracle)(market, position, oraclePriceData);\n        }\n        if (position.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n            return [\n                numericConstants_1.ZERO,\n                numericConstants_1.ZERO\n            ];\n        }\n        const exitPrice = baseAssetValue.mul(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO).mul(numericConstants_1.PRICE_PRECISION).div(position.baseAssetAmount.abs());\n        const pnlPerBase = exitPrice.sub(entryPrice);\n        const pnl = pnlPerBase.mul(position.baseAssetAmount).div(numericConstants_1.PRICE_PRECISION).div(numericConstants_1.AMM_TO_QUOTE_PRECISION_RATIO);\n        return [\n            exitPrice,\n            pnl\n        ];\n    }\n    /**\n     * calculates current user leverage which is (total liability size) / (net asset value)\n     * @returns : Precision TEN_THOUSAND\n     */ getLeverage() {\n        return this.calculateLeverageFromComponents(this.getLeverageComponents());\n    }\n    calculateLeverageFromComponents({ perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue }) {\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        return totalLiabilityValue.mul(numericConstants_1.TEN_THOUSAND).div(netAssetValue);\n    }\n    getLeverageComponents() {\n        const perpLiability = this.getTotalPerpPositionValue(undefined, undefined, true);\n        const perpPnl = this.getUnrealizedPNL(true);\n        const { totalAssetValue: spotAssetValue, totalLiabilityValue: spotLiabilityValue } = this.getSpotMarketAssetAndLiabilityValue(undefined, undefined, undefined, true);\n        return {\n            perpLiabilityValue: perpLiability,\n            perpPnl,\n            spotAssetValue,\n            spotLiabilityValue\n        };\n    }\n    getTotalLiabilityValue(marginCategory) {\n        return this.getTotalPerpPositionValue(marginCategory, undefined, true).add(this.getSpotMarketLiabilityValue(undefined, marginCategory, undefined, true));\n    }\n    getTotalAssetValue(marginCategory) {\n        return this.getSpotMarketAssetValue(undefined, marginCategory, true).add(this.getUnrealizedPNL(true, undefined, marginCategory));\n    }\n    /**\n     * Calculates the all time P&L of the user.\n     *\n     * Net withdraws + Net spot market value + Net unrealized P&L -\n     */ getTotalAllTimePnl() {\n        const netBankValue = this.getNetSpotMarketValue();\n        const unrealizedPnl = this.getUnrealizedPNL(true, undefined, undefined);\n        const netUsdValue = netBankValue.add(unrealizedPnl);\n        const totalDeposits = this.getUserAccount().totalDeposits;\n        const totalWithdraws = this.getUserAccount().totalWithdraws;\n        const totalPnl = netUsdValue.add(totalWithdraws).sub(totalDeposits);\n        return totalPnl;\n    }\n    /**\n     * calculates max allowable leverage exceeding hitting requirement category\n     * for large sizes where imf factor activates, result is a lower bound\n     * @param marginCategory {Initial, Maintenance}\n     * @param isLp if calculating max leveraging for adding lp, need to add buffer\n     * @returns : Precision TEN_THOUSAND\n     */ getMaxLeverageForPerp(perpMarketIndex, marginCategory = \"Initial\", isLp = false) {\n        const market = this.driftClient.getPerpMarketAccount(perpMarketIndex);\n        const marketPrice = this.driftClient.getOracleDataForPerpMarket(perpMarketIndex).price;\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const lpBuffer = isLp ? marketPrice.mul(market.amm.orderStepSize).div(numericConstants_1.AMM_RESERVE_PRECISION) : numericConstants_1.ZERO;\n        const freeCollateral = this.getFreeCollateral().sub(lpBuffer);\n        let rawMarginRatio;\n        switch(marginCategory){\n            case \"Initial\":\n                rawMarginRatio = market.marginRatioInitial;\n                break;\n            case \"Maintenance\":\n                rawMarginRatio = market.marginRatioMaintenance;\n                break;\n            default:\n                rawMarginRatio = market.marginRatioInitial;\n                break;\n        }\n        // absolute max fesible size (upper bound)\n        const maxSize = _1.BN.max(numericConstants_1.ZERO, freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new _1.BN(rawMarginRatio)).mul(numericConstants_1.PRICE_PRECISION).div(marketPrice));\n        // margin ratio incorporting upper bound on size\n        let marginRatio = (0, _1.calculateMarketMarginRatio)(market, maxSize, marginCategory);\n        // use more fesible size since imf factor activated\n        let attempts = 0;\n        while(marginRatio > rawMarginRatio + 1e-4 && attempts < 10){\n            // more fesible size (upper bound)\n            const targetSize = _1.BN.max(numericConstants_1.ZERO, freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new _1.BN(marginRatio)).mul(numericConstants_1.PRICE_PRECISION).div(marketPrice));\n            // margin ratio incorporting more fesible target size\n            marginRatio = (0, _1.calculateMarketMarginRatio)(market, targetSize, marginCategory);\n            attempts += 1;\n        }\n        // how much more liabilities can be opened w remaining free collateral\n        const additionalLiabilities = freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new _1.BN(marginRatio));\n        return totalLiabilityValue.add(additionalLiabilities).mul(numericConstants_1.TEN_THOUSAND).div(netAssetValue);\n    }\n    /**\n     * calculates max allowable leverage exceeding hitting requirement category\n     * @param spotMarketIndex\n     * @param direction\n     * @returns : Precision TEN_THOUSAND\n     */ getMaxLeverageForSpot(spotMarketIndex, direction) {\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        const currentQuoteAssetValue = this.getSpotMarketAssetValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        const currentQuoteLiabilityValue = this.getSpotMarketLiabilityValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        const currentQuoteValue = currentQuoteAssetValue.sub(currentQuoteLiabilityValue);\n        const currentSpotMarketAssetValue = this.getSpotMarketAssetValue(spotMarketIndex);\n        const currentSpotMarketLiabilityValue = this.getSpotMarketLiabilityValue(spotMarketIndex);\n        const currentSpotMarketNetValue = currentSpotMarketAssetValue.sub(currentSpotMarketLiabilityValue);\n        const tradeQuoteAmount = this.getMaxTradeSizeUSDCForSpot(spotMarketIndex, direction, currentQuoteAssetValue, currentSpotMarketNetValue);\n        let assetValueToAdd = numericConstants_1.ZERO;\n        let liabilityValueToAdd = numericConstants_1.ZERO;\n        const newQuoteNetValue = (0, types_1.isVariant)(direction, \"short\") ? currentQuoteValue.add(tradeQuoteAmount) : currentQuoteValue.sub(tradeQuoteAmount);\n        const newQuoteAssetValue = _1.BN.max(newQuoteNetValue, numericConstants_1.ZERO);\n        const newQuoteLiabilityValue = _1.BN.min(newQuoteNetValue, numericConstants_1.ZERO).abs();\n        assetValueToAdd = assetValueToAdd.add(newQuoteAssetValue.sub(currentQuoteAssetValue));\n        liabilityValueToAdd = liabilityValueToAdd.add(newQuoteLiabilityValue.sub(currentQuoteLiabilityValue));\n        const newSpotMarketNetValue = (0, types_1.isVariant)(direction, \"long\") ? currentSpotMarketNetValue.add(tradeQuoteAmount) : currentSpotMarketNetValue.sub(tradeQuoteAmount);\n        const newSpotMarketAssetValue = _1.BN.max(newSpotMarketNetValue, numericConstants_1.ZERO);\n        const newSpotMarketLiabilityValue = _1.BN.min(newSpotMarketNetValue, numericConstants_1.ZERO).abs();\n        assetValueToAdd = assetValueToAdd.add(newSpotMarketAssetValue.sub(currentSpotMarketAssetValue));\n        liabilityValueToAdd = liabilityValueToAdd.add(newSpotMarketLiabilityValue.sub(currentSpotMarketLiabilityValue));\n        const finalTotalAssetValue = totalAssetValue.add(assetValueToAdd);\n        const finalTotalSpotLiability = spotLiabilityValue.add(liabilityValueToAdd);\n        const finalTotalLiabilityValue = totalLiabilityValue.add(liabilityValueToAdd);\n        const finalNetAssetValue = finalTotalAssetValue.sub(finalTotalSpotLiability);\n        return finalTotalLiabilityValue.mul(numericConstants_1.TEN_THOUSAND).div(finalNetAssetValue);\n    }\n    /**\n     * calculates margin ratio: 1 / leverage\n     * @returns : Precision TEN_THOUSAND\n     */ getMarginRatio() {\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const totalLiabilityValue = perpLiabilityValue.add(spotLiabilityValue);\n        const totalAssetValue = spotAssetValue.add(perpPnl);\n        if (totalLiabilityValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.BN_MAX;\n        }\n        const netAssetValue = totalAssetValue.sub(spotLiabilityValue);\n        return netAssetValue.mul(numericConstants_1.TEN_THOUSAND).div(totalLiabilityValue);\n    }\n    canBeLiquidated() {\n        const totalCollateral = this.getTotalCollateral(\"Maintenance\");\n        // if user being liq'd, can continue to be liq'd until total collateral above the margin requirement plus buffer\n        let liquidationBuffer = undefined;\n        if (this.isBeingLiquidated()) {\n            liquidationBuffer = new _1.BN(this.driftClient.getStateAccount().liquidationMarginBufferRatio);\n        }\n        const marginRequirement = this.getMaintenanceMarginRequirement(liquidationBuffer);\n        const canBeLiquidated = totalCollateral.lt(marginRequirement);\n        return {\n            canBeLiquidated,\n            marginRequirement,\n            totalCollateral\n        };\n    }\n    isBeingLiquidated() {\n        return (0, types_1.isOneOfVariant)(this.getUserAccount().status, [\n            \"beingLiquidated\",\n            \"bankrupt\"\n        ]);\n    }\n    isBankrupt() {\n        return (0, types_1.isVariant)(this.getUserAccount().status, \"bankrupt\");\n    }\n    /**\n     * Checks if any user position cumulative funding differs from respective market cumulative funding\n     * @returns\n     */ needsToSettleFundingPayment() {\n        for (const userPosition of this.getUserAccount().perpPositions){\n            if (userPosition.baseAssetAmount.eq(numericConstants_1.ZERO)) {\n                continue;\n            }\n            const market = this.driftClient.getPerpMarketAccount(userPosition.marketIndex);\n            if (market.amm.cumulativeFundingRateLong.eq(userPosition.lastCumulativeFundingRate) || market.amm.cumulativeFundingRateShort.eq(userPosition.lastCumulativeFundingRate)) {\n                continue;\n            }\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Calculate the liquidation price of a spot position\n     * @param marketIndex\n     * @returns Precision : PRICE_PRECISION\n     */ spotLiquidationPrice(marketIndex, positionBaseSizeChange = numericConstants_1.ZERO) {\n        const currentSpotPosition = this.getSpotPosition(marketIndex);\n        if (!currentSpotPosition) {\n            return new _1.BN(-1);\n        }\n        const totalCollateral = this.getTotalCollateral(\"Maintenance\");\n        const maintenanceMarginRequirement = this.getMaintenanceMarginRequirement();\n        const freeCollateral = _1.BN.max(numericConstants_1.ZERO, totalCollateral.sub(maintenanceMarginRequirement));\n        const market = this.driftClient.getSpotMarketAccount(marketIndex);\n        let signedTokenAmount = (0, _1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(currentSpotPosition.scaledBalance, market, currentSpotPosition.balanceType), currentSpotPosition.balanceType);\n        signedTokenAmount = signedTokenAmount.add(positionBaseSizeChange);\n        if (signedTokenAmount.eq(numericConstants_1.ZERO)) {\n            return new _1.BN(-1);\n        }\n        let freeCollateralDelta = this.calculateFreeCollateralDeltaForSpot(market, signedTokenAmount);\n        const oracle = market.oracle;\n        const perpMarketWithSameOracle = this.driftClient.getPerpMarketAccounts().find((market)=>market.amm.oracle.equals(oracle));\n        if (perpMarketWithSameOracle) {\n            const perpPosition = this.getPerpPositionWithLPSettle(perpMarketWithSameOracle.marketIndex, undefined, true)[0];\n            if (perpPosition) {\n                const freeCollateralDeltaForPerp = this.calculateFreeCollateralDeltaForPerp(perpMarketWithSameOracle, perpPosition, numericConstants_1.ZERO);\n                freeCollateralDelta = freeCollateralDelta.add(freeCollateralDeltaForPerp || numericConstants_1.ZERO);\n            }\n        }\n        if (freeCollateralDelta.eq(numericConstants_1.ZERO)) {\n            return new _1.BN(-1);\n        }\n        const oraclePrice = this.driftClient.getOracleDataForSpotMarket(marketIndex).price;\n        const liqPriceDelta = freeCollateral.mul(numericConstants_1.QUOTE_PRECISION).div(freeCollateralDelta);\n        const liqPrice = oraclePrice.sub(liqPriceDelta);\n        if (liqPrice.lt(numericConstants_1.ZERO)) {\n            return new _1.BN(-1);\n        }\n        return liqPrice;\n    }\n    /**\n     * Calculate the liquidation price of a perp position, with optional parameter to calculate the liquidation price after a trade\n     * @param marketIndex\n     * @param positionBaseSizeChange // change in position size to calculate liquidation price for : Precision 10^13\n     * @returns Precision : PRICE_PRECISION\n     */ liquidationPrice(marketIndex, positionBaseSizeChange = numericConstants_1.ZERO) {\n        const totalCollateral = this.getTotalCollateral(\"Maintenance\");\n        const maintenanceMarginRequirement = this.getMaintenanceMarginRequirement();\n        const freeCollateral = _1.BN.max(numericConstants_1.ZERO, totalCollateral.sub(maintenanceMarginRequirement));\n        const market = this.driftClient.getPerpMarketAccount(marketIndex);\n        const currentPerpPosition = this.getPerpPositionWithLPSettle(marketIndex, undefined, true)[0] || this.getEmptyPosition(marketIndex);\n        let freeCollateralDelta = this.calculateFreeCollateralDeltaForPerp(market, currentPerpPosition, positionBaseSizeChange);\n        if (!freeCollateralDelta) {\n            return new _1.BN(-1);\n        }\n        const oracle = this.driftClient.getPerpMarketAccount(marketIndex).amm.oracle;\n        const spotMarketWithSameOracle = this.driftClient.getSpotMarketAccounts().find((market)=>market.oracle.equals(oracle));\n        if (spotMarketWithSameOracle) {\n            const spotPosition = this.getSpotPosition(spotMarketWithSameOracle.marketIndex);\n            if (spotPosition) {\n                const signedTokenAmount = (0, _1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarketWithSameOracle, spotPosition.balanceType), spotPosition.balanceType);\n                const spotFreeCollateralDelta = this.calculateFreeCollateralDeltaForSpot(spotMarketWithSameOracle, signedTokenAmount);\n                freeCollateralDelta = freeCollateralDelta.add(spotFreeCollateralDelta || numericConstants_1.ZERO);\n            }\n        }\n        if (freeCollateralDelta.eq(numericConstants_1.ZERO)) {\n            return new _1.BN(-1);\n        }\n        const oraclePrice = this.driftClient.getOracleDataForPerpMarket(marketIndex).price;\n        const liqPriceDelta = freeCollateral.mul(numericConstants_1.QUOTE_PRECISION).div(freeCollateralDelta);\n        const liqPrice = oraclePrice.sub(liqPriceDelta);\n        if (liqPrice.lt(numericConstants_1.ZERO)) {\n            return new _1.BN(-1);\n        }\n        return liqPrice;\n    }\n    calculateFreeCollateralDeltaForPerp(market, perpPosition, positionBaseSizeChange) {\n        const currentBaseAssetAmount = perpPosition.baseAssetAmount;\n        const worstCaseBaseAssetAmount = (0, margin_1.calculateWorstCaseBaseAssetAmount)(perpPosition);\n        const orderBaseAssetAmount = worstCaseBaseAssetAmount.sub(currentBaseAssetAmount);\n        const proposedBaseAssetAmount = currentBaseAssetAmount.add(positionBaseSizeChange);\n        const proposedWorstCaseBaseAssetAmount = worstCaseBaseAssetAmount.add(positionBaseSizeChange);\n        const marginRatio = (0, _1.calculateMarketMarginRatio)(market, proposedWorstCaseBaseAssetAmount.abs(), \"Maintenance\");\n        const marginRatioQuotePrecision = new _1.BN(marginRatio).mul(numericConstants_1.QUOTE_PRECISION).div(numericConstants_1.MARGIN_PRECISION);\n        if (proposedWorstCaseBaseAssetAmount.eq(numericConstants_1.ZERO)) {\n            return undefined;\n        }\n        let freeCollateralDelta = numericConstants_1.ZERO;\n        if (proposedBaseAssetAmount.gt(numericConstants_1.ZERO)) {\n            freeCollateralDelta = numericConstants_1.QUOTE_PRECISION.sub(marginRatioQuotePrecision).mul(proposedBaseAssetAmount).div(numericConstants_1.BASE_PRECISION);\n        } else {\n            freeCollateralDelta = numericConstants_1.QUOTE_PRECISION.neg().sub(marginRatioQuotePrecision).mul(proposedBaseAssetAmount.abs()).div(numericConstants_1.BASE_PRECISION);\n        }\n        if (!orderBaseAssetAmount.eq(numericConstants_1.ZERO)) {\n            freeCollateralDelta = freeCollateralDelta.sub(marginRatioQuotePrecision.mul(orderBaseAssetAmount.abs()).div(numericConstants_1.BASE_PRECISION));\n        }\n        return freeCollateralDelta;\n    }\n    calculateFreeCollateralDeltaForSpot(market, signedTokenAmount) {\n        const tokenPrecision = new _1.BN(Math.pow(10, market.decimals));\n        if (signedTokenAmount.gt(numericConstants_1.ZERO)) {\n            const assetWeight = (0, spotBalance_1.calculateAssetWeight)(signedTokenAmount, market, \"Maintenance\");\n            return numericConstants_1.QUOTE_PRECISION.mul(assetWeight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION).mul(signedTokenAmount).div(tokenPrecision);\n        } else {\n            const liabilityWeight = (0, spotBalance_1.calculateLiabilityWeight)(signedTokenAmount.abs(), market, \"Maintenance\");\n            return numericConstants_1.QUOTE_PRECISION.neg().mul(liabilityWeight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION).mul(signedTokenAmount.abs()).div(tokenPrecision);\n        }\n    }\n    /**\n     * Calculates the estimated liquidation price for a position after closing a quote amount of the position.\n     * @param positionMarketIndex\n     * @param closeQuoteAmount\n     * @returns : Precision PRICE_PRECISION\n     */ liquidationPriceAfterClose(positionMarketIndex, closeQuoteAmount) {\n        const currentPosition = this.getPerpPositionWithLPSettle(positionMarketIndex, undefined, true)[0] || this.getEmptyPosition(positionMarketIndex);\n        const closeBaseAmount = currentPosition.baseAssetAmount.mul(closeQuoteAmount).div(currentPosition.quoteAssetAmount.abs()).add(currentPosition.baseAssetAmount.mul(closeQuoteAmount).mod(currentPosition.quoteAssetAmount.abs())).neg();\n        return this.liquidationPrice(positionMarketIndex, closeBaseAmount);\n    }\n    /**\n     * Get the maximum trade size for a given market, taking into account the user's current leverage, positions, collateral, etc.\n     *\n     * To Calculate Max Quote Available:\n     *\n     * Case 1: SameSide\n     * \t=> Remaining quote to get to maxLeverage\n     *\n     * Case 2: NOT SameSide && currentLeverage <= maxLeverage\n     * \t=> Current opposite position x2 + remaining to get to maxLeverage\n     *\n     * Case 3: NOT SameSide && currentLeverage > maxLeverage && otherPositions - currentPosition > maxLeverage\n     * \t=> strictly reduce current position size\n     *\n     * Case 4: NOT SameSide && currentLeverage > maxLeverage && otherPositions - currentPosition < maxLeverage\n     * \t=> current position + remaining to get to maxLeverage\n     *\n     * @param targetMarketIndex\n     * @param tradeSide\n     * @returns tradeSizeAllowed : Precision QUOTE_PRECISION\n     */ getMaxTradeSizeUSDCForPerp(targetMarketIndex, tradeSide, isLp = false) {\n        const currentPosition = this.getPerpPositionWithLPSettle(targetMarketIndex, undefined, true)[0] || this.getEmptyPosition(targetMarketIndex);\n        const targetSide = (0, types_1.isVariant)(tradeSide, \"short\") ? \"short\" : \"long\";\n        const currentPositionSide = (currentPosition === null || currentPosition === void 0 ? void 0 : currentPosition.baseAssetAmount.isNeg()) ? \"short\" : \"long\";\n        const targetingSameSide = !currentPosition ? true : targetSide === currentPositionSide;\n        const oracleData = this.getOracleDataForPerpMarket(targetMarketIndex);\n        const marketAccount = this.driftClient.getPerpMarketAccount(targetMarketIndex);\n        const lpBuffer = isLp ? oracleData.price.mul(marketAccount.amm.orderStepSize).div(numericConstants_1.AMM_RESERVE_PRECISION) : numericConstants_1.ZERO;\n        // add any position we have on the opposite side of the current trade, because we can \"flip\" the size of this position without taking any extra leverage.\n        const oppositeSizeValueUSDC = targetingSameSide ? numericConstants_1.ZERO : this.getPerpPositionValue(targetMarketIndex, oracleData);\n        let maxPositionSize = this.getPerpBuyingPower(targetMarketIndex, lpBuffer);\n        if (maxPositionSize.gte(numericConstants_1.ZERO)) {\n            if (oppositeSizeValueUSDC.eq(numericConstants_1.ZERO)) {\n            // case 1 : Regular trade where current total position less than max, and no opposite position to account for\n            // do nothing\n            } else {\n                // case 2 : trade where current total position less than max, but need to account for flipping the current position over to the other side\n                maxPositionSize = maxPositionSize.add(oppositeSizeValueUSDC.mul(new _1.BN(2)));\n            }\n        } else {\n            // current leverage is greater than max leverage - can only reduce position size\n            if (!targetingSameSide) {\n                const market = this.driftClient.getPerpMarketAccount(targetMarketIndex);\n                const perpPositionValue = this.getPerpPositionValue(targetMarketIndex, oracleData);\n                const totalCollateral = this.getTotalCollateral();\n                const marginRequirement = this.getInitialMarginRequirement();\n                const marginFreedByClosing = perpPositionValue.mul(new _1.BN(market.marginRatioInitial)).div(numericConstants_1.MARGIN_PRECISION);\n                const marginRequirementAfterClosing = marginRequirement.sub(marginFreedByClosing);\n                if (marginRequirementAfterClosing.gt(totalCollateral)) {\n                    maxPositionSize = perpPositionValue;\n                } else {\n                    const freeCollateralAfterClose = totalCollateral.sub(marginRequirementAfterClosing);\n                    const buyingPowerAfterClose = this.getPerpBuyingPowerFromFreeCollateralAndBaseAssetAmount(targetMarketIndex, freeCollateralAfterClose, numericConstants_1.ZERO);\n                    maxPositionSize = perpPositionValue.add(buyingPowerAfterClose);\n                }\n            } else {\n            // do nothing if targetting same side\n            }\n        }\n        return maxPositionSize;\n    }\n    /**\n     * Get the maximum trade size for a given market, taking into account the user's current leverage, positions, collateral, etc.\n     *\n     * @param targetMarketIndex\n     * @param direction\n     * @param currentQuoteAssetValue\n     * @param currentSpotMarketNetValue\n     * @returns tradeSizeAllowed : Precision QUOTE_PRECISION\n     */ getMaxTradeSizeUSDCForSpot(targetMarketIndex, direction, currentQuoteAssetValue, currentSpotMarketNetValue) {\n        const market = this.driftClient.getSpotMarketAccount(targetMarketIndex);\n        currentQuoteAssetValue = this.getSpotMarketAssetValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n        currentSpotMarketNetValue = currentSpotMarketNetValue !== null && currentSpotMarketNetValue !== void 0 ? currentSpotMarketNetValue : this.getSpotPositionValue(targetMarketIndex);\n        let freeCollateral = this.getFreeCollateral();\n        const marginRatio = (0, _1.calculateSpotMarketMarginRatio)(market, \"Initial\", numericConstants_1.ZERO, (0, types_1.isVariant)(direction, \"long\") ? _1.SpotBalanceType.DEPOSIT : _1.SpotBalanceType.BORROW);\n        let tradeAmount = numericConstants_1.ZERO;\n        if (this.getUserAccount().isMarginTradingEnabled) {\n            // if the user is buying/selling and already short/long, need to account for closing out short/long\n            if ((0, types_1.isVariant)(direction, \"long\") && currentSpotMarketNetValue.lt(numericConstants_1.ZERO)) {\n                tradeAmount = currentSpotMarketNetValue.abs();\n                const marginRatio = (0, _1.calculateSpotMarketMarginRatio)(market, \"Initial\", this.getTokenAmount(targetMarketIndex).abs(), _1.SpotBalanceType.BORROW);\n                freeCollateral = freeCollateral.add(tradeAmount.mul(new _1.BN(marginRatio)).div(numericConstants_1.MARGIN_PRECISION));\n            } else if ((0, types_1.isVariant)(direction, \"short\") && currentSpotMarketNetValue.gt(numericConstants_1.ZERO)) {\n                tradeAmount = currentSpotMarketNetValue;\n                const marginRatio = (0, _1.calculateSpotMarketMarginRatio)(market, \"Initial\", this.getTokenAmount(targetMarketIndex), _1.SpotBalanceType.DEPOSIT);\n                freeCollateral = freeCollateral.add(tradeAmount.mul(new _1.BN(marginRatio)).div(numericConstants_1.MARGIN_PRECISION));\n            }\n            tradeAmount = tradeAmount.add(freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new _1.BN(marginRatio)));\n        } else if ((0, types_1.isVariant)(direction, \"long\")) {\n            tradeAmount = _1.BN.min(currentQuoteAssetValue, freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(new _1.BN(marginRatio)));\n        } else {\n            tradeAmount = _1.BN.max(numericConstants_1.ZERO, currentSpotMarketNetValue);\n        }\n        return tradeAmount;\n    }\n    /**\n     * Calculates the max amount of token that can be swapped from inMarket to outMarket\n     * Assumes swap happens at oracle price\n     *\n     * @param inMarketIndex\n     * @param outMarketIndex\n     * @param calculateSwap function to similate in to out swa\n     * @param iterationLimit how long to run appromixation before erroring out\n     */ getMaxSwapAmount({ inMarketIndex, outMarketIndex, calculateSwap, iterationLimit = 1000 }) {\n        const inMarket = this.driftClient.getSpotMarketAccount(inMarketIndex);\n        const outMarket = this.driftClient.getSpotMarketAccount(outMarketIndex);\n        const inOraclePrice = this.getOracleDataForSpotMarket(inMarketIndex).price;\n        const outOraclePrice = this.getOracleDataForSpotMarket(outMarketIndex).price;\n        const inPrecision = new _1.BN(10 ** inMarket.decimals);\n        const outPrecision = new _1.BN(10 ** outMarket.decimals);\n        const inSpotPosition = this.getSpotPosition(inMarketIndex) || this.getEmptySpotPosition(inMarketIndex);\n        const outSpotPosition = this.getSpotPosition(outMarketIndex) || this.getEmptySpotPosition(outMarketIndex);\n        const freeCollateral = this.getFreeCollateral();\n        const inContributionInitial = this.calculateSpotPositionFreeCollateralContribution(inSpotPosition);\n        const { totalAssetValue: inTotalAssetValueInitial, totalLiabilityValue: inTotalLiabilityValueInitial } = this.calculateSpotPositionLeverageContribution(inSpotPosition);\n        const outContributionInitial = this.calculateSpotPositionFreeCollateralContribution(outSpotPosition);\n        const { totalAssetValue: outTotalAssetValueInitial, totalLiabilityValue: outTotalLiabilityValueInitial } = this.calculateSpotPositionLeverageContribution(outSpotPosition);\n        const initialContribution = inContributionInitial.add(outContributionInitial);\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        if (!calculateSwap) {\n            calculateSwap = (inSwap)=>{\n                return inSwap.mul(outPrecision).mul(inOraclePrice).div(outOraclePrice).div(inPrecision);\n            };\n        }\n        let inSwap = numericConstants_1.ZERO;\n        let outSwap = numericConstants_1.ZERO;\n        const inTokenAmount = this.getTokenAmount(inMarketIndex);\n        const outTokenAmount = this.getTokenAmount(outMarketIndex);\n        const outSaferThanIn = // selling asset to close borrow\n        inTokenAmount.gt(numericConstants_1.ZERO) && outTokenAmount.lt(numericConstants_1.ZERO) || // buying asset with higher initial asset weight\n        inMarket.initialAssetWeight < outMarket.initialAssetWeight;\n        if (freeCollateral.lt(numericConstants_1.ONE)) {\n            if (outSaferThanIn && inTokenAmount.gt(numericConstants_1.ZERO)) {\n                inSwap = inTokenAmount;\n                outSwap = calculateSwap(inSwap);\n            }\n        } else {\n            let minSwap = numericConstants_1.ZERO;\n            let maxSwap = _1.BN.max(freeCollateral.mul(inPrecision).mul(new _1.BN(100)).div(inOraclePrice), inTokenAmount.abs().mul(new _1.BN(10)) // 10x current position\n            );\n            inSwap = maxSwap.div(numericConstants_1.TWO);\n            const error = freeCollateral.div(new _1.BN(10000));\n            let i = 0;\n            let freeCollateralAfter = freeCollateral;\n            while(freeCollateralAfter.gt(error) || freeCollateralAfter.isNeg()){\n                outSwap = calculateSwap(inSwap);\n                const inPositionAfter = this.cloneAndUpdateSpotPosition(inSpotPosition, inSwap.neg(), inMarket);\n                const outPositionAfter = this.cloneAndUpdateSpotPosition(outSpotPosition, outSwap, outMarket);\n                const inContributionAfter = this.calculateSpotPositionFreeCollateralContribution(inPositionAfter);\n                const outContributionAfter = this.calculateSpotPositionFreeCollateralContribution(outPositionAfter);\n                const contributionAfter = inContributionAfter.add(outContributionAfter);\n                const contributionDelta = contributionAfter.sub(initialContribution);\n                freeCollateralAfter = freeCollateral.add(contributionDelta);\n                if (freeCollateralAfter.gt(error)) {\n                    minSwap = inSwap;\n                    inSwap = minSwap.add(maxSwap).div(numericConstants_1.TWO);\n                } else if (freeCollateralAfter.isNeg()) {\n                    maxSwap = inSwap;\n                    inSwap = minSwap.add(maxSwap).div(numericConstants_1.TWO);\n                }\n                if (i++ > iterationLimit) {\n                    console.log(\"getMaxSwapAmount iteration limit reached\");\n                    break;\n                }\n            }\n        }\n        const inPositionAfter = this.cloneAndUpdateSpotPosition(inSpotPosition, inSwap.neg(), inMarket);\n        const outPositionAfter = this.cloneAndUpdateSpotPosition(outSpotPosition, outSwap, outMarket);\n        const { totalAssetValue: inTotalAssetValueAfter, totalLiabilityValue: inTotalLiabilityValueAfter } = this.calculateSpotPositionLeverageContribution(inPositionAfter);\n        const { totalAssetValue: outTotalAssetValueAfter, totalLiabilityValue: outTotalLiabilityValueAfter } = this.calculateSpotPositionLeverageContribution(outPositionAfter);\n        const spotAssetValueDelta = inTotalAssetValueAfter.add(outTotalAssetValueAfter).sub(inTotalAssetValueInitial).sub(outTotalAssetValueInitial);\n        const spotLiabilityValueDelta = inTotalLiabilityValueAfter.add(outTotalLiabilityValueAfter).sub(inTotalLiabilityValueInitial).sub(outTotalLiabilityValueInitial);\n        const spotAssetValueAfter = spotAssetValue.add(spotAssetValueDelta);\n        const spotLiabilityValueAfter = spotLiabilityValue.add(spotLiabilityValueDelta);\n        const leverage = this.calculateLeverageFromComponents({\n            perpLiabilityValue,\n            perpPnl,\n            spotAssetValue: spotAssetValueAfter,\n            spotLiabilityValue: spotLiabilityValueAfter\n        });\n        return {\n            inAmount: inSwap,\n            outAmount: outSwap,\n            leverage\n        };\n    }\n    cloneAndUpdateSpotPosition(position, tokenAmount, market) {\n        const clonedPosition = Object.assign({}, position);\n        if (tokenAmount.eq(numericConstants_1.ZERO)) {\n            return clonedPosition;\n        }\n        const preTokenAmount = (0, _1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(position.scaledBalance, market, position.balanceType), position.balanceType);\n        if ((0, _1.sigNum)(preTokenAmount).eq((0, _1.sigNum)(tokenAmount))) {\n            const scaledBalanceDelta = (0, _1.getBalance)(tokenAmount.abs(), market, position.balanceType);\n            clonedPosition.scaledBalance = clonedPosition.scaledBalance.add(scaledBalanceDelta);\n            return clonedPosition;\n        }\n        const updateDirection = tokenAmount.isNeg() ? _1.SpotBalanceType.BORROW : _1.SpotBalanceType.DEPOSIT;\n        if (tokenAmount.abs().gte(preTokenAmount.abs())) {\n            clonedPosition.scaledBalance = (0, _1.getBalance)(tokenAmount.abs().sub(preTokenAmount.abs()), market, updateDirection);\n            clonedPosition.balanceType = updateDirection;\n        } else {\n            const scaledBalanceDelta = (0, _1.getBalance)(tokenAmount.abs(), market, position.balanceType);\n            clonedPosition.scaledBalance = clonedPosition.scaledBalance.sub(scaledBalanceDelta);\n        }\n        return clonedPosition;\n    }\n    calculateSpotPositionFreeCollateralContribution(spotPosition) {\n        let freeCollateralContribution = numericConstants_1.ZERO;\n        const now = new _1.BN(new Date().getTime() / 1000);\n        const strict = true;\n        const marginCategory = \"Initial\";\n        const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n        const oraclePriceData = this.getOracleDataForSpotMarket(spotPosition.marketIndex);\n        const [worstCaseTokenAmount, worstCaseQuoteTokenAmount] = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, oraclePriceData);\n        if (worstCaseTokenAmount.gt(numericConstants_1.ZERO)) {\n            const baseAssetValue = this.getSpotAssetValue(worstCaseTokenAmount, oraclePriceData, spotMarketAccount, marginCategory, strict, now);\n            freeCollateralContribution = freeCollateralContribution.add(baseAssetValue);\n        } else {\n            const baseLiabilityValue = this.getSpotLiabilityValue(worstCaseTokenAmount, oraclePriceData, spotMarketAccount, marginCategory, undefined, strict, now).abs();\n            freeCollateralContribution = freeCollateralContribution.sub(baseLiabilityValue);\n        }\n        freeCollateralContribution.add(worstCaseQuoteTokenAmount);\n        return freeCollateralContribution;\n    }\n    calculateSpotPositionLeverageContribution(spotPosition) {\n        let totalAssetValue = numericConstants_1.ZERO;\n        let totalLiabilityValue = numericConstants_1.ZERO;\n        const now = new _1.BN(new Date().getTime() / 1000);\n        const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n        const oraclePriceData = this.getOracleDataForSpotMarket(spotPosition.marketIndex);\n        const [worstCaseTokenAmount, worstCaseQuoteTokenAmount] = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, oraclePriceData);\n        if (worstCaseTokenAmount.gt(numericConstants_1.ZERO)) {\n            totalAssetValue = this.getSpotAssetValue(worstCaseTokenAmount, oraclePriceData, spotMarketAccount, undefined, false, now);\n        } else {\n            totalLiabilityValue = this.getSpotLiabilityValue(worstCaseTokenAmount, oraclePriceData, spotMarketAccount, undefined, undefined, false, now).abs();\n        }\n        if (worstCaseQuoteTokenAmount.gt(numericConstants_1.ZERO)) {\n            totalAssetValue = totalAssetValue.add(worstCaseQuoteTokenAmount);\n        } else {\n            totalLiabilityValue = totalLiabilityValue.add(worstCaseQuoteTokenAmount.abs());\n        }\n        return {\n            totalAssetValue,\n            totalLiabilityValue\n        };\n    }\n    /**\n     * Estimates what the user leverage will be after swap\n     * @param inMarketIndex\n     * @param outMarketIndex\n     * @param inAmount\n     * @param outAmount\n     */ accountLeverageAfterSwap({ inMarketIndex, outMarketIndex, inAmount, outAmount }) {\n        const inMarket = this.driftClient.getSpotMarketAccount(inMarketIndex);\n        const outMarket = this.driftClient.getSpotMarketAccount(outMarketIndex);\n        const inSpotPosition = this.getSpotPosition(inMarketIndex) || this.getEmptySpotPosition(inMarketIndex);\n        const outSpotPosition = this.getSpotPosition(outMarketIndex) || this.getEmptySpotPosition(outMarketIndex);\n        const { totalAssetValue: inTotalAssetValueInitial, totalLiabilityValue: inTotalLiabilityValueInitial } = this.calculateSpotPositionLeverageContribution(inSpotPosition);\n        const { totalAssetValue: outTotalAssetValueInitial, totalLiabilityValue: outTotalLiabilityValueInitial } = this.calculateSpotPositionLeverageContribution(outSpotPosition);\n        const { perpLiabilityValue, perpPnl, spotAssetValue, spotLiabilityValue } = this.getLeverageComponents();\n        const inPositionAfter = this.cloneAndUpdateSpotPosition(inSpotPosition, inAmount.abs().neg(), inMarket);\n        const outPositionAfter = this.cloneAndUpdateSpotPosition(outSpotPosition, outAmount.abs(), outMarket);\n        const { totalAssetValue: inTotalAssetValueAfter, totalLiabilityValue: inTotalLiabilityValueAfter } = this.calculateSpotPositionLeverageContribution(inPositionAfter);\n        const { totalAssetValue: outTotalAssetValueAfter, totalLiabilityValue: outTotalLiabilityValueAfter } = this.calculateSpotPositionLeverageContribution(outPositionAfter);\n        const spotAssetValueDelta = inTotalAssetValueAfter.add(outTotalAssetValueAfter).sub(inTotalAssetValueInitial).sub(outTotalAssetValueInitial);\n        const spotLiabilityValueDelta = inTotalLiabilityValueAfter.add(outTotalLiabilityValueAfter).sub(inTotalLiabilityValueInitial).sub(outTotalLiabilityValueInitial);\n        const spotAssetValueAfter = spotAssetValue.add(spotAssetValueDelta);\n        const spotLiabilityValueAfter = spotLiabilityValue.add(spotLiabilityValueDelta);\n        return this.calculateLeverageFromComponents({\n            perpLiabilityValue,\n            perpPnl,\n            spotAssetValue: spotAssetValueAfter,\n            spotLiabilityValue: spotLiabilityValueAfter\n        });\n    }\n    // TODO - should this take the price impact of the trade into account for strict accuracy?\n    /**\n     * Returns the leverage ratio for the account after adding (or subtracting) the given quote size to the given position\n     * @param targetMarketIndex\n     * @param: targetMarketType\n     * @param tradeQuoteAmount\n     * @param tradeSide\n     * @param includeOpenOrders\n     * @returns leverageRatio : Precision TEN_THOUSAND\n     */ accountLeverageRatioAfterTrade(targetMarketIndex, targetMarketType, tradeQuoteAmount, tradeSide, includeOpenOrders = true) {\n        const tradeIsPerp = (0, types_1.isVariant)(targetMarketType, \"perp\");\n        if (!tradeIsPerp) {\n            // calculate new asset/liability values for base and quote market to find new account leverage\n            const totalLiabilityValue = this.getTotalLiabilityValue();\n            const totalAssetValue = this.getTotalAssetValue();\n            const spotLiabilityValue = this.getSpotMarketLiabilityValue(undefined, undefined, undefined, includeOpenOrders);\n            const currentQuoteAssetValue = this.getSpotMarketAssetValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, undefined, includeOpenOrders);\n            const currentQuoteLiabilityValue = this.getSpotMarketLiabilityValue(numericConstants_1.QUOTE_SPOT_MARKET_INDEX, undefined, undefined, includeOpenOrders);\n            const currentQuoteValue = currentQuoteAssetValue.sub(currentQuoteLiabilityValue);\n            const currentSpotMarketAssetValue = this.getSpotMarketAssetValue(targetMarketIndex, undefined, includeOpenOrders);\n            const currentSpotMarketLiabilityValue = this.getSpotMarketLiabilityValue(targetMarketIndex, undefined, undefined, includeOpenOrders);\n            const currentSpotMarketNetValue = currentSpotMarketAssetValue.sub(currentSpotMarketLiabilityValue);\n            let assetValueToAdd = numericConstants_1.ZERO;\n            let liabilityValueToAdd = numericConstants_1.ZERO;\n            const newQuoteNetValue = tradeSide == _1.PositionDirection.SHORT ? currentQuoteValue.add(tradeQuoteAmount) : currentQuoteValue.sub(tradeQuoteAmount);\n            const newQuoteAssetValue = _1.BN.max(newQuoteNetValue, numericConstants_1.ZERO);\n            const newQuoteLiabilityValue = _1.BN.min(newQuoteNetValue, numericConstants_1.ZERO).abs();\n            assetValueToAdd = assetValueToAdd.add(newQuoteAssetValue.sub(currentQuoteAssetValue));\n            liabilityValueToAdd = liabilityValueToAdd.add(newQuoteLiabilityValue.sub(currentQuoteLiabilityValue));\n            const newSpotMarketNetValue = tradeSide == _1.PositionDirection.LONG ? currentSpotMarketNetValue.add(tradeQuoteAmount) : currentSpotMarketNetValue.sub(tradeQuoteAmount);\n            const newSpotMarketAssetValue = _1.BN.max(newSpotMarketNetValue, numericConstants_1.ZERO);\n            const newSpotMarketLiabilityValue = _1.BN.min(newSpotMarketNetValue, numericConstants_1.ZERO).abs();\n            assetValueToAdd = assetValueToAdd.add(newSpotMarketAssetValue.sub(currentSpotMarketAssetValue));\n            liabilityValueToAdd = liabilityValueToAdd.add(newSpotMarketLiabilityValue.sub(currentSpotMarketLiabilityValue));\n            const totalAssetValueAfterTrade = totalAssetValue.add(assetValueToAdd);\n            const totalSpotLiabilityValueAfterTrade = spotLiabilityValue.add(liabilityValueToAdd);\n            const totalLiabilityValueAfterTrade = totalLiabilityValue.add(liabilityValueToAdd);\n            const netAssetValueAfterTrade = totalAssetValueAfterTrade.sub(totalSpotLiabilityValueAfterTrade);\n            if (netAssetValueAfterTrade.eq(numericConstants_1.ZERO)) {\n                return numericConstants_1.ZERO;\n            }\n            const newLeverage = totalLiabilityValueAfterTrade.mul(numericConstants_1.TEN_THOUSAND).div(netAssetValueAfterTrade);\n            return newLeverage;\n        }\n        const currentPosition = this.getPerpPositionWithLPSettle(targetMarketIndex)[0] || this.getEmptyPosition(targetMarketIndex);\n        const oracleData = this.getOracleDataForPerpMarket(targetMarketIndex);\n        let currentPositionQuoteAmount = this.getPerpPositionValue(targetMarketIndex, oracleData, includeOpenOrders);\n        const currentSide = currentPosition && currentPosition.baseAssetAmount.isNeg() ? _1.PositionDirection.SHORT : _1.PositionDirection.LONG;\n        if (currentSide === _1.PositionDirection.SHORT) currentPositionQuoteAmount = currentPositionQuoteAmount.neg();\n        if (tradeSide === _1.PositionDirection.SHORT) tradeQuoteAmount = tradeQuoteAmount.neg();\n        const currentPerpPositionAfterTrade = currentPositionQuoteAmount.add(tradeQuoteAmount).abs();\n        const totalPositionAfterTradeExcludingTargetMarket = this.getTotalPerpPositionValueExcludingMarket(targetMarketIndex, undefined, undefined, includeOpenOrders);\n        const totalAssetValue = this.getTotalAssetValue();\n        const totalPerpPositionLiability = currentPerpPositionAfterTrade.add(totalPositionAfterTradeExcludingTargetMarket).abs();\n        const totalSpotLiability = this.getSpotMarketLiabilityValue(undefined, undefined, undefined, includeOpenOrders);\n        const totalLiabilitiesAfterTrade = totalPerpPositionLiability.add(totalSpotLiability);\n        const netAssetValue = totalAssetValue.sub(totalSpotLiability);\n        if (netAssetValue.eq(numericConstants_1.ZERO)) {\n            return numericConstants_1.ZERO;\n        }\n        const newLeverage = totalLiabilitiesAfterTrade.mul(numericConstants_1.TEN_THOUSAND).div(netAssetValue);\n        return newLeverage;\n    }\n    /**\n     * Calculates how much fee will be taken for a given sized trade\n     * @param quoteAmount\n     * @returns feeForQuote : Precision QUOTE_PRECISION\n     */ calculateFeeForQuoteAmount(quoteAmount) {\n        const feeTier = this.driftClient.getStateAccount().perpFeeStructure.feeTiers[0];\n        return quoteAmount.mul(new _1.BN(feeTier.feeNumerator)).div(new _1.BN(feeTier.feeDenominator));\n    }\n    /**\n     * Calculates a user's max withdrawal amounts for a spot market. If reduceOnly is true,\n     * it will return the max withdrawal amount without opening a liability for the user\n     * @param marketIndex\n     * @returns withdrawalLimit : Precision is the token precision for the chosen SpotMarket\n     */ getWithdrawalLimit(marketIndex, reduceOnly) {\n        const nowTs = new _1.BN(Math.floor(Date.now() / 1000));\n        const spotMarket = this.driftClient.getSpotMarketAccount(marketIndex);\n        // eslint-disable-next-line prefer-const\n        let { borrowLimit, withdrawLimit } = (0, spotBalance_1.calculateWithdrawLimit)(spotMarket, nowTs);\n        const freeCollateral = this.getFreeCollateral();\n        const oracleData = this.getOracleDataForSpotMarket(marketIndex);\n        const precisionIncrease = numericConstants_1.TEN.pow(new _1.BN(spotMarket.decimals - 6));\n        const { canBypass, depositAmount: userDepositAmount } = this.canBypassWithdrawLimits(marketIndex);\n        if (canBypass) {\n            withdrawLimit = _1.BN.max(withdrawLimit, userDepositAmount);\n        }\n        const assetWeight = (0, spotBalance_1.calculateAssetWeight)(userDepositAmount, spotMarket, \"Initial\");\n        const amountWithdrawable = assetWeight.eq(numericConstants_1.ZERO) ? userDepositAmount : freeCollateral.mul(numericConstants_1.MARGIN_PRECISION).div(assetWeight).mul(numericConstants_1.PRICE_PRECISION).div(oracleData.price).mul(precisionIncrease);\n        const maxWithdrawValue = _1.BN.min(_1.BN.min(amountWithdrawable, userDepositAmount), withdrawLimit.abs());\n        if (reduceOnly) {\n            return _1.BN.max(maxWithdrawValue, numericConstants_1.ZERO);\n        } else {\n            const weightedAssetValue = this.getSpotMarketAssetValue(marketIndex, \"Initial\", false);\n            const freeCollatAfterWithdraw = userDepositAmount.gt(numericConstants_1.ZERO) ? freeCollateral.sub(weightedAssetValue) : freeCollateral;\n            const maxLiabilityAllowed = freeCollatAfterWithdraw.mul(numericConstants_1.MARGIN_PRECISION).div(new _1.BN(spotMarket.initialLiabilityWeight)).mul(numericConstants_1.PRICE_PRECISION).div(oracleData.price).mul(precisionIncrease);\n            const maxBorrowValue = _1.BN.min(maxWithdrawValue.add(maxLiabilityAllowed), borrowLimit.abs());\n            return _1.BN.max(maxBorrowValue, numericConstants_1.ZERO);\n        }\n    }\n    canBypassWithdrawLimits(marketIndex) {\n        const spotMarket = this.driftClient.getSpotMarketAccount(marketIndex);\n        const maxDepositAmount = spotMarket.withdrawGuardThreshold.div(new _1.BN(10));\n        const position = this.getSpotPosition(marketIndex);\n        const netDeposits = this.getUserAccount().totalDeposits.sub(this.getUserAccount().totalWithdraws);\n        if (!position) {\n            return {\n                canBypass: false,\n                maxDepositAmount,\n                depositAmount: numericConstants_1.ZERO,\n                netDeposits\n            };\n        }\n        if ((0, types_1.isVariant)(position.balanceType, \"borrow\")) {\n            return {\n                canBypass: false,\n                maxDepositAmount,\n                netDeposits,\n                depositAmount: numericConstants_1.ZERO\n            };\n        }\n        const depositAmount = (0, spotBalance_1.getTokenAmount)(position.scaledBalance, spotMarket, _1.SpotBalanceType.DEPOSIT);\n        if (netDeposits.lt(numericConstants_1.ZERO)) {\n            return {\n                canBypass: false,\n                maxDepositAmount,\n                depositAmount,\n                netDeposits\n            };\n        }\n        return {\n            canBypass: depositAmount.lt(maxDepositAmount),\n            maxDepositAmount,\n            netDeposits,\n            depositAmount\n        };\n    }\n    canMakeIdle(slot, slotsBeforeIdle) {\n        const userAccount = this.getUserAccount();\n        if (userAccount.idle) {\n            return false;\n        }\n        const userLastActiveSlot = userAccount.lastActiveSlot;\n        const slotsSinceLastActive = slot.sub(userLastActiveSlot);\n        if (slotsSinceLastActive.lt(slotsBeforeIdle)) {\n            return false;\n        }\n        if (this.isBeingLiquidated()) {\n            return false;\n        }\n        for (const perpPosition of userAccount.perpPositions){\n            if (!(0, position_1.positionIsAvailable)(perpPosition)) {\n                return false;\n            }\n        }\n        for (const spotPosition of userAccount.spotPositions){\n            if ((0, types_1.isVariant)(spotPosition.balanceType, \"borrow\") && spotPosition.scaledBalance.gt(numericConstants_1.ZERO)) {\n                return false;\n            }\n            if (spotPosition.openOrders !== 0) {\n                return false;\n            }\n        }\n        for (const order of userAccount.orders){\n            if (!(0, types_1.isVariant)(order.status, \"init\")) {\n                return false;\n            }\n        }\n        return true;\n    }\n    getSafestTiers() {\n        let safestPerpTier = 4;\n        let safestSpotTier = 4;\n        for (const perpPosition of this.getActivePerpPositions()){\n            safestPerpTier = Math.min(safestPerpTier, (0, tiers_1.getPerpMarketTierNumber)(this.driftClient.getPerpMarketAccount(perpPosition.marketIndex)));\n        }\n        for (const spotPosition of this.getActiveSpotPositions()){\n            if ((0, types_1.isVariant)(spotPosition.balanceType, \"deposit\")) {\n                continue;\n            }\n            safestSpotTier = Math.min(safestSpotTier, (0, tiers_1.getSpotMarketTierNumber)(this.driftClient.getSpotMarketAccount(spotPosition.marketIndex)));\n        }\n        return {\n            perpTier: safestPerpTier,\n            spotTier: safestSpotTier\n        };\n    }\n    getHealthComponents({ marginCategory }) {\n        const healthComponents = {\n            deposits: [],\n            borrows: [],\n            perpPositions: [],\n            perpPnl: []\n        };\n        for (const perpPosition of this.getActivePerpPositions()){\n            const perpMarket = this.driftClient.getPerpMarketAccount(perpPosition.marketIndex);\n            const oraclePriceData = this.driftClient.getOraclePriceDataAndSlot(perpMarket.amm.oracle).data;\n            const oraclePrice = oraclePriceData.price;\n            const worstCaseBaseAmount = (0, margin_1.calculateWorstCaseBaseAssetAmount)(perpPosition);\n            const marginRatio = new _1.BN((0, _1.calculateMarketMarginRatio)(perpMarket, worstCaseBaseAmount.abs(), marginCategory));\n            const quoteSpotMarket = this.driftClient.getSpotMarketAccount(perpMarket.quoteSpotMarketIndex);\n            const quoteOraclePriceData = this.driftClient.getOraclePriceDataAndSlot(quoteSpotMarket.oracle).data;\n            const baseAssetValue = worstCaseBaseAmount.abs().mul(oraclePrice).div(numericConstants_1.BASE_PRECISION);\n            let marginRequirement = baseAssetValue.mul(quoteOraclePriceData.price).div(numericConstants_1.PRICE_PRECISION).mul(marginRatio).div(numericConstants_1.MARGIN_PRECISION);\n            marginRequirement = marginRequirement.add(new _1.BN(perpPosition.openOrders).mul(numericConstants_1.OPEN_ORDER_MARGIN_REQUIREMENT));\n            if (perpPosition.lpShares.gt(numericConstants_1.ZERO)) {\n                marginRequirement = marginRequirement.add(_1.BN.max(numericConstants_1.QUOTE_PRECISION, oraclePrice.mul(perpMarket.amm.orderStepSize).mul(numericConstants_1.QUOTE_PRECISION).div(numericConstants_1.AMM_RESERVE_PRECISION).div(numericConstants_1.PRICE_PRECISION)));\n            }\n            healthComponents.perpPositions.push({\n                marketIndex: perpMarket.marketIndex,\n                size: worstCaseBaseAmount,\n                value: baseAssetValue,\n                weight: marginRatio,\n                weightedValue: marginRequirement\n            });\n            const settledPerpPosition = this.getPerpPositionWithLPSettle(perpPosition.marketIndex, perpPosition)[0];\n            const positionUnrealizedPnl = (0, _1.calculatePositionPNL)(perpMarket, settledPerpPosition, true, oraclePriceData);\n            let pnlWeight;\n            if (positionUnrealizedPnl.gt(numericConstants_1.ZERO)) {\n                pnlWeight = (0, _1.calculateUnrealizedAssetWeight)(perpMarket, quoteSpotMarket, positionUnrealizedPnl, marginCategory, oraclePriceData);\n            } else {\n                pnlWeight = numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION;\n            }\n            const pnlValue = positionUnrealizedPnl.mul(quoteOraclePriceData.price).div(numericConstants_1.PRICE_PRECISION);\n            const wegithedPnlValue = pnlValue.mul(pnlWeight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n            healthComponents.perpPnl.push({\n                marketIndex: perpMarket.marketIndex,\n                size: positionUnrealizedPnl,\n                value: pnlValue,\n                weight: pnlWeight,\n                weightedValue: wegithedPnlValue\n            });\n        }\n        let netQuoteValue = numericConstants_1.ZERO;\n        for (const spotPosition of this.getActiveSpotPositions()){\n            const spotMarketAccount = this.driftClient.getSpotMarketAccount(spotPosition.marketIndex);\n            const oraclePriceData = this.getOracleDataForSpotMarket(spotPosition.marketIndex);\n            if (spotPosition.marketIndex === numericConstants_1.QUOTE_SPOT_MARKET_INDEX) {\n                const tokenAmount = (0, _1.getSignedTokenAmount)((0, spotBalance_1.getTokenAmount)(spotPosition.scaledBalance, spotMarketAccount, spotPosition.balanceType), spotPosition.balanceType);\n                netQuoteValue = netQuoteValue.add(tokenAmount);\n                continue;\n            }\n            const [worstCaseTokenAmount, worstCaseQuoteTokenAmount] = (0, spotPosition_1.getWorstCaseTokenAmounts)(spotPosition, spotMarketAccount, oraclePriceData);\n            netQuoteValue = netQuoteValue.add(worstCaseQuoteTokenAmount);\n            const baseAssetValue = (0, _1.getTokenValue)(worstCaseTokenAmount.abs(), spotMarketAccount.decimals, oraclePriceData);\n            const isLiability = (0, types_1.isVariant)(spotPosition.balanceType, \"borrow\");\n            let weight;\n            if (isLiability) {\n                weight = (0, spotBalance_1.calculateLiabilityWeight)(worstCaseTokenAmount.abs(), spotMarketAccount, marginCategory);\n            } else {\n                weight = (0, spotBalance_1.calculateAssetWeight)(worstCaseTokenAmount, spotMarketAccount, marginCategory);\n            }\n            const weightedValue = baseAssetValue.mul(weight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n            if (isLiability) {\n                healthComponents.borrows.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: worstCaseTokenAmount,\n                    value: baseAssetValue,\n                    weight: weight,\n                    weightedValue: weightedValue\n                });\n            } else {\n                healthComponents.deposits.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: worstCaseTokenAmount,\n                    value: baseAssetValue,\n                    weight: weight,\n                    weightedValue: weightedValue\n                });\n            }\n        }\n        if (!netQuoteValue.eq(numericConstants_1.ZERO)) {\n            const spotMarketAccount = this.driftClient.getQuoteSpotMarketAccount();\n            const oraclePriceData = this.getOracleDataForSpotMarket(numericConstants_1.QUOTE_SPOT_MARKET_INDEX);\n            const baseAssetValue = (0, _1.getTokenValue)(netQuoteValue.abs(), spotMarketAccount.decimals, oraclePriceData);\n            const isLiability = netQuoteValue.lt(numericConstants_1.ZERO);\n            let weight;\n            if (isLiability) {\n                weight = (0, spotBalance_1.calculateLiabilityWeight)(netQuoteValue.abs(), spotMarketAccount, marginCategory);\n            } else {\n                weight = (0, spotBalance_1.calculateAssetWeight)(netQuoteValue, spotMarketAccount, marginCategory);\n            }\n            const weightedValue = baseAssetValue.mul(weight).div(numericConstants_1.SPOT_MARKET_WEIGHT_PRECISION);\n            if (isLiability) {\n                healthComponents.borrows.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: netQuoteValue,\n                    value: baseAssetValue,\n                    weight: weight,\n                    weightedValue: weightedValue\n                });\n            } else {\n                healthComponents.deposits.push({\n                    marketIndex: spotMarketAccount.marketIndex,\n                    size: netQuoteValue,\n                    value: baseAssetValue,\n                    weight: weight,\n                    weightedValue: weightedValue\n                });\n            }\n        }\n        return healthComponents;\n    }\n    /**\n     * Get the total position value, excluding any position coming from the given target market\n     * @param marketToIgnore\n     * @returns positionValue : Precision QUOTE_PRECISION\n     */ getTotalPerpPositionValueExcludingMarket(marketToIgnore, marginCategory, liquidationBuffer, includeOpenOrders) {\n        const currentPerpPosition = this.getPerpPositionWithLPSettle(marketToIgnore, undefined, !!marginCategory)[0] || this.getEmptyPosition(marketToIgnore);\n        const oracleData = this.getOracleDataForPerpMarket(marketToIgnore);\n        let currentPerpPositionValueUSDC = numericConstants_1.ZERO;\n        if (currentPerpPosition) {\n            currentPerpPositionValueUSDC = this.getPerpPositionValue(marketToIgnore, oracleData, includeOpenOrders);\n        }\n        return this.getTotalPerpPositionValue(marginCategory, liquidationBuffer, includeOpenOrders).sub(currentPerpPositionValueUSDC);\n    }\n    getOracleDataForPerpMarket(marketIndex) {\n        const oracleKey = this.driftClient.getPerpMarketAccount(marketIndex).amm.oracle;\n        const oracleData = this.driftClient.getOraclePriceDataAndSlot(oracleKey).data;\n        return oracleData;\n    }\n    getOracleDataForSpotMarket(marketIndex) {\n        const oracleKey = this.driftClient.getSpotMarketAccount(marketIndex).oracle;\n        const oracleData = this.driftClient.getOraclePriceDataAndSlot(oracleKey).data;\n        return oracleData;\n    }\n}\nexports.User = User;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxZQUFZLEdBQUcsS0FBSztBQUNwQixNQUFNRyxVQUFVQyxtQkFBT0EsQ0FBQyxrRUFBUztBQUNqQyxNQUFNQyxhQUFhRCxtQkFBT0EsQ0FBQyxrRkFBaUI7QUFDNUMsTUFBTUUscUJBQXFCRixtQkFBT0EsQ0FBQyw0R0FBOEI7QUFDakUsTUFBTUcsS0FBS0gsbUJBQU9BLENBQUMsNERBQUc7QUFDdEIsTUFBTUksZ0JBQWdCSixtQkFBT0EsQ0FBQyx3RkFBb0I7QUFDbEQsTUFBTUssUUFBUUwsbUJBQU9BLENBQUMsd0VBQVk7QUFDbEMsTUFBTU0sV0FBV04sbUJBQU9BLENBQUMsOEVBQWU7QUFDeEMsTUFBTU8saUNBQWlDUCxtQkFBT0EsQ0FBQyxrSUFBeUM7QUFDeEYsTUFBTVEsbUNBQW1DUixtQkFBT0EsQ0FBQyxzSUFBMkM7QUFDNUYsTUFBTVMsaUJBQWlCVCxtQkFBT0EsQ0FBQywwRkFBcUI7QUFDcEQsTUFBTVUsWUFBWVYsbUJBQU9BLENBQUMsZ0ZBQWdCO0FBQzFDLE1BQU1XLFVBQVVYLG1CQUFPQSxDQUFDLDRFQUFjO0FBQ3RDLE1BQU1GO0lBQ0YsSUFBSWMsZUFBZTtRQUNmLE9BQU8sSUFBSSxDQUFDQyxhQUFhLElBQUksSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQ0YsWUFBWTtJQUNwRTtJQUNBLElBQUlBLGFBQWFHLEdBQUcsRUFBRTtRQUNsQixJQUFJLENBQUNGLGFBQWEsR0FBR0U7SUFDekI7SUFDQUMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLElBQUlDLElBQUlDO1FBQ1IsSUFBSSxDQUFDTixhQUFhLEdBQUc7UUFDckIsSUFBSSxDQUFDTyxXQUFXLEdBQUdILE9BQU9HLFdBQVc7UUFDckMsSUFBSSxDQUFDQyxvQkFBb0IsR0FBR0osT0FBT0ksb0JBQW9C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O1FBQy9FLE1BQU00SCxhQUFhLElBQUksQ0FBQ3RYLFdBQVcsQ0FBQ3lQLHlCQUF5QixDQUFDbVIsV0FBVzNmLElBQUk7UUFDN0UsT0FBT3FXO0lBQ1g7SUFDQXhMLDJCQUEyQjFLLFdBQVcsRUFBRTtRQUNwQyxNQUFNd2YsWUFBWSxJQUFJLENBQUM1Z0IsV0FBVyxDQUFDOEMsb0JBQW9CLENBQUMxQixhQUFhc08sTUFBTTtRQUMzRSxNQUFNNEgsYUFBYSxJQUFJLENBQUN0WCxXQUFXLENBQUN5UCx5QkFBeUIsQ0FBQ21SLFdBQVczZixJQUFJO1FBQzdFLE9BQU9xVztJQUNYO0FBQ0o7QUFDQTlZLFlBQVksR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvdXNlci5qcz8wOWNlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Vc2VyID0gdm9pZCAwO1xuY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoXCIuL3R5cGVzXCIpO1xuY29uc3QgcG9zaXRpb25fMSA9IHJlcXVpcmUoXCIuL21hdGgvcG9zaXRpb25cIik7XG5jb25zdCBudW1lcmljQ29uc3RhbnRzXzEgPSByZXF1aXJlKFwiLi9jb25zdGFudHMvbnVtZXJpY0NvbnN0YW50c1wiKTtcbmNvbnN0IF8xID0gcmVxdWlyZShcIi5cIik7XG5jb25zdCBzcG90QmFsYW5jZV8xID0gcmVxdWlyZShcIi4vbWF0aC9zcG90QmFsYW5jZVwiKTtcbmNvbnN0IGFtbV8xID0gcmVxdWlyZShcIi4vbWF0aC9hbW1cIik7XG5jb25zdCBtYXJnaW5fMSA9IHJlcXVpcmUoXCIuL21hdGgvbWFyZ2luXCIpO1xuY29uc3QgcG9sbGluZ1VzZXJBY2NvdW50U3Vic2NyaWJlcl8xID0gcmVxdWlyZShcIi4vYWNjb3VudHMvcG9sbGluZ1VzZXJBY2NvdW50U3Vic2NyaWJlclwiKTtcbmNvbnN0IHdlYlNvY2tldFVzZXJBY2NvdW50U3Vic2NyaWJlcl8xID0gcmVxdWlyZShcIi4vYWNjb3VudHMvd2ViU29ja2V0VXNlckFjY291bnRTdWJzY3JpYmVyXCIpO1xuY29uc3Qgc3BvdFBvc2l0aW9uXzEgPSByZXF1aXJlKFwiLi9tYXRoL3Nwb3RQb3NpdGlvblwiKTtcbmNvbnN0IG9yYWNsZXNfMSA9IHJlcXVpcmUoXCIuL21hdGgvb3JhY2xlc1wiKTtcbmNvbnN0IHRpZXJzXzEgPSByZXF1aXJlKFwiLi9tYXRoL3RpZXJzXCIpO1xuY2xhc3MgVXNlciB7XG4gICAgZ2V0IGlzU3Vic2NyaWJlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU3Vic2NyaWJlZCAmJiB0aGlzLmFjY291bnRTdWJzY3JpYmVyLmlzU3Vic2NyaWJlZDtcbiAgICB9XG4gICAgc2V0IGlzU3Vic2NyaWJlZCh2YWwpIHtcbiAgICAgICAgdGhpcy5faXNTdWJzY3JpYmVkID0gdmFsO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdGhpcy5faXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZHJpZnRDbGllbnQgPSBjb25maWcuZHJpZnRDbGllbnQ7XG4gICAgICAgIHRoaXMudXNlckFjY291bnRQdWJsaWNLZXkgPSBjb25maWcudXNlckFjY291bnRQdWJsaWNLZXk7XG4gICAgICAgIGlmICgoKF9hID0gY29uZmlnLmFjY291bnRTdWJzY3JpcHRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50eXBlKSA9PT0gJ3BvbGxpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLmFjY291bnRTdWJzY3JpYmVyID0gbmV3IHBvbGxpbmdVc2VyQWNjb3VudFN1YnNjcmliZXJfMS5Qb2xsaW5nVXNlckFjY291bnRTdWJzY3JpYmVyKGNvbmZpZy5kcmlmdENsaWVudC5wcm9ncmFtLCBjb25maWcudXNlckFjY291bnRQdWJsaWNLZXksIGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uLmFjY291bnRMb2FkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCgoX2IgPSBjb25maWcuYWNjb3VudFN1YnNjcmlwdGlvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnR5cGUpID09PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgdGhpcy5hY2NvdW50U3Vic2NyaWJlciA9IGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uLnVzZXJBY2NvdW50U3Vic2NyaWJlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWNjb3VudFN1YnNjcmliZXIgPSBuZXcgd2ViU29ja2V0VXNlckFjY291bnRTdWJzY3JpYmVyXzEuV2ViU29ja2V0VXNlckFjY291bnRTdWJzY3JpYmVyKGNvbmZpZy5kcmlmdENsaWVudC5wcm9ncmFtLCBjb25maWcudXNlckFjY291bnRQdWJsaWNLZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyID0gdGhpcy5hY2NvdW50U3Vic2NyaWJlci5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZSB0byBVc2VyIHN0YXRlIGFjY291bnRzXG4gICAgICogQHJldHVybnMgU3VzYmNyaXB0aW9uU3VjY2VzcyByZXN1bHRcbiAgICAgKi9cbiAgICBhc3luYyBzdWJzY3JpYmUodXNlckFjY291bnQpIHtcbiAgICAgICAgdGhpcy5pc1N1YnNjcmliZWQgPSBhd2FpdCB0aGlzLmFjY291bnRTdWJzY3JpYmVyLnN1YnNjcmliZSh1c2VyQWNjb3VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU3Vic2NyaWJlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcdEZvcmNlcyB0aGUgYWNjb3VudFN1YnNjcmliZXIgdG8gZmV0Y2ggYWNjb3VudCB1cGRhdGVzIGZyb20gcnBjXG4gICAgICovXG4gICAgYXN5bmMgZmV0Y2hBY2NvdW50cygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci5mZXRjaCgpO1xuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXRVc2VyQWNjb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudFN1YnNjcmliZXIuZ2V0VXNlckFjY291bnRBbmRTbG90KCkuZGF0YTtcbiAgICB9XG4gICAgYXN5bmMgZm9yY2VHZXRVc2VyQWNjb3VudCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5mZXRjaEFjY291bnRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY291bnRTdWJzY3JpYmVyLmdldFVzZXJBY2NvdW50QW5kU2xvdCgpLmRhdGE7XG4gICAgfVxuICAgIGdldFVzZXJBY2NvdW50QW5kU2xvdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudFN1YnNjcmliZXIuZ2V0VXNlckFjY291bnRBbmRTbG90KCk7XG4gICAgfVxuICAgIGdldFBlcnBQb3NpdGlvbkZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCkge1xuICAgICAgICByZXR1cm4gdXNlckFjY291bnQucGVycFBvc2l0aW9ucy5maW5kKChwb3NpdGlvbikgPT4gcG9zaXRpb24ubWFya2V0SW5kZXggPT09IG1hcmtldEluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdXNlcidzIGN1cnJlbnQgcG9zaXRpb24gZm9yIGEgZ2l2ZW4gcGVycCBtYXJrZXQuIElmIHRoZSB1c2VyIGhhcyBubyBwb3NpdGlvbiByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAqIEBwYXJhbSBtYXJrZXRJbmRleFxuICAgICAqIEByZXR1cm5zIHVzZXJQZXJwUG9zaXRpb25cbiAgICAgKi9cbiAgICBnZXRQZXJwUG9zaXRpb24obWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBlcnBQb3NpdGlvbkZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCk7XG4gICAgfVxuICAgIGdldFBlcnBQb3NpdGlvbkFuZFNsb3QobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50QW5kU2xvdCgpO1xuICAgICAgICBjb25zdCBwZXJwUG9zaXRpb24gPSB0aGlzLmdldFBlcnBQb3NpdGlvbkZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LmRhdGEsIG1hcmtldEluZGV4KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHBlcnBQb3NpdGlvbixcbiAgICAgICAgICAgIHNsb3Q6IHVzZXJBY2NvdW50LnNsb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFNwb3RQb3NpdGlvbkZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCkge1xuICAgICAgICByZXR1cm4gdXNlckFjY291bnQuc3BvdFBvc2l0aW9ucy5maW5kKChwb3NpdGlvbikgPT4gcG9zaXRpb24ubWFya2V0SW5kZXggPT09IG1hcmtldEluZGV4KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdXNlcidzIGN1cnJlbnQgcG9zaXRpb24gZm9yIGEgZ2l2ZW4gc3BvdCBtYXJrZXQuIElmIHRoZSB1c2VyIGhhcyBubyBwb3NpdGlvbiByZXR1cm5zIHVuZGVmaW5lZFxuICAgICAqIEBwYXJhbSBtYXJrZXRJbmRleFxuICAgICAqIEByZXR1cm5zIHVzZXJTcG90UG9zaXRpb25cbiAgICAgKi9cbiAgICBnZXRTcG90UG9zaXRpb24obWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNwb3RQb3NpdGlvbkZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LCBtYXJrZXRJbmRleCk7XG4gICAgfVxuICAgIGdldFNwb3RQb3NpdGlvbkFuZFNsb3QobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50QW5kU2xvdCgpO1xuICAgICAgICBjb25zdCBzcG90UG9zaXRpb24gPSB0aGlzLmdldFNwb3RQb3NpdGlvbkZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LmRhdGEsIG1hcmtldEluZGV4KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRhdGE6IHNwb3RQb3NpdGlvbixcbiAgICAgICAgICAgIHNsb3Q6IHVzZXJBY2NvdW50LnNsb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldEVtcHR5U3BvdFBvc2l0aW9uKG1hcmtldEluZGV4KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXJrZXRJbmRleCxcbiAgICAgICAgICAgIHNjYWxlZEJhbGFuY2U6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPLFxuICAgICAgICAgICAgYmFsYW5jZVR5cGU6IF8xLlNwb3RCYWxhbmNlVHlwZS5ERVBPU0lULFxuICAgICAgICAgICAgY3VtdWxhdGl2ZURlcG9zaXRzOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIG9wZW5Bc2tzOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIG9wZW5CaWRzOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIG9wZW5PcmRlcnM6IDAsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHRva2VuIGFtb3VudCBmb3IgYSBnaXZlbiBtYXJrZXQuIFRoZSBzcG90IG1hcmtldCBwcmVjaXNpb24gaXMgYmFzZWQgb24gdGhlIHRva2VuIG1pbnQgZGVjaW1hbHMuXG4gICAgICogUG9zaXRpdmUgaWYgaXQgaXMgYSBkZXBvc2l0LCBuZWdhdGl2ZSBpZiBpdCBpcyBhIGJvcnJvdy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtYXJrZXRJbmRleFxuICAgICAqL1xuICAgIGdldFRva2VuQW1vdW50KG1hcmtldEluZGV4KSB7XG4gICAgICAgIGNvbnN0IHNwb3RQb3NpdGlvbiA9IHRoaXMuZ2V0U3BvdFBvc2l0aW9uKG1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKHNwb3RQb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICByZXR1cm4gKDAsIF8xLmdldFNpZ25lZFRva2VuQW1vdW50KSgoMCwgc3BvdEJhbGFuY2VfMS5nZXRUb2tlbkFtb3VudCkoc3BvdFBvc2l0aW9uLnNjYWxlZEJhbGFuY2UsIHNwb3RNYXJrZXQsIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSksIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSk7XG4gICAgfVxuICAgIGdldEVtcHR5UG9zaXRpb24obWFya2V0SW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJhc2VBc3NldEFtb3VudDogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgICAgICByZW1haW5kZXJCYXNlQXNzZXRBbW91bnQ6IDAsXG4gICAgICAgICAgICBsYXN0Q3VtdWxhdGl2ZUZ1bmRpbmdSYXRlOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIG1hcmtldEluZGV4LFxuICAgICAgICAgICAgcXVvdGVBc3NldEFtb3VudDogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgICAgICBxdW90ZUVudHJ5QW1vdW50OiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIHF1b3RlQnJlYWtFdmVuQW1vdW50OiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIG9wZW5PcmRlcnM6IDAsXG4gICAgICAgICAgICBvcGVuQmlkczogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgICAgICBvcGVuQXNrczogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgICAgICBzZXR0bGVkUG5sOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIGxwU2hhcmVzOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIGxhc3RCYXNlQXNzZXRBbW91bnRQZXJMcDogbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sXG4gICAgICAgICAgICBsYXN0UXVvdGVBc3NldEFtb3VudFBlckxwOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIHBlckxwQmFzZTogMCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0Q2xvbmVkUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgY2xvbmVkUG9zaXRpb24gPSBPYmplY3QuYXNzaWduKHt9LCBwb3NpdGlvbik7XG4gICAgICAgIHJldHVybiBjbG9uZWRQb3NpdGlvbjtcbiAgICB9XG4gICAgZ2V0T3JkZXJGb3JVc2VyQWNjb3VudCh1c2VyQWNjb3VudCwgb3JkZXJJZCkge1xuICAgICAgICByZXR1cm4gdXNlckFjY291bnQub3JkZXJzLmZpbmQoKG9yZGVyKSA9PiBvcmRlci5vcmRlcklkID09PSBvcmRlcklkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG9yZGVySWRcbiAgICAgKiBAcmV0dXJucyBPcmRlclxuICAgICAqL1xuICAgIGdldE9yZGVyKG9yZGVySWQpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9yZGVyRm9yVXNlckFjY291bnQodXNlckFjY291bnQsIG9yZGVySWQpO1xuICAgIH1cbiAgICBnZXRPcmRlckFuZFNsb3Qob3JkZXJJZCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudCA9IHRoaXMuZ2V0VXNlckFjY291bnRBbmRTbG90KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gdGhpcy5nZXRPcmRlckZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LmRhdGEsIG9yZGVySWQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogb3JkZXIsXG4gICAgICAgICAgICBzbG90OiB1c2VyQWNjb3VudC5zbG90LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRPcmRlckJ5VXNlcklkRm9yVXNlckFjY291bnQodXNlckFjY291bnQsIHVzZXJPcmRlcklkKSB7XG4gICAgICAgIHJldHVybiB1c2VyQWNjb3VudC5vcmRlcnMuZmluZCgob3JkZXIpID0+IG9yZGVyLnVzZXJPcmRlcklkID09PSB1c2VyT3JkZXJJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB1c2VyT3JkZXJJZFxuICAgICAqIEByZXR1cm5zIE9yZGVyXG4gICAgICovXG4gICAgZ2V0T3JkZXJCeVVzZXJPcmRlcklkKHVzZXJPcmRlcklkKSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50ID0gdGhpcy5nZXRVc2VyQWNjb3VudCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPcmRlckJ5VXNlcklkRm9yVXNlckFjY291bnQodXNlckFjY291bnQsIHVzZXJPcmRlcklkKTtcbiAgICB9XG4gICAgZ2V0T3JkZXJCeVVzZXJPcmRlcklkQW5kU2xvdCh1c2VyT3JkZXJJZCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudCA9IHRoaXMuZ2V0VXNlckFjY291bnRBbmRTbG90KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gdGhpcy5nZXRPcmRlckJ5VXNlcklkRm9yVXNlckFjY291bnQodXNlckFjY291bnQuZGF0YSwgdXNlck9yZGVySWQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogb3JkZXIsXG4gICAgICAgICAgICBzbG90OiB1c2VyQWNjb3VudC5zbG90LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXRPcGVuT3JkZXJzRm9yVXNlckFjY291bnQodXNlckFjY291bnQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJBY2NvdW50ID09PSBudWxsIHx8IHVzZXJBY2NvdW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1c2VyQWNjb3VudC5vcmRlcnMuZmlsdGVyKChvcmRlcikgPT4gKDAsIHR5cGVzXzEuaXNWYXJpYW50KShvcmRlci5zdGF0dXMsICdvcGVuJykpO1xuICAgIH1cbiAgICBnZXRPcGVuT3JkZXJzKCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudCA9IHRoaXMuZ2V0VXNlckFjY291bnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3Blbk9yZGVyc0ZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50KTtcbiAgICB9XG4gICAgZ2V0T3Blbk9yZGVyc0FuZFNsb3QoKSB7XG4gICAgICAgIGNvbnN0IHVzZXJBY2NvdW50ID0gdGhpcy5nZXRVc2VyQWNjb3VudEFuZFNsb3QoKTtcbiAgICAgICAgY29uc3Qgb3Blbk9yZGVycyA9IHRoaXMuZ2V0T3Blbk9yZGVyc0ZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LmRhdGEpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogb3Blbk9yZGVycyxcbiAgICAgICAgICAgIHNsb3Q6IHVzZXJBY2NvdW50LnNsb3QsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldFVzZXJBY2NvdW50UHVibGljS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyQWNjb3VudFB1YmxpY0tleTtcbiAgICB9XG4gICAgYXN5bmMgZXhpc3RzKCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudFJQQ1Jlc3BvbnNlID0gYXdhaXQgdGhpcy5kcmlmdENsaWVudC5jb25uZWN0aW9uLmdldFBhcnNlZEFjY291bnRJbmZvKHRoaXMudXNlckFjY291bnRQdWJsaWNLZXkpO1xuICAgICAgICByZXR1cm4gdXNlckFjY291bnRSUENSZXNwb25zZS52YWx1ZSAhPT0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyB0aGUgdG90YWwgb3BlbiBiaWRzL2Fza3MgaW4gYSBwZXJwIG1hcmtldCAoaW5jbHVkaW5nIGxwcylcbiAgICAgKiBAcmV0dXJucyA6IG9wZW4gYmlkc1xuICAgICAqIEByZXR1cm5zIDogb3BlbiBhc2tzXG4gICAgICovXG4gICAgZ2V0UGVycEJpZEFza3MobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldFBlcnBQb3NpdGlvbihtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IFtscE9wZW5CaWRzLCBscE9wZW5Bc2tzXSA9IHRoaXMuZ2V0TFBCaWRBc2tzKG1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgdG90YWxPcGVuQmlkcyA9IGxwT3BlbkJpZHMuYWRkKHBvc2l0aW9uLm9wZW5CaWRzKTtcbiAgICAgICAgY29uc3QgdG90YWxPcGVuQXNrcyA9IGxwT3BlbkFza3MuYWRkKHBvc2l0aW9uLm9wZW5Bc2tzKTtcbiAgICAgICAgcmV0dXJuIFt0b3RhbE9wZW5CaWRzLCB0b3RhbE9wZW5Bc2tzXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyB0aGUgb3BlbiBiaWRzIGFuZCBhc2tzIGZvciBhbiBscFxuICAgICAqIEByZXR1cm5zIDogbHAgb3BlbiBiaWRzXG4gICAgICogQHJldHVybnMgOiBscCBvcGVuIGFza3NcbiAgICAgKi9cbiAgICBnZXRMUEJpZEFza3MobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldFBlcnBQb3NpdGlvbihtYXJrZXRJbmRleCk7XG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uLmxwU2hhcmVzLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgbnVtZXJpY0NvbnN0YW50c18xLlpFUk9dO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBbbWFya2V0T3BlbkJpZHMsIG1hcmtldE9wZW5Bc2tzXSA9ICgwLCBhbW1fMS5jYWxjdWxhdGVNYXJrZXRPcGVuQmlkQXNrKShtYXJrZXQuYW1tLmJhc2VBc3NldFJlc2VydmUsIG1hcmtldC5hbW0ubWluQmFzZUFzc2V0UmVzZXJ2ZSwgbWFya2V0LmFtbS5tYXhCYXNlQXNzZXRSZXNlcnZlLCBtYXJrZXQuYW1tLm9yZGVyU3RlcFNpemUpO1xuICAgICAgICBjb25zdCBscE9wZW5CaWRzID0gbWFya2V0T3BlbkJpZHNcbiAgICAgICAgICAgIC5tdWwocG9zaXRpb24ubHBTaGFyZXMpXG4gICAgICAgICAgICAuZGl2KG1hcmtldC5hbW0uc3FydEspO1xuICAgICAgICBjb25zdCBscE9wZW5Bc2tzID0gbWFya2V0T3BlbkFza3NcbiAgICAgICAgICAgIC5tdWwocG9zaXRpb24ubHBTaGFyZXMpXG4gICAgICAgICAgICAuZGl2KG1hcmtldC5hbW0uc3FydEspO1xuICAgICAgICByZXR1cm4gW2xwT3BlbkJpZHMsIGxwT3BlbkFza3NdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjYWxjdWxhdGVzIHRoZSBtYXJrZXQgcG9zaXRpb24gaWYgdGhlIGxwIHBvc2l0aW9uIHdhcyBzZXR0bGVkXG4gICAgICogQHJldHVybnMgOiB0aGUgc2V0dGxlZCB1c2VyUG9zaXRpb25cbiAgICAgKiBAcmV0dXJucyA6IHRoZSBkdXN0IGJhc2UgYXNzZXQgYW1vdW50IChpZSwgPCBzdGVwc2l6ZSlcbiAgICAgKiBAcmV0dXJucyA6IHBubCBmcm9tIHNldHRsZVxuICAgICAqL1xuICAgIGdldFBlcnBQb3NpdGlvbldpdGhMUFNldHRsZShtYXJrZXRJbmRleCwgb3JpZ2luYWxQb3NpdGlvbiwgYnVybkxwU2hhcmVzID0gZmFsc2UpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBvcmlnaW5hbFBvc2l0aW9uID1cbiAgICAgICAgICAgIChfYSA9IG9yaWdpbmFsUG9zaXRpb24gIT09IG51bGwgJiYgb3JpZ2luYWxQb3NpdGlvbiAhPT0gdm9pZCAwID8gb3JpZ2luYWxQb3NpdGlvbiA6IHRoaXMuZ2V0UGVycFBvc2l0aW9uKG1hcmtldEluZGV4KSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5nZXRFbXB0eVBvc2l0aW9uKG1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKG9yaWdpbmFsUG9zaXRpb24ubHBTaGFyZXMuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICByZXR1cm4gW29yaWdpbmFsUG9zaXRpb24sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBudW1lcmljQ29uc3RhbnRzXzEuWkVST107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldENsb25lZFBvc2l0aW9uKG9yaWdpbmFsUG9zaXRpb24pO1xuICAgICAgICBjb25zdCBtYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFBlcnBNYXJrZXRBY2NvdW50KHBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgaWYgKG1hcmtldC5hbW0ucGVyTHBCYXNlICE9IHBvc2l0aW9uLnBlckxwQmFzZSkge1xuICAgICAgICAgICAgLy8gcGVyTHBCYXNlID0gMSA9PiBwZXIgMTAgTFAgc2hhcmVzLCBwZXJMcEJhc2UgPSAtMSA9PiBwZXIgMC4xIExQIHNoYXJlc1xuICAgICAgICAgICAgY29uc3QgZXhwb0RpZmYgPSBtYXJrZXQuYW1tLnBlckxwQmFzZSAtIHBvc2l0aW9uLnBlckxwQmFzZTtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtldFBlckxwUmViYXNlU2NhbGFyID0gbmV3IF8xLkJOKDEwICoqIE1hdGguYWJzKGV4cG9EaWZmKSk7XG4gICAgICAgICAgICBpZiAoZXhwb0RpZmYgPiAwKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24ubGFzdEJhc2VBc3NldEFtb3VudFBlckxwID1cbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ubGFzdEJhc2VBc3NldEFtb3VudFBlckxwLm11bChtYXJrZXRQZXJMcFJlYmFzZVNjYWxhcik7XG4gICAgICAgICAgICAgICAgcG9zaXRpb24ubGFzdFF1b3RlQXNzZXRBbW91bnRQZXJMcCA9XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxhc3RRdW90ZUFzc2V0QW1vdW50UGVyTHAubXVsKG1hcmtldFBlckxwUmViYXNlU2NhbGFyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxhc3RCYXNlQXNzZXRBbW91bnRQZXJMcCA9XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxhc3RCYXNlQXNzZXRBbW91bnRQZXJMcC5kaXYobWFya2V0UGVyTHBSZWJhc2VTY2FsYXIpO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uLmxhc3RRdW90ZUFzc2V0QW1vdW50UGVyTHAgPVxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5sYXN0UXVvdGVBc3NldEFtb3VudFBlckxwLmRpdihtYXJrZXRQZXJMcFJlYmFzZVNjYWxhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3NpdGlvbi5wZXJMcEJhc2UgPSBwb3NpdGlvbi5wZXJMcEJhc2UgKyBleHBvRGlmZjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuU2hhcmVzID0gcG9zaXRpb24ubHBTaGFyZXM7XG4gICAgICAgIC8vIGluY29ycCB1bnNldHRsZWQgZnVuZGluZyBvbiBwcmUgc2V0dGxlZCBwb3NpdGlvblxuICAgICAgICBjb25zdCBxdW90ZUZ1bmRpbmdQbmwgPSAoMCwgXzEuY2FsY3VsYXRlUG9zaXRpb25GdW5kaW5nUE5MKShtYXJrZXQsIHBvc2l0aW9uKTtcbiAgICAgICAgbGV0IGJhc2VVbml0ID0gbnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTjtcbiAgICAgICAgaWYgKG1hcmtldC5hbW0ucGVyTHBCYXNlID09IHBvc2l0aW9uLnBlckxwQmFzZSkge1xuICAgICAgICAgICAgaWYgKHBvc2l0aW9uLnBlckxwQmFzZSA+PSAwICYmXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ucGVyTHBCYXNlIDw9IG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT05fRVhQLnRvTnVtYmVyKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXRQZXJMcFJlYmFzZSA9IG5ldyBfMS5CTigxMCAqKiBtYXJrZXQuYW1tLnBlckxwQmFzZSk7XG4gICAgICAgICAgICAgICAgYmFzZVVuaXQgPSBiYXNlVW5pdC5tdWwobWFya2V0UGVyTHBSZWJhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocG9zaXRpb24ucGVyTHBCYXNlIDwgMCAmJlxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLnBlckxwQmFzZSA+PSAtbnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTl9FWFAudG9OdW1iZXIoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtldFBlckxwUmViYXNlID0gbmV3IF8xLkJOKDEwICoqIE1hdGguYWJzKG1hcmtldC5hbW0ucGVyTHBCYXNlKSk7XG4gICAgICAgICAgICAgICAgYmFzZVVuaXQgPSBiYXNlVW5pdC5kaXYobWFya2V0UGVyTHBSZWJhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ2Nhbm5vdCBjYWxjJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93ICdtYXJrZXQuYW1tLnBlckxwQmFzZSAhPSBwb3NpdGlvbi5wZXJMcEJhc2UnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlbHRhQmFhID0gbWFya2V0LmFtbS5iYXNlQXNzZXRBbW91bnRQZXJMcFxuICAgICAgICAgICAgLnN1Yihwb3NpdGlvbi5sYXN0QmFzZUFzc2V0QW1vdW50UGVyTHApXG4gICAgICAgICAgICAubXVsKG5TaGFyZXMpXG4gICAgICAgICAgICAuZGl2KGJhc2VVbml0KTtcbiAgICAgICAgY29uc3QgZGVsdGFRYWEgPSBtYXJrZXQuYW1tLnF1b3RlQXNzZXRBbW91bnRQZXJMcFxuICAgICAgICAgICAgLnN1Yihwb3NpdGlvbi5sYXN0UXVvdGVBc3NldEFtb3VudFBlckxwKVxuICAgICAgICAgICAgLm11bChuU2hhcmVzKVxuICAgICAgICAgICAgLmRpdihiYXNlVW5pdCk7XG4gICAgICAgIGZ1bmN0aW9uIHNpZ24odikge1xuICAgICAgICAgICAgcmV0dXJuIHYuaXNOZWcoKSA/IG5ldyBfMS5CTigtMSkgOiBuZXcgXzEuQk4oMSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc3RhbmRhcmRpemUoYW1vdW50LCBzdGVwU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgcmVtYWluZGVyID0gYW1vdW50LmFicygpLm1vZChzdGVwU2l6ZSkubXVsKHNpZ24oYW1vdW50KSk7XG4gICAgICAgICAgICBjb25zdCBzdGFuZGFyZGl6ZWRBbW91bnQgPSBhbW91bnQuc3ViKHJlbWFpbmRlcik7XG4gICAgICAgICAgICByZXR1cm4gW3N0YW5kYXJkaXplZEFtb3VudCwgcmVtYWluZGVyXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbc3RhbmRhcmRpemVkQmFhLCByZW1haW5kZXJCYWFdID0gc3RhbmRhcmRpemUoZGVsdGFCYWEsIG1hcmtldC5hbW0ub3JkZXJTdGVwU2l6ZSk7XG4gICAgICAgIHBvc2l0aW9uLnJlbWFpbmRlckJhc2VBc3NldEFtb3VudCArPSByZW1haW5kZXJCYWEudG9OdW1iZXIoKTtcbiAgICAgICAgaWYgKE1hdGguYWJzKHBvc2l0aW9uLnJlbWFpbmRlckJhc2VBc3NldEFtb3VudCkgPlxuICAgICAgICAgICAgbWFya2V0LmFtbS5vcmRlclN0ZXBTaXplLnRvTnVtYmVyKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFtuZXdTdGFuZGFyZGl6ZWRCYWEsIG5ld1JlbWFpbmRlckJhYV0gPSBzdGFuZGFyZGl6ZShuZXcgXzEuQk4ocG9zaXRpb24ucmVtYWluZGVyQmFzZUFzc2V0QW1vdW50KSwgbWFya2V0LmFtbS5vcmRlclN0ZXBTaXplKTtcbiAgICAgICAgICAgIHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudCA9XG4gICAgICAgICAgICAgICAgcG9zaXRpb24uYmFzZUFzc2V0QW1vdW50LmFkZChuZXdTdGFuZGFyZGl6ZWRCYWEpO1xuICAgICAgICAgICAgcG9zaXRpb24ucmVtYWluZGVyQmFzZUFzc2V0QW1vdW50ID0gbmV3UmVtYWluZGVyQmFhLnRvTnVtYmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGR1c3RCYXNlQXNzZXRWYWx1ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBpZiAoYnVybkxwU2hhcmVzICYmIHBvc2l0aW9uLnJlbWFpbmRlckJhc2VBc3NldEFtb3VudCAhPSAwKSB7XG4gICAgICAgICAgICBjb25zdCBvcmFjbGVQcmljZURhdGEgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldE9yYWNsZURhdGFGb3JQZXJwTWFya2V0KHBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIGR1c3RCYXNlQXNzZXRWYWx1ZSA9IG5ldyBfMS5CTihNYXRoLmFicyhwb3NpdGlvbi5yZW1haW5kZXJCYXNlQXNzZXRBbW91bnQpKVxuICAgICAgICAgICAgICAgIC5tdWwob3JhY2xlUHJpY2VEYXRhLnByaWNlKVxuICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkFNTV9SRVNFUlZFX1BSRUNJU0lPTilcbiAgICAgICAgICAgICAgICAuYWRkKG51bWVyaWNDb25zdGFudHNfMS5PTkUpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB1cGRhdGVUeXBlO1xuICAgICAgICBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50LmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgdXBkYXRlVHlwZSA9ICdvcGVuJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzaWduKHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudCkuZXEoc2lnbihkZWx0YUJhYSkpKSB7XG4gICAgICAgICAgICB1cGRhdGVUeXBlID0gJ2luY3JlYXNlJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuYWJzKCkuZ3QoZGVsdGFCYWEuYWJzKCkpKSB7XG4gICAgICAgICAgICB1cGRhdGVUeXBlID0gJ3JlZHVjZSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50LmFicygpLmVxKGRlbHRhQmFhLmFicygpKSkge1xuICAgICAgICAgICAgdXBkYXRlVHlwZSA9ICdjbG9zZSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB1cGRhdGVUeXBlID0gJ2ZsaXAnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXdRdW90ZUVudHJ5O1xuICAgICAgICBsZXQgcG5sO1xuICAgICAgICBpZiAodXBkYXRlVHlwZSA9PSAnb3BlbicgfHwgdXBkYXRlVHlwZSA9PSAnaW5jcmVhc2UnKSB7XG4gICAgICAgICAgICBuZXdRdW90ZUVudHJ5ID0gcG9zaXRpb24ucXVvdGVFbnRyeUFtb3VudC5hZGQoZGVsdGFRYWEpO1xuICAgICAgICAgICAgcG5sID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXBkYXRlVHlwZSA9PSAncmVkdWNlJyB8fCB1cGRhdGVUeXBlID09ICdjbG9zZScpIHtcbiAgICAgICAgICAgIG5ld1F1b3RlRW50cnkgPSBwb3NpdGlvbi5xdW90ZUVudHJ5QW1vdW50LnN1Yihwb3NpdGlvbi5xdW90ZUVudHJ5QW1vdW50XG4gICAgICAgICAgICAgICAgLm11bChkZWx0YUJhYS5hYnMoKSlcbiAgICAgICAgICAgICAgICAuZGl2KHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5hYnMoKSkpO1xuICAgICAgICAgICAgcG5sID0gcG9zaXRpb24ucXVvdGVFbnRyeUFtb3VudC5zdWIobmV3UXVvdGVFbnRyeSkuYWRkKGRlbHRhUWFhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5ld1F1b3RlRW50cnkgPSBkZWx0YVFhYS5zdWIoZGVsdGFRYWEubXVsKHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5hYnMoKSkuZGl2KGRlbHRhQmFhLmFicygpKSk7XG4gICAgICAgICAgICBwbmwgPSBwb3NpdGlvbi5xdW90ZUVudHJ5QW1vdW50LmFkZChkZWx0YVFhYS5zdWIobmV3UXVvdGVFbnRyeSkpO1xuICAgICAgICB9XG4gICAgICAgIHBvc2l0aW9uLnF1b3RlRW50cnlBbW91bnQgPSBuZXdRdW90ZUVudHJ5O1xuICAgICAgICBwb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQgPSBwb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuYWRkKHN0YW5kYXJkaXplZEJhYSk7XG4gICAgICAgIHBvc2l0aW9uLnF1b3RlQXNzZXRBbW91bnQgPSBwb3NpdGlvbi5xdW90ZUFzc2V0QW1vdW50XG4gICAgICAgICAgICAuYWRkKGRlbHRhUWFhKVxuICAgICAgICAgICAgLmFkZChxdW90ZUZ1bmRpbmdQbmwpXG4gICAgICAgICAgICAuc3ViKGR1c3RCYXNlQXNzZXRWYWx1ZSk7XG4gICAgICAgIHBvc2l0aW9uLnF1b3RlQnJlYWtFdmVuQW1vdW50ID0gcG9zaXRpb24ucXVvdGVCcmVha0V2ZW5BbW91bnRcbiAgICAgICAgICAgIC5hZGQoZGVsdGFRYWEpXG4gICAgICAgICAgICAuYWRkKHF1b3RlRnVuZGluZ1BubClcbiAgICAgICAgICAgIC5zdWIoZHVzdEJhc2VBc3NldFZhbHVlKTtcbiAgICAgICAgLy8gdXBkYXRlIG9wZW4gYmlkcy9hc2tzXG4gICAgICAgIGNvbnN0IFttYXJrZXRPcGVuQmlkcywgbWFya2V0T3BlbkFza3NdID0gKDAsIGFtbV8xLmNhbGN1bGF0ZU1hcmtldE9wZW5CaWRBc2spKG1hcmtldC5hbW0uYmFzZUFzc2V0UmVzZXJ2ZSwgbWFya2V0LmFtbS5taW5CYXNlQXNzZXRSZXNlcnZlLCBtYXJrZXQuYW1tLm1heEJhc2VBc3NldFJlc2VydmUsIG1hcmtldC5hbW0ub3JkZXJTdGVwU2l6ZSk7XG4gICAgICAgIGNvbnN0IGxwT3BlbkJpZHMgPSBtYXJrZXRPcGVuQmlkc1xuICAgICAgICAgICAgLm11bChwb3NpdGlvbi5scFNoYXJlcylcbiAgICAgICAgICAgIC5kaXYobWFya2V0LmFtbS5zcXJ0Syk7XG4gICAgICAgIGNvbnN0IGxwT3BlbkFza3MgPSBtYXJrZXRPcGVuQXNrc1xuICAgICAgICAgICAgLm11bChwb3NpdGlvbi5scFNoYXJlcylcbiAgICAgICAgICAgIC5kaXYobWFya2V0LmFtbS5zcXJ0Syk7XG4gICAgICAgIHBvc2l0aW9uLm9wZW5CaWRzID0gbHBPcGVuQmlkcy5hZGQocG9zaXRpb24ub3BlbkJpZHMpO1xuICAgICAgICBwb3NpdGlvbi5vcGVuQXNrcyA9IGxwT3BlbkFza3MuYWRkKHBvc2l0aW9uLm9wZW5Bc2tzKTtcbiAgICAgICAgLy8gZWxpbWluYXRlIGNvdW50aW5nIGZ1bmRpbmcgb24gc2V0dGxlZCBwb3NpdGlvblxuICAgICAgICBpZiAocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcG9zaXRpb24ubGFzdEN1bXVsYXRpdmVGdW5kaW5nUmF0ZSA9IG1hcmtldC5hbW0uY3VtdWxhdGl2ZUZ1bmRpbmdSYXRlTG9uZztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQubHQobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICBwb3NpdGlvbi5sYXN0Q3VtdWxhdGl2ZUZ1bmRpbmdSYXRlID1cbiAgICAgICAgICAgICAgICBtYXJrZXQuYW1tLmN1bXVsYXRpdmVGdW5kaW5nUmF0ZVNob3J0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcG9zaXRpb24ubGFzdEN1bXVsYXRpdmVGdW5kaW5nUmF0ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbcG9zaXRpb24sIHJlbWFpbmRlckJhYSwgcG5sXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBCdXlpbmcgUG93ZXIgPSBmcmVlIGNvbGxhdGVyYWwgLyBpbml0aWFsIG1hcmdpbiByYXRpb1xuICAgICAqIEByZXR1cm5zIDogUHJlY2lzaW9uIFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGdldFBlcnBCdXlpbmdQb3dlcihtYXJrZXRJbmRleCwgY29sbGF0ZXJhbEJ1ZmZlciA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSB7XG4gICAgICAgIGNvbnN0IHBlcnBQb3NpdGlvbiA9IHRoaXMuZ2V0UGVycFBvc2l0aW9uV2l0aExQU2V0dGxlKG1hcmtldEluZGV4LCB1bmRlZmluZWQsIHRydWUpWzBdO1xuICAgICAgICBjb25zdCB3b3JzdENhc2VCYXNlQXNzZXRBbW91bnQgPSBwZXJwUG9zaXRpb25cbiAgICAgICAgICAgID8gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVdvcnN0Q2FzZUJhc2VBc3NldEFtb3VudCkocGVycFBvc2l0aW9uKVxuICAgICAgICAgICAgOiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgY29uc3QgZnJlZUNvbGxhdGVyYWwgPSB0aGlzLmdldEZyZWVDb2xsYXRlcmFsKCkuc3ViKGNvbGxhdGVyYWxCdWZmZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQZXJwQnV5aW5nUG93ZXJGcm9tRnJlZUNvbGxhdGVyYWxBbmRCYXNlQXNzZXRBbW91bnQobWFya2V0SW5kZXgsIGZyZWVDb2xsYXRlcmFsLCB3b3JzdENhc2VCYXNlQXNzZXRBbW91bnQpO1xuICAgIH1cbiAgICBnZXRQZXJwQnV5aW5nUG93ZXJGcm9tRnJlZUNvbGxhdGVyYWxBbmRCYXNlQXNzZXRBbW91bnQobWFya2V0SW5kZXgsIGZyZWVDb2xsYXRlcmFsLCBiYXNlQXNzZXRBbW91bnQpIHtcbiAgICAgICAgY29uc3QgbWFyZ2luUmF0aW8gPSAoMCwgXzEuY2FsY3VsYXRlTWFya2V0TWFyZ2luUmF0aW8pKHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpLCBiYXNlQXNzZXRBbW91bnQsICdJbml0aWFsJyk7XG4gICAgICAgIHJldHVybiBmcmVlQ29sbGF0ZXJhbC5tdWwobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pLmRpdihuZXcgXzEuQk4obWFyZ2luUmF0aW8pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBGcmVlIENvbGxhdGVyYWwgPSBUb3RhbCBjb2xsYXRlcmFsIC0gbWFyZ2luIHJlcXVpcmVtZW50XG4gICAgICogQHJldHVybnMgOiBQcmVjaXNpb24gUVVPVEVfUFJFQ0lTSU9OXG4gICAgICovXG4gICAgZ2V0RnJlZUNvbGxhdGVyYWwobWFyZ2luQ2F0ZWdvcnkgPSAnSW5pdGlhbCcpIHtcbiAgICAgICAgY29uc3QgdG90YWxDb2xsYXRlcmFsID0gdGhpcy5nZXRUb3RhbENvbGxhdGVyYWwobWFyZ2luQ2F0ZWdvcnksIHRydWUpO1xuICAgICAgICBjb25zdCBtYXJnaW5SZXF1aXJlbWVudCA9IG1hcmdpbkNhdGVnb3J5ID09PSAnSW5pdGlhbCdcbiAgICAgICAgICAgID8gdGhpcy5nZXRJbml0aWFsTWFyZ2luUmVxdWlyZW1lbnQoKVxuICAgICAgICAgICAgOiB0aGlzLmdldE1haW50ZW5hbmNlTWFyZ2luUmVxdWlyZW1lbnQoKTtcbiAgICAgICAgY29uc3QgZnJlZUNvbGxhdGVyYWwgPSB0b3RhbENvbGxhdGVyYWwuc3ViKG1hcmdpblJlcXVpcmVtZW50KTtcbiAgICAgICAgcmV0dXJuIGZyZWVDb2xsYXRlcmFsLmd0ZShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgPyBmcmVlQ29sbGF0ZXJhbCA6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBUaGUgbWFyZ2luIHJlcXVpcmVtZW50IG9mIGEgY2VydGFpbiB0eXBlIChJbml0aWFsIG9yIE1haW50ZW5hbmNlKSBpbiBVU0RDLiA6IFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGdldE1hcmdpblJlcXVpcmVtZW50KG1hcmdpbkNhdGVnb3J5LCBsaXF1aWRhdGlvbkJ1ZmZlciwgc3RyaWN0ID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VG90YWxQZXJwUG9zaXRpb25WYWx1ZShtYXJnaW5DYXRlZ29yeSwgbGlxdWlkYXRpb25CdWZmZXIsIHRydWUsIHN0cmljdCkuYWRkKHRoaXMuZ2V0U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlKHVuZGVmaW5lZCwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCB0cnVlLCBzdHJpY3QpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybnMgVGhlIGluaXRpYWwgbWFyZ2luIHJlcXVpcmVtZW50IGluIFVTREMuIDogUVVPVEVfUFJFQ0lTSU9OXG4gICAgICovXG4gICAgZ2V0SW5pdGlhbE1hcmdpblJlcXVpcmVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNYXJnaW5SZXF1aXJlbWVudCgnSW5pdGlhbCcsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIFRoZSBtYWludGVuYW5jZSBtYXJnaW4gcmVxdWlyZW1lbnQgaW4gVVNEQy4gOiBRVU9URV9QUkVDSVNJT05cbiAgICAgKi9cbiAgICBnZXRNYWludGVuYW5jZU1hcmdpblJlcXVpcmVtZW50KGxpcXVpZGF0aW9uQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1hcmdpblJlcXVpcmVtZW50KCdNYWludGVuYW5jZScsIGxpcXVpZGF0aW9uQnVmZmVyKTtcbiAgICB9XG4gICAgZ2V0QWN0aXZlUGVycFBvc2l0aW9uc0ZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50KSB7XG4gICAgICAgIHJldHVybiB1c2VyQWNjb3VudC5wZXJwUG9zaXRpb25zLmZpbHRlcigocG9zKSA9PiAhcG9zLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgfHxcbiAgICAgICAgICAgICFwb3MucXVvdGVBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgfHxcbiAgICAgICAgICAgICEocG9zLm9wZW5PcmRlcnMgPT0gMCkgfHxcbiAgICAgICAgICAgICFwb3MubHBTaGFyZXMuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKTtcbiAgICB9XG4gICAgZ2V0QWN0aXZlUGVycFBvc2l0aW9ucygpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFjdGl2ZVBlcnBQb3NpdGlvbnNGb3JVc2VyQWNjb3VudCh1c2VyQWNjb3VudCk7XG4gICAgfVxuICAgIGdldEFjdGl2ZVBlcnBQb3NpdGlvbnNBbmRTbG90KCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudCA9IHRoaXMuZ2V0VXNlckFjY291bnRBbmRTbG90KCk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuZ2V0QWN0aXZlUGVycFBvc2l0aW9uc0ZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LmRhdGEpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogcG9zaXRpb25zLFxuICAgICAgICAgICAgc2xvdDogdXNlckFjY291bnQuc2xvdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0QWN0aXZlU3BvdFBvc2l0aW9uc0ZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50KSB7XG4gICAgICAgIHJldHVybiB1c2VyQWNjb3VudC5zcG90UG9zaXRpb25zLmZpbHRlcigocG9zKSA9PiAhKDAsIHNwb3RQb3NpdGlvbl8xLmlzU3BvdFBvc2l0aW9uQXZhaWxhYmxlKShwb3MpKTtcbiAgICB9XG4gICAgZ2V0QWN0aXZlU3BvdFBvc2l0aW9ucygpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFjdGl2ZVNwb3RQb3NpdGlvbnNGb3JVc2VyQWNjb3VudCh1c2VyQWNjb3VudCk7XG4gICAgfVxuICAgIGdldEFjdGl2ZVNwb3RQb3NpdGlvbnNBbmRTbG90KCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudCA9IHRoaXMuZ2V0VXNlckFjY291bnRBbmRTbG90KCk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuZ2V0QWN0aXZlU3BvdFBvc2l0aW9uc0ZvclVzZXJBY2NvdW50KHVzZXJBY2NvdW50LmRhdGEpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogcG9zaXRpb25zLFxuICAgICAgICAgICAgc2xvdDogdXNlckFjY291bnQuc2xvdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyB1bnJlYWxpemVkIHBvc2l0aW9uIHByaWNlIHBubFxuICAgICAqIEByZXR1cm5zIDogUHJlY2lzaW9uIFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGdldFVucmVhbGl6ZWRQTkwod2l0aEZ1bmRpbmcsIG1hcmtldEluZGV4LCB3aXRoV2VpZ2h0TWFyZ2luQ2F0ZWdvcnksIHN0cmljdCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFjdGl2ZVBlcnBQb3NpdGlvbnMoKVxuICAgICAgICAgICAgLmZpbHRlcigocG9zKSA9PiAobWFya2V0SW5kZXggPyBwb3MubWFya2V0SW5kZXggPT09IG1hcmtldEluZGV4IDogdHJ1ZSkpXG4gICAgICAgICAgICAucmVkdWNlKCh1bnJlYWxpemVkUG5sLCBwZXJwUG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQocGVycFBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IG9yYWNsZVByaWNlRGF0YSA9IHRoaXMuZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQobWFya2V0Lm1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHF1b3RlU3BvdE1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0LnF1b3RlU3BvdE1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHF1b3RlT3JhY2xlUHJpY2VEYXRhID0gdGhpcy5nZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChtYXJrZXQucXVvdGVTcG90TWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgaWYgKHBlcnBQb3NpdGlvbi5scFNoYXJlcy5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICBwZXJwUG9zaXRpb24gPSB0aGlzLmdldFBlcnBQb3NpdGlvbldpdGhMUFNldHRsZShwZXJwUG9zaXRpb24ubWFya2V0SW5kZXgsIHVuZGVmaW5lZCwgISF3aXRoV2VpZ2h0TWFyZ2luQ2F0ZWdvcnkpWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHBvc2l0aW9uVW5yZWFsaXplZFBubCA9ICgwLCBfMS5jYWxjdWxhdGVQb3NpdGlvblBOTCkobWFya2V0LCBwZXJwUG9zaXRpb24sIHdpdGhGdW5kaW5nLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICAgICAgbGV0IHF1b3RlUHJpY2U7XG4gICAgICAgICAgICBpZiAoc3RyaWN0ICYmIHBvc2l0aW9uVW5yZWFsaXplZFBubC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICBxdW90ZVByaWNlID0gXzEuQk4ubWluKHF1b3RlT3JhY2xlUHJpY2VEYXRhLnByaWNlLCBxdW90ZVNwb3RNYXJrZXQuaGlzdG9yaWNhbE9yYWNsZURhdGEubGFzdE9yYWNsZVByaWNlVHdhcDVNaW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RyaWN0ICYmIHBvc2l0aW9uVW5yZWFsaXplZFBubC5sdChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICBxdW90ZVByaWNlID0gXzEuQk4ubWF4KHF1b3RlT3JhY2xlUHJpY2VEYXRhLnByaWNlLCBxdW90ZVNwb3RNYXJrZXQuaGlzdG9yaWNhbE9yYWNsZURhdGEubGFzdE9yYWNsZVByaWNlVHdhcDVNaW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcXVvdGVQcmljZSA9IHF1b3RlT3JhY2xlUHJpY2VEYXRhLnByaWNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9zaXRpb25VbnJlYWxpemVkUG5sID0gcG9zaXRpb25VbnJlYWxpemVkUG5sXG4gICAgICAgICAgICAgICAgLm11bChxdW90ZVByaWNlKVxuICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTik7XG4gICAgICAgICAgICBpZiAod2l0aFdlaWdodE1hcmdpbkNhdGVnb3J5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb25VbnJlYWxpemVkUG5sLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblVucmVhbGl6ZWRQbmwgPSBwb3NpdGlvblVucmVhbGl6ZWRQbmxcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tdWwoKDAsIF8xLmNhbGN1bGF0ZVVucmVhbGl6ZWRBc3NldFdlaWdodCkobWFya2V0LCBxdW90ZVNwb3RNYXJrZXQsIHBvc2l0aW9uVW5yZWFsaXplZFBubCwgd2l0aFdlaWdodE1hcmdpbkNhdGVnb3J5LCBvcmFjbGVQcmljZURhdGEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpdihuZXcgXzEuQk4obnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1dFSUdIVF9QUkVDSVNJT04pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5yZWFsaXplZFBubC5hZGQocG9zaXRpb25VbnJlYWxpemVkUG5sKTtcbiAgICAgICAgfSwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjYWxjdWxhdGVzIHVucmVhbGl6ZWQgZnVuZGluZyBwYXltZW50IHBubFxuICAgICAqIEByZXR1cm5zIDogUHJlY2lzaW9uIFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGdldFVucmVhbGl6ZWRGdW5kaW5nUE5MKG1hcmtldEluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJBY2NvdW50KClcbiAgICAgICAgICAgIC5wZXJwUG9zaXRpb25zLmZpbHRlcigocG9zKSA9PiBtYXJrZXRJbmRleCA/IHBvcy5tYXJrZXRJbmRleCA9PT0gbWFya2V0SW5kZXggOiB0cnVlKVxuICAgICAgICAgICAgLnJlZHVjZSgocG5sLCBwZXJwUG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQocGVycFBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiBwbmwuYWRkKCgwLCBfMS5jYWxjdWxhdGVQb3NpdGlvbkZ1bmRpbmdQTkwpKG1hcmtldCwgcGVycFBvc2l0aW9uKSk7XG4gICAgICAgIH0sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPKTtcbiAgICB9XG4gICAgZ2V0U3BvdE1hcmtldEFzc2V0QW5kTGlhYmlsaXR5VmFsdWUobWFya2V0SW5kZXgsIG1hcmdpbkNhdGVnb3J5LCBsaXF1aWRhdGlvbkJ1ZmZlciwgaW5jbHVkZU9wZW5PcmRlcnMsIHN0cmljdCA9IGZhbHNlLCBub3cpIHtcbiAgICAgICAgbm93ID0gbm93IHx8IG5ldyBfMS5CTihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xuICAgICAgICBsZXQgbmV0UXVvdGVWYWx1ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBsZXQgdG90YWxBc3NldFZhbHVlID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIGxldCB0b3RhbExpYWJpbGl0eVZhbHVlID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIGZvciAoY29uc3Qgc3BvdFBvc2l0aW9uIG9mIHRoaXMuZ2V0VXNlckFjY291bnQoKS5zcG90UG9zaXRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBjb3VudEZvckJhc2UgPSBtYXJrZXRJbmRleCA9PT0gdW5kZWZpbmVkIHx8IHNwb3RQb3NpdGlvbi5tYXJrZXRJbmRleCA9PT0gbWFya2V0SW5kZXg7XG4gICAgICAgICAgICBjb25zdCBjb3VudEZvclF1b3RlID0gbWFya2V0SW5kZXggPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIG1hcmtldEluZGV4ID09PSBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVggfHxcbiAgICAgICAgICAgICAgICAoaW5jbHVkZU9wZW5PcmRlcnMgJiYgc3BvdFBvc2l0aW9uLm9wZW5PcmRlcnMgIT09IDApO1xuICAgICAgICAgICAgaWYgKCgwLCBzcG90UG9zaXRpb25fMS5pc1Nwb3RQb3NpdGlvbkF2YWlsYWJsZSkoc3BvdFBvc2l0aW9uKSB8fFxuICAgICAgICAgICAgICAgICghY291bnRGb3JCYXNlICYmICFjb3VudEZvclF1b3RlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3BvdE1hcmtldEFjY291bnQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KHNwb3RQb3NpdGlvbi5tYXJrZXRJbmRleCk7XG4gICAgICAgICAgICBjb25zdCBvcmFjbGVQcmljZURhdGEgPSB0aGlzLmdldE9yYWNsZURhdGFGb3JTcG90TWFya2V0KHNwb3RQb3NpdGlvbi5tYXJrZXRJbmRleCk7XG4gICAgICAgICAgICBpZiAoc3BvdFBvc2l0aW9uLm1hcmtldEluZGV4ID09PSBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVggJiZcbiAgICAgICAgICAgICAgICBjb3VudEZvclF1b3RlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW5BbW91bnQgPSAoMCwgXzEuZ2V0U2lnbmVkVG9rZW5BbW91bnQpKCgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShzcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldEFjY291bnQsIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSksIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlLCAnYm9ycm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2VpZ2h0ZWRUb2tlblZhbHVlID0gdGhpcy5nZXRTcG90TGlhYmlsaXR5VmFsdWUodG9rZW5BbW91bnQsIG9yYWNsZVByaWNlRGF0YSwgc3BvdE1hcmtldEFjY291bnQsIG1hcmdpbkNhdGVnb3J5LCBsaXF1aWRhdGlvbkJ1ZmZlciwgc3RyaWN0LCBub3cpLmFicygpO1xuICAgICAgICAgICAgICAgICAgICBuZXRRdW90ZVZhbHVlID0gbmV0UXVvdGVWYWx1ZS5zdWIod2VpZ2h0ZWRUb2tlblZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodGVkVG9rZW5WYWx1ZSA9IHRoaXMuZ2V0U3BvdEFzc2V0VmFsdWUodG9rZW5BbW91bnQsIG9yYWNsZVByaWNlRGF0YSwgc3BvdE1hcmtldEFjY291bnQsIG1hcmdpbkNhdGVnb3J5LCBzdHJpY3QsIG5vdyk7XG4gICAgICAgICAgICAgICAgICAgIG5ldFF1b3RlVmFsdWUgPSBuZXRRdW90ZVZhbHVlLmFkZCh3ZWlnaHRlZFRva2VuVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaW5jbHVkZU9wZW5PcmRlcnMgJiYgY291bnRGb3JCYXNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlLCAnYm9ycm93JykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW5BbW91bnQgPSAoMCwgXzEuZ2V0U2lnbmVkVG9rZW5BbW91bnQpKCgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShzcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldEFjY291bnQsIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSksIF8xLlNwb3RCYWxhbmNlVHlwZS5CT1JST1cpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaWFiaWxpdHlWYWx1ZSA9IHRoaXMuZ2V0U3BvdExpYWJpbGl0eVZhbHVlKHRva2VuQW1vdW50LCBvcmFjbGVQcmljZURhdGEsIHNwb3RNYXJrZXRBY2NvdW50LCBtYXJnaW5DYXRlZ29yeSwgbGlxdWlkYXRpb25CdWZmZXIsIHN0cmljdCwgbm93KS5hYnMoKTtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxMaWFiaWxpdHlWYWx1ZSA9IHRvdGFsTGlhYmlsaXR5VmFsdWUuYWRkKGxpYWJpbGl0eVZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkFtb3VudCA9ICgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShzcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldEFjY291bnQsIHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2V0VmFsdWUgPSB0aGlzLmdldFNwb3RBc3NldFZhbHVlKHRva2VuQW1vdW50LCBvcmFjbGVQcmljZURhdGEsIHNwb3RNYXJrZXRBY2NvdW50LCBtYXJnaW5DYXRlZ29yeSwgc3RyaWN0LCBub3cpO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbEFzc2V0VmFsdWUgPSB0b3RhbEFzc2V0VmFsdWUuYWRkKGFzc2V0VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbd29yc3RDYXNlVG9rZW5BbW91bnQsIHdvcnN0Q2FzZVF1b3RlVG9rZW5BbW91bnRdID0gKDAsIHNwb3RQb3NpdGlvbl8xLmdldFdvcnN0Q2FzZVRva2VuQW1vdW50cykoc3BvdFBvc2l0aW9uLCBzcG90TWFya2V0QWNjb3VudCwgdGhpcy5nZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChzcG90UG9zaXRpb24ubWFya2V0SW5kZXgpKTtcbiAgICAgICAgICAgIGlmICh3b3JzdENhc2VUb2tlbkFtb3VudC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiYgY291bnRGb3JCYXNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUFzc2V0VmFsdWUgPSB0aGlzLmdldFNwb3RBc3NldFZhbHVlKHdvcnN0Q2FzZVRva2VuQW1vdW50LCBvcmFjbGVQcmljZURhdGEsIHNwb3RNYXJrZXRBY2NvdW50LCBtYXJnaW5DYXRlZ29yeSwgc3RyaWN0LCBub3cpO1xuICAgICAgICAgICAgICAgIHRvdGFsQXNzZXRWYWx1ZSA9IHRvdGFsQXNzZXRWYWx1ZS5hZGQoYmFzZUFzc2V0VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdvcnN0Q2FzZVRva2VuQW1vdW50Lmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJiBjb3VudEZvckJhc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlTGlhYmlsaXR5VmFsdWUgPSB0aGlzLmdldFNwb3RMaWFiaWxpdHlWYWx1ZSh3b3JzdENhc2VUb2tlbkFtb3VudCwgb3JhY2xlUHJpY2VEYXRhLCBzcG90TWFya2V0QWNjb3VudCwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBzdHJpY3QsIG5vdykuYWJzKCk7XG4gICAgICAgICAgICAgICAgdG90YWxMaWFiaWxpdHlWYWx1ZSA9IHRvdGFsTGlhYmlsaXR5VmFsdWUuYWRkKGJhc2VMaWFiaWxpdHlWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod29yc3RDYXNlUXVvdGVUb2tlbkFtb3VudC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiYgY291bnRGb3JRdW90ZSkge1xuICAgICAgICAgICAgICAgIG5ldFF1b3RlVmFsdWUgPSBuZXRRdW90ZVZhbHVlLmFkZCh3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50Lmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJiBjb3VudEZvclF1b3RlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHdlaWdodCA9IG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OO1xuICAgICAgICAgICAgICAgIGlmIChtYXJnaW5DYXRlZ29yeSA9PT0gJ0luaXRpYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdlaWdodCA9IF8xLkJOLm1heCh3ZWlnaHQsIG5ldyBfMS5CTih0aGlzLmdldFVzZXJBY2NvdW50KCkubWF4TWFyZ2luUmF0aW8pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgd2VpZ2h0ZWRUb2tlblZhbHVlID0gd29yc3RDYXNlUXVvdGVUb2tlbkFtb3VudFxuICAgICAgICAgICAgICAgICAgICAuYWJzKClcbiAgICAgICAgICAgICAgICAgICAgLm11bCh3ZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1dFSUdIVF9QUkVDSVNJT04pO1xuICAgICAgICAgICAgICAgIG5ldFF1b3RlVmFsdWUgPSBuZXRRdW90ZVZhbHVlLnN1Yih3ZWlnaHRlZFRva2VuVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxMaWFiaWxpdHlWYWx1ZSA9IHRvdGFsTGlhYmlsaXR5VmFsdWUuYWRkKG5ldyBfMS5CTihzcG90UG9zaXRpb24ub3Blbk9yZGVycykubXVsKG51bWVyaWNDb25zdGFudHNfMS5PUEVOX09SREVSX01BUkdJTl9SRVFVSVJFTUVOVCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJrZXRJbmRleCA9PT0gdW5kZWZpbmVkIHx8IG1hcmtldEluZGV4ID09PSBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgpIHtcbiAgICAgICAgICAgIGlmIChuZXRRdW90ZVZhbHVlLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgICAgIHRvdGFsQXNzZXRWYWx1ZSA9IHRvdGFsQXNzZXRWYWx1ZS5hZGQobmV0UXVvdGVWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3RhbExpYWJpbGl0eVZhbHVlID0gdG90YWxMaWFiaWxpdHlWYWx1ZS5hZGQobmV0UXVvdGVWYWx1ZS5hYnMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdG90YWxBc3NldFZhbHVlLCB0b3RhbExpYWJpbGl0eVZhbHVlIH07XG4gICAgfVxuICAgIGdldFNwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZShtYXJrZXRJbmRleCwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBpbmNsdWRlT3Blbk9yZGVycywgc3RyaWN0ID0gZmFsc2UsIG5vdykge1xuICAgICAgICBjb25zdCB7IHRvdGFsTGlhYmlsaXR5VmFsdWUgfSA9IHRoaXMuZ2V0U3BvdE1hcmtldEFzc2V0QW5kTGlhYmlsaXR5VmFsdWUobWFya2V0SW5kZXgsIG1hcmdpbkNhdGVnb3J5LCBsaXF1aWRhdGlvbkJ1ZmZlciwgaW5jbHVkZU9wZW5PcmRlcnMsIHN0cmljdCwgbm93KTtcbiAgICAgICAgcmV0dXJuIHRvdGFsTGlhYmlsaXR5VmFsdWU7XG4gICAgfVxuICAgIGdldFNwb3RMaWFiaWxpdHlWYWx1ZSh0b2tlbkFtb3VudCwgb3JhY2xlUHJpY2VEYXRhLCBzcG90TWFya2V0QWNjb3VudCwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBzdHJpY3QgPSBmYWxzZSwgbm93KSB7XG4gICAgICAgIGxldCBsaWFiaWxpdHlWYWx1ZSA9IG51bGw7XG4gICAgICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGVzdE9yYWNsZVR3YXAgPSAoMCwgb3JhY2xlc18xLmNhbGN1bGF0ZUxpdmVPcmFjbGVUd2FwKShzcG90TWFya2V0QWNjb3VudC5oaXN0b3JpY2FsT3JhY2xlRGF0YSwgb3JhY2xlUHJpY2VEYXRhLCBub3csIG51bWVyaWNDb25zdGFudHNfMS5GSVZFX01JTlVURSAvLyA1TUlOXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbGlhYmlsaXR5VmFsdWUgPSAoMCwgXzEuZ2V0U3RyaWN0VG9rZW5WYWx1ZSkodG9rZW5BbW91bnQsIHNwb3RNYXJrZXRBY2NvdW50LmRlY2ltYWxzLCBvcmFjbGVQcmljZURhdGEsIGVzdE9yYWNsZVR3YXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGlhYmlsaXR5VmFsdWUgPSAoMCwgXzEuZ2V0VG9rZW5WYWx1ZSkodG9rZW5BbW91bnQsIHNwb3RNYXJrZXRBY2NvdW50LmRlY2ltYWxzLCBvcmFjbGVQcmljZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXJnaW5DYXRlZ29yeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgd2VpZ2h0ID0gKDAsIHNwb3RCYWxhbmNlXzEuY2FsY3VsYXRlTGlhYmlsaXR5V2VpZ2h0KSh0b2tlbkFtb3VudCwgc3BvdE1hcmtldEFjY291bnQsIG1hcmdpbkNhdGVnb3J5KTtcbiAgICAgICAgICAgIGlmIChtYXJnaW5DYXRlZ29yeSA9PT0gJ0luaXRpYWwnKSB7XG4gICAgICAgICAgICAgICAgd2VpZ2h0ID0gXzEuQk4ubWF4KHdlaWdodCwgbmV3IF8xLkJOKHRoaXMuZ2V0VXNlckFjY291bnQoKS5tYXhNYXJnaW5SYXRpbykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxpcXVpZGF0aW9uQnVmZmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB3ZWlnaHQgPSB3ZWlnaHQuYWRkKGxpcXVpZGF0aW9uQnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpYWJpbGl0eVZhbHVlID0gbGlhYmlsaXR5VmFsdWVcbiAgICAgICAgICAgICAgICAubXVsKHdlaWdodClcbiAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlhYmlsaXR5VmFsdWU7XG4gICAgfVxuICAgIGdldFNwb3RNYXJrZXRBc3NldFZhbHVlKG1hcmtldEluZGV4LCBtYXJnaW5DYXRlZ29yeSwgaW5jbHVkZU9wZW5PcmRlcnMsIHN0cmljdCA9IGZhbHNlLCBub3cpIHtcbiAgICAgICAgY29uc3QgeyB0b3RhbEFzc2V0VmFsdWUgfSA9IHRoaXMuZ2V0U3BvdE1hcmtldEFzc2V0QW5kTGlhYmlsaXR5VmFsdWUobWFya2V0SW5kZXgsIG1hcmdpbkNhdGVnb3J5LCB1bmRlZmluZWQsIGluY2x1ZGVPcGVuT3JkZXJzLCBzdHJpY3QsIG5vdyk7XG4gICAgICAgIHJldHVybiB0b3RhbEFzc2V0VmFsdWU7XG4gICAgfVxuICAgIGdldFNwb3RBc3NldFZhbHVlKHRva2VuQW1vdW50LCBvcmFjbGVQcmljZURhdGEsIHNwb3RNYXJrZXRBY2NvdW50LCBtYXJnaW5DYXRlZ29yeSwgc3RyaWN0ID0gZmFsc2UsIG5vdykge1xuICAgICAgICBsZXQgYXNzZXRWYWx1ZSA9IG51bGw7XG4gICAgICAgIGlmIChzdHJpY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGVzdE9yYWNsZVR3YXAgPSAoMCwgb3JhY2xlc18xLmNhbGN1bGF0ZUxpdmVPcmFjbGVUd2FwKShzcG90TWFya2V0QWNjb3VudC5oaXN0b3JpY2FsT3JhY2xlRGF0YSwgb3JhY2xlUHJpY2VEYXRhLCBub3csIG51bWVyaWNDb25zdGFudHNfMS5GSVZFX01JTlVURSAvLyA1TUlOXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYXNzZXRWYWx1ZSA9ICgwLCBfMS5nZXRTdHJpY3RUb2tlblZhbHVlKSh0b2tlbkFtb3VudCwgc3BvdE1hcmtldEFjY291bnQuZGVjaW1hbHMsIG9yYWNsZVByaWNlRGF0YSwgZXN0T3JhY2xlVHdhcCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NldFZhbHVlID0gKDAsIF8xLmdldFRva2VuVmFsdWUpKHRva2VuQW1vdW50LCBzcG90TWFya2V0QWNjb3VudC5kZWNpbWFscywgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWFyZ2luQ2F0ZWdvcnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qgd2VpZ2h0ID0gKDAsIHNwb3RCYWxhbmNlXzEuY2FsY3VsYXRlQXNzZXRXZWlnaHQpKHRva2VuQW1vdW50LCBzcG90TWFya2V0QWNjb3VudCwgbWFyZ2luQ2F0ZWdvcnkpO1xuICAgICAgICAgICAgYXNzZXRWYWx1ZSA9IGFzc2V0VmFsdWUubXVsKHdlaWdodCkuZGl2KG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzZXRWYWx1ZTtcbiAgICB9XG4gICAgZ2V0U3BvdFBvc2l0aW9uVmFsdWUobWFya2V0SW5kZXgsIG1hcmdpbkNhdGVnb3J5LCBpbmNsdWRlT3Blbk9yZGVycywgc3RyaWN0ID0gZmFsc2UsIG5vdykge1xuICAgICAgICBjb25zdCB7IHRvdGFsQXNzZXRWYWx1ZSwgdG90YWxMaWFiaWxpdHlWYWx1ZSB9ID0gdGhpcy5nZXRTcG90TWFya2V0QXNzZXRBbmRMaWFiaWxpdHlWYWx1ZShtYXJrZXRJbmRleCwgbWFyZ2luQ2F0ZWdvcnksIHVuZGVmaW5lZCwgaW5jbHVkZU9wZW5PcmRlcnMsIHN0cmljdCwgbm93KTtcbiAgICAgICAgcmV0dXJuIHRvdGFsQXNzZXRWYWx1ZS5zdWIodG90YWxMaWFiaWxpdHlWYWx1ZSk7XG4gICAgfVxuICAgIGdldE5ldFNwb3RNYXJrZXRWYWx1ZSh3aXRoV2VpZ2h0TWFyZ2luQ2F0ZWdvcnkpIHtcbiAgICAgICAgY29uc3QgeyB0b3RhbEFzc2V0VmFsdWUsIHRvdGFsTGlhYmlsaXR5VmFsdWUgfSA9IHRoaXMuZ2V0U3BvdE1hcmtldEFzc2V0QW5kTGlhYmlsaXR5VmFsdWUodW5kZWZpbmVkLCB3aXRoV2VpZ2h0TWFyZ2luQ2F0ZWdvcnkpO1xuICAgICAgICByZXR1cm4gdG90YWxBc3NldFZhbHVlLnN1Yih0b3RhbExpYWJpbGl0eVZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBUb3RhbENvbGxhdGVyYWw6IGNvbGxhdGVyYWwgKyB1bnJlYWxpemVkIHBubFxuICAgICAqIEByZXR1cm5zIDogUHJlY2lzaW9uIFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGdldFRvdGFsQ29sbGF0ZXJhbChtYXJnaW5DYXRlZ29yeSA9ICdJbml0aWFsJywgc3RyaWN0ID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3BvdE1hcmtldEFzc2V0VmFsdWUodW5kZWZpbmVkLCBtYXJnaW5DYXRlZ29yeSwgdHJ1ZSwgc3RyaWN0KS5hZGQodGhpcy5nZXRVbnJlYWxpemVkUE5MKHRydWUsIHVuZGVmaW5lZCwgbWFyZ2luQ2F0ZWdvcnksIHN0cmljdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjYWxjdWxhdGVzIFVzZXIgSGVhbHRoIGJ5IGNvbXBhcmluZyB0b3RhbCBjb2xsYXRlcmFsIGFuZCBtYWludC4gbWFyZ2luIHJlcXVpcmVtZW50XG4gICAgICogQHJldHVybnMgOiBudW1iZXIgKHZhbHVlIGZyb20gWzAsIDEwMF0pXG4gICAgICovXG4gICAgZ2V0SGVhbHRoKCkge1xuICAgICAgICBjb25zdCB1c2VyQWNjb3VudCA9IHRoaXMuZ2V0VXNlckFjY291bnQoKTtcbiAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkodXNlckFjY291bnQuc3RhdHVzLCAnYmVpbmdMaXF1aWRhdGVkJykgfHxcbiAgICAgICAgICAgICgwLCB0eXBlc18xLmlzVmFyaWFudCkodXNlckFjY291bnQuc3RhdHVzLCAnYmFua3J1cHQnKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG90YWxDb2xsYXRlcmFsID0gdGhpcy5nZXRUb3RhbENvbGxhdGVyYWwoJ01haW50ZW5hbmNlJyk7XG4gICAgICAgIGNvbnN0IG1haW50ZW5hbmNlTWFyZ2luUmVxID0gdGhpcy5nZXRNYWludGVuYW5jZU1hcmdpblJlcXVpcmVtZW50KCk7XG4gICAgICAgIGxldCBoZWFsdGg7XG4gICAgICAgIGlmIChtYWludGVuYW5jZU1hcmdpblJlcS5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykgJiYgdG90YWxDb2xsYXRlcmFsLmd0ZShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIGhlYWx0aCA9IDEwMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0b3RhbENvbGxhdGVyYWwubHRlKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgaGVhbHRoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhlYWx0aCA9IE1hdGgucm91bmQoTWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCAoMSAtIG1haW50ZW5hbmNlTWFyZ2luUmVxLnRvTnVtYmVyKCkgLyB0b3RhbENvbGxhdGVyYWwudG9OdW1iZXIoKSkgKlxuICAgICAgICAgICAgICAgIDEwMCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhbHRoO1xuICAgIH1cbiAgICBjYWxjdWxhdGVXZWlnaHRlZFBlcnBQb3NpdGlvblZhbHVlKHBlcnBQb3NpdGlvbiwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBpbmNsdWRlT3Blbk9yZGVycywgc3RyaWN0ID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbWFya2V0ID0gdGhpcy5kcmlmdENsaWVudC5nZXRQZXJwTWFya2V0QWNjb3VudChwZXJwUG9zaXRpb24ubWFya2V0SW5kZXgpO1xuICAgICAgICBpZiAocGVycFBvc2l0aW9uLmxwU2hhcmVzLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgLy8gaXMgYW4gbHAsIGNsb25lIHNvIHdlIGRvbnQgbXV0YXRlIHRoZSBwb3NpdGlvblxuICAgICAgICAgICAgcGVycFBvc2l0aW9uID0gdGhpcy5nZXRQZXJwUG9zaXRpb25XaXRoTFBTZXR0bGUobWFya2V0Lm1hcmtldEluZGV4LCB0aGlzLmdldENsb25lZFBvc2l0aW9uKHBlcnBQb3NpdGlvbiksICEhbWFyZ2luQ2F0ZWdvcnkpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGxldCB2YWx1YXRpb25QcmljZSA9IHRoaXMuZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQobWFya2V0Lm1hcmtldEluZGV4KS5wcmljZTtcbiAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkobWFya2V0LnN0YXR1cywgJ3NldHRsZW1lbnQnKSkge1xuICAgICAgICAgICAgdmFsdWF0aW9uUHJpY2UgPSBtYXJrZXQuZXhwaXJ5UHJpY2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmFzZUFzc2V0QW1vdW50ID0gaW5jbHVkZU9wZW5PcmRlcnNcbiAgICAgICAgICAgID8gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVdvcnN0Q2FzZUJhc2VBc3NldEFtb3VudCkocGVycFBvc2l0aW9uKVxuICAgICAgICAgICAgOiBwZXJwUG9zaXRpb24uYmFzZUFzc2V0QW1vdW50O1xuICAgICAgICBsZXQgYmFzZUFzc2V0VmFsdWUgPSBiYXNlQXNzZXRBbW91bnRcbiAgICAgICAgICAgIC5hYnMoKVxuICAgICAgICAgICAgLm11bCh2YWx1YXRpb25QcmljZSlcbiAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLkJBU0VfUFJFQ0lTSU9OKTtcbiAgICAgICAgaWYgKG1hcmdpbkNhdGVnb3J5KSB7XG4gICAgICAgICAgICBsZXQgbWFyZ2luUmF0aW8gPSBuZXcgXzEuQk4oKDAsIF8xLmNhbGN1bGF0ZU1hcmtldE1hcmdpblJhdGlvKShtYXJrZXQsIGJhc2VBc3NldEFtb3VudC5hYnMoKSwgbWFyZ2luQ2F0ZWdvcnkpKTtcbiAgICAgICAgICAgIGlmIChtYXJnaW5DYXRlZ29yeSA9PT0gJ0luaXRpYWwnKSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luUmF0aW8gPSBfMS5CTi5tYXgobWFyZ2luUmF0aW8sIG5ldyBfMS5CTih0aGlzLmdldFVzZXJBY2NvdW50KCkubWF4TWFyZ2luUmF0aW8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaXF1aWRhdGlvbkJ1ZmZlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luUmF0aW8gPSBtYXJnaW5SYXRpby5hZGQobGlxdWlkYXRpb25CdWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkobWFya2V0LnN0YXR1cywgJ3NldHRsZW1lbnQnKSkge1xuICAgICAgICAgICAgICAgIG1hcmdpblJhdGlvID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBxdW90ZVNwb3RNYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldC5xdW90ZVNwb3RNYXJrZXRJbmRleCk7XG4gICAgICAgICAgICBjb25zdCBxdW90ZU9yYWNsZVByaWNlRGF0YSA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0T3JhY2xlUHJpY2VEYXRhQW5kU2xvdChxdW90ZVNwb3RNYXJrZXQub3JhY2xlKS5kYXRhO1xuICAgICAgICAgICAgbGV0IHF1b3RlUHJpY2U7XG4gICAgICAgICAgICBpZiAoc3RyaWN0KSB7XG4gICAgICAgICAgICAgICAgcXVvdGVQcmljZSA9IF8xLkJOLm1heChxdW90ZU9yYWNsZVByaWNlRGF0YS5wcmljZSwgcXVvdGVTcG90TWFya2V0Lmhpc3RvcmljYWxPcmFjbGVEYXRhLmxhc3RPcmFjbGVQcmljZVR3YXA1TWluKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHF1b3RlUHJpY2UgPSBxdW90ZU9yYWNsZVByaWNlRGF0YS5wcmljZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJhc2VBc3NldFZhbHVlID0gYmFzZUFzc2V0VmFsdWVcbiAgICAgICAgICAgICAgICAubXVsKHF1b3RlUHJpY2UpXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgIC5tdWwobWFyZ2luUmF0aW8pXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuTUFSR0lOX1BSRUNJU0lPTik7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZU9wZW5PcmRlcnMpIHtcbiAgICAgICAgICAgICAgICBiYXNlQXNzZXRWYWx1ZSA9IGJhc2VBc3NldFZhbHVlLmFkZChuZXcgXzEuQk4ocGVycFBvc2l0aW9uLm9wZW5PcmRlcnMpLm11bChudW1lcmljQ29uc3RhbnRzXzEuT1BFTl9PUkRFUl9NQVJHSU5fUkVRVUlSRU1FTlQpKTtcbiAgICAgICAgICAgICAgICBpZiAocGVycFBvc2l0aW9uLmxwU2hhcmVzLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlQXNzZXRWYWx1ZSA9IGJhc2VBc3NldFZhbHVlLmFkZChfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1BSRUNJU0lPTiwgdmFsdWF0aW9uUHJpY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tdWwobWFya2V0LmFtbS5vcmRlclN0ZXBTaXplKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzZUFzc2V0VmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNhbGN1bGF0ZXMgcG9zaXRpb24gdmFsdWUgb2YgYSBzaW5nbGUgcGVycCBtYXJrZXQgaW4gbWFyZ2luIHN5c3RlbVxuICAgICAqIEByZXR1cm5zIDogUHJlY2lzaW9uIFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGdldFBlcnBNYXJrZXRMaWFiaWxpdHlWYWx1ZShtYXJrZXRJbmRleCwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBpbmNsdWRlT3Blbk9yZGVycywgc3RyaWN0ID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgcGVycFBvc2l0aW9uID0gdGhpcy5nZXRQZXJwUG9zaXRpb24obWFya2V0SW5kZXgpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVXZWlnaHRlZFBlcnBQb3NpdGlvblZhbHVlKHBlcnBQb3NpdGlvbiwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBpbmNsdWRlT3Blbk9yZGVycywgc3RyaWN0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBzdW0gb2YgcG9zaXRpb24gdmFsdWUgYWNyb3NzIGFsbCBwb3NpdGlvbnMgaW4gbWFyZ2luIHN5c3RlbVxuICAgICAqIEByZXR1cm5zIDogUHJlY2lzaW9uIFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGdldFRvdGFsUGVycFBvc2l0aW9uVmFsdWUobWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBpbmNsdWRlT3Blbk9yZGVycywgc3RyaWN0ID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWN0aXZlUGVycFBvc2l0aW9ucygpLnJlZHVjZSgodG90YWxQZXJwVmFsdWUsIHBlcnBQb3NpdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYmFzZUFzc2V0VmFsdWUgPSB0aGlzLmNhbGN1bGF0ZVdlaWdodGVkUGVycFBvc2l0aW9uVmFsdWUocGVycFBvc2l0aW9uLCBtYXJnaW5DYXRlZ29yeSwgbGlxdWlkYXRpb25CdWZmZXIsIGluY2x1ZGVPcGVuT3JkZXJzLCBzdHJpY3QpO1xuICAgICAgICAgICAgcmV0dXJuIHRvdGFsUGVycFZhbHVlLmFkZChiYXNlQXNzZXRWYWx1ZSk7XG4gICAgICAgIH0sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBwb3NpdGlvbiB2YWx1ZSBpbiBtYXJnaW4gc3lzdGVtXG4gICAgICogQHJldHVybnMgOiBQcmVjaXNpb24gUVVPVEVfUFJFQ0lTSU9OXG4gICAgICovXG4gICAgZ2V0UGVycFBvc2l0aW9uVmFsdWUobWFya2V0SW5kZXgsIG9yYWNsZVByaWNlRGF0YSwgaW5jbHVkZU9wZW5PcmRlcnMgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCB1c2VyUG9zaXRpb24gPSB0aGlzLmdldFBlcnBQb3NpdGlvbldpdGhMUFNldHRsZShtYXJrZXRJbmRleClbMF0gfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0RW1wdHlQb3NpdGlvbihtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQodXNlclBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgcmV0dXJuICgwLCBtYXJnaW5fMS5jYWxjdWxhdGVCYXNlQXNzZXRWYWx1ZVdpdGhPcmFjbGUpKG1hcmtldCwgdXNlclBvc2l0aW9uLCBvcmFjbGVQcmljZURhdGEsIGluY2x1ZGVPcGVuT3JkZXJzKTtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb25TaWRlKGN1cnJlbnRQb3NpdGlvbikge1xuICAgICAgICBpZiAoY3VycmVudFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHJldHVybiBfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGN1cnJlbnRQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQubHQobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICByZXR1cm4gXzEuUG9zaXRpb25EaXJlY3Rpb24uU0hPUlQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNhbGN1bGF0ZXMgYXZlcmFnZSBleGl0IHByaWNlIChvcHRpb25hbGx5IGZvciBjbG9zaW5nIHVwIHRvIDEwMCUgb2YgcG9zaXRpb24pXG4gICAgICogQHJldHVybnMgOiBQcmVjaXNpb24gUFJJQ0VfUFJFQ0lTSU9OXG4gICAgICovXG4gICAgZ2V0UG9zaXRpb25Fc3RpbWF0ZWRFeGl0UHJpY2VBbmRQbmwocG9zaXRpb24sIGFtb3VudFRvQ2xvc2UsIHVzZUFNTUNsb3NlID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgbWFya2V0ID0gdGhpcy5kcmlmdENsaWVudC5nZXRQZXJwTWFya2V0QWNjb3VudChwb3NpdGlvbi5tYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGVudHJ5UHJpY2UgPSAoMCwgcG9zaXRpb25fMS5jYWxjdWxhdGVFbnRyeVByaWNlKShwb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IG9yYWNsZVByaWNlRGF0YSA9IHRoaXMuZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQocG9zaXRpb24ubWFya2V0SW5kZXgpO1xuICAgICAgICBpZiAoYW1vdW50VG9DbG9zZSkge1xuICAgICAgICAgICAgaWYgKGFtb3VudFRvQ2xvc2UuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsoMCwgXzEuY2FsY3VsYXRlUmVzZXJ2ZVByaWNlKShtYXJrZXQsIG9yYWNsZVByaWNlRGF0YSksIG51bWVyaWNDb25zdGFudHNfMS5aRVJPXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvc2l0aW9uID0ge1xuICAgICAgICAgICAgICAgIGJhc2VBc3NldEFtb3VudDogYW1vdW50VG9DbG9zZSxcbiAgICAgICAgICAgICAgICBsYXN0Q3VtdWxhdGl2ZUZ1bmRpbmdSYXRlOiBwb3NpdGlvbi5sYXN0Q3VtdWxhdGl2ZUZ1bmRpbmdSYXRlLFxuICAgICAgICAgICAgICAgIG1hcmtldEluZGV4OiBwb3NpdGlvbi5tYXJrZXRJbmRleCxcbiAgICAgICAgICAgICAgICBxdW90ZUFzc2V0QW1vdW50OiBwb3NpdGlvbi5xdW90ZUFzc2V0QW1vdW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYmFzZUFzc2V0VmFsdWU7XG4gICAgICAgIGlmICh1c2VBTU1DbG9zZSkge1xuICAgICAgICAgICAgYmFzZUFzc2V0VmFsdWUgPSAoMCwgXzEuY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWUpKG1hcmtldCwgcG9zaXRpb24sIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiYXNlQXNzZXRWYWx1ZSA9ICgwLCBtYXJnaW5fMS5jYWxjdWxhdGVCYXNlQXNzZXRWYWx1ZVdpdGhPcmFjbGUpKG1hcmtldCwgcG9zaXRpb24sIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHJldHVybiBbbnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleGl0UHJpY2UgPSBiYXNlQXNzZXRWYWx1ZVxuICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTylcbiAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50LmFicygpKTtcbiAgICAgICAgY29uc3QgcG5sUGVyQmFzZSA9IGV4aXRQcmljZS5zdWIoZW50cnlQcmljZSk7XG4gICAgICAgIGNvbnN0IHBubCA9IHBubFBlckJhc2VcbiAgICAgICAgICAgIC5tdWwocG9zaXRpb24uYmFzZUFzc2V0QW1vdW50KVxuICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1RPX1FVT1RFX1BSRUNJU0lPTl9SQVRJTyk7XG4gICAgICAgIHJldHVybiBbZXhpdFByaWNlLCBwbmxdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBjYWxjdWxhdGVzIGN1cnJlbnQgdXNlciBsZXZlcmFnZSB3aGljaCBpcyAodG90YWwgbGlhYmlsaXR5IHNpemUpIC8gKG5ldCBhc3NldCB2YWx1ZSlcbiAgICAgKiBAcmV0dXJucyA6IFByZWNpc2lvbiBURU5fVEhPVVNBTkRcbiAgICAgKi9cbiAgICBnZXRMZXZlcmFnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlTGV2ZXJhZ2VGcm9tQ29tcG9uZW50cyh0aGlzLmdldExldmVyYWdlQ29tcG9uZW50cygpKTtcbiAgICB9XG4gICAgY2FsY3VsYXRlTGV2ZXJhZ2VGcm9tQ29tcG9uZW50cyh7IHBlcnBMaWFiaWxpdHlWYWx1ZSwgcGVycFBubCwgc3BvdEFzc2V0VmFsdWUsIHNwb3RMaWFiaWxpdHlWYWx1ZSwgfSkge1xuICAgICAgICBjb25zdCB0b3RhbExpYWJpbGl0eVZhbHVlID0gcGVycExpYWJpbGl0eVZhbHVlLmFkZChzcG90TGlhYmlsaXR5VmFsdWUpO1xuICAgICAgICBjb25zdCB0b3RhbEFzc2V0VmFsdWUgPSBzcG90QXNzZXRWYWx1ZS5hZGQocGVycFBubCk7XG4gICAgICAgIGNvbnN0IG5ldEFzc2V0VmFsdWUgPSB0b3RhbEFzc2V0VmFsdWUuc3ViKHNwb3RMaWFiaWxpdHlWYWx1ZSk7XG4gICAgICAgIGlmIChuZXRBc3NldFZhbHVlLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b3RhbExpYWJpbGl0eVZhbHVlLm11bChudW1lcmljQ29uc3RhbnRzXzEuVEVOX1RIT1VTQU5EKS5kaXYobmV0QXNzZXRWYWx1ZSk7XG4gICAgfVxuICAgIGdldExldmVyYWdlQ29tcG9uZW50cygpIHtcbiAgICAgICAgY29uc3QgcGVycExpYWJpbGl0eSA9IHRoaXMuZ2V0VG90YWxQZXJwUG9zaXRpb25WYWx1ZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHBlcnBQbmwgPSB0aGlzLmdldFVucmVhbGl6ZWRQTkwodHJ1ZSk7XG4gICAgICAgIGNvbnN0IHsgdG90YWxBc3NldFZhbHVlOiBzcG90QXNzZXRWYWx1ZSwgdG90YWxMaWFiaWxpdHlWYWx1ZTogc3BvdExpYWJpbGl0eVZhbHVlLCB9ID0gdGhpcy5nZXRTcG90TWFya2V0QXNzZXRBbmRMaWFiaWxpdHlWYWx1ZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBlcnBMaWFiaWxpdHlWYWx1ZTogcGVycExpYWJpbGl0eSxcbiAgICAgICAgICAgIHBlcnBQbmwsXG4gICAgICAgICAgICBzcG90QXNzZXRWYWx1ZSxcbiAgICAgICAgICAgIHNwb3RMaWFiaWxpdHlWYWx1ZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0VG90YWxMaWFiaWxpdHlWYWx1ZShtYXJnaW5DYXRlZ29yeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUb3RhbFBlcnBQb3NpdGlvblZhbHVlKG1hcmdpbkNhdGVnb3J5LCB1bmRlZmluZWQsIHRydWUpLmFkZCh0aGlzLmdldFNwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZSh1bmRlZmluZWQsIG1hcmdpbkNhdGVnb3J5LCB1bmRlZmluZWQsIHRydWUpKTtcbiAgICB9XG4gICAgZ2V0VG90YWxBc3NldFZhbHVlKG1hcmdpbkNhdGVnb3J5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNwb3RNYXJrZXRBc3NldFZhbHVlKHVuZGVmaW5lZCwgbWFyZ2luQ2F0ZWdvcnksIHRydWUpLmFkZCh0aGlzLmdldFVucmVhbGl6ZWRQTkwodHJ1ZSwgdW5kZWZpbmVkLCBtYXJnaW5DYXRlZ29yeSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBhbGwgdGltZSBQJkwgb2YgdGhlIHVzZXIuXG4gICAgICpcbiAgICAgKiBOZXQgd2l0aGRyYXdzICsgTmV0IHNwb3QgbWFya2V0IHZhbHVlICsgTmV0IHVucmVhbGl6ZWQgUCZMIC1cbiAgICAgKi9cbiAgICBnZXRUb3RhbEFsbFRpbWVQbmwoKSB7XG4gICAgICAgIGNvbnN0IG5ldEJhbmtWYWx1ZSA9IHRoaXMuZ2V0TmV0U3BvdE1hcmtldFZhbHVlKCk7XG4gICAgICAgIGNvbnN0IHVucmVhbGl6ZWRQbmwgPSB0aGlzLmdldFVucmVhbGl6ZWRQTkwodHJ1ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBuZXRVc2RWYWx1ZSA9IG5ldEJhbmtWYWx1ZS5hZGQodW5yZWFsaXplZFBubCk7XG4gICAgICAgIGNvbnN0IHRvdGFsRGVwb3NpdHMgPSB0aGlzLmdldFVzZXJBY2NvdW50KCkudG90YWxEZXBvc2l0cztcbiAgICAgICAgY29uc3QgdG90YWxXaXRoZHJhd3MgPSB0aGlzLmdldFVzZXJBY2NvdW50KCkudG90YWxXaXRoZHJhd3M7XG4gICAgICAgIGNvbnN0IHRvdGFsUG5sID0gbmV0VXNkVmFsdWUuYWRkKHRvdGFsV2l0aGRyYXdzKS5zdWIodG90YWxEZXBvc2l0cyk7XG4gICAgICAgIHJldHVybiB0b3RhbFBubDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBtYXggYWxsb3dhYmxlIGxldmVyYWdlIGV4Y2VlZGluZyBoaXR0aW5nIHJlcXVpcmVtZW50IGNhdGVnb3J5XG4gICAgICogZm9yIGxhcmdlIHNpemVzIHdoZXJlIGltZiBmYWN0b3IgYWN0aXZhdGVzLCByZXN1bHQgaXMgYSBsb3dlciBib3VuZFxuICAgICAqIEBwYXJhbSBtYXJnaW5DYXRlZ29yeSB7SW5pdGlhbCwgTWFpbnRlbmFuY2V9XG4gICAgICogQHBhcmFtIGlzTHAgaWYgY2FsY3VsYXRpbmcgbWF4IGxldmVyYWdpbmcgZm9yIGFkZGluZyBscCwgbmVlZCB0byBhZGQgYnVmZmVyXG4gICAgICogQHJldHVybnMgOiBQcmVjaXNpb24gVEVOX1RIT1VTQU5EXG4gICAgICovXG4gICAgZ2V0TWF4TGV2ZXJhZ2VGb3JQZXJwKHBlcnBNYXJrZXRJbmRleCwgbWFyZ2luQ2F0ZWdvcnkgPSAnSW5pdGlhbCcsIGlzTHAgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBtYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFBlcnBNYXJrZXRBY2NvdW50KHBlcnBNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG1hcmtldFByaWNlID0gdGhpcy5kcmlmdENsaWVudC5nZXRPcmFjbGVEYXRhRm9yUGVycE1hcmtldChwZXJwTWFya2V0SW5kZXgpLnByaWNlO1xuICAgICAgICBjb25zdCB7IHBlcnBMaWFiaWxpdHlWYWx1ZSwgcGVycFBubCwgc3BvdEFzc2V0VmFsdWUsIHNwb3RMaWFiaWxpdHlWYWx1ZSB9ID0gdGhpcy5nZXRMZXZlcmFnZUNvbXBvbmVudHMoKTtcbiAgICAgICAgY29uc3QgdG90YWxBc3NldFZhbHVlID0gc3BvdEFzc2V0VmFsdWUuYWRkKHBlcnBQbmwpO1xuICAgICAgICBjb25zdCBuZXRBc3NldFZhbHVlID0gdG90YWxBc3NldFZhbHVlLnN1YihzcG90TGlhYmlsaXR5VmFsdWUpO1xuICAgICAgICBpZiAobmV0QXNzZXRWYWx1ZS5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b3RhbExpYWJpbGl0eVZhbHVlID0gcGVycExpYWJpbGl0eVZhbHVlLmFkZChzcG90TGlhYmlsaXR5VmFsdWUpO1xuICAgICAgICBjb25zdCBscEJ1ZmZlciA9IGlzTHBcbiAgICAgICAgICAgID8gbWFya2V0UHJpY2UubXVsKG1hcmtldC5hbW0ub3JkZXJTdGVwU2l6ZSkuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pXG4gICAgICAgICAgICA6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBjb25zdCBmcmVlQ29sbGF0ZXJhbCA9IHRoaXMuZ2V0RnJlZUNvbGxhdGVyYWwoKS5zdWIobHBCdWZmZXIpO1xuICAgICAgICBsZXQgcmF3TWFyZ2luUmF0aW87XG4gICAgICAgIHN3aXRjaCAobWFyZ2luQ2F0ZWdvcnkpIHtcbiAgICAgICAgICAgIGNhc2UgJ0luaXRpYWwnOlxuICAgICAgICAgICAgICAgIHJhd01hcmdpblJhdGlvID0gbWFya2V0Lm1hcmdpblJhdGlvSW5pdGlhbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ01haW50ZW5hbmNlJzpcbiAgICAgICAgICAgICAgICByYXdNYXJnaW5SYXRpbyA9IG1hcmtldC5tYXJnaW5SYXRpb01haW50ZW5hbmNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByYXdNYXJnaW5SYXRpbyA9IG1hcmtldC5tYXJnaW5SYXRpb0luaXRpYWw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWJzb2x1dGUgbWF4IGZlc2libGUgc2l6ZSAodXBwZXIgYm91bmQpXG4gICAgICAgIGNvbnN0IG1heFNpemUgPSBfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIGZyZWVDb2xsYXRlcmFsXG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5NQVJHSU5fUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihuZXcgXzEuQk4ocmF3TWFyZ2luUmF0aW8pKVxuICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihtYXJrZXRQcmljZSkpO1xuICAgICAgICAvLyBtYXJnaW4gcmF0aW8gaW5jb3Jwb3J0aW5nIHVwcGVyIGJvdW5kIG9uIHNpemVcbiAgICAgICAgbGV0IG1hcmdpblJhdGlvID0gKDAsIF8xLmNhbGN1bGF0ZU1hcmtldE1hcmdpblJhdGlvKShtYXJrZXQsIG1heFNpemUsIG1hcmdpbkNhdGVnb3J5KTtcbiAgICAgICAgLy8gdXNlIG1vcmUgZmVzaWJsZSBzaXplIHNpbmNlIGltZiBmYWN0b3IgYWN0aXZhdGVkXG4gICAgICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgICAgIHdoaWxlIChtYXJnaW5SYXRpbyA+IHJhd01hcmdpblJhdGlvICsgMWUtNCAmJiBhdHRlbXB0cyA8IDEwKSB7XG4gICAgICAgICAgICAvLyBtb3JlIGZlc2libGUgc2l6ZSAodXBwZXIgYm91bmQpXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTaXplID0gXzEuQk4ubWF4KG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCBmcmVlQ29sbGF0ZXJhbFxuICAgICAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pXG4gICAgICAgICAgICAgICAgLmRpdihuZXcgXzEuQk4obWFyZ2luUmF0aW8pKVxuICAgICAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgICAgICAgICAuZGl2KG1hcmtldFByaWNlKSk7XG4gICAgICAgICAgICAvLyBtYXJnaW4gcmF0aW8gaW5jb3Jwb3J0aW5nIG1vcmUgZmVzaWJsZSB0YXJnZXQgc2l6ZVxuICAgICAgICAgICAgbWFyZ2luUmF0aW8gPSAoMCwgXzEuY2FsY3VsYXRlTWFya2V0TWFyZ2luUmF0aW8pKG1hcmtldCwgdGFyZ2V0U2l6ZSwgbWFyZ2luQ2F0ZWdvcnkpO1xuICAgICAgICAgICAgYXR0ZW1wdHMgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBob3cgbXVjaCBtb3JlIGxpYWJpbGl0aWVzIGNhbiBiZSBvcGVuZWQgdyByZW1haW5pbmcgZnJlZSBjb2xsYXRlcmFsXG4gICAgICAgIGNvbnN0IGFkZGl0aW9uYWxMaWFiaWxpdGllcyA9IGZyZWVDb2xsYXRlcmFsXG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5NQVJHSU5fUFJFQ0lTSU9OKVxuICAgICAgICAgICAgLmRpdihuZXcgXzEuQk4obWFyZ2luUmF0aW8pKTtcbiAgICAgICAgcmV0dXJuIHRvdGFsTGlhYmlsaXR5VmFsdWVcbiAgICAgICAgICAgIC5hZGQoYWRkaXRpb25hbExpYWJpbGl0aWVzKVxuICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuVEVOX1RIT1VTQU5EKVxuICAgICAgICAgICAgLmRpdihuZXRBc3NldFZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBtYXggYWxsb3dhYmxlIGxldmVyYWdlIGV4Y2VlZGluZyBoaXR0aW5nIHJlcXVpcmVtZW50IGNhdGVnb3J5XG4gICAgICogQHBhcmFtIHNwb3RNYXJrZXRJbmRleFxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb25cbiAgICAgKiBAcmV0dXJucyA6IFByZWNpc2lvbiBURU5fVEhPVVNBTkRcbiAgICAgKi9cbiAgICBnZXRNYXhMZXZlcmFnZUZvclNwb3Qoc3BvdE1hcmtldEluZGV4LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgeyBwZXJwTGlhYmlsaXR5VmFsdWUsIHBlcnBQbmwsIHNwb3RBc3NldFZhbHVlLCBzcG90TGlhYmlsaXR5VmFsdWUgfSA9IHRoaXMuZ2V0TGV2ZXJhZ2VDb21wb25lbnRzKCk7XG4gICAgICAgIGNvbnN0IHRvdGFsTGlhYmlsaXR5VmFsdWUgPSBwZXJwTGlhYmlsaXR5VmFsdWUuYWRkKHNwb3RMaWFiaWxpdHlWYWx1ZSk7XG4gICAgICAgIGNvbnN0IHRvdGFsQXNzZXRWYWx1ZSA9IHNwb3RBc3NldFZhbHVlLmFkZChwZXJwUG5sKTtcbiAgICAgICAgY29uc3QgbmV0QXNzZXRWYWx1ZSA9IHRvdGFsQXNzZXRWYWx1ZS5zdWIoc3BvdExpYWJpbGl0eVZhbHVlKTtcbiAgICAgICAgaWYgKG5ldEFzc2V0VmFsdWUuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFF1b3RlQXNzZXRWYWx1ZSA9IHRoaXMuZ2V0U3BvdE1hcmtldEFzc2V0VmFsdWUobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1NQT1RfTUFSS0VUX0lOREVYKTtcbiAgICAgICAgY29uc3QgY3VycmVudFF1b3RlTGlhYmlsaXR5VmFsdWUgPSB0aGlzLmdldFNwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZShudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgpO1xuICAgICAgICBjb25zdCBjdXJyZW50UXVvdGVWYWx1ZSA9IGN1cnJlbnRRdW90ZUFzc2V0VmFsdWUuc3ViKGN1cnJlbnRRdW90ZUxpYWJpbGl0eVZhbHVlKTtcbiAgICAgICAgY29uc3QgY3VycmVudFNwb3RNYXJrZXRBc3NldFZhbHVlID0gdGhpcy5nZXRTcG90TWFya2V0QXNzZXRWYWx1ZShzcG90TWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBjdXJyZW50U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlID0gdGhpcy5nZXRTcG90TWFya2V0TGlhYmlsaXR5VmFsdWUoc3BvdE1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZSA9IGN1cnJlbnRTcG90TWFya2V0QXNzZXRWYWx1ZS5zdWIoY3VycmVudFNwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZSk7XG4gICAgICAgIGNvbnN0IHRyYWRlUXVvdGVBbW91bnQgPSB0aGlzLmdldE1heFRyYWRlU2l6ZVVTRENGb3JTcG90KHNwb3RNYXJrZXRJbmRleCwgZGlyZWN0aW9uLCBjdXJyZW50UXVvdGVBc3NldFZhbHVlLCBjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlKTtcbiAgICAgICAgbGV0IGFzc2V0VmFsdWVUb0FkZCA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBsZXQgbGlhYmlsaXR5VmFsdWVUb0FkZCA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBjb25zdCBuZXdRdW90ZU5ldFZhbHVlID0gKDAsIHR5cGVzXzEuaXNWYXJpYW50KShkaXJlY3Rpb24sICdzaG9ydCcpXG4gICAgICAgICAgICA/IGN1cnJlbnRRdW90ZVZhbHVlLmFkZCh0cmFkZVF1b3RlQW1vdW50KVxuICAgICAgICAgICAgOiBjdXJyZW50UXVvdGVWYWx1ZS5zdWIodHJhZGVRdW90ZUFtb3VudCk7XG4gICAgICAgIGNvbnN0IG5ld1F1b3RlQXNzZXRWYWx1ZSA9IF8xLkJOLm1heChuZXdRdW90ZU5ldFZhbHVlLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgICAgIGNvbnN0IG5ld1F1b3RlTGlhYmlsaXR5VmFsdWUgPSBfMS5CTi5taW4obmV3UXVvdGVOZXRWYWx1ZSwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pLmFicygpO1xuICAgICAgICBhc3NldFZhbHVlVG9BZGQgPSBhc3NldFZhbHVlVG9BZGQuYWRkKG5ld1F1b3RlQXNzZXRWYWx1ZS5zdWIoY3VycmVudFF1b3RlQXNzZXRWYWx1ZSkpO1xuICAgICAgICBsaWFiaWxpdHlWYWx1ZVRvQWRkID0gbGlhYmlsaXR5VmFsdWVUb0FkZC5hZGQobmV3UXVvdGVMaWFiaWxpdHlWYWx1ZS5zdWIoY3VycmVudFF1b3RlTGlhYmlsaXR5VmFsdWUpKTtcbiAgICAgICAgY29uc3QgbmV3U3BvdE1hcmtldE5ldFZhbHVlID0gKDAsIHR5cGVzXzEuaXNWYXJpYW50KShkaXJlY3Rpb24sICdsb25nJylcbiAgICAgICAgICAgID8gY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZS5hZGQodHJhZGVRdW90ZUFtb3VudClcbiAgICAgICAgICAgIDogY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZS5zdWIodHJhZGVRdW90ZUFtb3VudCk7XG4gICAgICAgIGNvbnN0IG5ld1Nwb3RNYXJrZXRBc3NldFZhbHVlID0gXzEuQk4ubWF4KG5ld1Nwb3RNYXJrZXROZXRWYWx1ZSwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgICAgICBjb25zdCBuZXdTcG90TWFya2V0TGlhYmlsaXR5VmFsdWUgPSBfMS5CTi5taW4obmV3U3BvdE1hcmtldE5ldFZhbHVlLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTykuYWJzKCk7XG4gICAgICAgIGFzc2V0VmFsdWVUb0FkZCA9IGFzc2V0VmFsdWVUb0FkZC5hZGQobmV3U3BvdE1hcmtldEFzc2V0VmFsdWUuc3ViKGN1cnJlbnRTcG90TWFya2V0QXNzZXRWYWx1ZSkpO1xuICAgICAgICBsaWFiaWxpdHlWYWx1ZVRvQWRkID0gbGlhYmlsaXR5VmFsdWVUb0FkZC5hZGQobmV3U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlLnN1YihjdXJyZW50U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlKSk7XG4gICAgICAgIGNvbnN0IGZpbmFsVG90YWxBc3NldFZhbHVlID0gdG90YWxBc3NldFZhbHVlLmFkZChhc3NldFZhbHVlVG9BZGQpO1xuICAgICAgICBjb25zdCBmaW5hbFRvdGFsU3BvdExpYWJpbGl0eSA9IHNwb3RMaWFiaWxpdHlWYWx1ZS5hZGQobGlhYmlsaXR5VmFsdWVUb0FkZCk7XG4gICAgICAgIGNvbnN0IGZpbmFsVG90YWxMaWFiaWxpdHlWYWx1ZSA9IHRvdGFsTGlhYmlsaXR5VmFsdWUuYWRkKGxpYWJpbGl0eVZhbHVlVG9BZGQpO1xuICAgICAgICBjb25zdCBmaW5hbE5ldEFzc2V0VmFsdWUgPSBmaW5hbFRvdGFsQXNzZXRWYWx1ZS5zdWIoZmluYWxUb3RhbFNwb3RMaWFiaWxpdHkpO1xuICAgICAgICByZXR1cm4gZmluYWxUb3RhbExpYWJpbGl0eVZhbHVlLm11bChudW1lcmljQ29uc3RhbnRzXzEuVEVOX1RIT1VTQU5EKS5kaXYoZmluYWxOZXRBc3NldFZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogY2FsY3VsYXRlcyBtYXJnaW4gcmF0aW86IDEgLyBsZXZlcmFnZVxuICAgICAqIEByZXR1cm5zIDogUHJlY2lzaW9uIFRFTl9USE9VU0FORFxuICAgICAqL1xuICAgIGdldE1hcmdpblJhdGlvKCkge1xuICAgICAgICBjb25zdCB7IHBlcnBMaWFiaWxpdHlWYWx1ZSwgcGVycFBubCwgc3BvdEFzc2V0VmFsdWUsIHNwb3RMaWFiaWxpdHlWYWx1ZSB9ID0gdGhpcy5nZXRMZXZlcmFnZUNvbXBvbmVudHMoKTtcbiAgICAgICAgY29uc3QgdG90YWxMaWFiaWxpdHlWYWx1ZSA9IHBlcnBMaWFiaWxpdHlWYWx1ZS5hZGQoc3BvdExpYWJpbGl0eVZhbHVlKTtcbiAgICAgICAgY29uc3QgdG90YWxBc3NldFZhbHVlID0gc3BvdEFzc2V0VmFsdWUuYWRkKHBlcnBQbmwpO1xuICAgICAgICBpZiAodG90YWxMaWFiaWxpdHlWYWx1ZS5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29uc3RhbnRzXzEuQk5fTUFYO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ldEFzc2V0VmFsdWUgPSB0b3RhbEFzc2V0VmFsdWUuc3ViKHNwb3RMaWFiaWxpdHlWYWx1ZSk7XG4gICAgICAgIHJldHVybiBuZXRBc3NldFZhbHVlLm11bChudW1lcmljQ29uc3RhbnRzXzEuVEVOX1RIT1VTQU5EKS5kaXYodG90YWxMaWFiaWxpdHlWYWx1ZSk7XG4gICAgfVxuICAgIGNhbkJlTGlxdWlkYXRlZCgpIHtcbiAgICAgICAgY29uc3QgdG90YWxDb2xsYXRlcmFsID0gdGhpcy5nZXRUb3RhbENvbGxhdGVyYWwoJ01haW50ZW5hbmNlJyk7XG4gICAgICAgIC8vIGlmIHVzZXIgYmVpbmcgbGlxJ2QsIGNhbiBjb250aW51ZSB0byBiZSBsaXEnZCB1bnRpbCB0b3RhbCBjb2xsYXRlcmFsIGFib3ZlIHRoZSBtYXJnaW4gcmVxdWlyZW1lbnQgcGx1cyBidWZmZXJcbiAgICAgICAgbGV0IGxpcXVpZGF0aW9uQnVmZmVyID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pc0JlaW5nTGlxdWlkYXRlZCgpKSB7XG4gICAgICAgICAgICBsaXF1aWRhdGlvbkJ1ZmZlciA9IG5ldyBfMS5CTih0aGlzLmRyaWZ0Q2xpZW50LmdldFN0YXRlQWNjb3VudCgpLmxpcXVpZGF0aW9uTWFyZ2luQnVmZmVyUmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hcmdpblJlcXVpcmVtZW50ID0gdGhpcy5nZXRNYWludGVuYW5jZU1hcmdpblJlcXVpcmVtZW50KGxpcXVpZGF0aW9uQnVmZmVyKTtcbiAgICAgICAgY29uc3QgY2FuQmVMaXF1aWRhdGVkID0gdG90YWxDb2xsYXRlcmFsLmx0KG1hcmdpblJlcXVpcmVtZW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNhbkJlTGlxdWlkYXRlZCxcbiAgICAgICAgICAgIG1hcmdpblJlcXVpcmVtZW50LFxuICAgICAgICAgICAgdG90YWxDb2xsYXRlcmFsLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpc0JlaW5nTGlxdWlkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuICgwLCB0eXBlc18xLmlzT25lT2ZWYXJpYW50KSh0aGlzLmdldFVzZXJBY2NvdW50KCkuc3RhdHVzLCBbXG4gICAgICAgICAgICAnYmVpbmdMaXF1aWRhdGVkJyxcbiAgICAgICAgICAgICdiYW5rcnVwdCcsXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBpc0JhbmtydXB0KCkge1xuICAgICAgICByZXR1cm4gKDAsIHR5cGVzXzEuaXNWYXJpYW50KSh0aGlzLmdldFVzZXJBY2NvdW50KCkuc3RhdHVzLCAnYmFua3J1cHQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGFueSB1c2VyIHBvc2l0aW9uIGN1bXVsYXRpdmUgZnVuZGluZyBkaWZmZXJzIGZyb20gcmVzcGVjdGl2ZSBtYXJrZXQgY3VtdWxhdGl2ZSBmdW5kaW5nXG4gICAgICogQHJldHVybnNcbiAgICAgKi9cbiAgICBuZWVkc1RvU2V0dGxlRnVuZGluZ1BheW1lbnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgdXNlclBvc2l0aW9uIG9mIHRoaXMuZ2V0VXNlckFjY291bnQoKS5wZXJwUG9zaXRpb25zKSB7XG4gICAgICAgICAgICBpZiAodXNlclBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQodXNlclBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgICAgIGlmIChtYXJrZXQuYW1tLmN1bXVsYXRpdmVGdW5kaW5nUmF0ZUxvbmcuZXEodXNlclBvc2l0aW9uLmxhc3RDdW11bGF0aXZlRnVuZGluZ1JhdGUpIHx8XG4gICAgICAgICAgICAgICAgbWFya2V0LmFtbS5jdW11bGF0aXZlRnVuZGluZ1JhdGVTaG9ydC5lcSh1c2VyUG9zaXRpb24ubGFzdEN1bXVsYXRpdmVGdW5kaW5nUmF0ZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBsaXF1aWRhdGlvbiBwcmljZSBvZiBhIHNwb3QgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gbWFya2V0SW5kZXhcbiAgICAgKiBAcmV0dXJucyBQcmVjaXNpb24gOiBQUklDRV9QUkVDSVNJT05cbiAgICAgKi9cbiAgICBzcG90TGlxdWlkYXRpb25QcmljZShtYXJrZXRJbmRleCwgcG9zaXRpb25CYXNlU2l6ZUNoYW5nZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcG90UG9zaXRpb24gPSB0aGlzLmdldFNwb3RQb3NpdGlvbihtYXJrZXRJbmRleCk7XG4gICAgICAgIGlmICghY3VycmVudFNwb3RQb3NpdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfMS5CTigtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG90YWxDb2xsYXRlcmFsID0gdGhpcy5nZXRUb3RhbENvbGxhdGVyYWwoJ01haW50ZW5hbmNlJyk7XG4gICAgICAgIGNvbnN0IG1haW50ZW5hbmNlTWFyZ2luUmVxdWlyZW1lbnQgPSB0aGlzLmdldE1haW50ZW5hbmNlTWFyZ2luUmVxdWlyZW1lbnQoKTtcbiAgICAgICAgY29uc3QgZnJlZUNvbGxhdGVyYWwgPSBfMS5CTi5tYXgobnVtZXJpY0NvbnN0YW50c18xLlpFUk8sIHRvdGFsQ29sbGF0ZXJhbC5zdWIobWFpbnRlbmFuY2VNYXJnaW5SZXF1aXJlbWVudCkpO1xuICAgICAgICBjb25zdCBtYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KTtcbiAgICAgICAgbGV0IHNpZ25lZFRva2VuQW1vdW50ID0gKDAsIF8xLmdldFNpZ25lZFRva2VuQW1vdW50KSgoMCwgc3BvdEJhbGFuY2VfMS5nZXRUb2tlbkFtb3VudCkoY3VycmVudFNwb3RQb3NpdGlvbi5zY2FsZWRCYWxhbmNlLCBtYXJrZXQsIGN1cnJlbnRTcG90UG9zaXRpb24uYmFsYW5jZVR5cGUpLCBjdXJyZW50U3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlKTtcbiAgICAgICAgc2lnbmVkVG9rZW5BbW91bnQgPSBzaWduZWRUb2tlbkFtb3VudC5hZGQocG9zaXRpb25CYXNlU2l6ZUNoYW5nZSk7XG4gICAgICAgIGlmIChzaWduZWRUb2tlbkFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgXzEuQk4oLTEpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmcmVlQ29sbGF0ZXJhbERlbHRhID0gdGhpcy5jYWxjdWxhdGVGcmVlQ29sbGF0ZXJhbERlbHRhRm9yU3BvdChtYXJrZXQsIHNpZ25lZFRva2VuQW1vdW50KTtcbiAgICAgICAgY29uc3Qgb3JhY2xlID0gbWFya2V0Lm9yYWNsZTtcbiAgICAgICAgY29uc3QgcGVycE1hcmtldFdpdGhTYW1lT3JhY2xlID0gdGhpcy5kcmlmdENsaWVudFxuICAgICAgICAgICAgLmdldFBlcnBNYXJrZXRBY2NvdW50cygpXG4gICAgICAgICAgICAuZmluZCgobWFya2V0KSA9PiBtYXJrZXQuYW1tLm9yYWNsZS5lcXVhbHMob3JhY2xlKSk7XG4gICAgICAgIGlmIChwZXJwTWFya2V0V2l0aFNhbWVPcmFjbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlcnBQb3NpdGlvbiA9IHRoaXMuZ2V0UGVycFBvc2l0aW9uV2l0aExQU2V0dGxlKHBlcnBNYXJrZXRXaXRoU2FtZU9yYWNsZS5tYXJrZXRJbmRleCwgdW5kZWZpbmVkLCB0cnVlKVswXTtcbiAgICAgICAgICAgIGlmIChwZXJwUG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmcmVlQ29sbGF0ZXJhbERlbHRhRm9yUGVycCA9IHRoaXMuY2FsY3VsYXRlRnJlZUNvbGxhdGVyYWxEZWx0YUZvclBlcnAocGVycE1hcmtldFdpdGhTYW1lT3JhY2xlLCBwZXJwUG9zaXRpb24sIG51bWVyaWNDb25zdGFudHNfMS5aRVJPKTtcbiAgICAgICAgICAgICAgICBmcmVlQ29sbGF0ZXJhbERlbHRhID0gZnJlZUNvbGxhdGVyYWxEZWx0YS5hZGQoZnJlZUNvbGxhdGVyYWxEZWx0YUZvclBlcnAgfHwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmcmVlQ29sbGF0ZXJhbERlbHRhLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfMS5CTigtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2UgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldE9yYWNsZURhdGFGb3JTcG90TWFya2V0KG1hcmtldEluZGV4KS5wcmljZTtcbiAgICAgICAgY29uc3QgbGlxUHJpY2VEZWx0YSA9IGZyZWVDb2xsYXRlcmFsXG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT04pXG4gICAgICAgICAgICAuZGl2KGZyZWVDb2xsYXRlcmFsRGVsdGEpO1xuICAgICAgICBjb25zdCBsaXFQcmljZSA9IG9yYWNsZVByaWNlLnN1YihsaXFQcmljZURlbHRhKTtcbiAgICAgICAgaWYgKGxpcVByaWNlLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfMS5CTigtMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpcVByaWNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGxpcXVpZGF0aW9uIHByaWNlIG9mIGEgcGVycCBwb3NpdGlvbiwgd2l0aCBvcHRpb25hbCBwYXJhbWV0ZXIgdG8gY2FsY3VsYXRlIHRoZSBsaXF1aWRhdGlvbiBwcmljZSBhZnRlciBhIHRyYWRlXG4gICAgICogQHBhcmFtIG1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIHBvc2l0aW9uQmFzZVNpemVDaGFuZ2UgLy8gY2hhbmdlIGluIHBvc2l0aW9uIHNpemUgdG8gY2FsY3VsYXRlIGxpcXVpZGF0aW9uIHByaWNlIGZvciA6IFByZWNpc2lvbiAxMF4xM1xuICAgICAqIEByZXR1cm5zIFByZWNpc2lvbiA6IFBSSUNFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGxpcXVpZGF0aW9uUHJpY2UobWFya2V0SW5kZXgsIHBvc2l0aW9uQmFzZVNpemVDaGFuZ2UgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTykge1xuICAgICAgICBjb25zdCB0b3RhbENvbGxhdGVyYWwgPSB0aGlzLmdldFRvdGFsQ29sbGF0ZXJhbCgnTWFpbnRlbmFuY2UnKTtcbiAgICAgICAgY29uc3QgbWFpbnRlbmFuY2VNYXJnaW5SZXF1aXJlbWVudCA9IHRoaXMuZ2V0TWFpbnRlbmFuY2VNYXJnaW5SZXF1aXJlbWVudCgpO1xuICAgICAgICBjb25zdCBmcmVlQ29sbGF0ZXJhbCA9IF8xLkJOLm1heChudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgdG90YWxDb2xsYXRlcmFsLnN1YihtYWludGVuYW5jZU1hcmdpblJlcXVpcmVtZW50KSk7XG4gICAgICAgIGNvbnN0IG1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBjdXJyZW50UGVycFBvc2l0aW9uID0gdGhpcy5nZXRQZXJwUG9zaXRpb25XaXRoTFBTZXR0bGUobWFya2V0SW5kZXgsIHVuZGVmaW5lZCwgdHJ1ZSlbMF0gfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0RW1wdHlQb3NpdGlvbihtYXJrZXRJbmRleCk7XG4gICAgICAgIGxldCBmcmVlQ29sbGF0ZXJhbERlbHRhID0gdGhpcy5jYWxjdWxhdGVGcmVlQ29sbGF0ZXJhbERlbHRhRm9yUGVycChtYXJrZXQsIGN1cnJlbnRQZXJwUG9zaXRpb24sIHBvc2l0aW9uQmFzZVNpemVDaGFuZ2UpO1xuICAgICAgICBpZiAoIWZyZWVDb2xsYXRlcmFsRGVsdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgXzEuQk4oLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9yYWNsZSA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpLmFtbS5vcmFjbGU7XG4gICAgICAgIGNvbnN0IHNwb3RNYXJrZXRXaXRoU2FtZU9yYWNsZSA9IHRoaXMuZHJpZnRDbGllbnRcbiAgICAgICAgICAgIC5nZXRTcG90TWFya2V0QWNjb3VudHMoKVxuICAgICAgICAgICAgLmZpbmQoKG1hcmtldCkgPT4gbWFya2V0Lm9yYWNsZS5lcXVhbHMob3JhY2xlKSk7XG4gICAgICAgIGlmIChzcG90TWFya2V0V2l0aFNhbWVPcmFjbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNwb3RQb3NpdGlvbiA9IHRoaXMuZ2V0U3BvdFBvc2l0aW9uKHNwb3RNYXJrZXRXaXRoU2FtZU9yYWNsZS5tYXJrZXRJbmRleCk7XG4gICAgICAgICAgICBpZiAoc3BvdFBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmVkVG9rZW5BbW91bnQgPSAoMCwgXzEuZ2V0U2lnbmVkVG9rZW5BbW91bnQpKCgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShzcG90UG9zaXRpb24uc2NhbGVkQmFsYW5jZSwgc3BvdE1hcmtldFdpdGhTYW1lT3JhY2xlLCBzcG90UG9zaXRpb24uYmFsYW5jZVR5cGUpLCBzcG90UG9zaXRpb24uYmFsYW5jZVR5cGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwb3RGcmVlQ29sbGF0ZXJhbERlbHRhID0gdGhpcy5jYWxjdWxhdGVGcmVlQ29sbGF0ZXJhbERlbHRhRm9yU3BvdChzcG90TWFya2V0V2l0aFNhbWVPcmFjbGUsIHNpZ25lZFRva2VuQW1vdW50KTtcbiAgICAgICAgICAgICAgICBmcmVlQ29sbGF0ZXJhbERlbHRhID0gZnJlZUNvbGxhdGVyYWxEZWx0YS5hZGQoc3BvdEZyZWVDb2xsYXRlcmFsRGVsdGEgfHwgbnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmcmVlQ29sbGF0ZXJhbERlbHRhLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfMS5CTigtMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2UgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldE9yYWNsZURhdGFGb3JQZXJwTWFya2V0KG1hcmtldEluZGV4KS5wcmljZTtcbiAgICAgICAgY29uc3QgbGlxUHJpY2VEZWx0YSA9IGZyZWVDb2xsYXRlcmFsXG4gICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT04pXG4gICAgICAgICAgICAuZGl2KGZyZWVDb2xsYXRlcmFsRGVsdGEpO1xuICAgICAgICBjb25zdCBsaXFQcmljZSA9IG9yYWNsZVByaWNlLnN1YihsaXFQcmljZURlbHRhKTtcbiAgICAgICAgaWYgKGxpcVByaWNlLmx0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfMS5CTigtMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpcVByaWNlO1xuICAgIH1cbiAgICBjYWxjdWxhdGVGcmVlQ29sbGF0ZXJhbERlbHRhRm9yUGVycChtYXJrZXQsIHBlcnBQb3NpdGlvbiwgcG9zaXRpb25CYXNlU2l6ZUNoYW5nZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50QmFzZUFzc2V0QW1vdW50ID0gcGVycFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudDtcbiAgICAgICAgY29uc3Qgd29yc3RDYXNlQmFzZUFzc2V0QW1vdW50ID0gKDAsIG1hcmdpbl8xLmNhbGN1bGF0ZVdvcnN0Q2FzZUJhc2VBc3NldEFtb3VudCkocGVycFBvc2l0aW9uKTtcbiAgICAgICAgY29uc3Qgb3JkZXJCYXNlQXNzZXRBbW91bnQgPSB3b3JzdENhc2VCYXNlQXNzZXRBbW91bnQuc3ViKGN1cnJlbnRCYXNlQXNzZXRBbW91bnQpO1xuICAgICAgICBjb25zdCBwcm9wb3NlZEJhc2VBc3NldEFtb3VudCA9IGN1cnJlbnRCYXNlQXNzZXRBbW91bnQuYWRkKHBvc2l0aW9uQmFzZVNpemVDaGFuZ2UpO1xuICAgICAgICBjb25zdCBwcm9wb3NlZFdvcnN0Q2FzZUJhc2VBc3NldEFtb3VudCA9IHdvcnN0Q2FzZUJhc2VBc3NldEFtb3VudC5hZGQocG9zaXRpb25CYXNlU2l6ZUNoYW5nZSk7XG4gICAgICAgIGNvbnN0IG1hcmdpblJhdGlvID0gKDAsIF8xLmNhbGN1bGF0ZU1hcmtldE1hcmdpblJhdGlvKShtYXJrZXQsIHByb3Bvc2VkV29yc3RDYXNlQmFzZUFzc2V0QW1vdW50LmFicygpLCAnTWFpbnRlbmFuY2UnKTtcbiAgICAgICAgY29uc3QgbWFyZ2luUmF0aW9RdW90ZVByZWNpc2lvbiA9IG5ldyBfMS5CTihtYXJnaW5SYXRpbylcbiAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1BSRUNJU0lPTilcbiAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pO1xuICAgICAgICBpZiAocHJvcG9zZWRXb3JzdENhc2VCYXNlQXNzZXRBbW91bnQuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmcmVlQ29sbGF0ZXJhbERlbHRhID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIGlmIChwcm9wb3NlZEJhc2VBc3NldEFtb3VudC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIGZyZWVDb2xsYXRlcmFsRGVsdGEgPSBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OLnN1YihtYXJnaW5SYXRpb1F1b3RlUHJlY2lzaW9uKVxuICAgICAgICAgICAgICAgIC5tdWwocHJvcG9zZWRCYXNlQXNzZXRBbW91bnQpXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQkFTRV9QUkVDSVNJT04pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZnJlZUNvbGxhdGVyYWxEZWx0YSA9IG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9QUkVDSVNJT04ubmVnKClcbiAgICAgICAgICAgICAgICAuc3ViKG1hcmdpblJhdGlvUXVvdGVQcmVjaXNpb24pXG4gICAgICAgICAgICAgICAgLm11bChwcm9wb3NlZEJhc2VBc3NldEFtb3VudC5hYnMoKSlcbiAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5CQVNFX1BSRUNJU0lPTik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcmRlckJhc2VBc3NldEFtb3VudC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIGZyZWVDb2xsYXRlcmFsRGVsdGEgPSBmcmVlQ29sbGF0ZXJhbERlbHRhLnN1YihtYXJnaW5SYXRpb1F1b3RlUHJlY2lzaW9uXG4gICAgICAgICAgICAgICAgLm11bChvcmRlckJhc2VBc3NldEFtb3VudC5hYnMoKSlcbiAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5CQVNFX1BSRUNJU0lPTikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmcmVlQ29sbGF0ZXJhbERlbHRhO1xuICAgIH1cbiAgICBjYWxjdWxhdGVGcmVlQ29sbGF0ZXJhbERlbHRhRm9yU3BvdChtYXJrZXQsIHNpZ25lZFRva2VuQW1vdW50KSB7XG4gICAgICAgIGNvbnN0IHRva2VuUHJlY2lzaW9uID0gbmV3IF8xLkJOKE1hdGgucG93KDEwLCBtYXJrZXQuZGVjaW1hbHMpKTtcbiAgICAgICAgaWYgKHNpZ25lZFRva2VuQW1vdW50Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgY29uc3QgYXNzZXRXZWlnaHQgPSAoMCwgc3BvdEJhbGFuY2VfMS5jYWxjdWxhdGVBc3NldFdlaWdodCkoc2lnbmVkVG9rZW5BbW91bnQsIG1hcmtldCwgJ01haW50ZW5hbmNlJyk7XG4gICAgICAgICAgICByZXR1cm4gbnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1BSRUNJU0lPTi5tdWwoYXNzZXRXZWlnaHQpXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfV0VJR0hUX1BSRUNJU0lPTilcbiAgICAgICAgICAgICAgICAubXVsKHNpZ25lZFRva2VuQW1vdW50KVxuICAgICAgICAgICAgICAgIC5kaXYodG9rZW5QcmVjaXNpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbGlhYmlsaXR5V2VpZ2h0ID0gKDAsIHNwb3RCYWxhbmNlXzEuY2FsY3VsYXRlTGlhYmlsaXR5V2VpZ2h0KShzaWduZWRUb2tlbkFtb3VudC5hYnMoKSwgbWFya2V0LCAnTWFpbnRlbmFuY2UnKTtcbiAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OLm5lZygpXG4gICAgICAgICAgICAgICAgLm11bChsaWFiaWxpdHlXZWlnaHQpXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfV0VJR0hUX1BSRUNJU0lPTilcbiAgICAgICAgICAgICAgICAubXVsKHNpZ25lZFRva2VuQW1vdW50LmFicygpKVxuICAgICAgICAgICAgICAgIC5kaXYodG9rZW5QcmVjaXNpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIGVzdGltYXRlZCBsaXF1aWRhdGlvbiBwcmljZSBmb3IgYSBwb3NpdGlvbiBhZnRlciBjbG9zaW5nIGEgcXVvdGUgYW1vdW50IG9mIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0gcG9zaXRpb25NYXJrZXRJbmRleFxuICAgICAqIEBwYXJhbSBjbG9zZVF1b3RlQW1vdW50XG4gICAgICogQHJldHVybnMgOiBQcmVjaXNpb24gUFJJQ0VfUFJFQ0lTSU9OXG4gICAgICovXG4gICAgbGlxdWlkYXRpb25QcmljZUFmdGVyQ2xvc2UocG9zaXRpb25NYXJrZXRJbmRleCwgY2xvc2VRdW90ZUFtb3VudCkge1xuICAgICAgICBjb25zdCBjdXJyZW50UG9zaXRpb24gPSB0aGlzLmdldFBlcnBQb3NpdGlvbldpdGhMUFNldHRsZShwb3NpdGlvbk1hcmtldEluZGV4LCB1bmRlZmluZWQsIHRydWUpWzBdIHx8IHRoaXMuZ2V0RW1wdHlQb3NpdGlvbihwb3NpdGlvbk1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgY2xvc2VCYXNlQW1vdW50ID0gY3VycmVudFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudFxuICAgICAgICAgICAgLm11bChjbG9zZVF1b3RlQW1vdW50KVxuICAgICAgICAgICAgLmRpdihjdXJyZW50UG9zaXRpb24ucXVvdGVBc3NldEFtb3VudC5hYnMoKSlcbiAgICAgICAgICAgIC5hZGQoY3VycmVudFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudFxuICAgICAgICAgICAgLm11bChjbG9zZVF1b3RlQW1vdW50KVxuICAgICAgICAgICAgLm1vZChjdXJyZW50UG9zaXRpb24ucXVvdGVBc3NldEFtb3VudC5hYnMoKSkpXG4gICAgICAgICAgICAubmVnKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpcXVpZGF0aW9uUHJpY2UocG9zaXRpb25NYXJrZXRJbmRleCwgY2xvc2VCYXNlQW1vdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHRyYWRlIHNpemUgZm9yIGEgZ2l2ZW4gbWFya2V0LCB0YWtpbmcgaW50byBhY2NvdW50IHRoZSB1c2VyJ3MgY3VycmVudCBsZXZlcmFnZSwgcG9zaXRpb25zLCBjb2xsYXRlcmFsLCBldGMuXG4gICAgICpcbiAgICAgKiBUbyBDYWxjdWxhdGUgTWF4IFF1b3RlIEF2YWlsYWJsZTpcbiAgICAgKlxuICAgICAqIENhc2UgMTogU2FtZVNpZGVcbiAgICAgKiBcdD0+IFJlbWFpbmluZyBxdW90ZSB0byBnZXQgdG8gbWF4TGV2ZXJhZ2VcbiAgICAgKlxuICAgICAqIENhc2UgMjogTk9UIFNhbWVTaWRlICYmIGN1cnJlbnRMZXZlcmFnZSA8PSBtYXhMZXZlcmFnZVxuICAgICAqIFx0PT4gQ3VycmVudCBvcHBvc2l0ZSBwb3NpdGlvbiB4MiArIHJlbWFpbmluZyB0byBnZXQgdG8gbWF4TGV2ZXJhZ2VcbiAgICAgKlxuICAgICAqIENhc2UgMzogTk9UIFNhbWVTaWRlICYmIGN1cnJlbnRMZXZlcmFnZSA+IG1heExldmVyYWdlICYmIG90aGVyUG9zaXRpb25zIC0gY3VycmVudFBvc2l0aW9uID4gbWF4TGV2ZXJhZ2VcbiAgICAgKiBcdD0+IHN0cmljdGx5IHJlZHVjZSBjdXJyZW50IHBvc2l0aW9uIHNpemVcbiAgICAgKlxuICAgICAqIENhc2UgNDogTk9UIFNhbWVTaWRlICYmIGN1cnJlbnRMZXZlcmFnZSA+IG1heExldmVyYWdlICYmIG90aGVyUG9zaXRpb25zIC0gY3VycmVudFBvc2l0aW9uIDwgbWF4TGV2ZXJhZ2VcbiAgICAgKiBcdD0+IGN1cnJlbnQgcG9zaXRpb24gKyByZW1haW5pbmcgdG8gZ2V0IHRvIG1heExldmVyYWdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0TWFya2V0SW5kZXhcbiAgICAgKiBAcGFyYW0gdHJhZGVTaWRlXG4gICAgICogQHJldHVybnMgdHJhZGVTaXplQWxsb3dlZCA6IFByZWNpc2lvbiBRVU9URV9QUkVDSVNJT05cbiAgICAgKi9cbiAgICBnZXRNYXhUcmFkZVNpemVVU0RDRm9yUGVycCh0YXJnZXRNYXJrZXRJbmRleCwgdHJhZGVTaWRlLCBpc0xwID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gdGhpcy5nZXRQZXJwUG9zaXRpb25XaXRoTFBTZXR0bGUodGFyZ2V0TWFya2V0SW5kZXgsIHVuZGVmaW5lZCwgdHJ1ZSlbMF0gfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0RW1wdHlQb3NpdGlvbih0YXJnZXRNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IHRhcmdldFNpZGUgPSAoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHRyYWRlU2lkZSwgJ3Nob3J0JykgPyAnc2hvcnQnIDogJ2xvbmcnO1xuICAgICAgICBjb25zdCBjdXJyZW50UG9zaXRpb25TaWRlID0gKGN1cnJlbnRQb3NpdGlvbiA9PT0gbnVsbCB8fCBjdXJyZW50UG9zaXRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRQb3NpdGlvbi5iYXNlQXNzZXRBbW91bnQuaXNOZWcoKSlcbiAgICAgICAgICAgID8gJ3Nob3J0J1xuICAgICAgICAgICAgOiAnbG9uZyc7XG4gICAgICAgIGNvbnN0IHRhcmdldGluZ1NhbWVTaWRlID0gIWN1cnJlbnRQb3NpdGlvblxuICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICA6IHRhcmdldFNpZGUgPT09IGN1cnJlbnRQb3NpdGlvblNpZGU7XG4gICAgICAgIGNvbnN0IG9yYWNsZURhdGEgPSB0aGlzLmdldE9yYWNsZURhdGFGb3JQZXJwTWFya2V0KHRhcmdldE1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgbWFya2V0QWNjb3VudCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UGVycE1hcmtldEFjY291bnQodGFyZ2V0TWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBscEJ1ZmZlciA9IGlzTHBcbiAgICAgICAgICAgID8gb3JhY2xlRGF0YS5wcmljZVxuICAgICAgICAgICAgICAgIC5tdWwobWFya2V0QWNjb3VudC5hbW0ub3JkZXJTdGVwU2l6ZSlcbiAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5BTU1fUkVTRVJWRV9QUkVDSVNJT04pXG4gICAgICAgICAgICA6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICAvLyBhZGQgYW55IHBvc2l0aW9uIHdlIGhhdmUgb24gdGhlIG9wcG9zaXRlIHNpZGUgb2YgdGhlIGN1cnJlbnQgdHJhZGUsIGJlY2F1c2Ugd2UgY2FuIFwiZmxpcFwiIHRoZSBzaXplIG9mIHRoaXMgcG9zaXRpb24gd2l0aG91dCB0YWtpbmcgYW55IGV4dHJhIGxldmVyYWdlLlxuICAgICAgICBjb25zdCBvcHBvc2l0ZVNpemVWYWx1ZVVTREMgPSB0YXJnZXRpbmdTYW1lU2lkZVxuICAgICAgICAgICAgPyBudW1lcmljQ29uc3RhbnRzXzEuWkVST1xuICAgICAgICAgICAgOiB0aGlzLmdldFBlcnBQb3NpdGlvblZhbHVlKHRhcmdldE1hcmtldEluZGV4LCBvcmFjbGVEYXRhKTtcbiAgICAgICAgbGV0IG1heFBvc2l0aW9uU2l6ZSA9IHRoaXMuZ2V0UGVycEJ1eWluZ1Bvd2VyKHRhcmdldE1hcmtldEluZGV4LCBscEJ1ZmZlcik7XG4gICAgICAgIGlmIChtYXhQb3NpdGlvblNpemUuZ3RlKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgaWYgKG9wcG9zaXRlU2l6ZVZhbHVlVVNEQy5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIDEgOiBSZWd1bGFyIHRyYWRlIHdoZXJlIGN1cnJlbnQgdG90YWwgcG9zaXRpb24gbGVzcyB0aGFuIG1heCwgYW5kIG5vIG9wcG9zaXRlIHBvc2l0aW9uIHRvIGFjY291bnQgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY2FzZSAyIDogdHJhZGUgd2hlcmUgY3VycmVudCB0b3RhbCBwb3NpdGlvbiBsZXNzIHRoYW4gbWF4LCBidXQgbmVlZCB0byBhY2NvdW50IGZvciBmbGlwcGluZyB0aGUgY3VycmVudCBwb3NpdGlvbiBvdmVyIHRvIHRoZSBvdGhlciBzaWRlXG4gICAgICAgICAgICAgICAgbWF4UG9zaXRpb25TaXplID0gbWF4UG9zaXRpb25TaXplLmFkZChvcHBvc2l0ZVNpemVWYWx1ZVVTREMubXVsKG5ldyBfMS5CTigyKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gY3VycmVudCBsZXZlcmFnZSBpcyBncmVhdGVyIHRoYW4gbWF4IGxldmVyYWdlIC0gY2FuIG9ubHkgcmVkdWNlIHBvc2l0aW9uIHNpemVcbiAgICAgICAgICAgIGlmICghdGFyZ2V0aW5nU2FtZVNpZGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFBlcnBNYXJrZXRBY2NvdW50KHRhcmdldE1hcmtldEluZGV4KTtcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJwUG9zaXRpb25WYWx1ZSA9IHRoaXMuZ2V0UGVycFBvc2l0aW9uVmFsdWUodGFyZ2V0TWFya2V0SW5kZXgsIG9yYWNsZURhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsQ29sbGF0ZXJhbCA9IHRoaXMuZ2V0VG90YWxDb2xsYXRlcmFsKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFyZ2luUmVxdWlyZW1lbnQgPSB0aGlzLmdldEluaXRpYWxNYXJnaW5SZXF1aXJlbWVudCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmdpbkZyZWVkQnlDbG9zaW5nID0gcGVycFBvc2l0aW9uVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgLm11bChuZXcgXzEuQk4obWFya2V0Lm1hcmdpblJhdGlvSW5pdGlhbCkpXG4gICAgICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmdpblJlcXVpcmVtZW50QWZ0ZXJDbG9zaW5nID0gbWFyZ2luUmVxdWlyZW1lbnQuc3ViKG1hcmdpbkZyZWVkQnlDbG9zaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAobWFyZ2luUmVxdWlyZW1lbnRBZnRlckNsb3NpbmcuZ3QodG90YWxDb2xsYXRlcmFsKSkge1xuICAgICAgICAgICAgICAgICAgICBtYXhQb3NpdGlvblNpemUgPSBwZXJwUG9zaXRpb25WYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyZWVDb2xsYXRlcmFsQWZ0ZXJDbG9zZSA9IHRvdGFsQ29sbGF0ZXJhbC5zdWIobWFyZ2luUmVxdWlyZW1lbnRBZnRlckNsb3NpbmcpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXlpbmdQb3dlckFmdGVyQ2xvc2UgPSB0aGlzLmdldFBlcnBCdXlpbmdQb3dlckZyb21GcmVlQ29sbGF0ZXJhbEFuZEJhc2VBc3NldEFtb3VudCh0YXJnZXRNYXJrZXRJbmRleCwgZnJlZUNvbGxhdGVyYWxBZnRlckNsb3NlLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgICAgICAgICAgICAgICAgIG1heFBvc2l0aW9uU2l6ZSA9IHBlcnBQb3NpdGlvblZhbHVlLmFkZChidXlpbmdQb3dlckFmdGVyQ2xvc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgdGFyZ2V0dGluZyBzYW1lIHNpZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4UG9zaXRpb25TaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gdHJhZGUgc2l6ZSBmb3IgYSBnaXZlbiBtYXJrZXQsIHRha2luZyBpbnRvIGFjY291bnQgdGhlIHVzZXIncyBjdXJyZW50IGxldmVyYWdlLCBwb3NpdGlvbnMsIGNvbGxhdGVyYWwsIGV0Yy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRNYXJrZXRJbmRleFxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb25cbiAgICAgKiBAcGFyYW0gY3VycmVudFF1b3RlQXNzZXRWYWx1ZVxuICAgICAqIEBwYXJhbSBjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlXG4gICAgICogQHJldHVybnMgdHJhZGVTaXplQWxsb3dlZCA6IFByZWNpc2lvbiBRVU9URV9QUkVDSVNJT05cbiAgICAgKi9cbiAgICBnZXRNYXhUcmFkZVNpemVVU0RDRm9yU3BvdCh0YXJnZXRNYXJrZXRJbmRleCwgZGlyZWN0aW9uLCBjdXJyZW50UXVvdGVBc3NldFZhbHVlLCBjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0U3BvdE1hcmtldEFjY291bnQodGFyZ2V0TWFya2V0SW5kZXgpO1xuICAgICAgICBjdXJyZW50UXVvdGVBc3NldFZhbHVlID0gdGhpcy5nZXRTcG90TWFya2V0QXNzZXRWYWx1ZShudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgpO1xuICAgICAgICBjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlID1cbiAgICAgICAgICAgIGN1cnJlbnRTcG90TWFya2V0TmV0VmFsdWUgIT09IG51bGwgJiYgY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZSAhPT0gdm9pZCAwID8gY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZSA6IHRoaXMuZ2V0U3BvdFBvc2l0aW9uVmFsdWUodGFyZ2V0TWFya2V0SW5kZXgpO1xuICAgICAgICBsZXQgZnJlZUNvbGxhdGVyYWwgPSB0aGlzLmdldEZyZWVDb2xsYXRlcmFsKCk7XG4gICAgICAgIGNvbnN0IG1hcmdpblJhdGlvID0gKDAsIF8xLmNhbGN1bGF0ZVNwb3RNYXJrZXRNYXJnaW5SYXRpbykobWFya2V0LCAnSW5pdGlhbCcsIG51bWVyaWNDb25zdGFudHNfMS5aRVJPLCAoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKGRpcmVjdGlvbiwgJ2xvbmcnKVxuICAgICAgICAgICAgPyBfMS5TcG90QmFsYW5jZVR5cGUuREVQT1NJVFxuICAgICAgICAgICAgOiBfMS5TcG90QmFsYW5jZVR5cGUuQk9SUk9XKTtcbiAgICAgICAgbGV0IHRyYWRlQW1vdW50ID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgIGlmICh0aGlzLmdldFVzZXJBY2NvdW50KCkuaXNNYXJnaW5UcmFkaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gaWYgdGhlIHVzZXIgaXMgYnV5aW5nL3NlbGxpbmcgYW5kIGFscmVhZHkgc2hvcnQvbG9uZywgbmVlZCB0byBhY2NvdW50IGZvciBjbG9zaW5nIG91dCBzaG9ydC9sb25nXG4gICAgICAgICAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShkaXJlY3Rpb24sICdsb25nJykgJiYgY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZS5sdChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgICAgICB0cmFkZUFtb3VudCA9IGN1cnJlbnRTcG90TWFya2V0TmV0VmFsdWUuYWJzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFyZ2luUmF0aW8gPSAoMCwgXzEuY2FsY3VsYXRlU3BvdE1hcmtldE1hcmdpblJhdGlvKShtYXJrZXQsICdJbml0aWFsJywgdGhpcy5nZXRUb2tlbkFtb3VudCh0YXJnZXRNYXJrZXRJbmRleCkuYWJzKCksIF8xLlNwb3RCYWxhbmNlVHlwZS5CT1JST1cpO1xuICAgICAgICAgICAgICAgIGZyZWVDb2xsYXRlcmFsID0gZnJlZUNvbGxhdGVyYWwuYWRkKHRyYWRlQW1vdW50Lm11bChuZXcgXzEuQk4obWFyZ2luUmF0aW8pKS5kaXYobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoZGlyZWN0aW9uLCAnc2hvcnQnKSAmJlxuICAgICAgICAgICAgICAgIGN1cnJlbnRTcG90TWFya2V0TmV0VmFsdWUuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICAgICAgdHJhZGVBbW91bnQgPSBjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmdpblJhdGlvID0gKDAsIF8xLmNhbGN1bGF0ZVNwb3RNYXJrZXRNYXJnaW5SYXRpbykobWFya2V0LCAnSW5pdGlhbCcsIHRoaXMuZ2V0VG9rZW5BbW91bnQodGFyZ2V0TWFya2V0SW5kZXgpLCBfMS5TcG90QmFsYW5jZVR5cGUuREVQT1NJVCk7XG4gICAgICAgICAgICAgICAgZnJlZUNvbGxhdGVyYWwgPSBmcmVlQ29sbGF0ZXJhbC5hZGQodHJhZGVBbW91bnQubXVsKG5ldyBfMS5CTihtYXJnaW5SYXRpbykpLmRpdihudW1lcmljQ29uc3RhbnRzXzEuTUFSR0lOX1BSRUNJU0lPTikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhZGVBbW91bnQgPSB0cmFkZUFtb3VudC5hZGQoZnJlZUNvbGxhdGVyYWwubXVsKG51bWVyaWNDb25zdGFudHNfMS5NQVJHSU5fUFJFQ0lTSU9OKS5kaXYobmV3IF8xLkJOKG1hcmdpblJhdGlvKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoZGlyZWN0aW9uLCAnbG9uZycpKSB7XG4gICAgICAgICAgICB0cmFkZUFtb3VudCA9IF8xLkJOLm1pbihjdXJyZW50UXVvdGVBc3NldFZhbHVlLCBmcmVlQ29sbGF0ZXJhbC5tdWwobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pLmRpdihuZXcgXzEuQk4obWFyZ2luUmF0aW8pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0cmFkZUFtb3VudCA9IF8xLkJOLm1heChudW1lcmljQ29uc3RhbnRzXzEuWkVSTywgY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYWRlQW1vdW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBtYXggYW1vdW50IG9mIHRva2VuIHRoYXQgY2FuIGJlIHN3YXBwZWQgZnJvbSBpbk1hcmtldCB0byBvdXRNYXJrZXRcbiAgICAgKiBBc3N1bWVzIHN3YXAgaGFwcGVucyBhdCBvcmFjbGUgcHJpY2VcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbk1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIG91dE1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIGNhbGN1bGF0ZVN3YXAgZnVuY3Rpb24gdG8gc2ltaWxhdGUgaW4gdG8gb3V0IHN3YVxuICAgICAqIEBwYXJhbSBpdGVyYXRpb25MaW1pdCBob3cgbG9uZyB0byBydW4gYXBwcm9taXhhdGlvbiBiZWZvcmUgZXJyb3Jpbmcgb3V0XG4gICAgICovXG4gICAgZ2V0TWF4U3dhcEFtb3VudCh7IGluTWFya2V0SW5kZXgsIG91dE1hcmtldEluZGV4LCBjYWxjdWxhdGVTd2FwLCBpdGVyYXRpb25MaW1pdCA9IDEwMDAsIH0pIHtcbiAgICAgICAgY29uc3QgaW5NYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KGluTWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBvdXRNYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KG91dE1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgaW5PcmFjbGVQcmljZSA9IHRoaXMuZ2V0T3JhY2xlRGF0YUZvclNwb3RNYXJrZXQoaW5NYXJrZXRJbmRleCkucHJpY2U7XG4gICAgICAgIGNvbnN0IG91dE9yYWNsZVByaWNlID0gdGhpcy5nZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChvdXRNYXJrZXRJbmRleCkucHJpY2U7XG4gICAgICAgIGNvbnN0IGluUHJlY2lzaW9uID0gbmV3IF8xLkJOKDEwICoqIGluTWFya2V0LmRlY2ltYWxzKTtcbiAgICAgICAgY29uc3Qgb3V0UHJlY2lzaW9uID0gbmV3IF8xLkJOKDEwICoqIG91dE1hcmtldC5kZWNpbWFscyk7XG4gICAgICAgIGNvbnN0IGluU3BvdFBvc2l0aW9uID0gdGhpcy5nZXRTcG90UG9zaXRpb24oaW5NYXJrZXRJbmRleCkgfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0RW1wdHlTcG90UG9zaXRpb24oaW5NYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG91dFNwb3RQb3NpdGlvbiA9IHRoaXMuZ2V0U3BvdFBvc2l0aW9uKG91dE1hcmtldEluZGV4KSB8fFxuICAgICAgICAgICAgdGhpcy5nZXRFbXB0eVNwb3RQb3NpdGlvbihvdXRNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGZyZWVDb2xsYXRlcmFsID0gdGhpcy5nZXRGcmVlQ29sbGF0ZXJhbCgpO1xuICAgICAgICBjb25zdCBpbkNvbnRyaWJ1dGlvbkluaXRpYWwgPSB0aGlzLmNhbGN1bGF0ZVNwb3RQb3NpdGlvbkZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uKGluU3BvdFBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgeyB0b3RhbEFzc2V0VmFsdWU6IGluVG90YWxBc3NldFZhbHVlSW5pdGlhbCwgdG90YWxMaWFiaWxpdHlWYWx1ZTogaW5Ub3RhbExpYWJpbGl0eVZhbHVlSW5pdGlhbCwgfSA9IHRoaXMuY2FsY3VsYXRlU3BvdFBvc2l0aW9uTGV2ZXJhZ2VDb250cmlidXRpb24oaW5TcG90UG9zaXRpb24pO1xuICAgICAgICBjb25zdCBvdXRDb250cmlidXRpb25Jbml0aWFsID0gdGhpcy5jYWxjdWxhdGVTcG90UG9zaXRpb25GcmVlQ29sbGF0ZXJhbENvbnRyaWJ1dGlvbihvdXRTcG90UG9zaXRpb24pO1xuICAgICAgICBjb25zdCB7IHRvdGFsQXNzZXRWYWx1ZTogb3V0VG90YWxBc3NldFZhbHVlSW5pdGlhbCwgdG90YWxMaWFiaWxpdHlWYWx1ZTogb3V0VG90YWxMaWFiaWxpdHlWYWx1ZUluaXRpYWwsIH0gPSB0aGlzLmNhbGN1bGF0ZVNwb3RQb3NpdGlvbkxldmVyYWdlQ29udHJpYnV0aW9uKG91dFNwb3RQb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IGluaXRpYWxDb250cmlidXRpb24gPSBpbkNvbnRyaWJ1dGlvbkluaXRpYWwuYWRkKG91dENvbnRyaWJ1dGlvbkluaXRpYWwpO1xuICAgICAgICBjb25zdCB7IHBlcnBMaWFiaWxpdHlWYWx1ZSwgcGVycFBubCwgc3BvdEFzc2V0VmFsdWUsIHNwb3RMaWFiaWxpdHlWYWx1ZSB9ID0gdGhpcy5nZXRMZXZlcmFnZUNvbXBvbmVudHMoKTtcbiAgICAgICAgaWYgKCFjYWxjdWxhdGVTd2FwKSB7XG4gICAgICAgICAgICBjYWxjdWxhdGVTd2FwID0gKGluU3dhcCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBpblN3YXBcbiAgICAgICAgICAgICAgICAgICAgLm11bChvdXRQcmVjaXNpb24pXG4gICAgICAgICAgICAgICAgICAgIC5tdWwoaW5PcmFjbGVQcmljZSlcbiAgICAgICAgICAgICAgICAgICAgLmRpdihvdXRPcmFjbGVQcmljZSlcbiAgICAgICAgICAgICAgICAgICAgLmRpdihpblByZWNpc2lvbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGxldCBpblN3YXAgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgbGV0IG91dFN3YXAgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgY29uc3QgaW5Ub2tlbkFtb3VudCA9IHRoaXMuZ2V0VG9rZW5BbW91bnQoaW5NYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG91dFRva2VuQW1vdW50ID0gdGhpcy5nZXRUb2tlbkFtb3VudChvdXRNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG91dFNhZmVyVGhhbkluID0gXG4gICAgICAgIC8vIHNlbGxpbmcgYXNzZXQgdG8gY2xvc2UgYm9ycm93XG4gICAgICAgIChpblRva2VuQW1vdW50Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSAmJiBvdXRUb2tlbkFtb3VudC5sdChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHx8XG4gICAgICAgICAgICAvLyBidXlpbmcgYXNzZXQgd2l0aCBoaWdoZXIgaW5pdGlhbCBhc3NldCB3ZWlnaHRcbiAgICAgICAgICAgIGluTWFya2V0LmluaXRpYWxBc3NldFdlaWdodCA8IG91dE1hcmtldC5pbml0aWFsQXNzZXRXZWlnaHQ7XG4gICAgICAgIGlmIChmcmVlQ29sbGF0ZXJhbC5sdChudW1lcmljQ29uc3RhbnRzXzEuT05FKSkge1xuICAgICAgICAgICAgaWYgKG91dFNhZmVyVGhhbkluICYmIGluVG9rZW5BbW91bnQuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICAgICAgaW5Td2FwID0gaW5Ub2tlbkFtb3VudDtcbiAgICAgICAgICAgICAgICBvdXRTd2FwID0gY2FsY3VsYXRlU3dhcChpblN3YXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1pblN3YXAgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgICAgIGxldCBtYXhTd2FwID0gXzEuQk4ubWF4KGZyZWVDb2xsYXRlcmFsLm11bChpblByZWNpc2lvbikubXVsKG5ldyBfMS5CTigxMDApKS5kaXYoaW5PcmFjbGVQcmljZSksIC8vIDEwMHggY3VycmVudCBmcmVlIGNvbGxhdGVyYWxcbiAgICAgICAgICAgIGluVG9rZW5BbW91bnQuYWJzKCkubXVsKG5ldyBfMS5CTigxMCkpIC8vIDEweCBjdXJyZW50IHBvc2l0aW9uXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaW5Td2FwID0gbWF4U3dhcC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlRXTyk7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IGZyZWVDb2xsYXRlcmFsLmRpdihuZXcgXzEuQk4oMTAwMDApKTtcbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIGxldCBmcmVlQ29sbGF0ZXJhbEFmdGVyID0gZnJlZUNvbGxhdGVyYWw7XG4gICAgICAgICAgICB3aGlsZSAoZnJlZUNvbGxhdGVyYWxBZnRlci5ndChlcnJvcikgfHwgZnJlZUNvbGxhdGVyYWxBZnRlci5pc05lZygpKSB7XG4gICAgICAgICAgICAgICAgb3V0U3dhcCA9IGNhbGN1bGF0ZVN3YXAoaW5Td2FwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpblBvc2l0aW9uQWZ0ZXIgPSB0aGlzLmNsb25lQW5kVXBkYXRlU3BvdFBvc2l0aW9uKGluU3BvdFBvc2l0aW9uLCBpblN3YXAubmVnKCksIGluTWFya2V0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRQb3NpdGlvbkFmdGVyID0gdGhpcy5jbG9uZUFuZFVwZGF0ZVNwb3RQb3NpdGlvbihvdXRTcG90UG9zaXRpb24sIG91dFN3YXAsIG91dE1hcmtldCk7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5Db250cmlidXRpb25BZnRlciA9IHRoaXMuY2FsY3VsYXRlU3BvdFBvc2l0aW9uRnJlZUNvbGxhdGVyYWxDb250cmlidXRpb24oaW5Qb3NpdGlvbkFmdGVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRDb250cmlidXRpb25BZnRlciA9IHRoaXMuY2FsY3VsYXRlU3BvdFBvc2l0aW9uRnJlZUNvbGxhdGVyYWxDb250cmlidXRpb24ob3V0UG9zaXRpb25BZnRlcik7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJpYnV0aW9uQWZ0ZXIgPSBpbkNvbnRyaWJ1dGlvbkFmdGVyLmFkZChvdXRDb250cmlidXRpb25BZnRlcik7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udHJpYnV0aW9uRGVsdGEgPSBjb250cmlidXRpb25BZnRlci5zdWIoaW5pdGlhbENvbnRyaWJ1dGlvbik7XG4gICAgICAgICAgICAgICAgZnJlZUNvbGxhdGVyYWxBZnRlciA9IGZyZWVDb2xsYXRlcmFsLmFkZChjb250cmlidXRpb25EZWx0YSk7XG4gICAgICAgICAgICAgICAgaWYgKGZyZWVDb2xsYXRlcmFsQWZ0ZXIuZ3QoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pblN3YXAgPSBpblN3YXA7XG4gICAgICAgICAgICAgICAgICAgIGluU3dhcCA9IG1pblN3YXAuYWRkKG1heFN3YXApLmRpdihudW1lcmljQ29uc3RhbnRzXzEuVFdPKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZnJlZUNvbGxhdGVyYWxBZnRlci5pc05lZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heFN3YXAgPSBpblN3YXA7XG4gICAgICAgICAgICAgICAgICAgIGluU3dhcCA9IG1pblN3YXAuYWRkKG1heFN3YXApLmRpdihudW1lcmljQ29uc3RhbnRzXzEuVFdPKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGkrKyA+IGl0ZXJhdGlvbkxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRNYXhTd2FwQW1vdW50IGl0ZXJhdGlvbiBsaW1pdCByZWFjaGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpblBvc2l0aW9uQWZ0ZXIgPSB0aGlzLmNsb25lQW5kVXBkYXRlU3BvdFBvc2l0aW9uKGluU3BvdFBvc2l0aW9uLCBpblN3YXAubmVnKCksIGluTWFya2V0KTtcbiAgICAgICAgY29uc3Qgb3V0UG9zaXRpb25BZnRlciA9IHRoaXMuY2xvbmVBbmRVcGRhdGVTcG90UG9zaXRpb24ob3V0U3BvdFBvc2l0aW9uLCBvdXRTd2FwLCBvdXRNYXJrZXQpO1xuICAgICAgICBjb25zdCB7IHRvdGFsQXNzZXRWYWx1ZTogaW5Ub3RhbEFzc2V0VmFsdWVBZnRlciwgdG90YWxMaWFiaWxpdHlWYWx1ZTogaW5Ub3RhbExpYWJpbGl0eVZhbHVlQWZ0ZXIsIH0gPSB0aGlzLmNhbGN1bGF0ZVNwb3RQb3NpdGlvbkxldmVyYWdlQ29udHJpYnV0aW9uKGluUG9zaXRpb25BZnRlcik7XG4gICAgICAgIGNvbnN0IHsgdG90YWxBc3NldFZhbHVlOiBvdXRUb3RhbEFzc2V0VmFsdWVBZnRlciwgdG90YWxMaWFiaWxpdHlWYWx1ZTogb3V0VG90YWxMaWFiaWxpdHlWYWx1ZUFmdGVyLCB9ID0gdGhpcy5jYWxjdWxhdGVTcG90UG9zaXRpb25MZXZlcmFnZUNvbnRyaWJ1dGlvbihvdXRQb3NpdGlvbkFmdGVyKTtcbiAgICAgICAgY29uc3Qgc3BvdEFzc2V0VmFsdWVEZWx0YSA9IGluVG90YWxBc3NldFZhbHVlQWZ0ZXJcbiAgICAgICAgICAgIC5hZGQob3V0VG90YWxBc3NldFZhbHVlQWZ0ZXIpXG4gICAgICAgICAgICAuc3ViKGluVG90YWxBc3NldFZhbHVlSW5pdGlhbClcbiAgICAgICAgICAgIC5zdWIob3V0VG90YWxBc3NldFZhbHVlSW5pdGlhbCk7XG4gICAgICAgIGNvbnN0IHNwb3RMaWFiaWxpdHlWYWx1ZURlbHRhID0gaW5Ub3RhbExpYWJpbGl0eVZhbHVlQWZ0ZXJcbiAgICAgICAgICAgIC5hZGQob3V0VG90YWxMaWFiaWxpdHlWYWx1ZUFmdGVyKVxuICAgICAgICAgICAgLnN1YihpblRvdGFsTGlhYmlsaXR5VmFsdWVJbml0aWFsKVxuICAgICAgICAgICAgLnN1YihvdXRUb3RhbExpYWJpbGl0eVZhbHVlSW5pdGlhbCk7XG4gICAgICAgIGNvbnN0IHNwb3RBc3NldFZhbHVlQWZ0ZXIgPSBzcG90QXNzZXRWYWx1ZS5hZGQoc3BvdEFzc2V0VmFsdWVEZWx0YSk7XG4gICAgICAgIGNvbnN0IHNwb3RMaWFiaWxpdHlWYWx1ZUFmdGVyID0gc3BvdExpYWJpbGl0eVZhbHVlLmFkZChzcG90TGlhYmlsaXR5VmFsdWVEZWx0YSk7XG4gICAgICAgIGNvbnN0IGxldmVyYWdlID0gdGhpcy5jYWxjdWxhdGVMZXZlcmFnZUZyb21Db21wb25lbnRzKHtcbiAgICAgICAgICAgIHBlcnBMaWFiaWxpdHlWYWx1ZSxcbiAgICAgICAgICAgIHBlcnBQbmwsXG4gICAgICAgICAgICBzcG90QXNzZXRWYWx1ZTogc3BvdEFzc2V0VmFsdWVBZnRlcixcbiAgICAgICAgICAgIHNwb3RMaWFiaWxpdHlWYWx1ZTogc3BvdExpYWJpbGl0eVZhbHVlQWZ0ZXIsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBpbkFtb3VudDogaW5Td2FwLCBvdXRBbW91bnQ6IG91dFN3YXAsIGxldmVyYWdlIH07XG4gICAgfVxuICAgIGNsb25lQW5kVXBkYXRlU3BvdFBvc2l0aW9uKHBvc2l0aW9uLCB0b2tlbkFtb3VudCwgbWFya2V0KSB7XG4gICAgICAgIGNvbnN0IGNsb25lZFBvc2l0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgcG9zaXRpb24pO1xuICAgICAgICBpZiAodG9rZW5BbW91bnQuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xvbmVkUG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJlVG9rZW5BbW91bnQgPSAoMCwgXzEuZ2V0U2lnbmVkVG9rZW5BbW91bnQpKCgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShwb3NpdGlvbi5zY2FsZWRCYWxhbmNlLCBtYXJrZXQsIHBvc2l0aW9uLmJhbGFuY2VUeXBlKSwgcG9zaXRpb24uYmFsYW5jZVR5cGUpO1xuICAgICAgICBpZiAoKDAsIF8xLnNpZ051bSkocHJlVG9rZW5BbW91bnQpLmVxKCgwLCBfMS5zaWdOdW0pKHRva2VuQW1vdW50KSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlZEJhbGFuY2VEZWx0YSA9ICgwLCBfMS5nZXRCYWxhbmNlKSh0b2tlbkFtb3VudC5hYnMoKSwgbWFya2V0LCBwb3NpdGlvbi5iYWxhbmNlVHlwZSk7XG4gICAgICAgICAgICBjbG9uZWRQb3NpdGlvbi5zY2FsZWRCYWxhbmNlID1cbiAgICAgICAgICAgICAgICBjbG9uZWRQb3NpdGlvbi5zY2FsZWRCYWxhbmNlLmFkZChzY2FsZWRCYWxhbmNlRGVsdGEpO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lZFBvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwZGF0ZURpcmVjdGlvbiA9IHRva2VuQW1vdW50LmlzTmVnKClcbiAgICAgICAgICAgID8gXzEuU3BvdEJhbGFuY2VUeXBlLkJPUlJPV1xuICAgICAgICAgICAgOiBfMS5TcG90QmFsYW5jZVR5cGUuREVQT1NJVDtcbiAgICAgICAgaWYgKHRva2VuQW1vdW50LmFicygpLmd0ZShwcmVUb2tlbkFtb3VudC5hYnMoKSkpIHtcbiAgICAgICAgICAgIGNsb25lZFBvc2l0aW9uLnNjYWxlZEJhbGFuY2UgPSAoMCwgXzEuZ2V0QmFsYW5jZSkodG9rZW5BbW91bnQuYWJzKCkuc3ViKHByZVRva2VuQW1vdW50LmFicygpKSwgbWFya2V0LCB1cGRhdGVEaXJlY3Rpb24pO1xuICAgICAgICAgICAgY2xvbmVkUG9zaXRpb24uYmFsYW5jZVR5cGUgPSB1cGRhdGVEaXJlY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzY2FsZWRCYWxhbmNlRGVsdGEgPSAoMCwgXzEuZ2V0QmFsYW5jZSkodG9rZW5BbW91bnQuYWJzKCksIG1hcmtldCwgcG9zaXRpb24uYmFsYW5jZVR5cGUpO1xuICAgICAgICAgICAgY2xvbmVkUG9zaXRpb24uc2NhbGVkQmFsYW5jZSA9XG4gICAgICAgICAgICAgICAgY2xvbmVkUG9zaXRpb24uc2NhbGVkQmFsYW5jZS5zdWIoc2NhbGVkQmFsYW5jZURlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmVkUG9zaXRpb247XG4gICAgfVxuICAgIGNhbGN1bGF0ZVNwb3RQb3NpdGlvbkZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uKHNwb3RQb3NpdGlvbikge1xuICAgICAgICBsZXQgZnJlZUNvbGxhdGVyYWxDb250cmlidXRpb24gPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IF8xLkJOKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCk7XG4gICAgICAgIGNvbnN0IHN0cmljdCA9IHRydWU7XG4gICAgICAgIGNvbnN0IG1hcmdpbkNhdGVnb3J5ID0gJ0luaXRpYWwnO1xuICAgICAgICBjb25zdCBzcG90TWFya2V0QWNjb3VudCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0U3BvdE1hcmtldEFjY291bnQoc3BvdFBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2VEYXRhID0gdGhpcy5nZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChzcG90UG9zaXRpb24ubWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBbd29yc3RDYXNlVG9rZW5BbW91bnQsIHdvcnN0Q2FzZVF1b3RlVG9rZW5BbW91bnRdID0gKDAsIHNwb3RQb3NpdGlvbl8xLmdldFdvcnN0Q2FzZVRva2VuQW1vdW50cykoc3BvdFBvc2l0aW9uLCBzcG90TWFya2V0QWNjb3VudCwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgaWYgKHdvcnN0Q2FzZVRva2VuQW1vdW50Lmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgY29uc3QgYmFzZUFzc2V0VmFsdWUgPSB0aGlzLmdldFNwb3RBc3NldFZhbHVlKHdvcnN0Q2FzZVRva2VuQW1vdW50LCBvcmFjbGVQcmljZURhdGEsIHNwb3RNYXJrZXRBY2NvdW50LCBtYXJnaW5DYXRlZ29yeSwgc3RyaWN0LCBub3cpO1xuICAgICAgICAgICAgZnJlZUNvbGxhdGVyYWxDb250cmlidXRpb24gPVxuICAgICAgICAgICAgICAgIGZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uLmFkZChiYXNlQXNzZXRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBiYXNlTGlhYmlsaXR5VmFsdWUgPSB0aGlzLmdldFNwb3RMaWFiaWxpdHlWYWx1ZSh3b3JzdENhc2VUb2tlbkFtb3VudCwgb3JhY2xlUHJpY2VEYXRhLCBzcG90TWFya2V0QWNjb3VudCwgbWFyZ2luQ2F0ZWdvcnksIHVuZGVmaW5lZCwgc3RyaWN0LCBub3cpLmFicygpO1xuICAgICAgICAgICAgZnJlZUNvbGxhdGVyYWxDb250cmlidXRpb24gPVxuICAgICAgICAgICAgICAgIGZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uLnN1YihiYXNlTGlhYmlsaXR5VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uLmFkZCh3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50KTtcbiAgICAgICAgcmV0dXJuIGZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uO1xuICAgIH1cbiAgICBjYWxjdWxhdGVTcG90UG9zaXRpb25MZXZlcmFnZUNvbnRyaWJ1dGlvbihzcG90UG9zaXRpb24pIHtcbiAgICAgICAgbGV0IHRvdGFsQXNzZXRWYWx1ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBsZXQgdG90YWxMaWFiaWxpdHlWYWx1ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBjb25zdCBub3cgPSBuZXcgXzEuQk4obmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldEFjY291bnQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KHNwb3RQb3NpdGlvbi5tYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG9yYWNsZVByaWNlRGF0YSA9IHRoaXMuZ2V0T3JhY2xlRGF0YUZvclNwb3RNYXJrZXQoc3BvdFBvc2l0aW9uLm1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3QgW3dvcnN0Q2FzZVRva2VuQW1vdW50LCB3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50XSA9ICgwLCBzcG90UG9zaXRpb25fMS5nZXRXb3JzdENhc2VUb2tlbkFtb3VudHMpKHNwb3RQb3NpdGlvbiwgc3BvdE1hcmtldEFjY291bnQsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgIGlmICh3b3JzdENhc2VUb2tlbkFtb3VudC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHRvdGFsQXNzZXRWYWx1ZSA9IHRoaXMuZ2V0U3BvdEFzc2V0VmFsdWUod29yc3RDYXNlVG9rZW5BbW91bnQsIG9yYWNsZVByaWNlRGF0YSwgc3BvdE1hcmtldEFjY291bnQsIHVuZGVmaW5lZCwgZmFsc2UsIG5vdyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b3RhbExpYWJpbGl0eVZhbHVlID0gdGhpcy5nZXRTcG90TGlhYmlsaXR5VmFsdWUod29yc3RDYXNlVG9rZW5BbW91bnQsIG9yYWNsZVByaWNlRGF0YSwgc3BvdE1hcmtldEFjY291bnQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmYWxzZSwgbm93KS5hYnMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29yc3RDYXNlUXVvdGVUb2tlbkFtb3VudC5ndChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHRvdGFsQXNzZXRWYWx1ZSA9IHRvdGFsQXNzZXRWYWx1ZS5hZGQod29yc3RDYXNlUXVvdGVUb2tlbkFtb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b3RhbExpYWJpbGl0eVZhbHVlID0gdG90YWxMaWFiaWxpdHlWYWx1ZS5hZGQod29yc3RDYXNlUXVvdGVUb2tlbkFtb3VudC5hYnMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvdGFsQXNzZXRWYWx1ZSxcbiAgICAgICAgICAgIHRvdGFsTGlhYmlsaXR5VmFsdWUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVzdGltYXRlcyB3aGF0IHRoZSB1c2VyIGxldmVyYWdlIHdpbGwgYmUgYWZ0ZXIgc3dhcFxuICAgICAqIEBwYXJhbSBpbk1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIG91dE1hcmtldEluZGV4XG4gICAgICogQHBhcmFtIGluQW1vdW50XG4gICAgICogQHBhcmFtIG91dEFtb3VudFxuICAgICAqL1xuICAgIGFjY291bnRMZXZlcmFnZUFmdGVyU3dhcCh7IGluTWFya2V0SW5kZXgsIG91dE1hcmtldEluZGV4LCBpbkFtb3VudCwgb3V0QW1vdW50LCB9KSB7XG4gICAgICAgIGNvbnN0IGluTWFya2V0ID0gdGhpcy5kcmlmdENsaWVudC5nZXRTcG90TWFya2V0QWNjb3VudChpbk1hcmtldEluZGV4KTtcbiAgICAgICAgY29uc3Qgb3V0TWFya2V0ID0gdGhpcy5kcmlmdENsaWVudC5nZXRTcG90TWFya2V0QWNjb3VudChvdXRNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IGluU3BvdFBvc2l0aW9uID0gdGhpcy5nZXRTcG90UG9zaXRpb24oaW5NYXJrZXRJbmRleCkgfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0RW1wdHlTcG90UG9zaXRpb24oaW5NYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG91dFNwb3RQb3NpdGlvbiA9IHRoaXMuZ2V0U3BvdFBvc2l0aW9uKG91dE1hcmtldEluZGV4KSB8fFxuICAgICAgICAgICAgdGhpcy5nZXRFbXB0eVNwb3RQb3NpdGlvbihvdXRNYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IHsgdG90YWxBc3NldFZhbHVlOiBpblRvdGFsQXNzZXRWYWx1ZUluaXRpYWwsIHRvdGFsTGlhYmlsaXR5VmFsdWU6IGluVG90YWxMaWFiaWxpdHlWYWx1ZUluaXRpYWwsIH0gPSB0aGlzLmNhbGN1bGF0ZVNwb3RQb3NpdGlvbkxldmVyYWdlQ29udHJpYnV0aW9uKGluU3BvdFBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgeyB0b3RhbEFzc2V0VmFsdWU6IG91dFRvdGFsQXNzZXRWYWx1ZUluaXRpYWwsIHRvdGFsTGlhYmlsaXR5VmFsdWU6IG91dFRvdGFsTGlhYmlsaXR5VmFsdWVJbml0aWFsLCB9ID0gdGhpcy5jYWxjdWxhdGVTcG90UG9zaXRpb25MZXZlcmFnZUNvbnRyaWJ1dGlvbihvdXRTcG90UG9zaXRpb24pO1xuICAgICAgICBjb25zdCB7IHBlcnBMaWFiaWxpdHlWYWx1ZSwgcGVycFBubCwgc3BvdEFzc2V0VmFsdWUsIHNwb3RMaWFiaWxpdHlWYWx1ZSB9ID0gdGhpcy5nZXRMZXZlcmFnZUNvbXBvbmVudHMoKTtcbiAgICAgICAgY29uc3QgaW5Qb3NpdGlvbkFmdGVyID0gdGhpcy5jbG9uZUFuZFVwZGF0ZVNwb3RQb3NpdGlvbihpblNwb3RQb3NpdGlvbiwgaW5BbW91bnQuYWJzKCkubmVnKCksIGluTWFya2V0KTtcbiAgICAgICAgY29uc3Qgb3V0UG9zaXRpb25BZnRlciA9IHRoaXMuY2xvbmVBbmRVcGRhdGVTcG90UG9zaXRpb24ob3V0U3BvdFBvc2l0aW9uLCBvdXRBbW91bnQuYWJzKCksIG91dE1hcmtldCk7XG4gICAgICAgIGNvbnN0IHsgdG90YWxBc3NldFZhbHVlOiBpblRvdGFsQXNzZXRWYWx1ZUFmdGVyLCB0b3RhbExpYWJpbGl0eVZhbHVlOiBpblRvdGFsTGlhYmlsaXR5VmFsdWVBZnRlciwgfSA9IHRoaXMuY2FsY3VsYXRlU3BvdFBvc2l0aW9uTGV2ZXJhZ2VDb250cmlidXRpb24oaW5Qb3NpdGlvbkFmdGVyKTtcbiAgICAgICAgY29uc3QgeyB0b3RhbEFzc2V0VmFsdWU6IG91dFRvdGFsQXNzZXRWYWx1ZUFmdGVyLCB0b3RhbExpYWJpbGl0eVZhbHVlOiBvdXRUb3RhbExpYWJpbGl0eVZhbHVlQWZ0ZXIsIH0gPSB0aGlzLmNhbGN1bGF0ZVNwb3RQb3NpdGlvbkxldmVyYWdlQ29udHJpYnV0aW9uKG91dFBvc2l0aW9uQWZ0ZXIpO1xuICAgICAgICBjb25zdCBzcG90QXNzZXRWYWx1ZURlbHRhID0gaW5Ub3RhbEFzc2V0VmFsdWVBZnRlclxuICAgICAgICAgICAgLmFkZChvdXRUb3RhbEFzc2V0VmFsdWVBZnRlcilcbiAgICAgICAgICAgIC5zdWIoaW5Ub3RhbEFzc2V0VmFsdWVJbml0aWFsKVxuICAgICAgICAgICAgLnN1YihvdXRUb3RhbEFzc2V0VmFsdWVJbml0aWFsKTtcbiAgICAgICAgY29uc3Qgc3BvdExpYWJpbGl0eVZhbHVlRGVsdGEgPSBpblRvdGFsTGlhYmlsaXR5VmFsdWVBZnRlclxuICAgICAgICAgICAgLmFkZChvdXRUb3RhbExpYWJpbGl0eVZhbHVlQWZ0ZXIpXG4gICAgICAgICAgICAuc3ViKGluVG90YWxMaWFiaWxpdHlWYWx1ZUluaXRpYWwpXG4gICAgICAgICAgICAuc3ViKG91dFRvdGFsTGlhYmlsaXR5VmFsdWVJbml0aWFsKTtcbiAgICAgICAgY29uc3Qgc3BvdEFzc2V0VmFsdWVBZnRlciA9IHNwb3RBc3NldFZhbHVlLmFkZChzcG90QXNzZXRWYWx1ZURlbHRhKTtcbiAgICAgICAgY29uc3Qgc3BvdExpYWJpbGl0eVZhbHVlQWZ0ZXIgPSBzcG90TGlhYmlsaXR5VmFsdWUuYWRkKHNwb3RMaWFiaWxpdHlWYWx1ZURlbHRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlTGV2ZXJhZ2VGcm9tQ29tcG9uZW50cyh7XG4gICAgICAgICAgICBwZXJwTGlhYmlsaXR5VmFsdWUsXG4gICAgICAgICAgICBwZXJwUG5sLFxuICAgICAgICAgICAgc3BvdEFzc2V0VmFsdWU6IHNwb3RBc3NldFZhbHVlQWZ0ZXIsXG4gICAgICAgICAgICBzcG90TGlhYmlsaXR5VmFsdWU6IHNwb3RMaWFiaWxpdHlWYWx1ZUFmdGVyLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gVE9ETyAtIHNob3VsZCB0aGlzIHRha2UgdGhlIHByaWNlIGltcGFjdCBvZiB0aGUgdHJhZGUgaW50byBhY2NvdW50IGZvciBzdHJpY3QgYWNjdXJhY3k/XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGV2ZXJhZ2UgcmF0aW8gZm9yIHRoZSBhY2NvdW50IGFmdGVyIGFkZGluZyAob3Igc3VidHJhY3RpbmcpIHRoZSBnaXZlbiBxdW90ZSBzaXplIHRvIHRoZSBnaXZlbiBwb3NpdGlvblxuICAgICAqIEBwYXJhbSB0YXJnZXRNYXJrZXRJbmRleFxuICAgICAqIEBwYXJhbTogdGFyZ2V0TWFya2V0VHlwZVxuICAgICAqIEBwYXJhbSB0cmFkZVF1b3RlQW1vdW50XG4gICAgICogQHBhcmFtIHRyYWRlU2lkZVxuICAgICAqIEBwYXJhbSBpbmNsdWRlT3Blbk9yZGVyc1xuICAgICAqIEByZXR1cm5zIGxldmVyYWdlUmF0aW8gOiBQcmVjaXNpb24gVEVOX1RIT1VTQU5EXG4gICAgICovXG4gICAgYWNjb3VudExldmVyYWdlUmF0aW9BZnRlclRyYWRlKHRhcmdldE1hcmtldEluZGV4LCB0YXJnZXRNYXJrZXRUeXBlLCB0cmFkZVF1b3RlQW1vdW50LCB0cmFkZVNpZGUsIGluY2x1ZGVPcGVuT3JkZXJzID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCB0cmFkZUlzUGVycCA9ICgwLCB0eXBlc18xLmlzVmFyaWFudCkodGFyZ2V0TWFya2V0VHlwZSwgJ3BlcnAnKTtcbiAgICAgICAgaWYgKCF0cmFkZUlzUGVycCkge1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIG5ldyBhc3NldC9saWFiaWxpdHkgdmFsdWVzIGZvciBiYXNlIGFuZCBxdW90ZSBtYXJrZXQgdG8gZmluZCBuZXcgYWNjb3VudCBsZXZlcmFnZVxuICAgICAgICAgICAgY29uc3QgdG90YWxMaWFiaWxpdHlWYWx1ZSA9IHRoaXMuZ2V0VG90YWxMaWFiaWxpdHlWYWx1ZSgpO1xuICAgICAgICAgICAgY29uc3QgdG90YWxBc3NldFZhbHVlID0gdGhpcy5nZXRUb3RhbEFzc2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGNvbnN0IHNwb3RMaWFiaWxpdHlWYWx1ZSA9IHRoaXMuZ2V0U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGluY2x1ZGVPcGVuT3JkZXJzKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdW90ZUFzc2V0VmFsdWUgPSB0aGlzLmdldFNwb3RNYXJrZXRBc3NldFZhbHVlKG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9TUE9UX01BUktFVF9JTkRFWCwgdW5kZWZpbmVkLCBpbmNsdWRlT3Blbk9yZGVycyk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UXVvdGVMaWFiaWxpdHlWYWx1ZSA9IHRoaXMuZ2V0U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlKG51bWVyaWNDb25zdGFudHNfMS5RVU9URV9TUE9UX01BUktFVF9JTkRFWCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGluY2x1ZGVPcGVuT3JkZXJzKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdW90ZVZhbHVlID0gY3VycmVudFF1b3RlQXNzZXRWYWx1ZS5zdWIoY3VycmVudFF1b3RlTGlhYmlsaXR5VmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNwb3RNYXJrZXRBc3NldFZhbHVlID0gdGhpcy5nZXRTcG90TWFya2V0QXNzZXRWYWx1ZSh0YXJnZXRNYXJrZXRJbmRleCwgdW5kZWZpbmVkLCBpbmNsdWRlT3Blbk9yZGVycyk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlID0gdGhpcy5nZXRTcG90TWFya2V0TGlhYmlsaXR5VmFsdWUodGFyZ2V0TWFya2V0SW5kZXgsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBpbmNsdWRlT3Blbk9yZGVycyk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlID0gY3VycmVudFNwb3RNYXJrZXRBc3NldFZhbHVlLnN1YihjdXJyZW50U3BvdE1hcmtldExpYWJpbGl0eVZhbHVlKTtcbiAgICAgICAgICAgIGxldCBhc3NldFZhbHVlVG9BZGQgPSBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgICAgIGxldCBsaWFiaWxpdHlWYWx1ZVRvQWRkID0gbnVtZXJpY0NvbnN0YW50c18xLlpFUk87XG4gICAgICAgICAgICBjb25zdCBuZXdRdW90ZU5ldFZhbHVlID0gdHJhZGVTaWRlID09IF8xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JUXG4gICAgICAgICAgICAgICAgPyBjdXJyZW50UXVvdGVWYWx1ZS5hZGQodHJhZGVRdW90ZUFtb3VudClcbiAgICAgICAgICAgICAgICA6IGN1cnJlbnRRdW90ZVZhbHVlLnN1Yih0cmFkZVF1b3RlQW1vdW50KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1F1b3RlQXNzZXRWYWx1ZSA9IF8xLkJOLm1heChuZXdRdW90ZU5ldFZhbHVlLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgICAgICAgICBjb25zdCBuZXdRdW90ZUxpYWJpbGl0eVZhbHVlID0gXzEuQk4ubWluKG5ld1F1b3RlTmV0VmFsdWUsIG51bWVyaWNDb25zdGFudHNfMS5aRVJPKS5hYnMoKTtcbiAgICAgICAgICAgIGFzc2V0VmFsdWVUb0FkZCA9IGFzc2V0VmFsdWVUb0FkZC5hZGQobmV3UXVvdGVBc3NldFZhbHVlLnN1YihjdXJyZW50UXVvdGVBc3NldFZhbHVlKSk7XG4gICAgICAgICAgICBsaWFiaWxpdHlWYWx1ZVRvQWRkID0gbGlhYmlsaXR5VmFsdWVUb0FkZC5hZGQobmV3UXVvdGVMaWFiaWxpdHlWYWx1ZS5zdWIoY3VycmVudFF1b3RlTGlhYmlsaXR5VmFsdWUpKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Nwb3RNYXJrZXROZXRWYWx1ZSA9IHRyYWRlU2lkZSA9PSBfMS5Qb3NpdGlvbkRpcmVjdGlvbi5MT05HXG4gICAgICAgICAgICAgICAgPyBjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlLmFkZCh0cmFkZVF1b3RlQW1vdW50KVxuICAgICAgICAgICAgICAgIDogY3VycmVudFNwb3RNYXJrZXROZXRWYWx1ZS5zdWIodHJhZGVRdW90ZUFtb3VudCk7XG4gICAgICAgICAgICBjb25zdCBuZXdTcG90TWFya2V0QXNzZXRWYWx1ZSA9IF8xLkJOLm1heChuZXdTcG90TWFya2V0TmV0VmFsdWUsIG51bWVyaWNDb25zdGFudHNfMS5aRVJPKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Nwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZSA9IF8xLkJOLm1pbihuZXdTcG90TWFya2V0TmV0VmFsdWUsIG51bWVyaWNDb25zdGFudHNfMS5aRVJPKS5hYnMoKTtcbiAgICAgICAgICAgIGFzc2V0VmFsdWVUb0FkZCA9IGFzc2V0VmFsdWVUb0FkZC5hZGQobmV3U3BvdE1hcmtldEFzc2V0VmFsdWUuc3ViKGN1cnJlbnRTcG90TWFya2V0QXNzZXRWYWx1ZSkpO1xuICAgICAgICAgICAgbGlhYmlsaXR5VmFsdWVUb0FkZCA9IGxpYWJpbGl0eVZhbHVlVG9BZGQuYWRkKG5ld1Nwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZS5zdWIoY3VycmVudFNwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZSkpO1xuICAgICAgICAgICAgY29uc3QgdG90YWxBc3NldFZhbHVlQWZ0ZXJUcmFkZSA9IHRvdGFsQXNzZXRWYWx1ZS5hZGQoYXNzZXRWYWx1ZVRvQWRkKTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsU3BvdExpYWJpbGl0eVZhbHVlQWZ0ZXJUcmFkZSA9IHNwb3RMaWFiaWxpdHlWYWx1ZS5hZGQobGlhYmlsaXR5VmFsdWVUb0FkZCk7XG4gICAgICAgICAgICBjb25zdCB0b3RhbExpYWJpbGl0eVZhbHVlQWZ0ZXJUcmFkZSA9IHRvdGFsTGlhYmlsaXR5VmFsdWUuYWRkKGxpYWJpbGl0eVZhbHVlVG9BZGQpO1xuICAgICAgICAgICAgY29uc3QgbmV0QXNzZXRWYWx1ZUFmdGVyVHJhZGUgPSB0b3RhbEFzc2V0VmFsdWVBZnRlclRyYWRlLnN1Yih0b3RhbFNwb3RMaWFiaWxpdHlWYWx1ZUFmdGVyVHJhZGUpO1xuICAgICAgICAgICAgaWYgKG5ldEFzc2V0VmFsdWVBZnRlclRyYWRlLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld0xldmVyYWdlID0gdG90YWxMaWFiaWxpdHlWYWx1ZUFmdGVyVHJhZGVcbiAgICAgICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5URU5fVEhPVVNBTkQpXG4gICAgICAgICAgICAgICAgLmRpdihuZXRBc3NldFZhbHVlQWZ0ZXJUcmFkZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3TGV2ZXJhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFBvc2l0aW9uID0gdGhpcy5nZXRQZXJwUG9zaXRpb25XaXRoTFBTZXR0bGUodGFyZ2V0TWFya2V0SW5kZXgpWzBdIHx8XG4gICAgICAgICAgICB0aGlzLmdldEVtcHR5UG9zaXRpb24odGFyZ2V0TWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBvcmFjbGVEYXRhID0gdGhpcy5nZXRPcmFjbGVEYXRhRm9yUGVycE1hcmtldCh0YXJnZXRNYXJrZXRJbmRleCk7XG4gICAgICAgIGxldCBjdXJyZW50UG9zaXRpb25RdW90ZUFtb3VudCA9IHRoaXMuZ2V0UGVycFBvc2l0aW9uVmFsdWUodGFyZ2V0TWFya2V0SW5kZXgsIG9yYWNsZURhdGEsIGluY2x1ZGVPcGVuT3JkZXJzKTtcbiAgICAgICAgY29uc3QgY3VycmVudFNpZGUgPSBjdXJyZW50UG9zaXRpb24gJiYgY3VycmVudFBvc2l0aW9uLmJhc2VBc3NldEFtb3VudC5pc05lZygpXG4gICAgICAgICAgICA/IF8xLlBvc2l0aW9uRGlyZWN0aW9uLlNIT1JUXG4gICAgICAgICAgICA6IF8xLlBvc2l0aW9uRGlyZWN0aW9uLkxPTkc7XG4gICAgICAgIGlmIChjdXJyZW50U2lkZSA9PT0gXzEuUG9zaXRpb25EaXJlY3Rpb24uU0hPUlQpXG4gICAgICAgICAgICBjdXJyZW50UG9zaXRpb25RdW90ZUFtb3VudCA9IGN1cnJlbnRQb3NpdGlvblF1b3RlQW1vdW50Lm5lZygpO1xuICAgICAgICBpZiAodHJhZGVTaWRlID09PSBfMS5Qb3NpdGlvbkRpcmVjdGlvbi5TSE9SVClcbiAgICAgICAgICAgIHRyYWRlUXVvdGVBbW91bnQgPSB0cmFkZVF1b3RlQW1vdW50Lm5lZygpO1xuICAgICAgICBjb25zdCBjdXJyZW50UGVycFBvc2l0aW9uQWZ0ZXJUcmFkZSA9IGN1cnJlbnRQb3NpdGlvblF1b3RlQW1vdW50XG4gICAgICAgICAgICAuYWRkKHRyYWRlUXVvdGVBbW91bnQpXG4gICAgICAgICAgICAuYWJzKCk7XG4gICAgICAgIGNvbnN0IHRvdGFsUG9zaXRpb25BZnRlclRyYWRlRXhjbHVkaW5nVGFyZ2V0TWFya2V0ID0gdGhpcy5nZXRUb3RhbFBlcnBQb3NpdGlvblZhbHVlRXhjbHVkaW5nTWFya2V0KHRhcmdldE1hcmtldEluZGV4LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaW5jbHVkZU9wZW5PcmRlcnMpO1xuICAgICAgICBjb25zdCB0b3RhbEFzc2V0VmFsdWUgPSB0aGlzLmdldFRvdGFsQXNzZXRWYWx1ZSgpO1xuICAgICAgICBjb25zdCB0b3RhbFBlcnBQb3NpdGlvbkxpYWJpbGl0eSA9IGN1cnJlbnRQZXJwUG9zaXRpb25BZnRlclRyYWRlXG4gICAgICAgICAgICAuYWRkKHRvdGFsUG9zaXRpb25BZnRlclRyYWRlRXhjbHVkaW5nVGFyZ2V0TWFya2V0KVxuICAgICAgICAgICAgLmFicygpO1xuICAgICAgICBjb25zdCB0b3RhbFNwb3RMaWFiaWxpdHkgPSB0aGlzLmdldFNwb3RNYXJrZXRMaWFiaWxpdHlWYWx1ZSh1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBpbmNsdWRlT3Blbk9yZGVycyk7XG4gICAgICAgIGNvbnN0IHRvdGFsTGlhYmlsaXRpZXNBZnRlclRyYWRlID0gdG90YWxQZXJwUG9zaXRpb25MaWFiaWxpdHkuYWRkKHRvdGFsU3BvdExpYWJpbGl0eSk7XG4gICAgICAgIGNvbnN0IG5ldEFzc2V0VmFsdWUgPSB0b3RhbEFzc2V0VmFsdWUuc3ViKHRvdGFsU3BvdExpYWJpbGl0eSk7XG4gICAgICAgIGlmIChuZXRBc3NldFZhbHVlLmVxKG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0xldmVyYWdlID0gdG90YWxMaWFiaWxpdGllc0FmdGVyVHJhZGVcbiAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlRFTl9USE9VU0FORClcbiAgICAgICAgICAgIC5kaXYobmV0QXNzZXRWYWx1ZSk7XG4gICAgICAgIHJldHVybiBuZXdMZXZlcmFnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBob3cgbXVjaCBmZWUgd2lsbCBiZSB0YWtlbiBmb3IgYSBnaXZlbiBzaXplZCB0cmFkZVxuICAgICAqIEBwYXJhbSBxdW90ZUFtb3VudFxuICAgICAqIEByZXR1cm5zIGZlZUZvclF1b3RlIDogUHJlY2lzaW9uIFFVT1RFX1BSRUNJU0lPTlxuICAgICAqL1xuICAgIGNhbGN1bGF0ZUZlZUZvclF1b3RlQW1vdW50KHF1b3RlQW1vdW50KSB7XG4gICAgICAgIGNvbnN0IGZlZVRpZXIgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFN0YXRlQWNjb3VudCgpLnBlcnBGZWVTdHJ1Y3R1cmUuZmVlVGllcnNbMF07XG4gICAgICAgIHJldHVybiBxdW90ZUFtb3VudFxuICAgICAgICAgICAgLm11bChuZXcgXzEuQk4oZmVlVGllci5mZWVOdW1lcmF0b3IpKVxuICAgICAgICAgICAgLmRpdihuZXcgXzEuQk4oZmVlVGllci5mZWVEZW5vbWluYXRvcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIGEgdXNlcidzIG1heCB3aXRoZHJhd2FsIGFtb3VudHMgZm9yIGEgc3BvdCBtYXJrZXQuIElmIHJlZHVjZU9ubHkgaXMgdHJ1ZSxcbiAgICAgKiBpdCB3aWxsIHJldHVybiB0aGUgbWF4IHdpdGhkcmF3YWwgYW1vdW50IHdpdGhvdXQgb3BlbmluZyBhIGxpYWJpbGl0eSBmb3IgdGhlIHVzZXJcbiAgICAgKiBAcGFyYW0gbWFya2V0SW5kZXhcbiAgICAgKiBAcmV0dXJucyB3aXRoZHJhd2FsTGltaXQgOiBQcmVjaXNpb24gaXMgdGhlIHRva2VuIHByZWNpc2lvbiBmb3IgdGhlIGNob3NlbiBTcG90TWFya2V0XG4gICAgICovXG4gICAgZ2V0V2l0aGRyYXdhbExpbWl0KG1hcmtldEluZGV4LCByZWR1Y2VPbmx5KSB7XG4gICAgICAgIGNvbnN0IG5vd1RzID0gbmV3IF8xLkJOKE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApKTtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgICAgIGxldCB7IGJvcnJvd0xpbWl0LCB3aXRoZHJhd0xpbWl0IH0gPSAoMCwgc3BvdEJhbGFuY2VfMS5jYWxjdWxhdGVXaXRoZHJhd0xpbWl0KShzcG90TWFya2V0LCBub3dUcyk7XG4gICAgICAgIGNvbnN0IGZyZWVDb2xsYXRlcmFsID0gdGhpcy5nZXRGcmVlQ29sbGF0ZXJhbCgpO1xuICAgICAgICBjb25zdCBvcmFjbGVEYXRhID0gdGhpcy5nZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IHByZWNpc2lvbkluY3JlYXNlID0gbnVtZXJpY0NvbnN0YW50c18xLlRFTi5wb3cobmV3IF8xLkJOKHNwb3RNYXJrZXQuZGVjaW1hbHMgLSA2KSk7XG4gICAgICAgIGNvbnN0IHsgY2FuQnlwYXNzLCBkZXBvc2l0QW1vdW50OiB1c2VyRGVwb3NpdEFtb3VudCB9ID0gdGhpcy5jYW5CeXBhc3NXaXRoZHJhd0xpbWl0cyhtYXJrZXRJbmRleCk7XG4gICAgICAgIGlmIChjYW5CeXBhc3MpIHtcbiAgICAgICAgICAgIHdpdGhkcmF3TGltaXQgPSBfMS5CTi5tYXgod2l0aGRyYXdMaW1pdCwgdXNlckRlcG9zaXRBbW91bnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFzc2V0V2VpZ2h0ID0gKDAsIHNwb3RCYWxhbmNlXzEuY2FsY3VsYXRlQXNzZXRXZWlnaHQpKHVzZXJEZXBvc2l0QW1vdW50LCBzcG90TWFya2V0LCAnSW5pdGlhbCcpO1xuICAgICAgICBjb25zdCBhbW91bnRXaXRoZHJhd2FibGUgPSBhc3NldFdlaWdodC5lcShudW1lcmljQ29uc3RhbnRzXzEuWkVSTylcbiAgICAgICAgICAgID8gdXNlckRlcG9zaXRBbW91bnRcbiAgICAgICAgICAgIDogZnJlZUNvbGxhdGVyYWxcbiAgICAgICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5NQVJHSU5fUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgIC5kaXYoYXNzZXRXZWlnaHQpXG4gICAgICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgIC5kaXYob3JhY2xlRGF0YS5wcmljZSlcbiAgICAgICAgICAgICAgICAubXVsKHByZWNpc2lvbkluY3JlYXNlKTtcbiAgICAgICAgY29uc3QgbWF4V2l0aGRyYXdWYWx1ZSA9IF8xLkJOLm1pbihfMS5CTi5taW4oYW1vdW50V2l0aGRyYXdhYmxlLCB1c2VyRGVwb3NpdEFtb3VudCksIHdpdGhkcmF3TGltaXQuYWJzKCkpO1xuICAgICAgICBpZiAocmVkdWNlT25seSkge1xuICAgICAgICAgICAgcmV0dXJuIF8xLkJOLm1heChtYXhXaXRoZHJhd1ZhbHVlLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB3ZWlnaHRlZEFzc2V0VmFsdWUgPSB0aGlzLmdldFNwb3RNYXJrZXRBc3NldFZhbHVlKG1hcmtldEluZGV4LCAnSW5pdGlhbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGZyZWVDb2xsYXRBZnRlcldpdGhkcmF3ID0gdXNlckRlcG9zaXRBbW91bnQuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pXG4gICAgICAgICAgICAgICAgPyBmcmVlQ29sbGF0ZXJhbC5zdWIod2VpZ2h0ZWRBc3NldFZhbHVlKVxuICAgICAgICAgICAgICAgIDogZnJlZUNvbGxhdGVyYWw7XG4gICAgICAgICAgICBjb25zdCBtYXhMaWFiaWxpdHlBbGxvd2VkID0gZnJlZUNvbGxhdEFmdGVyV2l0aGRyYXdcbiAgICAgICAgICAgICAgICAubXVsKG51bWVyaWNDb25zdGFudHNfMS5NQVJHSU5fUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgIC5kaXYobmV3IF8xLkJOKHNwb3RNYXJrZXQuaW5pdGlhbExpYWJpbGl0eVdlaWdodCkpXG4gICAgICAgICAgICAgICAgLm11bChudW1lcmljQ29uc3RhbnRzXzEuUFJJQ0VfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgIC5kaXYob3JhY2xlRGF0YS5wcmljZSlcbiAgICAgICAgICAgICAgICAubXVsKHByZWNpc2lvbkluY3JlYXNlKTtcbiAgICAgICAgICAgIGNvbnN0IG1heEJvcnJvd1ZhbHVlID0gXzEuQk4ubWluKG1heFdpdGhkcmF3VmFsdWUuYWRkKG1heExpYWJpbGl0eUFsbG93ZWQpLCBib3Jyb3dMaW1pdC5hYnMoKSk7XG4gICAgICAgICAgICByZXR1cm4gXzEuQk4ubWF4KG1heEJvcnJvd1ZhbHVlLCBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FuQnlwYXNzV2l0aGRyYXdMaW1pdHMobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3Qgc3BvdE1hcmtldCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0U3BvdE1hcmtldEFjY291bnQobWFya2V0SW5kZXgpO1xuICAgICAgICBjb25zdCBtYXhEZXBvc2l0QW1vdW50ID0gc3BvdE1hcmtldC53aXRoZHJhd0d1YXJkVGhyZXNob2xkLmRpdihuZXcgXzEuQk4oMTApKTtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLmdldFNwb3RQb3NpdGlvbihtYXJrZXRJbmRleCk7XG4gICAgICAgIGNvbnN0IG5ldERlcG9zaXRzID0gdGhpcy5nZXRVc2VyQWNjb3VudCgpLnRvdGFsRGVwb3NpdHMuc3ViKHRoaXMuZ2V0VXNlckFjY291bnQoKS50b3RhbFdpdGhkcmF3cyk7XG4gICAgICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2FuQnlwYXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtYXhEZXBvc2l0QW1vdW50LFxuICAgICAgICAgICAgICAgIGRlcG9zaXRBbW91bnQ6IG51bWVyaWNDb25zdGFudHNfMS5aRVJPLFxuICAgICAgICAgICAgICAgIG5ldERlcG9zaXRzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKDAsIHR5cGVzXzEuaXNWYXJpYW50KShwb3NpdGlvbi5iYWxhbmNlVHlwZSwgJ2JvcnJvdycpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNhbkJ5cGFzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWF4RGVwb3NpdEFtb3VudCxcbiAgICAgICAgICAgICAgICBuZXREZXBvc2l0cyxcbiAgICAgICAgICAgICAgICBkZXBvc2l0QW1vdW50OiBudW1lcmljQ29uc3RhbnRzXzEuWkVSTyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVwb3NpdEFtb3VudCA9ICgwLCBzcG90QmFsYW5jZV8xLmdldFRva2VuQW1vdW50KShwb3NpdGlvbi5zY2FsZWRCYWxhbmNlLCBzcG90TWFya2V0LCBfMS5TcG90QmFsYW5jZVR5cGUuREVQT1NJVCk7XG4gICAgICAgIGlmIChuZXREZXBvc2l0cy5sdChudW1lcmljQ29uc3RhbnRzXzEuWkVSTykpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2FuQnlwYXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtYXhEZXBvc2l0QW1vdW50LFxuICAgICAgICAgICAgICAgIGRlcG9zaXRBbW91bnQsXG4gICAgICAgICAgICAgICAgbmV0RGVwb3NpdHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYW5CeXBhc3M6IGRlcG9zaXRBbW91bnQubHQobWF4RGVwb3NpdEFtb3VudCksXG4gICAgICAgICAgICBtYXhEZXBvc2l0QW1vdW50LFxuICAgICAgICAgICAgbmV0RGVwb3NpdHMsXG4gICAgICAgICAgICBkZXBvc2l0QW1vdW50LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYW5NYWtlSWRsZShzbG90LCBzbG90c0JlZm9yZUlkbGUpIHtcbiAgICAgICAgY29uc3QgdXNlckFjY291bnQgPSB0aGlzLmdldFVzZXJBY2NvdW50KCk7XG4gICAgICAgIGlmICh1c2VyQWNjb3VudC5pZGxlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlckxhc3RBY3RpdmVTbG90ID0gdXNlckFjY291bnQubGFzdEFjdGl2ZVNsb3Q7XG4gICAgICAgIGNvbnN0IHNsb3RzU2luY2VMYXN0QWN0aXZlID0gc2xvdC5zdWIodXNlckxhc3RBY3RpdmVTbG90KTtcbiAgICAgICAgaWYgKHNsb3RzU2luY2VMYXN0QWN0aXZlLmx0KHNsb3RzQmVmb3JlSWRsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc0JlaW5nTGlxdWlkYXRlZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBwZXJwUG9zaXRpb24gb2YgdXNlckFjY291bnQucGVycFBvc2l0aW9ucykge1xuICAgICAgICAgICAgaWYgKCEoMCwgcG9zaXRpb25fMS5wb3NpdGlvbklzQXZhaWxhYmxlKShwZXJwUG9zaXRpb24pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgc3BvdFBvc2l0aW9uIG9mIHVzZXJBY2NvdW50LnNwb3RQb3NpdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICgoMCwgdHlwZXNfMS5pc1ZhcmlhbnQpKHNwb3RQb3NpdGlvbi5iYWxhbmNlVHlwZSwgJ2JvcnJvdycpICYmXG4gICAgICAgICAgICAgICAgc3BvdFBvc2l0aW9uLnNjYWxlZEJhbGFuY2UuZ3QobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwb3RQb3NpdGlvbi5vcGVuT3JkZXJzICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgb3JkZXIgb2YgdXNlckFjY291bnQub3JkZXJzKSB7XG4gICAgICAgICAgICBpZiAoISgwLCB0eXBlc18xLmlzVmFyaWFudCkob3JkZXIuc3RhdHVzLCAnaW5pdCcpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXRTYWZlc3RUaWVycygpIHtcbiAgICAgICAgbGV0IHNhZmVzdFBlcnBUaWVyID0gNDtcbiAgICAgICAgbGV0IHNhZmVzdFNwb3RUaWVyID0gNDtcbiAgICAgICAgZm9yIChjb25zdCBwZXJwUG9zaXRpb24gb2YgdGhpcy5nZXRBY3RpdmVQZXJwUG9zaXRpb25zKCkpIHtcbiAgICAgICAgICAgIHNhZmVzdFBlcnBUaWVyID0gTWF0aC5taW4oc2FmZXN0UGVycFRpZXIsICgwLCB0aWVyc18xLmdldFBlcnBNYXJrZXRUaWVyTnVtYmVyKSh0aGlzLmRyaWZ0Q2xpZW50LmdldFBlcnBNYXJrZXRBY2NvdW50KHBlcnBQb3NpdGlvbi5tYXJrZXRJbmRleCkpKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHNwb3RQb3NpdGlvbiBvZiB0aGlzLmdldEFjdGl2ZVNwb3RQb3NpdGlvbnMoKSkge1xuICAgICAgICAgICAgaWYgKCgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlLCAnZGVwb3NpdCcpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzYWZlc3RTcG90VGllciA9IE1hdGgubWluKHNhZmVzdFNwb3RUaWVyLCAoMCwgdGllcnNfMS5nZXRTcG90TWFya2V0VGllck51bWJlcikodGhpcy5kcmlmdENsaWVudC5nZXRTcG90TWFya2V0QWNjb3VudChzcG90UG9zaXRpb24ubWFya2V0SW5kZXgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBlcnBUaWVyOiBzYWZlc3RQZXJwVGllcixcbiAgICAgICAgICAgIHNwb3RUaWVyOiBzYWZlc3RTcG90VGllcixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0SGVhbHRoQ29tcG9uZW50cyh7IG1hcmdpbkNhdGVnb3J5LCB9KSB7XG4gICAgICAgIGNvbnN0IGhlYWx0aENvbXBvbmVudHMgPSB7XG4gICAgICAgICAgICBkZXBvc2l0czogW10sXG4gICAgICAgICAgICBib3Jyb3dzOiBbXSxcbiAgICAgICAgICAgIHBlcnBQb3NpdGlvbnM6IFtdLFxuICAgICAgICAgICAgcGVycFBubDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3QgcGVycFBvc2l0aW9uIG9mIHRoaXMuZ2V0QWN0aXZlUGVycFBvc2l0aW9ucygpKSB7XG4gICAgICAgICAgICBjb25zdCBwZXJwTWFya2V0ID0gdGhpcy5kcmlmdENsaWVudC5nZXRQZXJwTWFya2V0QWNjb3VudChwZXJwUG9zaXRpb24ubWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2VEYXRhID0gdGhpcy5kcmlmdENsaWVudC5nZXRPcmFjbGVQcmljZURhdGFBbmRTbG90KHBlcnBNYXJrZXQuYW1tLm9yYWNsZSkuZGF0YTtcbiAgICAgICAgICAgIGNvbnN0IG9yYWNsZVByaWNlID0gb3JhY2xlUHJpY2VEYXRhLnByaWNlO1xuICAgICAgICAgICAgY29uc3Qgd29yc3RDYXNlQmFzZUFtb3VudCA9ICgwLCBtYXJnaW5fMS5jYWxjdWxhdGVXb3JzdENhc2VCYXNlQXNzZXRBbW91bnQpKHBlcnBQb3NpdGlvbik7XG4gICAgICAgICAgICBjb25zdCBtYXJnaW5SYXRpbyA9IG5ldyBfMS5CTigoMCwgXzEuY2FsY3VsYXRlTWFya2V0TWFyZ2luUmF0aW8pKHBlcnBNYXJrZXQsIHdvcnN0Q2FzZUJhc2VBbW91bnQuYWJzKCksIG1hcmdpbkNhdGVnb3J5KSk7XG4gICAgICAgICAgICBjb25zdCBxdW90ZVNwb3RNYXJrZXQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KHBlcnBNYXJrZXQucXVvdGVTcG90TWFya2V0SW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgcXVvdGVPcmFjbGVQcmljZURhdGEgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldE9yYWNsZVByaWNlRGF0YUFuZFNsb3QocXVvdGVTcG90TWFya2V0Lm9yYWNsZSkuZGF0YTtcbiAgICAgICAgICAgIGNvbnN0IGJhc2VBc3NldFZhbHVlID0gd29yc3RDYXNlQmFzZUFtb3VudFxuICAgICAgICAgICAgICAgIC5hYnMoKVxuICAgICAgICAgICAgICAgIC5tdWwob3JhY2xlUHJpY2UpXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQkFTRV9QUkVDSVNJT04pO1xuICAgICAgICAgICAgbGV0IG1hcmdpblJlcXVpcmVtZW50ID0gYmFzZUFzc2V0VmFsdWVcbiAgICAgICAgICAgICAgICAubXVsKHF1b3RlT3JhY2xlUHJpY2VEYXRhLnByaWNlKVxuICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTilcbiAgICAgICAgICAgICAgICAubXVsKG1hcmdpblJhdGlvKVxuICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLk1BUkdJTl9QUkVDSVNJT04pO1xuICAgICAgICAgICAgbWFyZ2luUmVxdWlyZW1lbnQgPSBtYXJnaW5SZXF1aXJlbWVudC5hZGQobmV3IF8xLkJOKHBlcnBQb3NpdGlvbi5vcGVuT3JkZXJzKS5tdWwobnVtZXJpY0NvbnN0YW50c18xLk9QRU5fT1JERVJfTUFSR0lOX1JFUVVJUkVNRU5UKSk7XG4gICAgICAgICAgICBpZiAocGVycFBvc2l0aW9uLmxwU2hhcmVzLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgICAgIG1hcmdpblJlcXVpcmVtZW50ID0gbWFyZ2luUmVxdWlyZW1lbnQuYWRkKF8xLkJOLm1heChudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfUFJFQ0lTSU9OLCBvcmFjbGVQcmljZVxuICAgICAgICAgICAgICAgICAgICAubXVsKHBlcnBNYXJrZXQuYW1tLm9yZGVyU3RlcFNpemUpXG4gICAgICAgICAgICAgICAgICAgIC5tdWwobnVtZXJpY0NvbnN0YW50c18xLlFVT1RFX1BSRUNJU0lPTilcbiAgICAgICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuQU1NX1JFU0VSVkVfUFJFQ0lTSU9OKVxuICAgICAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5QUklDRV9QUkVDSVNJT04pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFsdGhDb21wb25lbnRzLnBlcnBQb3NpdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWFya2V0SW5kZXg6IHBlcnBNYXJrZXQubWFya2V0SW5kZXgsXG4gICAgICAgICAgICAgICAgc2l6ZTogd29yc3RDYXNlQmFzZUFtb3VudCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogYmFzZUFzc2V0VmFsdWUsXG4gICAgICAgICAgICAgICAgd2VpZ2h0OiBtYXJnaW5SYXRpbyxcbiAgICAgICAgICAgICAgICB3ZWlnaHRlZFZhbHVlOiBtYXJnaW5SZXF1aXJlbWVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2V0dGxlZFBlcnBQb3NpdGlvbiA9IHRoaXMuZ2V0UGVycFBvc2l0aW9uV2l0aExQU2V0dGxlKHBlcnBQb3NpdGlvbi5tYXJrZXRJbmRleCwgcGVycFBvc2l0aW9uKVswXTtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uVW5yZWFsaXplZFBubCA9ICgwLCBfMS5jYWxjdWxhdGVQb3NpdGlvblBOTCkocGVycE1hcmtldCwgc2V0dGxlZFBlcnBQb3NpdGlvbiwgdHJ1ZSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgIGxldCBwbmxXZWlnaHQ7XG4gICAgICAgICAgICBpZiAocG9zaXRpb25VbnJlYWxpemVkUG5sLmd0KG51bWVyaWNDb25zdGFudHNfMS5aRVJPKSkge1xuICAgICAgICAgICAgICAgIHBubFdlaWdodCA9ICgwLCBfMS5jYWxjdWxhdGVVbnJlYWxpemVkQXNzZXRXZWlnaHQpKHBlcnBNYXJrZXQsIHF1b3RlU3BvdE1hcmtldCwgcG9zaXRpb25VbnJlYWxpemVkUG5sLCBtYXJnaW5DYXRlZ29yeSwgb3JhY2xlUHJpY2VEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBubFdlaWdodCA9IG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcG5sVmFsdWUgPSBwb3NpdGlvblVucmVhbGl6ZWRQbmxcbiAgICAgICAgICAgICAgICAubXVsKHF1b3RlT3JhY2xlUHJpY2VEYXRhLnByaWNlKVxuICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlBSSUNFX1BSRUNJU0lPTik7XG4gICAgICAgICAgICBjb25zdCB3ZWdpdGhlZFBubFZhbHVlID0gcG5sVmFsdWVcbiAgICAgICAgICAgICAgICAubXVsKHBubFdlaWdodClcbiAgICAgICAgICAgICAgICAuZGl2KG51bWVyaWNDb25zdGFudHNfMS5TUE9UX01BUktFVF9XRUlHSFRfUFJFQ0lTSU9OKTtcbiAgICAgICAgICAgIGhlYWx0aENvbXBvbmVudHMucGVycFBubC5wdXNoKHtcbiAgICAgICAgICAgICAgICBtYXJrZXRJbmRleDogcGVycE1hcmtldC5tYXJrZXRJbmRleCxcbiAgICAgICAgICAgICAgICBzaXplOiBwb3NpdGlvblVucmVhbGl6ZWRQbmwsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHBubFZhbHVlLFxuICAgICAgICAgICAgICAgIHdlaWdodDogcG5sV2VpZ2h0LFxuICAgICAgICAgICAgICAgIHdlaWdodGVkVmFsdWU6IHdlZ2l0aGVkUG5sVmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV0UXVvdGVWYWx1ZSA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBmb3IgKGNvbnN0IHNwb3RQb3NpdGlvbiBvZiB0aGlzLmdldEFjdGl2ZVNwb3RQb3NpdGlvbnMoKSkge1xuICAgICAgICAgICAgY29uc3Qgc3BvdE1hcmtldEFjY291bnQgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KHNwb3RQb3NpdGlvbi5tYXJrZXRJbmRleCk7XG4gICAgICAgICAgICBjb25zdCBvcmFjbGVQcmljZURhdGEgPSB0aGlzLmdldE9yYWNsZURhdGFGb3JTcG90TWFya2V0KHNwb3RQb3NpdGlvbi5tYXJrZXRJbmRleCk7XG4gICAgICAgICAgICBpZiAoc3BvdFBvc2l0aW9uLm1hcmtldEluZGV4ID09PSBudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkFtb3VudCA9ICgwLCBfMS5nZXRTaWduZWRUb2tlbkFtb3VudCkoKDAsIHNwb3RCYWxhbmNlXzEuZ2V0VG9rZW5BbW91bnQpKHNwb3RQb3NpdGlvbi5zY2FsZWRCYWxhbmNlLCBzcG90TWFya2V0QWNjb3VudCwgc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlKSwgc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlKTtcbiAgICAgICAgICAgICAgICBuZXRRdW90ZVZhbHVlID0gbmV0UXVvdGVWYWx1ZS5hZGQodG9rZW5BbW91bnQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgW3dvcnN0Q2FzZVRva2VuQW1vdW50LCB3b3JzdENhc2VRdW90ZVRva2VuQW1vdW50XSA9ICgwLCBzcG90UG9zaXRpb25fMS5nZXRXb3JzdENhc2VUb2tlbkFtb3VudHMpKHNwb3RQb3NpdGlvbiwgc3BvdE1hcmtldEFjY291bnQsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgICAgICBuZXRRdW90ZVZhbHVlID0gbmV0UXVvdGVWYWx1ZS5hZGQod29yc3RDYXNlUXVvdGVUb2tlbkFtb3VudCk7XG4gICAgICAgICAgICBjb25zdCBiYXNlQXNzZXRWYWx1ZSA9ICgwLCBfMS5nZXRUb2tlblZhbHVlKSh3b3JzdENhc2VUb2tlbkFtb3VudC5hYnMoKSwgc3BvdE1hcmtldEFjY291bnQuZGVjaW1hbHMsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgICAgICBjb25zdCBpc0xpYWJpbGl0eSA9ICgwLCB0eXBlc18xLmlzVmFyaWFudCkoc3BvdFBvc2l0aW9uLmJhbGFuY2VUeXBlLCAnYm9ycm93Jyk7XG4gICAgICAgICAgICBsZXQgd2VpZ2h0O1xuICAgICAgICAgICAgaWYgKGlzTGlhYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgd2VpZ2h0ID0gKDAsIHNwb3RCYWxhbmNlXzEuY2FsY3VsYXRlTGlhYmlsaXR5V2VpZ2h0KSh3b3JzdENhc2VUb2tlbkFtb3VudC5hYnMoKSwgc3BvdE1hcmtldEFjY291bnQsIG1hcmdpbkNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdlaWdodCA9ICgwLCBzcG90QmFsYW5jZV8xLmNhbGN1bGF0ZUFzc2V0V2VpZ2h0KSh3b3JzdENhc2VUb2tlbkFtb3VudCwgc3BvdE1hcmtldEFjY291bnQsIG1hcmdpbkNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHdlaWdodGVkVmFsdWUgPSBiYXNlQXNzZXRWYWx1ZVxuICAgICAgICAgICAgICAgIC5tdWwod2VpZ2h0KVxuICAgICAgICAgICAgICAgIC5kaXYobnVtZXJpY0NvbnN0YW50c18xLlNQT1RfTUFSS0VUX1dFSUdIVF9QUkVDSVNJT04pO1xuICAgICAgICAgICAgaWYgKGlzTGlhYmlsaXR5KSB7XG4gICAgICAgICAgICAgICAgaGVhbHRoQ29tcG9uZW50cy5ib3Jyb3dzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBtYXJrZXRJbmRleDogc3BvdE1hcmtldEFjY291bnQubWFya2V0SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IHdvcnN0Q2FzZVRva2VuQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYmFzZUFzc2V0VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodDogd2VpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHRlZFZhbHVlOiB3ZWlnaHRlZFZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhbHRoQ29tcG9uZW50cy5kZXBvc2l0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgbWFya2V0SW5kZXg6IHNwb3RNYXJrZXRBY2NvdW50Lm1hcmtldEluZGV4LFxuICAgICAgICAgICAgICAgICAgICBzaXplOiB3b3JzdENhc2VUb2tlbkFtb3VudCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJhc2VBc3NldFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IHdlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ZWRWYWx1ZTogd2VpZ2h0ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5ldFF1b3RlVmFsdWUuZXEobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pKSB7XG4gICAgICAgICAgICBjb25zdCBzcG90TWFya2V0QWNjb3VudCA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0UXVvdGVTcG90TWFya2V0QWNjb3VudCgpO1xuICAgICAgICAgICAgY29uc3Qgb3JhY2xlUHJpY2VEYXRhID0gdGhpcy5nZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChudW1lcmljQ29uc3RhbnRzXzEuUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgpO1xuICAgICAgICAgICAgY29uc3QgYmFzZUFzc2V0VmFsdWUgPSAoMCwgXzEuZ2V0VG9rZW5WYWx1ZSkobmV0UXVvdGVWYWx1ZS5hYnMoKSwgc3BvdE1hcmtldEFjY291bnQuZGVjaW1hbHMsIG9yYWNsZVByaWNlRGF0YSk7XG4gICAgICAgICAgICBjb25zdCBpc0xpYWJpbGl0eSA9IG5ldFF1b3RlVmFsdWUubHQobnVtZXJpY0NvbnN0YW50c18xLlpFUk8pO1xuICAgICAgICAgICAgbGV0IHdlaWdodDtcbiAgICAgICAgICAgIGlmIChpc0xpYWJpbGl0eSkge1xuICAgICAgICAgICAgICAgIHdlaWdodCA9ICgwLCBzcG90QmFsYW5jZV8xLmNhbGN1bGF0ZUxpYWJpbGl0eVdlaWdodCkobmV0UXVvdGVWYWx1ZS5hYnMoKSwgc3BvdE1hcmtldEFjY291bnQsIG1hcmdpbkNhdGVnb3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHdlaWdodCA9ICgwLCBzcG90QmFsYW5jZV8xLmNhbGN1bGF0ZUFzc2V0V2VpZ2h0KShuZXRRdW90ZVZhbHVlLCBzcG90TWFya2V0QWNjb3VudCwgbWFyZ2luQ2F0ZWdvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgd2VpZ2h0ZWRWYWx1ZSA9IGJhc2VBc3NldFZhbHVlXG4gICAgICAgICAgICAgICAgLm11bCh3ZWlnaHQpXG4gICAgICAgICAgICAgICAgLmRpdihudW1lcmljQ29uc3RhbnRzXzEuU1BPVF9NQVJLRVRfV0VJR0hUX1BSRUNJU0lPTik7XG4gICAgICAgICAgICBpZiAoaXNMaWFiaWxpdHkpIHtcbiAgICAgICAgICAgICAgICBoZWFsdGhDb21wb25lbnRzLmJvcnJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtldEluZGV4OiBzcG90TWFya2V0QWNjb3VudC5tYXJrZXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogbmV0UXVvdGVWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJhc2VBc3NldFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IHdlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ZWRWYWx1ZTogd2VpZ2h0ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlYWx0aENvbXBvbmVudHMuZGVwb3NpdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtldEluZGV4OiBzcG90TWFya2V0QWNjb3VudC5tYXJrZXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogbmV0UXVvdGVWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJhc2VBc3NldFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IHdlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0ZWRWYWx1ZTogd2VpZ2h0ZWRWYWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhbHRoQ29tcG9uZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0b3RhbCBwb3NpdGlvbiB2YWx1ZSwgZXhjbHVkaW5nIGFueSBwb3NpdGlvbiBjb21pbmcgZnJvbSB0aGUgZ2l2ZW4gdGFyZ2V0IG1hcmtldFxuICAgICAqIEBwYXJhbSBtYXJrZXRUb0lnbm9yZVxuICAgICAqIEByZXR1cm5zIHBvc2l0aW9uVmFsdWUgOiBQcmVjaXNpb24gUVVPVEVfUFJFQ0lTSU9OXG4gICAgICovXG4gICAgZ2V0VG90YWxQZXJwUG9zaXRpb25WYWx1ZUV4Y2x1ZGluZ01hcmtldChtYXJrZXRUb0lnbm9yZSwgbWFyZ2luQ2F0ZWdvcnksIGxpcXVpZGF0aW9uQnVmZmVyLCBpbmNsdWRlT3Blbk9yZGVycykge1xuICAgICAgICBjb25zdCBjdXJyZW50UGVycFBvc2l0aW9uID0gdGhpcy5nZXRQZXJwUG9zaXRpb25XaXRoTFBTZXR0bGUobWFya2V0VG9JZ25vcmUsIHVuZGVmaW5lZCwgISFtYXJnaW5DYXRlZ29yeSlbMF0gfHwgdGhpcy5nZXRFbXB0eVBvc2l0aW9uKG1hcmtldFRvSWdub3JlKTtcbiAgICAgICAgY29uc3Qgb3JhY2xlRGF0YSA9IHRoaXMuZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQobWFya2V0VG9JZ25vcmUpO1xuICAgICAgICBsZXQgY3VycmVudFBlcnBQb3NpdGlvblZhbHVlVVNEQyA9IG51bWVyaWNDb25zdGFudHNfMS5aRVJPO1xuICAgICAgICBpZiAoY3VycmVudFBlcnBQb3NpdGlvbikge1xuICAgICAgICAgICAgY3VycmVudFBlcnBQb3NpdGlvblZhbHVlVVNEQyA9IHRoaXMuZ2V0UGVycFBvc2l0aW9uVmFsdWUobWFya2V0VG9JZ25vcmUsIG9yYWNsZURhdGEsIGluY2x1ZGVPcGVuT3JkZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUb3RhbFBlcnBQb3NpdGlvblZhbHVlKG1hcmdpbkNhdGVnb3J5LCBsaXF1aWRhdGlvbkJ1ZmZlciwgaW5jbHVkZU9wZW5PcmRlcnMpLnN1YihjdXJyZW50UGVycFBvc2l0aW9uVmFsdWVVU0RDKTtcbiAgICB9XG4gICAgZ2V0T3JhY2xlRGF0YUZvclBlcnBNYXJrZXQobWFya2V0SW5kZXgpIHtcbiAgICAgICAgY29uc3Qgb3JhY2xlS2V5ID0gdGhpcy5kcmlmdENsaWVudC5nZXRQZXJwTWFya2V0QWNjb3VudChtYXJrZXRJbmRleCkuYW1tLm9yYWNsZTtcbiAgICAgICAgY29uc3Qgb3JhY2xlRGF0YSA9IHRoaXMuZHJpZnRDbGllbnQuZ2V0T3JhY2xlUHJpY2VEYXRhQW5kU2xvdChvcmFjbGVLZXkpLmRhdGE7XG4gICAgICAgIHJldHVybiBvcmFjbGVEYXRhO1xuICAgIH1cbiAgICBnZXRPcmFjbGVEYXRhRm9yU3BvdE1hcmtldChtYXJrZXRJbmRleCkge1xuICAgICAgICBjb25zdCBvcmFjbGVLZXkgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldFNwb3RNYXJrZXRBY2NvdW50KG1hcmtldEluZGV4KS5vcmFjbGU7XG4gICAgICAgIGNvbnN0IG9yYWNsZURhdGEgPSB0aGlzLmRyaWZ0Q2xpZW50LmdldE9yYWNsZVByaWNlRGF0YUFuZFNsb3Qob3JhY2xlS2V5KS5kYXRhO1xuICAgICAgICByZXR1cm4gb3JhY2xlRGF0YTtcbiAgICB9XG59XG5leHBvcnRzLlVzZXIgPSBVc2VyO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVXNlciIsInR5cGVzXzEiLCJyZXF1aXJlIiwicG9zaXRpb25fMSIsIm51bWVyaWNDb25zdGFudHNfMSIsIl8xIiwic3BvdEJhbGFuY2VfMSIsImFtbV8xIiwibWFyZ2luXzEiLCJwb2xsaW5nVXNlckFjY291bnRTdWJzY3JpYmVyXzEiLCJ3ZWJTb2NrZXRVc2VyQWNjb3VudFN1YnNjcmliZXJfMSIsInNwb3RQb3NpdGlvbl8xIiwib3JhY2xlc18xIiwidGllcnNfMSIsImlzU3Vic2NyaWJlZCIsIl9pc1N1YnNjcmliZWQiLCJhY2NvdW50U3Vic2NyaWJlciIsInZhbCIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiX2EiLCJfYiIsImRyaWZ0Q2xpZW50IiwidXNlckFjY291bnRQdWJsaWNLZXkiLCJhY2NvdW50U3Vic2NyaXB0aW9uIiwidHlwZSIsIlBvbGxpbmdVc2VyQWNjb3VudFN1YnNjcmliZXIiLCJwcm9ncmFtIiwiYWNjb3VudExvYWRlciIsInVzZXJBY2NvdW50U3Vic2NyaWJlciIsIldlYlNvY2tldFVzZXJBY2NvdW50U3Vic2NyaWJlciIsImV2ZW50RW1pdHRlciIsInN1YnNjcmliZSIsInVzZXJBY2NvdW50IiwiZmV0Y2hBY2NvdW50cyIsImZldGNoIiwidW5zdWJzY3JpYmUiLCJnZXRVc2VyQWNjb3VudCIsImdldFVzZXJBY2NvdW50QW5kU2xvdCIsImRhdGEiLCJmb3JjZUdldFVzZXJBY2NvdW50IiwiZ2V0UGVycFBvc2l0aW9uRm9yVXNlckFjY291bnQiLCJtYXJrZXRJbmRleCIsInBlcnBQb3NpdGlvbnMiLCJmaW5kIiwicG9zaXRpb24iLCJnZXRQZXJwUG9zaXRpb24iLCJnZXRQZXJwUG9zaXRpb25BbmRTbG90IiwicGVycFBvc2l0aW9uIiwic2xvdCIsImdldFNwb3RQb3NpdGlvbkZvclVzZXJBY2NvdW50Iiwic3BvdFBvc2l0aW9ucyIsImdldFNwb3RQb3NpdGlvbiIsImdldFNwb3RQb3NpdGlvbkFuZFNsb3QiLCJzcG90UG9zaXRpb24iLCJnZXRFbXB0eVNwb3RQb3NpdGlvbiIsInNjYWxlZEJhbGFuY2UiLCJaRVJPIiwiYmFsYW5jZVR5cGUiLCJTcG90QmFsYW5jZVR5cGUiLCJERVBPU0lUIiwiY3VtdWxhdGl2ZURlcG9zaXRzIiwib3BlbkFza3MiLCJvcGVuQmlkcyIsIm9wZW5PcmRlcnMiLCJnZXRUb2tlbkFtb3VudCIsInVuZGVmaW5lZCIsInNwb3RNYXJrZXQiLCJnZXRTcG90TWFya2V0QWNjb3VudCIsImdldFNpZ25lZFRva2VuQW1vdW50IiwiZ2V0RW1wdHlQb3NpdGlvbiIsImJhc2VBc3NldEFtb3VudCIsInJlbWFpbmRlckJhc2VBc3NldEFtb3VudCIsImxhc3RDdW11bGF0aXZlRnVuZGluZ1JhdGUiLCJxdW90ZUFzc2V0QW1vdW50IiwicXVvdGVFbnRyeUFtb3VudCIsInF1b3RlQnJlYWtFdmVuQW1vdW50Iiwic2V0dGxlZFBubCIsImxwU2hhcmVzIiwibGFzdEJhc2VBc3NldEFtb3VudFBlckxwIiwibGFzdFF1b3RlQXNzZXRBbW91bnRQZXJMcCIsInBlckxwQmFzZSIsImdldENsb25lZFBvc2l0aW9uIiwiY2xvbmVkUG9zaXRpb24iLCJhc3NpZ24iLCJnZXRPcmRlckZvclVzZXJBY2NvdW50Iiwib3JkZXJJZCIsIm9yZGVycyIsIm9yZGVyIiwiZ2V0T3JkZXIiLCJnZXRPcmRlckFuZFNsb3QiLCJnZXRPcmRlckJ5VXNlcklkRm9yVXNlckFjY291bnQiLCJ1c2VyT3JkZXJJZCIsImdldE9yZGVyQnlVc2VyT3JkZXJJZCIsImdldE9yZGVyQnlVc2VyT3JkZXJJZEFuZFNsb3QiLCJnZXRPcGVuT3JkZXJzRm9yVXNlckFjY291bnQiLCJmaWx0ZXIiLCJpc1ZhcmlhbnQiLCJzdGF0dXMiLCJnZXRPcGVuT3JkZXJzIiwiZ2V0T3Blbk9yZGVyc0FuZFNsb3QiLCJnZXRVc2VyQWNjb3VudFB1YmxpY0tleSIsImV4aXN0cyIsInVzZXJBY2NvdW50UlBDUmVzcG9uc2UiLCJjb25uZWN0aW9uIiwiZ2V0UGFyc2VkQWNjb3VudEluZm8iLCJnZXRQZXJwQmlkQXNrcyIsImxwT3BlbkJpZHMiLCJscE9wZW5Bc2tzIiwiZ2V0TFBCaWRBc2tzIiwidG90YWxPcGVuQmlkcyIsImFkZCIsInRvdGFsT3BlbkFza3MiLCJlcSIsIm1hcmtldCIsImdldFBlcnBNYXJrZXRBY2NvdW50IiwibWFya2V0T3BlbkJpZHMiLCJtYXJrZXRPcGVuQXNrcyIsImNhbGN1bGF0ZU1hcmtldE9wZW5CaWRBc2siLCJhbW0iLCJiYXNlQXNzZXRSZXNlcnZlIiwibWluQmFzZUFzc2V0UmVzZXJ2ZSIsIm1heEJhc2VBc3NldFJlc2VydmUiLCJvcmRlclN0ZXBTaXplIiwibXVsIiwiZGl2Iiwic3FydEsiLCJnZXRQZXJwUG9zaXRpb25XaXRoTFBTZXR0bGUiLCJvcmlnaW5hbFBvc2l0aW9uIiwiYnVybkxwU2hhcmVzIiwiZXhwb0RpZmYiLCJtYXJrZXRQZXJMcFJlYmFzZVNjYWxhciIsIkJOIiwiTWF0aCIsImFicyIsIm5TaGFyZXMiLCJxdW90ZUZ1bmRpbmdQbmwiLCJjYWxjdWxhdGVQb3NpdGlvbkZ1bmRpbmdQTkwiLCJiYXNlVW5pdCIsIkFNTV9SRVNFUlZFX1BSRUNJU0lPTiIsIkFNTV9SRVNFUlZFX1BSRUNJU0lPTl9FWFAiLCJ0b051bWJlciIsIm1hcmtldFBlckxwUmViYXNlIiwiZGVsdGFCYWEiLCJiYXNlQXNzZXRBbW91bnRQZXJMcCIsInN1YiIsImRlbHRhUWFhIiwicXVvdGVBc3NldEFtb3VudFBlckxwIiwic2lnbiIsInYiLCJpc05lZyIsInN0YW5kYXJkaXplIiwiYW1vdW50Iiwic3RlcFNpemUiLCJyZW1haW5kZXIiLCJtb2QiLCJzdGFuZGFyZGl6ZWRBbW91bnQiLCJzdGFuZGFyZGl6ZWRCYWEiLCJyZW1haW5kZXJCYWEiLCJuZXdTdGFuZGFyZGl6ZWRCYWEiLCJuZXdSZW1haW5kZXJCYWEiLCJkdXN0QmFzZUFzc2V0VmFsdWUiLCJvcmFjbGVQcmljZURhdGEiLCJnZXRPcmFjbGVEYXRhRm9yUGVycE1hcmtldCIsInByaWNlIiwiT05FIiwidXBkYXRlVHlwZSIsImd0IiwibmV3UXVvdGVFbnRyeSIsInBubCIsImN1bXVsYXRpdmVGdW5kaW5nUmF0ZUxvbmciLCJsdCIsImN1bXVsYXRpdmVGdW5kaW5nUmF0ZVNob3J0IiwiZ2V0UGVycEJ1eWluZ1Bvd2VyIiwiY29sbGF0ZXJhbEJ1ZmZlciIsIndvcnN0Q2FzZUJhc2VBc3NldEFtb3VudCIsImNhbGN1bGF0ZVdvcnN0Q2FzZUJhc2VBc3NldEFtb3VudCIsImZyZWVDb2xsYXRlcmFsIiwiZ2V0RnJlZUNvbGxhdGVyYWwiLCJnZXRQZXJwQnV5aW5nUG93ZXJGcm9tRnJlZUNvbGxhdGVyYWxBbmRCYXNlQXNzZXRBbW91bnQiLCJtYXJnaW5SYXRpbyIsImNhbGN1bGF0ZU1hcmtldE1hcmdpblJhdGlvIiwiTUFSR0lOX1BSRUNJU0lPTiIsIm1hcmdpbkNhdGVnb3J5IiwidG90YWxDb2xsYXRlcmFsIiwiZ2V0VG90YWxDb2xsYXRlcmFsIiwibWFyZ2luUmVxdWlyZW1lbnQiLCJnZXRJbml0aWFsTWFyZ2luUmVxdWlyZW1lbnQiLCJnZXRNYWludGVuYW5jZU1hcmdpblJlcXVpcmVtZW50IiwiZ3RlIiwiZ2V0TWFyZ2luUmVxdWlyZW1lbnQiLCJsaXF1aWRhdGlvbkJ1ZmZlciIsInN0cmljdCIsImdldFRvdGFsUGVycFBvc2l0aW9uVmFsdWUiLCJnZXRTcG90TWFya2V0TGlhYmlsaXR5VmFsdWUiLCJnZXRBY3RpdmVQZXJwUG9zaXRpb25zRm9yVXNlckFjY291bnQiLCJwb3MiLCJnZXRBY3RpdmVQZXJwUG9zaXRpb25zIiwiZ2V0QWN0aXZlUGVycFBvc2l0aW9uc0FuZFNsb3QiLCJwb3NpdGlvbnMiLCJnZXRBY3RpdmVTcG90UG9zaXRpb25zRm9yVXNlckFjY291bnQiLCJpc1Nwb3RQb3NpdGlvbkF2YWlsYWJsZSIsImdldEFjdGl2ZVNwb3RQb3NpdGlvbnMiLCJnZXRBY3RpdmVTcG90UG9zaXRpb25zQW5kU2xvdCIsImdldFVucmVhbGl6ZWRQTkwiLCJ3aXRoRnVuZGluZyIsIndpdGhXZWlnaHRNYXJnaW5DYXRlZ29yeSIsInJlZHVjZSIsInVucmVhbGl6ZWRQbmwiLCJxdW90ZVNwb3RNYXJrZXQiLCJxdW90ZVNwb3RNYXJrZXRJbmRleCIsInF1b3RlT3JhY2xlUHJpY2VEYXRhIiwiZ2V0T3JhY2xlRGF0YUZvclNwb3RNYXJrZXQiLCJwb3NpdGlvblVucmVhbGl6ZWRQbmwiLCJjYWxjdWxhdGVQb3NpdGlvblBOTCIsInF1b3RlUHJpY2UiLCJtaW4iLCJoaXN0b3JpY2FsT3JhY2xlRGF0YSIsImxhc3RPcmFjbGVQcmljZVR3YXA1TWluIiwibWF4IiwiUFJJQ0VfUFJFQ0lTSU9OIiwiY2FsY3VsYXRlVW5yZWFsaXplZEFzc2V0V2VpZ2h0IiwiU1BPVF9NQVJLRVRfV0VJR0hUX1BSRUNJU0lPTiIsImdldFVucmVhbGl6ZWRGdW5kaW5nUE5MIiwiZ2V0U3BvdE1hcmtldEFzc2V0QW5kTGlhYmlsaXR5VmFsdWUiLCJpbmNsdWRlT3Blbk9yZGVycyIsIm5vdyIsIkRhdGUiLCJnZXRUaW1lIiwibmV0UXVvdGVWYWx1ZSIsInRvdGFsQXNzZXRWYWx1ZSIsInRvdGFsTGlhYmlsaXR5VmFsdWUiLCJjb3VudEZvckJhc2UiLCJjb3VudEZvclF1b3RlIiwiUVVPVEVfU1BPVF9NQVJLRVRfSU5ERVgiLCJzcG90TWFya2V0QWNjb3VudCIsInRva2VuQW1vdW50Iiwid2VpZ2h0ZWRUb2tlblZhbHVlIiwiZ2V0U3BvdExpYWJpbGl0eVZhbHVlIiwiZ2V0U3BvdEFzc2V0VmFsdWUiLCJCT1JST1ciLCJsaWFiaWxpdHlWYWx1ZSIsImFzc2V0VmFsdWUiLCJ3b3JzdENhc2VUb2tlbkFtb3VudCIsIndvcnN0Q2FzZVF1b3RlVG9rZW5BbW91bnQiLCJnZXRXb3JzdENhc2VUb2tlbkFtb3VudHMiLCJiYXNlQXNzZXRWYWx1ZSIsImJhc2VMaWFiaWxpdHlWYWx1ZSIsIndlaWdodCIsIm1heE1hcmdpblJhdGlvIiwiT1BFTl9PUkRFUl9NQVJHSU5fUkVRVUlSRU1FTlQiLCJlc3RPcmFjbGVUd2FwIiwiY2FsY3VsYXRlTGl2ZU9yYWNsZVR3YXAiLCJGSVZFX01JTlVURSIsImdldFN0cmljdFRva2VuVmFsdWUiLCJkZWNpbWFscyIsImdldFRva2VuVmFsdWUiLCJjYWxjdWxhdGVMaWFiaWxpdHlXZWlnaHQiLCJnZXRTcG90TWFya2V0QXNzZXRWYWx1ZSIsImNhbGN1bGF0ZUFzc2V0V2VpZ2h0IiwiZ2V0U3BvdFBvc2l0aW9uVmFsdWUiLCJnZXROZXRTcG90TWFya2V0VmFsdWUiLCJnZXRIZWFsdGgiLCJtYWludGVuYW5jZU1hcmdpblJlcSIsImhlYWx0aCIsImx0ZSIsInJvdW5kIiwiY2FsY3VsYXRlV2VpZ2h0ZWRQZXJwUG9zaXRpb25WYWx1ZSIsInZhbHVhdGlvblByaWNlIiwiZXhwaXJ5UHJpY2UiLCJCQVNFX1BSRUNJU0lPTiIsImdldE9yYWNsZVByaWNlRGF0YUFuZFNsb3QiLCJvcmFjbGUiLCJRVU9URV9QUkVDSVNJT04iLCJnZXRQZXJwTWFya2V0TGlhYmlsaXR5VmFsdWUiLCJ0b3RhbFBlcnBWYWx1ZSIsImdldFBlcnBQb3NpdGlvblZhbHVlIiwidXNlclBvc2l0aW9uIiwiY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWVXaXRoT3JhY2xlIiwiZ2V0UG9zaXRpb25TaWRlIiwiY3VycmVudFBvc2l0aW9uIiwiUG9zaXRpb25EaXJlY3Rpb24iLCJMT05HIiwiU0hPUlQiLCJnZXRQb3NpdGlvbkVzdGltYXRlZEV4aXRQcmljZUFuZFBubCIsImFtb3VudFRvQ2xvc2UiLCJ1c2VBTU1DbG9zZSIsImVudHJ5UHJpY2UiLCJjYWxjdWxhdGVFbnRyeVByaWNlIiwiY2FsY3VsYXRlUmVzZXJ2ZVByaWNlIiwiY2FsY3VsYXRlQmFzZUFzc2V0VmFsdWUiLCJleGl0UHJpY2UiLCJBTU1fVE9fUVVPVEVfUFJFQ0lTSU9OX1JBVElPIiwicG5sUGVyQmFzZSIsImdldExldmVyYWdlIiwiY2FsY3VsYXRlTGV2ZXJhZ2VGcm9tQ29tcG9uZW50cyIsImdldExldmVyYWdlQ29tcG9uZW50cyIsInBlcnBMaWFiaWxpdHlWYWx1ZSIsInBlcnBQbmwiLCJzcG90QXNzZXRWYWx1ZSIsInNwb3RMaWFiaWxpdHlWYWx1ZSIsIm5ldEFzc2V0VmFsdWUiLCJURU5fVEhPVVNBTkQiLCJwZXJwTGlhYmlsaXR5IiwiZ2V0VG90YWxMaWFiaWxpdHlWYWx1ZSIsImdldFRvdGFsQXNzZXRWYWx1ZSIsImdldFRvdGFsQWxsVGltZVBubCIsIm5ldEJhbmtWYWx1ZSIsIm5ldFVzZFZhbHVlIiwidG90YWxEZXBvc2l0cyIsInRvdGFsV2l0aGRyYXdzIiwidG90YWxQbmwiLCJnZXRNYXhMZXZlcmFnZUZvclBlcnAiLCJwZXJwTWFya2V0SW5kZXgiLCJpc0xwIiwibWFya2V0UHJpY2UiLCJscEJ1ZmZlciIsInJhd01hcmdpblJhdGlvIiwibWFyZ2luUmF0aW9Jbml0aWFsIiwibWFyZ2luUmF0aW9NYWludGVuYW5jZSIsIm1heFNpemUiLCJhdHRlbXB0cyIsInRhcmdldFNpemUiLCJhZGRpdGlvbmFsTGlhYmlsaXRpZXMiLCJnZXRNYXhMZXZlcmFnZUZvclNwb3QiLCJzcG90TWFya2V0SW5kZXgiLCJkaXJlY3Rpb24iLCJjdXJyZW50UXVvdGVBc3NldFZhbHVlIiwiY3VycmVudFF1b3RlTGlhYmlsaXR5VmFsdWUiLCJjdXJyZW50UXVvdGVWYWx1ZSIsImN1cnJlbnRTcG90TWFya2V0QXNzZXRWYWx1ZSIsImN1cnJlbnRTcG90TWFya2V0TGlhYmlsaXR5VmFsdWUiLCJjdXJyZW50U3BvdE1hcmtldE5ldFZhbHVlIiwidHJhZGVRdW90ZUFtb3VudCIsImdldE1heFRyYWRlU2l6ZVVTRENGb3JTcG90IiwiYXNzZXRWYWx1ZVRvQWRkIiwibGlhYmlsaXR5VmFsdWVUb0FkZCIsIm5ld1F1b3RlTmV0VmFsdWUiLCJuZXdRdW90ZUFzc2V0VmFsdWUiLCJuZXdRdW90ZUxpYWJpbGl0eVZhbHVlIiwibmV3U3BvdE1hcmtldE5ldFZhbHVlIiwibmV3U3BvdE1hcmtldEFzc2V0VmFsdWUiLCJuZXdTcG90TWFya2V0TGlhYmlsaXR5VmFsdWUiLCJmaW5hbFRvdGFsQXNzZXRWYWx1ZSIsImZpbmFsVG90YWxTcG90TGlhYmlsaXR5IiwiZmluYWxUb3RhbExpYWJpbGl0eVZhbHVlIiwiZmluYWxOZXRBc3NldFZhbHVlIiwiZ2V0TWFyZ2luUmF0aW8iLCJCTl9NQVgiLCJjYW5CZUxpcXVpZGF0ZWQiLCJpc0JlaW5nTGlxdWlkYXRlZCIsImdldFN0YXRlQWNjb3VudCIsImxpcXVpZGF0aW9uTWFyZ2luQnVmZmVyUmF0aW8iLCJpc09uZU9mVmFyaWFudCIsImlzQmFua3J1cHQiLCJuZWVkc1RvU2V0dGxlRnVuZGluZ1BheW1lbnQiLCJzcG90TGlxdWlkYXRpb25QcmljZSIsInBvc2l0aW9uQmFzZVNpemVDaGFuZ2UiLCJjdXJyZW50U3BvdFBvc2l0aW9uIiwibWFpbnRlbmFuY2VNYXJnaW5SZXF1aXJlbWVudCIsInNpZ25lZFRva2VuQW1vdW50IiwiZnJlZUNvbGxhdGVyYWxEZWx0YSIsImNhbGN1bGF0ZUZyZWVDb2xsYXRlcmFsRGVsdGFGb3JTcG90IiwicGVycE1hcmtldFdpdGhTYW1lT3JhY2xlIiwiZ2V0UGVycE1hcmtldEFjY291bnRzIiwiZXF1YWxzIiwiZnJlZUNvbGxhdGVyYWxEZWx0YUZvclBlcnAiLCJjYWxjdWxhdGVGcmVlQ29sbGF0ZXJhbERlbHRhRm9yUGVycCIsIm9yYWNsZVByaWNlIiwibGlxUHJpY2VEZWx0YSIsImxpcVByaWNlIiwibGlxdWlkYXRpb25QcmljZSIsImN1cnJlbnRQZXJwUG9zaXRpb24iLCJzcG90TWFya2V0V2l0aFNhbWVPcmFjbGUiLCJnZXRTcG90TWFya2V0QWNjb3VudHMiLCJzcG90RnJlZUNvbGxhdGVyYWxEZWx0YSIsImN1cnJlbnRCYXNlQXNzZXRBbW91bnQiLCJvcmRlckJhc2VBc3NldEFtb3VudCIsInByb3Bvc2VkQmFzZUFzc2V0QW1vdW50IiwicHJvcG9zZWRXb3JzdENhc2VCYXNlQXNzZXRBbW91bnQiLCJtYXJnaW5SYXRpb1F1b3RlUHJlY2lzaW9uIiwibmVnIiwidG9rZW5QcmVjaXNpb24iLCJwb3ciLCJhc3NldFdlaWdodCIsImxpYWJpbGl0eVdlaWdodCIsImxpcXVpZGF0aW9uUHJpY2VBZnRlckNsb3NlIiwicG9zaXRpb25NYXJrZXRJbmRleCIsImNsb3NlUXVvdGVBbW91bnQiLCJjbG9zZUJhc2VBbW91bnQiLCJnZXRNYXhUcmFkZVNpemVVU0RDRm9yUGVycCIsInRhcmdldE1hcmtldEluZGV4IiwidHJhZGVTaWRlIiwidGFyZ2V0U2lkZSIsImN1cnJlbnRQb3NpdGlvblNpZGUiLCJ0YXJnZXRpbmdTYW1lU2lkZSIsIm9yYWNsZURhdGEiLCJtYXJrZXRBY2NvdW50Iiwib3Bwb3NpdGVTaXplVmFsdWVVU0RDIiwibWF4UG9zaXRpb25TaXplIiwicGVycFBvc2l0aW9uVmFsdWUiLCJtYXJnaW5GcmVlZEJ5Q2xvc2luZyIsIm1hcmdpblJlcXVpcmVtZW50QWZ0ZXJDbG9zaW5nIiwiZnJlZUNvbGxhdGVyYWxBZnRlckNsb3NlIiwiYnV5aW5nUG93ZXJBZnRlckNsb3NlIiwiY2FsY3VsYXRlU3BvdE1hcmtldE1hcmdpblJhdGlvIiwidHJhZGVBbW91bnQiLCJpc01hcmdpblRyYWRpbmdFbmFibGVkIiwiZ2V0TWF4U3dhcEFtb3VudCIsImluTWFya2V0SW5kZXgiLCJvdXRNYXJrZXRJbmRleCIsImNhbGN1bGF0ZVN3YXAiLCJpdGVyYXRpb25MaW1pdCIsImluTWFya2V0Iiwib3V0TWFya2V0IiwiaW5PcmFjbGVQcmljZSIsIm91dE9yYWNsZVByaWNlIiwiaW5QcmVjaXNpb24iLCJvdXRQcmVjaXNpb24iLCJpblNwb3RQb3NpdGlvbiIsIm91dFNwb3RQb3NpdGlvbiIsImluQ29udHJpYnV0aW9uSW5pdGlhbCIsImNhbGN1bGF0ZVNwb3RQb3NpdGlvbkZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uIiwiaW5Ub3RhbEFzc2V0VmFsdWVJbml0aWFsIiwiaW5Ub3RhbExpYWJpbGl0eVZhbHVlSW5pdGlhbCIsImNhbGN1bGF0ZVNwb3RQb3NpdGlvbkxldmVyYWdlQ29udHJpYnV0aW9uIiwib3V0Q29udHJpYnV0aW9uSW5pdGlhbCIsIm91dFRvdGFsQXNzZXRWYWx1ZUluaXRpYWwiLCJvdXRUb3RhbExpYWJpbGl0eVZhbHVlSW5pdGlhbCIsImluaXRpYWxDb250cmlidXRpb24iLCJpblN3YXAiLCJvdXRTd2FwIiwiaW5Ub2tlbkFtb3VudCIsIm91dFRva2VuQW1vdW50Iiwib3V0U2FmZXJUaGFuSW4iLCJpbml0aWFsQXNzZXRXZWlnaHQiLCJtaW5Td2FwIiwibWF4U3dhcCIsIlRXTyIsImVycm9yIiwiaSIsImZyZWVDb2xsYXRlcmFsQWZ0ZXIiLCJpblBvc2l0aW9uQWZ0ZXIiLCJjbG9uZUFuZFVwZGF0ZVNwb3RQb3NpdGlvbiIsIm91dFBvc2l0aW9uQWZ0ZXIiLCJpbkNvbnRyaWJ1dGlvbkFmdGVyIiwib3V0Q29udHJpYnV0aW9uQWZ0ZXIiLCJjb250cmlidXRpb25BZnRlciIsImNvbnRyaWJ1dGlvbkRlbHRhIiwiY29uc29sZSIsImxvZyIsImluVG90YWxBc3NldFZhbHVlQWZ0ZXIiLCJpblRvdGFsTGlhYmlsaXR5VmFsdWVBZnRlciIsIm91dFRvdGFsQXNzZXRWYWx1ZUFmdGVyIiwib3V0VG90YWxMaWFiaWxpdHlWYWx1ZUFmdGVyIiwic3BvdEFzc2V0VmFsdWVEZWx0YSIsInNwb3RMaWFiaWxpdHlWYWx1ZURlbHRhIiwic3BvdEFzc2V0VmFsdWVBZnRlciIsInNwb3RMaWFiaWxpdHlWYWx1ZUFmdGVyIiwibGV2ZXJhZ2UiLCJpbkFtb3VudCIsIm91dEFtb3VudCIsInByZVRva2VuQW1vdW50Iiwic2lnTnVtIiwic2NhbGVkQmFsYW5jZURlbHRhIiwiZ2V0QmFsYW5jZSIsInVwZGF0ZURpcmVjdGlvbiIsImZyZWVDb2xsYXRlcmFsQ29udHJpYnV0aW9uIiwiYWNjb3VudExldmVyYWdlQWZ0ZXJTd2FwIiwiYWNjb3VudExldmVyYWdlUmF0aW9BZnRlclRyYWRlIiwidGFyZ2V0TWFya2V0VHlwZSIsInRyYWRlSXNQZXJwIiwidG90YWxBc3NldFZhbHVlQWZ0ZXJUcmFkZSIsInRvdGFsU3BvdExpYWJpbGl0eVZhbHVlQWZ0ZXJUcmFkZSIsInRvdGFsTGlhYmlsaXR5VmFsdWVBZnRlclRyYWRlIiwibmV0QXNzZXRWYWx1ZUFmdGVyVHJhZGUiLCJuZXdMZXZlcmFnZSIsImN1cnJlbnRQb3NpdGlvblF1b3RlQW1vdW50IiwiY3VycmVudFNpZGUiLCJjdXJyZW50UGVycFBvc2l0aW9uQWZ0ZXJUcmFkZSIsInRvdGFsUG9zaXRpb25BZnRlclRyYWRlRXhjbHVkaW5nVGFyZ2V0TWFya2V0IiwiZ2V0VG90YWxQZXJwUG9zaXRpb25WYWx1ZUV4Y2x1ZGluZ01hcmtldCIsInRvdGFsUGVycFBvc2l0aW9uTGlhYmlsaXR5IiwidG90YWxTcG90TGlhYmlsaXR5IiwidG90YWxMaWFiaWxpdGllc0FmdGVyVHJhZGUiLCJjYWxjdWxhdGVGZWVGb3JRdW90ZUFtb3VudCIsInF1b3RlQW1vdW50IiwiZmVlVGllciIsInBlcnBGZWVTdHJ1Y3R1cmUiLCJmZWVUaWVycyIsImZlZU51bWVyYXRvciIsImZlZURlbm9taW5hdG9yIiwiZ2V0V2l0aGRyYXdhbExpbWl0IiwicmVkdWNlT25seSIsIm5vd1RzIiwiZmxvb3IiLCJib3Jyb3dMaW1pdCIsIndpdGhkcmF3TGltaXQiLCJjYWxjdWxhdGVXaXRoZHJhd0xpbWl0IiwicHJlY2lzaW9uSW5jcmVhc2UiLCJURU4iLCJjYW5CeXBhc3MiLCJkZXBvc2l0QW1vdW50IiwidXNlckRlcG9zaXRBbW91bnQiLCJjYW5CeXBhc3NXaXRoZHJhd0xpbWl0cyIsImFtb3VudFdpdGhkcmF3YWJsZSIsIm1heFdpdGhkcmF3VmFsdWUiLCJ3ZWlnaHRlZEFzc2V0VmFsdWUiLCJmcmVlQ29sbGF0QWZ0ZXJXaXRoZHJhdyIsIm1heExpYWJpbGl0eUFsbG93ZWQiLCJpbml0aWFsTGlhYmlsaXR5V2VpZ2h0IiwibWF4Qm9ycm93VmFsdWUiLCJtYXhEZXBvc2l0QW1vdW50Iiwid2l0aGRyYXdHdWFyZFRocmVzaG9sZCIsIm5ldERlcG9zaXRzIiwiY2FuTWFrZUlkbGUiLCJzbG90c0JlZm9yZUlkbGUiLCJpZGxlIiwidXNlckxhc3RBY3RpdmVTbG90IiwibGFzdEFjdGl2ZVNsb3QiLCJzbG90c1NpbmNlTGFzdEFjdGl2ZSIsInBvc2l0aW9uSXNBdmFpbGFibGUiLCJnZXRTYWZlc3RUaWVycyIsInNhZmVzdFBlcnBUaWVyIiwic2FmZXN0U3BvdFRpZXIiLCJnZXRQZXJwTWFya2V0VGllck51bWJlciIsImdldFNwb3RNYXJrZXRUaWVyTnVtYmVyIiwicGVycFRpZXIiLCJzcG90VGllciIsImdldEhlYWx0aENvbXBvbmVudHMiLCJoZWFsdGhDb21wb25lbnRzIiwiZGVwb3NpdHMiLCJib3Jyb3dzIiwicGVycE1hcmtldCIsIndvcnN0Q2FzZUJhc2VBbW91bnQiLCJwdXNoIiwic2l6ZSIsIndlaWdodGVkVmFsdWUiLCJzZXR0bGVkUGVycFBvc2l0aW9uIiwicG5sV2VpZ2h0IiwicG5sVmFsdWUiLCJ3ZWdpdGhlZFBubFZhbHVlIiwiaXNMaWFiaWxpdHkiLCJnZXRRdW90ZVNwb3RNYXJrZXRBY2NvdW50IiwibWFya2V0VG9JZ25vcmUiLCJjdXJyZW50UGVycFBvc2l0aW9uVmFsdWVVU0RDIiwib3JhY2xlS2V5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/user.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/userConfig.js":
/*!********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/userConfig.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyQ29uZmlnLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3VzZXJDb25maWcuanM/Y2YxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/userConfig.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/userMap/userMap.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/userMap/userMap.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UserMap = void 0;\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst buffer_1 = __webpack_require__(/*! buffer */ \"buffer\");\nconst memcmp_1 = __webpack_require__(/*! ../memcmp */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/memcmp.js\");\nclass UserMap {\n    /**\n     *\n     * @param driftClient\n     * @param accountSubscription\n     * @param includeIdle whether idle users are subscribed to. defaults to false to decrease # of user subscriptions\n     */ constructor(driftClient, accountSubscription, includeIdle = false){\n        this.userMap = new Map();\n        this.syncCallback = async (state)=>{\n            if (state.numberOfSubAccounts !== this.lastNumberOfSubAccounts) {\n                await this.sync();\n                this.lastNumberOfSubAccounts = state.numberOfSubAccounts;\n            }\n        };\n        this.driftClient = driftClient;\n        this.accountSubscription = accountSubscription;\n        this.includeIdle = includeIdle;\n    }\n    async subscribe() {\n        if (this.size() > 0) {\n            return;\n        }\n        await this.driftClient.subscribe();\n        this.lastNumberOfSubAccounts = this.driftClient.getStateAccount().numberOfSubAccounts;\n        this.driftClient.eventEmitter.on(\"stateAccountUpdate\", this.syncCallback);\n        await this.sync();\n    }\n    async addPubkey(userAccountPublicKey, userAccount) {\n        const user = new __1.User({\n            driftClient: this.driftClient,\n            userAccountPublicKey,\n            accountSubscription: this.accountSubscription\n        });\n        await user.subscribe(userAccount);\n        this.userMap.set(userAccountPublicKey.toString(), user);\n    }\n    has(key) {\n        return this.userMap.has(key);\n    }\n    /**\n     * gets the User for a particular userAccountPublicKey, if no User exists, undefined is returned\n     * @param key userAccountPublicKey to get User for\n     * @returns user User | undefined\n     */ get(key) {\n        return this.userMap.get(key);\n    }\n    /**\n     * gets the User for a particular userAccountPublicKey, if no User exists, new one is created\n     * @param key userAccountPublicKey to get User for\n     * @returns  User\n     */ async mustGet(key) {\n        if (!this.has(key)) {\n            await this.addPubkey(new web3_js_1.PublicKey(key));\n        }\n        const user = this.userMap.get(key);\n        return user;\n    }\n    /**\n     * gets the Authority for a particular userAccountPublicKey, if no User exists, undefined is returned\n     * @param key userAccountPublicKey to get User for\n     * @returns authority PublicKey | undefined\n     */ getUserAuthority(key) {\n        const chUser = this.userMap.get(key);\n        if (!chUser) {\n            return undefined;\n        }\n        return chUser.getUserAccount().authority;\n    }\n    /**\n     * implements the {@link DLOBSource} interface\n     * create a DLOB from all the subscribed users\n     * @param slot\n     */ async getDLOB(slot) {\n        const dlob = new __1.DLOB();\n        await dlob.initFromUserMap(this, slot);\n        return dlob;\n    }\n    async updateWithOrderRecord(record) {\n        if (!this.has(record.user.toString())) {\n            await this.addPubkey(record.user);\n        }\n    }\n    async updateWithEventRecord(record) {\n        if (record.eventType === \"DepositRecord\") {\n            const depositRecord = record;\n            await this.mustGet(depositRecord.user.toString());\n        } else if (record.eventType === \"FundingPaymentRecord\") {\n            const fundingPaymentRecord = record;\n            await this.mustGet(fundingPaymentRecord.user.toString());\n        } else if (record.eventType === \"LiquidationRecord\") {\n            const liqRecord = record;\n            await this.mustGet(liqRecord.user.toString());\n            await this.mustGet(liqRecord.liquidator.toString());\n        } else if (record.eventType === \"OrderRecord\") {\n            const orderRecord = record;\n            await this.updateWithOrderRecord(orderRecord);\n        } else if (record.eventType === \"OrderActionRecord\") {\n            const actionRecord = record;\n            if (actionRecord.taker) {\n                await this.mustGet(actionRecord.taker.toString());\n            }\n            if (actionRecord.maker) {\n                await this.mustGet(actionRecord.maker.toString());\n            }\n        } else if (record.eventType === \"SettlePnlRecord\") {\n            const settlePnlRecord = record;\n            await this.mustGet(settlePnlRecord.user.toString());\n        } else if (record.eventType === \"NewUserRecord\") {\n            const newUserRecord = record;\n            await this.mustGet(newUserRecord.user.toString());\n        } else if (record.eventType === \"LPRecord\") {\n            const lpRecord = record;\n            await this.mustGet(lpRecord.user.toString());\n        }\n    }\n    values() {\n        return this.userMap.values();\n    }\n    size() {\n        return this.userMap.size;\n    }\n    async sync() {\n        const filters = [\n            (0, memcmp_1.getUserFilter)()\n        ];\n        if (!this.includeIdle) {\n            filters.push((0, memcmp_1.getNonIdleUserFilter)());\n        }\n        const rpcRequestArgs = [\n            this.driftClient.program.programId.toBase58(),\n            {\n                commitment: this.driftClient.connection.commitment,\n                filters,\n                encoding: \"base64\",\n                withContext: true\n            }\n        ];\n        // @ts-ignore\n        const rpcJSONResponse = await this.driftClient.connection._rpcRequest(\"getProgramAccounts\", rpcRequestArgs);\n        const rpcResponseAndContext = rpcJSONResponse.result;\n        const slot = rpcResponseAndContext.context.slot;\n        const programAccountBufferMap = new Map();\n        for (const programAccount of rpcResponseAndContext.value){\n            programAccountBufferMap.set(programAccount.pubkey.toString(), // @ts-ignore\n            buffer_1.Buffer.from(programAccount.account.data[0], programAccount.account.data[1]));\n        }\n        for (const [key, buffer] of programAccountBufferMap.entries()){\n            if (!this.has(key)) {\n                const userAccount = this.driftClient.program.account.user.coder.accounts.decode(\"User\", buffer);\n                await this.addPubkey(new web3_js_1.PublicKey(key), userAccount);\n            }\n        }\n        for (const [key, user] of this.userMap.entries()){\n            if (!programAccountBufferMap.has(key)) {\n                await user.unsubscribe();\n                this.userMap.delete(key);\n            } else {\n                const userAccount = this.driftClient.program.account.user.coder.accounts.decode(\"User\", programAccountBufferMap.get(key));\n                user.accountSubscriber.updateData(userAccount, slot);\n            }\n        }\n    }\n    async unsubscribe() {\n        for (const [key, user] of this.userMap.entries()){\n            await user.unsubscribe();\n            this.userMap.delete(key);\n        }\n        if (this.lastNumberOfSubAccounts) {\n            this.driftClient.eventEmitter.removeListener(\"stateAccountUpdate\", this.syncCallback);\n            this.lastNumberOfSubAccounts = undefined;\n        }\n    }\n}\nexports.UserMap = UserMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyTWFwL3VzZXJNYXAuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGVBQWUsR0FBRyxLQUFLO0FBQ3ZCLE1BQU1HLE1BQU1DLG1CQUFPQSxDQUFDLDZEQUFJO0FBQ3hCLE1BQU1DLFlBQVlELG1CQUFPQSxDQUFDLDhFQUFpQjtBQUMzQyxNQUFNRSxXQUFXRixtQkFBT0EsQ0FBQyxzQkFBUTtBQUNqQyxNQUFNRyxXQUFXSCxtQkFBT0EsQ0FBQyxxRUFBVztBQUNwQyxNQUFNRjtJQUNGOzs7OztLQUtDLEdBQ0RNLFlBQVlDLFdBQVcsRUFBRUMsbUJBQW1CLEVBQUVDLGNBQWMsS0FBSyxDQUFFO1FBQy9ELElBQUksQ0FBQ0MsT0FBTyxHQUFHLElBQUlDO1FBQ25CLElBQUksQ0FBQ0MsWUFBWSxHQUFHLE9BQU9DO1lBQ3ZCLElBQUlBLE1BQU1DLG1CQUFtQixLQUFLLElBQUksQ0FBQ0MsdUJBQXVCLEVBQUU7Z0JBQzVELE1BQU0sSUFBSSxDQUFDQyxJQUFJO2dCQUNmLElBQUksQ0FBQ0QsdUJBQXVCLEdBQUdGLE1BQU1DLG1CQUFtQjtZQUM1RDtRQUNKO1FBQ0EsSUFBSSxDQUFDUCxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsbUJBQW1CLEdBQUdBO1FBQzNCLElBQUksQ0FBQ0MsV0FBVyxHQUFHQTtJQUN2QjtJQUNBLE1BQU1RLFlBQVk7UUFDZCxJQUFJLElBQUksQ0FBQ0MsSUFBSSxLQUFLLEdBQUc7WUFDakI7UUFDSjtRQUNBLE1BQU0sSUFBSSxDQUFDWCxXQUFXLENBQUNVLFNBQVM7UUFDaEMsSUFBSSxDQUFDRix1QkFBdUIsR0FDeEIsSUFBSSxDQUFDUixXQUFXLENBQUNZLGVBQWUsR0FBR0wsbUJBQW1CO1FBQzFELElBQUksQ0FBQ1AsV0FBVyxDQUFDYSxZQUFZLENBQUNDLEVBQUUsQ0FBQyxzQkFBc0Is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TUFBTU4sY0FBYyxJQUFJLENBQUNqQixXQUFXLENBQUMwRCxPQUFPLENBQUNpQixPQUFPLENBQUN6RCxJQUFJLENBQUM2RCxLQUFLLENBQUNDLFFBQVEsQ0FBQ0MsTUFBTSxDQUFDLFFBQVFYLHdCQUF3QjlDLEdBQUcsQ0FBQ0Q7Z0JBQ3BITCxLQUFLa0UsaUJBQWlCLENBQUNDLFVBQVUsQ0FBQ3BFLGFBQWFnQjtZQUNuRDtRQUNKO0lBQ0o7SUFDQSxNQUFNaUQsY0FBYztRQUNoQixLQUFLLE1BQU0sQ0FBQzNELEtBQUtMLEtBQUssSUFBSSxJQUFJLENBQUNmLE9BQU8sQ0FBQzJFLE9BQU8sR0FBSTtZQUM5QyxNQUFNNUQsS0FBS2dFLFdBQVc7WUFDdEIsSUFBSSxDQUFDL0UsT0FBTyxDQUFDZ0YsTUFBTSxDQUFDNUQ7UUFDeEI7UUFDQSxJQUFJLElBQUksQ0FBQ2YsdUJBQXVCLEVBQUU7WUFDOUIsSUFBSSxDQUFDUixXQUFXLENBQUNhLFlBQVksQ0FBQ3lFLGNBQWMsQ0FBQyxzQkFBc0IsSUFBSSxDQUFDakYsWUFBWTtZQUNwRixJQUFJLENBQUNHLHVCQUF1QixHQUFHcUI7UUFDbkM7SUFDSjtBQUNKO0FBQ0F0QyxlQUFlLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3VzZXJNYXAvdXNlck1hcC5qcz85NWU0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Vc2VyTWFwID0gdm9pZCAwO1xuY29uc3QgX18xID0gcmVxdWlyZShcIi4uXCIpO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNvbnN0IGJ1ZmZlcl8xID0gcmVxdWlyZShcImJ1ZmZlclwiKTtcbmNvbnN0IG1lbWNtcF8xID0gcmVxdWlyZShcIi4uL21lbWNtcFwiKTtcbmNsYXNzIFVzZXJNYXAge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGRyaWZ0Q2xpZW50XG4gICAgICogQHBhcmFtIGFjY291bnRTdWJzY3JpcHRpb25cbiAgICAgKiBAcGFyYW0gaW5jbHVkZUlkbGUgd2hldGhlciBpZGxlIHVzZXJzIGFyZSBzdWJzY3JpYmVkIHRvLiBkZWZhdWx0cyB0byBmYWxzZSB0byBkZWNyZWFzZSAjIG9mIHVzZXIgc3Vic2NyaXB0aW9uc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRyaWZ0Q2xpZW50LCBhY2NvdW50U3Vic2NyaXB0aW9uLCBpbmNsdWRlSWRsZSA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMudXNlck1hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zeW5jQ2FsbGJhY2sgPSBhc3luYyAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5udW1iZXJPZlN1YkFjY291bnRzICE9PSB0aGlzLmxhc3ROdW1iZXJPZlN1YkFjY291bnRzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0TnVtYmVyT2ZTdWJBY2NvdW50cyA9IHN0YXRlLm51bWJlck9mU3ViQWNjb3VudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZHJpZnRDbGllbnQgPSBkcmlmdENsaWVudDtcbiAgICAgICAgdGhpcy5hY2NvdW50U3Vic2NyaXB0aW9uID0gYWNjb3VudFN1YnNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5pbmNsdWRlSWRsZSA9IGluY2x1ZGVJZGxlO1xuICAgIH1cbiAgICBhc3luYyBzdWJzY3JpYmUoKSB7XG4gICAgICAgIGlmICh0aGlzLnNpemUoKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmRyaWZ0Q2xpZW50LnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmxhc3ROdW1iZXJPZlN1YkFjY291bnRzID1cbiAgICAgICAgICAgIHRoaXMuZHJpZnRDbGllbnQuZ2V0U3RhdGVBY2NvdW50KCkubnVtYmVyT2ZTdWJBY2NvdW50cztcbiAgICAgICAgdGhpcy5kcmlmdENsaWVudC5ldmVudEVtaXR0ZXIub24oJ3N0YXRlQWNjb3VudFVwZGF0ZScsIHRoaXMuc3luY0NhbGxiYWNrKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zeW5jKCk7XG4gICAgfVxuICAgIGFzeW5jIGFkZFB1YmtleSh1c2VyQWNjb3VudFB1YmxpY0tleSwgdXNlckFjY291bnQpIHtcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBfXzEuVXNlcih7XG4gICAgICAgICAgICBkcmlmdENsaWVudDogdGhpcy5kcmlmdENsaWVudCxcbiAgICAgICAgICAgIHVzZXJBY2NvdW50UHVibGljS2V5LFxuICAgICAgICAgICAgYWNjb3VudFN1YnNjcmlwdGlvbjogdGhpcy5hY2NvdW50U3Vic2NyaXB0aW9uLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdXNlci5zdWJzY3JpYmUodXNlckFjY291bnQpO1xuICAgICAgICB0aGlzLnVzZXJNYXAuc2V0KHVzZXJBY2NvdW50UHVibGljS2V5LnRvU3RyaW5nKCksIHVzZXIpO1xuICAgIH1cbiAgICBoYXMoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJNYXAuaGFzKGtleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldHMgdGhlIFVzZXIgZm9yIGEgcGFydGljdWxhciB1c2VyQWNjb3VudFB1YmxpY0tleSwgaWYgbm8gVXNlciBleGlzdHMsIHVuZGVmaW5lZCBpcyByZXR1cm5lZFxuICAgICAqIEBwYXJhbSBrZXkgdXNlckFjY291bnRQdWJsaWNLZXkgdG8gZ2V0IFVzZXIgZm9yXG4gICAgICogQHJldHVybnMgdXNlciBVc2VyIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgZ2V0KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyTWFwLmdldChrZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBnZXRzIHRoZSBVc2VyIGZvciBhIHBhcnRpY3VsYXIgdXNlckFjY291bnRQdWJsaWNLZXksIGlmIG5vIFVzZXIgZXhpc3RzLCBuZXcgb25lIGlzIGNyZWF0ZWRcbiAgICAgKiBAcGFyYW0ga2V5IHVzZXJBY2NvdW50UHVibGljS2V5IHRvIGdldCBVc2VyIGZvclxuICAgICAqIEByZXR1cm5zICBVc2VyXG4gICAgICovXG4gICAgYXN5bmMgbXVzdEdldChrZXkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFB1YmtleShuZXcgd2ViM19qc18xLlB1YmxpY0tleShrZXkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2VyID0gdGhpcy51c2VyTWFwLmdldChrZXkpO1xuICAgICAgICByZXR1cm4gdXNlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZ2V0cyB0aGUgQXV0aG9yaXR5IGZvciBhIHBhcnRpY3VsYXIgdXNlckFjY291bnRQdWJsaWNLZXksIGlmIG5vIFVzZXIgZXhpc3RzLCB1bmRlZmluZWQgaXMgcmV0dXJuZWRcbiAgICAgKiBAcGFyYW0ga2V5IHVzZXJBY2NvdW50UHVibGljS2V5IHRvIGdldCBVc2VyIGZvclxuICAgICAqIEByZXR1cm5zIGF1dGhvcml0eSBQdWJsaWNLZXkgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBnZXRVc2VyQXV0aG9yaXR5KGtleSkge1xuICAgICAgICBjb25zdCBjaFVzZXIgPSB0aGlzLnVzZXJNYXAuZ2V0KGtleSk7XG4gICAgICAgIGlmICghY2hVc2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaFVzZXIuZ2V0VXNlckFjY291bnQoKS5hdXRob3JpdHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGltcGxlbWVudHMgdGhlIHtAbGluayBETE9CU291cmNlfSBpbnRlcmZhY2VcbiAgICAgKiBjcmVhdGUgYSBETE9CIGZyb20gYWxsIHRoZSBzdWJzY3JpYmVkIHVzZXJzXG4gICAgICogQHBhcmFtIHNsb3RcbiAgICAgKi9cbiAgICBhc3luYyBnZXRETE9CKHNsb3QpIHtcbiAgICAgICAgY29uc3QgZGxvYiA9IG5ldyBfXzEuRExPQigpO1xuICAgICAgICBhd2FpdCBkbG9iLmluaXRGcm9tVXNlck1hcCh0aGlzLCBzbG90KTtcbiAgICAgICAgcmV0dXJuIGRsb2I7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVdpdGhPcmRlclJlY29yZChyZWNvcmQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyhyZWNvcmQudXNlci50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRQdWJrZXkocmVjb3JkLnVzZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVdpdGhFdmVudFJlY29yZChyZWNvcmQpIHtcbiAgICAgICAgaWYgKHJlY29yZC5ldmVudFR5cGUgPT09ICdEZXBvc2l0UmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3QgZGVwb3NpdFJlY29yZCA9IHJlY29yZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubXVzdEdldChkZXBvc2l0UmVjb3JkLnVzZXIudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLmV2ZW50VHlwZSA9PT0gJ0Z1bmRpbmdQYXltZW50UmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3QgZnVuZGluZ1BheW1lbnRSZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm11c3RHZXQoZnVuZGluZ1BheW1lbnRSZWNvcmQudXNlci50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNvcmQuZXZlbnRUeXBlID09PSAnTGlxdWlkYXRpb25SZWNvcmQnKSB7XG4gICAgICAgICAgICBjb25zdCBsaXFSZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm11c3RHZXQobGlxUmVjb3JkLnVzZXIudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm11c3RHZXQobGlxUmVjb3JkLmxpcXVpZGF0b3IudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLmV2ZW50VHlwZSA9PT0gJ09yZGVyUmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJSZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVdpdGhPcmRlclJlY29yZChvcmRlclJlY29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLmV2ZW50VHlwZSA9PT0gJ09yZGVyQWN0aW9uUmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uUmVjb3JkID0gcmVjb3JkO1xuICAgICAgICAgICAgaWYgKGFjdGlvblJlY29yZC50YWtlcikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubXVzdEdldChhY3Rpb25SZWNvcmQudGFrZXIudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWN0aW9uUmVjb3JkLm1ha2VyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tdXN0R2V0KGFjdGlvblJlY29yZC5tYWtlci50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNvcmQuZXZlbnRUeXBlID09PSAnU2V0dGxlUG5sUmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGxlUG5sUmVjb3JkID0gcmVjb3JkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tdXN0R2V0KHNldHRsZVBubFJlY29yZC51c2VyLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlY29yZC5ldmVudFR5cGUgPT09ICdOZXdVc2VyUmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3QgbmV3VXNlclJlY29yZCA9IHJlY29yZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubXVzdEdldChuZXdVc2VyUmVjb3JkLnVzZXIudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLmV2ZW50VHlwZSA9PT0gJ0xQUmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3QgbHBSZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm11c3RHZXQobHBSZWNvcmQudXNlci50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YWx1ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJNYXAudmFsdWVzKCk7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJNYXAuc2l6ZTtcbiAgICB9XG4gICAgYXN5bmMgc3luYygpIHtcbiAgICAgICAgY29uc3QgZmlsdGVycyA9IFsoMCwgbWVtY21wXzEuZ2V0VXNlckZpbHRlcikoKV07XG4gICAgICAgIGlmICghdGhpcy5pbmNsdWRlSWRsZSkge1xuICAgICAgICAgICAgZmlsdGVycy5wdXNoKCgwLCBtZW1jbXBfMS5nZXROb25JZGxlVXNlckZpbHRlcikoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnBjUmVxdWVzdEFyZ3MgPSBbXG4gICAgICAgICAgICB0aGlzLmRyaWZ0Q2xpZW50LnByb2dyYW0ucHJvZ3JhbUlkLnRvQmFzZTU4KCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29tbWl0bWVudDogdGhpcy5kcmlmdENsaWVudC5jb25uZWN0aW9uLmNvbW1pdG1lbnQsXG4gICAgICAgICAgICAgICAgZmlsdGVycyxcbiAgICAgICAgICAgICAgICBlbmNvZGluZzogJ2Jhc2U2NCcsXG4gICAgICAgICAgICAgICAgd2l0aENvbnRleHQ6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGNvbnN0IHJwY0pTT05SZXNwb25zZSA9IGF3YWl0IHRoaXMuZHJpZnRDbGllbnQuY29ubmVjdGlvbi5fcnBjUmVxdWVzdCgnZ2V0UHJvZ3JhbUFjY291bnRzJywgcnBjUmVxdWVzdEFyZ3MpO1xuICAgICAgICBjb25zdCBycGNSZXNwb25zZUFuZENvbnRleHQgPSBycGNKU09OUmVzcG9uc2UucmVzdWx0O1xuICAgICAgICBjb25zdCBzbG90ID0gcnBjUmVzcG9uc2VBbmRDb250ZXh0LmNvbnRleHQuc2xvdDtcbiAgICAgICAgY29uc3QgcHJvZ3JhbUFjY291bnRCdWZmZXJNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgcHJvZ3JhbUFjY291bnQgb2YgcnBjUmVzcG9uc2VBbmRDb250ZXh0LnZhbHVlKSB7XG4gICAgICAgICAgICBwcm9ncmFtQWNjb3VudEJ1ZmZlck1hcC5zZXQocHJvZ3JhbUFjY291bnQucHVia2V5LnRvU3RyaW5nKCksIFxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgYnVmZmVyXzEuQnVmZmVyLmZyb20ocHJvZ3JhbUFjY291bnQuYWNjb3VudC5kYXRhWzBdLCBwcm9ncmFtQWNjb3VudC5hY2NvdW50LmRhdGFbMV0pKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGJ1ZmZlcl0gb2YgcHJvZ3JhbUFjY291bnRCdWZmZXJNYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzKGtleSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyQWNjb3VudCA9IHRoaXMuZHJpZnRDbGllbnQucHJvZ3JhbS5hY2NvdW50LnVzZXIuY29kZXIuYWNjb3VudHMuZGVjb2RlKCdVc2VyJywgYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFB1YmtleShuZXcgd2ViM19qc18xLlB1YmxpY0tleShrZXkpLCB1c2VyQWNjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB1c2VyXSBvZiB0aGlzLnVzZXJNYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBpZiAoIXByb2dyYW1BY2NvdW50QnVmZmVyTWFwLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdXNlci51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudXNlck1hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJBY2NvdW50ID0gdGhpcy5kcmlmdENsaWVudC5wcm9ncmFtLmFjY291bnQudXNlci5jb2Rlci5hY2NvdW50cy5kZWNvZGUoJ1VzZXInLCBwcm9ncmFtQWNjb3VudEJ1ZmZlck1hcC5nZXQoa2V5KSk7XG4gICAgICAgICAgICAgICAgdXNlci5hY2NvdW50U3Vic2NyaWJlci51cGRhdGVEYXRhKHVzZXJBY2NvdW50LCBzbG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB1c2VyXSBvZiB0aGlzLnVzZXJNYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBhd2FpdCB1c2VyLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLnVzZXJNYXAuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGFzdE51bWJlck9mU3ViQWNjb3VudHMpIHtcbiAgICAgICAgICAgIHRoaXMuZHJpZnRDbGllbnQuZXZlbnRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdzdGF0ZUFjY291bnRVcGRhdGUnLCB0aGlzLnN5bmNDYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLmxhc3ROdW1iZXJPZlN1YkFjY291bnRzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5Vc2VyTWFwID0gVXNlck1hcDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlVzZXJNYXAiLCJfXzEiLCJyZXF1aXJlIiwid2ViM19qc18xIiwiYnVmZmVyXzEiLCJtZW1jbXBfMSIsImNvbnN0cnVjdG9yIiwiZHJpZnRDbGllbnQiLCJhY2NvdW50U3Vic2NyaXB0aW9uIiwiaW5jbHVkZUlkbGUiLCJ1c2VyTWFwIiwiTWFwIiwic3luY0NhbGxiYWNrIiwic3RhdGUiLCJudW1iZXJPZlN1YkFjY291bnRzIiwibGFzdE51bWJlck9mU3ViQWNjb3VudHMiLCJzeW5jIiwic3Vic2NyaWJlIiwic2l6ZSIsImdldFN0YXRlQWNjb3VudCIsImV2ZW50RW1pdHRlciIsIm9uIiwiYWRkUHVia2V5IiwidXNlckFjY291bnRQdWJsaWNLZXkiLCJ1c2VyQWNjb3VudCIsInVzZXIiLCJVc2VyIiwic2V0IiwidG9TdHJpbmciLCJoYXMiLCJrZXkiLCJnZXQiLCJtdXN0R2V0IiwiUHVibGljS2V5IiwiZ2V0VXNlckF1dGhvcml0eSIsImNoVXNlciIsInVuZGVmaW5lZCIsImdldFVzZXJBY2NvdW50IiwiYXV0aG9yaXR5IiwiZ2V0RExPQiIsInNsb3QiLCJkbG9iIiwiRExPQiIsImluaXRGcm9tVXNlck1hcCIsInVwZGF0ZVdpdGhPcmRlclJlY29yZCIsInJlY29yZCIsInVwZGF0ZVdpdGhFdmVudFJlY29yZCIsImV2ZW50VHlwZSIsImRlcG9zaXRSZWNvcmQiLCJmdW5kaW5nUGF5bWVudFJlY29yZCIsImxpcVJlY29yZCIsImxpcXVpZGF0b3IiLCJvcmRlclJlY29yZCIsImFjdGlvblJlY29yZCIsInRha2VyIiwibWFrZXIiLCJzZXR0bGVQbmxSZWNvcmQiLCJuZXdVc2VyUmVjb3JkIiwibHBSZWNvcmQiLCJ2YWx1ZXMiLCJmaWx0ZXJzIiwiZ2V0VXNlckZpbHRlciIsInB1c2giLCJnZXROb25JZGxlVXNlckZpbHRlciIsInJwY1JlcXVlc3RBcmdzIiwicHJvZ3JhbSIsInByb2dyYW1JZCIsInRvQmFzZTU4IiwiY29tbWl0bWVudCIsImNvbm5lY3Rpb24iLCJlbmNvZGluZyIsIndpdGhDb250ZXh0IiwicnBjSlNPTlJlc3BvbnNlIiwiX3JwY1JlcXVlc3QiLCJycGNSZXNwb25zZUFuZENvbnRleHQiLCJyZXN1bHQiLCJjb250ZXh0IiwicHJvZ3JhbUFjY291bnRCdWZmZXJNYXAiLCJwcm9ncmFtQWNjb3VudCIsInB1YmtleSIsIkJ1ZmZlciIsImZyb20iLCJhY2NvdW50IiwiZGF0YSIsImJ1ZmZlciIsImVudHJpZXMiLCJjb2RlciIsImFjY291bnRzIiwiZGVjb2RlIiwidW5zdWJzY3JpYmUiLCJkZWxldGUiLCJhY2NvdW50U3Vic2NyaWJlciIsInVwZGF0ZURhdGEiLCJyZW1vdmVMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/userMap/userMap.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/userMap/userStatsMap.js":
/*!******************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/userMap/userStatsMap.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UserStatsMap = void 0;\nconst __1 = __webpack_require__(/*! .. */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/index.js\");\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nclass UserStatsMap {\n    constructor(driftClient, accountSubscription){\n        /**\n         * map from authority pubkey to UserStats\n         */ this.userStatsMap = new Map();\n        this.syncCallback = async (state)=>{\n            if (state.numberOfAuthorities !== this.lastNumberOfAuthorities) {\n                await this.sync();\n                this.lastNumberOfAuthorities = state.numberOfAuthorities;\n            }\n        };\n        this.driftClient = driftClient;\n        this.accountSubscription = accountSubscription;\n    }\n    async subscribe() {\n        if (this.size() > 0) {\n            return;\n        }\n        await this.driftClient.subscribe();\n        this.lastNumberOfAuthorities = this.driftClient.getStateAccount().numberOfAuthorities;\n        this.driftClient.eventEmitter.on(\"stateAccountUpdate\", this.syncCallback);\n        await this.sync();\n    }\n    async addUserStat(authority, userStatsAccount) {\n        const userStat = new __1.UserStats({\n            driftClient: this.driftClient,\n            userStatsAccountPublicKey: (0, __1.getUserStatsAccountPublicKey)(this.driftClient.program.programId, authority),\n            accountSubscription: this.accountSubscription\n        });\n        await userStat.subscribe(userStatsAccount);\n        this.userStatsMap.set(authority.toString(), userStat);\n    }\n    async updateWithOrderRecord(record, userMap) {\n        const user = await userMap.mustGet(record.user.toString());\n        if (!this.has(user.getUserAccount().authority.toString())) {\n            await this.addUserStat(user.getUserAccount().authority);\n        }\n    }\n    async updateWithEventRecord(record, userMap) {\n        if (record.eventType === \"DepositRecord\") {\n            const depositRecord = record;\n            await this.mustGet(depositRecord.userAuthority.toString());\n        } else if (record.eventType === \"FundingPaymentRecord\") {\n            const fundingPaymentRecord = record;\n            await this.mustGet(fundingPaymentRecord.userAuthority.toString());\n        } else if (record.eventType === \"LiquidationRecord\") {\n            if (!userMap) {\n                return;\n            }\n            const liqRecord = record;\n            const user = await userMap.mustGet(liqRecord.user.toString());\n            await this.mustGet(user.getUserAccount().authority.toString());\n            const liquidatorUser = await userMap.mustGet(liqRecord.liquidator.toString());\n            await this.mustGet(liquidatorUser.getUserAccount().authority.toString());\n        } else if (record.eventType === \"OrderRecord\") {\n            if (!userMap) {\n                return;\n            }\n            const orderRecord = record;\n            await userMap.updateWithOrderRecord(orderRecord);\n        } else if (record.eventType === \"OrderActionRecord\") {\n            if (!userMap) {\n                return;\n            }\n            const actionRecord = record;\n            if (actionRecord.taker) {\n                const taker = await userMap.mustGet(actionRecord.taker.toString());\n                await this.mustGet(taker.getUserAccount().authority.toString());\n            }\n            if (actionRecord.maker) {\n                const maker = await userMap.mustGet(actionRecord.maker.toString());\n                await this.mustGet(maker.getUserAccount().authority.toString());\n            }\n        } else if (record.eventType === \"SettlePnlRecord\") {\n            if (!userMap) {\n                return;\n            }\n            const settlePnlRecord = record;\n            const user = await userMap.mustGet(settlePnlRecord.user.toString());\n            await this.mustGet(user.getUserAccount().authority.toString());\n        } else if (record.eventType === \"NewUserRecord\") {\n            const newUserRecord = record;\n            await this.mustGet(newUserRecord.userAuthority.toString());\n        } else if (record.eventType === \"LPRecord\") {\n            if (!userMap) {\n                return;\n            }\n            const lpRecord = record;\n            const user = await userMap.mustGet(lpRecord.user.toString());\n            await this.mustGet(user.getUserAccount().authority.toString());\n        } else if (record.eventType === \"InsuranceFundStakeRecord\") {\n            const ifStakeRecord = record;\n            await this.mustGet(ifStakeRecord.userAuthority.toString());\n        }\n    }\n    has(authorityPublicKey) {\n        return this.userStatsMap.has(authorityPublicKey);\n    }\n    get(authorityPublicKey) {\n        return this.userStatsMap.get(authorityPublicKey);\n    }\n    async mustGet(authorityPublicKey) {\n        if (!this.has(authorityPublicKey)) {\n            await this.addUserStat(new web3_js_1.PublicKey(authorityPublicKey));\n        }\n        return this.get(authorityPublicKey);\n    }\n    values() {\n        return this.userStatsMap.values();\n    }\n    size() {\n        return this.userStatsMap.size;\n    }\n    async sync() {\n        const programAccounts = await this.driftClient.connection.getProgramAccounts(this.driftClient.program.programId, {\n            commitment: this.driftClient.connection.commitment,\n            filters: [\n                {\n                    memcmp: this.driftClient.program.coder.accounts.memcmp(\"UserStats\")\n                }\n            ]\n        });\n        const programAccountMap = new Map();\n        for (const programAccount of programAccounts){\n            programAccountMap.set(new web3_js_1.PublicKey(programAccount.account.data.slice(8, 40)).toString(), programAccount.account);\n        }\n        for (const key of programAccountMap.keys()){\n            if (!this.has(key)) {\n                const userStatsAccount = this.driftClient.program.account.userStats.coder.accounts.decode(\"UserStats\", programAccountMap.get(key).data);\n                await this.addUserStat(new web3_js_1.PublicKey(key), userStatsAccount);\n            }\n        }\n    }\n    async unsubscribe() {\n        for (const [key, userStats] of this.userStatsMap.entries()){\n            await userStats.unsubscribe();\n            this.userStatsMap.delete(key);\n        }\n        if (this.lastNumberOfAuthorities) {\n            this.driftClient.eventEmitter.removeListener(\"stateAccountUpdate\", this.syncCallback);\n            this.lastNumberOfAuthorities = undefined;\n        }\n    }\n}\nexports.UserStatsMap = UserStatsMap;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyTWFwL3VzZXJTdGF0c01hcC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsb0JBQW9CLEdBQUcsS0FBSztBQUM1QixNQUFNRyxNQUFNQyxtQkFBT0EsQ0FBQyw2REFBSTtBQUN4QixNQUFNQyxZQUFZRCxtQkFBT0EsQ0FBQyw4RUFBaUI7QUFDM0MsTUFBTUY7SUFDRkksWUFBWUMsV0FBVyxFQUFFQyxtQkFBbUIsQ0FBRTtRQUMxQzs7U0FFQyxHQUNELElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUlDO1FBQ3hCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLE9BQU9DO1lBQ3ZCLElBQUlBLE1BQU1DLG1CQUFtQixLQUFLLElBQUksQ0FBQ0MsdUJBQXVCLEVBQUU7Z0JBQzVELE1BQU0sSUFBSSxDQUFDQyxJQUFJO2dCQUNmLElBQUksQ0FBQ0QsdUJBQXVCLEdBQUdGLE1BQU1DLG1CQUFtQjtZQUM1RDtRQUNKO1FBQ0EsSUFBSSxDQUFDTixXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsbUJBQW1CLEdBQUdBO0lBQy9CO0lBQ0EsTUFBTVEsWUFBWTtRQUNkLElBQUksSUFBSSxDQUFDQyxJQUFJLEtBQUssR0FBRztZQUNqQjtRQUNKO1FBQ0EsTUFBTSxJQUFJLENBQUNWLFdBQVcsQ0FBQ1MsU0FBUztRQUNoQyxJQUFJLENBQUNGLHVCQUF1QixHQUN4QixJQUFJLENBQUNQLFdBQVcsQ0FBQ1csZUFBZSxHQUFHTCxtQkFBbUI7UUFDMUQsSUFBSSxDQUFDTixXQUFXLENBQUNZLFlBQVksQ0FBQ0MsRUFBRSxDQUFDLHNCQUFzQixJQUFJLENBQUNULFlBQVk7UUFDeEUsTUFBTSxJQUFJLENBQUNJLElBQUk7SUFDbkI7SUFDQSxNQUFNTSxZQUFZQyxTQUFTLEVBQUVDLGdCQUFnQixFQUFFO1FBQzNDLE1BQU1DLFdBQVcsSUFBSXJC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Q3pEO1FBQ0o7SUFDSjtJQUNBLE1BQU1xRCxjQUFjO1FBQ2hCLEtBQUssTUFBTSxDQUFDSixLQUFLRSxVQUFVLElBQUksSUFBSSxDQUFDakUsWUFBWSxDQUFDb0UsT0FBTyxHQUFJO1lBQ3hELE1BQU1ILFVBQVVFLFdBQVc7WUFDM0IsSUFBSSxDQUFDbkUsWUFBWSxDQUFDcUUsTUFBTSxDQUFDTjtRQUM3QjtRQUNBLElBQUksSUFBSSxDQUFDMUQsdUJBQXVCLEVBQUU7WUFDOUIsSUFBSSxDQUFDUCxXQUFXLENBQUNZLFlBQVksQ0FBQzRELGNBQWMsQ0FBQyxzQkFBc0IsSUFBSSxDQUFDcEUsWUFBWTtZQUNwRixJQUFJLENBQUNHLHVCQUF1QixHQUFHa0U7UUFDbkM7SUFDSjtBQUNKO0FBQ0FoRixvQkFBb0IsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvdXNlck1hcC91c2VyU3RhdHNNYXAuanM/MzIyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuVXNlclN0YXRzTWFwID0gdm9pZCAwO1xuY29uc3QgX18xID0gcmVxdWlyZShcIi4uXCIpO1xuY29uc3Qgd2ViM19qc18xID0gcmVxdWlyZShcIkBzb2xhbmEvd2ViMy5qc1wiKTtcbmNsYXNzIFVzZXJTdGF0c01hcCB7XG4gICAgY29uc3RydWN0b3IoZHJpZnRDbGllbnQsIGFjY291bnRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIG1hcCBmcm9tIGF1dGhvcml0eSBwdWJrZXkgdG8gVXNlclN0YXRzXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVzZXJTdGF0c01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zeW5jQ2FsbGJhY2sgPSBhc3luYyAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5udW1iZXJPZkF1dGhvcml0aWVzICE9PSB0aGlzLmxhc3ROdW1iZXJPZkF1dGhvcml0aWVzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zeW5jKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0TnVtYmVyT2ZBdXRob3JpdGllcyA9IHN0YXRlLm51bWJlck9mQXV0aG9yaXRpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZHJpZnRDbGllbnQgPSBkcmlmdENsaWVudDtcbiAgICAgICAgdGhpcy5hY2NvdW50U3Vic2NyaXB0aW9uID0gYWNjb3VudFN1YnNjcmlwdGlvbjtcbiAgICB9XG4gICAgYXN5bmMgc3Vic2NyaWJlKCkge1xuICAgICAgICBpZiAodGhpcy5zaXplKCkgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5kcmlmdENsaWVudC5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5sYXN0TnVtYmVyT2ZBdXRob3JpdGllcyA9XG4gICAgICAgICAgICB0aGlzLmRyaWZ0Q2xpZW50LmdldFN0YXRlQWNjb3VudCgpLm51bWJlck9mQXV0aG9yaXRpZXM7XG4gICAgICAgIHRoaXMuZHJpZnRDbGllbnQuZXZlbnRFbWl0dGVyLm9uKCdzdGF0ZUFjY291bnRVcGRhdGUnLCB0aGlzLnN5bmNDYWxsYmFjayk7XG4gICAgICAgIGF3YWl0IHRoaXMuc3luYygpO1xuICAgIH1cbiAgICBhc3luYyBhZGRVc2VyU3RhdChhdXRob3JpdHksIHVzZXJTdGF0c0FjY291bnQpIHtcbiAgICAgICAgY29uc3QgdXNlclN0YXQgPSBuZXcgX18xLlVzZXJTdGF0cyh7XG4gICAgICAgICAgICBkcmlmdENsaWVudDogdGhpcy5kcmlmdENsaWVudCxcbiAgICAgICAgICAgIHVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXk6ICgwLCBfXzEuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSkodGhpcy5kcmlmdENsaWVudC5wcm9ncmFtLnByb2dyYW1JZCwgYXV0aG9yaXR5KSxcbiAgICAgICAgICAgIGFjY291bnRTdWJzY3JpcHRpb246IHRoaXMuYWNjb3VudFN1YnNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHVzZXJTdGF0LnN1YnNjcmliZSh1c2VyU3RhdHNBY2NvdW50KTtcbiAgICAgICAgdGhpcy51c2VyU3RhdHNNYXAuc2V0KGF1dGhvcml0eS50b1N0cmluZygpLCB1c2VyU3RhdCk7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVdpdGhPcmRlclJlY29yZChyZWNvcmQsIHVzZXJNYXApIHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHVzZXJNYXAubXVzdEdldChyZWNvcmQudXNlci50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKCF0aGlzLmhhcyh1c2VyLmdldFVzZXJBY2NvdW50KCkuYXV0aG9yaXR5LnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVzZXJTdGF0KHVzZXIuZ2V0VXNlckFjY291bnQoKS5hdXRob3JpdHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZVdpdGhFdmVudFJlY29yZChyZWNvcmQsIHVzZXJNYXApIHtcbiAgICAgICAgaWYgKHJlY29yZC5ldmVudFR5cGUgPT09ICdEZXBvc2l0UmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3QgZGVwb3NpdFJlY29yZCA9IHJlY29yZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubXVzdEdldChkZXBvc2l0UmVjb3JkLnVzZXJBdXRob3JpdHkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLmV2ZW50VHlwZSA9PT0gJ0Z1bmRpbmdQYXltZW50UmVjb3JkJykge1xuICAgICAgICAgICAgY29uc3QgZnVuZGluZ1BheW1lbnRSZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm11c3RHZXQoZnVuZGluZ1BheW1lbnRSZWNvcmQudXNlckF1dGhvcml0eS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNvcmQuZXZlbnRUeXBlID09PSAnTGlxdWlkYXRpb25SZWNvcmQnKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsaXFSZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlck1hcC5tdXN0R2V0KGxpcVJlY29yZC51c2VyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tdXN0R2V0KHVzZXIuZ2V0VXNlckFjY291bnQoKS5hdXRob3JpdHkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBjb25zdCBsaXF1aWRhdG9yVXNlciA9IGF3YWl0IHVzZXJNYXAubXVzdEdldChsaXFSZWNvcmQubGlxdWlkYXRvci50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubXVzdEdldChsaXF1aWRhdG9yVXNlci5nZXRVc2VyQWNjb3VudCgpLmF1dGhvcml0eS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNvcmQuZXZlbnRUeXBlID09PSAnT3JkZXJSZWNvcmQnKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcmRlclJlY29yZCA9IHJlY29yZDtcbiAgICAgICAgICAgIGF3YWl0IHVzZXJNYXAudXBkYXRlV2l0aE9yZGVyUmVjb3JkKG9yZGVyUmVjb3JkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNvcmQuZXZlbnRUeXBlID09PSAnT3JkZXJBY3Rpb25SZWNvcmQnKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhY3Rpb25SZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBpZiAoYWN0aW9uUmVjb3JkLnRha2VyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFrZXIgPSBhd2FpdCB1c2VyTWFwLm11c3RHZXQoYWN0aW9uUmVjb3JkLnRha2VyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubXVzdEdldCh0YWtlci5nZXRVc2VyQWNjb3VudCgpLmF1dGhvcml0eS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhY3Rpb25SZWNvcmQubWFrZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYWtlciA9IGF3YWl0IHVzZXJNYXAubXVzdEdldChhY3Rpb25SZWNvcmQubWFrZXIudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tdXN0R2V0KG1ha2VyLmdldFVzZXJBY2NvdW50KCkuYXV0aG9yaXR5LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlY29yZC5ldmVudFR5cGUgPT09ICdTZXR0bGVQbmxSZWNvcmQnKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXR0bGVQbmxSZWNvcmQgPSByZWNvcmQ7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdXNlck1hcC5tdXN0R2V0KHNldHRsZVBubFJlY29yZC51c2VyLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tdXN0R2V0KHVzZXIuZ2V0VXNlckFjY291bnQoKS5hdXRob3JpdHkudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLmV2ZW50VHlwZSA9PT0gJ05ld1VzZXJSZWNvcmQnKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdVc2VyUmVjb3JkID0gcmVjb3JkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tdXN0R2V0KG5ld1VzZXJSZWNvcmQudXNlckF1dGhvcml0eS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNvcmQuZXZlbnRUeXBlID09PSAnTFBSZWNvcmQnKSB7XG4gICAgICAgICAgICBpZiAoIXVzZXJNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBscFJlY29yZCA9IHJlY29yZDtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB1c2VyTWFwLm11c3RHZXQobHBSZWNvcmQudXNlci50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubXVzdEdldCh1c2VyLmdldFVzZXJBY2NvdW50KCkuYXV0aG9yaXR5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlY29yZC5ldmVudFR5cGUgPT09ICdJbnN1cmFuY2VGdW5kU3Rha2VSZWNvcmQnKSB7XG4gICAgICAgICAgICBjb25zdCBpZlN0YWtlUmVjb3JkID0gcmVjb3JkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tdXN0R2V0KGlmU3Rha2VSZWNvcmQudXNlckF1dGhvcml0eS50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXMoYXV0aG9yaXR5UHVibGljS2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJTdGF0c01hcC5oYXMoYXV0aG9yaXR5UHVibGljS2V5KTtcbiAgICB9XG4gICAgZ2V0KGF1dGhvcml0eVB1YmxpY0tleSkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyU3RhdHNNYXAuZ2V0KGF1dGhvcml0eVB1YmxpY0tleSk7XG4gICAgfVxuICAgIGFzeW5jIG11c3RHZXQoYXV0aG9yaXR5UHVibGljS2V5KSB7XG4gICAgICAgIGlmICghdGhpcy5oYXMoYXV0aG9yaXR5UHVibGljS2V5KSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVc2VyU3RhdChuZXcgd2ViM19qc18xLlB1YmxpY0tleShhdXRob3JpdHlQdWJsaWNLZXkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5nZXQoYXV0aG9yaXR5UHVibGljS2V5KTtcbiAgICB9XG4gICAgdmFsdWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51c2VyU3RhdHNNYXAudmFsdWVzKCk7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJTdGF0c01hcC5zaXplO1xuICAgIH1cbiAgICBhc3luYyBzeW5jKCkge1xuICAgICAgICBjb25zdCBwcm9ncmFtQWNjb3VudHMgPSBhd2FpdCB0aGlzLmRyaWZ0Q2xpZW50LmNvbm5lY3Rpb24uZ2V0UHJvZ3JhbUFjY291bnRzKHRoaXMuZHJpZnRDbGllbnQucHJvZ3JhbS5wcm9ncmFtSWQsIHtcbiAgICAgICAgICAgIGNvbW1pdG1lbnQ6IHRoaXMuZHJpZnRDbGllbnQuY29ubmVjdGlvbi5jb21taXRtZW50LFxuICAgICAgICAgICAgZmlsdGVyczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVtY21wOiB0aGlzLmRyaWZ0Q2xpZW50LnByb2dyYW0uY29kZXIuYWNjb3VudHMubWVtY21wKCdVc2VyU3RhdHMnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHByb2dyYW1BY2NvdW50TWFwID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHByb2dyYW1BY2NvdW50IG9mIHByb2dyYW1BY2NvdW50cykge1xuICAgICAgICAgICAgcHJvZ3JhbUFjY291bnRNYXAuc2V0KG5ldyB3ZWIzX2pzXzEuUHVibGljS2V5KHByb2dyYW1BY2NvdW50LmFjY291bnQuZGF0YS5zbGljZSg4LCA0MCkpLnRvU3RyaW5nKCksIHByb2dyYW1BY2NvdW50LmFjY291bnQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHByb2dyYW1BY2NvdW50TWFwLmtleXMoKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclN0YXRzQWNjb3VudCA9IHRoaXMuZHJpZnRDbGllbnQucHJvZ3JhbS5hY2NvdW50LnVzZXJTdGF0cy5jb2Rlci5hY2NvdW50cy5kZWNvZGUoJ1VzZXJTdGF0cycsIHByb2dyYW1BY2NvdW50TWFwLmdldChrZXkpLmRhdGEpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVXNlclN0YXQobmV3IHdlYjNfanNfMS5QdWJsaWNLZXkoa2V5KSwgdXNlclN0YXRzQWNjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdXNlclN0YXRzXSBvZiB0aGlzLnVzZXJTdGF0c01hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHVzZXJTdGF0cy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgdGhpcy51c2VyU3RhdHNNYXAuZGVsZXRlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGFzdE51bWJlck9mQXV0aG9yaXRpZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZHJpZnRDbGllbnQuZXZlbnRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdzdGF0ZUFjY291bnRVcGRhdGUnLCB0aGlzLnN5bmNDYWxsYmFjayk7XG4gICAgICAgICAgICB0aGlzLmxhc3ROdW1iZXJPZkF1dGhvcml0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5Vc2VyU3RhdHNNYXAgPSBVc2VyU3RhdHNNYXA7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJVc2VyU3RhdHNNYXAiLCJfXzEiLCJyZXF1aXJlIiwid2ViM19qc18xIiwiY29uc3RydWN0b3IiLCJkcmlmdENsaWVudCIsImFjY291bnRTdWJzY3JpcHRpb24iLCJ1c2VyU3RhdHNNYXAiLCJNYXAiLCJzeW5jQ2FsbGJhY2siLCJzdGF0ZSIsIm51bWJlck9mQXV0aG9yaXRpZXMiLCJsYXN0TnVtYmVyT2ZBdXRob3JpdGllcyIsInN5bmMiLCJzdWJzY3JpYmUiLCJzaXplIiwiZ2V0U3RhdGVBY2NvdW50IiwiZXZlbnRFbWl0dGVyIiwib24iLCJhZGRVc2VyU3RhdCIsImF1dGhvcml0eSIsInVzZXJTdGF0c0FjY291bnQiLCJ1c2VyU3RhdCIsIlVzZXJTdGF0cyIsInVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkiLCJnZXRVc2VyU3RhdHNBY2NvdW50UHVibGljS2V5IiwicHJvZ3JhbSIsInByb2dyYW1JZCIsInNldCIsInRvU3RyaW5nIiwidXBkYXRlV2l0aE9yZGVyUmVjb3JkIiwicmVjb3JkIiwidXNlck1hcCIsInVzZXIiLCJtdXN0R2V0IiwiaGFzIiwiZ2V0VXNlckFjY291bnQiLCJ1cGRhdGVXaXRoRXZlbnRSZWNvcmQiLCJldmVudFR5cGUiLCJkZXBvc2l0UmVjb3JkIiwidXNlckF1dGhvcml0eSIsImZ1bmRpbmdQYXltZW50UmVjb3JkIiwibGlxUmVjb3JkIiwibGlxdWlkYXRvclVzZXIiLCJsaXF1aWRhdG9yIiwib3JkZXJSZWNvcmQiLCJhY3Rpb25SZWNvcmQiLCJ0YWtlciIsIm1ha2VyIiwic2V0dGxlUG5sUmVjb3JkIiwibmV3VXNlclJlY29yZCIsImxwUmVjb3JkIiwiaWZTdGFrZVJlY29yZCIsImF1dGhvcml0eVB1YmxpY0tleSIsImdldCIsIlB1YmxpY0tleSIsInZhbHVlcyIsInByb2dyYW1BY2NvdW50cyIsImNvbm5lY3Rpb24iLCJnZXRQcm9ncmFtQWNjb3VudHMiLCJjb21taXRtZW50IiwiZmlsdGVycyIsIm1lbWNtcCIsImNvZGVyIiwiYWNjb3VudHMiLCJwcm9ncmFtQWNjb3VudE1hcCIsInByb2dyYW1BY2NvdW50IiwiYWNjb3VudCIsImRhdGEiLCJzbGljZSIsImtleSIsImtleXMiLCJ1c2VyU3RhdHMiLCJkZWNvZGUiLCJ1bnN1YnNjcmliZSIsImVudHJpZXMiLCJkZWxldGUiLCJyZW1vdmVMaXN0ZW5lciIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/userMap/userStatsMap.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/userName.js":
/*!******************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/userName.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.decodeName = exports.encodeName = exports.DEFAULT_MARKET_NAME = exports.DEFAULT_USER_NAME = exports.MAX_NAME_LENGTH = void 0;\nexports.MAX_NAME_LENGTH = 32;\nexports.DEFAULT_USER_NAME = \"Main Account\";\nexports.DEFAULT_MARKET_NAME = \"Default Market Name\";\nfunction encodeName(name) {\n    if (name.length > exports.MAX_NAME_LENGTH) {\n        throw Error(`Name (${name}) longer than 32 characters`);\n    }\n    const buffer = Buffer.alloc(32);\n    buffer.fill(name);\n    buffer.fill(\" \", name.length);\n    return Array(...buffer);\n}\nexports.encodeName = encodeName;\nfunction decodeName(bytes) {\n    const buffer = Buffer.from(bytes);\n    return buffer.toString(\"utf8\").trim();\n}\nexports.decodeName = decodeName;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyTmFtZS5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0JBQWtCLEdBQUdBLGtCQUFrQixHQUFHQSwyQkFBMkIsR0FBR0EseUJBQXlCLEdBQUdBLHVCQUF1QixHQUFHLEtBQUs7QUFDbklBLHVCQUF1QixHQUFHO0FBQzFCQSx5QkFBeUIsR0FBRztBQUM1QkEsMkJBQTJCLEdBQUc7QUFDOUIsU0FBU0csV0FBV0ksSUFBSTtJQUNwQixJQUFJQSxLQUFLQyxNQUFNLEdBQUdSLFFBQVFNLGVBQWUsRUFBRTtRQUN2QyxNQUFNRyxNQUFNLENBQUMsTUFBTSxFQUFFRixLQUFLLDJCQUEyQixDQUFDO0lBQzFEO0lBQ0EsTUFBTUcsU0FBU0MsT0FBT0MsS0FBSyxDQUFDO0lBQzVCRixPQUFPRyxJQUFJLENBQUNOO0lBQ1pHLE9BQU9HLElBQUksQ0FBQyxLQUFLTixLQUFLQyxNQUFNO0lBQzVCLE9BQU9NLFNBQVNKO0FBQ3BCO0FBQ0FWLGtCQUFrQixHQUFHRztBQUNyQixTQUFTRCxXQUFXYSxLQUFLO0lBQ3JCLE1BQU1MLFNBQVNDLE9BQU9LLElBQUksQ0FBQ0Q7SUFDM0IsT0FBT0wsT0FBT08sUUFBUSxDQUFDLFFBQVFDLElBQUk7QUFDdkM7QUFDQWxCLGtCQUFrQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyTmFtZS5qcz8wY2E0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5kZWNvZGVOYW1lID0gZXhwb3J0cy5lbmNvZGVOYW1lID0gZXhwb3J0cy5ERUZBVUxUX01BUktFVF9OQU1FID0gZXhwb3J0cy5ERUZBVUxUX1VTRVJfTkFNRSA9IGV4cG9ydHMuTUFYX05BTUVfTEVOR1RIID0gdm9pZCAwO1xuZXhwb3J0cy5NQVhfTkFNRV9MRU5HVEggPSAzMjtcbmV4cG9ydHMuREVGQVVMVF9VU0VSX05BTUUgPSAnTWFpbiBBY2NvdW50JztcbmV4cG9ydHMuREVGQVVMVF9NQVJLRVRfTkFNRSA9ICdEZWZhdWx0IE1hcmtldCBOYW1lJztcbmZ1bmN0aW9uIGVuY29kZU5hbWUobmFtZSkge1xuICAgIGlmIChuYW1lLmxlbmd0aCA+IGV4cG9ydHMuTUFYX05BTUVfTEVOR1RIKSB7XG4gICAgICAgIHRocm93IEVycm9yKGBOYW1lICgke25hbWV9KSBsb25nZXIgdGhhbiAzMiBjaGFyYWN0ZXJzYCk7XG4gICAgfVxuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5hbGxvYygzMik7XG4gICAgYnVmZmVyLmZpbGwobmFtZSk7XG4gICAgYnVmZmVyLmZpbGwoJyAnLCBuYW1lLmxlbmd0aCk7XG4gICAgcmV0dXJuIEFycmF5KC4uLmJ1ZmZlcik7XG59XG5leHBvcnRzLmVuY29kZU5hbWUgPSBlbmNvZGVOYW1lO1xuZnVuY3Rpb24gZGVjb2RlTmFtZShieXRlcykge1xuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcbiAgICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKCd1dGY4JykudHJpbSgpO1xufVxuZXhwb3J0cy5kZWNvZGVOYW1lID0gZGVjb2RlTmFtZTtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlY29kZU5hbWUiLCJlbmNvZGVOYW1lIiwiREVGQVVMVF9NQVJLRVRfTkFNRSIsIkRFRkFVTFRfVVNFUl9OQU1FIiwiTUFYX05BTUVfTEVOR1RIIiwibmFtZSIsImxlbmd0aCIsIkVycm9yIiwiYnVmZmVyIiwiQnVmZmVyIiwiYWxsb2MiLCJmaWxsIiwiQXJyYXkiLCJieXRlcyIsImZyb20iLCJ0b1N0cmluZyIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/userName.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/userStats.js":
/*!*******************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/userStats.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.UserStats = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst pollingUserStatsAccountSubscriber_1 = __webpack_require__(/*! ./accounts/pollingUserStatsAccountSubscriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/pollingUserStatsAccountSubscriber.js\");\nconst webSocketUserStatsAccountSubsriber_1 = __webpack_require__(/*! ./accounts/webSocketUserStatsAccountSubsriber */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/accounts/webSocketUserStatsAccountSubsriber.js\");\nconst pda_1 = __webpack_require__(/*! ./addresses/pda */ \"(ssr)/./node_modules/@drift-labs/sdk/lib/addresses/pda.js\");\nclass UserStats {\n    constructor(config){\n        var _a, _b;\n        this.driftClient = config.driftClient;\n        this.userStatsAccountPublicKey = config.userStatsAccountPublicKey;\n        if (((_a = config.accountSubscription) === null || _a === void 0 ? void 0 : _a.type) === \"polling\") {\n            this.accountSubscriber = new pollingUserStatsAccountSubscriber_1.PollingUserStatsAccountSubscriber(config.driftClient.program, config.userStatsAccountPublicKey, config.accountSubscription.accountLoader);\n        } else if (((_b = config.accountSubscription) === null || _b === void 0 ? void 0 : _b.type) === \"custom\") {\n            throw new Error(\"Custom account subscription not yet implemented for user stats\");\n        } else {\n            this.accountSubscriber = new webSocketUserStatsAccountSubsriber_1.WebSocketUserStatsAccountSubscriber(config.driftClient.program, config.userStatsAccountPublicKey);\n        }\n    }\n    async subscribe(userStatsAccount) {\n        this.isSubscribed = await this.accountSubscriber.subscribe(userStatsAccount);\n        return this.isSubscribed;\n    }\n    async fetchAccounts() {\n        await this.accountSubscriber.fetch();\n    }\n    async unsubscribe() {\n        await this.accountSubscriber.unsubscribe();\n        this.isSubscribed = false;\n    }\n    getAccountAndSlot() {\n        return this.accountSubscriber.getUserStatsAccountAndSlot();\n    }\n    getAccount() {\n        return this.accountSubscriber.getUserStatsAccountAndSlot().data;\n    }\n    getReferrerInfo() {\n        if (this.getAccount().referrer.equals(web3_js_1.PublicKey.default)) {\n            return undefined;\n        } else {\n            return {\n                referrer: (0, pda_1.getUserAccountPublicKeySync)(this.driftClient.program.programId, this.getAccount().referrer, 0),\n                referrerStats: (0, pda_1.getUserStatsAccountPublicKey)(this.driftClient.program.programId, this.getAccount().referrer)\n            };\n        }\n    }\n}\nexports.UserStats = UserStats;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyU3RhdHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELGlCQUFpQixHQUFHLEtBQUs7QUFDekIsTUFBTUcsWUFBWUMsbUJBQU9BLENBQUMsOEVBQWlCO0FBQzNDLE1BQU1DLHNDQUFzQ0QsbUJBQU9BLENBQUMsNElBQThDO0FBQ2xHLE1BQU1FLHVDQUF1Q0YsbUJBQU9BLENBQUMsOElBQStDO0FBQ3BHLE1BQU1HLFFBQVFILG1CQUFPQSxDQUFDLGtGQUFpQjtBQUN2QyxNQUFNRjtJQUNGTSxZQUFZQyxNQUFNLENBQUU7UUFDaEIsSUFBSUMsSUFBSUM7UUFDUixJQUFJLENBQUNDLFdBQVcsR0FBR0gsT0FBT0csV0FBVztRQUNyQyxJQUFJLENBQUNDLHlCQUF5QixHQUFHSixPQUFPSSx5QkFBeUI7UUFDakUsSUFBSSxDQUFDLENBQUNILEtBQUtELE9BQU9LLG1CQUFtQixNQUFNLFFBQVFKLE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR0ssSUFBSSxNQUFNLFdBQVc7WUFDaEcsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxJQUFJWCxvQ0FBb0NZLGlDQUFpQyxDQUFDUixPQUFPRyxXQUFXLENBQUNNLE9BQU8sRUFBRVQsT0FBT0kseUJBQXlCLEVBQUVKLE9BQU9LLG1CQUFtQixDQUFDSyxhQUFhO1FBQzdNLE9BQ0ssSUFBSSxDQUFDLENBQUNSLEtBQUtGLE9BQU9LLG1CQUFtQixNQUFNLFFBQVFILE9BQU8sS0FBSyxJQUFJLEtBQUssSUFBSUEsR0FBR0ksSUFBSSxNQUFNLFVBQVU7WUFDcEcsTUFBTSxJQUFJSyxNQUFNO1FBQ3BCLE9BQ0s7WUFDRCxJQUFJLENBQUNKLGlCQUFpQixHQUFHLElBQUlWLHFDQUFxQ2UsbUNBQW1DLENBQUNaLE9BQU9HLFdBQVcsQ0FBQ00sT0FBTyxFQUFFVCxPQUFPSSx5QkFBeUI7UUFDdEs7SUFDSjtJQUNBLE1BQU1TLFVBQVVDLGdCQUFnQixFQUFFO1FBQzlCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLE1BQU0sSUFBSSxDQUFDUixpQkFBaUIsQ0FBQ00sU0FBUyxDQUFDQztRQUMzRCxPQUFPLElBQUksQ0FBQ0MsWUFBWTtJQUM1QjtJQUNBLE1BQU1DLGdCQUFnQjtRQUNsQixNQUFNLElBQUksQ0FBQ1QsaUJBQWlCLENBQUNVLEtBQUs7SUFDdEM7SUFDQSxNQUFNQyxjQUFjO1FBQ2hCLE1BQU0sSUFBSSxDQUFDWCxpQkFBaUIsQ0FBQ1csV0FBVztRQUN4QyxJQUFJLENBQUNILFlBQVksR0FBRztJQUN4QjtJQUNBSSxvQkFBb0I7UUFDaEIsT0FBTyxJQUFJLENBQUNaLGlCQUFpQixDQUFDYSwwQkFBMEI7SUFDNUQ7SUFDQUMsYUFBYTtRQUNULE9BQU8sSUFBSSxDQUFDZCxpQkFBaUIsQ0FBQ2EsMEJBQTBCLEdBQUdFLElBQUk7SUFDbkU7SUFDQUMsa0JBQWtCO1FBQ2QsSUFBSSxJQUFJLENBQUNGLFVBQVUsR0FBR0csUUFBUSxDQUFDQyxNQUFNLENBQUMvQixVQUFVZ0MsU0FBUyxDQUFDQyxPQUFPLEdBQUc7WUFDaEUsT0FBT0M7UUFDWCxPQUNLO1lBQ0QsT0FBTztnQkFDSEosVUFBVSxDQUFDLEdBQUcxQixNQUFNK0IsMkJBQTJCLEVBQUUsSUFBSSxDQUFDMUIsV0FBVyxDQUFDTSxPQUFPLENBQUNxQixTQUFTLEVBQUUsSUFBSSxDQUFDVCxVQUFVLEdBQUdHLFFBQVEsRUFBRTtnQkFDakhPLGVBQWUsQ0FBQyxHQUFHakMsTUFBTWtDLDRCQUE0QixFQUFFLElBQUksQ0FBQzdCLFdBQVcsQ0FBQ00sT0FBTyxDQUFDcUIsU0FBUyxFQUFFLElBQUksQ0FBQ1QsVUFBVSxHQUFHRyxRQUFRO1lBQ3pIO1FBQ0o7SUFDSjtBQUNKO0FBQ0FqQyxpQkFBaUIsR0FBR0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvdXNlclN0YXRzLmpzP2JmYTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlVzZXJTdGF0cyA9IHZvaWQgMDtcbmNvbnN0IHdlYjNfanNfMSA9IHJlcXVpcmUoXCJAc29sYW5hL3dlYjMuanNcIik7XG5jb25zdCBwb2xsaW5nVXNlclN0YXRzQWNjb3VudFN1YnNjcmliZXJfMSA9IHJlcXVpcmUoXCIuL2FjY291bnRzL3BvbGxpbmdVc2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlclwiKTtcbmNvbnN0IHdlYlNvY2tldFVzZXJTdGF0c0FjY291bnRTdWJzcmliZXJfMSA9IHJlcXVpcmUoXCIuL2FjY291bnRzL3dlYlNvY2tldFVzZXJTdGF0c0FjY291bnRTdWJzcmliZXJcIik7XG5jb25zdCBwZGFfMSA9IHJlcXVpcmUoXCIuL2FkZHJlc3Nlcy9wZGFcIik7XG5jbGFzcyBVc2VyU3RhdHMge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLmRyaWZ0Q2xpZW50ID0gY29uZmlnLmRyaWZ0Q2xpZW50O1xuICAgICAgICB0aGlzLnVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkgPSBjb25maWcudXNlclN0YXRzQWNjb3VudFB1YmxpY0tleTtcbiAgICAgICAgaWYgKCgoX2EgPSBjb25maWcuYWNjb3VudFN1YnNjcmlwdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUpID09PSAncG9sbGluZycpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjb3VudFN1YnNjcmliZXIgPSBuZXcgcG9sbGluZ1VzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyXzEuUG9sbGluZ1VzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyKGNvbmZpZy5kcmlmdENsaWVudC5wcm9ncmFtLCBjb25maWcudXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSwgY29uZmlnLmFjY291bnRTdWJzY3JpcHRpb24uYWNjb3VudExvYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKChfYiA9IGNvbmZpZy5hY2NvdW50U3Vic2NyaXB0aW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudHlwZSkgPT09ICdjdXN0b20nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0N1c3RvbSBhY2NvdW50IHN1YnNjcmlwdGlvbiBub3QgeWV0IGltcGxlbWVudGVkIGZvciB1c2VyIHN0YXRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFjY291bnRTdWJzY3JpYmVyID0gbmV3IHdlYlNvY2tldFVzZXJTdGF0c0FjY291bnRTdWJzcmliZXJfMS5XZWJTb2NrZXRVc2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlcihjb25maWcuZHJpZnRDbGllbnQucHJvZ3JhbSwgY29uZmlnLnVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZSh1c2VyU3RhdHNBY2NvdW50KSB7XG4gICAgICAgIHRoaXMuaXNTdWJzY3JpYmVkID0gYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci5zdWJzY3JpYmUodXNlclN0YXRzQWNjb3VudCk7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU3Vic2NyaWJlZDtcbiAgICB9XG4gICAgYXN5bmMgZmV0Y2hBY2NvdW50cygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci5mZXRjaCgpO1xuICAgIH1cbiAgICBhc3luYyB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY2NvdW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXRBY2NvdW50QW5kU2xvdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudFN1YnNjcmliZXIuZ2V0VXNlclN0YXRzQWNjb3VudEFuZFNsb3QoKTtcbiAgICB9XG4gICAgZ2V0QWNjb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3VudFN1YnNjcmliZXIuZ2V0VXNlclN0YXRzQWNjb3VudEFuZFNsb3QoKS5kYXRhO1xuICAgIH1cbiAgICBnZXRSZWZlcnJlckluZm8oKSB7XG4gICAgICAgIGlmICh0aGlzLmdldEFjY291bnQoKS5yZWZlcnJlci5lcXVhbHMod2ViM19qc18xLlB1YmxpY0tleS5kZWZhdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJyZXI6ICgwLCBwZGFfMS5nZXRVc2VyQWNjb3VudFB1YmxpY0tleVN5bmMpKHRoaXMuZHJpZnRDbGllbnQucHJvZ3JhbS5wcm9ncmFtSWQsIHRoaXMuZ2V0QWNjb3VudCgpLnJlZmVycmVyLCAwKSxcbiAgICAgICAgICAgICAgICByZWZlcnJlclN0YXRzOiAoMCwgcGRhXzEuZ2V0VXNlclN0YXRzQWNjb3VudFB1YmxpY0tleSkodGhpcy5kcmlmdENsaWVudC5wcm9ncmFtLnByb2dyYW1JZCwgdGhpcy5nZXRBY2NvdW50KCkucmVmZXJyZXIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuVXNlclN0YXRzID0gVXNlclN0YXRzO1xuIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiVXNlclN0YXRzIiwid2ViM19qc18xIiwicmVxdWlyZSIsInBvbGxpbmdVc2VyU3RhdHNBY2NvdW50U3Vic2NyaWJlcl8xIiwid2ViU29ja2V0VXNlclN0YXRzQWNjb3VudFN1YnNyaWJlcl8xIiwicGRhXzEiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsIl9hIiwiX2IiLCJkcmlmdENsaWVudCIsInVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkiLCJhY2NvdW50U3Vic2NyaXB0aW9uIiwidHlwZSIsImFjY291bnRTdWJzY3JpYmVyIiwiUG9sbGluZ1VzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyIiwicHJvZ3JhbSIsImFjY291bnRMb2FkZXIiLCJFcnJvciIsIldlYlNvY2tldFVzZXJTdGF0c0FjY291bnRTdWJzY3JpYmVyIiwic3Vic2NyaWJlIiwidXNlclN0YXRzQWNjb3VudCIsImlzU3Vic2NyaWJlZCIsImZldGNoQWNjb3VudHMiLCJmZXRjaCIsInVuc3Vic2NyaWJlIiwiZ2V0QWNjb3VudEFuZFNsb3QiLCJnZXRVc2VyU3RhdHNBY2NvdW50QW5kU2xvdCIsImdldEFjY291bnQiLCJkYXRhIiwiZ2V0UmVmZXJyZXJJbmZvIiwicmVmZXJyZXIiLCJlcXVhbHMiLCJQdWJsaWNLZXkiLCJkZWZhdWx0IiwidW5kZWZpbmVkIiwiZ2V0VXNlckFjY291bnRQdWJsaWNLZXlTeW5jIiwicHJvZ3JhbUlkIiwicmVmZXJyZXJTdGF0cyIsImdldFVzZXJTdGF0c0FjY291bnRQdWJsaWNLZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/userStats.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/userStatsConfig.js":
/*!*************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/userStatsConfig.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91c2VyU3RhdHNDb25maWcuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYkEsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kcmlmdC10cmFkaW5nLXVpLy4vbm9kZV9tb2R1bGVzL0BkcmlmdC1sYWJzL3Nkay9saWIvdXNlclN0YXRzQ29uZmlnLmpzPzIyNDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/userStatsConfig.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/util/computeUnits.js":
/*!***************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/util/computeUnits.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.findComputeUnitConsumption = void 0;\nasync function findComputeUnitConsumption(programId, connection, txSignature, commitment = \"confirmed\") {\n    const tx = await connection.getTransaction(txSignature, {\n        commitment\n    });\n    const computeUnits = [];\n    const regex = new RegExp(`Program ${programId.toString()} consumed ([0-9]{0,6}) of ([0-9]{0,7}) compute units`);\n    tx.meta.logMessages.forEach((logMessage)=>{\n        const match = logMessage.match(regex);\n        if (match && match[1]) {\n            computeUnits.push(match[1]);\n        }\n    });\n    return computeUnits;\n}\nexports.findComputeUnitConsumption = findComputeUnitConsumption;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91dGlsL2NvbXB1dGVVbml0cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsa0NBQWtDLEdBQUcsS0FBSztBQUMxQyxlQUFlRSwyQkFBMkJDLFNBQVMsRUFBRUMsVUFBVSxFQUFFQyxXQUFXLEVBQUVDLGFBQWEsV0FBVztJQUNsRyxNQUFNQyxLQUFLLE1BQU1ILFdBQVdJLGNBQWMsQ0FBQ0gsYUFBYTtRQUFFQztJQUFXO0lBQ3JFLE1BQU1HLGVBQWUsRUFBRTtJQUN2QixNQUFNQyxRQUFRLElBQUlDLE9BQU8sQ0FBQyxRQUFRLEVBQUVSLFVBQVVTLFFBQVEsR0FBRyxvREFBb0QsQ0FBQztJQUM5R0wsR0FBR00sSUFBSSxDQUFDQyxXQUFXLENBQUNDLE9BQU8sQ0FBQyxDQUFDQztRQUN6QixNQUFNQyxRQUFRRCxXQUFXQyxLQUFLLENBQUNQO1FBQy9CLElBQUlPLFNBQVNBLEtBQUssQ0FBQyxFQUFFLEVBQUU7WUFDbkJSLGFBQWFTLElBQUksQ0FBQ0QsS0FBSyxDQUFDLEVBQUU7UUFDOUI7SUFDSjtJQUNBLE9BQU9SO0FBQ1g7QUFDQVQsa0NBQWtDLEdBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJpZnQtdHJhZGluZy11aS8uL25vZGVfbW9kdWxlcy9AZHJpZnQtbGFicy9zZGsvbGliL3V0aWwvY29tcHV0ZVVuaXRzLmpzPzNkOTIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmZpbmRDb21wdXRlVW5pdENvbnN1bXB0aW9uID0gdm9pZCAwO1xuYXN5bmMgZnVuY3Rpb24gZmluZENvbXB1dGVVbml0Q29uc3VtcHRpb24ocHJvZ3JhbUlkLCBjb25uZWN0aW9uLCB0eFNpZ25hdHVyZSwgY29tbWl0bWVudCA9ICdjb25maXJtZWQnKSB7XG4gICAgY29uc3QgdHggPSBhd2FpdCBjb25uZWN0aW9uLmdldFRyYW5zYWN0aW9uKHR4U2lnbmF0dXJlLCB7IGNvbW1pdG1lbnQgfSk7XG4gICAgY29uc3QgY29tcHV0ZVVuaXRzID0gW107XG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBQcm9ncmFtICR7cHJvZ3JhbUlkLnRvU3RyaW5nKCl9IGNvbnN1bWVkIChbMC05XXswLDZ9KSBvZiAoWzAtOV17MCw3fSkgY29tcHV0ZSB1bml0c2ApO1xuICAgIHR4Lm1ldGEubG9nTWVzc2FnZXMuZm9yRWFjaCgobG9nTWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGxvZ01lc3NhZ2UubWF0Y2gocmVnZXgpO1xuICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgIGNvbXB1dGVVbml0cy5wdXNoKG1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb21wdXRlVW5pdHM7XG59XG5leHBvcnRzLmZpbmRDb21wdXRlVW5pdENvbnN1bXB0aW9uID0gZmluZENvbXB1dGVVbml0Q29uc3VtcHRpb247XG4iXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJmaW5kQ29tcHV0ZVVuaXRDb25zdW1wdGlvbiIsInByb2dyYW1JZCIsImNvbm5lY3Rpb24iLCJ0eFNpZ25hdHVyZSIsImNvbW1pdG1lbnQiLCJ0eCIsImdldFRyYW5zYWN0aW9uIiwiY29tcHV0ZVVuaXRzIiwicmVnZXgiLCJSZWdFeHAiLCJ0b1N0cmluZyIsIm1ldGEiLCJsb2dNZXNzYWdlcyIsImZvckVhY2giLCJsb2dNZXNzYWdlIiwibWF0Y2giLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/util/computeUnits.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/util/promiseTimeout.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/util/promiseTimeout.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.promiseTimeout = void 0;\nfunction promiseTimeout(promise, timeoutMs) {\n    let timeoutId;\n    const timeoutPromise = new Promise((resolve)=>{\n        timeoutId = setTimeout(()=>resolve(null), timeoutMs);\n    });\n    return Promise.race([\n        promise,\n        timeoutPromise\n    ]).then((result)=>{\n        clearTimeout(timeoutId);\n        return result;\n    });\n}\nexports.promiseTimeout = promiseTimeout;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91dGlsL3Byb21pc2VUaW1lb3V0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2JBLDhDQUE2QztJQUFFRyxPQUFPO0FBQUssQ0FBQyxFQUFDO0FBQzdERCxzQkFBc0IsR0FBRyxLQUFLO0FBQzlCLFNBQVNFLGVBQWVDLE9BQU8sRUFBRUMsU0FBUztJQUN0QyxJQUFJQztJQUNKLE1BQU1DLGlCQUFpQixJQUFJQyxRQUFRLENBQUNDO1FBQ2hDSCxZQUFZSSxXQUFXLElBQU1ELFFBQVEsT0FBT0o7SUFDaEQ7SUFDQSxPQUFPRyxRQUFRRyxJQUFJLENBQUM7UUFBQ1A7UUFBU0c7S0FBZSxFQUFFSyxJQUFJLENBQUMsQ0FBQ0M7UUFDakRDLGFBQWFSO1FBQ2IsT0FBT087SUFDWDtBQUNKO0FBQ0FaLHNCQUFzQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91dGlsL3Byb21pc2VUaW1lb3V0LmpzPzE0NzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnByb21pc2VUaW1lb3V0ID0gdm9pZCAwO1xuZnVuY3Rpb24gcHJvbWlzZVRpbWVvdXQocHJvbWlzZSwgdGltZW91dE1zKSB7XG4gICAgbGV0IHRpbWVvdXRJZDtcbiAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShudWxsKSwgdGltZW91dE1zKTtcbiAgICB9KTtcbiAgICByZXR1cm4gUHJvbWlzZS5yYWNlKFtwcm9taXNlLCB0aW1lb3V0UHJvbWlzZV0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbn1cbmV4cG9ydHMucHJvbWlzZVRpbWVvdXQgPSBwcm9taXNlVGltZW91dDtcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInByb21pc2VUaW1lb3V0IiwicHJvbWlzZSIsInRpbWVvdXRNcyIsInRpbWVvdXRJZCIsInRpbWVvdXRQcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmFjZSIsInRoZW4iLCJyZXN1bHQiLCJjbGVhclRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/util/promiseTimeout.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/util/tps.js":
/*!******************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/util/tps.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.estimateTps = void 0;\nasync function estimateTps(programId, connection, failed) {\n    let signatures = await connection.getSignaturesForAddress(programId, undefined, \"finalized\");\n    if (failed) {\n        signatures = signatures.filter((signature)=>signature.err);\n    }\n    const numberOfSignatures = signatures.length;\n    if (numberOfSignatures === 0) {\n        return 0;\n    }\n    return numberOfSignatures / (signatures[0].blockTime - signatures[numberOfSignatures - 1].blockTime);\n}\nexports.estimateTps = estimateTps;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91dGlsL3Rwcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiQSw4Q0FBNkM7SUFBRUcsT0FBTztBQUFLLENBQUMsRUFBQztBQUM3REQsbUJBQW1CLEdBQUcsS0FBSztBQUMzQixlQUFlRSxZQUFZQyxTQUFTLEVBQUVDLFVBQVUsRUFBRUMsTUFBTTtJQUNwRCxJQUFJQyxhQUFhLE1BQU1GLFdBQVdHLHVCQUF1QixDQUFDSixXQUFXSyxXQUFXO0lBQ2hGLElBQUlILFFBQVE7UUFDUkMsYUFBYUEsV0FBV0csTUFBTSxDQUFDLENBQUNDLFlBQWNBLFVBQVVDLEdBQUc7SUFDL0Q7SUFDQSxNQUFNQyxxQkFBcUJOLFdBQVdPLE1BQU07SUFDNUMsSUFBSUQsdUJBQXVCLEdBQUc7UUFDMUIsT0FBTztJQUNYO0lBQ0EsT0FBUUEscUJBQ0hOLENBQUFBLFVBQVUsQ0FBQyxFQUFFLENBQUNRLFNBQVMsR0FBR1IsVUFBVSxDQUFDTSxxQkFBcUIsRUFBRSxDQUFDRSxTQUFTO0FBQy9FO0FBQ0FkLG1CQUFtQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi91dGlsL3Rwcy5qcz82YzZlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5lc3RpbWF0ZVRwcyA9IHZvaWQgMDtcbmFzeW5jIGZ1bmN0aW9uIGVzdGltYXRlVHBzKHByb2dyYW1JZCwgY29ubmVjdGlvbiwgZmFpbGVkKSB7XG4gICAgbGV0IHNpZ25hdHVyZXMgPSBhd2FpdCBjb25uZWN0aW9uLmdldFNpZ25hdHVyZXNGb3JBZGRyZXNzKHByb2dyYW1JZCwgdW5kZWZpbmVkLCAnZmluYWxpemVkJyk7XG4gICAgaWYgKGZhaWxlZCkge1xuICAgICAgICBzaWduYXR1cmVzID0gc2lnbmF0dXJlcy5maWx0ZXIoKHNpZ25hdHVyZSkgPT4gc2lnbmF0dXJlLmVycik7XG4gICAgfVxuICAgIGNvbnN0IG51bWJlck9mU2lnbmF0dXJlcyA9IHNpZ25hdHVyZXMubGVuZ3RoO1xuICAgIGlmIChudW1iZXJPZlNpZ25hdHVyZXMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiAobnVtYmVyT2ZTaWduYXR1cmVzIC9cbiAgICAgICAgKHNpZ25hdHVyZXNbMF0uYmxvY2tUaW1lIC0gc2lnbmF0dXJlc1tudW1iZXJPZlNpZ25hdHVyZXMgLSAxXS5ibG9ja1RpbWUpKTtcbn1cbmV4cG9ydHMuZXN0aW1hdGVUcHMgPSBlc3RpbWF0ZVRwcztcbiJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImVzdGltYXRlVHBzIiwicHJvZ3JhbUlkIiwiY29ubmVjdGlvbiIsImZhaWxlZCIsInNpZ25hdHVyZXMiLCJnZXRTaWduYXR1cmVzRm9yQWRkcmVzcyIsInVuZGVmaW5lZCIsImZpbHRlciIsInNpZ25hdHVyZSIsImVyciIsIm51bWJlck9mU2lnbmF0dXJlcyIsImxlbmd0aCIsImJsb2NrVGltZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/util/tps.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/wallet.js":
/*!****************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/wallet.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nvar __importDefault = (void 0) && (void 0).__importDefault || function(mod) {\n    return mod && mod.__esModule ? mod : {\n        \"default\": mod\n    };\n};\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\nexports.loadKeypair = exports.Wallet = void 0;\nconst web3_js_1 = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/@solana/web3.js/lib/index.esm.js\");\nconst fs_1 = __importDefault(__webpack_require__(/*! fs */ \"fs\"));\nconst bs58_1 = __importDefault(__webpack_require__(/*! bs58 */ \"(ssr)/./node_modules/bs58/index.js\"));\nclass Wallet {\n    constructor(payer){\n        this.payer = payer;\n    }\n    async signTransaction(tx) {\n        tx.partialSign(this.payer);\n        return tx;\n    }\n    async signVersionedTransaction(tx) {\n        tx.sign([\n            this.payer\n        ]);\n        return tx;\n    }\n    async signAllTransactions(txs) {\n        return txs.map((t)=>{\n            t.partialSign(this.payer);\n            return t;\n        });\n    }\n    async signAllVersionedTransactions(txs) {\n        return txs.map((t)=>{\n            t.sign([\n                this.payer\n            ]);\n            return t;\n        });\n    }\n    get publicKey() {\n        return this.payer.publicKey;\n    }\n}\nexports.Wallet = Wallet;\nfunction loadKeypair(privateKey) {\n    // try to load privateKey as a filepath\n    let loadedKey;\n    if (fs_1.default.existsSync(privateKey)) {\n        privateKey = fs_1.default.readFileSync(privateKey).toString();\n    }\n    if (privateKey.includes(\"[\") && privateKey.includes(\"]\")) {\n        loadedKey = Uint8Array.from(JSON.parse(privateKey));\n    } else if (privateKey.includes(\",\")) {\n        loadedKey = Uint8Array.from(privateKey.split(\",\").map((val)=>Number(val)));\n    } else {\n        privateKey = privateKey.replace(/\\s/g, \"\");\n        loadedKey = new Uint8Array(bs58_1.default.decode(privateKey));\n    }\n    return web3_js_1.Keypair.fromSecretKey(Uint8Array.from(loadedKey));\n}\nexports.loadKeypair = loadKeypair;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi93YWxsZXQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYixJQUFJQSxrQkFBa0IsQ0FBQyxNQUFHLEtBQUssT0FBRyxFQUFFQSxlQUFlLElBQUssU0FBVUMsR0FBRztJQUNqRSxPQUFPLE9BQVFBLElBQUlDLFVBQVUsR0FBSUQsTUFBTTtRQUFFLFdBQVdBO0lBQUk7QUFDNUQ7QUFDQUUsOENBQTZDO0lBQUVHLE9BQU87QUFBSyxDQUFDLEVBQUM7QUFDN0RELG1CQUFtQixHQUFHQSxjQUFjLEdBQUcsS0FBSztBQUM1QyxNQUFNSSxZQUFZQyxtQkFBT0EsQ0FBQyw4RUFBaUI7QUFDM0MsTUFBTUMsT0FBT1gsZ0JBQWdCVSxtQkFBT0EsQ0FBQyxjQUFJO0FBQ3pDLE1BQU1FLFNBQVNaLGdCQUFnQlUsbUJBQU9BLENBQUMsZ0RBQU07QUFDN0MsTUFBTUY7SUFDRkssWUFBWUMsS0FBSyxDQUFFO1FBQ2YsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2pCO0lBQ0EsTUFBTUMsZ0JBQWdCQyxFQUFFLEVBQUU7UUFDdEJBLEdBQUdDLFdBQVcsQ0FBQyxJQUFJLENBQUNILEtBQUs7UUFDekIsT0FBT0U7SUFDWDtJQUNBLE1BQU1FLHlCQUF5QkYsRUFBRSxFQUFFO1FBQy9CQSxHQUFHRyxJQUFJLENBQUM7WUFBQyxJQUFJLENBQUNMLEtBQUs7U0FBQztRQUNwQixPQUFPRTtJQUNYO0lBQ0EsTUFBTUksb0JBQW9CQyxHQUFHLEVBQUU7UUFDM0IsT0FBT0EsSUFBSUMsR0FBRyxDQUFDLENBQUNDO1lBQ1pBLEVBQUVOLFdBQVcsQ0FBQyxJQUFJLENBQUNILEtBQUs7WUFDeEIsT0FBT1M7UUFDWDtJQUNKO0lBQ0EsTUFBTUMsNkJBQTZCSCxHQUFHLEVBQUU7UUFDcEMsT0FBT0EsSUFBSUMsR0FBRyxDQUFDLENBQUNDO1lBQ1pBLEVBQUVKLElBQUksQ0FBQztnQkFBQyxJQUFJLENBQUNMLEtBQUs7YUFBQztZQUNuQixPQUFPUztRQUNYO0lBQ0o7SUFDQSxJQUFJRSxZQUFZO1FBQ1osT0FBTyxJQUFJLENBQUNYLEtBQUssQ0FBQ1csU0FBUztJQUMvQjtBQUNKO0FBQ0FwQixjQUFjLEdBQUdHO0FBQ2pCLFNBQVNELFlBQVltQixVQUFVO0lBQzNCLHVDQUF1QztJQUN2QyxJQUFJQztJQUNKLElBQUloQixLQUFLaUIsT0FBTyxDQUFDQyxVQUFVLENBQUNILGFBQWE7UUFDckNBLGFBQWFmLEtBQUtpQixPQUFPLENBQUNFLFlBQVksQ0FBQ0osWUFBWUssUUFBUTtJQUMvRDtJQUNBLElBQUlMLFdBQVdNLFFBQVEsQ0FBQyxRQUFRTixXQUFXTSxRQUFRLENBQUMsTUFBTTtRQUN0REwsWUFBWU0sV0FBV0MsSUFBSSxDQUFDQyxLQUFLQyxLQUFLLENBQUNWO0lBQzNDLE9BQ0ssSUFBSUEsV0FBV00sUUFBUSxDQUFDLE1BQU07UUFDL0JMLFlBQVlNLFdBQVdDLElBQUksQ0FBQ1IsV0FBV1csS0FBSyxDQUFDLEtBQUtmLEdBQUcsQ0FBQyxDQUFDZ0IsTUFBUUMsT0FBT0Q7SUFDMUUsT0FDSztRQUNEWixhQUFhQSxXQUFXYyxPQUFPLENBQUMsT0FBTztRQUN2Q2IsWUFBWSxJQUFJTSxXQUFXckIsT0FBT2dCLE9BQU8sQ0FBQ2EsTUFBTSxDQUFDZjtJQUNyRDtJQUNBLE9BQU9qQixVQUFVaUMsT0FBTyxDQUFDQyxhQUFhLENBQUNWLFdBQVdDLElBQUksQ0FBQ1A7QUFDM0Q7QUFDQXRCLG1CQUFtQixHQUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2RyaWZ0LXRyYWRpbmctdWkvLi9ub2RlX21vZHVsZXMvQGRyaWZ0LWxhYnMvc2RrL2xpYi93YWxsZXQuanM/MjZhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMubG9hZEtleXBhaXIgPSBleHBvcnRzLldhbGxldCA9IHZvaWQgMDtcbmNvbnN0IHdlYjNfanNfMSA9IHJlcXVpcmUoXCJAc29sYW5hL3dlYjMuanNcIik7XG5jb25zdCBmc18xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJmc1wiKSk7XG5jb25zdCBiczU4XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImJzNThcIikpO1xuY2xhc3MgV2FsbGV0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXllcikge1xuICAgICAgICB0aGlzLnBheWVyID0gcGF5ZXI7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25UcmFuc2FjdGlvbih0eCkge1xuICAgICAgICB0eC5wYXJ0aWFsU2lnbih0aGlzLnBheWVyKTtcbiAgICAgICAgcmV0dXJuIHR4O1xuICAgIH1cbiAgICBhc3luYyBzaWduVmVyc2lvbmVkVHJhbnNhY3Rpb24odHgpIHtcbiAgICAgICAgdHguc2lnbihbdGhpcy5wYXllcl0pO1xuICAgICAgICByZXR1cm4gdHg7XG4gICAgfVxuICAgIGFzeW5jIHNpZ25BbGxUcmFuc2FjdGlvbnModHhzKSB7XG4gICAgICAgIHJldHVybiB0eHMubWFwKCh0KSA9PiB7XG4gICAgICAgICAgICB0LnBhcnRpYWxTaWduKHRoaXMucGF5ZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBzaWduQWxsVmVyc2lvbmVkVHJhbnNhY3Rpb25zKHR4cykge1xuICAgICAgICByZXR1cm4gdHhzLm1hcCgodCkgPT4ge1xuICAgICAgICAgICAgdC5zaWduKFt0aGlzLnBheWVyXSk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBwdWJsaWNLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBheWVyLnB1YmxpY0tleTtcbiAgICB9XG59XG5leHBvcnRzLldhbGxldCA9IFdhbGxldDtcbmZ1bmN0aW9uIGxvYWRLZXlwYWlyKHByaXZhdGVLZXkpIHtcbiAgICAvLyB0cnkgdG8gbG9hZCBwcml2YXRlS2V5IGFzIGEgZmlsZXBhdGhcbiAgICBsZXQgbG9hZGVkS2V5O1xuICAgIGlmIChmc18xLmRlZmF1bHQuZXhpc3RzU3luYyhwcml2YXRlS2V5KSkge1xuICAgICAgICBwcml2YXRlS2V5ID0gZnNfMS5kZWZhdWx0LnJlYWRGaWxlU3luYyhwcml2YXRlS2V5KS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAocHJpdmF0ZUtleS5pbmNsdWRlcygnWycpICYmIHByaXZhdGVLZXkuaW5jbHVkZXMoJ10nKSkge1xuICAgICAgICBsb2FkZWRLZXkgPSBVaW50OEFycmF5LmZyb20oSlNPTi5wYXJzZShwcml2YXRlS2V5KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHByaXZhdGVLZXkuaW5jbHVkZXMoJywnKSkge1xuICAgICAgICBsb2FkZWRLZXkgPSBVaW50OEFycmF5LmZyb20ocHJpdmF0ZUtleS5zcGxpdCgnLCcpLm1hcCgodmFsKSA9PiBOdW1iZXIodmFsKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJpdmF0ZUtleSA9IHByaXZhdGVLZXkucmVwbGFjZSgvXFxzL2csICcnKTtcbiAgICAgICAgbG9hZGVkS2V5ID0gbmV3IFVpbnQ4QXJyYXkoYnM1OF8xLmRlZmF1bHQuZGVjb2RlKHByaXZhdGVLZXkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHdlYjNfanNfMS5LZXlwYWlyLmZyb21TZWNyZXRLZXkoVWludDhBcnJheS5mcm9tKGxvYWRlZEtleSkpO1xufVxuZXhwb3J0cy5sb2FkS2V5cGFpciA9IGxvYWRLZXlwYWlyO1xuIl0sIm5hbWVzIjpbIl9faW1wb3J0RGVmYXVsdCIsIm1vZCIsIl9fZXNNb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImxvYWRLZXlwYWlyIiwiV2FsbGV0Iiwid2ViM19qc18xIiwicmVxdWlyZSIsImZzXzEiLCJiczU4XzEiLCJjb25zdHJ1Y3RvciIsInBheWVyIiwic2lnblRyYW5zYWN0aW9uIiwidHgiLCJwYXJ0aWFsU2lnbiIsInNpZ25WZXJzaW9uZWRUcmFuc2FjdGlvbiIsInNpZ24iLCJzaWduQWxsVHJhbnNhY3Rpb25zIiwidHhzIiwibWFwIiwidCIsInNpZ25BbGxWZXJzaW9uZWRUcmFuc2FjdGlvbnMiLCJwdWJsaWNLZXkiLCJwcml2YXRlS2V5IiwibG9hZGVkS2V5IiwiZGVmYXVsdCIsImV4aXN0c1N5bmMiLCJyZWFkRmlsZVN5bmMiLCJ0b1N0cmluZyIsImluY2x1ZGVzIiwiVWludDhBcnJheSIsImZyb20iLCJKU09OIiwicGFyc2UiLCJzcGxpdCIsInZhbCIsIk51bWJlciIsInJlcGxhY2UiLCJkZWNvZGUiLCJLZXlwYWlyIiwiZnJvbVNlY3JldEtleSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@drift-labs/sdk/lib/wallet.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/dlob/dlobIdl.json":
/*!************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/dlob/dlobIdl.json ***!
  \************************************************************/
/***/ ((module) => {

module.exports = JSON.parse('{"version":"2.0.0","name":"dlob","instructions":[],"accounts":[],"types":[{"name":"DLOBOrders","type":{"vec":{"defined":"DLOBOrder"}}},{"name":"DLOBOrder","type":{"kind":"struct","fields":[{"name":"user","type":"publicKey"},{"name":"order","type":{"defined":"Order"}}]}},{"name":"Order","type":{"kind":"struct","fields":[{"name":"slot","type":"u64"},{"name":"price","type":"u64"},{"name":"baseAssetAmount","type":"u64"},{"name":"baseAssetAmountFilled","type":"u64"},{"name":"quoteAssetAmountFilled","type":"u64"},{"name":"triggerPrice","type":"u64"},{"name":"auctionStartPrice","type":"u64"},{"name":"auctionEndPrice","type":"u64"},{"name":"maxTs","type":"i64"},{"name":"oraclePriceOffset","type":"i32"},{"name":"orderId","type":"u32"},{"name":"marketIndex","type":"u16"},{"name":"status","type":{"defined":"OrderStatus"}},{"name":"orderType","type":{"defined":"OrderType"}},{"name":"marketType","type":{"defined":"MarketType"}},{"name":"userOrderId","type":"u8"},{"name":"existingPositionDirection","type":{"defined":"PositionDirection"}},{"name":"direction","type":{"defined":"PositionDirection"}},{"name":"reduceOnly","type":"bool"},{"name":"postOnly","type":"bool"},{"name":"immediateOrCancel","type":"bool"},{"name":"triggerCondition","type":{"defined":"OrderTriggerCondition"}},{"name":"auctionDuration","type":"u8"},{"name":"padding","type":{"array":["u8",3]}}]}},{"name":"OrderStatus","type":{"kind":"enum","variants":[{"name":"Init"},{"name":"Open"},{"name":"Filled"},{"name":"Canceled"}]}},{"name":"OrderType","type":{"kind":"enum","variants":[{"name":"Market"},{"name":"Limit"},{"name":"TriggerMarket"},{"name":"TriggerLimit"},{"name":"Oracle"}]}},{"name":"OrderTriggerCondition","type":{"kind":"enum","variants":[{"name":"Above"},{"name":"Below"},{"name":"TriggeredAbove"},{"name":"TriggeredBelow"}]}},{"name":"MarketType","type":{"kind":"enum","variants":[{"name":"Spot"},{"name":"Perp"}]}},{"name":"PositionDirection","type":{"kind":"enum","variants":[{"name":"Long"},{"name":"Short"}]}}],"events":[],"errors":[]}');

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/idl/drift.json":
/*!*********************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/idl/drift.json ***!
  \*********************************************************/
/***/ ((module) => {

module.exports = JSON.parse('{"version":"2.38.0","name":"drift","instructions":[{"name":"initializeUser","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"state","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"subAccountId","type":"u16"},{"name":"name","type":{"array":["u8",32]}}]},{"name":"initializeUserStats","accounts":[{"name":"userStats","isMut":true,"isSigner":false},{"name":"state","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"initializeReferrerName","accounts":[{"name":"referrerName","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"name","type":{"array":["u8",32]}}]},{"name":"deposit","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"amount","type":"u64"},{"name":"reduceOnly","type":"bool"}]},{"name":"withdraw","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"amount","type":"u64"},{"name":"reduceOnly","type":"bool"}]},{"name":"transferDeposit","accounts":[{"name":"fromUser","isMut":true,"isSigner":false},{"name":"toUser","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarketVault","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"amount","type":"u64"}]},{"name":"placePerpOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"params","type":{"defined":"OrderParams"}}]},{"name":"cancelOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"orderId","type":{"option":"u32"}}]},{"name":"cancelOrderByUserId","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"userOrderId","type":"u8"}]},{"name":"cancelOrders","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"marketType","type":{"option":{"defined":"MarketType"}}},{"name":"marketIndex","type":{"option":"u16"}},{"name":"direction","type":{"option":{"defined":"PositionDirection"}}}]},{"name":"cancelOrdersByIds","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"orderIds","type":{"vec":"u32"}}]},{"name":"modifyOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"orderId","type":{"option":"u32"}},{"name":"modifyOrderParams","type":{"defined":"ModifyOrderParams"}}]},{"name":"modifyOrderByUserId","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"userOrderId","type":"u8"},{"name":"modifyOrderParams","type":{"defined":"ModifyOrderParams"}}]},{"name":"placeAndTakePerpOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"params","type":{"defined":"OrderParams"}},{"name":"makerOrderId","type":{"option":"u32"}}]},{"name":"placeAndMakePerpOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"taker","isMut":true,"isSigner":false},{"name":"takerStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"params","type":{"defined":"OrderParams"}},{"name":"takerOrderId","type":"u32"}]},{"name":"placeSpotOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"params","type":{"defined":"OrderParams"}}]},{"name":"placeAndTakeSpotOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"params","type":{"defined":"OrderParams"}},{"name":"fulfillmentType","type":{"option":{"defined":"SpotFulfillmentType"}}},{"name":"makerOrderId","type":{"option":"u32"}}]},{"name":"placeAndMakeSpotOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"taker","isMut":true,"isSigner":false},{"name":"takerStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"params","type":{"defined":"OrderParams"}},{"name":"takerOrderId","type":"u32"},{"name":"fulfillmentType","type":{"option":{"defined":"SpotFulfillmentType"}}}]},{"name":"placeOrders","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"params","type":{"vec":{"defined":"OrderParams"}}}]},{"name":"beginSwap","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"outSpotMarketVault","isMut":true,"isSigner":false},{"name":"inSpotMarketVault","isMut":true,"isSigner":false},{"name":"outTokenAccount","isMut":true,"isSigner":false},{"name":"inTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"instructions","isMut":false,"isSigner":false,"docs":["Instructions Sysvar for instruction introspection"]}],"args":[{"name":"inMarketIndex","type":"u16"},{"name":"outMarketIndex","type":"u16"},{"name":"amountIn","type":"u64"}]},{"name":"endSwap","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"outSpotMarketVault","isMut":true,"isSigner":false},{"name":"inSpotMarketVault","isMut":true,"isSigner":false},{"name":"outTokenAccount","isMut":true,"isSigner":false},{"name":"inTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"instructions","isMut":false,"isSigner":false,"docs":["Instructions Sysvar for instruction introspection"]}],"args":[{"name":"inMarketIndex","type":"u16"},{"name":"outMarketIndex","type":"u16"},{"name":"limitPrice","type":{"option":"u64"}},{"name":"reduceOnly","type":{"option":{"defined":"SwapReduceOnly"}}}]},{"name":"addPerpLpShares","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"nShares","type":"u64"},{"name":"marketIndex","type":"u16"}]},{"name":"removePerpLpShares","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"sharesToBurn","type":"u64"},{"name":"marketIndex","type":"u16"}]},{"name":"removePerpLpSharesInExpiringMarket","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false}],"args":[{"name":"sharesToBurn","type":"u64"},{"name":"marketIndex","type":"u16"}]},{"name":"updateUserName","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"subAccountId","type":"u16"},{"name":"name","type":{"array":["u8",32]}}]},{"name":"updateUserCustomMarginRatio","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"subAccountId","type":"u16"},{"name":"marginRatio","type":"u32"}]},{"name":"updateUserMarginTradingEnabled","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"subAccountId","type":"u16"},{"name":"marginTradingEnabled","type":"bool"}]},{"name":"updateUserDelegate","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"subAccountId","type":"u16"},{"name":"delegate","type":"publicKey"}]},{"name":"updateUserReduceOnly","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"subAccountId","type":"u16"},{"name":"reduceOnly","type":"bool"}]},{"name":"deleteUser","accounts":[{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"state","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]},{"name":"fillPerpOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"filler","isMut":true,"isSigner":false},{"name":"fillerStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false}],"args":[{"name":"orderId","type":{"option":"u32"}},{"name":"makerOrderId","type":{"option":"u32"}}]},{"name":"revertFill","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"filler","isMut":true,"isSigner":false},{"name":"fillerStats","isMut":true,"isSigner":false}],"args":[]},{"name":"fillSpotOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"filler","isMut":true,"isSigner":false},{"name":"fillerStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false}],"args":[{"name":"orderId","type":{"option":"u32"}},{"name":"fulfillmentType","type":{"option":{"defined":"SpotFulfillmentType"}}},{"name":"makerOrderId","type":{"option":"u32"}}]},{"name":"triggerOrder","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"filler","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false}],"args":[{"name":"orderId","type":"u32"}]},{"name":"forceCancelOrders","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"filler","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false}],"args":[]},{"name":"updateUserIdle","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"filler","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false}],"args":[]},{"name":"updateUserOpenOrdersCount","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"filler","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false}],"args":[]},{"name":"adminDisableUpdatePerpBidAskTwap","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false}],"args":[{"name":"disable","type":"bool"}]},{"name":"settlePnl","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"spotMarketVault","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"settleFundingPayment","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false}],"args":[]},{"name":"settleLp","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"user","isMut":true,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"settleExpiredMarket","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"liquidatePerp","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"liquidator","isMut":true,"isSigner":false},{"name":"liquidatorStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"liquidatorMaxBaseAssetAmount","type":"u64"},{"name":"limitPrice","type":{"option":"u64"}}]},{"name":"liquidateSpot","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"liquidator","isMut":true,"isSigner":false},{"name":"liquidatorStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false}],"args":[{"name":"assetMarketIndex","type":"u16"},{"name":"liabilityMarketIndex","type":"u16"},{"name":"liquidatorMaxLiabilityTransfer","type":"u128"},{"name":"limitPrice","type":{"option":"u64"}}]},{"name":"liquidateBorrowForPerpPnl","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"liquidator","isMut":true,"isSigner":false},{"name":"liquidatorStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false}],"args":[{"name":"perpMarketIndex","type":"u16"},{"name":"spotMarketIndex","type":"u16"},{"name":"liquidatorMaxLiabilityTransfer","type":"u128"},{"name":"limitPrice","type":{"option":"u64"}}]},{"name":"liquidatePerpPnlForDeposit","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"liquidator","isMut":true,"isSigner":false},{"name":"liquidatorStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false}],"args":[{"name":"perpMarketIndex","type":"u16"},{"name":"spotMarketIndex","type":"u16"},{"name":"liquidatorMaxPnlTransfer","type":"u128"},{"name":"limitPrice","type":{"option":"u64"}}]},{"name":"resolvePerpPnlDeficit","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"spotMarketIndex","type":"u16"},{"name":"perpMarketIndex","type":"u16"}]},{"name":"resolvePerpBankruptcy","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"liquidator","isMut":true,"isSigner":false},{"name":"liquidatorStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"quoteSpotMarketIndex","type":"u16"},{"name":"marketIndex","type":"u16"}]},{"name":"resolveSpotBankruptcy","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"liquidator","isMut":true,"isSigner":false},{"name":"liquidatorStats","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"settleRevenueToInsuranceFund","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"spotMarketIndex","type":"u16"}]},{"name":"updateFundingRate","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"updatePerpBidAskTwap","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"keeperStats","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[]},{"name":"updateSpotMarketCumulativeInterest","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"spotMarketVault","isMut":false,"isSigner":false}],"args":[]},{"name":"updateAmms","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"marketIndexes","type":{"array":["u16",5]}}]},{"name":"updateSpotMarketExpiry","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"expiryTs","type":"i64"}]},{"name":"updateUserQuoteAssetInsuranceStake","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":false,"isSigner":false},{"name":"insuranceFundStake","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"insuranceFundVault","isMut":true,"isSigner":false}],"args":[]},{"name":"initializeInsuranceFundStake","accounts":[{"name":"spotMarket","isMut":false,"isSigner":false},{"name":"insuranceFundStake","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"state","isMut":false,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"payer","isMut":true,"isSigner":true},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"addInsuranceFundStake","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":false,"isSigner":false},{"name":"insuranceFundStake","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"amount","type":"u64"}]},{"name":"requestRemoveInsuranceFundStake","accounts":[{"name":"spotMarket","isMut":false,"isSigner":false},{"name":"insuranceFundStake","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"insuranceFundVault","isMut":true,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"amount","type":"u64"}]},{"name":"cancelRequestRemoveInsuranceFundStake","accounts":[{"name":"spotMarket","isMut":false,"isSigner":false},{"name":"insuranceFundStake","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"insuranceFundVault","isMut":true,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"removeInsuranceFundStake","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":false,"isSigner":false},{"name":"insuranceFundStake","isMut":true,"isSigner":false},{"name":"userStats","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"initialize","accounts":[{"name":"admin","isMut":true,"isSigner":true},{"name":"state","isMut":true,"isSigner":false},{"name":"quoteAssetMint","isMut":false,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"initializeSpotMarket","accounts":[{"name":"spotMarket","isMut":true,"isSigner":false},{"name":"spotMarketMint","isMut":false,"isSigner":false},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"state","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"optimalUtilization","type":"u32"},{"name":"optimalBorrowRate","type":"u32"},{"name":"maxBorrowRate","type":"u32"},{"name":"oracleSource","type":{"defined":"OracleSource"}},{"name":"initialAssetWeight","type":"u32"},{"name":"maintenanceAssetWeight","type":"u32"},{"name":"initialLiabilityWeight","type":"u32"},{"name":"maintenanceLiabilityWeight","type":"u32"},{"name":"imfFactor","type":"u32"},{"name":"liquidatorFee","type":"u32"},{"name":"activeStatus","type":"bool"},{"name":"name","type":{"array":["u8",32]}}]},{"name":"initializeSerumFulfillmentConfig","accounts":[{"name":"baseSpotMarket","isMut":false,"isSigner":false},{"name":"quoteSpotMarket","isMut":false,"isSigner":false},{"name":"state","isMut":true,"isSigner":false},{"name":"serumProgram","isMut":false,"isSigner":false},{"name":"serumMarket","isMut":false,"isSigner":false},{"name":"serumOpenOrders","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"serumFulfillmentConfig","isMut":true,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"updateSerumFulfillmentConfigStatus","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"serumFulfillmentConfig","isMut":true,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true}],"args":[{"name":"status","type":{"defined":"SpotFulfillmentConfigStatus"}}]},{"name":"initializePhoenixFulfillmentConfig","accounts":[{"name":"baseSpotMarket","isMut":false,"isSigner":false},{"name":"quoteSpotMarket","isMut":false,"isSigner":false},{"name":"state","isMut":true,"isSigner":false},{"name":"phoenixProgram","isMut":false,"isSigner":false},{"name":"phoenixMarket","isMut":false,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"phoenixFulfillmentConfig","isMut":true,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"phoenixFulfillmentConfigStatus","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"phoenixFulfillmentConfig","isMut":true,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true}],"args":[{"name":"status","type":{"defined":"SpotFulfillmentConfigStatus"}}]},{"name":"updateSerumVault","accounts":[{"name":"state","isMut":true,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"srmVault","isMut":false,"isSigner":false}],"args":[]},{"name":"initializePerpMarket","accounts":[{"name":"admin","isMut":true,"isSigner":true},{"name":"state","isMut":true,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"ammBaseAssetReserve","type":"u128"},{"name":"ammQuoteAssetReserve","type":"u128"},{"name":"ammPeriodicity","type":"i64"},{"name":"ammPegMultiplier","type":"u128"},{"name":"oracleSource","type":{"defined":"OracleSource"}},{"name":"marginRatioInitial","type":"u32"},{"name":"marginRatioMaintenance","type":"u32"},{"name":"liquidatorFee","type":"u32"},{"name":"activeStatus","type":"bool"},{"name":"name","type":{"array":["u8",32]}}]},{"name":"deleteInitializedPerpMarket","accounts":[{"name":"admin","isMut":true,"isSigner":true},{"name":"state","isMut":true,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"}]},{"name":"moveAmmPrice","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"baseAssetReserve","type":"u128"},{"name":"quoteAssetReserve","type":"u128"},{"name":"sqrtK","type":"u128"}]},{"name":"updatePerpMarketExpiry","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"expiryTs","type":"i64"}]},{"name":"settleExpiredMarketPoolsToRevenuePool","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true},{"name":"spotMarket","isMut":true,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[]},{"name":"depositIntoPerpMarketFeePool","accounts":[{"name":"state","isMut":true,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true},{"name":"sourceVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"quoteSpotMarket","isMut":true,"isSigner":false},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"depositIntoSpotMarketRevenuePool","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"spotMarketVault","isMut":true,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"repegAmmCurve","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true}],"args":[{"name":"newPegCandidate","type":"u128"}]},{"name":"updatePerpMarketAmmOracleTwap","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true}],"args":[]},{"name":"resetPerpMarketAmmOracleTwap","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true}],"args":[]},{"name":"updateK","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false}],"args":[{"name":"sqrtK","type":"u128"}]},{"name":"updatePerpMarketMarginRatio","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"marginRatioInitial","type":"u32"},{"name":"marginRatioMaintenance","type":"u32"}]},{"name":"updatePerpMarketMaxImbalances","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"unrealizedMaxImbalance","type":"u64"},{"name":"maxRevenueWithdrawPerPeriod","type":"u64"},{"name":"quoteMaxInsurance","type":"u64"}]},{"name":"updatePerpMarketLiquidationFee","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"liquidatorFee","type":"u32"},{"name":"ifLiquidationFee","type":"u32"}]},{"name":"updateInsuranceFundUnstakingPeriod","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"insuranceFundUnstakingPeriod","type":"i64"}]},{"name":"updateSpotMarketLiquidationFee","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"liquidatorFee","type":"u32"},{"name":"ifLiquidationFee","type":"u32"}]},{"name":"updateWithdrawGuardThreshold","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"withdrawGuardThreshold","type":"u64"}]},{"name":"updateSpotMarketIfFactor","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"spotMarketIndex","type":"u16"},{"name":"userIfFactor","type":"u32"},{"name":"totalIfFactor","type":"u32"}]},{"name":"updateSpotMarketRevenueSettlePeriod","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"revenueSettlePeriod","type":"i64"}]},{"name":"updateSpotMarketStatus","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"status","type":{"defined":"MarketStatus"}}]},{"name":"updateSpotMarketAssetTier","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"assetTier","type":{"defined":"AssetTier"}}]},{"name":"updateSpotMarketMarginWeights","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"initialAssetWeight","type":"u32"},{"name":"maintenanceAssetWeight","type":"u32"},{"name":"initialLiabilityWeight","type":"u32"},{"name":"maintenanceLiabilityWeight","type":"u32"},{"name":"imfFactor","type":"u32"}]},{"name":"updateSpotMarketBorrowRate","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"optimalUtilization","type":"u32"},{"name":"optimalBorrowRate","type":"u32"},{"name":"maxBorrowRate","type":"u32"}]},{"name":"updateSpotMarketMaxTokenDeposits","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"maxTokenDeposits","type":"u64"}]},{"name":"updateSpotMarketOracle","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false}],"args":[{"name":"oracle","type":"publicKey"},{"name":"oracleSource","type":{"defined":"OracleSource"}}]},{"name":"updateSpotMarketStepSizeAndTickSize","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"stepSize","type":"u64"},{"name":"tickSize","type":"u64"}]},{"name":"updateSpotMarketMinOrderSize","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"orderSize","type":"u64"}]},{"name":"updateSpotMarketOrdersEnabled","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"ordersEnabled","type":"bool"}]},{"name":"updateSpotMarketName","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":true,"isSigner":false}],"args":[{"name":"name","type":{"array":["u8",32]}}]},{"name":"updatePerpMarketStatus","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"status","type":{"defined":"MarketStatus"}}]},{"name":"updatePerpMarketContractTier","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"contractTier","type":{"defined":"ContractTier"}}]},{"name":"updatePerpMarketImfFactor","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"imfFactor","type":"u32"},{"name":"unrealizedPnlImfFactor","type":"u32"}]},{"name":"updatePerpMarketUnrealizedAssetWeight","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"unrealizedInitialAssetWeight","type":"u32"},{"name":"unrealizedMaintenanceAssetWeight","type":"u32"}]},{"name":"updatePerpMarketConcentrationCoef","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"concentrationScale","type":"u128"}]},{"name":"updatePerpMarketCurveUpdateIntensity","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"curveUpdateIntensity","type":"u8"}]},{"name":"updatePerpMarketTargetBaseAssetAmountPerLp","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"targetBaseAssetAmountPerLp","type":"i32"}]},{"name":"updatePerpMarketPerLpBase","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"perLpBase","type":"i8"}]},{"name":"updateLpCooldownTime","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"lpCooldownTime","type":"u64"}]},{"name":"updatePerpFeeStructure","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"feeStructure","type":{"defined":"FeeStructure"}}]},{"name":"updateSpotFeeStructure","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"feeStructure","type":{"defined":"FeeStructure"}}]},{"name":"updateInitialPctToLiquidate","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"initialPctToLiquidate","type":"u16"}]},{"name":"updateLiquidationDuration","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"liquidationDuration","type":"u8"}]},{"name":"updateOracleGuardRails","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"oracleGuardRails","type":{"defined":"OracleGuardRails"}}]},{"name":"updateStateSettlementDuration","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"settlementDuration","type":"u16"}]},{"name":"updatePerpMarketOracle","accounts":[{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false},{"name":"oracle","isMut":false,"isSigner":false},{"name":"admin","isMut":false,"isSigner":true}],"args":[{"name":"oracle","type":"publicKey"},{"name":"oracleSource","type":{"defined":"OracleSource"}}]},{"name":"updatePerpMarketBaseSpread","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"baseSpread","type":"u32"}]},{"name":"updateAmmJitIntensity","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"ammJitIntensity","type":"u8"}]},{"name":"updatePerpMarketMaxSpread","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"maxSpread","type":"u32"}]},{"name":"updatePerpMarketStepSizeAndTickSize","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"stepSize","type":"u64"},{"name":"tickSize","type":"u64"}]},{"name":"updatePerpMarketName","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"name","type":{"array":["u8",32]}}]},{"name":"updatePerpMarketMinOrderSize","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"orderSize","type":"u64"}]},{"name":"updatePerpMarketMaxSlippageRatio","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"maxSlippageRatio","type":"u16"}]},{"name":"updatePerpMarketMaxFillReserveFraction","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"maxFillReserveFraction","type":"u16"}]},{"name":"updatePerpMarketMaxOpenInterest","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"perpMarket","isMut":true,"isSigner":false}],"args":[{"name":"maxOpenInterest","type":"u128"}]},{"name":"updateAdmin","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"admin","type":"publicKey"}]},{"name":"updateWhitelistMint","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"whitelistMint","type":"publicKey"}]},{"name":"updateDiscountMint","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"discountMint","type":"publicKey"}]},{"name":"updateExchangeStatus","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"exchangeStatus","type":"u8"}]},{"name":"updatePerpAuctionDuration","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"minPerpAuctionDuration","type":"u8"}]},{"name":"updateSpotAuctionDuration","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":true,"isSigner":false}],"args":[{"name":"defaultSpotAuctionDuration","type":"u8"}]},{"name":"adminRemoveInsuranceFundStake","accounts":[{"name":"admin","isMut":false,"isSigner":true},{"name":"state","isMut":false,"isSigner":false},{"name":"spotMarket","isMut":false,"isSigner":false},{"name":"insuranceFundVault","isMut":true,"isSigner":false},{"name":"driftSigner","isMut":false,"isSigner":false},{"name":"adminTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"marketIndex","type":"u16"},{"name":"amount","type":"u64"}]}],"accounts":[{"name":"PhoenixV1FulfillmentConfig","type":{"kind":"struct","fields":[{"name":"pubkey","type":"publicKey"},{"name":"phoenixProgramId","type":"publicKey"},{"name":"phoenixLogAuthority","type":"publicKey"},{"name":"phoenixMarket","type":"publicKey"},{"name":"phoenixBaseVault","type":"publicKey"},{"name":"phoenixQuoteVault","type":"publicKey"},{"name":"marketIndex","type":"u16"},{"name":"fulfillmentType","type":{"defined":"SpotFulfillmentType"}},{"name":"status","type":{"defined":"SpotFulfillmentConfigStatus"}},{"name":"padding","type":{"array":["u8",4]}}]}},{"name":"SerumV3FulfillmentConfig","type":{"kind":"struct","fields":[{"name":"pubkey","type":"publicKey"},{"name":"serumProgramId","type":"publicKey"},{"name":"serumMarket","type":"publicKey"},{"name":"serumRequestQueue","type":"publicKey"},{"name":"serumEventQueue","type":"publicKey"},{"name":"serumBids","type":"publicKey"},{"name":"serumAsks","type":"publicKey"},{"name":"serumBaseVault","type":"publicKey"},{"name":"serumQuoteVault","type":"publicKey"},{"name":"serumOpenOrders","type":"publicKey"},{"name":"serumSignerNonce","type":"u64"},{"name":"marketIndex","type":"u16"},{"name":"fulfillmentType","type":{"defined":"SpotFulfillmentType"}},{"name":"status","type":{"defined":"SpotFulfillmentConfigStatus"}},{"name":"padding","type":{"array":["u8",4]}}]}},{"name":"InsuranceFundStake","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"ifShares","type":"u128"},{"name":"lastWithdrawRequestShares","type":"u128"},{"name":"ifBase","type":"u128"},{"name":"lastValidTs","type":"i64"},{"name":"lastWithdrawRequestValue","type":"u64"},{"name":"lastWithdrawRequestTs","type":"i64"},{"name":"costBasis","type":"i64"},{"name":"marketIndex","type":"u16"},{"name":"padding","type":{"array":["u8",14]}}]}},{"name":"PerpMarket","type":{"kind":"struct","fields":[{"name":"pubkey","docs":["The perp market\'s address. It is a pda of the market index"],"type":"publicKey"},{"name":"amm","docs":["The automated market maker"],"type":{"defined":"AMM"}},{"name":"pnlPool","docs":["The market\'s pnl pool. When users settle negative pnl, the balance increases.","When users settle positive pnl, the balance decreases. Can not go negative."],"type":{"defined":"PoolBalance"}},{"name":"name","docs":["Encoded display name for the perp market e.g. SOL-PERP"],"type":{"array":["u8",32]}},{"name":"insuranceClaim","docs":["The perp market\'s claim on the insurance fund"],"type":{"defined":"InsuranceClaim"}},{"name":"unrealizedPnlMaxImbalance","docs":["The max pnl imbalance before positive pnl asset weight is discounted","pnl imbalance is the difference between long and short pnl. When it\'s greater than 0,","the amm has negative pnl and the initial asset weight for positive pnl is discounted","precision = QUOTE_PRECISION"],"type":"u64"},{"name":"expiryTs","docs":["The ts when the market will be expired. Only set if market is in reduce only mode"],"type":"i64"},{"name":"expiryPrice","docs":["The price at which positions will be settled. Only set if market is expired","precision = PRICE_PRECISION"],"type":"i64"},{"name":"nextFillRecordId","docs":["Every trade has a fill record id. This is the next id to be used"],"type":"u64"},{"name":"nextFundingRateRecordId","docs":["Every funding rate update has a record id. This is the next id to be used"],"type":"u64"},{"name":"nextCurveRecordId","docs":["Every amm k updated has a record id. This is the next id to be used"],"type":"u64"},{"name":"imfFactor","docs":["The initial margin fraction factor. Used to increase margin ratio for large positions","precision: MARGIN_PRECISION"],"type":"u32"},{"name":"unrealizedPnlImfFactor","docs":["The imf factor for unrealized pnl. Used to discount asset weight for large positive pnl","precision: MARGIN_PRECISION"],"type":"u32"},{"name":"liquidatorFee","docs":["The fee the liquidator is paid for taking over perp position","precision: LIQUIDATOR_FEE_PRECISION"],"type":"u32"},{"name":"ifLiquidationFee","docs":["The fee the insurance fund receives from liquidation","precision: LIQUIDATOR_FEE_PRECISION"],"type":"u32"},{"name":"marginRatioInitial","docs":["The margin ratio which determines how much collateral is required to open a position","e.g. margin ratio of .1 means a user must have $100 of total collateral to open a $1000 position","precision: MARGIN_PRECISION"],"type":"u32"},{"name":"marginRatioMaintenance","docs":["The margin ratio which determines when a user will be liquidated","e.g. margin ratio of .05 means a user must have $50 of total collateral to maintain a $1000 position","else they will be liquidated","precision: MARGIN_PRECISION"],"type":"u32"},{"name":"unrealizedPnlInitialAssetWeight","docs":["The initial asset weight for positive pnl. Negative pnl always has an asset weight of 1","precision: SPOT_WEIGHT_PRECISION"],"type":"u32"},{"name":"unrealizedPnlMaintenanceAssetWeight","docs":["The maintenance asset weight for positive pnl. Negative pnl always has an asset weight of 1","precision: SPOT_WEIGHT_PRECISION"],"type":"u32"},{"name":"numberOfUsersWithBase","docs":["number of users in a position (base)"],"type":"u32"},{"name":"numberOfUsers","docs":["number of users in a position (pnl) or pnl (quote)"],"type":"u32"},{"name":"marketIndex","type":"u16"},{"name":"status","docs":["Whether a market is active, reduce only, expired, etc","Affects whether users can open/close positions"],"type":{"defined":"MarketStatus"}},{"name":"contractType","docs":["Currently only Perpetual markets are supported"],"type":{"defined":"ContractType"}},{"name":"contractTier","docs":["The contract tier determines how much insurance a market can receive, with more speculative markets receiving less insurance","It also influences the order perp markets can be liquidated, with less speculative markets being liquidated first"],"type":{"defined":"ContractTier"}},{"name":"padding1","type":"bool"},{"name":"quoteSpotMarketIndex","docs":["The spot market that pnl is settled in"],"type":"u16"},{"name":"padding","type":{"array":["u8",48]}}]}},{"name":"SpotMarket","type":{"kind":"struct","fields":[{"name":"pubkey","docs":["The address of the spot market. It is a pda of the market index"],"type":"publicKey"},{"name":"oracle","docs":["The oracle used to price the markets deposits/borrows"],"type":"publicKey"},{"name":"mint","docs":["The token mint of the market"],"type":"publicKey"},{"name":"vault","docs":["The vault used to store the market\'s deposits","The amount in the vault should be equal to or greater than deposits - borrows"],"type":"publicKey"},{"name":"name","docs":["The encoded display name fo the market e.g. SOL"],"type":{"array":["u8",32]}},{"name":"historicalOracleData","type":{"defined":"HistoricalOracleData"}},{"name":"historicalIndexData","type":{"defined":"HistoricalIndexData"}},{"name":"revenuePool","docs":["Revenue the protocol has collected in this markets token","e.g. for SOL-PERP, funds can be settled in usdc and will flow into the USDC revenue pool"],"type":{"defined":"PoolBalance"}},{"name":"spotFeePool","docs":["The fees collected from swaps between this market and the quote market","Is settled to the quote markets revenue pool"],"type":{"defined":"PoolBalance"}},{"name":"insuranceFund","docs":["Details on the insurance fund covering bankruptcies in this markets token","Covers bankruptcies for borrows with this markets token and perps settling in this markets token"],"type":{"defined":"InsuranceFund"}},{"name":"totalSpotFee","docs":["The total spot fees collected for this market","precision: QUOTE_PRECISION"],"type":"u128"},{"name":"depositBalance","docs":["The sum of the scaled balances for deposits across users and pool balances","To convert to the deposit token amount, multiply by the cumulative deposit interest","precision: SPOT_BALANCE_PRECISION"],"type":"u128"},{"name":"borrowBalance","docs":["The sum of the scaled balances for borrows across users and pool balances","To convert to the borrow token amount, multiply by the cumulative borrow interest","precision: SPOT_BALANCE_PRECISION"],"type":"u128"},{"name":"cumulativeDepositInterest","docs":["The cumulative interest earned by depositors","Used to calculate the deposit token amount from the deposit balance","precision: SPOT_CUMULATIVE_INTEREST_PRECISION"],"type":"u128"},{"name":"cumulativeBorrowInterest","docs":["The cumulative interest earned by borrowers","Used to calculate the borrow token amount from the borrow balance","precision: SPOT_CUMULATIVE_INTEREST_PRECISION"],"type":"u128"},{"name":"totalSocialLoss","docs":["The total socialized loss from borrows, in the mint\'s token","precision: token mint precision"],"type":"u128"},{"name":"totalQuoteSocialLoss","docs":["The total socialized loss from borrows, in the quote market\'s token","preicision: QUOTE_PRECISION"],"type":"u128"},{"name":"withdrawGuardThreshold","docs":["no withdraw limits/guards when deposits below this threshold","precision: token mint precision"],"type":"u64"},{"name":"maxTokenDeposits","docs":["The max amount of token deposits in this market","0 if there is no limit","precision: token mint precision"],"type":"u64"},{"name":"depositTokenTwap","docs":["24hr average of deposit token amount","precision: token mint precision"],"type":"u64"},{"name":"borrowTokenTwap","docs":["24hr average of borrow token amount","precision: token mint precision"],"type":"u64"},{"name":"utilizationTwap","docs":["24hr average of utilization","which is borrow amount over token amount","precision: SPOT_UTILIZATION_PRECISION"],"type":"u64"},{"name":"lastInterestTs","docs":["Last time the cumulative deposit and borrow interest was updated"],"type":"u64"},{"name":"lastTwapTs","docs":["Last time the deposit/borrow/utilization averages were updated"],"type":"u64"},{"name":"expiryTs","docs":["The time the market is set to expire. Only set if market is in reduce only mode"],"type":"i64"},{"name":"orderStepSize","docs":["Spot orders must be a multiple of the step size","precision: token mint precision"],"type":"u64"},{"name":"orderTickSize","docs":["Spot orders must be a multiple of the tick size","precision: PRICE_PRECISION"],"type":"u64"},{"name":"minOrderSize","docs":["The minimum order size","precision: token mint precision"],"type":"u64"},{"name":"maxPositionSize","docs":["The maximum spot position size","if the limit is 0, there is no limit","precision: token mint precision"],"type":"u64"},{"name":"nextFillRecordId","docs":["Every spot trade has a fill record id. This is the next id to use"],"type":"u64"},{"name":"nextDepositRecordId","docs":["Every deposit has a deposit record id. This is the next id to use"],"type":"u64"},{"name":"initialAssetWeight","docs":["The initial asset weight used to calculate a deposits contribution to a users initial total collateral","e.g. if the asset weight is .8, $100 of deposits contributes $80 to the users initial total collateral","precision: SPOT_WEIGHT_PRECISION"],"type":"u32"},{"name":"maintenanceAssetWeight","docs":["The maintenance asset weight used to calculate a deposits contribution to a users maintenance total collateral","e.g. if the asset weight is .9, $100 of deposits contributes $90 to the users maintenance total collateral","precision: SPOT_WEIGHT_PRECISION"],"type":"u32"},{"name":"initialLiabilityWeight","docs":["The initial liability weight used to calculate a borrows contribution to a users initial margin requirement","e.g. if the liability weight is .9, $100 of borrows contributes $90 to the users initial margin requirement","precision: SPOT_WEIGHT_PRECISION"],"type":"u32"},{"name":"maintenanceLiabilityWeight","docs":["The maintenance liability weight used to calculate a borrows contribution to a users maintenance margin requirement","e.g. if the liability weight is .8, $100 of borrows contributes $80 to the users maintenance margin requirement","precision: SPOT_WEIGHT_PRECISION"],"type":"u32"},{"name":"imfFactor","docs":["The initial margin fraction factor. Used to increase liability weight/decrease asset weight for large positions","precision: MARGIN_PRECISION"],"type":"u32"},{"name":"liquidatorFee","docs":["The fee the liquidator is paid for taking over borrow/deposit","precision: LIQUIDATOR_FEE_PRECISION"],"type":"u32"},{"name":"ifLiquidationFee","docs":["The fee the insurance fund receives from liquidation","precision: LIQUIDATOR_FEE_PRECISION"],"type":"u32"},{"name":"optimalUtilization","docs":["The optimal utilization rate for this market.","Used to determine the markets borrow rate","precision: SPOT_UTILIZATION_PRECISION"],"type":"u32"},{"name":"optimalBorrowRate","docs":["The borrow rate for this market when the market has optimal utilization","precision: SPOT_RATE_PRECISION"],"type":"u32"},{"name":"maxBorrowRate","docs":["The borrow rate for this market when the market has 1000 utilization","precision: SPOT_RATE_PRECISION"],"type":"u32"},{"name":"decimals","docs":["The market\'s token mint\'s decimals. To from decimals to a precision, 10^decimals"],"type":"u32"},{"name":"marketIndex","type":"u16"},{"name":"ordersEnabled","docs":["Whether or not spot trading is enabled"],"type":"bool"},{"name":"oracleSource","type":{"defined":"OracleSource"}},{"name":"status","type":{"defined":"MarketStatus"}},{"name":"assetTier","docs":["The asset tier affects how a deposit can be used as collateral and the priority for a borrow being liquidated"],"type":{"defined":"AssetTier"}},{"name":"padding1","type":{"array":["u8",6]}},{"name":"flashLoanAmount","docs":["For swaps, the amount of token loaned out in the begin_swap ix","precision: token mint precision"],"type":"u64"},{"name":"flashLoanInitialTokenAmount","docs":["For swaps, the amount in the users token account in the begin_swap ix","Used to calculate how much of the token left the system in end_swap ix","precision: token mint precision"],"type":"u64"},{"name":"totalSwapFee","docs":["The total fees received from swaps","precision: token mint precision"],"type":"u64"},{"name":"padding","type":{"array":["u8",56]}}]}},{"name":"State","type":{"kind":"struct","fields":[{"name":"admin","type":"publicKey"},{"name":"whitelistMint","type":"publicKey"},{"name":"discountMint","type":"publicKey"},{"name":"signer","type":"publicKey"},{"name":"srmVault","type":"publicKey"},{"name":"perpFeeStructure","type":{"defined":"FeeStructure"}},{"name":"spotFeeStructure","type":{"defined":"FeeStructure"}},{"name":"oracleGuardRails","type":{"defined":"OracleGuardRails"}},{"name":"numberOfAuthorities","type":"u64"},{"name":"numberOfSubAccounts","type":"u64"},{"name":"lpCooldownTime","type":"u64"},{"name":"liquidationMarginBufferRatio","type":"u32"},{"name":"settlementDuration","type":"u16"},{"name":"numberOfMarkets","type":"u16"},{"name":"numberOfSpotMarkets","type":"u16"},{"name":"signerNonce","type":"u8"},{"name":"minPerpAuctionDuration","type":"u8"},{"name":"defaultMarketOrderTimeInForce","type":"u8"},{"name":"defaultSpotAuctionDuration","type":"u8"},{"name":"exchangeStatus","type":"u8"},{"name":"liquidationDuration","type":"u8"},{"name":"initialPctToLiquidate","type":"u16"},{"name":"padding","type":{"array":["u8",14]}}]}},{"name":"User","type":{"kind":"struct","fields":[{"name":"authority","docs":["The owner/authority of the account"],"type":"publicKey"},{"name":"delegate","docs":["An addresses that can control the account on the authority\'s behalf. Has limited power, cant withdraw"],"type":"publicKey"},{"name":"name","docs":["Encoded display name e.g. \\"toly\\""],"type":{"array":["u8",32]}},{"name":"spotPositions","docs":["The user\'s spot positions"],"type":{"array":[{"defined":"SpotPosition"},8]}},{"name":"perpPositions","docs":["The user\'s perp positions"],"type":{"array":[{"defined":"PerpPosition"},8]}},{"name":"orders","docs":["The user\'s orders"],"type":{"array":[{"defined":"Order"},32]}},{"name":"lastAddPerpLpSharesTs","docs":["The last time the user added perp lp positions"],"type":"i64"},{"name":"totalDeposits","docs":["The total values of deposits the user has made","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"totalWithdraws","docs":["The total values of withdrawals the user has made","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"totalSocialLoss","docs":["The total socialized loss the users has incurred upon the protocol","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"settledPerpPnl","docs":["Fees (taker fees, maker rebate, referrer reward, filler reward) and pnl for perps","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"cumulativeSpotFees","docs":["Fees (taker fees, maker rebate, filler reward) for spot","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"cumulativePerpFunding","docs":["Cumulative funding paid/received for perps","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"liquidationMarginFreed","docs":["The amount of margin freed during liquidation. Used to force the liquidation to occur over a period of time","Defaults to zero when not being liquidated","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"lastActiveSlot","docs":["The last slot a user was active. Used to determine if a user is idle"],"type":"u64"},{"name":"nextOrderId","docs":["Every user order has an order id. This is the next order id to be used"],"type":"u32"},{"name":"maxMarginRatio","docs":["Custom max initial margin ratio for the user"],"type":"u32"},{"name":"nextLiquidationId","docs":["The next liquidation id to be used for user"],"type":"u16"},{"name":"subAccountId","docs":["The sub account id for this user"],"type":"u16"},{"name":"status","docs":["Whether the user is active, being liquidated or bankrupt"],"type":{"defined":"UserStatus"}},{"name":"isMarginTradingEnabled","docs":["Whether the user has enabled margin trading"],"type":"bool"},{"name":"idle","docs":["User is idle if they haven\'t interacted with the protocol in 1 week and they have no orders, perp positions or borrows","Off-chain keeper bots can ignore users that are idle"],"type":"bool"},{"name":"openOrders","docs":["number of open orders"],"type":"u8"},{"name":"hasOpenOrder","docs":["Whether or not user has open order"],"type":"bool"},{"name":"openAuctions","docs":["number of open orders with auction"],"type":"u8"},{"name":"hasOpenAuction","docs":["Whether or not user has open order with auction"],"type":"bool"},{"name":"padding","type":{"array":["u8",21]}}]}},{"name":"UserStats","type":{"kind":"struct","fields":[{"name":"authority","docs":["The authority for all of a users sub accounts"],"type":"publicKey"},{"name":"referrer","docs":["The address that referred this user"],"type":"publicKey"},{"name":"fees","docs":["Stats on the fees paid by the user"],"type":{"defined":"UserFees"}},{"name":"nextEpochTs","docs":["The timestamp of the next epoch","Epoch is used to limit referrer rewards earned in single epoch"],"type":"i64"},{"name":"makerVolume30d","docs":["Rolling 30day maker volume for user","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"takerVolume30d","docs":["Rolling 30day taker volume for user","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"fillerVolume30d","docs":["Rolling 30day filler volume for user","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"lastMakerVolume30dTs","docs":["last time the maker volume was updated"],"type":"i64"},{"name":"lastTakerVolume30dTs","docs":["last time the taker volume was updated"],"type":"i64"},{"name":"lastFillerVolume30dTs","docs":["last time the filler volume was updated"],"type":"i64"},{"name":"ifStakedQuoteAssetAmount","docs":["The amount of tokens staked in the quote spot markets if"],"type":"u64"},{"name":"numberOfSubAccounts","docs":["The current number of sub accounts"],"type":"u16"},{"name":"numberOfSubAccountsCreated","docs":["The number of sub accounts created. Can be greater than the number of sub accounts if user","has deleted sub accounts"],"type":"u16"},{"name":"isReferrer","docs":["Whether the user is a referrer. Sub account 0 can not be deleted if user is a referrer"],"type":"bool"},{"name":"disableUpdatePerpBidAskTwap","type":"bool"},{"name":"padding","type":{"array":["u8",50]}}]}},{"name":"ReferrerName","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"user","type":"publicKey"},{"name":"userStats","type":"publicKey"},{"name":"name","type":{"array":["u8",32]}}]}}],"types":[{"name":"OrderParams","type":{"kind":"struct","fields":[{"name":"orderType","type":{"defined":"OrderType"}},{"name":"marketType","type":{"defined":"MarketType"}},{"name":"direction","type":{"defined":"PositionDirection"}},{"name":"userOrderId","type":"u8"},{"name":"baseAssetAmount","type":"u64"},{"name":"price","type":"u64"},{"name":"marketIndex","type":"u16"},{"name":"reduceOnly","type":"bool"},{"name":"postOnly","type":{"defined":"PostOnlyParam"}},{"name":"immediateOrCancel","type":"bool"},{"name":"maxTs","type":{"option":"i64"}},{"name":"triggerPrice","type":{"option":"u64"}},{"name":"triggerCondition","type":{"defined":"OrderTriggerCondition"}},{"name":"oraclePriceOffset","type":{"option":"i32"}},{"name":"auctionDuration","type":{"option":"u8"}},{"name":"auctionStartPrice","type":{"option":"i64"}},{"name":"auctionEndPrice","type":{"option":"i64"}}]}},{"name":"ModifyOrderParams","type":{"kind":"struct","fields":[{"name":"direction","type":{"option":{"defined":"PositionDirection"}}},{"name":"baseAssetAmount","type":{"option":"u64"}},{"name":"price","type":{"option":"u64"}},{"name":"reduceOnly","type":{"option":"bool"}},{"name":"postOnly","type":{"option":{"defined":"PostOnlyParam"}}},{"name":"immediateOrCancel","type":{"option":"bool"}},{"name":"maxTs","type":{"option":"i64"}},{"name":"triggerPrice","type":{"option":"u64"}},{"name":"triggerCondition","type":{"option":{"defined":"OrderTriggerCondition"}}},{"name":"oraclePriceOffset","type":{"option":"i32"}},{"name":"auctionDuration","type":{"option":"u8"}},{"name":"auctionStartPrice","type":{"option":"i64"}},{"name":"auctionEndPrice","type":{"option":"i64"}},{"name":"policy","type":{"option":{"defined":"ModifyOrderPolicy"}}}]}},{"name":"LiquidatePerpRecord","type":{"kind":"struct","fields":[{"name":"marketIndex","type":"u16"},{"name":"oraclePrice","type":"i64"},{"name":"baseAssetAmount","type":"i64"},{"name":"quoteAssetAmount","type":"i64"},{"name":"lpShares","type":"u64"},{"name":"fillRecordId","type":"u64"},{"name":"userOrderId","type":"u32"},{"name":"liquidatorOrderId","type":"u32"},{"name":"liquidatorFee","type":"u64"},{"name":"ifFee","type":"u64"}]}},{"name":"LiquidateSpotRecord","type":{"kind":"struct","fields":[{"name":"assetMarketIndex","type":"u16"},{"name":"assetPrice","type":"i64"},{"name":"assetTransfer","type":"u128"},{"name":"liabilityMarketIndex","type":"u16"},{"name":"liabilityPrice","type":"i64"},{"name":"liabilityTransfer","type":"u128"},{"name":"ifFee","type":"u64"}]}},{"name":"LiquidateBorrowForPerpPnlRecord","type":{"kind":"struct","fields":[{"name":"perpMarketIndex","type":"u16"},{"name":"marketOraclePrice","type":"i64"},{"name":"pnlTransfer","type":"u128"},{"name":"liabilityMarketIndex","type":"u16"},{"name":"liabilityPrice","type":"i64"},{"name":"liabilityTransfer","type":"u128"}]}},{"name":"LiquidatePerpPnlForDepositRecord","type":{"kind":"struct","fields":[{"name":"perpMarketIndex","type":"u16"},{"name":"marketOraclePrice","type":"i64"},{"name":"pnlTransfer","type":"u128"},{"name":"assetMarketIndex","type":"u16"},{"name":"assetPrice","type":"i64"},{"name":"assetTransfer","type":"u128"}]}},{"name":"PerpBankruptcyRecord","type":{"kind":"struct","fields":[{"name":"marketIndex","type":"u16"},{"name":"pnl","type":"i128"},{"name":"ifPayment","type":"u128"},{"name":"clawbackUser","type":{"option":"publicKey"}},{"name":"clawbackUserPayment","type":{"option":"u128"}},{"name":"cumulativeFundingRateDelta","type":"i128"}]}},{"name":"SpotBankruptcyRecord","type":{"kind":"struct","fields":[{"name":"marketIndex","type":"u16"},{"name":"borrowAmount","type":"u128"},{"name":"ifPayment","type":"u128"},{"name":"cumulativeDepositInterestDelta","type":"u128"}]}},{"name":"HistoricalOracleData","type":{"kind":"struct","fields":[{"name":"lastOraclePrice","docs":["precision: PRICE_PRECISION"],"type":"i64"},{"name":"lastOracleConf","docs":["precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastOracleDelay","type":"i64"},{"name":"lastOraclePriceTwap","docs":["precision: PRICE_PRECISION"],"type":"i64"},{"name":"lastOraclePriceTwap5min","docs":["precision: PRICE_PRECISION"],"type":"i64"},{"name":"lastOraclePriceTwapTs","type":"i64"}]}},{"name":"HistoricalIndexData","type":{"kind":"struct","fields":[{"name":"lastIndexBidPrice","docs":["precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastIndexAskPrice","docs":["precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastIndexPriceTwap","docs":["precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastIndexPriceTwap5min","docs":["precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastIndexPriceTwapTs","type":"i64"}]}},{"name":"InsuranceClaim","type":{"kind":"struct","fields":[{"name":"revenueWithdrawSinceLastSettle","docs":["The amount of revenue last settled","Positive if funds left the perp market,","negative if funds were pulled into the perp market","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"maxRevenueWithdrawPerPeriod","docs":["The max amount of revenue that can be withdrawn per period","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"quoteMaxInsurance","docs":["The max amount of insurance that perp market can use to resolve bankruptcy and pnl deficits","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"quoteSettledInsurance","docs":["The amount of insurance that has been used to resolve bankruptcy and pnl deficits","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"lastRevenueWithdrawTs","docs":["The last time revenue was settled in/out of market"],"type":"i64"}]}},{"name":"PoolBalance","type":{"kind":"struct","fields":[{"name":"scaledBalance","docs":["To get the pool\'s token amount, you must multiply the scaled balance by the market\'s cumulative","deposit interest","precision: SPOT_BALANCE_PRECISION"],"type":"u128"},{"name":"marketIndex","docs":["The spot market the pool is for"],"type":"u16"},{"name":"padding","type":{"array":["u8",6]}}]}},{"name":"AMM","type":{"kind":"struct","fields":[{"name":"oracle","docs":["oracle price data public key"],"type":"publicKey"},{"name":"historicalOracleData","docs":["stores historically witnessed oracle data"],"type":{"defined":"HistoricalOracleData"}},{"name":"baseAssetAmountPerLp","docs":["accumulated base asset amount since inception per lp share"],"type":"i128"},{"name":"quoteAssetAmountPerLp","docs":["accumulated quote asset amount since inception per lp share"],"type":"i128"},{"name":"feePool","docs":["partition of fees from perp market trading moved from pnl settlements"],"type":{"defined":"PoolBalance"}},{"name":"baseAssetReserve","docs":["`x` reserves for constant product mm formula (x * y = k)"],"type":"u128"},{"name":"quoteAssetReserve","docs":["`y` reserves for constant product mm formula (x * y = k)"],"type":"u128"},{"name":"concentrationCoef","docs":["determines how close the min/max base asset reserve sit vs base reserves","allow for decreasing slippage without increasing liquidity and v.v."],"type":"u128"},{"name":"minBaseAssetReserve","docs":["minimum base_asset_reserve allowed before AMM is unavailable"],"type":"u128"},{"name":"maxBaseAssetReserve","docs":["maximum base_asset_reserve allowed before AMM is unavailable"],"type":"u128"},{"name":"sqrtK","docs":["`sqrt(k)` in constant product mm formula (x * y = k). stored to avoid drift caused by integer math issues"],"type":"u128"},{"name":"pegMultiplier","docs":["normalizing numerical factor for y, its use offers lowest slippage in cp-curve when market is balanced"],"type":"u128"},{"name":"terminalQuoteAssetReserve","docs":["y when market is balanced. stored to save computation"],"type":"u128"},{"name":"baseAssetAmountLong","docs":["tracks number of total longs in market (regardless of counterparty)"],"type":"i128"},{"name":"baseAssetAmountShort","docs":["tracks number of total shorts in market (regardless of counterparty)"],"type":"i128"},{"name":"baseAssetAmountWithAmm","docs":["tracks net position (longs-shorts) in market with AMM as counterparty"],"type":"i128"},{"name":"baseAssetAmountWithUnsettledLp","docs":["tracks net position (longs-shorts) in market with LPs as counterparty"],"type":"i128"},{"name":"maxOpenInterest","docs":["max allowed open interest, blocks trades that breach this value"],"type":"u128"},{"name":"quoteAssetAmount","docs":["sum of all user\'s perp quote_asset_amount in market"],"type":"i128"},{"name":"quoteEntryAmountLong","docs":["sum of all long user\'s quote_entry_amount in market"],"type":"i128"},{"name":"quoteEntryAmountShort","docs":["sum of all short user\'s quote_entry_amount in market"],"type":"i128"},{"name":"quoteBreakEvenAmountLong","docs":["sum of all long user\'s quote_break_even_amount in market"],"type":"i128"},{"name":"quoteBreakEvenAmountShort","docs":["sum of all short user\'s quote_break_even_amount in market"],"type":"i128"},{"name":"userLpShares","docs":["total user lp shares of sqrt_k (protocol owned liquidity = sqrt_k - last_funding_rate)"],"type":"u128"},{"name":"lastFundingRate","docs":["last funding rate in this perp market (unit is quote per base)"],"type":"i64"},{"name":"lastFundingRateLong","docs":["last funding rate for longs in this perp market (unit is quote per base)"],"type":"i64"},{"name":"lastFundingRateShort","docs":["last funding rate for shorts in this perp market (unit is quote per base)"],"type":"i64"},{"name":"last24hAvgFundingRate","docs":["estimate of last 24h of funding rate perp market (unit is quote per base)"],"type":"i64"},{"name":"totalFee","docs":["total fees collected by this perp market"],"type":"i128"},{"name":"totalMmFee","docs":["total fees collected by the vAMM\'s bid/ask spread"],"type":"i128"},{"name":"totalExchangeFee","docs":["total fees collected by exchange fee schedule"],"type":"u128"},{"name":"totalFeeMinusDistributions","docs":["total fees minus any recognized upnl and pool withdraws"],"type":"i128"},{"name":"totalFeeWithdrawn","docs":["sum of all fees from fee pool withdrawn to revenue pool"],"type":"u128"},{"name":"totalLiquidationFee","docs":["all fees collected by market for liquidations"],"type":"u128"},{"name":"cumulativeFundingRateLong","docs":["accumulated funding rate for longs since inception in market"],"type":"i128"},{"name":"cumulativeFundingRateShort","docs":["accumulated funding rate for shorts since inception in market"],"type":"i128"},{"name":"totalSocialLoss","docs":["accumulated social loss paid by users since inception in market"],"type":"u128"},{"name":"askBaseAssetReserve","docs":["transformed base_asset_reserve for users going long"],"type":"u128"},{"name":"askQuoteAssetReserve","docs":["transformed quote_asset_reserve for users going long"],"type":"u128"},{"name":"bidBaseAssetReserve","docs":["transformed base_asset_reserve for users going short"],"type":"u128"},{"name":"bidQuoteAssetReserve","docs":["transformed quote_asset_reserve for users going short"],"type":"u128"},{"name":"lastOracleNormalisedPrice","docs":["the last seen oracle price partially shrunk toward the amm reserve price","precision: PRICE_PRECISION"],"type":"i64"},{"name":"lastOracleReservePriceSpreadPct","docs":["the gap between the oracle price and the reserve price = y * peg_multiplier / x"],"type":"i64"},{"name":"lastBidPriceTwap","docs":["average estimate of bid price over funding_period","precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastAskPriceTwap","docs":["average estimate of ask price over funding_period","precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastMarkPriceTwap","docs":["average estimate of (bid+ask)/2 price over funding_period","precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastMarkPriceTwap5min","docs":["average estimate of (bid+ask)/2 price over FIVE_MINUTES"],"type":"u64"},{"name":"lastUpdateSlot","docs":["the last blockchain slot the amm was updated"],"type":"u64"},{"name":"lastOracleConfPct","docs":["the pct size of the oracle confidence interval","precision: PERCENTAGE_PRECISION"],"type":"u64"},{"name":"netRevenueSinceLastFunding","docs":["the total_fee_minus_distribution change since the last funding update","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"lastFundingRateTs","docs":["the last funding rate update unix_timestamp"],"type":"i64"},{"name":"fundingPeriod","docs":["the peridocity of the funding rate updates"],"type":"i64"},{"name":"orderStepSize","docs":["the base step size (increment) of orders","precision: BASE_PRECISION"],"type":"u64"},{"name":"orderTickSize","docs":["the price tick size of orders","precision: PRICE_PRECISION"],"type":"u64"},{"name":"minOrderSize","docs":["the minimum base size of an order","precision: BASE_PRECISION"],"type":"u64"},{"name":"maxPositionSize","docs":["the max base size a single user can have","precision: BASE_PRECISION"],"type":"u64"},{"name":"volume24h","docs":["estimated total of volume in market","QUOTE_PRECISION"],"type":"u64"},{"name":"longIntensityVolume","docs":["the volume intensity of long fills against AMM"],"type":"u64"},{"name":"shortIntensityVolume","docs":["the volume intensity of short fills against AMM"],"type":"u64"},{"name":"lastTradeTs","docs":["the blockchain unix timestamp at the time of the last trade"],"type":"i64"},{"name":"markStd","docs":["estimate of standard deviation of the fill (mark) prices","precision: PRICE_PRECISION"],"type":"u64"},{"name":"oracleStd","docs":["estimate of standard deviation of the oracle price at each update","precision: PRICE_PRECISION"],"type":"u64"},{"name":"lastMarkPriceTwapTs","docs":["the last unix_timestamp the mark twap was updated"],"type":"i64"},{"name":"baseSpread","docs":["the minimum spread the AMM can quote. also used as step size for some spread logic increases."],"type":"u32"},{"name":"maxSpread","docs":["the maximum spread the AMM can quote"],"type":"u32"},{"name":"longSpread","docs":["the spread for asks vs the reserve price"],"type":"u32"},{"name":"shortSpread","docs":["the spread for bids vs the reserve price"],"type":"u32"},{"name":"longIntensityCount","docs":["the count intensity of long fills against AMM"],"type":"u32"},{"name":"shortIntensityCount","docs":["the count intensity of short fills against AMM"],"type":"u32"},{"name":"maxFillReserveFraction","docs":["the fraction of total available liquidity a single fill on the AMM can consume"],"type":"u16"},{"name":"maxSlippageRatio","docs":["the maximum slippage a single fill on the AMM can push"],"type":"u16"},{"name":"curveUpdateIntensity","docs":["the update intensity of AMM formulaic updates (adjusting k). 0-100"],"type":"u8"},{"name":"ammJitIntensity","docs":["the jit intensity of AMM. larger intensity means larger participation in jit. 0 means no jit participation.","(0, 100] is intensity for protocol-owned AMM. (100, 200] is intensity for user LP-owned AMM."],"type":"u8"},{"name":"oracleSource","docs":["the oracle provider information. used to decode/scale the oracle public key"],"type":{"defined":"OracleSource"}},{"name":"lastOracleValid","docs":["tracks whether the oracle was considered valid at the last AMM update"],"type":"bool"},{"name":"targetBaseAssetAmountPerLp","docs":["the target value for `base_asset_amount_per_lp`, used during AMM JIT with LP split","precision: BASE_PRECISION"],"type":"i32"},{"name":"perLpBase","docs":["expo for unit of per_lp, base 10 (if per_lp_base=X, then per_lp unit is 10^X)"],"type":"i8"},{"name":"padding1","type":"u8"},{"name":"padding2","type":"u16"},{"name":"totalFeeEarnedPerLp","type":"u64"},{"name":"padding","type":{"array":["u8",32]}}]}},{"name":"InsuranceFund","type":{"kind":"struct","fields":[{"name":"vault","type":"publicKey"},{"name":"totalShares","type":"u128"},{"name":"userShares","type":"u128"},{"name":"sharesBase","type":"u128"},{"name":"unstakingPeriod","type":"i64"},{"name":"lastRevenueSettleTs","type":"i64"},{"name":"revenueSettlePeriod","type":"i64"},{"name":"totalFactor","type":"u32"},{"name":"userFactor","type":"u32"}]}},{"name":"OracleGuardRails","type":{"kind":"struct","fields":[{"name":"priceDivergence","type":{"defined":"PriceDivergenceGuardRails"}},{"name":"validity","type":{"defined":"ValidityGuardRails"}}]}},{"name":"PriceDivergenceGuardRails","type":{"kind":"struct","fields":[{"name":"markOraclePercentDivergence","type":"u64"},{"name":"oracleTwap5minPercentDivergence","type":"u64"}]}},{"name":"ValidityGuardRails","type":{"kind":"struct","fields":[{"name":"slotsBeforeStaleForAmm","type":"i64"},{"name":"slotsBeforeStaleForMargin","type":"i64"},{"name":"confidenceIntervalMaxSize","type":"u64"},{"name":"tooVolatileRatio","type":"i64"}]}},{"name":"FeeStructure","type":{"kind":"struct","fields":[{"name":"feeTiers","type":{"array":[{"defined":"FeeTier"},10]}},{"name":"fillerRewardStructure","type":{"defined":"OrderFillerRewardStructure"}},{"name":"referrerRewardEpochUpperBound","type":"u64"},{"name":"flatFillerFee","type":"u64"}]}},{"name":"FeeTier","type":{"kind":"struct","fields":[{"name":"feeNumerator","type":"u32"},{"name":"feeDenominator","type":"u32"},{"name":"makerRebateNumerator","type":"u32"},{"name":"makerRebateDenominator","type":"u32"},{"name":"referrerRewardNumerator","type":"u32"},{"name":"referrerRewardDenominator","type":"u32"},{"name":"refereeFeeNumerator","type":"u32"},{"name":"refereeFeeDenominator","type":"u32"}]}},{"name":"OrderFillerRewardStructure","type":{"kind":"struct","fields":[{"name":"rewardNumerator","type":"u32"},{"name":"rewardDenominator","type":"u32"},{"name":"timeBasedRewardLowerBound","type":"u128"}]}},{"name":"UserFees","type":{"kind":"struct","fields":[{"name":"totalFeePaid","docs":["Total taker fee paid","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"totalFeeRebate","docs":["Total maker fee rebate","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"totalTokenDiscount","docs":["Total discount from holding token","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"totalRefereeDiscount","docs":["Total discount from being referred","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"totalReferrerReward","docs":["Total reward to referrer","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"currentEpochReferrerReward","docs":["Total reward to referrer this epoch","precision: QUOTE_PRECISION"],"type":"u64"}]}},{"name":"SpotPosition","type":{"kind":"struct","fields":[{"name":"scaledBalance","docs":["The scaled balance of the position. To get the token amount, multiply by the cumulative deposit/borrow","interest of corresponding market.","precision: SPOT_BALANCE_PRECISION"],"type":"u64"},{"name":"openBids","docs":["How many spot bids the user has open","precision: token mint precision"],"type":"i64"},{"name":"openAsks","docs":["How many spot asks the user has open","precision: token mint precision"],"type":"i64"},{"name":"cumulativeDeposits","docs":["The cumulative deposits/borrows a user has made into a market","precision: token mint precision"],"type":"i64"},{"name":"marketIndex","docs":["The market index of the corresponding spot market"],"type":"u16"},{"name":"balanceType","docs":["Whether the position is deposit or borrow"],"type":{"defined":"SpotBalanceType"}},{"name":"openOrders","docs":["Number of open orders"],"type":"u8"},{"name":"padding","type":{"array":["u8",4]}}]}},{"name":"PerpPosition","type":{"kind":"struct","fields":[{"name":"lastCumulativeFundingRate","docs":["The perp market\'s last cumulative funding rate. Used to calculate the funding payment owed to user","precision: FUNDING_RATE_PRECISION"],"type":"i64"},{"name":"baseAssetAmount","docs":["the size of the users perp position","precision: BASE_PRECISION"],"type":"i64"},{"name":"quoteAssetAmount","docs":["Used to calculate the users pnl. Upon entry, is equal to base_asset_amount * avg entry price - fees","Updated when the user open/closes position or settles pnl. Includes fees/funding","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"quoteBreakEvenAmount","docs":["The amount of quote the user would need to exit their position at to break even","Updated when the user open/closes position or settles pnl. Includes fees/funding","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"quoteEntryAmount","docs":["The amount quote the user entered the position with. Equal to base asset amount * avg entry price","Updated when the user open/closes position. Excludes fees/funding","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"openBids","docs":["The amount of open bids the user has in this perp market","precision: BASE_PRECISION"],"type":"i64"},{"name":"openAsks","docs":["The amount of open asks the user has in this perp market","precision: BASE_PRECISION"],"type":"i64"},{"name":"settledPnl","docs":["The amount of pnl settled in this market since opening the position","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"lpShares","docs":["The number of lp (liquidity provider) shares the user has in this perp market","LP shares allow users to provide liquidity via the AMM","precision: BASE_PRECISION"],"type":"u64"},{"name":"lastBaseAssetAmountPerLp","docs":["The last base asset amount per lp the amm had","Used to settle the users lp position","precision: BASE_PRECISION"],"type":"i64"},{"name":"lastQuoteAssetAmountPerLp","docs":["The last quote asset amount per lp the amm had","Used to settle the users lp position","precision: QUOTE_PRECISION"],"type":"i64"},{"name":"remainderBaseAssetAmount","docs":["Settling LP position can lead to a small amount of base asset being left over smaller than step size","This records that remainder so it can be settled later on","precision: BASE_PRECISION"],"type":"i32"},{"name":"marketIndex","docs":["The market index for the perp market"],"type":"u16"},{"name":"openOrders","docs":["The number of open orders"],"type":"u8"},{"name":"perLpBase","type":"i8"}]}},{"name":"Order","type":{"kind":"struct","fields":[{"name":"slot","docs":["The slot the order was placed"],"type":"u64"},{"name":"price","docs":["The limit price for the order (can be 0 for market orders)","For orders with an auction, this price isn\'t used until the auction is complete","precision: PRICE_PRECISION"],"type":"u64"},{"name":"baseAssetAmount","docs":["The size of the order","precision for perps: BASE_PRECISION","precision for spot: token mint precision"],"type":"u64"},{"name":"baseAssetAmountFilled","docs":["The amount of the order filled","precision for perps: BASE_PRECISION","precision for spot: token mint precision"],"type":"u64"},{"name":"quoteAssetAmountFilled","docs":["The amount of quote filled for the order","precision: QUOTE_PRECISION"],"type":"u64"},{"name":"triggerPrice","docs":["At what price the order will be triggered. Only relevant for trigger orders","precision: PRICE_PRECISION"],"type":"u64"},{"name":"auctionStartPrice","docs":["The start price for the auction. Only relevant for market/oracle orders","precision: PRICE_PRECISION"],"type":"i64"},{"name":"auctionEndPrice","docs":["The end price for the auction. Only relevant for market/oracle orders","precision: PRICE_PRECISION"],"type":"i64"},{"name":"maxTs","docs":["The time when the order will expire"],"type":"i64"},{"name":"oraclePriceOffset","docs":["If set, the order limit price is the oracle price + this offset","precision: PRICE_PRECISION"],"type":"i32"},{"name":"orderId","docs":["The id for the order. Each users has their own order id space"],"type":"u32"},{"name":"marketIndex","docs":["The perp/spot market index"],"type":"u16"},{"name":"status","docs":["Whether the order is open or unused"],"type":{"defined":"OrderStatus"}},{"name":"orderType","docs":["The type of order"],"type":{"defined":"OrderType"}},{"name":"marketType","docs":["Whether market is spot or perp"],"type":{"defined":"MarketType"}},{"name":"userOrderId","docs":["User generated order id. Can make it easier to place/cancel orders"],"type":"u8"},{"name":"existingPositionDirection","docs":["What the users position was when the order was placed"],"type":{"defined":"PositionDirection"}},{"name":"direction","docs":["Whether the user is going long or short. LONG = bid, SHORT = ask"],"type":{"defined":"PositionDirection"}},{"name":"reduceOnly","docs":["Whether the order is allowed to only reduce position size"],"type":"bool"},{"name":"postOnly","docs":["Whether the order must be a maker"],"type":"bool"},{"name":"immediateOrCancel","docs":["Whether the order must be canceled the same slot it is placed"],"type":"bool"},{"name":"triggerCondition","docs":["Whether the order is triggered above or below the trigger price. Only relevant for trigger orders"],"type":{"defined":"OrderTriggerCondition"}},{"name":"auctionDuration","docs":["How many slots the auction lasts"],"type":"u8"},{"name":"padding","type":{"array":["u8",3]}}]}},{"name":"SwapDirection","type":{"kind":"enum","variants":[{"name":"Add"},{"name":"Remove"}]}},{"name":"ModifyOrderId","type":{"kind":"enum","variants":[{"name":"UserOrderId","fields":["u8"]},{"name":"OrderId","fields":["u32"]}]}},{"name":"PositionDirection","type":{"kind":"enum","variants":[{"name":"Long"},{"name":"Short"}]}},{"name":"SpotFulfillmentType","type":{"kind":"enum","variants":[{"name":"SerumV3"},{"name":"Match"},{"name":"PhoenixV1"}]}},{"name":"PostOnlyParam","type":{"kind":"enum","variants":[{"name":"None"},{"name":"MustPostOnly"},{"name":"TryPostOnly"},{"name":"Slide"}]}},{"name":"ModifyOrderPolicy","type":{"kind":"enum","variants":[{"name":"TryModify"},{"name":"MustModify"}]}},{"name":"SwapReduceOnly","type":{"kind":"enum","variants":[{"name":"In"},{"name":"Out"}]}},{"name":"TwapPeriod","type":{"kind":"enum","variants":[{"name":"FundingPeriod"},{"name":"FiveMin"}]}},{"name":"LiquidationMultiplierType","type":{"kind":"enum","variants":[{"name":"Discount"},{"name":"Premium"}]}},{"name":"MarginRequirementType","type":{"kind":"enum","variants":[{"name":"Initial"},{"name":"Fill"},{"name":"Maintenance"}]}},{"name":"OracleValidity","type":{"kind":"enum","variants":[{"name":"Invalid"},{"name":"TooVolatile"},{"name":"TooUncertain"},{"name":"StaleForMargin"},{"name":"InsufficientDataPoints"},{"name":"StaleForAMM"},{"name":"Valid"}]}},{"name":"DriftAction","type":{"kind":"enum","variants":[{"name":"UpdateFunding"},{"name":"SettlePnl"},{"name":"TriggerOrder"},{"name":"FillOrderMatch"},{"name":"FillOrderAmm"},{"name":"Liquidate"},{"name":"MarginCalc"},{"name":"UpdateTwap"},{"name":"UpdateAMMCurve"}]}},{"name":"PositionUpdateType","type":{"kind":"enum","variants":[{"name":"Open"},{"name":"Increase"},{"name":"Reduce"},{"name":"Close"},{"name":"Flip"}]}},{"name":"DepositExplanation","type":{"kind":"enum","variants":[{"name":"None"},{"name":"Transfer"}]}},{"name":"DepositDirection","type":{"kind":"enum","variants":[{"name":"Deposit"},{"name":"Withdraw"}]}},{"name":"OrderAction","type":{"kind":"enum","variants":[{"name":"Place"},{"name":"Cancel"},{"name":"Fill"},{"name":"Trigger"},{"name":"Expire"}]}},{"name":"OrderActionExplanation","type":{"kind":"enum","variants":[{"name":"None"},{"name":"InsufficientFreeCollateral"},{"name":"OraclePriceBreachedLimitPrice"},{"name":"MarketOrderFilledToLimitPrice"},{"name":"OrderExpired"},{"name":"Liquidation"},{"name":"OrderFilledWithAMM"},{"name":"OrderFilledWithAMMJit"},{"name":"OrderFilledWithMatch"},{"name":"OrderFilledWithMatchJit"},{"name":"MarketExpired"},{"name":"RiskingIncreasingOrder"},{"name":"ReduceOnlyOrderIncreasedPosition"},{"name":"OrderFillWithSerum"},{"name":"NoBorrowLiquidity"},{"name":"OrderFillWithPhoenix"},{"name":"OrderFilledWithAMMJitLPSplit"},{"name":"OrderFilledWithLPJit"}]}},{"name":"LPAction","type":{"kind":"enum","variants":[{"name":"AddLiquidity"},{"name":"RemoveLiquidity"},{"name":"SettleLiquidity"}]}},{"name":"LiquidationType","type":{"kind":"enum","variants":[{"name":"LiquidatePerp"},{"name":"LiquidateSpot"},{"name":"LiquidateBorrowForPerpPnl"},{"name":"LiquidatePerpPnlForDeposit"},{"name":"PerpBankruptcy"},{"name":"SpotBankruptcy"}]}},{"name":"SettlePnlExplanation","type":{"kind":"enum","variants":[{"name":"None"},{"name":"ExpiredPosition"}]}},{"name":"StakeAction","type":{"kind":"enum","variants":[{"name":"Stake"},{"name":"UnstakeRequest"},{"name":"UnstakeCancelRequest"},{"name":"Unstake"}]}},{"name":"PerpFulfillmentMethod","type":{"kind":"enum","variants":[{"name":"AMM","fields":[{"option":"u64"}]},{"name":"Match","fields":["publicKey","u16"]}]}},{"name":"SpotFulfillmentMethod","type":{"kind":"enum","variants":[{"name":"ExternalMarket"},{"name":"Match"}]}},{"name":"OracleSource","type":{"kind":"enum","variants":[{"name":"Pyth"},{"name":"Switchboard"},{"name":"QuoteAsset"},{"name":"Pyth1K"},{"name":"Pyth1M"},{"name":"PythStableCoin"}]}},{"name":"MarketStatus","type":{"kind":"enum","variants":[{"name":"Initialized"},{"name":"Active"},{"name":"FundingPaused"},{"name":"AmmPaused"},{"name":"FillPaused"},{"name":"WithdrawPaused"},{"name":"ReduceOnly"},{"name":"Settlement"},{"name":"Delisted"}]}},{"name":"ContractType","type":{"kind":"enum","variants":[{"name":"Perpetual"},{"name":"Future"}]}},{"name":"ContractTier","type":{"kind":"enum","variants":[{"name":"A"},{"name":"B"},{"name":"C"},{"name":"Speculative"},{"name":"Isolated"}]}},{"name":"AMMLiquiditySplit","type":{"kind":"enum","variants":[{"name":"ProtocolOwned"},{"name":"LPOwned"},{"name":"Shared"}]}},{"name":"SpotBalanceType","type":{"kind":"enum","variants":[{"name":"Deposit"},{"name":"Borrow"}]}},{"name":"SpotFulfillmentConfigStatus","type":{"kind":"enum","variants":[{"name":"Enabled"},{"name":"Disabled"}]}},{"name":"AssetTier","type":{"kind":"enum","variants":[{"name":"Collateral"},{"name":"Protected"},{"name":"Cross"},{"name":"Isolated"},{"name":"Unlisted"}]}},{"name":"ExchangeStatus","type":{"kind":"enum","variants":[{"name":"DepositPaused"},{"name":"WithdrawPaused"},{"name":"AmmPaused"},{"name":"FillPaused"},{"name":"LiqPaused"},{"name":"FundingPaused"},{"name":"SettlePnlPaused"}]}},{"name":"UserStatus","type":{"kind":"enum","variants":[{"name":"Active"},{"name":"BeingLiquidated"},{"name":"Bankrupt"},{"name":"ReduceOnly"}]}},{"name":"AssetType","type":{"kind":"enum","variants":[{"name":"Base"},{"name":"Quote"}]}},{"name":"OrderStatus","type":{"kind":"enum","variants":[{"name":"Init"},{"name":"Open"},{"name":"Filled"},{"name":"Canceled"}]}},{"name":"OrderType","type":{"kind":"enum","variants":[{"name":"Market"},{"name":"Limit"},{"name":"TriggerMarket"},{"name":"TriggerLimit"},{"name":"Oracle"}]}},{"name":"OrderTriggerCondition","type":{"kind":"enum","variants":[{"name":"Above"},{"name":"Below"},{"name":"TriggeredAbove"},{"name":"TriggeredBelow"}]}},{"name":"MarketType","type":{"kind":"enum","variants":[{"name":"Spot"},{"name":"Perp"}]}}],"events":[{"name":"NewUserRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"userAuthority","type":"publicKey","index":false},{"name":"user","type":"publicKey","index":false},{"name":"subAccountId","type":"u16","index":false},{"name":"name","type":{"array":["u8",32]},"index":false},{"name":"referrer","type":"publicKey","index":false}]},{"name":"DepositRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"userAuthority","type":"publicKey","index":false},{"name":"user","type":"publicKey","index":false},{"name":"direction","type":{"defined":"DepositDirection"},"index":false},{"name":"depositRecordId","type":"u64","index":false},{"name":"amount","type":"u64","index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"oraclePrice","type":"i64","index":false},{"name":"marketDepositBalance","type":"u128","index":false},{"name":"marketWithdrawBalance","type":"u128","index":false},{"name":"marketCumulativeDepositInterest","type":"u128","index":false},{"name":"marketCumulativeBorrowInterest","type":"u128","index":false},{"name":"totalDepositsAfter","type":"u64","index":false},{"name":"totalWithdrawsAfter","type":"u64","index":false},{"name":"explanation","type":{"defined":"DepositExplanation"},"index":false},{"name":"transferUser","type":{"option":"publicKey"},"index":false}]},{"name":"SpotInterestRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"depositBalance","type":"u128","index":false},{"name":"cumulativeDepositInterest","type":"u128","index":false},{"name":"borrowBalance","type":"u128","index":false},{"name":"cumulativeBorrowInterest","type":"u128","index":false},{"name":"optimalUtilization","type":"u32","index":false},{"name":"optimalBorrowRate","type":"u32","index":false},{"name":"maxBorrowRate","type":"u32","index":false}]},{"name":"FundingPaymentRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"userAuthority","type":"publicKey","index":false},{"name":"user","type":"publicKey","index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"fundingPayment","type":"i64","index":false},{"name":"baseAssetAmount","type":"i64","index":false},{"name":"userLastCumulativeFunding","type":"i64","index":false},{"name":"ammCumulativeFundingLong","type":"i128","index":false},{"name":"ammCumulativeFundingShort","type":"i128","index":false}]},{"name":"FundingRateRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"recordId","type":"u64","index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"fundingRate","type":"i64","index":false},{"name":"fundingRateLong","type":"i128","index":false},{"name":"fundingRateShort","type":"i128","index":false},{"name":"cumulativeFundingRateLong","type":"i128","index":false},{"name":"cumulativeFundingRateShort","type":"i128","index":false},{"name":"oraclePriceTwap","type":"i64","index":false},{"name":"markPriceTwap","type":"u64","index":false},{"name":"periodRevenue","type":"i64","index":false},{"name":"baseAssetAmountWithAmm","type":"i128","index":false},{"name":"baseAssetAmountWithUnsettledLp","type":"i128","index":false}]},{"name":"CurveRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"recordId","type":"u64","index":false},{"name":"pegMultiplierBefore","type":"u128","index":false},{"name":"baseAssetReserveBefore","type":"u128","index":false},{"name":"quoteAssetReserveBefore","type":"u128","index":false},{"name":"sqrtKBefore","type":"u128","index":false},{"name":"pegMultiplierAfter","type":"u128","index":false},{"name":"baseAssetReserveAfter","type":"u128","index":false},{"name":"quoteAssetReserveAfter","type":"u128","index":false},{"name":"sqrtKAfter","type":"u128","index":false},{"name":"baseAssetAmountLong","type":"u128","index":false},{"name":"baseAssetAmountShort","type":"u128","index":false},{"name":"baseAssetAmountWithAmm","type":"i128","index":false},{"name":"totalFee","type":"i128","index":false},{"name":"totalFeeMinusDistributions","type":"i128","index":false},{"name":"adjustmentCost","type":"i128","index":false},{"name":"oraclePrice","type":"i64","index":false},{"name":"fillRecord","type":"u128","index":false},{"name":"numberOfUsers","type":"u32","index":false},{"name":"marketIndex","type":"u16","index":false}]},{"name":"OrderRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"user","type":"publicKey","index":false},{"name":"order","type":{"defined":"Order"},"index":false}]},{"name":"OrderActionRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"action","type":{"defined":"OrderAction"},"index":false},{"name":"actionExplanation","type":{"defined":"OrderActionExplanation"},"index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"marketType","type":{"defined":"MarketType"},"index":false},{"name":"filler","type":{"option":"publicKey"},"index":false},{"name":"fillerReward","type":{"option":"u64"},"index":false},{"name":"fillRecordId","type":{"option":"u64"},"index":false},{"name":"baseAssetAmountFilled","type":{"option":"u64"},"index":false},{"name":"quoteAssetAmountFilled","type":{"option":"u64"},"index":false},{"name":"takerFee","type":{"option":"u64"},"index":false},{"name":"makerFee","type":{"option":"i64"},"index":false},{"name":"referrerReward","type":{"option":"u32"},"index":false},{"name":"quoteAssetAmountSurplus","type":{"option":"i64"},"index":false},{"name":"spotFulfillmentMethodFee","type":{"option":"u64"},"index":false},{"name":"taker","type":{"option":"publicKey"},"index":false},{"name":"takerOrderId","type":{"option":"u32"},"index":false},{"name":"takerOrderDirection","type":{"option":{"defined":"PositionDirection"}},"index":false},{"name":"takerOrderBaseAssetAmount","type":{"option":"u64"},"index":false},{"name":"takerOrderCumulativeBaseAssetAmountFilled","type":{"option":"u64"},"index":false},{"name":"takerOrderCumulativeQuoteAssetAmountFilled","type":{"option":"u64"},"index":false},{"name":"maker","type":{"option":"publicKey"},"index":false},{"name":"makerOrderId","type":{"option":"u32"},"index":false},{"name":"makerOrderDirection","type":{"option":{"defined":"PositionDirection"}},"index":false},{"name":"makerOrderBaseAssetAmount","type":{"option":"u64"},"index":false},{"name":"makerOrderCumulativeBaseAssetAmountFilled","type":{"option":"u64"},"index":false},{"name":"makerOrderCumulativeQuoteAssetAmountFilled","type":{"option":"u64"},"index":false},{"name":"oraclePrice","type":"i64","index":false}]},{"name":"LPRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"user","type":"publicKey","index":false},{"name":"action","type":{"defined":"LPAction"},"index":false},{"name":"nShares","type":"u64","index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"deltaBaseAssetAmount","type":"i64","index":false},{"name":"deltaQuoteAssetAmount","type":"i64","index":false},{"name":"pnl","type":"i64","index":false}]},{"name":"LiquidationRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"liquidationType","type":{"defined":"LiquidationType"},"index":false},{"name":"user","type":"publicKey","index":false},{"name":"liquidator","type":"publicKey","index":false},{"name":"marginRequirement","type":"u128","index":false},{"name":"totalCollateral","type":"i128","index":false},{"name":"marginFreed","type":"u64","index":false},{"name":"liquidationId","type":"u16","index":false},{"name":"bankrupt","type":"bool","index":false},{"name":"canceledOrderIds","type":{"vec":"u32"},"index":false},{"name":"liquidatePerp","type":{"defined":"LiquidatePerpRecord"},"index":false},{"name":"liquidateSpot","type":{"defined":"LiquidateSpotRecord"},"index":false},{"name":"liquidateBorrowForPerpPnl","type":{"defined":"LiquidateBorrowForPerpPnlRecord"},"index":false},{"name":"liquidatePerpPnlForDeposit","type":{"defined":"LiquidatePerpPnlForDepositRecord"},"index":false},{"name":"perpBankruptcy","type":{"defined":"PerpBankruptcyRecord"},"index":false},{"name":"spotBankruptcy","type":{"defined":"SpotBankruptcyRecord"},"index":false}]},{"name":"SettlePnlRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"user","type":"publicKey","index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"pnl","type":"i128","index":false},{"name":"baseAssetAmount","type":"i64","index":false},{"name":"quoteAssetAmountAfter","type":"i64","index":false},{"name":"quoteEntryAmount","type":"i64","index":false},{"name":"settlePrice","type":"i64","index":false},{"name":"explanation","type":{"defined":"SettlePnlExplanation"},"index":false}]},{"name":"InsuranceFundRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"spotMarketIndex","type":"u16","index":false},{"name":"perpMarketIndex","type":"u16","index":false},{"name":"userIfFactor","type":"u32","index":false},{"name":"totalIfFactor","type":"u32","index":false},{"name":"vaultAmountBefore","type":"u64","index":false},{"name":"insuranceVaultAmountBefore","type":"u64","index":false},{"name":"totalIfSharesBefore","type":"u128","index":false},{"name":"totalIfSharesAfter","type":"u128","index":false},{"name":"amount","type":"i64","index":false}]},{"name":"InsuranceFundStakeRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"userAuthority","type":"publicKey","index":false},{"name":"action","type":{"defined":"StakeAction"},"index":false},{"name":"amount","type":"u64","index":false},{"name":"marketIndex","type":"u16","index":false},{"name":"insuranceVaultAmountBefore","type":"u64","index":false},{"name":"ifSharesBefore","type":"u128","index":false},{"name":"userIfSharesBefore","type":"u128","index":false},{"name":"totalIfSharesBefore","type":"u128","index":false},{"name":"ifSharesAfter","type":"u128","index":false},{"name":"userIfSharesAfter","type":"u128","index":false},{"name":"totalIfSharesAfter","type":"u128","index":false}]},{"name":"SwapRecord","fields":[{"name":"ts","type":"i64","index":false},{"name":"user","type":"publicKey","index":false},{"name":"amountOut","type":"u64","index":false},{"name":"amountIn","type":"u64","index":false},{"name":"outMarketIndex","type":"u16","index":false},{"name":"inMarketIndex","type":"u16","index":false},{"name":"outOraclePrice","type":"i64","index":false},{"name":"inOraclePrice","type":"i64","index":false},{"name":"fee","type":"u64","index":false}]}],"errors":[{"code":6000,"name":"InvalidSpotMarketAuthority","msg":"Invalid Spot Market Authority"},{"code":6001,"name":"InvalidInsuranceFundAuthority","msg":"Clearing house not insurance fund authority"},{"code":6002,"name":"InsufficientDeposit","msg":"Insufficient deposit"},{"code":6003,"name":"InsufficientCollateral","msg":"Insufficient collateral"},{"code":6004,"name":"SufficientCollateral","msg":"Sufficient collateral"},{"code":6005,"name":"MaxNumberOfPositions","msg":"Max number of positions taken"},{"code":6006,"name":"AdminControlsPricesDisabled","msg":"Admin Controls Prices Disabled"},{"code":6007,"name":"MarketDelisted","msg":"Market Delisted"},{"code":6008,"name":"MarketIndexAlreadyInitialized","msg":"Market Index Already Initialized"},{"code":6009,"name":"UserAccountAndUserPositionsAccountMismatch","msg":"User Account And User Positions Account Mismatch"},{"code":6010,"name":"UserHasNoPositionInMarket","msg":"User Has No Position In Market"},{"code":6011,"name":"InvalidInitialPeg","msg":"Invalid Initial Peg"},{"code":6012,"name":"InvalidRepegRedundant","msg":"AMM repeg already configured with amt given"},{"code":6013,"name":"InvalidRepegDirection","msg":"AMM repeg incorrect repeg direction"},{"code":6014,"name":"InvalidRepegProfitability","msg":"AMM repeg out of bounds pnl"},{"code":6015,"name":"SlippageOutsideLimit","msg":"Slippage Outside Limit Price"},{"code":6016,"name":"OrderSizeTooSmall","msg":"Order Size Too Small"},{"code":6017,"name":"InvalidUpdateK","msg":"Price change too large when updating K"},{"code":6018,"name":"AdminWithdrawTooLarge","msg":"Admin tried to withdraw amount larger than fees collected"},{"code":6019,"name":"MathError","msg":"Math Error"},{"code":6020,"name":"BnConversionError","msg":"Conversion to u128/u64 failed with an overflow or underflow"},{"code":6021,"name":"ClockUnavailable","msg":"Clock unavailable"},{"code":6022,"name":"UnableToLoadOracle","msg":"Unable To Load Oracles"},{"code":6023,"name":"PriceBandsBreached","msg":"Price Bands Breached"},{"code":6024,"name":"ExchangePaused","msg":"Exchange is paused"},{"code":6025,"name":"InvalidWhitelistToken","msg":"Invalid whitelist token"},{"code":6026,"name":"WhitelistTokenNotFound","msg":"Whitelist token not found"},{"code":6027,"name":"InvalidDiscountToken","msg":"Invalid discount token"},{"code":6028,"name":"DiscountTokenNotFound","msg":"Discount token not found"},{"code":6029,"name":"ReferrerNotFound","msg":"Referrer not found"},{"code":6030,"name":"ReferrerStatsNotFound","msg":"ReferrerNotFound"},{"code":6031,"name":"ReferrerMustBeWritable","msg":"ReferrerMustBeWritable"},{"code":6032,"name":"ReferrerStatsMustBeWritable","msg":"ReferrerMustBeWritable"},{"code":6033,"name":"ReferrerAndReferrerStatsAuthorityUnequal","msg":"ReferrerAndReferrerStatsAuthorityUnequal"},{"code":6034,"name":"InvalidReferrer","msg":"InvalidReferrer"},{"code":6035,"name":"InvalidOracle","msg":"InvalidOracle"},{"code":6036,"name":"OracleNotFound","msg":"OracleNotFound"},{"code":6037,"name":"LiquidationsBlockedByOracle","msg":"Liquidations Blocked By Oracle"},{"code":6038,"name":"MaxDeposit","msg":"Can not deposit more than max deposit"},{"code":6039,"name":"CantDeleteUserWithCollateral","msg":"Can not delete user that still has collateral"},{"code":6040,"name":"InvalidFundingProfitability","msg":"AMM funding out of bounds pnl"},{"code":6041,"name":"CastingFailure","msg":"Casting Failure"},{"code":6042,"name":"InvalidOrder","msg":"InvalidOrder"},{"code":6043,"name":"InvalidOrderMaxTs","msg":"InvalidOrderMaxTs"},{"code":6044,"name":"InvalidOrderMarketType","msg":"InvalidOrderMarketType"},{"code":6045,"name":"InvalidOrderForInitialMarginReq","msg":"InvalidOrderForInitialMarginReq"},{"code":6046,"name":"InvalidOrderNotRiskReducing","msg":"InvalidOrderNotRiskReducing"},{"code":6047,"name":"InvalidOrderSizeTooSmall","msg":"InvalidOrderSizeTooSmall"},{"code":6048,"name":"InvalidOrderNotStepSizeMultiple","msg":"InvalidOrderNotStepSizeMultiple"},{"code":6049,"name":"InvalidOrderBaseQuoteAsset","msg":"InvalidOrderBaseQuoteAsset"},{"code":6050,"name":"InvalidOrderIOC","msg":"InvalidOrderIOC"},{"code":6051,"name":"InvalidOrderPostOnly","msg":"InvalidOrderPostOnly"},{"code":6052,"name":"InvalidOrderIOCPostOnly","msg":"InvalidOrderIOCPostOnly"},{"code":6053,"name":"InvalidOrderTrigger","msg":"InvalidOrderTrigger"},{"code":6054,"name":"InvalidOrderAuction","msg":"InvalidOrderAuction"},{"code":6055,"name":"InvalidOrderOracleOffset","msg":"InvalidOrderOracleOffset"},{"code":6056,"name":"InvalidOrderMinOrderSize","msg":"InvalidOrderMinOrderSize"},{"code":6057,"name":"PlacePostOnlyLimitFailure","msg":"Failed to Place Post-Only Limit Order"},{"code":6058,"name":"UserHasNoOrder","msg":"User has no order"},{"code":6059,"name":"OrderAmountTooSmall","msg":"Order Amount Too Small"},{"code":6060,"name":"MaxNumberOfOrders","msg":"Max number of orders taken"},{"code":6061,"name":"OrderDoesNotExist","msg":"Order does not exist"},{"code":6062,"name":"OrderNotOpen","msg":"Order not open"},{"code":6063,"name":"FillOrderDidNotUpdateState","msg":"FillOrderDidNotUpdateState"},{"code":6064,"name":"ReduceOnlyOrderIncreasedRisk","msg":"Reduce only order increased risk"},{"code":6065,"name":"UnableToLoadAccountLoader","msg":"Unable to load AccountLoader"},{"code":6066,"name":"TradeSizeTooLarge","msg":"Trade Size Too Large"},{"code":6067,"name":"UserCantReferThemselves","msg":"User cant refer themselves"},{"code":6068,"name":"DidNotReceiveExpectedReferrer","msg":"Did not receive expected referrer"},{"code":6069,"name":"CouldNotDeserializeReferrer","msg":"Could not deserialize referrer"},{"code":6070,"name":"CouldNotDeserializeReferrerStats","msg":"Could not deserialize referrer stats"},{"code":6071,"name":"UserOrderIdAlreadyInUse","msg":"User Order Id Already In Use"},{"code":6072,"name":"NoPositionsLiquidatable","msg":"No positions liquidatable"},{"code":6073,"name":"InvalidMarginRatio","msg":"Invalid Margin Ratio"},{"code":6074,"name":"CantCancelPostOnlyOrder","msg":"Cant Cancel Post Only Order"},{"code":6075,"name":"InvalidOracleOffset","msg":"InvalidOracleOffset"},{"code":6076,"name":"CantExpireOrders","msg":"CantExpireOrders"},{"code":6077,"name":"CouldNotLoadMarketData","msg":"CouldNotLoadMarketData"},{"code":6078,"name":"PerpMarketNotFound","msg":"PerpMarketNotFound"},{"code":6079,"name":"InvalidMarketAccount","msg":"InvalidMarketAccount"},{"code":6080,"name":"UnableToLoadPerpMarketAccount","msg":"UnableToLoadMarketAccount"},{"code":6081,"name":"MarketWrongMutability","msg":"MarketWrongMutability"},{"code":6082,"name":"UnableToCastUnixTime","msg":"UnableToCastUnixTime"},{"code":6083,"name":"CouldNotFindSpotPosition","msg":"CouldNotFindSpotPosition"},{"code":6084,"name":"NoSpotPositionAvailable","msg":"NoSpotPositionAvailable"},{"code":6085,"name":"InvalidSpotMarketInitialization","msg":"InvalidSpotMarketInitialization"},{"code":6086,"name":"CouldNotLoadSpotMarketData","msg":"CouldNotLoadSpotMarketData"},{"code":6087,"name":"SpotMarketNotFound","msg":"SpotMarketNotFound"},{"code":6088,"name":"InvalidSpotMarketAccount","msg":"InvalidSpotMarketAccount"},{"code":6089,"name":"UnableToLoadSpotMarketAccount","msg":"UnableToLoadSpotMarketAccount"},{"code":6090,"name":"SpotMarketWrongMutability","msg":"SpotMarketWrongMutability"},{"code":6091,"name":"SpotMarketInterestNotUpToDate","msg":"SpotInterestNotUpToDate"},{"code":6092,"name":"SpotMarketInsufficientDeposits","msg":"SpotMarketInsufficientDeposits"},{"code":6093,"name":"UserMustSettleTheirOwnPositiveUnsettledPNL","msg":"UserMustSettleTheirOwnPositiveUnsettledPNL"},{"code":6094,"name":"CantUpdatePoolBalanceType","msg":"CantUpdatePoolBalanceType"},{"code":6095,"name":"InsufficientCollateralForSettlingPNL","msg":"InsufficientCollateralForSettlingPNL"},{"code":6096,"name":"AMMNotUpdatedInSameSlot","msg":"AMMNotUpdatedInSameSlot"},{"code":6097,"name":"AuctionNotComplete","msg":"AuctionNotComplete"},{"code":6098,"name":"MakerNotFound","msg":"MakerNotFound"},{"code":6099,"name":"MakerStatsNotFound","msg":"MakerNotFound"},{"code":6100,"name":"MakerMustBeWritable","msg":"MakerMustBeWritable"},{"code":6101,"name":"MakerStatsMustBeWritable","msg":"MakerMustBeWritable"},{"code":6102,"name":"MakerOrderNotFound","msg":"MakerOrderNotFound"},{"code":6103,"name":"CouldNotDeserializeMaker","msg":"CouldNotDeserializeMaker"},{"code":6104,"name":"CouldNotDeserializeMakerStats","msg":"CouldNotDeserializeMaker"},{"code":6105,"name":"AuctionPriceDoesNotSatisfyMaker","msg":"AuctionPriceDoesNotSatisfyMaker"},{"code":6106,"name":"MakerCantFulfillOwnOrder","msg":"MakerCantFulfillOwnOrder"},{"code":6107,"name":"MakerOrderMustBePostOnly","msg":"MakerOrderMustBePostOnly"},{"code":6108,"name":"CantMatchTwoPostOnlys","msg":"CantMatchTwoPostOnlys"},{"code":6109,"name":"OrderBreachesOraclePriceLimits","msg":"OrderBreachesOraclePriceLimits"},{"code":6110,"name":"OrderMustBeTriggeredFirst","msg":"OrderMustBeTriggeredFirst"},{"code":6111,"name":"OrderNotTriggerable","msg":"OrderNotTriggerable"},{"code":6112,"name":"OrderDidNotSatisfyTriggerCondition","msg":"OrderDidNotSatisfyTriggerCondition"},{"code":6113,"name":"PositionAlreadyBeingLiquidated","msg":"PositionAlreadyBeingLiquidated"},{"code":6114,"name":"PositionDoesntHaveOpenPositionOrOrders","msg":"PositionDoesntHaveOpenPositionOrOrders"},{"code":6115,"name":"AllOrdersAreAlreadyLiquidations","msg":"AllOrdersAreAlreadyLiquidations"},{"code":6116,"name":"CantCancelLiquidationOrder","msg":"CantCancelLiquidationOrder"},{"code":6117,"name":"UserIsBeingLiquidated","msg":"UserIsBeingLiquidated"},{"code":6118,"name":"LiquidationsOngoing","msg":"LiquidationsOngoing"},{"code":6119,"name":"WrongSpotBalanceType","msg":"WrongSpotBalanceType"},{"code":6120,"name":"UserCantLiquidateThemself","msg":"UserCantLiquidateThemself"},{"code":6121,"name":"InvalidPerpPositionToLiquidate","msg":"InvalidPerpPositionToLiquidate"},{"code":6122,"name":"InvalidBaseAssetAmountForLiquidatePerp","msg":"InvalidBaseAssetAmountForLiquidatePerp"},{"code":6123,"name":"InvalidPositionLastFundingRate","msg":"InvalidPositionLastFundingRate"},{"code":6124,"name":"InvalidPositionDelta","msg":"InvalidPositionDelta"},{"code":6125,"name":"UserBankrupt","msg":"UserBankrupt"},{"code":6126,"name":"UserNotBankrupt","msg":"UserNotBankrupt"},{"code":6127,"name":"UserHasInvalidBorrow","msg":"UserHasInvalidBorrow"},{"code":6128,"name":"DailyWithdrawLimit","msg":"DailyWithdrawLimit"},{"code":6129,"name":"DefaultError","msg":"DefaultError"},{"code":6130,"name":"InsufficientLPTokens","msg":"Insufficient LP tokens"},{"code":6131,"name":"CantLPWithPerpPosition","msg":"Cant LP with a market position"},{"code":6132,"name":"UnableToBurnLPTokens","msg":"Unable to burn LP tokens"},{"code":6133,"name":"TryingToRemoveLiquidityTooFast","msg":"Trying to remove liqudity too fast after adding it"},{"code":6134,"name":"InvalidSpotMarketVault","msg":"Invalid Spot Market Vault"},{"code":6135,"name":"InvalidSpotMarketState","msg":"Invalid Spot Market State"},{"code":6136,"name":"InvalidSerumProgram","msg":"InvalidSerumProgram"},{"code":6137,"name":"InvalidSerumMarket","msg":"InvalidSerumMarket"},{"code":6138,"name":"InvalidSerumBids","msg":"InvalidSerumBids"},{"code":6139,"name":"InvalidSerumAsks","msg":"InvalidSerumAsks"},{"code":6140,"name":"InvalidSerumOpenOrders","msg":"InvalidSerumOpenOrders"},{"code":6141,"name":"FailedSerumCPI","msg":"FailedSerumCPI"},{"code":6142,"name":"FailedToFillOnExternalMarket","msg":"FailedToFillOnExternalMarket"},{"code":6143,"name":"InvalidFulfillmentConfig","msg":"InvalidFulfillmentConfig"},{"code":6144,"name":"InvalidFeeStructure","msg":"InvalidFeeStructure"},{"code":6145,"name":"InsufficientIFShares","msg":"Insufficient IF shares"},{"code":6146,"name":"MarketActionPaused","msg":"the Market has paused this action"},{"code":6147,"name":"MarketPlaceOrderPaused","msg":"the Market status doesnt allow placing orders"},{"code":6148,"name":"MarketFillOrderPaused","msg":"the Market status doesnt allow filling orders"},{"code":6149,"name":"MarketWithdrawPaused","msg":"the Market status doesnt allow withdraws"},{"code":6150,"name":"ProtectedAssetTierViolation","msg":"Action violates the Protected Asset Tier rules"},{"code":6151,"name":"IsolatedAssetTierViolation","msg":"Action violates the Isolated Asset Tier rules"},{"code":6152,"name":"UserCantBeDeleted","msg":"User Cant Be Deleted"},{"code":6153,"name":"ReduceOnlyWithdrawIncreasedRisk","msg":"Reduce Only Withdraw Increased Risk"},{"code":6154,"name":"MaxOpenInterest","msg":"Max Open Interest"},{"code":6155,"name":"CantResolvePerpBankruptcy","msg":"Cant Resolve Perp Bankruptcy"},{"code":6156,"name":"LiquidationDoesntSatisfyLimitPrice","msg":"Liquidation Doesnt Satisfy Limit Price"},{"code":6157,"name":"MarginTradingDisabled","msg":"Margin Trading Disabled"},{"code":6158,"name":"InvalidMarketStatusToSettlePnl","msg":"Invalid Market Status to Settle Perp Pnl"},{"code":6159,"name":"PerpMarketNotInSettlement","msg":"PerpMarketNotInSettlement"},{"code":6160,"name":"PerpMarketNotInReduceOnly","msg":"PerpMarketNotInReduceOnly"},{"code":6161,"name":"PerpMarketSettlementBufferNotReached","msg":"PerpMarketSettlementBufferNotReached"},{"code":6162,"name":"PerpMarketSettlementUserHasOpenOrders","msg":"PerpMarketSettlementUserHasOpenOrders"},{"code":6163,"name":"PerpMarketSettlementUserHasActiveLP","msg":"PerpMarketSettlementUserHasActiveLP"},{"code":6164,"name":"UnableToSettleExpiredUserPosition","msg":"UnableToSettleExpiredUserPosition"},{"code":6165,"name":"UnequalMarketIndexForSpotTransfer","msg":"UnequalMarketIndexForSpotTransfer"},{"code":6166,"name":"InvalidPerpPositionDetected","msg":"InvalidPerpPositionDetected"},{"code":6167,"name":"InvalidSpotPositionDetected","msg":"InvalidSpotPositionDetected"},{"code":6168,"name":"InvalidAmmDetected","msg":"InvalidAmmDetected"},{"code":6169,"name":"InvalidAmmForFillDetected","msg":"InvalidAmmForFillDetected"},{"code":6170,"name":"InvalidAmmLimitPriceOverride","msg":"InvalidAmmLimitPriceOverride"},{"code":6171,"name":"InvalidOrderFillPrice","msg":"InvalidOrderFillPrice"},{"code":6172,"name":"SpotMarketBalanceInvariantViolated","msg":"SpotMarketBalanceInvariantViolated"},{"code":6173,"name":"SpotMarketVaultInvariantViolated","msg":"SpotMarketVaultInvariantViolated"},{"code":6174,"name":"InvalidPDA","msg":"InvalidPDA"},{"code":6175,"name":"InvalidPDASigner","msg":"InvalidPDASigner"},{"code":6176,"name":"RevenueSettingsCannotSettleToIF","msg":"RevenueSettingsCannotSettleToIF"},{"code":6177,"name":"NoRevenueToSettleToIF","msg":"NoRevenueToSettleToIF"},{"code":6178,"name":"NoAmmPerpPnlDeficit","msg":"NoAmmPerpPnlDeficit"},{"code":6179,"name":"SufficientPerpPnlPool","msg":"SufficientPerpPnlPool"},{"code":6180,"name":"InsufficientPerpPnlPool","msg":"InsufficientPerpPnlPool"},{"code":6181,"name":"PerpPnlDeficitBelowThreshold","msg":"PerpPnlDeficitBelowThreshold"},{"code":6182,"name":"MaxRevenueWithdrawPerPeriodReached","msg":"MaxRevenueWithdrawPerPeriodReached"},{"code":6183,"name":"MaxIFWithdrawReached","msg":"InvalidSpotPositionDetected"},{"code":6184,"name":"NoIFWithdrawAvailable","msg":"NoIFWithdrawAvailable"},{"code":6185,"name":"InvalidIFUnstake","msg":"InvalidIFUnstake"},{"code":6186,"name":"InvalidIFUnstakeSize","msg":"InvalidIFUnstakeSize"},{"code":6187,"name":"InvalidIFUnstakeCancel","msg":"InvalidIFUnstakeCancel"},{"code":6188,"name":"InvalidIFForNewStakes","msg":"InvalidIFForNewStakes"},{"code":6189,"name":"InvalidIFRebase","msg":"InvalidIFRebase"},{"code":6190,"name":"InvalidInsuranceUnstakeSize","msg":"InvalidInsuranceUnstakeSize"},{"code":6191,"name":"InvalidOrderLimitPrice","msg":"InvalidOrderLimitPrice"},{"code":6192,"name":"InvalidIFDetected","msg":"InvalidIFDetected"},{"code":6193,"name":"InvalidAmmMaxSpreadDetected","msg":"InvalidAmmMaxSpreadDetected"},{"code":6194,"name":"InvalidConcentrationCoef","msg":"InvalidConcentrationCoef"},{"code":6195,"name":"InvalidSrmVault","msg":"InvalidSrmVault"},{"code":6196,"name":"InvalidVaultOwner","msg":"InvalidVaultOwner"},{"code":6197,"name":"InvalidMarketStatusForFills","msg":"InvalidMarketStatusForFills"},{"code":6198,"name":"IFWithdrawRequestInProgress","msg":"IFWithdrawRequestInProgress"},{"code":6199,"name":"NoIFWithdrawRequestInProgress","msg":"NoIFWithdrawRequestInProgress"},{"code":6200,"name":"IFWithdrawRequestTooSmall","msg":"IFWithdrawRequestTooSmall"},{"code":6201,"name":"IncorrectSpotMarketAccountPassed","msg":"IncorrectSpotMarketAccountPassed"},{"code":6202,"name":"BlockchainClockInconsistency","msg":"BlockchainClockInconsistency"},{"code":6203,"name":"InvalidIFSharesDetected","msg":"InvalidIFSharesDetected"},{"code":6204,"name":"NewLPSizeTooSmall","msg":"NewLPSizeTooSmall"},{"code":6205,"name":"MarketStatusInvalidForNewLP","msg":"MarketStatusInvalidForNewLP"},{"code":6206,"name":"InvalidMarkTwapUpdateDetected","msg":"InvalidMarkTwapUpdateDetected"},{"code":6207,"name":"MarketSettlementAttemptOnActiveMarket","msg":"MarketSettlementAttemptOnActiveMarket"},{"code":6208,"name":"MarketSettlementRequiresSettledLP","msg":"MarketSettlementRequiresSettledLP"},{"code":6209,"name":"MarketSettlementAttemptTooEarly","msg":"MarketSettlementAttemptTooEarly"},{"code":6210,"name":"MarketSettlementTargetPriceInvalid","msg":"MarketSettlementTargetPriceInvalid"},{"code":6211,"name":"UnsupportedSpotMarket","msg":"UnsupportedSpotMarket"},{"code":6212,"name":"SpotOrdersDisabled","msg":"SpotOrdersDisabled"},{"code":6213,"name":"MarketBeingInitialized","msg":"Market Being Initialized"},{"code":6214,"name":"InvalidUserSubAccountId","msg":"Invalid Sub Account Id"},{"code":6215,"name":"InvalidTriggerOrderCondition","msg":"Invalid Trigger Order Condition"},{"code":6216,"name":"InvalidSpotPosition","msg":"Invalid Spot Position"},{"code":6217,"name":"CantTransferBetweenSameUserAccount","msg":"Cant transfer between same user account"},{"code":6218,"name":"InvalidPerpPosition","msg":"Invalid Perp Position"},{"code":6219,"name":"UnableToGetLimitPrice","msg":"Unable To Get Limit Price"},{"code":6220,"name":"InvalidLiquidation","msg":"Invalid Liquidation"},{"code":6221,"name":"SpotFulfillmentConfigDisabled","msg":"Spot Fulfullment Config Disabled"},{"code":6222,"name":"InvalidMaker","msg":"Invalid Maker"},{"code":6223,"name":"FailedUnwrap","msg":"Failed Unwrap"},{"code":6224,"name":"MaxNumberOfUsers","msg":"Max Number Of Users"},{"code":6225,"name":"InvalidOracleForSettlePnl","msg":"InvalidOracleForSettlePnl"},{"code":6226,"name":"MarginOrdersOpen","msg":"MarginOrdersOpen"},{"code":6227,"name":"TierViolationLiquidatingPerpPnl","msg":"TierViolationLiquidatingPerpPnl"},{"code":6228,"name":"CouldNotLoadUserData","msg":"CouldNotLoadUserData"},{"code":6229,"name":"UserWrongMutability","msg":"UserWrongMutability"},{"code":6230,"name":"InvalidUserAccount","msg":"InvalidUserAccount"},{"code":6231,"name":"CouldNotLoadUserStatsData","msg":"CouldNotLoadUserData"},{"code":6232,"name":"UserStatsWrongMutability","msg":"UserWrongMutability"},{"code":6233,"name":"InvalidUserStatsAccount","msg":"InvalidUserAccount"},{"code":6234,"name":"UserNotFound","msg":"UserNotFound"},{"code":6235,"name":"UnableToLoadUserAccount","msg":"UnableToLoadUserAccount"},{"code":6236,"name":"UserStatsNotFound","msg":"UserStatsNotFound"},{"code":6237,"name":"UnableToLoadUserStatsAccount","msg":"UnableToLoadUserStatsAccount"},{"code":6238,"name":"UserNotInactive","msg":"User Not Inactive"},{"code":6239,"name":"RevertFill","msg":"RevertFill"},{"code":6240,"name":"InvalidMarketAccountforDeletion","msg":"Invalid MarketAccount for Deletion"},{"code":6241,"name":"InvalidSpotFulfillmentParams","msg":"Invalid Spot Fulfillment Params"},{"code":6242,"name":"FailedToGetMint","msg":"Failed to Get Mint"},{"code":6243,"name":"FailedPhoenixCPI","msg":"FailedPhoenixCPI"},{"code":6244,"name":"FailedToDeserializePhoenixMarket","msg":"FailedToDeserializePhoenixMarket"},{"code":6245,"name":"InvalidPricePrecision","msg":"InvalidPricePrecision"},{"code":6246,"name":"InvalidPhoenixProgram","msg":"InvalidPhoenixProgram"},{"code":6247,"name":"InvalidPhoenixMarket","msg":"InvalidPhoenixMarket"},{"code":6248,"name":"InvalidSwap","msg":"InvalidSwap"},{"code":6249,"name":"SwapLimitPriceBreached","msg":"SwapLimitPriceBreached"},{"code":6250,"name":"SpotMarketReduceOnly","msg":"SpotMarketReduceOnly"},{"code":6251,"name":"FundingWasNotUpdated","msg":"FundingWasNotUpdated"},{"code":6252,"name":"ImpossibleFill","msg":"ImpossibleFill"},{"code":6253,"name":"CantUpdatePerpBidAskTwap","msg":"CantUpdatePerpBidAskTwap"},{"code":6254,"name":"UserReduceOnly","msg":"UserReduceOnly"}]}');

/***/ }),

/***/ "(ssr)/./node_modules/@drift-labs/sdk/lib/idl/token_faucet.json":
/*!****************************************************************!*\
  !*** ./node_modules/@drift-labs/sdk/lib/idl/token_faucet.json ***!
  \****************************************************************/
/***/ ((module) => {

module.exports = JSON.parse('{"version":"0.1.0","name":"token_faucet","instructions":[{"name":"initialize","accounts":[{"name":"faucetConfig","isMut":true,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"mintAccount","isMut":true,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"mintToUser","accounts":[{"name":"faucetConfig","isMut":false,"isSigner":false},{"name":"mintAccount","isMut":true,"isSigner":false},{"name":"userTokenAccount","isMut":true,"isSigner":false},{"name":"mintAuthority","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"amount","type":"u64"}]},{"name":"transferMintAuthority","accounts":[{"name":"faucetConfig","isMut":false,"isSigner":false},{"name":"admin","isMut":true,"isSigner":true},{"name":"mintAccount","isMut":true,"isSigner":false},{"name":"mintAuthority","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"FaucetConfig","type":{"kind":"struct","fields":[{"name":"admin","type":"publicKey"},{"name":"mint","type":"publicKey"},{"name":"mintAuthority","type":"publicKey"},{"name":"mintAuthorityNonce","type":"u8"}]}}],"errors":[{"code":6000,"name":"InvalidMintAccountAuthority","msg":"Program not mint authority"}]}');

/***/ })

};
;