(()=>{var e={};e.id=931,e.ids=[931],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},41041:e=>{"use strict";e.exports=require("node:url")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},3037:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var n=r(50482),s=r(69108),a=r(62563),i=r.n(a),o=r(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,70751)),"/Users/samisha/Projects/drift-trading-ui/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,51076)),"/Users/samisha/Projects/drift-trading-ui/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/samisha/Projects/drift-trading-ui/app/page.tsx"],u="/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19867:(e,t,r)=>{Promise.resolve().then(r.bind(r,50584))},50584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>tI});var n,s=r(95344),a=r(37999),i=r(60972),o=r(3729),l=r.t(o,2),c=r(44236),d=r(49618),u=r(44669);class m extends Error{constructor(e){super(e),this.name="RateLimitError"}}let p=(0,o.createContext)({driftClient:null,userAccounts:null,error:null,isLoading:!0,isConnected:!1,isSubscribed:!1,currentRpcEndpoint:null}),f=["https://api.devnet.solana.com","https://devnet.helius-rpc.com/?api-key=76547270-226d-446d-8293-c1b3f8e8ea1b"].filter(Boolean),h=5,x=5e3,g=e=>new Promise(t=>setTimeout(t,e)),y=e=>e*(1+.2*Math.random()),v=async(e,t,r=h,n=x)=>{try{return await e()}catch(i){if(i.message?.includes("429")||429===i.status||i.message?.toLowerCase().includes("rate limit"))throw console.warn(`Rate limit detected on ${t}. Switching endpoint.`),new m(`Rate limit hit on ${t}`);if((i.message?.includes("Cannot read properties of null")||i.message?.includes("Cannot read property"))&&console.warn(`Null reference error detected in SDK call. Endpoint: ${t}, Error: ${i.message}`),0===r)throw console.error(`Max retries reached for non-rate-limit error on ${t}. Error:`,i),i;let s=Math.min(2*n,3e4),a=y(s);return console.log(`Retrying on ${t} in ${a/1e3}s (attempt ${h-r+1}/${h}). Error: ${i.message}`),await g(a),v(e,t,r-1,s)}},b=async e=>{console.log(`Attempting to connect to RPC: ${e}`);let t=new d.Connection(e,"confirmed");return await t.getEpochInfo(),console.log(`Successfully connected to RPC: ${e}`),t},j=async(e,t,r)=>{try{console.debug(`Executing SDK method: ${e}`);let r=await t();return console.debug(`Successfully executed SDK method: ${e}`),r}catch(t){if(console.error(`Error in SDK method ${e}:`,t),console.error(`Stack trace for ${e}:`,t.stack),void 0!==r)return console.warn(`Using fallback value for failed SDK method: ${e}`),r;throw t}};function w({children:e,onConnected:t}){let[r,n]=(0,o.useState)(null),[a,l]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),[x,y]=(0,o.useState)(!1),[w,N]=(0,o.useState)(!1),[E,C]=(0,o.useState)(!0),[S,P]=(0,o.useState)(0),[k,T]=(0,o.useState)(f[0]||null),{publicKey:D,signTransaction:O,signAllTransactions:A}=(0,i.O)(),R=(0,o.useRef)(!1),I=(0,o.useRef)(!1),L=(0,o.useRef)(!0),[$]=(0,o.useState)(!0);return(0,o.useEffect)(()=>(L.current=!0,I.current=!1,R.current=!1,n(null),l(null),h(null),y(!1),N(!1),C(!0),P(0),T(f[0]||null),(async()=>{if(!D||!O||!A){L.current&&C(!1);return}let e=!1,r=0,s=f.length;for(;!e&&r<s&&L.current;){let i=f[r];T(i),console.log(`Attempting initialization with endpoint ${r+1}/${s}: ${i}`);try{L.current&&h(null);let r=await v(()=>b(i),i);$&&console.debug("Creating DriftClient instance...");let s={connection:r,wallet:{publicKey:D,signTransaction:O,signAllTransactions:A},env:"devnet",opts:{commitment:"confirmed",skipPreflight:!0}};$&&console.debug("Client config:",JSON.stringify(s,(e,t)=>"connection"===e?"[Connection Object]":"publicKey"===e?t.toString():"signTransaction"===e||"signAllTransactions"===e?"[Function]":t));let o=new c.DriftClient(s);if(!L.current)return;if(!o)throw console.error("DriftClient was not properly initialized"),Error("Failed to initialize DriftClient");if("function"!=typeof o.subscribe)throw console.error("DriftClient.subscribe is not a function"),Error("Malformed DriftClient instance");if("function"!=typeof o.getUserAccountsForAuthority)throw console.error("DriftClient.getUserAccountsForAuthority is not a function"),Error("Malformed DriftClient instance");if(n(o),y(!0),I.current=!0,!R.current){if(await g(5e3),$&&console.debug("Attempting to subscribe to DriftClient events..."),await v(async()=>{if(!o)throw Error("Client not available for subscribe");await j("client.subscribe",async()=>{if(!o.connection)throw Error("Client connection is null before subscribe");console.debug("[safelyExecuteSdkMethod] Calling client.subscribe()...");try{let e=await o.subscribe();if(console.debug("[safelyExecuteSdkMethod] client.subscribe() returned successfully."),!L.current)return!1;return e||console.warn("client.subscribe() returned falsy value"),console.log(`Successfully subscribed on endpoint: ${i}`),N(!0),R.current=!0,t&&(console.log("Calling onConnected callback..."),t()),!0}catch(e){throw console.error(`Error during client.subscribe() on ${i}:`,e),N(!1),R.current=!1,e}})},i),!L.current)return;N(!0),R.current=!0,console.log(`Successfully subscribed via ${i}`)}if(!a)try{await g(2e3),$&&console.debug("Attempting to fetch user accounts..."),await v(async()=>{if(!o)throw Error("Client not available for getUserAccounts");if(!D)throw Error("Public key not available for getUserAccounts");let e=await j("client.getUserAccountsForAuthority",async()=>{if(!o.connection)throw Error("Client connection is null before getUserAccounts");return await o.getUserAccountsForAuthority(D)},[]);L.current&&l(e||[])},i)}catch(e){console.warn(`Failed to fetch user accounts via ${i} (non-fatal):`,e),L.current&&l([])}e=!0,L.current&&C(!1),console.log(`Drift client fully initialized and subscribed via ${i}`)}catch(t){if(!L.current)return;console.error(`Error during initialization/subscription: ${t.message||"Unknown error"}`,t),$&&console.debug("Error details:",{endpoint:i,message:t.message,name:t.name,stack:t.stack,isRateLimitError:t instanceof m});let e=t.message?.includes("Cannot read properties of null");if(t instanceof m||e){let e=t instanceof m?"Rate limit":"Null reference";console.warn(`${e} error hit on ${i}, trying next endpoint...`),await g(1e3)}else console.error(`Failed to initialize/subscribe via ${i} after retries:`,t),await g(1e3)}r++}!e&&L.current&&(console.error("Failed to initialize Drift client after trying all RPC endpoints."),h("Failed to connect to Drift after trying all available RPC endpoints."),C(!1),u.toast.error("Could not connect to Drift. Please try again later or check network."))})(),()=>{L.current=!1,console.log("DriftClientProvider cleaning up..."),r&&R.current&&r.unsubscribe().catch(e=>{console.error("Error unsubscribing from Drift client:",e)}),R.current=!1,I.current=!1}),[D,O,A,t,$]),s.jsx(p.Provider,{value:{driftClient:r,userAccounts:a,error:d,isLoading:E,isConnected:x,isSubscribed:w,currentRpcEndpoint:k},children:e})}let N=()=>{let e=(0,o.useContext)(p);if(void 0===e)throw Error("useDriftClient must be used within a DriftClientProvider");return e};var E=r(87292),C=r(99119),S=r(61351),P=r(91626),k=r(19868);function T({title:e,value:t,change:r,icon:n,className:a,trend:i,subtitle:o}){return s.jsx(E.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},whileHover:{y:-5},className:(0,P.cn)("gradient-border",a),children:s.jsx(S.Zb,{className:"glass-effect border-none h-full",children:s.jsx(S.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-400",children:e}),(0,s.jsxs)("div",{className:"flex items-center mt-1",children:[s.jsx("p",{className:"text-2xl font-bold",children:t}),"up"===i&&s.jsx(k.iRh,{className:"text-green-400 ml-2"}),"down"===i&&s.jsx(k.tv1,{className:"text-red-400 ml-2"})]}),r&&s.jsx("p",{className:(0,P.cn)("text-sm mt-1",r.startsWith("+")?"text-green-400":"text-red-400"),children:r}),o&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o})]}),n&&s.jsx("div",{className:"p-3 rounded-full bg-gray-800 bg-opacity-50 glow-effect",children:n})]})})})})}var D=r(16212),O=r(92549),A=r(1586);function R(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(e?.(n),!1===r||!n.defaultPrevented)return t?.(n)}}var I=r(31405);function L(e,t=[]){let r=[],n=()=>{let t=r.map(e=>o.createContext(e));return function(r){let n=r?.[e]||t;return o.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let a=o.createContext(n),i=r.length;r=[...r,n];let l=t=>{let{scope:r,children:n,...l}=t,c=r?.[e]?.[i]||a,d=o.useMemo(()=>l,Object.values(l));return(0,s.jsx)(c.Provider,{value:d,children:n})};return l.displayName=t+"Provider",[l,function(r,s){let l=s?.[e]?.[i]||a,c=o.useContext(l);if(c)return c;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let s=r(e)[`__scope${n}`];return{...t,...s}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}var $=globalThis?.document?o.useLayoutEffect:()=>{},F=l[" useId ".trim().toString()]||(()=>void 0),M=0;function _(e){let[t,r]=o.useState(F());return $(()=>{e||r(e=>e??String(M++))},[e]),e||(t?`radix-${t}`:"")}function z(e){let t=o.useRef(e);return o.useEffect(()=>{t.current=e}),o.useMemo(()=>(...e)=>t.current?.(...e),[])}var U=r(81202),q=r(32751),W=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=(0,q.Z8)(`Primitive.${t}`),n=o.forwardRef((e,n)=>{let{asChild:a,...i}=e,o=a?r:t;return(0,s.jsx)(o,{...i,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),B="dismissableLayer.update",K=o.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),H=o.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:l,onInteractOutside:c,onDismiss:d,...u}=e,m=o.useContext(K),[p,f]=o.useState(null),h=p?.ownerDocument??globalThis?.document,[,x]=o.useState({}),g=(0,I.e)(t,e=>f(e)),y=Array.from(m.layers),[v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(v),j=p?y.indexOf(p):-1,w=m.layersWithOutsidePointerEventsDisabled.size>0,N=j>=b,E=function(e,t=globalThis?.document){let r=z(e),n=o.useRef(!1),s=o.useRef(()=>{});return o.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){Y("dismissableLayer.pointerDownOutside",r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=n,t.addEventListener("click",s.current,{once:!0})):n()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...m.branches].some(e=>e.contains(t));!N||r||(i?.(e),c?.(e),e.defaultPrevented||d?.())},h),C=function(e,t=globalThis?.document){let r=z(e),n=o.useRef(!1);return o.useEffect(()=>{let e=e=>{e.target&&!n.current&&Y("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;[...m.branches].some(e=>e.contains(t))||(l?.(e),c?.(e),e.defaultPrevented||d?.())},h);return function(e,t=globalThis?.document){let r=z(e);o.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{j!==m.layers.size-1||(a?.(e),!e.defaultPrevented&&d&&(e.preventDefault(),d()))},h),o.useEffect(()=>{if(p)return r&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(n=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),Z(),()=>{r&&1===m.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=n)}},[p,h,r,m]),o.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),Z())},[p,m]),o.useEffect(()=>{let e=()=>x({});return document.addEventListener(B,e),()=>document.removeEventListener(B,e)},[]),(0,s.jsx)(W.div,{...u,ref:g,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:R(e.onFocusCapture,C.onFocusCapture),onBlurCapture:R(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:R(e.onPointerDownCapture,E.onPointerDownCapture)})});function Z(){let e=new CustomEvent(B);document.dispatchEvent(e)}function Y(e,t,r,{discrete:n}){let s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});(t&&s.addEventListener(e,t,{once:!0}),n)?s&&U.flushSync(()=>s.dispatchEvent(a)):s.dispatchEvent(a)}H.displayName="DismissableLayer",o.forwardRef((e,t)=>{let r=o.useContext(K),n=o.useRef(null),a=(0,I.e)(t,n);return o.useEffect(()=>{let e=n.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,s.jsx)(W.div,{...e,ref:a})}).displayName="DismissableLayerBranch";var Q="focusScope.autoFocusOnMount",V="focusScope.autoFocusOnUnmount",X={bubbles:!1,cancelable:!0},G=o.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...l}=e,[c,d]=o.useState(null),u=z(a),m=z(i),p=o.useRef(null),f=(0,I.e)(t,e=>d(e)),h=o.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;o.useEffect(()=>{if(n){let e=function(e){if(h.paused||!c)return;let t=e.target;c.contains(t)?p.current=t:et(p.current,{select:!0})},t=function(e){if(h.paused||!c)return;let t=e.relatedTarget;null===t||c.contains(t)||et(p.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&et(c)});return c&&r.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,c,h.paused]),o.useEffect(()=>{if(c){er.add(h);let e=document.activeElement;if(!c.contains(e)){let t=new CustomEvent(Q,X);c.addEventListener(Q,u),c.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(et(n,{select:t}),document.activeElement!==r)return}(J(c).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&et(c))}return()=>{c.removeEventListener(Q,u),setTimeout(()=>{let t=new CustomEvent(V,X);c.addEventListener(V,m),c.dispatchEvent(t),t.defaultPrevented||et(e??document.body,{select:!0}),c.removeEventListener(V,m),er.remove(h)},0)}}},[c,u,m,h]);let x=o.useCallback(e=>{if(!r&&!n||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){let t=e.currentTarget,[n,a]=function(e){let t=J(e);return[ee(t,e),ee(t.reverse(),e)]}(t);n&&a?e.shiftKey||s!==a?e.shiftKey&&s===n&&(e.preventDefault(),r&&et(a,{select:!0})):(e.preventDefault(),r&&et(n,{select:!0})):s===t&&e.preventDefault()}},[r,n,h.paused]);return(0,s.jsx)(W.div,{tabIndex:-1,...l,ref:f,onKeyDown:x})});function J(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ee(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function et(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}G.displayName="FocusScope";var er=function(){let e=[];return{add(t){let r=e[0];t!==r&&r?.pause(),(e=en(e,t)).unshift(t)},remove(t){e=en(e,t),e[0]?.resume()}}}();function en(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}var es=o.forwardRef((e,t)=>{let{container:r,...n}=e,[a,i]=o.useState(!1);$(()=>i(!0),[]);let l=r||a&&globalThis?.document?.body;return l?U.createPortal((0,s.jsx)(W.div,{...n,ref:t}),l):null});es.displayName="Portal";var ea=e=>{let{present:t,children:r}=e,n=function(e){var t,r;let[n,s]=o.useState(),a=o.useRef({}),i=o.useRef(e),l=o.useRef("none"),[c,d]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},o.useReducer((e,t)=>r[e][t]??e,t));return o.useEffect(()=>{let e=ei(a.current);l.current="mounted"===c?e:"none"},[c]),$(()=>{let t=a.current,r=i.current;if(r!==e){let n=l.current,s=ei(t);e?d("MOUNT"):"none"===s||t?.display==="none"?d("UNMOUNT"):r&&n!==s?d("ANIMATION_OUT"):d("UNMOUNT"),i.current=e}},[e,d]),$(()=>{if(n){let e;let t=n.ownerDocument.defaultView??window,r=r=>{let s=ei(a.current).includes(r.animationName);if(r.target===n&&s&&(d("ANIMATION_END"),!i.current)){let r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)})}},s=e=>{e.target===n&&(l.current=ei(a.current))};return n.addEventListener("animationstart",s),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",s),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}d("ANIMATION_END")},[n,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:o.useCallback(e=>{e&&(a.current=getComputedStyle(e)),s(e)},[])}}(t),s="function"==typeof r?r({present:n.isPresent}):o.Children.only(r),a=(0,I.e)(n.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s));return"function"==typeof r||n.isPresent?o.cloneElement(s,{ref:a}):null};function ei(e){return e?.animationName||"none"}ea.displayName="Presence";var eo=0;function el(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ec=r(62824),ed=r(63992),eu=r(39124),em=(0,r(55610)._)(),ep=function(){},ef=o.forwardRef(function(e,t){var r=o.useRef(null),n=o.useState({onScrollCapture:ep,onWheelCapture:ep,onTouchMoveCapture:ep}),s=n[0],a=n[1],i=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,m=e.shards,p=e.sideCar,f=e.noIsolation,h=e.inert,x=e.allowPinchZoom,g=e.as,y=e.gapMode,v=(0,ec._T)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=(0,eu.q)([r,t]),j=(0,ec.pi)((0,ec.pi)({},v),s);return o.createElement(o.Fragment,null,u&&o.createElement(p,{sideCar:em,removeScrollBar:d,shards:m,noIsolation:f,inert:h,setCallbacks:a,allowPinchZoom:!!x,lockRef:r,gapMode:y}),i?o.cloneElement(o.Children.only(l),(0,ec.pi)((0,ec.pi)({},j),{ref:b})):o.createElement(void 0===g?"div":g,(0,ec.pi)({},j,{className:c,ref:b}),l))});ef.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ef.classNames={fullWidth:ed.zi,zeroRight:ed.pF};var eh=r(57295),ex=r(78464),eg=r(12516),ey=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===r[t])},ev=function(e,t){var r=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),eb(e,n)){var s=ej(e,n);if(s[1]>s[2])return!0}n=n.parentNode}while(n&&n!==r.body);return!1},eb=function(e,t){return"v"===e?ey(t,"overflowY"):ey(t,"overflowX")},ej=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},ew=function(e,t,r,n,s){var a,i=(a=window.getComputedStyle(t).direction,"h"===e&&"rtl"===a?-1:1),o=i*n,l=r.target,c=t.contains(l),d=!1,u=o>0,m=0,p=0;do{var f=ej(e,l),h=f[0],x=f[1]-f[2]-i*h;(h||x)&&eb(e,l)&&(m+=x,p+=h),l=l instanceof ShadowRoot?l.host:l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return u&&(s&&1>Math.abs(m)||!s&&o>m)?d=!0:!u&&(s&&1>Math.abs(p)||!s&&-o>p)&&(d=!0),d},eN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eE=function(e){return[e.deltaX,e.deltaY]},eC=function(e){return e&&"current"in e?e.current:e},eS=0,eP=[];let ek=(0,eh.L)(em,function(e){var t=o.useRef([]),r=o.useRef([0,0]),n=o.useRef(),s=o.useState(eS++)[0],a=o.useState(eg.Ws)[0],i=o.useRef(e);o.useEffect(function(){i.current=e},[e]),o.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var t=(0,ec.ev)([e.lockRef.current],(e.shards||[]).map(eC),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=o.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var s,a=eN(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=ev(u,d);if(!m)return!0;if(m?s=u:(s="v"===u?"h":"v",m=ev(u,d)),!m)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=s),!s)return!0;var p=n.current||s;return ew(p,t,e,"h"===p?l:c,!0)},[]),c=o.useCallback(function(e){if(eP.length&&eP[eP.length-1]===a){var r="deltaY"in e?eE(e):eN(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta)[0]===r[0]&&n[1]===r[1]})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var s=(i.current.shards||[]).map(eC).filter(Boolean).filter(function(t){return t.contains(e.target)});(s.length>0?l(e,s[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),d=o.useCallback(function(e,r,n,s){var a={name:e,delta:r,target:n,should:s,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),u=o.useCallback(function(e){r.current=eN(e),n.current=void 0},[]),m=o.useCallback(function(t){d(t.type,eE(t),t.target,l(t,e.lockRef.current))},[]),p=o.useCallback(function(t){d(t.type,eN(t),t.target,l(t,e.lockRef.current))},[]);o.useEffect(function(){return eP.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,!1),document.addEventListener("touchmove",c,!1),document.addEventListener("touchstart",u,!1),function(){eP=eP.filter(function(e){return e!==a}),document.removeEventListener("wheel",c,!1),document.removeEventListener("touchmove",c,!1),document.removeEventListener("touchstart",u,!1)}},[]);var f=e.removeScrollBar,h=e.inert;return o.createElement(o.Fragment,null,h?o.createElement(a,{styles:"\n  .block-interactivity-".concat(s," {pointer-events: none;}\n  .allow-interactivity-").concat(s," {pointer-events: all;}\n")}):null,f?o.createElement(ex.jp,{gapMode:e.gapMode}):null)});var eT=o.forwardRef(function(e,t){return o.createElement(ef,(0,ec.pi)({},e,{ref:t,sideCar:ek}))});eT.classNames=ef.classNames;var eD=r(45904),eO="Dialog",[eA,eR]=L(eO),[eI,eL]=eA(eO),e$=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=o.useRef(null),d=o.useRef(null),[u=!1,m]=function({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,s]=function({defaultProp:e,onChange:t}){let r=o.useState(e),[n]=r,s=o.useRef(n),a=z(t);return o.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}({defaultProp:t,onChange:r}),a=void 0!==e,i=a?e:n,l=z(r);return[i,o.useCallback(t=>{if(a){let r="function"==typeof t?t(e):t;r!==e&&l(r)}else s(t)},[a,e,s,l])]}({prop:n,defaultProp:a,onChange:i});return(0,s.jsx)(eI,{scope:t,triggerRef:c,contentRef:d,contentId:_(),titleId:_(),descriptionId:_(),open:u,onOpenChange:m,onOpenToggle:o.useCallback(()=>m(e=>!e),[m]),modal:l,children:r})};e$.displayName=eO;var eF="DialogTrigger",eM=o.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=eL(eF,r),i=(0,I.e)(t,a.triggerRef);return(0,s.jsx)(W.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":e3(a.open),...n,ref:i,onClick:R(e.onClick,a.onOpenToggle)})});eM.displayName=eF;var e_="DialogPortal",[ez,eU]=eA(e_,{forceMount:void 0}),eq=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=eL(e_,t);return(0,s.jsx)(ez,{scope:t,forceMount:r,children:o.Children.map(n,e=>(0,s.jsx)(ea,{present:r||i.open,children:(0,s.jsx)(es,{asChild:!0,container:a,children:e})}))})};eq.displayName=e_;var eW="DialogOverlay",eB=o.forwardRef((e,t)=>{let r=eU(eW,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=eL(eW,e.__scopeDialog);return i.modal?(0,s.jsx)(ea,{present:n||i.open,children:(0,s.jsx)(eH,{...a,ref:t})}):null});eB.displayName=eW;var eK=(0,q.Z8)("DialogOverlay.RemoveScroll"),eH=o.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=eL(eW,r);return(0,s.jsx)(eT,{as:eK,allowPinchZoom:!0,shards:[a.contentRef],children:(0,s.jsx)(W.div,{"data-state":e3(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),eZ="DialogContent",eY=o.forwardRef((e,t)=>{let r=eU(eZ,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=eL(eZ,e.__scopeDialog);return(0,s.jsx)(ea,{present:n||i.open,children:i.modal?(0,s.jsx)(eQ,{...a,ref:t}):(0,s.jsx)(eV,{...a,ref:t})})});eY.displayName=eZ;var eQ=o.forwardRef((e,t)=>{let r=eL(eZ,e.__scopeDialog),n=o.useRef(null),a=(0,I.e)(t,r.contentRef,n);return o.useEffect(()=>{let e=n.current;if(e)return(0,eD.Ry)(e)},[]),(0,s.jsx)(eX,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:R(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:R(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:R(e.onFocusOutside,e=>e.preventDefault())})}),eV=o.forwardRef((e,t)=>{let r=eL(eZ,e.__scopeDialog),n=o.useRef(!1),a=o.useRef(!1);return(0,s.jsx)(eX,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(a.current=!0));let s=t.target;r.triggerRef.current?.contains(s)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),eX=o.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...l}=e,c=eL(eZ,r),d=o.useRef(null),u=(0,I.e)(t,d);return o.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??el()),document.body.insertAdjacentElement("beforeend",e[1]??el()),eo++,()=>{1===eo&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),eo--}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:(0,s.jsx)(H,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":e3(c.open),...l,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e7,{titleId:c.titleId}),(0,s.jsx)(e9,{contentRef:d,descriptionId:c.descriptionId})]})]})}),eG="DialogTitle",eJ=o.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=eL(eG,r);return(0,s.jsx)(W.h2,{id:a.titleId,...n,ref:t})});eJ.displayName=eG;var e0="DialogDescription",e1=o.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=eL(e0,r);return(0,s.jsx)(W.p,{id:a.descriptionId,...n,ref:t})});e1.displayName=e0;var e2="DialogClose",e4=o.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=eL(e2,r);return(0,s.jsx)(W.button,{type:"button",...n,ref:t,onClick:R(e.onClick,()=>a.onOpenChange(!1))})});function e3(e){return e?"open":"closed"}e4.displayName=e2;var e5="DialogTitleWarning",[e6,e8]=function(e,t){let r=o.createContext(t),n=e=>{let{children:t,...n}=e,a=o.useMemo(()=>n,Object.values(n));return(0,s.jsx)(r.Provider,{value:a,children:t})};return n.displayName=e+"Provider",[n,function(n){let s=o.useContext(r);if(s)return s;if(void 0!==t)return t;throw Error(`\`${n}\` must be used within \`${e}\``)}]}(e5,{contentName:eZ,titleName:eG,docsSlug:"dialog"}),e7=({titleId:e})=>{let t=e8(e5),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return o.useEffect(()=>{e&&!document.getElementById(e)&&console.error(r)},[r,e]),null},e9=({contentRef:e,descriptionId:t})=>{let r=e8("DialogDescriptionWarning"),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return o.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&!document.getElementById(t)&&console.warn(n)},[n,e,t]),null};let te=(0,r(97075).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tt=o.forwardRef(({className:e,...t},r)=>s.jsx(eB,{ref:r,className:(0,P.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));tt.displayName=eB.displayName;let tr=o.forwardRef(({className:e,children:t,...r},n)=>(0,s.jsxs)(eq,{children:[s.jsx(tt,{}),(0,s.jsxs)(eY,{ref:n,className:(0,P.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,s.jsxs)(e4,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(te,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tr.displayName=eY.displayName;let tn=({className:e,...t})=>s.jsx("div",{className:(0,P.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});tn.displayName="DialogHeader";let ts=o.forwardRef(({className:e,...t},r)=>s.jsx(eJ,{ref:r,className:(0,P.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));ts.displayName=eJ.displayName,o.forwardRef(({className:e,...t},r)=>s.jsx(e1,{ref:r,className:(0,P.cn)("text-sm text-muted-foreground",e),...t})).displayName=e1.displayName;let ta=({subAccountId:e})=>{let{driftClient:t,isSubscribed:r}=N(),{publicKey:n}=(0,i.O)(),[a,l]=(0,o.useState)(""),[d,m]=(0,o.useState)("deposit"),[p,f]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!1),g=async()=>{if(!t||!r){u.toast.error("Not connected or subscribed to Drift protocol");return}if(!n){u.toast.error("Wallet not connected");return}if(!a||isNaN(parseFloat(a))||0>=parseFloat(a)){u.toast.error("Please enter a valid positive amount");return}f(!0);try{let r;let s=new c.BN(1e6*parseFloat(a));if("deposit"===d)r=await t.deposit(s,c.QUOTE_SPOT_MARKET_INDEX,n,e),u.toast.success(`Deposited ${a} USDC successfully`);else{if(t.activeSubAccountId!==e){u.toast.error(`Please ensure subaccount ${e} is selected as active before withdrawing.`),f(!1);return}r=await t.withdraw(s,c.QUOTE_SPOT_MARKET_INDEX,n),u.toast.success(`Withdrawn ${a} USDC successfully`)}console.log(`${d} transaction: ${r}`),await t.connection.confirmTransaction(r,"confirmed"),l(""),x(!1)}catch(e){console.error(`${d} error:`,e),u.toast.error(`Failed to ${d}: ${e.message}`)}finally{f(!1)}};return(0,s.jsxs)(e$,{open:h,onOpenChange:x,children:[s.jsx(eM,{asChild:!0,children:s.jsx(D.z,{variant:"outline",size:"sm",children:"Deposit / Withdraw"})}),(0,s.jsxs)(tr,{children:[s.jsx(tn,{children:(0,s.jsxs)(ts,{children:["deposit"===d?"Deposit":"Withdraw"," USDC to/from Subaccount #",e]})}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"flex justify-center space-x-2",children:[s.jsx(D.z,{variant:"deposit"===d?"default":"outline",onClick:()=>m("deposit"),disabled:p,children:"Deposit"}),s.jsx(D.z,{variant:"withdraw"===d?"default":"outline",onClick:()=>m("withdraw"),disabled:p,children:"Withdraw"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"transfer-amount",children:"Amount"}),s.jsx(O.I,{id:"transfer-amount",type:"number",value:a,onChange:e=>l(e.target.value),placeholder:"e.g., 100",disabled:p})]}),s.jsx(D.z,{onClick:g,disabled:p||!a,className:"w-full",children:p?"Processing...":`Confirm ${d}`})]})]})]})};var ti=r(17470);function to({subAccountId:e,trigger:t}){let[r,n]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[d,m]=(0,o.useState)("market"),[p,f]=(0,o.useState)("long"),[h,x]=(0,o.useState)(!1),{driftClient:g}=N(),{publicKey:y}=(0,i.O)(),v=async()=>{if(g&&y&&r)try{x(!0);let e=new c.BN(1e6*parseFloat(r)),t=new c.BN("limit"===d?1e6*parseFloat(a):0),n={marketIndex:0,marketType:c.MarketType.PERP,direction:"long"===p?c.PositionDirection.LONG:c.PositionDirection.SHORT,baseAssetAmount:e,price:t,orderType:"market"===d?c.OrderType.MARKET:c.OrderType.LIMIT,userOrderId:Math.floor(1e6*Math.random()),reduceOnly:!1,postOnly:!1,immediateOrCancel:!1,triggerPrice:null,triggerCondition:c.OrderTriggerCondition.ABOVE,oraclePriceOffset:null,auctionDuration:null,auctionStartPrice:null,auctionEndPrice:null,maxTs:null},s=await g.placeOrders([n]),i=await g.sendTransaction(s);u.toast.loading("Confirming order..."),await g.connection.confirmTransaction(i.toString(),"confirmed"),u.toast.success("Order placed successfully!")}catch(e){console.error("Error placing order:",e),u.toast.error("Failed to place order")}finally{x(!1)}};return(0,s.jsxs)(e$,{children:[s.jsx(eM,{asChild:!0,children:t}),(0,s.jsxs)(tr,{children:[s.jsx(tn,{children:s.jsx(ts,{children:"Place Order"})}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"direction",children:"Direction"}),(0,s.jsxs)(ti.Ph,{value:p,onValueChange:e=>f(e),children:[s.jsx(ti.i4,{children:s.jsx(ti.ki,{placeholder:"Select direction"})}),(0,s.jsxs)(ti.Bw,{children:[s.jsx(ti.Ql,{value:"long",children:"Long"}),s.jsx(ti.Ql,{value:"short",children:"Short"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"order-type",children:"Order Type"}),(0,s.jsxs)(ti.Ph,{value:d,onValueChange:e=>m(e),children:[s.jsx(ti.i4,{children:s.jsx(ti.ki,{placeholder:"Select order type"})}),(0,s.jsxs)(ti.Bw,{children:[s.jsx(ti.Ql,{value:"market",children:"Market"}),s.jsx(ti.Ql,{value:"limit",children:"Limit"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"amount",children:"Amount (SOL)"}),s.jsx(O.I,{id:"amount",type:"number",placeholder:"Enter amount",value:r,onChange:e=>n(e.target.value),min:"0",step:"0.000001"})]}),"limit"===d&&(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"price",children:"Price (USDC)"}),s.jsx(O.I,{id:"price",type:"number",placeholder:"Enter price",value:a,onChange:e=>l(e.target.value),min:"0",step:"0.000001"})]}),s.jsx(D.z,{className:"w-full",onClick:v,disabled:!r||"limit"===d&&!a||h,children:h?(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"animate-spin mr-2",children:"⏳"}),"Processing..."]}):"Place Order"})]})]})]})}var tl=l[" useInsertionEffect ".trim().toString()]||$,tc=(Symbol("RADIX:SYNC_STATE"),["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,q.Z8)(`Primitive.${t}`),n=o.forwardRef((e,n)=>{let{asChild:a,...i}=e,o=a?r:t;return(0,s.jsx)(o,{...i,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{})),td="Checkbox",[tu,tm]=L(td),[tp,tf]=tu(td),th=o.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:l,disabled:c,value:d="on",onCheckedChange:u,form:m,...p}=e,[f,h]=o.useState(null),x=(0,I.e)(t,e=>h(e)),g=o.useRef(!1),y=!f||m||!!f.closest("form"),[v,b]=function({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){let[s,a,i]=function({defaultProp:e,onChange:t}){let[r,n]=o.useState(e),s=o.useRef(r),a=o.useRef(t);return tl(()=>{a.current=t},[t]),o.useEffect(()=>{s.current!==r&&(a.current?.(r),s.current=r)},[r,s]),[r,n,a]}({defaultProp:t,onChange:r}),l=void 0!==e,c=l?e:s;{let t=o.useRef(void 0!==e);o.useEffect(()=>{let e=t.current;if(e!==l){let t=l?"controlled":"uncontrolled";console.warn(`${n} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=l},[l,n])}return[c,o.useCallback(t=>{if(l){let r="function"==typeof t?t(e):t;r!==e&&i.current?.(r)}else a(t)},[l,e,a,i])]}({prop:a,defaultProp:i??!1,onChange:u,caller:td}),j=o.useRef(v);return o.useEffect(()=>{let e=f?.form;if(e){let t=()=>b(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[f,b]),(0,s.jsxs)(tp,{scope:r,state:v,disabled:c,children:[(0,s.jsx)(tc.button,{type:"button",role:"checkbox","aria-checked":tv(v)?"mixed":v,"aria-required":l,"data-state":tb(v),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:x,onKeyDown:R(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:R(e.onClick,e=>{b(e=>!!tv(e)||!e),y&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),y&&(0,s.jsx)(ty,{control:f,bubbles:!g.current,name:n,value:d,checked:v,required:l,disabled:c,form:m,style:{transform:"translateX(-100%)"},defaultChecked:!tv(i)&&i})]})});th.displayName=td;var tx="CheckboxIndicator",tg=o.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...a}=e,i=tf(tx,r);return(0,s.jsx)(ea,{present:n||tv(i.state)||!0===i.state,children:(0,s.jsx)(tc.span,{"data-state":tb(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});tg.displayName=tx;var ty=o.forwardRef(({__scopeCheckbox:e,control:t,checked:r,bubbles:n=!0,defaultChecked:a,...i},l)=>{let c=o.useRef(null),d=(0,I.e)(c,l),u=function(e){let t=o.useRef({value:e,previous:e});return o.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(r),m=function(e){let[t,r]=o.useState(void 0);return $(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,s;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,s=t.blockSize}else n=e.offsetWidth,s=e.offsetHeight;r({width:n,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(t);o.useEffect(()=>{let e=c.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==r&&t){let s=new Event("click",{bubbles:n});e.indeterminate=tv(r),t.call(e,!tv(r)&&r),e.dispatchEvent(s)}},[u,r,n]);let p=o.useRef(!tv(r)&&r);return(0,s.jsx)(tc.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??p.current,...i,tabIndex:-1,ref:d,style:{...i.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function tv(e){return"indeterminate"===e}function tb(e){return tv(e)?"indeterminate":e?"checked":"unchecked"}ty.displayName="CheckboxBubbleInput";var tj=r(62312);let tw=o.forwardRef(({className:e,...t},r)=>s.jsx(th,{ref:r,className:(0,P.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(tg,{className:(0,P.cn)("flex items-center justify-center text-current"),children:s.jsx(tj.Z,{className:"h-4 w-4"})})}));function tN({subAccountId:e,trigger:t,marketIndex:r=0}){let[n,a]=(0,o.useState)(c.PositionDirection.LONG),[l,d]=(0,o.useState)(c.OrderType.MARKET),[m,p]=(0,o.useState)(""),[f,h]=(0,o.useState)(""),[x,g]=(0,o.useState)(!1),[y,v]=(0,o.useState)(""),[b,j]=(0,o.useState)(""),[w,C]=(0,o.useState)(!1),{driftClient:S}=N(),{publicKey:P}=(0,i.O)(),k=async()=>{u.toast.loading("Placing order logic needs to be implemented."),console.log("Placing order with:",{direction:n,orderType:l,amount:m,price:f,addTpSl:x,tpPrice:y,slPrice:b,marketIndex:r,subAccountId:e})};return(0,s.jsxs)(e$,{children:[s.jsx(eM,{asChild:!0,children:t}),(0,s.jsxs)(tr,{className:"max-w-md",children:[s.jsx(tn,{children:(0,s.jsxs)(ts,{children:["Place Advanced Order (Subaccount ",e,")"]})}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"direction",children:"Direction"}),(0,s.jsxs)(ti.Ph,{value:n===c.PositionDirection.LONG?"long":"short",onValueChange:e=>a("long"===e?c.PositionDirection.LONG:c.PositionDirection.SHORT),children:[s.jsx(ti.i4,{id:"direction",children:s.jsx(ti.ki,{placeholder:"Select direction"})}),(0,s.jsxs)(ti.Bw,{children:[s.jsx(ti.Ql,{value:"long",children:"Long"}),s.jsx(ti.Ql,{value:"short",children:"Short"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"order-type",children:"Order Type"}),(0,s.jsxs)(ti.Ph,{value:l===c.OrderType.LIMIT?"limit":"market",onValueChange:e=>d("limit"===e?c.OrderType.LIMIT:c.OrderType.MARKET),children:[s.jsx(ti.i4,{id:"order-type",children:s.jsx(ti.ki,{placeholder:"Select order type"})}),(0,s.jsxs)(ti.Bw,{children:[s.jsx(ti.Ql,{value:"limit",children:"Limit"}),s.jsx(ti.Ql,{value:"market",children:"Market"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"amount",children:"Amount (Base Asset)"}),s.jsx(O.I,{id:"amount",type:"number",placeholder:"Enter amount",value:m,onChange:e=>p(e.target.value),min:"0",step:"any"})]}),l===c.OrderType.LIMIT&&(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"price",children:"Limit Price (Quote Asset)"}),s.jsx(O.I,{id:"price",type:"number",placeholder:"Enter limit price",value:f,onChange:e=>h(e.target.value),min:"0",step:"any"})]}),(0,s.jsxs)("div",{className:"space-y-3 pt-4 border-t border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(tw,{id:"add-tp-sl",checked:x,onCheckedChange:e=>g(!!e)}),s.jsx(A._,{htmlFor:"add-tp-sl",className:"cursor-pointer text-base font-medium",children:"Add Take Profit / Stop Loss"})]}),x&&(0,s.jsxs)(E.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"tp-price",children:"Take Profit Trigger Price"}),s.jsx(O.I,{id:"tp-price",type:"number",placeholder:"Enter TP price",value:y,onChange:e=>v(e.target.value),min:"0",step:"any"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"sl-price",children:"Stop Loss Trigger Price"}),s.jsx(O.I,{id:"sl-price",type:"number",placeholder:"Enter SL price",value:b,onChange:e=>j(e.target.value),min:"0",step:"any"})]})]})]}),(0,s.jsxs)(D.z,{className:"w-full",onClick:k,disabled:w||!m||l===c.OrderType.LIMIT&&!f||x&&(!y||!b),children:[w?s.jsx("span",{className:"animate-spin mr-2",children:"⏳"}):"Place Order",x&&y&&b&&" with TP/SL"]})]})]})]})}tw.displayName=th.displayName;var tE=r(11064),tC=r.n(tE);let tS=async(e,t=3,r=2500)=>{let n=0,s=r;for(;;)try{return await e()}catch(r){if(++n>t)throw console.error("Max retries reached for operation.",r),r;let e=r.message?.includes("429")||429===r.status?2*s:s;console.log(`Operation failed (attempt ${n}/${t}). Retrying after ${e/1e3}s delay... Error: ${r.message}`),await tk(e),s=e}},tP=async(e,t)=>{let r=!1,n=10;for(;!r&&n>0;){try{let s=await t.getSignatureStatus(e,{searchTransactionHistory:!0});s&&s.value&&("confirmed"===s.value.confirmationStatus||"finalized"===s.value.confirmationStatus)?(console.log(`Transaction ${e} confirmed with status: ${s.value.confirmationStatus}`),r=!0):(console.log(`Transaction ${e} not confirmed yet. Status:`,s?.value?.confirmationStatus,`Retries left: ${n-1}`),await tk(3e3))}catch(t){console.error(`Error checking transaction status for ${e}:`,t);break}n--}return r},tk=e=>new Promise(t=>setTimeout(t,e));function tT(){let{driftClient:e,userAccounts:t,isLoading:r,isSubscribed:n,error:a}=N(),{publicKey:l}=(0,i.O)(),[c,m]=(0,o.useState)(!1),[p,f]=(0,o.useState)(null),[h,x]=(0,o.useState)(null),[g,y]=(0,o.useState)(!1),[v,b]=(0,o.useState)(""),[j,w]=(0,o.useState)(null),[P,R]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let t=async()=>{p&&e&&(u.toast.loading("Verifying transaction..."),await tP(p,e.connection)?u.toast.success("Transaction confirmed! Subaccount created."):u.toast.error("Transaction confirmation failed or timed out."),f(null),x(null))};p&&t()},[p,e]);let I=async()=>{if(r||!n||!e||!l){let t=r?"Client loading":n?e?l?"Unknown reason":"Wallet not connected":"Client not available":"Client not subscribed";console.error(`Create subaccount prerequisites not met: ${t}`),u.toast?.error(`Cannot create subaccount: ${t}`);return}m(!0),console.log("Attempting to create subaccount...");try{let r=(t||[]).map(e=>e.subAccountId).sort((e,t)=>e-t),n=0;for(;r.includes(n);)n++;console.log(`Using nextSubAccountId: ${n}`),console.log("About to call initializeUserAccount...");let[s,a]=await tS(async()=>await e.initializeUserAccount());console.log("Subaccount creation transaction sent:",s),console.log("New subaccount public key:",a.toBase58()),f(s),x(a),u.toast.loading("Transaction sent! Waiting for confirmation...")}catch(t){console.error("Error creating subaccount:",t);let e="Failed to create subaccount";t instanceof Error&&(e+=`: ${t.message}`),u.toast?.error(e)}finally{m(!1)}},L=async t=>{if(!e){u.toast.error("Drift client not initialized");return}try{let r=new d.PublicKey(t);R(!0),w(null);let n=await tS(async()=>await e.getUserAccountsForAuthority(r),5,1e3);w(n),y(!0),u.toast.success(`Viewing subaccounts for wallet: ${t.substring(0,6)}...`)}catch(e){console.error("Error viewing wallet:",e),w(null),u.toast.error("Could not fetch accounts for this address.")}finally{R(!1)}},$=()=>{y(!1),w(null),b("")},F={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},M={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",damping:15,stiffness:100}},hover:{y:-5,transition:{type:"spring",damping:10,stiffness:100}}},_=g?j:t,z=g?P:r;return z&&(!_||0===_.length)?(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-[400px] gap-6",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary"}),s.jsx(E.E.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-gray-400 text-lg",children:g?"Loading specified wallet accounts...":"Loading your subaccounts..."})]}):z||_&&0!==_.length?(0,s.jsxs)(E.E.div,{variants:F,initial:"hidden",animate:"visible",className:"space-y-12",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx(E.E.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"text-2xl font-bold gradient-text",children:g?`Viewing: ${v.substring(0,6)}...`:"Your Subaccounts"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(e$,{children:[s.jsx(eM,{asChild:!0,children:(0,s.jsxs)(D.z,{variant:"outline",className:"flex items-center gap-2",children:[s.jsx(k.bAx,{className:"text-lg"}),"View Other Wallet"]})}),(0,s.jsxs)(tr,{children:[s.jsx(tn,{children:s.jsx(ts,{children:"View Wallet Subaccounts"})}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(A._,{htmlFor:"wallet-address",children:"Wallet Address"}),s.jsx(O.I,{id:"wallet-address",placeholder:"Enter Solana wallet address",value:v,onChange:e=>b(e.target.value)})]}),(0,s.jsxs)(D.z,{className:"w-full",onClick:()=>L(v),disabled:!v||P,children:[P?s.jsx(k.dAq,{className:"animate-spin mr-2"}):null,P?"Loading...":"View Subaccounts"]})]})]})]}),g&&(0,s.jsxs)(D.z,{variant:"outline",onClick:$,className:"flex items-center gap-2",children:[s.jsx(k.bAx,{className:"text-lg"}),"Back to My Wallet"]}),s.jsx(D.z,{className:"bg-gray-800 hover:bg-gray-700",onClick:I,disabled:c||r||!n||!l||!!p,children:c?(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.dAq,{className:"animate-spin mr-2"}),"Creating..."]}):p?(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.dAq,{className:"animate-spin mr-2"}),"Confirming..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.OvN,{className:"mr-2"}),"New Subaccount"]})})]})]}),(0,s.jsxs)(E.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(T,{title:"Total Balance",value:"$12,345.67",change:"+2.5%",icon:s.jsx(k.oQC,{className:"text-2xl"}),trend:"up"}),s.jsx(T,{title:"Open Positions",value:"3",icon:s.jsx(k.QqI,{className:"text-2xl"}),subtitle:"Across 2 markets"}),s.jsx(T,{title:"Active Orders",value:"5",icon:s.jsx(k.zFh,{className:"text-2xl"}),subtitle:"2 limit, 3 stop"})]}),(0,s.jsxs)(E.E.div,{variants:F,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[_&&_.map((e,t)=>s.jsx(E.E.div,{variants:M,whileHover:"hover",className:"gradient-border h-full",children:(0,s.jsxs)(S.Zb,{className:"glass-effect border-none h-full",children:[(0,s.jsxs)(S.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsxs)(S.ll,{className:"text-xl font-semibold gradient-text",children:["Subaccount #",e.subAccountId]}),(0,s.jsxs)(E.E.div,{animate:{scale:[1,1.1,1],opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},className:"flex items-center",children:[s.jsx("span",{className:"inline-block w-2 h-2 bg-primary rounded-full mr-2"}),s.jsx("span",{className:"text-sm text-gray-400",children:"Active"})]})]}),s.jsx(S.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-sm text-gray-400 mb-1 flex items-center",children:[s.jsx(k.oQC,{className:"mr-1 text-primary opacity-60"}),"Balance"]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("p",{className:"text-lg font-medium",children:e.spotPositions.filter(e=>e.scaledBalance.gt(new(tC())(0))).map(e=>`${e.scaledBalance.toString()} USDC`).join(", ")||"0 USDC"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-sm text-gray-400 mb-1 flex items-center",children:[s.jsx(k.bAx,{className:"mr-1 text-secondary opacity-60"}),"Perp Positions"]}),(0,s.jsxs)("div",{className:"space-y-2",children:[e.perpPositions.filter(e=>!e.baseAssetAmount.isZero()).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-gray-800 bg-opacity-50 hover:bg-opacity-70 transition-all",children:[(0,s.jsxs)("span",{className:"text-sm",children:["Market ",e.marketIndex]}),(0,s.jsxs)("span",{className:`text-sm font-medium ${e.baseAssetAmount.gt(new(tC())(0))?"text-green-400":"text-red-400"}`,children:[e.baseAssetAmount.gt(new(tC())(0))?"Long":"Short"," ",e.baseAssetAmount.abs().toString()]})]},e.marketIndex)),0===e.perpPositions.filter(e=>!e.baseAssetAmount.isZero()).length&&s.jsx("p",{className:"text-sm text-gray-400 p-2",children:"No open positions"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-sm text-gray-400 mb-1 flex items-center",children:[s.jsx(k.zFh,{className:"mr-1 text-accent-purple opacity-60"}),"Open Orders"]}),(0,s.jsxs)("p",{className:"text-lg",children:[e.orders.filter(e=>"open"===e.status).length," ","open orders"]})]}),s.jsx("div",{className:"flex space-x-2 pt-4",children:s.jsx(ta,{subAccountId:e.subAccountId})}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx(to,{subAccountId:e.subAccountId,trigger:(0,s.jsxs)(D.z,{className:"flex-1 group relative overflow-hidden bg-gradient-to-r from-primary to-secondary text-black",children:[s.jsx("span",{className:"absolute top-0 left-0 w-full h-full bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"}),"Trade"]})}),s.jsx(tN,{subAccountId:e.subAccountId,trigger:(0,s.jsxs)(D.z,{variant:"outline",className:"flex-1 group relative overflow-hidden border-purple-500/50 text-purple-400 hover:bg-purple-900/30 hover:text-purple-300 hover:border-purple-500/80",children:[s.jsx("span",{className:"absolute inset-0 w-0 bg-gradient-to-r from-purple-500 to-pink-600 opacity-10 transition-all duration-300 group-hover:w-full"}),"Advanced"]})})]})]})})]})},e.subAccountId)),!g&&s.jsx(E.E.div,{variants:M,whileHover:"hover",className:"gradient-border h-full",children:(0,s.jsxs)(S.Zb,{className:"glass-effect border-none h-full flex flex-col justify-center items-center py-8 cursor-pointer",onClick:I,children:[s.jsx("div",{className:"rounded-full bg-gray-800 p-4 mb-4",children:s.jsx(k.OvN,{className:"text-primary text-2xl"})}),s.jsx("p",{className:"text-gray-400",children:"Create New Subaccount"})]})})]}),s.jsx(C.M,{children:a&&s.jsx(E.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"error-banner bg-red-500/10 border border-red-500/30 text-red-300 p-3 rounded-md",children:(0,s.jsxs)("p",{children:[s.jsx("span",{className:"font-semibold",children:"Provider Error:"})," ",a]})})})]}):s.jsx(E.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto glass-effect rounded-xl p-8 relative overflow-hidden glow-effect",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary to-secondary opacity-60"}),s.jsx("div",{className:"absolute -top-16 -right-16 w-32 h-32 bg-primary opacity-10 rounded-full blur-xl"}),s.jsx("div",{className:"absolute -bottom-16 -left-16 w-32 h-32 bg-secondary opacity-10 rounded-full blur-xl"}),s.jsx(E.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",delay:.2,duration:.8},className:"rounded-full bg-gray-800 p-4 w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:s.jsx(k.zFh,{className:"text-primary text-3xl"})}),s.jsx(E.E.h2,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-2xl font-semibold mb-4 gradient-text",children:g?"No Subaccounts Found for Address":"No Subaccounts Found"}),s.jsx(E.E.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},className:"text-gray-400 mb-8",children:g?`The wallet ${v.substring(0,6)}... has no Drift subaccounts.`:"You don't have any subaccounts yet. Create one to start trading on Drift."}),!g&&s.jsx(E.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5},whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsxs)(D.z,{className:"w-full bg-gradient-to-r from-primary to-secondary text-black relative overflow-hidden group",onClick:I,disabled:c||r||!n||!l||!!p,children:[s.jsx("span",{className:"absolute top-0 left-0 w-full h-full bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"}),c?(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.dAq,{className:"animate-spin mr-2"}),"Creating..."]}):p?(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.dAq,{className:"animate-spin mr-2"}),"Confirming Transaction..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(k.OvN,{className:"mr-2"}),"Create Subaccount"]})]})}),g&&(0,s.jsxs)(D.z,{variant:"outline",onClick:$,className:"flex items-center gap-2",children:[s.jsx(k.bAx,{className:"text-lg"}),"Back to My Wallet"]}),s.jsx(E.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"mt-8 text-xs text-gray-500",children:"Subaccounts help you organize your trading activities"})]})})}var tD=r(74113),tO=r(49921);let tA=[{id:0,name:"Primary Account"},{id:1,name:"Trading Bot"}],tR=[{id:0,name:"Primary Trading",balance:"4,200 USDC",position:{market:"SOL-PERP",direction:"LONG",entry:156.2,size:1.2},openOrders:[{type:"LIMIT",side:"SHORT",market:"BTC-PERP",price:72e3}]},{id:1,name:"ETH Hedge",balance:"2,650 USDC",position:{market:"ETH-PERP",direction:"SHORT",entry:3245,size:.7},openOrders:[]},{id:2,name:"Altcoin Plays",balance:"1,000 USDC",position:null,openOrders:[{type:"MARKET",side:"BUY",market:"APT-PERP",size:.5}]}];function tI(){let{connected:e}=(0,i.O)(),[t,r]=(0,o.useState)(!1),[n,l]=(0,o.useState)("idle"),c=(0,o.useRef)(null),d=(0,o.useCallback)(()=>{c.current&&(clearTimeout(c.current),c.current=null)},[]);(0,o.useEffect)(()=>(r(!0),()=>d()),[d]),(0,o.useEffect)(()=>{e?"idle"===n&&(console.log("Wallet connected, attempting Drift connection..."),l("attempting"),d(),c.current=setTimeout(()=>{console.log("Connection attempt timed out. Falling back to dummy data display."),l("fallback")},7e3)):(console.log("Wallet disconnected."),d(),l("idle"))},[e,d,n]);let u=(0,o.useCallback)(()=>{console.log("handleConnected called: DriftClient connection successful."),d(),"attempting"===n&&l("success")},[d,n]),m={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},p={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:10}}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 relative overflow-hidden",children:[s.jsx(tD.Z,{}),(0,s.jsxs)("div",{className:"fixed inset-0 z-[-1] opacity-20",children:[s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[400px] h-[400px] rounded-full bg-blue-500 blur-[60px] animate-pulse",style:{animationDuration:"12s"}}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[400px] h-[400px] rounded-full bg-indigo-500 blur-[60px] animate-pulse",style:{animationDuration:"18s"}})]}),s.jsx(a.W,{}),s.jsx("main",{className:"pt-28 pb-12 px-4 sm:px-6 lg:px-8 relative z-10",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)(E.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,type:"spring",stiffness:100},className:"text-center mb-12",children:[s.jsx("h1",{className:"text-5xl sm:text-6xl font-bold mb-6 text-white",children:"Trade with Drift"}),s.jsx(E.E.p,{className:"text-gray-400 text-lg max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.7},children:"Trade with confidence on the most advanced decentralized perpetual futures exchange"}),!e&&t&&s.jsx(E.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.8,duration:.5},className:"mt-8",children:s.jsx("button",{className:"btn-primary text-lg px-6 py-3 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Connect Wallet & Start Trading"})})]}),e?s.jsx(w,{onConnected:u,children:(0,s.jsxs)(C.M,{mode:"wait",children:["attempting"===n&&(0,s.jsxs)(E.E.div,{variants:m,initial:"hidden",animate:"show",exit:{opacity:0},className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-300 text-center mb-4",children:"Connecting to Drift..."}),tA.map(e=>s.jsx(E.E.div,{variants:p,children:(0,s.jsxs)(S.Zb,{className:"p-4 bg-gray-800/60 border border-gray-700 rounded-lg animate-pulse",children:[s.jsx(S.Ol,{className:"p-0 mb-2",children:s.jsx("div",{className:"h-5 bg-gray-700 rounded w-3/4"})}),(0,s.jsxs)(S.aY,{className:"p-0 space-y-2",children:[s.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2"}),s.jsx("div",{className:"h-4 bg-gray-700 rounded w-5/6"})]})]})},e.id))]},"loading"),"success"===n&&s.jsx(E.E.div,{variants:m,initial:"hidden",animate:"show",exit:{opacity:0},className:"relative",children:s.jsx(tT,{})},"subaccounts"),"fallback"===n&&(0,s.jsxs)(E.E.div,{variants:m,initial:"hidden",animate:"show",exit:{opacity:0},className:"space-y-6",children:[s.jsx("p",{className:"text-center text-orange-400 text-sm",children:"Connection timed out - showing example data."}),s.jsx("div",{className:"grid gap-4 md:gap-6 md:grid-cols-2 lg:grid-cols-3",children:tR.map(e=>s.jsx(E.E.div,{variants:p,children:(0,s.jsxs)(S.Zb,{className:"shadow-md border border-gray-700 bg-gray-800/70 flex flex-col h-full",children:[s.jsx(S.Ol,{className:"p-3 bg-gray-700/50 rounded-t-lg",children:(0,s.jsxs)("h4",{className:"text-base font-semibold text-gray-200",children:["Subaccount #",e.id," ",(0,s.jsxs)("span",{className:"text-sm font-normal text-gray-400",children:["(",e.name,")"]})]})}),(0,s.jsxs)(S.aY,{className:"p-4 space-y-3 text-sm text-gray-400 flex-grow",children:[(0,s.jsxs)("p",{className:"flex items-center",children:[s.jsx(tO.a_$,{className:"mr-2 text-gray-500"}),s.jsx("span",{className:"font-medium text-gray-200",children:"Balance:"})," ",e.balance]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-gray-200 mb-1 flex items-center",children:[e.position?s.jsx(k.QqI,{className:"mr-2 text-gray-500"}):s.jsx(k.TCC,{className:"mr-2 text-gray-500"})," Position:"]}),e.position?(0,s.jsxs)("div",{className:"pl-4 text-xs space-y-1",children:[(0,s.jsxs)("p",{children:[s.jsx("span",{className:`font-semibold ${"LONG"===e.position.direction?"text-green-400":"text-red-400"}`,children:e.position.direction})," ",e.position.market]}),(0,s.jsxs)("p",{children:["Entry: $",e.position.entry.toFixed(2)," | Size: ",e.position.size]})]}):s.jsx("p",{className:"italic pl-4",children:"No active positions"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-gray-200 mb-1 flex items-center",children:[s.jsx(tO.Z3q,{className:"mr-2 text-gray-500"})," Open Orders:"]}),e.openOrders.length>0?s.jsx("ul",{className:"list-disc list-inside pl-4 text-xs space-y-1",children:e.openOrders.map((e,t)=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("span",{className:`font-semibold ${"BUY"===e.side||"LONG"===e.side?"text-green-400":"text-red-400"}`,children:[e.type," ",e.side]})," ",e.market,"price"in e&&e.price?` @ $${e.price}`:"","size"in e&&e.size?` (Size: ${e.size})`:""]},t))}):s.jsx("p",{className:"italic pl-4",children:"No open orders"})]})]}),s.jsx(S.eW,{className:"p-3 bg-gray-700/30 rounded-b-lg mt-auto",children:s.jsx(D.z,{size:"sm",variant:"ghost",className:"w-full text-xs text-gray-400 hover:bg-gray-700 hover:text-gray-200",children:"View Details (Dummy)"})})]})},e.id))})]},"fallback-dummy")]})}):s.jsx(E.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-center py-10",children:(0,s.jsxs)(E.E.div,{className:"max-w-md mx-auto py-12 px-6 glass-effect rounded-2xl glow-effect",variants:m,initial:"hidden",animate:"show",children:[(0,s.jsxs)(E.E.div,{variants:p,className:"mb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary to-secondary rounded-full mx-auto mb-6 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),s.jsx("h2",{className:"text-3xl font-semibold mb-4 gradient-text",children:"Connect Your Wallet"})]}),s.jsx(E.E.p,{variants:p,className:"text-gray-400 mb-8 max-w-lg mx-auto",children:"Please connect your Solana wallet to access your Drift subaccounts and start trading"}),s.jsx(E.E.div,{variants:p,className:"flex justify-center",children:s.jsx("button",{className:"btn-primary py-3 px-6 text-lg bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Connect Wallet"})})]})})]})})]})}},70751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>s,default:()=>i});let n=(0,r(86843).createProxy)(String.raw`/Users/samisha/Projects/drift-trading-ui/app/page.tsx`),{__esModule:s,$$typeof:a}=n,i=n.default}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[488,897,749,384],()=>r(3037));module.exports=n})();