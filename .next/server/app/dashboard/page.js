(()=>{var e={};e.id=702,e.ids=[702],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},6005:e=>{"use strict";e.exports=require("node:crypto")},41041:e=>{"use strict";e.exports=require("node:url")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},12536:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(50482),a=s(69108),n=s(62563),i=s.n(n),l=s(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,79865)),"/Users/samisha/Projects/drift-trading-ui/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,51076)),"/Users/samisha/Projects/drift-trading-ui/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/samisha/Projects/drift-trading-ui/app/dashboard/page.tsx"],u="/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},65714:(e,t,s)=>{Promise.resolve().then(s.bind(s,37075))},37075:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Z});var r,a=s(95344),n=s(37999),i=s(99119),l=s(87292),o=s(3729),c=s(74113),d=s(16212);let u=e=>{let t;let s=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),s.forEach(s=>s(t,e))}},a=()=>t,n={setState:r,getState:a,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},i=t=e(r,a,n);return n},m=e=>e?u(e):u;var x=s(31799);let{useDebugValue:p}=o,{useSyncExternalStoreWithSelector:g}=x,h=!1,b=e=>e,y=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?m(e):e,s=(e,s)=>(function(e,t=b,s){s&&!h&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),h=!0);let r=g(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return p(r),r})(t,e,s);return Object.assign(s,t),s};var f=s(44236),j=s(49618),v=s(44669);let N={connected:{address:"ConnectedWalletAbC...",subAccounts:[{id:0,name:"Primary",balances:[{symbol:"USDC",amount:5120.75,marketIndex:0},{symbol:"SOL",amount:1.25,marketIndex:1}],positions:[{market:"SOL-PERP",direction:"Long",entryPrice:120.5,size:.8,marketIndex:1,pnl:0}],orders:[{market:"BTC-PERP",type:"Limit",direction:"Short",price:72e3,size:.01,status:"Open",triggerPrice:0,marketIndex:2,marketType:"PERP"}],userAccount:{}},{id:1,name:"Scalping",balances:[{symbol:"USDC",amount:1050,marketIndex:0}],positions:[],orders:[],userAccount:{}},{id:2,name:"Testing",balances:[{symbol:"USDC",amount:250,marketIndex:0}],positions:[{market:"ETH-PERP",direction:"Short",entryPrice:3800,size:.1,marketIndex:3,pnl:0}],orders:[{market:"ETH-PERP",type:"Trigger",direction:"Long",triggerPrice:3750,size:.1,status:"Open",price:0,marketIndex:3,marketType:"PERP"}],userAccount:{}}]},arbitraryWalletXYZ:{address:"arbitraryWalletXYZ...",subAccounts:[{id:0,name:"Default",balances:[{symbol:"USDC",amount:100,marketIndex:0}],positions:[],orders:[],userAccount:{}}]}},P=["https://api.devnet.solana.com","https://devnet.helius-rpc.com/?api-key=76547270-226d-446d-8293-c1b3f8e8ea1b"].filter(Boolean),E=3,S=2e3;class w extends Error{constructor(e){super(e),this.name="RateLimitError"}}let C=e=>new Promise(t=>setTimeout(t,e)),k=e=>e*(1+.2*Math.random()),D=async(e,t,s=E,r=S)=>{try{return await e()}catch(i){if(i.message?.includes("429")||429===i.status||i.message?.toLowerCase().includes("rate limit"))throw console.warn(`Rate limit detected on ${t}. Switching endpoint.`),new w(`Rate limit hit on ${t}`);if(0===s)throw console.error(`Max retries reached on ${t}. Error:`,i),i;let a=Math.min(2*r,1e4),n=k(a);return console.log(`Retrying on ${t} in ${n/1e3}s (attempt ${E-s+1}/${E}). Error: ${i.message}`),await C(n),D(e,t,s-1,a)}},A=async e=>{console.log(`Attempting connection to RPC: ${e}`);let t=new j.Connection(e,"confirmed");return await t.getEpochInfo(),console.log(`Successfully connected to RPC: ${e}`),t},I=(e,t,s)=>{try{if(t===f.MarketType.SPOT){let t=s.getSpotMarketAccount(e);return t?.name?String(t.name).replace(/\0/g,"").trim():`Spot ${e}`}if(t===f.MarketType.PERP){let t=s.getPerpMarketAccount(e);return t?.name?String(t.name).replace(/\0/g,"").trim():`Perp ${e}`}}catch(t){console.warn(`Could not get symbol for market index ${e}`,t)}return`Unknown ${e}`},O=(e,t,s)=>({address:s,subAccounts:e.map(e=>{let s=e.subAccountId,r=[],a=[],n=[];return e.spotPositions.forEach(e=>{if(!e.scaledBalance.eq(f.ZERO)&&"Deposit"===(0,f.getVariant)(e.balanceType)){let s=t.getSpotMarketAccount(e.marketIndex);if(s){let a=(0,f.convertToNumber)(e.scaledBalance,s.decimals);r.push({symbol:I(e.marketIndex,f.MarketType.SPOT,t),amount:a,marketIndex:e.marketIndex})}}}),e.perpPositions.forEach(e=>{if(!e.baseAssetAmount.eq(f.ZERO)&&t.getPerpMarketAccount(e.marketIndex)){let s=(0,f.convertToNumber)(e.baseAssetAmount.abs(),f.BASE_PRECISION),r=(0,f.convertToNumber)((0,f.calculateEntryPrice)(e),f.PRICE_PRECISION);a.push({market:I(e.marketIndex,f.MarketType.PERP,t),direction:e.baseAssetAmount.gt(f.ZERO)?"Long":"Short",entryPrice:r,size:s,marketIndex:e.marketIndex,pnl:0})}}),e.orders.forEach(e=>{if("Open"===(0,f.getVariant)(e.status)){let s=I(e.marketIndex,e.marketType,t);n.push({market:s,type:(0,f.getVariant)(e.orderType),direction:(0,f.getVariant)(e.direction),price:(0,f.convertToNumber)(e.price,f.PRICE_PRECISION),size:(0,f.convertToNumber)(e.baseAssetAmount,f.BASE_PRECISION),triggerPrice:(0,f.convertToNumber)(e.triggerPrice,f.PRICE_PRECISION),status:(0,f.getVariant)(e.status),marketIndex:e.marketIndex,marketType:(0,f.getVariant)(e.marketType)})}}),{id:s,name:`Subaccount ${s}`,balances:r,positions:a,orders:n,userAccount:e}})}),T=(r=(e,t)=>({isConnected:!1,driftClient:null,connection:null,currentRpcEndpoint:null,isClientLoading:!1,clientError:null,connectedWalletAddress:null,connectedWalletData:null,userAccounts:[],selectedSubAccountId:0,isUserDataLoading:!1,userDataError:null,viewedWalletData:null,isViewerLoading:!1,viewerError:null,setWalletConnected:s=>{t().isConnected&&t().connectedWalletAddress===s.publicKey.toBase58()||(console.log("Store: Wallet Connected Hook Event",s.publicKey.toBase58()),e({isConnected:!0,connectedWalletAddress:s.publicKey.toBase58(),connectedWalletData:null,selectedSubAccountId:0,viewedWalletData:null,clientError:null,driftClient:null,connection:null,userAccounts:[],isUserDataLoading:!1,userDataError:null}),t().initializeDriftClient(s))},setWalletDisconnected:()=>{t().isConnected&&(console.log("Store: Wallet Disconnected Hook Event"),t().clearDriftClient(),e({isConnected:!1,connectedWalletAddress:null,connectedWalletData:null,selectedSubAccountId:0,viewedWalletData:null,clientError:null,userAccounts:[],isUserDataLoading:!1,userDataError:null}))},initializeDriftClient:async s=>{if(t().driftClient||t().isClientLoading){console.log("DriftClient initialization already in progress or completed.");return}e({isClientLoading:!0,clientError:null}),console.log("Attempting DriftClient Initialization...");let r=null,a=null,n="";for(let i=0;i<P.length;i++){e({currentRpcEndpoint:n=P[i]}),console.log(`Attempting init with endpoint ${i+1}/${P.length}: ${n}`);try{let i={connection:a=await D(()=>A(n),n),wallet:s,env:"devnet",opts:{commitment:"confirmed",skipPreflight:!1}};if(r=new f.DriftClient(i),"function"!=typeof r.subscribe)throw Error("Client initialization failed - subscribe method missing.");console.log(`DriftClient initialized successfully with ${n}`),e({driftClient:r,connection:a,isClientLoading:!1,clientError:null}),await r.subscribe(),console.log("DriftClient subscribed successfully."),await t().fetchConnectedUserData();return}catch(t){if(console.error(`Failed to initialize DriftClient with ${n}:`,t.message),r=null,a=null,t instanceof w)console.log("Rate limit hit, trying next endpoint..."),await C(1e3);else if(i<P.length-1)console.log("Error was not rate limit, trying next endpoint anyway..."),await C(1e3);else{e({driftClient:null,connection:null,isClientLoading:!1,clientError:`Failed to connect after trying all endpoints. Last error: ${t.message}`}),v.toast.error("Failed to initialize Drift Client.");return}}}},clearDriftClient:()=>{console.log("Clearing DriftClient instance...");let s=t().driftClient;s?.unsubscribe().catch(e=>console.error("Error unsubscribing:",e)),e({driftClient:null,connection:null,currentRpcEndpoint:null,clientError:null,isClientLoading:!1})},fetchConnectedUserData:async()=>{let s=t().driftClient,r=t().connectedWalletAddress;if(!s||!r)return console.log("Cannot fetch user data: Client or wallet address missing."),e({isUserDataLoading:!1,userDataError:"Client not ready or wallet disconnected."});if(!t().isUserDataLoading){console.log("Fetching real user data for:",r),e({isUserDataLoading:!0,userDataError:null});try{let a=new j.PublicKey(r),n=await s.getUserAccountsForAuthority(a);console.log("Fetched raw user accounts:",n);let i=O(n||[],s,r);console.log("Processed wallet data:",i),e({userAccounts:n||[],connectedWalletData:i,isUserDataLoading:!1,selectedSubAccountId:i.subAccounts.some(e=>e.id===t().selectedSubAccountId)?t().selectedSubAccountId:i.subAccounts[0]?.id??0})}catch(t){console.error("Error fetching user data:",t),e({userAccounts:[],connectedWalletData:null,isUserDataLoading:!1,userDataError:t.message}),v.toast.error("Failed to fetch account data.")}}},selectSubAccount:t=>e({selectedSubAccountId:t}),fetchDataForWallet:async t=>{e({isViewerLoading:!0,viewerError:null,viewedWalletData:null}),console.log(`Simulating fetch for wallet: ${t}`),await new Promise(e=>setTimeout(e,1e3)),e({viewedWalletData:N[t]||N.arbitraryWalletXYZ,isViewerLoading:!1}),console.log(`Simulated data loaded for: ${t}`)},placeMockOrder:t=>e(e=>{if(console.log("Placing mock order:",t),!e.connectedWalletData)return{};let s=e.connectedWalletData.subAccounts.map(s=>s.id===e.selectedSubAccountId?{...s,orders:[...s.orders,{...t,status:"Open"}]}:s);return{connectedWalletData:{...e.connectedWalletData,subAccounts:s}}}),mockDeposit:(t,s)=>e(e=>{if(console.log(`Mock deposit: ${t} ${s}`),!e.connectedWalletData)return{};let r=e.connectedWalletData.subAccounts.map(r=>{if(r.id===e.selectedSubAccountId){let e;return e=r.balances.find(e=>e.symbol===s)?r.balances.map(e=>e.symbol===s?{...e,amount:e.amount+t}:e):[...r.balances,{symbol:s,amount:t,marketIndex:0}],{...r,balances:e}}return r});return{connectedWalletData:{...e.connectedWalletData,subAccounts:r}}}),mockWithdraw:(t,s)=>e(e=>{if(console.log(`Mock withdraw: ${t} ${s}`),!e.connectedWalletData)return{};let r=e.connectedWalletData.subAccounts.map(r=>{if(r.id===e.selectedSubAccountId){let e=r.balances.map(e=>e.symbol===s?{...e,amount:Math.max(0,e.amount-t)}:e).filter(e=>e.amount>0);return{...r,balances:e}}return r});return{connectedWalletData:{...e.connectedWalletData,subAccounts:r}}})}))?y(r):y;var W=s(17470),R=s(1586),L=s(92549),$=s(60972),z=s(61351),q=s(49921),M=s(19868);let U=[{id:0,name:"Primary Trading",balance:"4,200 USDC",position:{market:"SOL-PERP",direction:"LONG",entry:156.2,size:1.2},openOrders:[{type:"LIMIT",side:"SHORT",market:"BTC-PERP",price:72e3}]},{id:1,name:"ETH Hedge",balance:"2,650 USDC",position:{market:"ETH-PERP",direction:"SHORT",entry:3245,size:.7},openOrders:[]},{id:2,name:"Altcoin Plays",balance:"1,000 USDC",position:null,openOrders:[{type:"MARKET",side:"BUY",market:"APT-PERP",size:.5}]}],_=()=>(0,a.jsxs)(z.Zb,{className:"max-w-7xl mx-auto shadow-lg rounded-xl border border-gray-700 bg-gray-800/50 backdrop-blur-sm mb-8",children:[a.jsx(z.Ol,{className:"border-b border-gray-700 p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center text-blue-300",children:[a.jsx(q.OZg,{className:"mr-3 text-xl"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"Wallet Overview"})]}),a.jsx("span",{className:"text-sm border border-blue-400 text-blue-300 px-2 py-0.5 rounded",children:"Mainnet-Beta"})]})}),(0,a.jsxs)(z.aY,{className:"p-4 md:p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(q.AEx,{className:"text-gray-500"}),(0,a.jsxs)("span",{children:[a.jsx("span",{className:"font-medium text-gray-200",children:"Address:"})," ","7gWk...Xd9E"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(q.a_$,{className:"text-gray-500"}),(0,a.jsxs)("span",{children:[a.jsx("span",{className:"font-medium text-gray-200",children:"Balance:"})," ","$12,834.56"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(q.qau,{className:"text-gray-500"}),(0,a.jsxs)("span",{children:[a.jsx("span",{className:"font-medium text-gray-200",children:"Transactions:"})," ",6]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[a.jsx(q.ArU,{className:"mr-3 text-xl text-indigo-300"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-100",children:"Subaccounts"})]}),a.jsx("div",{className:"grid gap-4 md:gap-6 md:grid-cols-2 lg:grid-cols-3",children:U.map(e=>(0,a.jsxs)(z.Zb,{className:"shadow-md border border-gray-700 bg-gray-800/70 flex flex-col",children:[a.jsx(z.Ol,{className:"p-3 bg-gray-700/50 rounded-t-lg",children:(0,a.jsxs)("h4",{className:"text-base font-semibold text-gray-200",children:["Subaccount #",e.id," ",(0,a.jsxs)("span",{className:"text-sm font-normal text-gray-400",children:["(",e.name,")"]})]})}),(0,a.jsxs)(z.aY,{className:"p-4 space-y-3 text-sm text-gray-400 flex-grow",children:[(0,a.jsxs)("p",{className:"flex items-center",children:[a.jsx(q.a_$,{className:"mr-2 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-200",children:"Balance:"})," ",e.balance]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-200 mb-1 flex items-center",children:[e.position?a.jsx(M.QqI,{className:"mr-2 text-gray-500"}):a.jsx(M.TCC,{className:"mr-2 text-gray-500"})," Position:"]}),e.position?(0,a.jsxs)("div",{className:"pl-4 text-xs space-y-1",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:`font-semibold ${"LONG"===e.position.direction?"text-green-400":"text-red-400"}`,children:e.position.direction})," ",e.position.market]}),(0,a.jsxs)("p",{children:["Entry: $",e.position.entry.toFixed(2)," | Size: ",e.position.size]})]}):a.jsx("p",{className:"italic pl-4",children:"No active positions"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-200 mb-1 flex items-center",children:[a.jsx(q.Z3q,{className:"mr-2 text-gray-500"})," Open Orders:"]}),e.openOrders.length>0?a.jsx("ul",{className:"list-disc list-inside pl-4 text-xs space-y-1",children:e.openOrders.map((e,t)=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("span",{className:`font-semibold ${"BUY"===e.side||"LONG"===e.side?"text-green-400":"text-red-400"}`,children:[e.type," ",e.side]})," ",e.market,"price"in e&&e.price?` @ $${e.price}`:"","size"in e&&e.size?` (Size: ${e.size})`:""]},t))}):a.jsx("p",{className:"italic pl-4",children:"No open orders"})]})]}),a.jsx(z.eW,{className:"p-3 bg-gray-700/30 rounded-b-lg mt-auto",children:a.jsx(d.z,{size:"sm",variant:"outline",className:"w-full text-xs",children:"Manage"})})]},e.id))})]})]})]}),B={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},F={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},V=(e,t=0)=>void 0!==e?e:t;function Z(){let{connected:e,publicKey:t,signTransaction:s,signAllTransactions:r}=(0,$.O)(),{connectedWalletData:u,selectedSubAccountId:m,selectSubAccount:x,isClientLoading:p,clientError:g,isUserDataLoading:h,userDataError:b,userAccounts:y,viewedWalletData:f,isViewerLoading:j,viewerError:v,fetchDataForWallet:N,setWalletConnected:P,setWalletDisconnected:E}=T(),[S,w]=(0,o.useState)("overview"),[C,k]=(0,o.useState)(!1),[D,A]=(0,o.useState)("");(0,o.useEffect)(()=>{k(!0)},[]),(0,o.useEffect)(()=>{e&&t&&s&&r?P({publicKey:t,signTransaction:s,signAllTransactions:r}):E()},[e,t,s,r,P,E]);let I=u?.subAccounts.find(e=>e.id===m);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 relative overflow-hidden",children:[a.jsx(c.Z,{}),(0,a.jsxs)("div",{className:"fixed inset-0 z-[-1] opacity-20",children:[a.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[400px] h-[400px] rounded-full bg-blue-500 blur-[60px] animate-pulse",style:{animationDuration:"12s"}}),a.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[400px] h-[400px] rounded-full bg-indigo-500 blur-[60px] animate-pulse",style:{animationDuration:"18s"}})]}),a.jsx(n.W,{}),a.jsx("main",{className:"pt-28 pb-12 px-4 sm:px-6 lg:px-8 relative z-10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex space-x-4 mb-8",children:[a.jsx("button",{className:`px-4 py-2 rounded-lg transition-all ${"overview"===S?"bg-primary text-black":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,onClick:()=>w("overview"),children:"Overview"}),a.jsx("button",{className:`px-4 py-2 rounded-lg transition-all ${"viewer"===S?"bg-primary text-black":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,onClick:()=>w("viewer"),children:"Wallet Viewer"})]}),e&&u&&u.subAccounts.length>1&&(0,a.jsxs)("div",{className:"mb-6 max-w-xs",children:[a.jsx(R._,{htmlFor:"subaccount-select",children:"Select Subaccount"}),(0,a.jsxs)(W.Ph,{value:m.toString(),onValueChange:e=>x(parseInt(e,10)),children:[a.jsx(W.i4,{id:"subaccount-select",children:a.jsx(W.ki,{placeholder:"Select subaccount"})}),a.jsx(W.Bw,{children:u.subAccounts.map(e=>(0,a.jsxs)(W.Ql,{value:e.id.toString(),children:[e.id," - ",e.name]},e.id))})]})]}),(0,a.jsxs)(i.M,{mode:"wait",children:["overview"===S&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[a.jsx(_,{}),e&&I&&a.jsx(l.E.div,{variants:B,initial:"hidden",animate:"show",className:"relative mt-8",children:a.jsx(H,{data:I})})]},"overview"),"viewer"===S&&a.jsx(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,a.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg glass-effect",children:[a.jsx("h3",{className:"text-lg font-semibold gradient-text",children:"View Arbitrary Wallet Data"}),(0,a.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,a.jsxs)("div",{className:"flex-grow space-y-2",children:[a.jsx(R._,{htmlFor:"wallet-address-input",children:"Wallet Address"}),a.jsx(L.I,{id:"wallet-address-input",value:D,onChange:e=>A(e.target.value),placeholder:"Enter wallet address (e.g., arbitraryWalletXYZ)",className:"w-full"})]}),a.jsx(d.z,{onClick:()=>{D&&N(D)},disabled:j||!D,children:j?"Loading...":"Fetch Data"})]}),v&&(0,a.jsxs)("p",{className:"text-red-500",children:["Error: ",v]}),f&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-gray-800 bg-opacity-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"font-medium mb-2",children:["Data for: ",f.address]}),f.subAccounts.map(e=>a.jsx(H,{data:e},e.id))]})]})},"viewer")]})]})})]})}function H({data:e}){return(0,a.jsxs)(l.E.div,{variants:F,className:"mb-8 p-6 rounded-xl shadow-lg glass-effect glow-effect-sm",children:[(0,a.jsxs)("h3",{className:"text-xl font-semibold mb-4 gradient-text",children:["Subaccount ",e.id,": ",e.name]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-300 border-b border-gray-700 pb-1 mb-2",children:"Balances"}),e.balances.length>0?e.balances.map(e=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:[e.symbol,":"]}),a.jsx("span",{className:"font-mono",children:e.amount.toFixed(2)})]},e.symbol)):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No balances"}),a.jsx(Q,{subAccountId:e.id})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-300 border-b border-gray-700 pb-1 mb-2",children:"Perp Positions"}),e.positions.length>0?e.positions.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm p-2 bg-gray-800 rounded",children:[a.jsx("span",{className:`${"Long"===e.direction?"text-green-400":"text-red-400"}`,children:e.direction})," ",e.market,(0,a.jsxs)("div",{children:["Size: ",e.size," @ $",e.entryPrice.toFixed(2)]}),void 0!==e.pnl&&(0,a.jsxs)("div",{className:`${e.pnl>=0?"text-green-500":"text-red-500"}`,children:["PnL: $",e.pnl.toFixed(2)]})]},t)):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No open positions"}),a.jsx(Y,{subAccountId:e.id})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-300 border-b border-gray-700 pb-1 mb-2",children:"Open Orders"}),e.orders.length>0?e.orders.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm p-2 bg-gray-800 rounded",children:[e.type," ",a.jsx("span",{className:`${"Long"===e.direction?"text-green-400":"text-red-400"}`,children:e.direction})," ",e.market,(0,a.jsxs)("div",{children:["Size: ",e.size," ",e.price?`@ $${e.price}`:"Market"," ",e.triggerPrice?`(Trigger: ${e.triggerPrice})`:""]}),(0,a.jsxs)("div",{children:["Status: ",e.status]})]},t)):a.jsx("p",{className:"text-sm text-gray-500 italic",children:"No open orders"})]})]})]})}function Q({subAccountId:e}){let[t,s]=(0,o.useState)(""),[r,n]=(0,o.useState)("USDC"),{mockDeposit:i,mockWithdraw:l}=T();return(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700 space-y-2",children:[a.jsx(R._,{className:"text-xs text-gray-400",children:"Simulate Deposit/Withdraw"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(L.I,{type:"number",placeholder:"Amount",value:t,onChange:e=>s(e.target.value),className:"flex-grow",min:"0"}),(0,a.jsxs)(W.Ph,{value:r,onValueChange:n,children:[a.jsx(W.i4,{className:"w-[100px]",children:a.jsx(W.ki,{placeholder:"Token"})}),(0,a.jsxs)(W.Bw,{children:[a.jsx(W.Ql,{value:"USDC",children:"USDC"}),a.jsx(W.Ql,{value:"SOL",children:"SOL"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(d.z,{onClick:()=>{let e=parseFloat(t);!isNaN(e)&&e>0&&(i(e,r),s(""))},size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",children:"Deposit"}),a.jsx(d.z,{onClick:()=>{let e=parseFloat(t);!isNaN(e)&&e>0&&(l(e,r),s(""))},size:"sm",className:"flex-1",variant:"destructive",children:"Withdraw"})]})]})}function Y({subAccountId:e}){let[t,s]=(0,o.useState)("Long"),[r,n]=(0,o.useState)("Market"),[i,l]=(0,o.useState)("SOL-PERP"),[c,u]=(0,o.useState)(""),[m,x]=(0,o.useState)(""),{placeMockOrder:p}=T();return(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700 space-y-3",children:[a.jsx(R._,{className:"text-xs text-gray-400",children:"Simulate Perp Order"}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)(W.Ph,{value:i,onValueChange:l,children:[a.jsx(W.i4,{children:a.jsx(W.ki,{placeholder:"Market"})}),(0,a.jsxs)(W.Bw,{children:[a.jsx(W.Ql,{value:"SOL-PERP",children:"SOL-PERP"}),a.jsx(W.Ql,{value:"BTC-PERP",children:"BTC-PERP"}),a.jsx(W.Ql,{value:"ETH-PERP",children:"ETH-PERP"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(W.Ph,{value:t,onValueChange:e=>s(e),children:[a.jsx(W.i4,{children:a.jsx(W.ki,{placeholder:"Side"})}),(0,a.jsxs)(W.Bw,{children:[a.jsx(W.Ql,{value:"Long",children:"Long"}),a.jsx(W.Ql,{value:"Short",children:"Short"})]})]}),(0,a.jsxs)(W.Ph,{value:r,onValueChange:e=>n(e),children:[a.jsx(W.i4,{children:a.jsx(W.ki,{placeholder:"Type"})}),(0,a.jsxs)(W.Bw,{children:[a.jsx(W.Ql,{value:"Market",children:"Market"}),a.jsx(W.Ql,{value:"Limit",children:"Limit"})]})]})]}),a.jsx(L.I,{type:"number",placeholder:"Size",value:c,onChange:e=>u(e.target.value),min:"0"}),"Limit"===r&&a.jsx(L.I,{type:"number",placeholder:"Limit Price",value:m,onChange:e=>x(e.target.value),min:"0"})]}),a.jsx(d.z,{onClick:()=>{let e=parseFloat(c),s=parseFloat(m);!isNaN(e)&&e>0&&(p({market:i,direction:t,type:r,size:e,price:V(s),triggerPrice:0,marketIndex:0,marketType:"PERP"}),u(""),x(""))},size:"sm",className:"w-full",children:"Place Mock Order"})]})}},41245:(e,t,s)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(3729);"function"==typeof Object.is&&Object.is,r.useState,r.useEffect,r.useLayoutEffect,r.useDebugValue,t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:function(e,t){return t()}},79409:(e,t,s)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=s(3729),a=s(15349),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,l=r.useRef,o=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,s,r,a){var u=l(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var x=i(e,(u=c(function(){function e(e){if(!o){if(o=!0,i=e,e=r(e),void 0!==a&&m.hasValue){var t=m.value;if(a(t,e))return l=t}return l=e}if(t=l,n(i,e))return t;var s=r(e);return void 0!==a&&a(t,s)?(i=e,t):(i=e,l=s)}var i,l,o=!1,c=void 0===s?null:s;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,s,r,a]))[0],u[1]);return o(function(){m.hasValue=!0,m.value=x},[x]),d(x),x}},15349:(e,t,s)=>{"use strict";e.exports=s(41245)},31799:(e,t,s)=>{"use strict";e.exports=s(79409)},79865:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(86843).createProxy)(String.raw`/Users/samisha/Projects/drift-trading-ui/app/dashboard/page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[488,897,749,384],()=>s(12536));module.exports=r})();